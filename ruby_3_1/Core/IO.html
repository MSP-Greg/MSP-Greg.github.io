<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: IO &mdash; Core  Ruby-3.1.7 p261</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "IO",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../.'>Ruby-3.1.7</a> &raquo; 
      <a href='.'>Core</a> &raquo; 
      <a href='_index.html#alpha_I'>Index (I)</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>IO&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: IO</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="IO/WaitReadable.html" title="IO::WaitReadable (module)"><code>WaitReadable</code></a>,
        <a href="IO/WaitWritable.html" title="IO::WaitWritable (module)"><code>WaitWritable</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a href="IO/Buffer.html" title="IO::Buffer (class)"><code>Buffer</code></a>,
        <a href="IO/EAGAINWaitReadable.html" title="IO::EAGAINWaitReadable (class)"><code>EAGAINWaitReadable</code></a>,
        <a href="IO/EAGAINWaitWritable.html" title="IO::EAGAINWaitWritable (class)"><code>EAGAINWaitWritable</code></a>,
        <a href="IO/EINPROGRESSWaitReadable.html" title="IO::EINPROGRESSWaitReadable (class)"><code>EINPROGRESSWaitReadable</code></a>,
        <a href="IO/EINPROGRESSWaitWritable.html" title="IO::EINPROGRESSWaitWritable (class)"><code>EINPROGRESSWaitWritable</code></a>,
        <a href="IO/EWOULDBLOCKWaitReadable.html" title="IO::EWOULDBLOCKWaitReadable (class)"><code>EWOULDBLOCKWaitReadable</code></a>,
        <a href="IO/EWOULDBLOCKWaitWritable.html" title="IO::EWOULDBLOCKWaitWritable (class)"><code>EWOULDBLOCKWaitWritable</code></a>      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Subclasses:</div>
        <div class='box_22'>
          <a href="File.html" title="File (class)">File</a>
        </div>
      </td>
    </tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="Enumerable.html" title="Enumerable (module)"><code>::Enumerable</code></a>,
          <a href="File/Constants.html" title="File::Constants (module)"><code>::File::Constants</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L14174'>io.c</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/file.c#L1388'>file.c</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.rb#L1'>io.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>The IO class is the basis for all input and output in Ruby. An I/O stream may be <em>duplexed</em> (that is, bidirectional), and so may use more than one native operating system stream.</p>

<p>Many of the examples in this section use the <a href="File.html" title="File (class)"><code>::File</code></a> class, the only standard subclass of <code>IO</code>. The two classes are closely associated.  Like the <a href="File.html" title="File (class)"><code>::File</code></a> class, the Socket library subclasses from <code>IO</code> (such as TCPSocket or UDPSocket).</p>

<p>The <a href="Kernel.html#open-class_method" title="Kernel.open (method)">Kernel.open</a> method can create an <code>IO</code> (or <a href="File.html" title="File (class)"><code>::File</code></a>) object for these types of arguments:</p>
<ul><li>
<p>A plain string represents a filename suitable for the underlying operating system.</p>
</li><li>
<p>A string starting with <code>&quot;|&quot;</code> indicates a subprocess. The remainder of the string following the <code>&quot;|&quot;</code> is invoked as a process with appropriate input/output channels connected to it.</p>
</li><li>
<p>A string equal to <code>&quot;|-&quot;</code> will create another Ruby instance as a subprocess.</p>
</li></ul>

<p>The IO may be opened with different file modes (read-only, write-only) and encodings for proper conversion.  See <a href="#new-class_method" title="IO.new (method)">.new</a> for these options.  See <a href="Kernel.html#open-class_method" title="Kernel.open (method)">Kernel.open</a> for details of the various command formats described above.</p>

<p><a href="#popen-class_method" title="IO.popen (method)">.popen</a>, the Open3 library, or  <code>Process#spawn</code> may also be used to communicate with subprocesses through an <code>IO</code>.</p>

<p>Ruby will convert pathnames between different operating system conventions if possible.  For instance, on a Windows system the filename <code>&quot;/gumby/ruby/test.rb&quot;</code> will be opened as <code>&quot;\gumby\ruby\test.rb&quot;</code>.  When specifying a Windows-style filename in a Ruby string, remember to escape the backslashes:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>C:\\gumby\\ruby\\test.rb</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>Our examples here will use the Unix-style forward slashes; <a href="File.html#ALT_SEPARATOR-constant" title="File::ALT_SEPARATOR (constant)">File::ALT_SEPARATOR</a> can be used to get the platform-specific separator character.</p>

<p>The global constant <a href="ARGF.html" title="ARGF (class)"><code>::ARGF</code></a> (also accessible as <code>$&lt;</code>) provides an IO-like stream which allows access to all files mentioned on the command line (or <a href="top-level-namespace.html#STDIN-constant" title="STDIN (constant)">STDIN</a> if no files are mentioned). <a href="ARGF.html#path-instance_method" title="ARGF#path (method)">ARGF#path</a> and its alias <a href="ARGF.html#filename-instance_method" title="ARGF#filename (method)">ARGF#filename</a> are provided to access the name of the file currently being read.</p>

<h3 id="label-io-2Fconsole">io/console</h3>

<p>The io/console extension provides methods for interacting with the console.  The console can be accessed from <code>IO.console</code> or the standard input/output/error <code>IO</code> objects.</p>

<p>Requiring io/console adds the following methods:</p>
<ul><li>
<p><code>IO.console</code></p>
</li><li>
<p><code>IO#raw</code></p>
</li><li>
<p><code>IO#raw!</code></p>
</li><li>
<p><code>IO#cooked</code></p>
</li><li>
<p><code>IO#cooked!</code></p>
</li><li>
<p><code>IO#getch</code></p>
</li><li>
<p><code>IO#echo=</code></p>
</li><li>
<p><code>IO#echo?</code></p>
</li><li>
<p><code>IO#noecho</code></p>
</li><li>
<p><code>IO#winsize</code></p>
</li><li>
<p><code>IO#winsize=</code></p>
</li><li>
<p><code>IO#iflush</code></p>
</li><li>
<p><code>IO#ioflush</code></p>
</li><li>
<p><code>IO#oflush</code></p>
</li></ul>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>io/console</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_rows'>rows</span><span class='comma'>,</span> <span class='id identifier rubyid_columns'>columns</span> <span class='op'>=</span> <span class='gvar'>$stdout</span>.<span class='id identifier rubyid_winsize'>winsize</span>
<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Your screen is </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_columns'>columns</span><span class='embexpr_end'>}</span><span class='tstring_content'> wide and </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_rows'>rows</span><span class='embexpr_end'>}</span><span class='tstring_content'> tall</span><span class='tstring_end'>&quot;</span></span></code></pre>

<h3 id="label-Example+Files">Example Files</h3>

<p>Many examples here use these filenames and their corresponding files:</p>
<ul><li>
<p><code>t.txt</code>: A text-only file that is assumed to exist via:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_text'>text</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;~EOT</span>
<span class='ignored_sp'>  </span><span class='tstring_content'>This is line one.
</span><span class='ignored_sp'>  </span><span class='tstring_content'>This is the second line.
</span><span class='ignored_sp'>  </span><span class='tstring_content'>This is the third line.
</span><span class='heredoc_end'>EOT
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_write'><a href="#write-class_method" title="IO.write (method)">write</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_text'>text</span>)</code></pre>
</li><li>
<p><code>t.dat</code>: A data file that is assumed to exist via:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u9990\u9991\u9992\u9993\u9994</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.dat</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>wb:UTF-16</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_write'><a href="#write-class_method" title="IO.write (method)">write</a></span>(<span class='id identifier rubyid_data'>data</span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>
</li><li>
<p><code>t.rus</code>: A Russian-language text file that is assumed to exist via:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_write'><a href="#write-class_method" title="IO.write (method)">write</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.rus</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u{442 435 441 442}</span><span class='tstring_end'>&quot;</span></span>)</code></pre>
</li><li>
<p><code>t.tmp</code>: A file that is assumed <em>not</em> to exist.</p>
</li></ul>

<h3 id="label-Modes">Modes</h3>

<p>A number of IO method calls must or may specify a <em>mode</em> for the stream; the mode determines how stream is to be accessible, including:</p>
<ul><li>
<p>Whether the stream is to be read-only, write-only, or read-write.</p>
</li><li>
<p>Whether the stream is positioned at its beginning or its end.</p>
</li><li>
<p>Whether the stream treats data as text-only or binary.</p>
</li><li>
<p>The external and internal encodings.</p>
</li></ul>

<h4 id="label-Mode+Specified+as+an+Integer">Mode Specified as an Integer</h4>

<p>When <code>mode</code> is an integer it must be one or more (combined by bitwise OR (<code>|</code>) of the modes defined in <a href="File/Constants.html" title="File::Constants (module)"><code>::File::Constants</code></a>:</p>
<ul><li>
<p><code>File::RDONLY</code>: Open for reading only.</p>
</li><li>
<p><code>File::WRONLY</code>: Open for writing only.</p>
</li><li>
<p><code>File::RDWR</code>: Open for reading and writing.</p>
</li><li>
<p><code>File::APPEND</code>: Open for appending only.</p>
</li><li>
<p><code>File::CREAT</code>: Create file if it does not exist.</p>
</li><li>
<p><code>File::EXCL</code>: Raise an exception if <code>File::CREAT</code> is given and the file exists.</p>
</li></ul>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='const'><a href="File.html" title="File (class)">File</a></span><span class='op'>::</span><span class='const'><a href="File/Constants.html#RDONLY-constant" title="File::Constants::RDONLY (constant)">RDONLY</a></span>)
<span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='const'><a href="File.html" title="File (class)">File</a></span><span class='op'>::</span><span class='const'><a href="File/Constants.html#RDWR-constant" title="File::Constants::RDWR (constant)">RDWR</a></span> <span class='op'>|</span> <span class='const'><a href="File.html" title="File (class)">File</a></span><span class='op'>::</span><span class='const'><a href="File/Constants.html#CREAT-constant" title="File::Constants::CREAT (constant)">CREAT</a></span> <span class='op'>|</span> <span class='const'><a href="File.html" title="File (class)">File</a></span><span class='op'>::</span><span class='const'><a href="File/Constants.html#EXCL-constant" title="File::Constants::EXCL (constant)">EXCL</a></span>)</code></pre>

<p>Note: <a href="Method.html" title="Method (class)"><code>::Method</code></a> <a href="#set_encoding-instance_method" title="IO#set_encoding (method)">#set_encoding</a> does not allow the mode to be specified as an integer.</p>

<h4 id="label-Mode+Specified+As+a+String">Mode Specified As a String</h4>

<p>When <code>mode</code> is a string it must begin with one of the following:</p>
<ul><li>
<p><code>&#39;r&#39;</code>: Read-only stream, positioned at the beginning; the stream cannot be changed to writable.</p>
</li><li>
<p><code>&#39;w&#39;</code>: Write-only stream, positioned at the beginning; the stream cannot be changed to readable.</p>
</li><li>
<p><code>&#39;a&#39;</code>: Write-only stream, positioned at the end; every write appends to the end; the stream cannot be changed to readable.</p>
</li><li>
<p><code>&#39;r+&#39;</code>: Read-write stream, positioned at the beginning.</p>
</li><li>
<p><code>&#39;w+&#39;</code>: Read-write stream, positioned at the end.</p>
</li><li>
<p><code>&#39;a+&#39;</code>: Read-write stream, positioned at the end.</p>
</li></ul>

<p>For a writable file stream (that is, any except read-only), the file is truncated to zero if it exists, and is created if it does not exist.</p>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span>)
<span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span>)</code></pre>

<p>Either of the following may be suffixed to any of the above:</p>
<ul><li>
<p><code>&#39;t&#39;</code>: Text data; sets the default external encoding to <code>Encoding::UTF_8</code>; on Windows, enables conversion between EOL and CRLF.</p>
</li><li>
<p><code>&#39;b&#39;</code>: Binary data; sets the default external encoding to <code>Encoding::ASCII_8BIT</code>; on Windows, suppresses conversion between EOL and CRLF.</p>
</li></ul>

<p>If neither is given, the stream defaults to text data.</p>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rt</span><span class='tstring_end'>&#39;</span></span>)
<span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.dat</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rb</span><span class='tstring_end'>&#39;</span></span>)</code></pre>

<p>The following may be suffixed to any writable mode above:</p>
<ul><li>
<p><code>&#39;x&#39;</code>: Creates the file if it does not exist; raises an exception if the file exists.</p>
</li></ul>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>wx</span><span class='tstring_end'>&#39;</span></span>)</code></pre>

<p>Finally, the mode string may specify encodings – either external encoding only or both external and internal encodings – by appending one or both encoding names, separated by colons:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.dat</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rb</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_external_encoding'><a href="#external_encoding-instance_method" title="IO#external_encoding (method)">external_encoding</a></span> <span class='comment'># =&gt; #&lt;Encoding:ASCII-8BIT&gt;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_internal_encoding'><a href="#internal_encoding-instance_method" title="IO#internal_encoding (method)">internal_encoding</a></span> <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.dat</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rb:UTF-16</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_external_encoding'><a href="#external_encoding-instance_method" title="IO#external_encoding (method)">external_encoding</a></span> <span class='comment'># =&gt; #&lt;Encoding:UTF-16 (dummy)&gt;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_internal_encoding'><a href="#internal_encoding-instance_method" title="IO#internal_encoding (method)">internal_encoding</a></span> <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.dat</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rb:UTF-16:UTF-16</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_external_encoding'><a href="#external_encoding-instance_method" title="IO#external_encoding (method)">external_encoding</a></span> <span class='comment'># =&gt; #&lt;Encoding:UTF-16 (dummy)&gt;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_internal_encoding'><a href="#internal_encoding-instance_method" title="IO#internal_encoding (method)">internal_encoding</a></span> <span class='comment'># =&gt; #&lt;Encoding:UTF-16&gt;</span></code></pre>

<p>The numerous encoding names are available in array <a href="Encoding.html#name_list-class_method" title="Encoding.name_list (method)">Encoding.name_list</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="Encoding.html" title="Encoding (class)">Encoding</a></span>.<span class='id identifier rubyid_name_list'><a href="Encoding.html#name_list-class_method" title="Encoding.name_list (method)">name_list</a></span>.<span class='id identifier rubyid_size'><a href="Array.html#size-instance_method" title="Array#size (method)">size</a></span>    <span class='comment'># =&gt; 175
</span><span class='const'><a href="Encoding.html" title="Encoding (class)">Encoding</a></span>.<span class='id identifier rubyid_name_list'><a href="Encoding.html#name_list-class_method" title="Encoding.name_list (method)">name_list</a></span>.<span class='id identifier rubyid_take'><a href="Array.html#take-instance_method" title="Array#take (method)">take</a></span>(<span class='int'>3</span>) <span class='comment'># =&gt; [&quot;ASCII-8BIT&quot;, &quot;UTF-8&quot;, &quot;US-ASCII&quot;]</span></code></pre>

<h3 id="label-Encodings">Encodings</h3>

<p>When the external encoding is set, strings read are tagged by that encoding when reading, and strings written are converted to that encoding when writing.</p>

<p>When both external and internal encodings are set, strings read are converted from external to internal encoding, and strings written are converted from internal to external encoding. For further details about transcoding input and output, see <a href="Encoding.html" title="Encoding (class)"><code>::Encoding</code></a>.</p>

<p>If the external encoding is <code>&#39;BOM|UTF-8&#39;</code>, <code>&#39;BOM|UTF-16LE&#39;</code> or <code>&#39;BOM|UTF16-BE&#39;</code>, Ruby checks for a Unicode BOM in the input document to help determine the encoding.  For UTF-16 encodings the file open mode must be binary. If the BOM is found, it is stripped and the external encoding from the BOM is used.</p>

<p>Note that the BOM-style encoding option is case insensitive, so ‘bom|utf-8’ is also valid.)</p>

<h3 id="label-Open+Options">Open Options</h3>

<p>A number of IO methods accept an optional parameter <code>opts</code>, which determines how a new stream is to be opened:</p>
<ul><li>
<p><code>:mode</code>: Stream mode.</p>
</li><li>
<p><code>:flags</code>: Integer file open flags; If <code>mode</code> is also given, the two are bitwise-ORed.</p>
</li><li>
<p><code>:external_encoding</code>: External encoding for the stream.</p>
</li><li>
<p><code>:internal_encoding</code>: Internal encoding for the stream. <code>&#39;-&#39;</code> is a synonym for the default internal encoding. If the value is <code>nil</code> no conversion occurs.</p>
</li><li>
<p><code>:encoding</code>: Specifies external and internal encodings as <code>&#39;extern:intern&#39;</code>.</p>
</li><li>
<p><code>:textmode</code>: If a truthy value, specifies the mode as text-only, binary otherwise.</p>
</li><li>
<p><code>:binmode</code>: If a truthy value, specifies the mode as binary, text-only otherwise.</p>
</li><li>
<p><code>:autoclose</code>: If a truthy value, specifies that the <code>fd</code> will close when the stream closes; otherwise it remains open.</p>
</li></ul>

<p>Also available are the options offered in <a href="String.html#encode-instance_method" title="String#encode (method)">String#encode</a>, which may control conversion between external internal encoding.</p>

<h3 id="label-Getline+Options">Getline Options</h3>

<p>A number of IO methods accept optional keyword arguments that determine how a stream is to be treated:</p>
<ul><li>
<p><code>:chomp</code>: If <code>true</code>, line separators are omitted; default is  <code>false</code>.</p>
</li></ul>

<h3 id="label-Position">Position</h3>

<p>An IO stream has a <em>position</em>, which is the non-negative integer offset (in bytes) in the stream where the next read or write will occur.</p>

<p>Note that a text stream may have multi-byte characters, so a text stream whose position is <code>n</code> (<em>bytes</em>) may not have <code>n</code> <em>characters</em> preceding the current position – there may be fewer.</p>

<p>A new stream is initially positioned:</p>
<ul><li>
<p>At the beginning (position <code>0</code>) if its mode is <code>&#39;r&#39;</code>, <code>&#39;w&#39;</code>, or <code>&#39;r+&#39;</code>.</p>
</li><li>
<p>At the end (position <code>self.size</code>) if its mode is <code>&#39;a&#39;</code>, <code>&#39;w+&#39;</code>, or <code>&#39;a+&#39;</code>.</p>
</li></ul>

<p>Methods to query the position:</p>
<ul><li>
<p><a href="#tell-instance_method" title="IO#tell (method)">#tell</a> and its alias <a href="#pos-instance_method" title="IO#pos (method)">#pos</a> return the position for an open stream.</p>
</li><li>
<p><a href="#eof%3F-instance_method" title="IO#eof? (method)">#eof?</a> and its alias <a href="#eof-instance_method" title="IO#eof (method)">#eof</a> return whether the position is at the end of a readable stream.</p>
</li></ul>

<p>Reading from a stream usually changes its position:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>     <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readline'><a href="#readline-instance_method" title="IO#readline (method)">readline</a></span> <span class='comment'># =&gt; &quot;This is line one.\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>     <span class='comment'># =&gt; 19
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readline'><a href="#readline-instance_method" title="IO#readline (method)">readline</a></span> <span class='comment'># =&gt; &quot;This is the second line.\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>     <span class='comment'># =&gt; 45
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_eof?'><a href="#eof%3F-instance_method" title="IO#eof? (method)">eof?</a></span>     <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readline'><a href="#readline-instance_method" title="IO#readline (method)">readline</a></span> <span class='comment'># =&gt; &quot;Here&#39;s the third line.\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_eof?'><a href="#eof%3F-instance_method" title="IO#eof? (method)">eof?</a></span>     <span class='comment'># =&gt; true</span></code></pre>

<p>Writing to a stream usually changes its position:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>         <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_write'><a href="#write-class_method" title="IO.write (method)">write</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; 3
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>         <span class='comment'># =&gt; 3
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_write'><a href="#write-class_method" title="IO.write (method)">write</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; 3
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>         <span class='comment'># =&gt; 6</span></code></pre>

<p>Iterating over a stream usually changes its position:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_each'><a href="#each-instance_method" title="IO#each (method)">each</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
  <span class='id identifier rubyid_p'>p</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>position=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="IO#pos (method)">pos</a></span><span class='embexpr_end'>}</span><span class='tstring_content'> eof?=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_eof?'><a href="#eof%3F-instance_method" title="IO#eof? (method)">eof?</a></span><span class='embexpr_end'>}</span><span class='tstring_content'> line=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_line'>line</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>position=19 eof?=false line=This is line one.\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>position=45 eof?=false line=This is the second line.\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>position=70 eof?=true line=This is the third line.\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>The position may also be changed by certain other methods:</p>
<ul><li>
<p><a href="#pos=-instance_method" title="IO#pos= (method)">#pos=</a> and <a href="#seek-instance_method" title="IO#seek (method)">#seek</a> change the position to a specified offset.</p>
</li><li>
<p><a href="#rewind-instance_method" title="IO#rewind (method)">#rewind</a> changes the position to the beginning.</p>
</li></ul>

<h3 id="label-Line+Number">Line Number</h3>

<p>A readable IO stream has a <em>line</em> <em>number</em>, which is the non-negative integer line number in the stream where the next read will occur.</p>

<p>A new stream is initially has line number <code>0</code>.</p>

<p>Method <a href="#lineno-instance_method" title="IO#lineno (method)">#lineno</a> returns the line number.</p>

<p>Reading lines from a stream usually changes its line number:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="IO#lineno (method)">lineno</a></span>   <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readline'><a href="#readline-instance_method" title="IO#readline (method)">readline</a></span> <span class='comment'># =&gt; &quot;This is line one.\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="IO#lineno (method)">lineno</a></span>   <span class='comment'># =&gt; 1
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readline'><a href="#readline-instance_method" title="IO#readline (method)">readline</a></span> <span class='comment'># =&gt; &quot;This is the second line.\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="IO#lineno (method)">lineno</a></span>   <span class='comment'># =&gt; 2
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readline'><a href="#readline-instance_method" title="IO#readline (method)">readline</a></span> <span class='comment'># =&gt; &quot;Here&#39;s the third line.\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="IO#lineno (method)">lineno</a></span>   <span class='comment'># =&gt; 3
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_eof?'><a href="#eof%3F-instance_method" title="IO#eof? (method)">eof?</a></span>     <span class='comment'># =&gt; true</span></code></pre>

<p>Iterating over lines in a stream usually changes its line number:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_each_line'><a href="#each_line-instance_method" title="IO#each_line (method)">each_line</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
  <span class='id identifier rubyid_p'>p</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>position=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="IO#pos (method)">pos</a></span><span class='embexpr_end'>}</span><span class='tstring_content'> eof?=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_eof?'><a href="#eof%3F-instance_method" title="IO#eof? (method)">eof?</a></span><span class='embexpr_end'>}</span><span class='tstring_content'> line=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_line'>line</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>position=19 eof?=false line=This is line one.\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>position=45 eof?=false line=This is the second line.\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>position=70 eof?=true line=This is the third line.\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<h3 id="label-What-27s+Here">What’s Here</h3>

<p>First, what’s elsewhere. Class IO:</p>
<ul><li>
<p>Inherits from [class Object](Object.html#class-Object-label-What-27s+Here).</p>
</li><li>
<p>Includes [module Enumerable](Enumerable.html#module-Enumerable-label-What-27s+Here), which provides dozens of additional methods.</p>
</li></ul>

<p>Here, class IO provides methods that are useful for:</p>
<ul><li>
<p><a href='#label-Creating'>Creating</a></p>
</li><li>
<p><a href='#label-Reading'>Reading</a></p>
</li><li>
<p><a href='#label-Writing'>Writing</a></p>
</li><li>
<p><a href='#label-Positioning'>Positioning</a></p>
</li><li>
<p><a href='#label-Iterating'>Iterating</a></p>
</li><li>
<p><a href='#label-Settings'>Settings</a></p>
</li><li>
<p><a href='#label-Querying'>Querying</a></p>
</li><li>
<p><a href='#label-Buffering'>Buffering</a></p>
</li><li>
<p><a href='#label-Low-Level+Access'>Low-Level Access</a></p>
</li><li>
<p><a href='#label-Other'>Other</a></p>
</li></ul>

<h4 id="label-Creating">Creating</h4>
<ul><li><dl class="rdoc-list note-list"><dt><a href="#new-class_method" title="IO.new (method)">.new</a> (aliased as <a href="#for_fd-class_method" title="IO.for_fd (method)">.for_fd</a>)</dt>
<dd>
<p>Creates and returns a new IO object for the given</p>
</dd></dl>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_integer'>integer</span> <span class='id identifier rubyid_file'>file</span> <span class='id identifier rubyid_descriptor'>descriptor</span>.</code></pre>
</li><li><dl class="rdoc-list note-list"><dt>::open</dt>
<dd>
<p>Creates a new IO object.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>::pipe</dt>
<dd>
<p>Creates a connected pair of reader and writer IO objects.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>::popen</dt>
<dd>
<p>Creates an IO object to interact with a subprocess.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>::select</dt>
<dd>
<p>Selects which given IO instances are ready for reading,</p>
</dd></dl>

<p>writing, or have pending exceptions.</p>
</li></ul>

<h4 id="label-Reading">Reading</h4>
<ul><li><dl class="rdoc-list note-list"><dt>::binread</dt>
<dd>
<p>Returns a binary string with all or a subset of bytes from the given file.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>::read</dt>
<dd>
<p>Returns a string with all or a subset of bytes from the given file.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>::readlines</dt>
<dd>
<p>Returns an array of strings, which are the lines from the given file.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#getbyte</dt>
<dd>
<p>Returns the next 8-bit byte read from <code>self</code> as an integer.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#getc</dt>
<dd>
<p>Returns the next character read from <code>self</code> as a string.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#gets</dt>
<dd>
<p>Returns the line read from <code>self</code>.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#pread</dt>
<dd>
<p>Returns all or the next <em>n</em> bytes read from <code>self</code>, not updating the receiver’s offset.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#read</dt>
<dd>
<p>Returns all remaining or the next <em>n</em> bytes read from <code>self</code> for a given <em>n</em>.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#read_nonblock</dt>
<dd>
<p>the next <em>n</em> bytes read from <code>self</code> for a given <em>n</em>, in non-block mode.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#readbyte</dt>
<dd>
<p>Returns the next byte read from <code>self</code>; same as #getbyte, but raises an exception on end-of-file.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#readchar</dt>
<dd>
<p>Returns the next character read from <code>self</code>; same as #getc, but raises an exception on end-of-file.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#readline</dt>
<dd>
<p>Returns the next line read from <code>self</code>; same as #getline, but raises an exception of end-of-file.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#readlines</dt>
<dd>
<p>Returns an array of all lines read read from <code>self</code>.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#readpartial</dt>
<dd>
<p>Returns up to the given number of bytes from <code>self</code>.</p>
</dd></dl>
</li></ul>

<h4 id="label-Writing">Writing</h4>
<ul><li><dl class="rdoc-list note-list"><dt>::binwrite</dt>
<dd>
<p>Writes the given string to the file at the given filepath,</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>in</span> <span class='id identifier rubyid_binary'>binary</span> <span class='id identifier rubyid_mode'>mode</span>.</code></pre>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>::write</dt>
<dd>
<p>Writes the given string to <code>self</code>.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt><code>::&lt;&lt;</code></dt>
<dd>
<p>Appends the given string to <code>self</code>.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#print</dt>
<dd>
<p>Prints last read line or given objects to <code>self</code>.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#printf</dt>
<dd>
<p>Writes to <code>self</code> based on the given format string and objects.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#putc</dt>
<dd>
<p>Writes a character to <code>self</code>.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#puts</dt>
<dd>
<p>Writes lines to <code>self</code>, making sure line ends with a newline.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#pwrite</dt>
<dd>
<p>Writes the given string at the given offset, not updating the receiver’s offset.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#write</dt>
<dd>
<p>Writes one or more given strings to <code>self</code>.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#write_nonblock</dt>
<dd>
<p>Writes one or more given strings to <code>self</code> in non-blocking mode.</p>
</dd></dl>
</li></ul>

<h4 id="label-Positioning">Positioning</h4>
<ul><li><dl class="rdoc-list note-list"><dt>#lineno</dt>
<dd>
<p>Returns the current line number in <code>self</code>.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#lineno=</dt>
<dd>
<p>Sets the line number is <code>self</code>.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt><a href="#pos-instance_method" title="IO#pos (method)">#pos</a> (aliased as <a href="#tell-instance_method" title="IO#tell (method)">#tell</a>)</dt>
<dd>
<p>Returns the current byte offset in <code>self</code>.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#pos=</dt>
<dd>
<p>Sets the byte offset in <code>self</code>.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#reopen</dt>
<dd>
<p>Reassociates <code>self</code> with a new or existing IO stream.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#rewind</dt>
<dd>
<p>Positions <code>self</code> to the beginning of input.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#seek</dt>
<dd>
<p>Sets the offset for <code>self</code> relative to given position.</p>
</dd></dl>
</li></ul>

<h4 id="label-Iterating">Iterating</h4>
<ul><li><dl class="rdoc-list note-list"><dt>::foreach</dt>
<dd>
<p>Yields each line of given file to the block.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt><a href="#each-instance_method" title="IO#each (method)">#each</a> (aliased as <a href="#each_line-instance_method" title="IO#each_line (method)">#each_line</a>)</dt>
<dd>
<p>Calls the given block</p>
</dd></dl>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_with'>with</span> <span class='id identifier rubyid_each'><a href="#each-instance_method" title="IO#each (method)">each</a></span> <span class='id identifier rubyid_successive'>successive</span> <span class='id identifier rubyid_line'>line</span> <span class='kw'>in</span> {<span class='kw'>self</span>}.</code></pre>
</li><li><dl class="rdoc-list note-list"><dt>#each_byte</dt>
<dd>
<p>Calls the given block with each successive byte in <code>self</code> as an integer.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#each_char</dt>
<dd>
<p>Calls the given block with each successive character in <code>self</code> as a string.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#each_codepoint</dt>
<dd>
<p>Calls the given block with each successive codepoint in <code>self</code> as an integer.</p>
</dd></dl>
</li></ul>

<h4 id="label-Settings">Settings</h4>
<ul><li><dl class="rdoc-list note-list"><dt>#autoclose=</dt>
<dd>
<p>Sets whether <code>self</code> auto-closes.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#binmode</dt>
<dd>
<p>Sets <code>self</code> to binary mode.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#close</dt>
<dd>
<p>Closes <code>self</code>.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#close_on_exec=</dt>
<dd>
<p>Sets the close-on-exec flag.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#close_read</dt>
<dd>
<p>Closes <code>self</code> for reading.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#close_write</dt>
<dd>
<p>Closes <code>self</code> for writing.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#set_encoding</dt>
<dd>
<p>Sets the encoding for <code>self</code>.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#set_encoding_by_bom</dt>
<dd>
<p>Sets the encoding for <code>self</code>, based on its Unicode byte-order-mark.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#sync=</dt>
<dd>
<p>Sets the sync-mode to the given value.</p>
</dd></dl>
</li></ul>

<h4 id="label-Querying">Querying</h4>
<ul><li><dl class="rdoc-list note-list"><dt>#autoclose?</dt>
<dd>
<p>Returns whether <code>self</code> auto-closes.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#binmode?</dt>
<dd>
<p>Returns whether <code>self</code> is in binary mode.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#close_on_exec?</dt>
<dd>
<p>Returns the close-on-exec flag for <code>self</code>.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#closed?</dt>
<dd>
<p>Returns whether <code>self</code> is closed.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt><a href="#eof%3F-instance_method" title="IO#eof? (method)">#eof?</a> (aliased as <a href="#eof-instance_method" title="IO#eof (method)">#eof</a>)</dt>
<dd>
<p>Returns whether <code>self</code> is at end-of-file.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#external_encoding</dt>
<dd>
<p>Returns the external encoding object for <code>self</code>.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt><a href="#fileno-instance_method" title="IO#fileno (method)">#fileno</a> (aliased as <a href="#to_i-instance_method" title="IO#to_i (method)">#to_i</a>)</dt>
<dd>
<p>Returns the integer file descriptor for <code>self</code></p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#internal_encoding</dt>
<dd>
<p>Returns the internal encoding object for <code>self</code>.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#pid</dt>
<dd>
<p>Returns the process ID of a child process associated with <code>self</code>, if <code>self</code> was created by ::popen.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#stat</dt>
<dd>
<p>Returns the <a href="File/Stat.html" title="File::Stat (class)"><code>::File::Stat</code></a> object containing status information for <code>self</code>.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#sync</dt>
<dd>
<p>Returns whether <code>self</code> is in sync-mode.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt><code>#tty</code> (aliased as <a href="#isatty-instance_method" title="IO#isatty (method)">#isatty</a>)</dt>
<dd>
<p>Returns whether <code>self</code> is a terminal.</p>
</dd></dl>
</li></ul>

<h4 id="label-Buffering">Buffering</h4>
<ul><li><dl class="rdoc-list note-list"><dt>#fdatasync</dt>
<dd>
<p>Immediately writes all buffered data in <code>self</code> to disk.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#flush</dt>
<dd>
<p>Flushes any buffered data within <code>self</code> to the underlying operating system.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#fsync</dt>
<dd>
<p>Immediately writes all buffered data and attributes in <code>self</code> to disk.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#ungetbyte</dt>
<dd>
<p>Prepends buffer for <code>self</code> with given integer byte or string.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#ungetc</dt>
<dd>
<p>Prepends buffer for <code>self</code> with given string.</p>
</dd></dl>
</li></ul>

<h4 id="label-Low-Level+Access">Low-Level Access</h4>
<ul><li><dl class="rdoc-list note-list"><dt>::sysopen</dt>
<dd>
<p>Opens the file given by its path, returning the integer file descriptor.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#advise</dt>
<dd>
<p>Announces the intention to access data from <code>self</code> in a specific way.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#fcntl</dt>
<dd>
<p>Passes a low-level command to the file specified by the given file descriptor.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#ioctl</dt>
<dd>
<p>Passes a low-level command to the device specified by the given file descriptor.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#sysread</dt>
<dd>
<p>Returns up to the next <em>n</em> bytes read from self using a low-level read.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#sysseek</dt>
<dd>
<p>Sets the offset for <code>self</code>.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#syswrite</dt>
<dd>
<p>Writes the given string to <code>self</code> using a low-level write.</p>
</dd></dl>
</li></ul>

<h4 id="label-Other">Other</h4>
<ul><li><dl class="rdoc-list note-list"><dt>::copy_stream</dt>
<dd>
<p>Copies data from a source to a destination, each of which is a filepath or an IO-like object.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>::try_convert</dt>
<dd>
<p>Returns a new IO object resulting from converting the given object.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt>#inspect</dt>
<dd>
<p>Returns the string representation of <code>self</code>.</p>
</dd></dl>
</li></ul>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='PRIORITY-constant' class='summary_signature'>PRIORITY =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L14179'># File 'io.c', line 14179</a>    <pre class='code c'><span class='const'>INT2NUM</span>(<span class='const'>RUBY_IO_PRIORITY</span>)</pre>
  </li>
  <li>
    <span id='READABLE-constant' class='summary_signature'>READABLE =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L14177'># File 'io.c', line 14177</a>    <pre class='code c'><span class='const'>INT2NUM</span>(<span class='const'>RUBY_IO_READABLE</span>)</pre>
  </li>
  <li>
    <span id='SEEK_CUR-constant' class='summary_signature'>SEEK_CUR =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Set I/O position from the current position</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L14303'># File 'io.c', line 14303</a>    <pre class='code c'><span class='const'>INT2FIX</span>(<span class='const'><a href="#SEEK_CUR-constant" title="IO::SEEK_CUR (constant)">SEEK_CUR</a></span>)</pre>
  </li>
  <li>
    <span id='SEEK_DATA-constant' class='summary_signature'>SEEK_DATA =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Set I/O position to the next location containing data</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L14308'># File 'io.c', line 14308</a>    <pre class='code c'><span class='const'>INT2FIX</span>(<span class='const'><a href="#SEEK_DATA-constant" title="IO::SEEK_DATA (constant)">SEEK_DATA</a></span>)</pre>
  </li>
  <li>
    <span id='SEEK_END-constant' class='summary_signature'>SEEK_END =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Set I/O position from the end</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L14305'># File 'io.c', line 14305</a>    <pre class='code c'><span class='const'>INT2FIX</span>(<span class='const'><a href="#SEEK_END-constant" title="IO::SEEK_END (constant)">SEEK_END</a></span>)</pre>
  </li>
  <li>
    <span id='SEEK_HOLE-constant' class='summary_signature'>SEEK_HOLE =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Set I/O position to the next hole</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L14312'># File 'io.c', line 14312</a>    <pre class='code c'><span class='const'>INT2FIX</span>(<span class='const'><a href="#SEEK_HOLE-constant" title="IO::SEEK_HOLE (constant)">SEEK_HOLE</a></span>)</pre>
  </li>
  <li>
    <span id='SEEK_SET-constant' class='summary_signature'>SEEK_SET =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Set I/O position from the beginning</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L14301'># File 'io.c', line 14301</a>    <pre class='code c'><span class='const'>INT2FIX</span>(<span class='const'><a href="#SEEK_SET-constant" title="IO::SEEK_SET (constant)">SEEK_SET</a></span>)</pre>
  </li>
  <li>
    <span id='WRITABLE-constant' class='summary_signature'>WRITABLE =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L14178'># File 'io.c', line 14178</a>    <pre class='code c'><span class='const'>INT2NUM</span>(<span class='const'>RUBY_IO_WRITABLE</span>)</pre>
  </li>
</ul>
  <h3 class='inherited'><a href="File/Constants.html" title="File::Constants (module)"><code>::File::Constants</code></a> - Included</h3>
  <p  class='inherited'>
    <a href="File/Constants.html#APPEND-constant" title="File::Constants::APPEND (constant)">APPEND</a>, 
    <a href="File/Constants.html#BINARY-constant" title="File::Constants::BINARY (constant)">BINARY</a>, 
    <a href="File/Constants.html#CREAT-constant" title="File::Constants::CREAT (constant)">CREAT</a>, 
    <a href="File/Constants.html#DIRECT-constant" title="File::Constants::DIRECT (constant)">DIRECT</a>, 
    <a href="File/Constants.html#DSYNC-constant" title="File::Constants::DSYNC (constant)">DSYNC</a>, 
    <a href="File/Constants.html#EXCL-constant" title="File::Constants::EXCL (constant)">EXCL</a>, 
    <a href="File/Constants.html#LOCK_EX-constant" title="File::Constants::LOCK_EX (constant)">LOCK_EX</a>, 
    <a href="File/Constants.html#LOCK_NB-constant" title="File::Constants::LOCK_NB (constant)">LOCK_NB</a>, 
    <a href="File/Constants.html#LOCK_SH-constant" title="File::Constants::LOCK_SH (constant)">LOCK_SH</a>, 
    <a href="File/Constants.html#LOCK_UN-constant" title="File::Constants::LOCK_UN (constant)">LOCK_UN</a>, 
    <a href="File/Constants.html#NOATIME-constant" title="File::Constants::NOATIME (constant)">NOATIME</a>, 
    <a href="File/Constants.html#NOCTTY-constant" title="File::Constants::NOCTTY (constant)">NOCTTY</a>, 
    <a href="File/Constants.html#NOFOLLOW-constant" title="File::Constants::NOFOLLOW (constant)">NOFOLLOW</a>, 
    <a href="File/Constants.html#NONBLOCK-constant" title="File::Constants::NONBLOCK (constant)">NONBLOCK</a>, 
    <a href="File/Constants.html#NULL-constant" title="File::Constants::NULL (constant)">NULL</a>, 
    <a href="File/Constants.html#RDONLY-constant" title="File::Constants::RDONLY (constant)">RDONLY</a>, 
    <a href="File/Constants.html#RDWR-constant" title="File::Constants::RDWR (constant)">RDWR</a>, 
    <a href="File/Constants.html#RSYNC-constant" title="File::Constants::RSYNC (constant)">RSYNC</a>, 
    <a href="File/Constants.html#SHARE_DELETE-constant" title="File::Constants::SHARE_DELETE (constant)">SHARE_DELETE</a>, 
    <a href="File/Constants.html#SYNC-constant" title="File::Constants::SYNC (constant)">SYNC</a>, 
    <a href="File/Constants.html#TMPFILE-constant" title="File::Constants::TMPFILE (constant)">TMPFILE</a>, 
    <a href="File/Constants.html#TRUNC-constant" title="File::Constants::TRUNC (constant)">TRUNC</a>, 
    <a href="File/Constants.html#WRONLY-constant" title="File::Constants::WRONLY (constant)">WRONLY</a>
  </p>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#binread-class_method" title="binread (class method)">.<strong>binread</strong>(name, [length [, offset]])  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Opens the file, optionally seeks to the given <em>offset</em>, then returns <em>length</em> bytes (defaulting to the rest of the file).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#binwrite-class_method" title="binwrite (class method)">.<strong>binwrite</strong>(name, string, [offset])  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Same as <a href="#write-class_method" title="IO.write (method)">.write</a> except opening the file in binary mode and ASCII-8BIT encoding (<code>&quot;wb:ASCII-8BIT&quot;</code>).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#copy_stream-class_method" title="copy_stream (class method)">.<strong>copy_stream</strong>(src, dst)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p><code>copy_stream</code> copies <em>src</em> to <em>dst</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#for_fd-class_method" title="for_fd (class method)">.<strong>for_fd</strong>(fd, mode [, opt])  &#x21d2; IO </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Synonym for <a href="#new-class_method" title="IO.new (method)">.new</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#foreach-class_method" title="foreach (class method)">.<strong>foreach</strong>(name, sep=$/ [, getline_args, open_args]) {|line| ... } &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Executes the block for every line in the named I/O port, where lines are separated by <em>sep</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#open-class_method" title="open (class method)">.<strong>open</strong>(filename, mode=&quot;r&quot; [, opt])  &#x21d2; File </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="File.html#open-class_method" title="File.open (method)">File.open</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#pipe-class_method" title="pipe (class method)">.<strong>pipe</strong>  &#x21d2; IO </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p><code>IO</code>.pipe(…) {|read_io, write_io| … }</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#popen-class_method" title="popen (class method)">.<strong>popen</strong>([env,] cmd, mode=&quot;r&quot; [, opt])  &#x21d2; IO </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Runs the specified command as a subprocess; the subprocess’s standard input and output will be connected to the returned <code>IO</code> object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#read-class_method" title="read (class method)">.<strong>read</strong>(name, [length [, offset]] [, opt])  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Opens the file, optionally seeks to the given <code>offset</code>, then returns <code>length</code> bytes (defaulting to the rest of the file).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#readlines-class_method" title="readlines (class method)">.<strong>readlines</strong>(name, sep=$/ [, getline_args, open_args])  &#x21d2; Array </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads the entire file specified by <em>name</em> as individual lines, and returns those lines in an array.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#select-class_method" title="select (class method)">.<strong>select</strong>(read_array [, write_array [, error_array [, timeout]]])  &#x21d2; Array<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="Kernel.html#select-class_method" title="Kernel.select (method)">Kernel.select</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#sysopen-class_method" title="sysopen (class method)">.<strong>sysopen</strong>(path, [mode, [perm]])  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Opens the given path, returning the underlying file descriptor as a <a href="Integer.html" title="Integer (class)"><code>::Integer</code></a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#try_convert-class_method" title="try_convert (class method)">.<strong>try_convert</strong>(object)  &#x21d2; IO<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Attempts to convert <code>object</code> into an IO object via method <a href="#to_io-instance_method" title="IO#to_io (method)">#to_io</a>; returns the new IO object if successful, or <code>nil</code> otherwise:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#write-class_method" title="write (class method)">.<strong>write</strong>(name, string [, offset])  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Opens the file, optionally seeks to the given <em>offset</em>, writes <em>string</em>, then returns the length written.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(*args)  </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#autoclose=-instance_method" title="#autoclose= (instance method)">#<strong>autoclose=</strong>(bool)  &#x21d2; Boolean </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets auto-close flag.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#autoclose%3F-instance_method" title="#autoclose? (instance method)">#<strong>autoclose?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if the underlying file descriptor of <em>ios</em> will be closed automatically at its finalization, otherwise <code>false</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#binmode-instance_method" title="#binmode (instance method)">#<strong>binmode</strong>  &#x21d2; IO </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Puts <em>ios</em> into binary mode.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#binmode%3F-instance_method" title="#binmode? (instance method)">#<strong>binmode?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if <em>ios</em> is binmode.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#close_on_exec=-instance_method" title="#close_on_exec= (instance method)">#<strong>close_on_exec=</strong>(bool)  &#x21d2; Boolean </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets a close-on-exec flag.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#close_on_exec%3F-instance_method" title="#close_on_exec? (instance method)">#<strong>close_on_exec?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if <em>ios</em> will be closed on exec.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#closed%3F-instance_method" title="#closed? (instance method)">#<strong>closed?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if <em>ios</em> is completely closed (for duplex streams, both reader and writer), <code>false</code> otherwise.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#eof%3F-instance_method" title="#eof (instance method)">#<strong>eof</strong>  &#x21d2; Boolean </a>
      (also: #eof?)
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if the stream is positioned at its end, <code>false</code> otherwise; see <a href='#label-Position'>Position</a>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#eof%3F-instance_method" title="#eof? (instance method)">#<strong>eof?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#eof-instance_method" title="IO#eof (method)">#eof</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#isatty-instance_method" title="#isatty (instance method)">#<strong>isatty</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#tty%3F-instance_method" title="IO#tty? (method)">#tty?</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#lineno-instance_method" title="#lineno (instance method)">#<strong>lineno</strong>  &#x21d2; Integer </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the current line number in <em>ios</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#lineno=-instance_method" title="#lineno= (instance method)">#<strong>lineno=</strong>(integer)  &#x21d2; Integer </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Manually sets the current line number to the given value.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#pos-instance_method" title="#pos (instance method)">#<strong>pos</strong>  &#x21d2; Integer </a>
      (also: #tell)
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the current position (in bytes) in <code>self</code> (see <a href='#label-Position'>Position</a>):</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#pos=-instance_method" title="#pos= (instance method)">#<strong>pos=</strong>(new_position)  &#x21d2; IO </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Seeks to the given <code>new_position</code> (in bytes); see <a href='#label-Position'>Position</a>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#sync-instance_method" title="#sync (instance method)">#<strong>sync</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the current sync mode of the stream.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#sync=-instance_method" title="#sync= (instance method)">#<strong>sync=</strong>(boolean)  &#x21d2; Boolean </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets the <em>sync</em> <em>mode</em> for the stream to the given value; returns the given value.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#tell-instance_method" title="#tell (instance method)">#<strong>tell</strong>  &#x21d2; Integer </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#pos-instance_method" title="IO#pos (method)">#pos</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#tty%3F-instance_method" title="#tty? (instance method)">#<strong>tty?</strong>  &#x21d2; Boolean </a>
      (also: #isatty)
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if <em>ios</em> is associated with a terminal device (tty), <code>false</code> otherwise.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#<<-instance_method" title="#&lt;&lt; (instance method)">#<strong>&lt;&lt;</strong>(object)  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes the given <code>object</code> to <code>self</code>, which must be opened for writing (see <a href='#label-Modes'>Modes</a>); returns <code>self</code>; if <code>object</code> is not a string, it is converted via method <code>to_s</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#advise-instance_method" title="#advise (instance method)">#<strong>advise</strong>(advice, offset = 0, len = 0)  &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Announce an intention to access data from the current file in a specific pattern.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#close-instance_method" title="#close (instance method)">#<strong>close</strong>  &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Closes <em>ios</em> and flushes any pending writes to the operating system.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#close_read-instance_method" title="#close_read (instance method)">#<strong>close_read</strong>  &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Closes the read end of a duplex I/O stream (i.e., one that contains both a read and a write stream, such as a pipe).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#close_write-instance_method" title="#close_write (instance method)">#<strong>close_write</strong>  &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Closes the write end of a duplex I/O stream (i.e., one that contains both a read and a write stream, such as a pipe).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#each-instance_method" title="#each (instance method)">#<strong>each</strong>(sep=$/ [, getline_args]) {|line| ... } &#x21d2; IO </a>
      (also: #each_line)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>ios.each_line(sep=$/ [, getline_args])     {|line| block } -&gt; ios.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#each_byte-instance_method" title="#each_byte (instance method)">#<strong>each_byte</strong> {|byte| ... } &#x21d2; IO </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Calls the given block once for each byte (0..255) in <em>ios</em>, passing the byte as an argument.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#each_char-instance_method" title="#each_char (instance method)">#<strong>each_char</strong> {|c| ... } &#x21d2; IO </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Calls the given block once for each character in <em>ios</em>, passing the character as an argument.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#each_codepoint-instance_method" title="#each_codepoint (instance method)">#<strong>each_codepoint</strong> {|c| ... } &#x21d2; IO </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Passes the <a href="Integer.html" title="Integer (class)"><code>::Integer</code></a> ordinal of each character in <em>ios</em>, passing the codepoint as an argument.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#each_line-instance_method" title="#each (instance method)">#<strong>each</strong>(sep=$/ [, getline_args]) {|line| ... } &#x21d2; IO </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#each-instance_method" title="IO#each (method)">#each</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#external_encoding-instance_method" title="#external_encoding (instance method)">#<strong>external_encoding</strong>  &#x21d2; Encoding </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the <a href="Encoding.html" title="Encoding (class)"><code>::Encoding</code></a> object that represents the encoding of the file.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#fcntl-instance_method" title="#fcntl (instance method)">#<strong>fcntl</strong>(integer_cmd, arg)  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Provides a mechanism for issuing low-level commands to control or query file-oriented I/O streams.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#fdatasync-instance_method" title="#fdatasync (instance method)">#<strong>fdatasync</strong>  &#x21d2; 0 </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Immediately writes to disk all data buffered in the stream, via the operating system’s: <code>fdatasync(2)</code>, if supported, otherwise via <code>fsync(2)</code>, if supported; otherwise raises an exception.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#fileno-instance_method" title="#fileno (instance method)">#<strong>fileno</strong>  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#to_i-instance_method" title="IO#to_i (method)">#to_i</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#flush-instance_method" title="#flush (instance method)">#<strong>flush</strong>  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Flushes data buffered in <code>self</code> to the operating system (but does not necessarily flush data buffered in the operating system):</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#fsync-instance_method" title="#fsync (instance method)">#<strong>fsync</strong>  &#x21d2; 0 </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Immediately writes to disk all data buffered in the stream, via the operating system’s <code>fsync(2)</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#getbyte-instance_method" title="#getbyte (instance method)">#<strong>getbyte</strong>  &#x21d2; Integer<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Gets the next 8-bit byte (0..255) from <em>ios</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#getc-instance_method" title="#getc (instance method)">#<strong>getc</strong>  &#x21d2; String<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads a one-character string from <em>ios</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#gets-instance_method" title="#gets (instance method)">#<strong>gets</strong>(sep = $/, **getline_opts)  &#x21d2; String<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads and returns data from the stream; assigns the return value to <code>$_</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#initialize-instance_method" title="#new (instance method)">#<strong>new</strong>(fd [, mode] [, opt])  &#x21d2; IO </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a new <code>IO</code> object (a stream) for the given integer file descriptor <code>fd</code> and <code>mode</code> string.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a string representation of <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#internal_encoding-instance_method" title="#internal_encoding (instance method)">#<strong>internal_encoding</strong>  &#x21d2; Encoding </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the <a href="Encoding.html" title="Encoding (class)"><code>::Encoding</code></a> of the internal string if conversion is specified.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#ioctl-instance_method" title="#ioctl (instance method)">#<strong>ioctl</strong>(integer_cmd, arg)  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Provides a mechanism for issuing low-level commands to control or query I/O devices.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#pid-instance_method" title="#pid (instance method)">#<strong>pid</strong>  &#x21d2; Integer<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the process ID of a child process associated with the stream, which will have been set by <code>IO#popen</code>, or <code>nil</code> if the stream was not created by <code>IO#popen</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#pread-instance_method" title="#pread (instance method)">#<strong>pread</strong>(maxlen, offset[, outbuf])  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads <em>maxlen</em> bytes from <em>ios</em> using the pread system call and returns them as a string without modifying the underlying descriptor offset.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#print-instance_method" title="#print (instance method)">#<strong>print</strong>  &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes the given object(s) to <em>ios</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#printf-instance_method" title="#printf (instance method)">#<strong>printf</strong>(format_string [, obj, ...])  &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Formats and writes to <em>ios</em>, converting parameters under control of the format string.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#putc-instance_method" title="#putc (instance method)">#<strong>putc</strong>(obj)  &#x21d2; Object </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>If <em>obj</em> is <a href="Numeric.html" title="Numeric (class)"><code>::Numeric</code></a>, write the character whose code is the least-significant byte of <em>obj</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#puts-instance_method" title="#puts (instance method)">#<strong>puts</strong>(obj, ...)  &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes the given object(s) to <em>ios</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#pwrite-instance_method" title="#pwrite (instance method)">#<strong>pwrite</strong>(string, offset)  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes the given string to <em>ios</em> at <em>offset</em> using pwrite() system call.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#read-instance_method" title="#read (instance method)">#<strong>read</strong>(maxlen = nil)  &#x21d2; String<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads bytes from the stream (in binary mode):</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#read_nonblock-instance_method" title="#read_nonblock (instance method)">#<strong>read_nonblock</strong>(maxlen [, options])  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads at most <em>maxlen</em> bytes from <em>ios</em> using the read(2) system call after O_NONBLOCK is set for the underlying file descriptor.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#readbyte-instance_method" title="#readbyte (instance method)">#<strong>readbyte</strong>  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads a byte as with <a href="#getbyte-instance_method" title="IO#getbyte (method)">#getbyte</a>, but raises an <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a> on end of file.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#readchar-instance_method" title="#readchar (instance method)">#<strong>readchar</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads a one-character string from <em>ios</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#readline-instance_method" title="#readline (instance method)">#<strong>readline</strong>(sep=$/ [, getline_args])  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads a line as with <a href="#gets-instance_method" title="IO#gets (method)">#gets</a>, but raises an <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a> on end of file.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#readlines-instance_method" title="#readlines (instance method)">#<strong>readlines</strong>(sep=$/ [, getline_args])  &#x21d2; Array </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads all of the lines in <em>ios</em>, and returns them in an array.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#readpartial-instance_method" title="#readpartial (instance method)">#<strong>readpartial</strong>(maxlen)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads up to <code>maxlen</code> bytes from the stream; returns a string (either a new string or the given <code>out_string</code>).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#reopen-instance_method" title="#reopen (instance method)">#<strong>reopen</strong>(other_IO)  &#x21d2; IO </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reassociates <em>ios</em> with the I/O stream given in <em>other_IO</em> or to a new stream opened on <em>path</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#rewind-instance_method" title="#rewind (instance method)">#<strong>rewind</strong>  &#x21d2; 0 </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Repositions the stream to its beginning, setting both the position and the line number to zero; see <a href='#label-Position'>Position</a> and <a href='#label-Line+Number'>Line Number</a>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#seek-instance_method" title="#seek (instance method)">#<strong>seek</strong>(offset, whence = IO::SEEK_SET)  &#x21d2; 0 </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Seeks to the position given by integer <code>offset</code> (see <a href='#label-Position'>Position</a>) and constant <code>whence</code>, which is one of:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#set_encoding-instance_method" title="#set_encoding (instance method)">#<strong>set_encoding</strong>(ext_enc)  &#x21d2; IO </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>If single argument is specified, read string from io is tagged with the encoding specified.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#set_encoding_by_bom-instance_method" title="#set_encoding_by_bom (instance method)">#<strong>set_encoding_by_bom</strong>  &#x21d2; Encoding<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Checks if <code>ios</code> starts with a BOM, and then consumes it and sets the external encoding.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#stat-instance_method" title="#stat (instance method)">#<strong>stat</strong>  &#x21d2; stat </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns status information for <em>ios</em> as an object of type <a href="File/Stat.html" title="File::Stat (class)"><code>::File::Stat</code></a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#sysread-instance_method" title="#sysread (instance method)">#<strong>sysread</strong>(maxlen[, outbuf])  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads <em>maxlen</em> bytes from <em>ios</em> using a low-level read and returns them as a string.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#sysseek-instance_method" title="#sysseek (instance method)">#<strong>sysseek</strong>(offset, whence = IO::SEEK_SET)  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Seeks to a given <em>offset</em> in the stream according to the value of <em>whence</em> (see <a href="#seek-instance_method" title="IO#seek (method)">#seek</a> for values of <em>whence</em>).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#syswrite-instance_method" title="#syswrite (instance method)">#<strong>syswrite</strong>(string)  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes the given string to <em>ios</em> using a low-level write.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_i-instance_method" title="#to_i (instance method)">#<strong>to_i</strong>  &#x21d2; Integer </a>
      (also: #fileno)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the integer file descriptor for the stream:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_io-instance_method" title="#to_io (instance method)">#<strong>to_io</strong>  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>self</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#ungetbyte-instance_method" title="#ungetbyte (instance method)">#<strong>ungetbyte</strong>(string)  &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Pushes back bytes (passed as a parameter) onto <em>ios</em>, such that a subsequent buffered read will return it.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#ungetc-instance_method" title="#ungetc (instance method)">#<strong>ungetc</strong>(integer)  &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Pushes back characters (passed as a parameter) onto <em>ios</em>, such that a subsequent buffered read will return it.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#write-instance_method" title="#write (instance method)">#<strong>write</strong>(*objects)  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes each of the given <code>objects</code> to <code>self</code>, which must be opened for writing (see <a href='#label-Modes'>Modes</a>); returns the total number bytes written; each of <code>objects</code> that is not a string is converted via method <code>to_s</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#write_nonblock-instance_method" title="#write_nonblock (instance method)">#<strong>write_nonblock</strong>(string)  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes the given string to <em>ios</em> using the write(2) system call after O_NONBLOCK is set for the underlying file descriptor.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#initialize_copy-instance_method" title="#initialize_copy (instance method)">#<strong>initialize_copy</strong>(io)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>

<h3 class='inherited'><a href="Enumerable.html" title="Enumerable (module)"><code>::Enumerable</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#all%3F-instance_method" title="Enumerable#all? (method)">#all?</a></td>
      <td><div class='inline'><p>Returns whether every element meets a given criterion.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#any%3F-instance_method" title="Enumerable#any? (method)">#any?</a></td>
      <td><div class='inline'><p>Returns whether any element meets a given criterion.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#chain-instance_method" title="Enumerable#chain (method)">#chain</a></td>
      <td><div class='inline'><p>Returns an enumerator object generated from this enumerator and given enumerables.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#chunk-instance_method" title="Enumerable#chunk (method)">#chunk</a></td>
      <td><div class='inline'><p>Each element in the returned enumerator is a 2-element array consisting of:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#chunk_while-instance_method" title="Enumerable#chunk_while (method)">#chunk_while</a></td>
      <td><div class='inline'><p>Creates an enumerator for each chunked elements.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#collect-instance_method" title="Enumerable#collect (method)">#collect</a></td>
      <td><div class='inline'><p>Alias for <a href="Enumerable.html#map-instance_method" title="Enumerable#map (method)">Enumerable#map</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#collect_concat-instance_method" title="Enumerable#collect_concat (method)">#collect_concat</a></td>
      <td><div class='inline'><p>Alias for <a href="Enumerable.html#flat_map-instance_method" title="Enumerable#flat_map (method)">Enumerable#flat_map</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#compact-instance_method" title="Enumerable#compact (method)">#compact</a></td>
      <td><div class='inline'><p>Returns an array of all non-<code>nil</code> elements:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#count-instance_method" title="Enumerable#count (method)">#count</a></td>
      <td><div class='inline'><p>Returns the count of elements, based on an argument or block criterion, if given.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#cycle-instance_method" title="Enumerable#cycle (method)">#cycle</a></td>
      <td><div class='inline'><p>When called with positive integer argument <code>n</code> and a block, calls the block with each element, then does so again, until it has done so <code>n</code> times; returns <code>nil</code>:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#detect-instance_method" title="Enumerable#detect (method)">#detect</a></td>
      <td><div class='inline'><p>Alias for <a href="Enumerable.html#find-instance_method" title="Enumerable#find (method)">Enumerable#find</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#drop-instance_method" title="Enumerable#drop (method)">#drop</a></td>
      <td><div class='inline'><p>For positive integer <code>n</code>, returns an array containing all but the first <code>n</code> elements:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#drop_while-instance_method" title="Enumerable#drop_while (method)">#drop_while</a></td>
      <td><div class='inline'><p>Calls the block with successive elements as long as the block returns a truthy value; returns an array of all elements after that point:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#each_cons-instance_method" title="Enumerable#each_cons (method)">#each_cons</a></td>
      <td><div class='inline'><p>Calls the block with each successive overlapped <code>n</code>-tuple of elements; returns <code>self</code>:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#each_entry-instance_method" title="Enumerable#each_entry (method)">#each_entry</a></td>
      <td><div class='inline'><p>Calls the given block with each element, converting multiple values from yield to an array; returns <code>self</code>:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#each_slice-instance_method" title="Enumerable#each_slice (method)">#each_slice</a></td>
      <td><div class='inline'><p>Calls the block with each successive disjoint <code>n</code>-tuple of elements; returns <code>self</code>:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#each_with_index-instance_method" title="Enumerable#each_with_index (method)">#each_with_index</a></td>
      <td><div class='inline'><p>With a block given, calls the block with each element and its index; returns <code>self</code>:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#each_with_object-instance_method" title="Enumerable#each_with_object (method)">#each_with_object</a></td>
      <td><div class='inline'><p>Calls the block once for each element, passing both the element and the given object:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#entries-instance_method" title="Enumerable#entries (method)">#entries</a></td>
      <td><div class='inline'><p>Alias for <a href="Enumerable.html#to_a-instance_method" title="Enumerable#to_a (method)">Enumerable#to_a</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#filter-instance_method" title="Enumerable#filter (method)">#filter</a></td>
      <td><div class='inline'><p>Returns an array containing elements selected by the block.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#filter_map-instance_method" title="Enumerable#filter_map (method)">#filter_map</a></td>
      <td><div class='inline'><p>Returns an array containing truthy elements returned by the block.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#find-instance_method" title="Enumerable#find (method)">#find</a></td>
      <td><div class='inline'><p>Returns the first element for which the block returns a truthy value.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#find_all-instance_method" title="Enumerable#find_all (method)">#find_all</a></td>
      <td><div class='inline'><p>Alias for <a href="Enumerable.html#filter-instance_method" title="Enumerable#filter (method)">Enumerable#filter</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#find_index-instance_method" title="Enumerable#find_index (method)">#find_index</a></td>
      <td><div class='inline'><p>Returns the index of the first element that meets a specified criterion, or <code>nil</code> if no such element is found.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#first-instance_method" title="Enumerable#first (method)">#first</a></td>
      <td><div class='inline'><p>Returns the first element or elements.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#flat_map-instance_method" title="Enumerable#flat_map (method)">#flat_map</a></td>
      <td><div class='inline'><p>Returns an array of flattened objects returned by the block.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#grep-instance_method" title="Enumerable#grep (method)">#grep</a></td>
      <td><div class='inline'><p>Returns an array of objects based elements of <code>self</code> that match the given pattern.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#grep_v-instance_method" title="Enumerable#grep_v (method)">#grep_v</a></td>
      <td><div class='inline'><p>Returns an array of objects based on elements of <code>self</code> that <em>don’t</em> match the given pattern.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#group_by-instance_method" title="Enumerable#group_by (method)">#group_by</a></td>
      <td><div class='inline'><p>With a block given returns a hash:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#include%3F-instance_method" title="Enumerable#include? (method)">#include?</a></td>
      <td><div class='inline'><p>Alias for <a href="Enumerable.html#member%3F-instance_method" title="Enumerable#member? (method)">Enumerable#member?</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#inject-instance_method" title="Enumerable#inject (method)">#inject</a></td>
      <td><div class='inline'><p>Returns an object formed from operands via either:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#lazy-instance_method" title="Enumerable#lazy (method)">#lazy</a></td>
      <td><div class='inline'><p>Returns an <a href="Enumerator/Lazy.html" title="Enumerator::Lazy (class)"><code>::Enumerator::Lazy</code></a>, which redefines most <a href="Enumerable.html" title="Enumerable (module)"><code>::Enumerable</code></a> methods to postpone enumeration and enumerate values only on an as-needed basis.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#map-instance_method" title="Enumerable#map (method)">#map</a></td>
      <td><div class='inline'><p>Returns an array of objects returned by the block.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#max-instance_method" title="Enumerable#max (method)">#max</a></td>
      <td><div class='inline'><p>Returns the element with the maximum element according to a given criterion.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#max_by-instance_method" title="Enumerable#max_by (method)">#max_by</a></td>
      <td><div class='inline'><p>Returns the elements for which the block returns the maximum values.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#member%3F-instance_method" title="Enumerable#member? (method)">#member?</a></td>
      <td><div class='inline'><p>Returns whether for any element <code>object == element</code>:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#min-instance_method" title="Enumerable#min (method)">#min</a></td>
      <td><div class='inline'><p>Returns the element with the minimum element according to a given criterion.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#min_by-instance_method" title="Enumerable#min_by (method)">#min_by</a></td>
      <td><div class='inline'><p>Returns the elements for which the block returns the minimum values.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#minmax-instance_method" title="Enumerable#minmax (method)">#minmax</a></td>
      <td><div class='inline'><p>Returns a 2-element array containing the minimum and maximum elements according to a given criterion.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#minmax_by-instance_method" title="Enumerable#minmax_by (method)">#minmax_by</a></td>
      <td><div class='inline'><p>Returns a 2-element array containing the elements for which the block returns minimum and maximum values:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#none%3F-instance_method" title="Enumerable#none? (method)">#none?</a></td>
      <td><div class='inline'><p>Returns whether no element meets a given criterion.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#one%3F-instance_method" title="Enumerable#one? (method)">#one?</a></td>
      <td><div class='inline'><p>Returns whether exactly one element meets a given criterion.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#partition-instance_method" title="Enumerable#partition (method)">#partition</a></td>
      <td><div class='inline'><p>With a block given, returns an array of two arrays:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#reduce-instance_method" title="Enumerable#reduce (method)">#reduce</a></td>
      <td><div class='inline'><p>Alias for <a href="Enumerable.html#inject-instance_method" title="Enumerable#inject (method)">Enumerable#inject</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#reject-instance_method" title="Enumerable#reject (method)">#reject</a></td>
      <td><div class='inline'><p>Returns an array of objects rejected by the block.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#reverse_each-instance_method" title="Enumerable#reverse_each (method)">#reverse_each</a></td>
      <td><div class='inline'><p>With a block given, calls the block with each element, but in reverse order; returns <code>self</code>:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#select-instance_method" title="Enumerable#select (method)">#select</a></td>
      <td><div class='inline'><p>Alias for <a href="Enumerable.html#filter-instance_method" title="Enumerable#filter (method)">Enumerable#filter</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#slice_after-instance_method" title="Enumerable#slice_after (method)">#slice_after</a></td>
      <td><div class='inline'><p>Creates an enumerator for each chunked elements.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#slice_before-instance_method" title="Enumerable#slice_before (method)">#slice_before</a></td>
      <td><div class='inline'><p>With argument <code>pattern</code>, returns an enumerator that uses the pattern to partition elements into arrays (“slices”).</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#slice_when-instance_method" title="Enumerable#slice_when (method)">#slice_when</a></td>
      <td><div class='inline'><p>Creates an enumerator for each chunked elements.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#sort-instance_method" title="Enumerable#sort (method)">#sort</a></td>
      <td><div class='inline'><p>Returns an array containing the sorted elements of <code>self</code>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#sort_by-instance_method" title="Enumerable#sort_by (method)">#sort_by</a></td>
      <td><div class='inline'><p>With a block given, returns an array of elements of <code>self</code>, sorted according to the value returned by the block for each element.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#sum-instance_method" title="Enumerable#sum (method)">#sum</a></td>
      <td><div class='inline'><p>With no block given, returns the sum of <code>initial_value</code> and the elements:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#take-instance_method" title="Enumerable#take (method)">#take</a></td>
      <td><div class='inline'><p>For non-negative integer <code>n</code>, returns the first <code>n</code> elements:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#take_while-instance_method" title="Enumerable#take_while (method)">#take_while</a></td>
      <td><div class='inline'><p>Calls the block with successive elements as long as the block returns a truthy value; returns an array of all elements up to that point:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#tally-instance_method" title="Enumerable#tally (method)">#tally</a></td>
      <td><div class='inline'><p>Returns a hash containing the counts of equal elements:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#to_a-instance_method" title="Enumerable#to_a (method)">#to_a</a></td>
      <td><div class='inline'><p>Returns an array containing the items in <code>self</code>:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#to_h-instance_method" title="Enumerable#to_h (method)">#to_h</a></td>
      <td><div class='inline'><p>When <code>self</code> consists of 2-element arrays, returns a hash each of whose entries is the key-value pair formed from one of those arrays:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#uniq-instance_method" title="Enumerable#uniq (method)">#uniq</a></td>
      <td><div class='inline'><p>With no block, returns a new array containing only unique elements; the array has no two elements <code>e0</code> and <code>e1</code> such that <code>e0.eql?(e1)</code>:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#zip-instance_method" title="Enumerable#zip (method)">#zip</a></td>
      <td><div class='inline'><p>With no block given, returns a new array <code>new_array</code> of size self.size whose elements are arrays.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature nodoc first'>
    .<strong>new</strong>(*args)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L8905-L8915'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8905' data-end='8915'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 8905</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_new(int argc, VALUE *argv, VALUE klass)
{
    if (rb_block_given_p()) {
	VALUE cname = rb_obj_as_string(klass);

	rb_warn(&quot;%&quot;PRIsVALUE&quot;::new() does not take block; use %&quot;PRIsVALUE&quot;::open() instead&quot;,
		cname, cname);
    }
    return rb_class_new_instance_kw(argc, argv, klass, RB_PASS_CALLED_KEYWORDS);
}
</pre>
  </div>
</div>
</section>

  <section class='method_details' id="initialize-instance_method">
  <h3 class='signature '>
    #<strong>new</strong>(fd [, mode] [, opt])  &#x21d2; <code>IO</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a new <code>IO</code> object (a stream) for the given integer file descriptor <code>fd</code> and <code>mode</code> string.  <code>opt</code> may be used to specify parts of <code>mode</code> in a more readable fashion.  See also <a href="#sysopen-class_method" title="IO.sysopen (method)">.sysopen</a> and <a href="#for_fd-class_method" title="IO.for_fd (method)">.for_fd</a>.</p>

<p><a href="#new-class_method" title="IO.new (method)">.new</a> is called by various <a href="File.html" title="File (class)"><code>::File</code></a> and <code>IO</code> opening methods such as <a href="#open-class_method" title="IO.open (method)">.open</a>, <a href="Kernel.html#open-class_method" title="Kernel.open (method)">Kernel.open</a>, and <a href="File.html#open-class_method" title="File.open (method)">File.open</a>.</p>

<h4 id="label-Open+Mode">Open Mode</h4>

<p>When <code>mode</code> is an integer it must be combination of the modes defined in <a href="File/Constants.html" title="File::Constants (module)"><code>::File::Constants</code></a> (<code>File::RDONLY</code>, <code>File::WRONLY|File::CREAT</code>). See the open(2) man page for more information.</p>

<p>When <code>mode</code> is a string it must be in one of the following forms:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_fmode'>fmode</span>
<span class='id identifier rubyid_fmode'>fmode</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span> <span class='id identifier rubyid_ext_enc'>ext_enc</span>
<span class='id identifier rubyid_fmode'>fmode</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span> <span class='id identifier rubyid_ext_enc'>ext_enc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span> <span class='id identifier rubyid_int_enc'>int_enc</span>
<span class='id identifier rubyid_fmode'>fmode</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BOM|UTF-*</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p><code>fmode</code> is an <code>IO</code> open mode string, <code>ext_enc</code> is the external encoding for the <code>IO</code> and <code>int_enc</code> is the internal encoding.</p>

<h5 id="label-IO+Open+Mode">IO Open Mode</h5>

<p>Ruby allows the following open modes:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>r</span><span class='tstring_end'>&quot;</span></span>  <span class='const'>Read</span><span class='op'>-</span><span class='id identifier rubyid_only'>only</span><span class='comma'>,</span> <span class='id identifier rubyid_starts'>starts</span> <span class='id identifier rubyid_at'>at</span> <span class='id identifier rubyid_beginning'>beginning</span> <span class='id identifier rubyid_of'>of</span> <span class='id identifier rubyid_file'>file</span>  (<span class='id identifier rubyid_default'>default</span> <span class='id identifier rubyid_mode'>mode</span>).

<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>r+</span><span class='tstring_end'>&quot;</span></span> <span class='const'>Read</span><span class='op'>-</span><span class='id identifier rubyid_write'><a href="#write-class_method" title="IO.write (method)">write</a></span><span class='comma'>,</span> <span class='id identifier rubyid_starts'>starts</span> <span class='id identifier rubyid_at'>at</span> <span class='id identifier rubyid_beginning'>beginning</span> <span class='id identifier rubyid_of'>of</span> <span class='id identifier rubyid_file'>file</span>.

<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>w</span><span class='tstring_end'>&quot;</span></span>  <span class='const'>Write</span><span class='op'>-</span><span class='id identifier rubyid_only'>only</span><span class='comma'>,</span> <span class='id identifier rubyid_truncates'>truncates</span> <span class='id identifier rubyid_existing'>existing</span> <span class='id identifier rubyid_file'>file</span>
     <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_zero'>zero</span> <span class='id identifier rubyid_length'>length</span> <span class='kw'>or</span> <span class='id identifier rubyid_creates'>creates</span> <span class='id identifier rubyid_a'>a</span> <span class='id identifier rubyid_new'><a href="#new-class_method" title="IO.new (method)">new</a></span> <span class='id identifier rubyid_file'>file</span> <span class='kw'>for</span> <span class='id identifier rubyid_writing'>writing</span>.

<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>w+</span><span class='tstring_end'>&quot;</span></span> <span class='const'>Read</span><span class='op'>-</span><span class='id identifier rubyid_write'><a href="#write-class_method" title="IO.write (method)">write</a></span><span class='comma'>,</span> <span class='id identifier rubyid_truncates'>truncates</span> <span class='id identifier rubyid_existing'>existing</span> <span class='id identifier rubyid_file'>file</span> <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_zero'>zero</span> <span class='id identifier rubyid_length'>length</span>
     <span class='kw'>or</span> <span class='id identifier rubyid_creates'>creates</span> <span class='id identifier rubyid_a'>a</span> <span class='id identifier rubyid_new'><a href="#new-class_method" title="IO.new (method)">new</a></span> <span class='id identifier rubyid_file'>file</span> <span class='kw'>for</span> <span class='id identifier rubyid_reading'>reading</span> <span class='kw'>and</span> <span class='id identifier rubyid_writing'>writing</span>.

<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span>  <span class='const'>Write</span><span class='op'>-</span><span class='id identifier rubyid_only'>only</span><span class='comma'>,</span> <span class='id identifier rubyid_each'><a href="#each-instance_method" title="IO#each (method)">each</a></span> <span class='id identifier rubyid_write'><a href="#write-class_method" title="IO.write (method)">write</a></span> <span class='id identifier rubyid_call'>call</span> <span class='id identifier rubyid_appends'>appends</span> <span class='id identifier rubyid_data'>data</span> <span class='id identifier rubyid_at'>at</span> <span class='kw'>end</span> <span class='id identifier rubyid_of'>of</span> <span class='id identifier rubyid_file'>file</span>.
     <span class='const'>Creates</span> <span class='id identifier rubyid_a'>a</span> <span class='id identifier rubyid_new'><a href="#new-class_method" title="IO.new (method)">new</a></span> <span class='id identifier rubyid_file'>file</span> <span class='kw'>for</span> <span class='id identifier rubyid_writing'>writing</span> <span class='kw'>if</span> <span class='id identifier rubyid_file'>file</span> <span class='id identifier rubyid_does'>does</span> <span class='kw'>not</span> <span class='id identifier rubyid_exist'>exist</span>.

<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a+</span><span class='tstring_end'>&quot;</span></span> <span class='const'>Read</span><span class='op'>-</span><span class='id identifier rubyid_write'><a href="#write-class_method" title="IO.write (method)">write</a></span><span class='comma'>,</span> <span class='id identifier rubyid_each'><a href="#each-instance_method" title="IO#each (method)">each</a></span> <span class='id identifier rubyid_write'><a href="#write-class_method" title="IO.write (method)">write</a></span> <span class='id identifier rubyid_call'>call</span> <span class='id identifier rubyid_appends'>appends</span> <span class='id identifier rubyid_data'>data</span> <span class='id identifier rubyid_at'>at</span> <span class='kw'>end</span> <span class='id identifier rubyid_of'>of</span> <span class='id identifier rubyid_file'>file</span>.
     <span class='const'>Creates</span> <span class='id identifier rubyid_a'>a</span> <span class='id identifier rubyid_new'><a href="#new-class_method" title="IO.new (method)">new</a></span> <span class='id identifier rubyid_file'>file</span> <span class='kw'>for</span> <span class='id identifier rubyid_reading'>reading</span> <span class='kw'>and</span> <span class='id identifier rubyid_writing'>writing</span> <span class='kw'>if</span> <span class='id identifier rubyid_file'>file</span> <span class='id identifier rubyid_does'>does</span>
     <span class='kw'>not</span> <span class='id identifier rubyid_exist'>exist</span>.</code></pre>

<p>The following modes must be used separately, and along with one or more of the modes seen above.</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span>  <span class='const'>Binary</span> <span class='id identifier rubyid_file'>file</span> <span class='id identifier rubyid_mode'>mode</span>
     <span class='const'>Suppresses</span> <span class='const'>EOL</span> <span class='op'>&lt;</span><span class='tlambda'>-&gt;</span> <span class='const'>CRLF</span> <span class='id identifier rubyid_conversion'>conversion</span> <span class='id identifier rubyid_on'>on</span> <span class='const'>Windows</span>. <span class='const'>And</span>
     <span class='id identifier rubyid_sets'>sets</span> <span class='id identifier rubyid_external'>external</span> <span class='id identifier rubyid_encoding'>encoding</span> <span class='id identifier rubyid_to'>to</span> <span class='const'>ASCII</span><span class='op'>-</span><span class='int'>8</span><span class='const'>BIT</span> <span class='kw'>unless</span> <span class='id identifier rubyid_explicitly'>explicitly</span>
     <span class='id identifier rubyid_specified'>specified</span>.

<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>t</span><span class='tstring_end'>&quot;</span></span>  <span class='const'>Text</span> <span class='id identifier rubyid_file'>file</span> <span class='id identifier rubyid_mode'>mode</span></code></pre>

<p>The exclusive access mode (“x”) can be used together with “w” to ensure the file is created. <code>Errno::EEXIST</code> is raised when it already exists. It may not be supported with all kinds of streams (e.g. pipes).</p>

<p>When the open mode of original <code>IO</code> is read only, the mode cannot be changed to be writable.  Similarly, the open mode cannot be changed from write only to readable.</p>

<p>When such a change is attempted the error is raised in different locations according to the platform.</p>

<h4 id="label-IO+Encoding">IO Encoding</h4>

<p>When <code>ext_enc</code> is specified, strings read will be tagged by the encoding when reading, and strings output will be converted to the specified encoding when writing.</p>

<p>When <code>ext_enc</code> and <code>int_enc</code> are specified read strings will be converted from <code>ext_enc</code> to <code>int_enc</code> upon input, and written strings will be converted from <code>int_enc</code> to <code>ext_enc</code> upon output.  See Encoding for further details of transcoding on input and output.</p>

<p>If “BOM|UTF-8”, “BOM|UTF-16LE” or “BOM|UTF16-BE” are used, Ruby checks for a Unicode BOM in the input document to help determine the encoding.  For UTF-16 encodings the file open mode must be binary.  When present, the BOM is stripped and the external encoding from the BOM is used.  When the BOM is missing the given Unicode encoding is used as <code>ext_enc</code>.  (The BOM-set encoding option is case insensitive, so “bom|utf-8” is also valid.)</p>

<h4 id="label-Options">Options</h4>

<p><code>opt</code> can be used instead of <code>mode</code> for improved readability.  The following keys are supported:</p>
<dl class="rdoc-list note-list"><dt><code>:mode</code> </dt>
<dd>
<p>Same as <code>mode</code> parameter</p>
</dd><dt><code>:flags</code> </dt>
<dd>
<p>Specifies file open flags as integer. If <code>mode</code> parameter is given, this parameter will be bitwise-ORed.</p>
</dd><dt>:external_encoding </dt>
<dd>
<p>External encoding for the IO.</p>
</dd><dt>:internal_encoding </dt>
<dd>
<p>Internal encoding for the IO.  “-” is a synonym for the default internal encoding.</p>

<p>If the value is <code>nil</code> no conversion occurs.</p>
</dd><dt><code>:encoding</code> </dt>
<dd>
<p>Specifies external and internal encodings as “extern:intern”.</p>
</dd><dt><code>:textmode</code> </dt>
<dd>
<p>If the value is truth value, same as “t” in argument <code>mode</code>.</p>
</dd><dt><code>:binmode</code> </dt>
<dd>
<p>If the value is truth value, same as “b” in argument <code>mode</code>.</p>
</dd><dt><code>:autoclose</code> </dt>
<dd>
<p>If the value is <code>false</code>, the <code>fd</code> will be kept open after this IO instance gets finalized.</p>
</dd></dl>

<p>Also, <code>opt</code> can have same keys in <a href="String.html#encode-instance_method" title="String#encode (method)">String#encode</a> for controlling conversion between the external encoding and the internal encoding.</p>

<h4 id="label-Example+1">Example 1</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_fd'>fd</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_sysopen'><a href="#sysopen-class_method" title="IO.sysopen (method)">sysopen</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/dev/tty</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>w</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="IO.new (method)">new</a></span>(<span class='id identifier rubyid_fd'>fd</span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>w</span><span class='tstring_end'>&quot;</span></span>)
<span class='gvar'>$stderr</span>.<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_a'>a</span>.<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>World</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>Produces:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Hello</span>
<span class='const'>World</span></code></pre>

<h4 id="label-Example+2">Example 2</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fcntl</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_fd'>fd</span> <span class='op'>=</span> <span class='const'><a href="top-level-namespace.html#STDERR-constant" title="STDERR (constant)">STDERR</a></span>.<span class='id identifier rubyid_fcntl'><a href="#fcntl-instance_method" title="IO#fcntl (method)">fcntl</a></span>(<span class='const'>Fcntl</span><span class='op'>::</span><span class='const'>F_DUPFD</span>)
<span class='id identifier rubyid_io'>io</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="IO.new (method)">new</a></span>(<span class='id identifier rubyid_fd'>fd</span><span class='comma'>,</span> <span class='label'>mode:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w:UTF-16LE</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>cr_newline:</span> <span class='kw'>true</span>)
<span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello, World!</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_fd'>fd</span> <span class='op'>=</span> <span class='const'><a href="top-level-namespace.html#STDERR-constant" title="STDERR (constant)">STDERR</a></span>.<span class='id identifier rubyid_fcntl'><a href="#fcntl-instance_method" title="IO#fcntl (method)">fcntl</a></span>(<span class='const'>Fcntl</span><span class='op'>::</span><span class='const'>F_DUPFD</span>)
<span class='id identifier rubyid_io'>io</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="IO.new (method)">new</a></span>(<span class='id identifier rubyid_fd'>fd</span><span class='comma'>,</span> <span class='label'>mode:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>cr_newline:</span> <span class='kw'>true</span><span class='comma'>,</span>
            <span class='label'>external_encoding:</span> <span class='const'><a href="Encoding.html" title="Encoding (class)">Encoding</a></span><span class='op'>::</span><span class='const'>UTF_16LE</span>)
<span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello, World!</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>Both of above print “Hello, World!” in UTF-16LE to standard error output with converting EOL generated by <a href="#puts-instance_method" title="IO#puts (method)">#puts</a> to CR.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L8762-L8820'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8762' data-end='8820'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 8762</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_initialize(int argc, VALUE *argv, VALUE io)
{
    VALUE fnum, vmode;
    rb_io_t *fp;
    int fd, fmode, oflags = O_RDONLY;
    convconfig_t convconfig;
    VALUE opt;
#if defined(HAVE_FCNTL) &amp;&amp; defined(F_GETFL)
    int ofmode;
#else
    struct stat st;
#endif


    argc = rb_scan_args(argc, argv, &quot;11:&quot;, &amp;fnum, &amp;vmode, &amp;opt);
    rb_io_extract_modeenc(&amp;vmode, 0, opt, &amp;oflags, &amp;fmode, &amp;convconfig);

    fd = NUM2INT(fnum);
    if (rb_reserved_fd_p(fd)) {
	rb_raise(rb_eArgError, &quot;The given fd is not accessible because RubyVM reserves it&quot;);
    }
#if defined(HAVE_FCNTL) &amp;&amp; defined(F_GETFL)
    oflags = fcntl(fd, F_GETFL);
    if (oflags == -1) rb_sys_fail(0);
#else
    if (fstat(fd, &amp;st) &lt; 0) rb_sys_fail(0);
#endif
    rb_update_max_fd(fd);
#if defined(HAVE_FCNTL) &amp;&amp; defined(F_GETFL)
    ofmode = rb_io_oflags_fmode(oflags);
    if (NIL_P(vmode)) {
	fmode = ofmode;
    }
    else if ((~ofmode &amp; fmode) &amp; FMODE_READWRITE) {
	VALUE error = INT2FIX(EINVAL);
	rb_exc_raise(rb_class_new_instance(1, &amp;error, rb_eSystemCallError));
    }
#endif
    if (!NIL_P(opt) &amp;&amp; rb_hash_aref(opt, sym_autoclose) == Qfalse) {
	fmode |= FMODE_PREP;
    }
    MakeOpenFile(io, fp);
    fp-&gt;self = io;
    fp-&gt;fd = fd;
    fp-&gt;mode = fmode;
    fp-&gt;encs = convconfig;
    clear_codeconv(fp);
    io_check_tty(fp);
    if (fileno(stdin) == fd)
	fp-&gt;stdio_file = stdin;
    else if (fileno(stdout) == fd)
	fp-&gt;stdio_file = stdout;
    else if (fileno(stderr) == fd)
	fp-&gt;stdio_file = stderr;

    if (fmode &amp; FMODE_SETENC_BY_BOM) io_set_encoding_by_bom(io);
    return io;
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="binread-class_method">
  <h3 class='signature  first'>
    <div class='inline-block'>
      <span class='overload'>.<strong>binread</strong>(name, [length [, offset]])  &#x21d2; <a href="String.html" title="String (class)">String</a> </span>
      <span class='overload'><strong>File.binread</strong>(name, [length [, offset]])  &#x21d2; <a href="String.html" title="String (class)">String</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Opens the file, optionally seeks to the given <em>offset</em>, then returns <em>length</em> bytes (defaulting to the rest of the file). <code>#binread</code> ensures the file is closed before returning.  The open mode would be <code>&quot;rb:ASCII-8BIT&quot;</code>.</p>

<p>If <code>name</code> starts with a pipe character (<code>&quot;|&quot;</code>) and the receiver is the <code>IO</code> class, a subprocess is created in the same way as <a href="Kernel.html#open-class_method" title="Kernel.open (method)">Kernel.open</a>, and its output is returned. Consider to use <code>File.binread</code> to disable the behavior of subprocess invocation.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_binread'>binread</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)           <span class='comment'>#=&gt; &quot;This is line one\nThis is line two\nThis is line three\nAnd so on...\n&quot;
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_binread'>binread</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>20</span>)       <span class='comment'>#=&gt; &quot;This is line one\nThi&quot;
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_binread'>binread</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>20</span><span class='comma'>,</span> <span class='int'>10</span>)   <span class='comment'>#=&gt; &quot;ne one\nThis is line &quot;
</span><span class='const'>IO</span>.<span class='id identifier rubyid_binread'>binread</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>| cat testfile</span><span class='tstring_end'>&quot;</span></span>)       <span class='comment'>#=&gt; &quot;This is line one\nThis is line two\nThis is line three\nAnd so on...\n&quot;</span></code></pre>

<p>See also <a href="#read-class_method" title="IO.read (method)">.read</a> for details about <code>name</code> and open_args.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L11146-L11180'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11146' data-end='11180'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 11146</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_binread(int argc, VALUE *argv, VALUE io)
{
    VALUE offset;
    struct foreach_arg arg;
    enum {
	fmode = FMODE_READABLE|FMODE_BINMODE,
	oflags = O_RDONLY
#ifdef O_BINARY
		|O_BINARY
#endif
    };
    convconfig_t convconfig = {NULL, NULL, 0, Qnil};

    rb_scan_args(argc, argv, &quot;12&quot;, NULL, NULL, &amp;offset);
    FilePathValue(argv[0]);
    convconfig.enc = rb_ascii8bit_encoding();
    arg.io = rb_io_open_generic(io, argv[0], oflags, fmode, &amp;convconfig, 0);
    if (NIL_P(arg.io)) return Qnil;
    arg.argv = argv+1;
    arg.argc = (argc &gt; 1) ? 1 : 0;
    if (!NIL_P(offset)) {
	struct seek_arg sarg;
	int state = 0;
	sarg.io = arg.io;
	sarg.offset = offset;
	sarg.mode = SEEK_SET;
	rb_protect(seek_before_access, (VALUE)&amp;sarg, &amp;state);
	if (state) {
	    rb_io_close(arg.io);
	    rb_jump_tag(state);
	}
    }
    return rb_ensure(io_s_read, (VALUE)&amp;arg, rb_io_close, arg.io);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="binwrite-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>binwrite</strong>(name, string, [offset])  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a> </span>
      <span class='overload'>.<strong>binwrite</strong>(name, string, [offset], open_args)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a> </span>
      <span class='overload'><strong>File.binwrite</strong>(name, string, [offset])  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a> </span>
      <span class='overload'><strong>File.binwrite</strong>(name, string, [offset], open_args)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Same as <a href="#write-class_method" title="IO.write (method)">.write</a> except opening the file in binary mode and ASCII-8BIT encoding (<code>&quot;wb:ASCII-8BIT&quot;</code>).</p>

<p>If <code>name</code> starts with a pipe character (<code>&quot;|&quot;</code>) and the receiver is the <code>IO</code> class, a subprocess is created in the same way as <a href="Kernel.html#open-class_method" title="Kernel.open (method)">Kernel.open</a>, and its output is returned. Consider to use <code>File.binwrite</code> to disable the behavior of subprocess invocation.</p>

<p>See also <a href="#read-class_method" title="IO.read (method)">.read</a> for details about <code>name</code> and open_args.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L11315-L11319'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11315' data-end='11319'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 11315</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_binwrite(int argc, VALUE *argv, VALUE io)
{
    return io_s_write(argc, argv, io, 1);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="copy_stream-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>copy_stream</strong>(src, dst)  </span>
      <span class='overload'>.<strong>copy_stream</strong>(src, dst, copy_length)  </span>
      <span class='overload'>.<strong>copy_stream</strong>(src, dst, copy_length, src_offset)  </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p><code>copy_stream</code> copies <em>src</em> to <em>dst</em>. <em>src</em> and <em>dst</em> is either a filename or an IO-like object. IO-like object for <em>src</em> should have <a href="#readpartial-instance_method" title="IO#readpartial (method)">#readpartial</a> or <a href="#read-instance_method" title="IO#read (method)">#read</a> method.  IO-like object for <em>dst</em> should have <a href="#write-instance_method" title="IO#write (method)">#write</a> method. (Specialized mechanisms, such as sendfile system call, may be used on appropriate situation.)</p>

<p>This method returns the number of bytes copied.</p>

<p>If optional arguments are not given, the start position of the copy is the beginning of the filename or the current file offset of the <code>IO</code>. The end position of the copy is the end of file.</p>

<p>If <em>copy_length</em> is given, No more than <em>copy_length</em> bytes are copied.</p>

<p>If <em>src_offset</em> is given, it specifies the start position of the copy.</p>

<p>When <em>src_offset</em> is specified and <em>src</em> is an <code>IO</code>, <code>copy_stream</code> doesn’t move the current file offset.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L12257-L12286'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='12257' data-end='12286'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 12257</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_copy_stream(int argc, VALUE *argv, VALUE io)
{
    VALUE src, dst, length, src_offset;
    struct copy_stream_struct st;

    MEMZERO(&amp;st, struct copy_stream_struct, 1);

    rb_scan_args(argc, argv, &quot;22&quot;, &amp;src, &amp;dst, &amp;length, &amp;src_offset);

    st.src = src;
    st.dst = dst;

    st.src_fptr = NULL;
    st.dst_fptr = NULL;

    if (NIL_P(length))
        st.copy_length = (off_t)-1;
    else
        st.copy_length = NUM2OFFT(length);

    if (NIL_P(src_offset))
        st.src_offset = (off_t)-1;
    else
        st.src_offset = NUM2OFFT(src_offset);

    rb_ensure(copy_stream_body, (VALUE)&amp;st, copy_stream_finalize, (VALUE)&amp;st);

    return OFFT2NUM(st.total);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="for_fd-class_method">
  <h3 class='signature '>
    .<strong>for_fd</strong>(fd, mode [, opt])  &#x21d2; <code>IO</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Synonym for <a href="#new-class_method" title="IO.new (method)">.new</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L8926-L8932'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8926' data-end='8932'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 8926</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_for_fd(int argc, VALUE *argv, VALUE klass)
{
    VALUE io = rb_obj_alloc(klass);
    rb_io_initialize(argc, argv, io);
    return io;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="foreach-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>foreach</strong>(name, sep=$/ [, getline_args, open_args]) {|line| ... } &#x21d2; <code>nil</code> </span>
      <span class='overload'>.<strong>foreach</strong>(name, limit [, getline_args, open_args]) {|line| ... } &#x21d2; <code>nil</code> </span>
      <span class='overload'>.<strong>foreach</strong>(name, sep, limit [, getline_args, open_args]) {|line| ... } &#x21d2; <code>nil</code> </span>
      <span class='overload'>.<strong>foreach</strong>(...)  &#x21d2; <a href="Enumerator.html" title="Enumerator (class)">Enumerator</a> </span>
      <span class='overload'><strong>File.foreach</strong>(name, sep=$/ [, getline_args, open_args]) {|line| ... } &#x21d2; <code>nil</code> </span>
      <span class='overload'><strong>File.foreach</strong>(name, limit [, getline_args, open_args]) {|line| ... } &#x21d2; <code>nil</code> </span>
      <span class='overload'><strong>File.foreach</strong>(name, sep, limit [, getline_args, open_args]) {|line| ... } &#x21d2; <code>nil</code> </span>
      <span class='overload'><strong>File.foreach</strong>(...)  &#x21d2; <a href="Enumerator.html" title="Enumerator (class)">Enumerator</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Executes the block for every line in the named I/O port, where lines are separated by <em>sep</em>.</p>

<p>If no block is given, an enumerator is returned instead.</p>

<p>If <code>name</code> starts with a pipe character (<code>&quot;|&quot;</code>) and the receiver is the <code>IO</code> class, a subprocess is created in the same way as <a href="Kernel.html#open-class_method" title="Kernel.open (method)">Kernel.open</a>, and its output is returned. Consider to use <code>File.foreach</code> to disable the behavior of subprocess invocation.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_foreach'>foreach</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_print'><a href="#print-instance_method" title="IO#print (method)">print</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GOT </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span> }
<span class='const'>IO</span>.<span class='id identifier rubyid_foreach'>foreach</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>| cat testfile</span><span class='tstring_end'>&quot;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_print'><a href="#print-instance_method" title="IO#print (method)">print</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GOT </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span> }</code></pre>

<p><em>produces:</em></p>

<pre class="code ruby"><code class="ruby"><span class='const'>GOT</span> <span class='const'>This</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_line'>line</span> <span class='id identifier rubyid_one'>one</span>
<span class='const'>GOT</span> <span class='const'>This</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_line'>line</span> <span class='id identifier rubyid_two'>two</span>
<span class='const'>GOT</span> <span class='const'>This</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_line'>line</span> <span class='id identifier rubyid_three'>three</span>
<span class='const'>GOT</span> <span class='const'>And</span> <span class='id identifier rubyid_so'>so</span> <span class='id identifier rubyid_on'>on</span><span class='op'>...</span></code></pre>

<p>If the last argument is a hash, it’s the keyword argument to open. See <a href="#readlines-class_method" title="IO.readlines (method)">.readlines</a> for details about getline_args. And see also <a href="#read-class_method" title="IO.read (method)">.read</a> for details about open_args.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L10950-L10966'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='10950' data-end='10966'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 10950</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_foreach(int argc, VALUE *argv, VALUE self)
{
    VALUE opt;
    int orig_argc = argc;
    struct foreach_arg arg;
    struct getline_arg garg;

    argc = rb_scan_args(argc, argv, &quot;13:&quot;, NULL, NULL, NULL, NULL, &amp;opt);
    RETURN_ENUMERATOR(self, orig_argc, argv);
    extract_getline_args(argc-1, argv+1, &amp;garg);
    open_key_args(self, argc, argv, opt, &amp;arg);
    if (NIL_P(arg.io)) return Qnil;
    extract_getline_opts(opt, &amp;garg);
    check_getline_args(&amp;garg.rs, &amp;garg.limit, garg.io = arg.io);
    return rb_ensure(io_s_foreach, (VALUE)&amp;garg, rb_io_close, arg.io);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="open-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>open</strong>(filename, mode=&quot;r&quot; [, opt])  &#x21d2; <a href="File.html" title="File (class)">File</a> </span>
      <span class='overload'>.<strong>open</strong>(filename [, mode [, perm]] [, opt])  &#x21d2; <a href="File.html" title="File (class)">File</a> </span>
      <span class='overload'>.<strong>open</strong>(filename, mode=&quot;r&quot; [, opt]) {|file| ... } &#x21d2; <a href="Object.html" title="Object (class)">Object</a> </span>
      <span class='overload'>.<strong>open</strong>(filename [, mode [, perm]] [, opt]) {|file| ... } &#x21d2; <a href="Object.html" title="Object (class)">Object</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="File.html#open-class_method" title="File.open (method)">File.open</a>.  With no associated block, <code>open</code> is a synonym for <a href="#new-class_method" title="IO.new (method)">.new</a>.  If the optional code block is given, it will be passed <code>io</code> as an argument, and the <code>IO</code> object will automatically be closed when the block terminates. In this instance, <code>open</code> returns the value of the block.</p>

<p>See <a href="#new-class_method" title="IO.new (method)">.new</a> for a description of the <code>fd</code>, <code>mode</code> and <code>opt</code> parameters.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[ <a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L7474'>GitHub</a> ]</span>

</section>

<section class='method_details' id="pipe-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>pipe</strong>  &#x21d2; <code>IO</code> </span>
      <span class='overload'>.<strong>pipe</strong>(ext_enc)  &#x21d2; <code>IO</code> </span>
      <span class='overload'>.<strong>pipe</strong>(&quot;ext_enc:int_enc&quot; [, opt])  &#x21d2; <code>IO</code> </span>
      <span class='overload'>.<strong>pipe</strong>(ext_enc, int_enc [, opt])  &#x21d2; <code>IO</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p><code>IO</code>.pipe(…) {|read_io, write_io| … }</p>

<p>Creates a pair of pipe endpoints (connected to each other) and returns them as a two-element array of <code>IO</code> objects: <code>[</code> <em>read_io</em>, <em>write_io</em> <code>]</code>.</p>

<p>If a block is given, the block is called and returns the value of the block. <em>read_io</em> and <em>write_io</em> are sent to the block as arguments. If read_io and write_io are not closed when the block exits, they are closed. i.e. closing read_io and/or write_io doesn’t cause an error.</p>

<p>Not available on all platforms.</p>

<p>If an encoding (encoding name or encoding object) is specified as an optional argument, read string from pipe is tagged with the encoding specified. If the argument is a colon separated two encoding names “A:B”, the read string is converted from encoding A (external encoding) to encoding B (internal encoding), then tagged with B. If two optional arguments are specified, those must be encoding objects or encoding names, and the first one is the external encoding, and the second one is the internal encoding. If the external encoding and the internal encoding is specified, optional hash argument specify the conversion option.</p>

<p>In the example below, the two processes close the ends of the pipe that they are not using. This is not just a cosmetic nicety. The read end of a pipe will not generate an end of file condition if there are any writers with the pipe still open. In the case of the parent process, the <code>rd.read</code> will never return if it does not first issue a <code>wr.close</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_rd'>rd</span><span class='comma'>,</span> <span class='id identifier rubyid_wr'>wr</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_pipe'>pipe</span>

<span class='kw'>if</span> <span class='id identifier rubyid_fork'>fork</span>
  <span class='id identifier rubyid_wr'>wr</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>
  <span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Parent got: &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_rd'>rd</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_rd'>rd</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>
  <span class='const'><a href="Process.html" title="Process (module)">Process</a></span>.<span class='id identifier rubyid_wait'><a href="Process.html#wait-class_method" title="Process.wait (method)">wait</a></span>
<span class='kw'>else</span>
  <span class='id identifier rubyid_rd'>rd</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>
  <span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Sending message to parent</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_wr'>wr</span>.<span class='id identifier rubyid_write'><a href="#write-class_method" title="IO.write (method)">write</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hi Dad</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_wr'>wr</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>
<span class='kw'>end</span></code></pre>

<p><em>produces:</em></p>

<pre class="code ruby"><code class="ruby"><span class='const'>Sending</span> <span class='id identifier rubyid_message'>message</span> <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_parent'>parent</span>
<span class='const'>Parent</span> <span class='label'>got:</span> <span class='op'>&lt;</span><span class='const'>Hi</span> <span class='const'>Dad</span><span class='op'>&gt;</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L10781-L10864'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='10781' data-end='10864'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 10781</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_pipe(int argc, VALUE *argv, VALUE klass)
{
    int pipes[2], state;
    VALUE r, w, args[3], v1, v2;
    VALUE opt;
    rb_io_t *fptr, *fptr2;
    struct io_encoding_set_args ies_args;
    int fmode = 0;
    VALUE ret;

    argc = rb_scan_args(argc, argv, &quot;02:&quot;, &amp;v1, &amp;v2, &amp;opt);
    if (rb_pipe(pipes) &lt; 0)
        rb_sys_fail(0);

    args[0] = klass;
    args[1] = INT2NUM(pipes[0]);
    args[2] = INT2FIX(O_RDONLY);
    r = rb_protect(io_new_instance, (VALUE)args, &amp;state);
    if (state) {
	close(pipes[0]);
	close(pipes[1]);
	rb_jump_tag(state);
    }
    GetOpenFile(r, fptr);

    ies_args.fptr = fptr;
    ies_args.v1 = v1;
    ies_args.v2 = v2;
    ies_args.opt = opt;
    rb_protect(io_encoding_set_v, (VALUE)&amp;ies_args, &amp;state);
    if (state) {
	close(pipes[1]);
        io_close(r);
	rb_jump_tag(state);
    }

    args[1] = INT2NUM(pipes[1]);
    args[2] = INT2FIX(O_WRONLY);
    w = rb_protect(io_new_instance, (VALUE)args, &amp;state);
    if (state) {
	close(pipes[1]);
	if (!NIL_P(r)) rb_io_close(r);
	rb_jump_tag(state);
    }
    GetOpenFile(w, fptr2);
    rb_io_synchronized(fptr2);

    extract_binmode(opt, &amp;fmode);

    if ((fmode &amp; FMODE_BINMODE) &amp;&amp; NIL_P(v1)) {
        rb_io_ascii8bit_binmode(r);
        rb_io_ascii8bit_binmode(w);
    }

#if DEFAULT_TEXTMODE
    if ((fptr-&gt;mode &amp; FMODE_TEXTMODE) &amp;&amp; (fmode &amp; FMODE_BINMODE)) {
	fptr-&gt;mode &amp;= ~FMODE_TEXTMODE;
	setmode(fptr-&gt;fd, O_BINARY);
    }
#if RUBY_CRLF_ENVIRONMENT
    if (fptr-&gt;encs.ecflags &amp; ECONV_DEFAULT_NEWLINE_DECORATOR) {
	fptr-&gt;encs.ecflags |= ECONV_UNIVERSAL_NEWLINE_DECORATOR;
    }
#endif
#endif
    fptr-&gt;mode |= fmode;
#if DEFAULT_TEXTMODE
    if ((fptr2-&gt;mode &amp; FMODE_TEXTMODE) &amp;&amp; (fmode &amp; FMODE_BINMODE)) {
	fptr2-&gt;mode &amp;= ~FMODE_TEXTMODE;
	setmode(fptr2-&gt;fd, O_BINARY);
    }
#endif
    fptr2-&gt;mode |= fmode;

    ret = rb_assoc_new(r, w);
    if (rb_block_given_p()) {
	VALUE rw[2];
	rw[0] = r;
	rw[1] = w;
	return rb_ensure(rb_yield, ret, pipe_pair_close, (VALUE)rw);
    }
    return ret;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="popen-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>popen</strong>([env,] cmd, mode=&quot;r&quot; [, opt])  &#x21d2; <code>IO</code> </span>
      <span class='overload'>.<strong>popen</strong>([env,] cmd, mode=&quot;r&quot; [, opt]) {|io| ... } &#x21d2; <a href="Object.html" title="Object (class)">Object</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Runs the specified command as a subprocess; the subprocess’s standard input and output will be connected to the returned <code>IO</code> object.</p>

<p>The PID of the started process can be obtained by <a href="#pid-instance_method" title="IO#pid (method)">#pid</a> method.</p>

<p><em>cmd</em> is a string or an array as follows.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cmd'>cmd</span><span class='op'>:</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span>                                      <span class='op'>:</span> <span class='id identifier rubyid_fork'>fork</span>
  <span class='id identifier rubyid_commandline'>commandline</span>                              <span class='op'>:</span> <span class='id identifier rubyid_command'>command</span> <span class='id identifier rubyid_line'>line</span> <span class='id identifier rubyid_string'>string</span> <span class='id identifier rubyid_which'>which</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_passed'>passed</span> <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_a'>a</span> <span class='id identifier rubyid_shell'>shell</span>
  [<span class='id identifier rubyid_env'>env</span><span class='comma'>,</span> <span class='id identifier rubyid_cmdname'>cmdname</span><span class='comma'>,</span> <span class='id identifier rubyid_arg1'>arg1</span><span class='comma'>,</span> <span class='op'>...</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span>]          <span class='op'>:</span> <span class='id identifier rubyid_command'>command</span> <span class='id identifier rubyid_name'>name</span> <span class='kw'>and</span> <span class='id identifier rubyid_zero'>zero</span> <span class='kw'>or</span> <span class='id identifier rubyid_more'>more</span> <span class='id identifier rubyid_arguments'>arguments</span> (<span class='id identifier rubyid_no'>no</span> <span class='id identifier rubyid_shell'>shell</span>)
  [<span class='id identifier rubyid_env'>env</span><span class='comma'>,</span> [<span class='id identifier rubyid_cmdname'>cmdname</span><span class='comma'>,</span> <span class='id identifier rubyid_argv0'>argv0</span>]<span class='comma'>,</span> <span class='id identifier rubyid_arg1'>arg1</span><span class='comma'>,</span> <span class='op'>...</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span>] <span class='op'>:</span> <span class='id identifier rubyid_command'>command</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_argv'>argv</span>[<span class='int'>0</span>] <span class='kw'>and</span> <span class='id identifier rubyid_zero'>zero</span> <span class='kw'>or</span> <span class='id identifier rubyid_more'>more</span> <span class='id identifier rubyid_arguments'>arguments</span> (<span class='id identifier rubyid_no'>no</span> <span class='id identifier rubyid_shell'>shell</span>)
(<span class='id identifier rubyid_env'>env</span> <span class='kw'>and</span> <span class='id identifier rubyid_opts'>opts</span> <span class='id identifier rubyid_are'>are</span> <span class='id identifier rubyid_optional'>optional</span>.)</code></pre>

<p>If <em>cmd</em> is a <a href="String.html" title="String (class)"><code>::String</code></a> “<code>-</code>”, then a new instance of Ruby is started as the subprocess.</p>

<p>If <em>cmd</em> is an <a href="Array.html" title="Array (class)"><code>::Array</code></a> of <a href="String.html" title="String (class)"><code>::String</code></a>, then it will be used as the subprocess’s <code>argv</code> bypassing a shell. The array can contain a hash at first for environments and a hash at last for options similar to <code>#spawn</code>.</p>

<p>The default mode for the new file object is “r”, but <em>mode</em> may be set to any of the modes listed in the description for class <code>IO</code>. The last argument <em>opt</em> qualifies <em>mode</em>.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># set IO encoding
</span><span class='const'>IO</span>.<span class='id identifier rubyid_popen'>popen</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>nkf -e filename</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_external_encoding'><a href="#external_encoding-instance_method" title="IO#external_encoding (method)">external_encoding</a></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EUC-JP</span><span class='tstring_end'>&quot;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_nkf_io'>nkf_io</span><span class='op'>|</span>
  <span class='id identifier rubyid_euc_jp_string'>euc_jp_string</span> <span class='op'>=</span> <span class='id identifier rubyid_nkf_io'>nkf_io</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>
}

<span class='comment'># merge standard output and standard error using
</span><span class='comment'># spawn option.  See the document of Kernel.spawn.
</span><span class='const'>IO</span>.<span class='id identifier rubyid_popen'>popen</span>([<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ls</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_err'>err</span><span class='op'>=&gt;</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_child'>child</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_out'>out</span>]]) {<span class='op'>|</span><span class='id identifier rubyid_ls_io'>ls_io</span><span class='op'>|</span>
  <span class='id identifier rubyid_ls_result_with_error'>ls_result_with_error</span> <span class='op'>=</span> <span class='id identifier rubyid_ls_io'>ls_io</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>
}

<span class='comment'># spawn options can be mixed with IO options
</span><span class='const'>IO</span>.<span class='id identifier rubyid_popen'>popen</span>([<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ls</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_err'>err</span><span class='op'>=&gt;</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_child'>child</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_out'>out</span>]) {<span class='op'>|</span><span class='id identifier rubyid_ls_io'>ls_io</span><span class='op'>|</span>
  <span class='id identifier rubyid_ls_result_with_error'>ls_result_with_error</span> <span class='op'>=</span> <span class='id identifier rubyid_ls_io'>ls_io</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>
}</code></pre>

<p>Raises exceptions which <a href="#pipe-class_method" title="IO.pipe (method)">.pipe</a> and <a href="Kernel.html#spawn-class_method" title="Kernel.spawn (method)">Kernel.spawn</a> raise.</p>

<p>If a block is given, Ruby will run the command as a child connected to Ruby with a pipe. Ruby’s end of the pipe will be passed as a parameter to the block. At the end of block, Ruby closes the pipe and sets <code>$?</code>. In this case <code>popen</code> returns the value of the block.</p>

<p>If a block is given with a <em>cmd</em> of “<code>-</code>”, the block will be run in two separate processes: once in the parent, and once in a child. The parent process will be passed the pipe object as a parameter to the block, the child version of the block will be passed <code>nil</code>, and the child’s standard in and standard out will be connected to the parent through the pipe. Not available on all platforms.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_popen'>popen</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>uname</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readlines'><a href="#readlines-class_method" title="IO.readlines (method)">readlines</a></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>
<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Parent is </span><span class='embexpr_beg'>#{</span><span class='const'><a href="Process.html" title="Process (module)">Process</a></span>.<span class='id identifier rubyid_pid'><a href="Process.html#pid-class_method" title="Process.pid (method)">pid</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='const'>IO</span>.<span class='id identifier rubyid_popen'>popen</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>date</span><span class='tstring_end'>&quot;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span> }
<span class='const'>IO</span>.<span class='id identifier rubyid_popen'>popen</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='gvar'>$stderr</span>.<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><a href="Process.html" title="Process (module)">Process</a></span>.<span class='id identifier rubyid_pid'><a href="Process.html#pid-class_method" title="Process.pid (method)">pid</a></span><span class='embexpr_end'>}</span><span class='tstring_content'> is here, f is </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_inspect'><a href="#inspect-instance_method" title="IO#inspect (method)">inspect</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>}
<span class='id identifier rubyid_p'>p</span> <span class='gvar'>$?</span>
<span class='const'>IO</span>.<span class='id identifier rubyid_popen'>popen</span>(<span class='qwords'><span class='qwords_beg'>%w&quot;</span><span class='tstring_content'>sed</span><span class='words_sep'> </span><span class='tstring_content'>-e</span><span class='words_sep'> </span><span class='tstring_content'>s|^|&lt;foo&gt;|</span><span class='words_sep'> </span><span class='tstring_content'>-e</span><span class='words_sep'> </span><span class='tstring_content'>s&amp;$&amp;;zot;&amp;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>r+</span><span class='tstring_end'>&quot;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
  <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span><span class='semicolon'>;</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close_write'><a href="#close_write-instance_method" title="IO#close_write (method)">close_write</a></span><span class='semicolon'>;</span> <span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>
}</code></pre>

<p><em>produces:</em></p>

<pre class="code ruby"><code class="ruby">[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Linux\n</span><span class='tstring_end'>&quot;</span></span>]
<span class='const'>Parent</span> <span class='id identifier rubyid_is'>is</span> <span class='int'>21346</span>
<span class='const'>Thu</span> <span class='const'>Jan</span> <span class='int'>15</span> <span class='int'>22</span><span class='symbeg'>:</span><span class='int'>41</span><span class='symbeg'>:</span><span class='int'>19</span> <span class='const'>JST</span> <span class='int'>2009</span>
<span class='int'>21346</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_here'>here</span><span class='comma'>,</span> <span class='id identifier rubyid_f'>f</span> <span class='id identifier rubyid_is'>is</span> <span class='comment'>#&lt;IO:fd 3&gt;
</span><span class='int'>21352</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_here'>here</span><span class='comma'>,</span> <span class='id identifier rubyid_f'>f</span> <span class='id identifier rubyid_is'>is</span> <span class='kw'>nil</span>
<span class='comment'>#&lt;Process::Status: pid 21352 exit 0&gt;
</span><span class='op'>&lt;</span><span class='id identifier rubyid_foo'>foo</span><span class='op'>&gt;</span><span class='id identifier rubyid_bar'>bar</span><span class='semicolon'>;</span><span class='id identifier rubyid_zot'>zot</span><span class='semicolon'>;</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L7322-L7342'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='7322' data-end='7342'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 7322</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_popen(int argc, VALUE *argv, VALUE klass)
{
    VALUE pname, pmode = Qnil, opt = Qnil, env = Qnil;

    if (argc &gt; 1 &amp;&amp; !NIL_P(opt = rb_check_hash_type(argv[argc-1]))) --argc;
    if (argc &gt; 1 &amp;&amp; !NIL_P(env = rb_check_hash_type(argv[0]))) --argc, ++argv;
    switch (argc) {
      case 2:
	pmode = argv[1];
      case 1:
	pname = argv[0];
	break;
      default:
	{
	    int ex = !NIL_P(opt);
	    rb_error_arity(argc + ex, 1 + ex, 2 + ex);
	}
    }
    return popen_finish(rb_io_popen(pname, pmode, env, opt), klass);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="read-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>read</strong>(name, [length [, offset]] [, opt])  &#x21d2; <a href="String.html" title="String (class)">String</a> </span>
      <span class='overload'><strong>File.read</strong>(name, [length [, offset]] [, opt])  &#x21d2; <a href="String.html" title="String (class)">String</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Opens the file, optionally seeks to the given <code>offset</code>, then returns <code>length</code> bytes (defaulting to the rest of the file).  <a href="#read-instance_method" title="IO#read (method)">#read</a> ensures the file is closed before returning.</p>

<p>If <code>name</code> starts with a pipe character (<code>&quot;|&quot;</code>) and the receiver is the <code>IO</code> class, a subprocess is created in the same way as <a href="Kernel.html#open-class_method" title="Kernel.open (method)">Kernel.open</a>, and its output is returned. Consider to use <code>File.read</code> to disable the behavior of subprocess invocation.</p>

<h4 id="label-Options">Options</h4>

<p>The options hash accepts the following keys:</p>
<dl class="rdoc-list note-list"><dt>:encoding</dt>
<dd>
<p>string or encoding</p>

<p>Specifies the encoding of the read string.  <code>:encoding</code> will be ignored if <code>length</code> is specified.  See Encoding.aliases for possible encodings.</p>
</dd><dt>:mode</dt>
<dd>
<p>string or integer</p>

<p>Specifies the <em>mode</em> argument for open().  It must start with an “r”, otherwise it will cause an error. See IO.new for the list of possible modes.</p>
</dd><dt>:open_args</dt>
<dd>
<p>array</p>

<p>Specifies arguments for open() as an array.  This key can not be used in combination with either <code>:encoding</code> or <code>:mode</code>.</p>
</dd></dl>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_read'>read</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)            <span class='comment'>#=&gt; &quot;This is line one\nThis is line two\nThis is line three\nAnd so on...\n&quot;
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_read'>read</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>20</span>)        <span class='comment'>#=&gt; &quot;This is line one\nThi&quot;
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_read'>read</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>20</span><span class='comma'>,</span> <span class='int'>10</span>)    <span class='comment'>#=&gt; &quot;ne one\nThis is line &quot;
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_read'>read</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>binfile</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>mode:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rb</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'>#=&gt; &quot;\xF7\x00\x00\x0E\x12&quot;
</span><span class='const'>IO</span>.<span class='id identifier rubyid_read'>read</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>|ls -a</span><span class='tstring_end'>&quot;</span></span>)                <span class='comment'>#=&gt; &quot;.\n..\n&quot;...</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L11098-L11121'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11098' data-end='11121'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 11098</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_read(int argc, VALUE *argv, VALUE io)
{
    VALUE opt, offset;
    struct foreach_arg arg;

    argc = rb_scan_args(argc, argv, &quot;13:&quot;, NULL, NULL, &amp;offset, NULL, &amp;opt);
    open_key_args(io, argc, argv, opt, &amp;arg);
    if (NIL_P(arg.io)) return Qnil;
    if (!NIL_P(offset)) {
	struct seek_arg sarg;
	int state = 0;
	sarg.io = arg.io;
	sarg.offset = offset;
	sarg.mode = SEEK_SET;
	rb_protect(seek_before_access, (VALUE)&amp;sarg, &amp;state);
	if (state) {
	    rb_io_close(arg.io);
	    rb_jump_tag(state);
	}
	if (arg.argc == 2) arg.argc = 1;
    }
    return rb_ensure(io_s_read, (VALUE)&amp;arg, rb_io_close, arg.io);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="readlines-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>readlines</strong>(name, sep=$/ [, getline_args, open_args])  &#x21d2; <a href="Array.html" title="Array (class)">Array</a> </span>
      <span class='overload'>.<strong>readlines</strong>(name, limit [, getline_args, open_args])  &#x21d2; <a href="Array.html" title="Array (class)">Array</a> </span>
      <span class='overload'>.<strong>readlines</strong>(name, sep, limit [, getline_args, open_args])  &#x21d2; <a href="Array.html" title="Array (class)">Array</a> </span>
      <span class='overload'><strong>File.readlines</strong>(name, sep=$/ [, getline_args, open_args])  &#x21d2; <a href="Array.html" title="Array (class)">Array</a> </span>
      <span class='overload'><strong>File.readlines</strong>(name, limit [, getline_args, open_args])  &#x21d2; <a href="Array.html" title="Array (class)">Array</a> </span>
      <span class='overload'><strong>File.readlines</strong>(name, sep, limit [, getline_args, open_args])  &#x21d2; <a href="Array.html" title="Array (class)">Array</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads the entire file specified by <em>name</em> as individual lines, and returns those lines in an array. Lines are separated by <em>sep</em>.</p>

<p>If <code>name</code> starts with a pipe character (<code>&quot;|&quot;</code>) and the receiver is the <code>IO</code> class, a subprocess is created in the same way as <a href="Kernel.html#open-class_method" title="Kernel.open (method)">Kernel.open</a>, and its output is returned. Consider to use <code>File.readlines</code> to disable the behavior of subprocess invocation.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_readlines'>readlines</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_a'>a</span>[<span class='int'>0</span>]   <span class='comment'>#=&gt; &quot;This is line one\n&quot;
</span>
<span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_readlines'>readlines</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>chomp:</span> <span class='kw'>true</span>)
<span class='id identifier rubyid_b'>b</span>[<span class='int'>0</span>]   <span class='comment'>#=&gt; &quot;This is line one&quot;
</span>
<span class='const'>IO</span>.<span class='id identifier rubyid_readlines'>readlines</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>|ls -a</span><span class='tstring_end'>&quot;</span></span>)     <span class='comment'>#=&gt; [&quot;.\n&quot;, &quot;..\n&quot;, ...]</span></code></pre>

<p>If the last argument is a hash, it’s the keyword argument to open.</p>

<h4 id="label-Options+for+getline">Options for getline</h4>

<p>The options hash accepts the following keys:</p>
<dl class="rdoc-list note-list"><dt>:chomp</dt>
<dd>
<p>When the optional <code>chomp</code> keyword argument has a true value, <code>\n</code>, <code>\r</code>, and <code>\r\n</code> will be removed from the end of each line.</p>
</dd></dl>

<p>See also <a href="#read-class_method" title="IO.read (method)">.read</a> for details about <code>name</code> and open_args.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L11015-L11029'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11015' data-end='11029'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 11015</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_readlines(int argc, VALUE *argv, VALUE io)
{
    VALUE opt;
    struct foreach_arg arg;
    struct getline_arg garg;

    argc = rb_scan_args(argc, argv, &quot;13:&quot;, NULL, NULL, NULL, NULL, &amp;opt);
    extract_getline_args(argc-1, argv+1, &amp;garg);
    open_key_args(io, argc, argv, opt, &amp;arg);
    if (NIL_P(arg.io)) return Qnil;
    extract_getline_opts(opt, &amp;garg);
    check_getline_args(&amp;garg.rs, &amp;garg.limit, garg.io = arg.io);
    return rb_ensure(io_s_readlines, (VALUE)&amp;garg, rb_io_close, arg.io);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="select-class_method">
  <h3 class='signature '>
    .<strong>select</strong>(read_array [, write_array [, error_array [, timeout]]])  &#x21d2; <a href="Array.html" title="Array (class)">Array</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="Kernel.html#select-class_method" title="Kernel.select (method)">Kernel.select</a>. Calls select(2) system call. It monitors given arrays of <code>IO</code> objects, waits until one or more of <code>IO</code> objects are ready for reading, are ready for writing, and have pending exceptions respectively, and returns an array that contains arrays of those <code>IO</code> objects.  It will return <code>nil</code> if optional <em>timeout</em> value is given and no <code>IO</code> object is ready in <em>timeout</em> seconds.</p>

<p><code>select</code> peeks the buffer of <code>IO</code> objects for testing readability. If the <code>IO</code> buffer is not empty, <code>select</code> immediately notifies readability.  This “peek” only happens for <code>IO</code> objects.  It does not happen for IO-like objects such as <code>OpenSSL::SSL::SSLSocket</code>.</p>

<p>The best way to use <code>select</code> is invoking it after nonblocking methods such as <a href="#read_nonblock-instance_method" title="IO#read_nonblock (method)">#read_nonblock</a>, <a href="#write_nonblock-instance_method" title="IO#write_nonblock (method)">#write_nonblock</a>, etc.  The methods raise an exception which is extended by <a href="IO/WaitReadable.html" title="IO::WaitReadable (module)"><code>::IO::WaitReadable</code></a> or <a href="IO/WaitWritable.html" title="IO::WaitWritable (module)"><code>::IO::WaitWritable</code></a>.  The modules notify how the caller should wait with <code>select</code>.  If <a href="IO/WaitReadable.html" title="IO::WaitReadable (module)"><code>::IO::WaitReadable</code></a> is raised, the caller should wait for reading.  If <a href="IO/WaitWritable.html" title="IO::WaitWritable (module)"><code>::IO::WaitWritable</code></a> is raised, the caller should wait for writing.</p>

<p>So, blocking read (#readpartial) can be emulated using <a href="#read_nonblock-instance_method" title="IO#read_nonblock (method)">#read_nonblock</a> and <code>select</code> as follows:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>begin</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_io_like'>io_like</span>.<span class='id identifier rubyid_read_nonblock'><a href="#read_nonblock-instance_method" title="IO#read_nonblock (method)">read_nonblock</a></span>(<span class='id identifier rubyid_maxlen'>maxlen</span>)
<span class='kw'>rescue</span> <span class='const'>IO</span><span class='op'>::</span><span class='const'><a href="IO/WaitReadable.html" title="IO::WaitReadable (module)">WaitReadable</a></span>
  <span class='const'>IO</span>.<span class='id identifier rubyid_select'>select</span>([<span class='id identifier rubyid_io_like'>io_like</span>])
  <span class='kw'>retry</span>
<span class='kw'>rescue</span> <span class='const'>IO</span><span class='op'>::</span><span class='const'><a href="IO/WaitWritable.html" title="IO::WaitWritable (module)">WaitWritable</a></span>
  <span class='const'>IO</span>.<span class='id identifier rubyid_select'>select</span>(<span class='kw'>nil</span><span class='comma'>,</span> [<span class='id identifier rubyid_io_like'>io_like</span>])
  <span class='kw'>retry</span>
<span class='kw'>end</span></code></pre>

<p>Especially, the combination of nonblocking methods and <code>select</code> is preferred for <code>IO</code> like objects such as <code>OpenSSL::SSL::SSLSocket</code>.  It has <a href="#to_io-instance_method" title="IO#to_io (method)">#to_io</a> method to return underlying <code>IO</code> object.  <code>select</code> calls <a href="#to_io-instance_method" title="IO#to_io (method)">#to_io</a> to obtain the file descriptor to wait.</p>

<p>This means that readability notified by <code>select</code> doesn’t mean readability from <code>OpenSSL::SSL::SSLSocket</code> object.</p>

<p>The most likely situation is that <code>OpenSSL::SSL::SSLSocket</code> buffers some data.  <code>select</code> doesn’t see the buffer.  So <code>select</code> can block when <code>OpenSSL::SSL::SSLSocket#readpartial</code> doesn’t block.</p>

<p>However, several more complicated situations exist.</p>

<p>SSL is a protocol which is sequence of records. The record consists of multiple bytes. So, the remote side of SSL sends a partial record, <code>select</code> notifies readability but <code>OpenSSL::SSL::SSLSocket</code> cannot decrypt a byte and <code>OpenSSL::SSL::SSLSocket#readpartial</code> will block.</p>

<p>Also, the remote side can request SSL renegotiation which forces the local SSL engine to write some data. This means <code>OpenSSL::SSL::SSLSocket#readpartial</code> may invoke <a href="#write-instance_method" title="IO#write (method)">#write</a> system call and it can block. In such a situation, <code>OpenSSL::SSL::SSLSocket#read_nonblock</code> raises <a href="IO/WaitWritable.html" title="IO::WaitWritable (module)"><code>::IO::WaitWritable</code></a> instead of blocking. So, the caller should wait for ready for writability as above example.</p>

<p>The combination of nonblocking methods and <code>select</code> is also useful for streams such as tty, pipe socket socket when multiple processes read from a stream.</p>

<p>Finally, Linux kernel developers don’t guarantee that readability of select(2) means readability of following read(2) even for a single process. See select(2) manual on GNU/Linux system.</p>

<p>Invoking <code>select</code> before <a href="#readpartial-instance_method" title="IO#readpartial (method)">#readpartial</a> works well as usual. However it is not the best way to use <code>select</code>.</p>

<p>The writability notified by select(2) doesn’t show how many bytes are writable. <a href="#write-instance_method" title="IO#write (method)">#write</a> method blocks until given whole string is written. So, <code>IO#write(two or more bytes)</code> can block after writability is notified by <code>select</code>.  <a href="#write_nonblock-instance_method" title="IO#write_nonblock (method)">#write_nonblock</a> is required to avoid the blocking.</p>

<p>Blocking write (#write) can be emulated using <a href="#write_nonblock-instance_method" title="IO#write_nonblock (method)">#write_nonblock</a> and <code>select</code> as follows: <a href="IO/WaitReadable.html" title="IO::WaitReadable (module)"><code>::IO::WaitReadable</code></a> should also be rescued for SSL renegotiation in <code>OpenSSL::SSL::SSLSocket</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>while</span> <span class='int'>0</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_bytesize'>bytesize</span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_written'>written</span> <span class='op'>=</span> <span class='id identifier rubyid_io_like'>io_like</span>.<span class='id identifier rubyid_write_nonblock'><a href="#write_nonblock-instance_method" title="IO#write_nonblock (method)">write_nonblock</a></span>(<span class='id identifier rubyid_string'>string</span>)
  <span class='kw'>rescue</span> <span class='const'>IO</span><span class='op'>::</span><span class='const'><a href="IO/WaitReadable.html" title="IO::WaitReadable (module)">WaitReadable</a></span>
    <span class='const'>IO</span>.<span class='id identifier rubyid_select'>select</span>([<span class='id identifier rubyid_io_like'>io_like</span>])
    <span class='kw'>retry</span>
  <span class='kw'>rescue</span> <span class='const'>IO</span><span class='op'>::</span><span class='const'><a href="IO/WaitWritable.html" title="IO::WaitWritable (module)">WaitWritable</a></span>
    <span class='const'>IO</span>.<span class='id identifier rubyid_select'>select</span>(<span class='kw'>nil</span><span class='comma'>,</span> [<span class='id identifier rubyid_io_like'>io_like</span>])
    <span class='kw'>retry</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_byteslice'>byteslice</span>(<span class='id identifier rubyid_written'>written</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span>)
<span class='kw'>end</span></code></pre>

<h4 id="label-Parameters">Parameters</h4>
<dl class="rdoc-list note-list"><dt>read_array</dt>
<dd>
<p>an array of <code>IO</code> objects that wait until ready for read</p>
</dd><dt>write_array</dt>
<dd>
<p>an array of <code>IO</code> objects that wait until ready for write</p>
</dd><dt>error_array</dt>
<dd>
<p>an array of <code>IO</code> objects that wait for exceptions</p>
</dd><dt>timeout</dt>
<dd>
<p>a numeric value in second</p>
</dd></dl>

<h4 id="label-Example">Example</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_rp'>rp</span><span class='comma'>,</span> <span class='id identifier rubyid_wp'>wp</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>
<span class='id identifier rubyid_mesg'>mesg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ping </span><span class='tstring_end'>&quot;</span></span>
<span class='int'>100</span>.<span class='id identifier rubyid_times'>times</span> {
  <span class='comment'># IO.select follows IO#read.  Not the best way to use IO.select.
</span>  <span class='id identifier rubyid_rs'>rs</span><span class='comma'>,</span> <span class='id identifier rubyid_ws'>ws</span><span class='comma'>,</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_select'>select</span>([<span class='id identifier rubyid_rp'>rp</span>]<span class='comma'>,</span> [<span class='id identifier rubyid_wp'>wp</span>])
  <span class='kw'>if</span> <span class='id identifier rubyid_r'>r</span> <span class='op'>=</span> <span class='id identifier rubyid_rs'>rs</span>[<span class='int'>0</span>]
    <span class='id identifier rubyid_ret'>ret</span> <span class='op'>=</span> <span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>(<span class='int'>5</span>)
    <span class='id identifier rubyid_print'><a href="#print-instance_method" title="IO#print (method)">print</a></span> <span class='id identifier rubyid_ret'>ret</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_ret'>ret</span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>ping</span><span class='regexp_end'>/</span></span>
      <span class='id identifier rubyid_mesg'>mesg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pong\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>pong</span><span class='regexp_end'>/</span></span>
      <span class='id identifier rubyid_mesg'>mesg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ping </span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_w'>w</span> <span class='op'>=</span> <span class='id identifier rubyid_ws'>ws</span>[<span class='int'>0</span>]
    <span class='id identifier rubyid_w'>w</span>.<span class='id identifier rubyid_write'><a href="#write-class_method" title="IO.write (method)">write</a></span>(<span class='id identifier rubyid_mesg'>mesg</span>)
  <span class='kw'>end</span>
}</code></pre>

<p><em>produces:</em></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ping'>ping</span> <span class='id identifier rubyid_pong'>pong</span>
<span class='id identifier rubyid_ping'>ping</span> <span class='id identifier rubyid_pong'>pong</span>
<span class='id identifier rubyid_ping'>ping</span> <span class='id identifier rubyid_pong'>pong</span>
(<span class='id identifier rubyid_snipped'>snipped</span>)
<span class='id identifier rubyid_ping'>ping</span></code></pre>

  </div>
</div>

</section>

<section class='method_details' id="sysopen-class_method">
  <h3 class='signature '>
    .<strong>sysopen</strong>(path, [mode, [perm]])  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Opens the given path, returning the underlying file descriptor as a <a href="Integer.html" title="Integer (class)"><code>::Integer</code></a>.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_sysopen'>sysopen</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)   <span class='comment'>#=&gt; 3</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L7496-L7521'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='7496' data-end='7521'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 7496</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_sysopen(int argc, VALUE *argv, VALUE _)
{
    VALUE fname, vmode, vperm;
    VALUE intmode;
    int oflags, fd;
    mode_t perm;

    rb_scan_args(argc, argv, &quot;12&quot;, &amp;fname, &amp;vmode, &amp;vperm);
    FilePathValue(fname);

    if (NIL_P(vmode))
        oflags = O_RDONLY;
    else if (!NIL_P(intmode = rb_check_to_integer(vmode, &quot;to_int&quot;)))
        oflags = NUM2INT(intmode);
    else {
	SafeStringValue(vmode);
	oflags = rb_io_modestr_oflags(StringValueCStr(vmode));
    }
    if (NIL_P(vperm)) perm = 0666;
    else              perm = NUM2MODET(vperm);

    RB_GC_GUARD(fname) = rb_str_new4(fname);
    fd = rb_sysopen(fname, oflags, perm);
    return INT2NUM(fd);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="try_convert-class_method">
  <h3 class='signature '>
    .<strong>try_convert</strong>(object)  &#x21d2; <code>IO</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Attempts to convert <code>object</code> into an IO object via method <a href="#to_io-instance_method" title="IO#to_io (method)">#to_io</a>; returns the new IO object if successful, or <code>nil</code> otherwise:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_try_convert'>try_convert</span>(<span class='const'><a href="top-level-namespace.html#STDOUT-constant" title="STDOUT (constant)">STDOUT</a></span>)   <span class='comment'># =&gt; #&lt;IO:&lt;STDOUT&gt;&gt;
</span><span class='const'>IO</span>.<span class='id identifier rubyid_try_convert'>try_convert</span>(<span class='const'><a href="ARGF.html" title="ARGF (class)">ARGF</a></span>)     <span class='comment'># =&gt; #&lt;IO:&lt;STDIN&gt;&gt;
</span><span class='const'>IO</span>.<span class='id identifier rubyid_try_convert'>try_convert</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>STDOUT</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L851-L855'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='851' data-end='855'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 851</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_try_convert(VALUE dummy, VALUE io)
{
    return rb_io_check_io(io);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="write-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>write</strong>(name, string [, offset])  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a> </span>
      <span class='overload'>.<strong>write</strong>(name, string [, offset] [, opt])  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a> </span>
      <span class='overload'><strong>File.write</strong>(name, string [, offset])  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a> </span>
      <span class='overload'><strong>File.write</strong>(name, string [, offset] [, opt])  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Opens the file, optionally seeks to the given <em>offset</em>, writes <em>string</em>, then returns the length written.  <a href="#write-instance_method" title="IO#write (method)">#write</a> ensures the file is closed before returning.  If <em>offset</em> is not given in write mode, the file is truncated.  Otherwise, it is not truncated.</p>

<p>If <code>name</code> starts with a pipe character (<code>&quot;|&quot;</code>) and the receiver is the <code>IO</code> class, a subprocess is created in the same way as <a href="Kernel.html#open-class_method" title="Kernel.open (method)">Kernel.open</a>, and its output is returned. Consider to use <code>File.write</code> to disable the behavior of subprocess invocation.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_write'>write</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>20</span>)  <span class='comment'>#=&gt; 10
</span><span class='comment'># File could contain:  &quot;This is line one\nThi0123456789two\nThis is line three\nAnd so on...\n&quot;
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_write'>write</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0123456789</span><span class='tstring_end'>&quot;</span></span>)      <span class='comment'>#=&gt; 10
</span><span class='comment'># File would now read: &quot;0123456789&quot;
</span><span class='const'>IO</span>.<span class='id identifier rubyid_write'>write</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>|tr a-z A-Z</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&quot;</span></span>)            <span class='comment'>#=&gt; 3
</span><span class='comment'># Prints &quot;ABC&quot; to the standard output</span></code></pre>

<p>If the last argument is a hash, it specifies options for the internal open().  It accepts the following keys:</p>
<dl class="rdoc-list note-list"><dt>:encoding</dt>
<dd>
<p>string or encoding</p>

<p>Specifies the encoding of the read string. See Encoding.aliases for possible encodings.</p>
</dd><dt>:mode</dt>
<dd>
<p>string or integer</p>

<p>Specifies the <em>mode</em> argument for open().  It must start with “w”, “a”, or “r+”, otherwise it will cause an error. See IO.new for the list of possible modes.</p>
</dd><dt>:perm</dt>
<dd>
<p>integer</p>

<p>Specifies the <em>perm</em> argument for open().</p>
</dd><dt>:open_args</dt>
<dd>
<p>array</p>

<p>Specifies arguments for open() as an array. This key can not be used in combination with other keys.</p>
</dd></dl>

<p>See also <a href="#read-class_method" title="IO.read (method)">.read</a> for details about <code>name</code> and open_args.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L11291-L11295'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11291' data-end='11295'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 11291</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_write(int argc, VALUE *argv, VALUE io)
{
    return io_s_write(argc, argv, io, 0);
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="autoclose=-instance_method">
  <h3 class='signature rw first'>
    #<strong>autoclose=</strong>(bool)  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets auto-close flag.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='id identifier rubyid_open'><a href="#open-class_method" title="IO.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/dev/null</span><span class='tstring_end'>&quot;</span></span>)
<span class='const'>IO</span>.<span class='id identifier rubyid_for_fd'><a href="#for_fd-class_method" title="IO.for_fd (method)">for_fd</a></span>(<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_fileno'><a href="#fileno-instance_method" title="IO#fileno (method)">fileno</a></span>)
<span class='comment'># ...
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span> <span class='comment'># may cause Errno::EBADF
</span>
<span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='id identifier rubyid_open'><a href="#open-class_method" title="IO.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/dev/null</span><span class='tstring_end'>&quot;</span></span>)
<span class='const'>IO</span>.<span class='id identifier rubyid_for_fd'><a href="#for_fd-class_method" title="IO.for_fd (method)">for_fd</a></span>(<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_fileno'><a href="#fileno-instance_method" title="IO#fileno (method)">fileno</a></span>).<span class='id identifier rubyid_autoclose'>autoclose</span> <span class='op'>=</span> <span class='kw'>false</span>
<span class='comment'># ...
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span> <span class='comment'># won&#39;t cause Errno::EBADF</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L8967-L8977'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8967' data-end='8977'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 8967</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_set_autoclose(VALUE io, VALUE autoclose)
{
    rb_io_t *fptr;
    GetOpenFile(io, fptr);
    if (!RTEST(autoclose))
	fptr-&gt;mode |= FMODE_PREP;
    else
	fptr-&gt;mode &amp;= ~FMODE_PREP;
    return autoclose;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="autoclose?-instance_method">
  <h3 class='signature rw'>
    #<strong>autoclose?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if the underlying file descriptor of <em>ios</em> will be closed automatically at its finalization, otherwise <code>false</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L8942-L8948'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8942' data-end='8948'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 8942</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_autoclose_p(VALUE io)
{
    rb_io_t *fptr = RFILE(io)-&gt;fptr;
    rb_io_check_closed(fptr);
    return (fptr-&gt;mode &amp; FMODE_PREP) ? Qfalse : Qtrue;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="binmode-instance_method">
  <h3 class='signature ro'>
    #<strong>binmode</strong>  &#x21d2; <code>IO</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Puts <em>ios</em> into binary mode. Once a stream is in binary mode, it cannot be reset to nonbinary mode.</p>
<ul><li>
<p>newline conversion disabled</p>
</li><li>
<p>encoding conversion disabled</p>
</li><li>
<p>content is treated as ASCII-8BIT</p>
</li></ul>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L5810-L5821'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5810' data-end='5821'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 5810</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_binmode_m(VALUE io)
{
    VALUE write_io;

    rb_io_ascii8bit_binmode(io);

    write_io = GetWriteIO(io);
    if (write_io != io)
        rb_io_ascii8bit_binmode(write_io);
    return io;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="binmode?-instance_method">
  <h3 class='signature ro'>
    #<strong>binmode?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if <em>ios</em> is binmode.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L5829-L5835'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5829' data-end='5835'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 5829</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_binmode_p(VALUE io)
{
    rb_io_t *fptr;
    GetOpenFile(io, fptr);
    return RBOOL(fptr-&gt;mode &amp; FMODE_BINMODE);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="close_on_exec=-instance_method">
  <h3 class='signature rw'>
    #<strong>close_on_exec=</strong>(bool)  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets a close-on-exec flag.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='id identifier rubyid_open'><a href="#open-class_method" title="IO.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/dev/null</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close_on_exec'>close_on_exec</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='id identifier rubyid_system'>system</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cat</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/proc/self/fd/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_fileno'><a href="#fileno-instance_method" title="IO#fileno (method)">fileno</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># cat: /proc/self/fd/3: No such file or directory
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_closed?'><a href="#closed%3F-instance_method" title="IO#closed? (method)">closed?</a></span>                <span class='comment'>#=&gt; false</span></code></pre>

<p>Ruby sets close-on-exec flags of all file descriptors by default since Ruby 2.0.0. So you don’t need to set by yourself. Also, unsetting a close-on-exec flag can cause file descriptor leak if another thread use fork() and exec() (via system() method for example). If you really needs file descriptor inheritance to child process, use spawn()‘s argument such as fd=&gt;fd.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L4850-L4882'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4850' data-end='4882'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4850</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_set_close_on_exec(VALUE io, VALUE arg)
{
    int flag = RTEST(arg) ? FD_CLOEXEC : 0;
    rb_io_t *fptr;
    VALUE write_io;
    int fd, ret;

    write_io = GetWriteIO(io);
    if (io != write_io) {
        GetOpenFile(write_io, fptr);
        if (fptr &amp;&amp; 0 &lt;= (fd = fptr-&gt;fd)) {
            if ((ret = fcntl(fptr-&gt;fd, F_GETFD)) == -1) rb_sys_fail_path(fptr-&gt;pathv);
            if ((ret &amp; FD_CLOEXEC) != flag) {
                ret = (ret &amp; ~FD_CLOEXEC) | flag;
                ret = fcntl(fd, F_SETFD, ret);
                if (ret != 0) rb_sys_fail_path(fptr-&gt;pathv);
            }
        }

    }

    GetOpenFile(io, fptr);
    if (fptr &amp;&amp; 0 &lt;= (fd = fptr-&gt;fd)) {
        if ((ret = fcntl(fd, F_GETFD)) == -1) rb_sys_fail_path(fptr-&gt;pathv);
        if ((ret &amp; FD_CLOEXEC) != flag) {
            ret = (ret &amp; ~FD_CLOEXEC) | flag;
            ret = fcntl(fd, F_SETFD, ret);
            if (ret != 0) rb_sys_fail_path(fptr-&gt;pathv);
        }
    }
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="close_on_exec?-instance_method">
  <h3 class='signature rw'>
    #<strong>close_on_exec?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if <em>ios</em> will be closed on exec.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='id identifier rubyid_open'><a href="#open-class_method" title="IO.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/dev/null</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close_on_exec?'>close_on_exec?</span>                 <span class='comment'>#=&gt; false
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close_on_exec'>close_on_exec</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close_on_exec?'>close_on_exec?</span>                 <span class='comment'>#=&gt; true
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close_on_exec'>close_on_exec</span> <span class='op'>=</span> <span class='kw'>false</span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close_on_exec?'>close_on_exec?</span>                 <span class='comment'>#=&gt; false</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L4802-L4824'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4802' data-end='4824'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4802</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_close_on_exec_p(VALUE io)
{
    rb_io_t *fptr;
    VALUE write_io;
    int fd, ret;

    write_io = GetWriteIO(io);
    if (io != write_io) {
        GetOpenFile(write_io, fptr);
        if (fptr &amp;&amp; 0 &lt;= (fd = fptr-&gt;fd)) {
            if ((ret = fcntl(fd, F_GETFD)) == -1) rb_sys_fail_path(fptr-&gt;pathv);
            if (!(ret &amp; FD_CLOEXEC)) return Qfalse;
        }
    }

    GetOpenFile(io, fptr);
    if (fptr &amp;&amp; 0 &lt;= (fd = fptr-&gt;fd)) {
        if ((ret = fcntl(fd, F_GETFD)) == -1) rb_sys_fail_path(fptr-&gt;pathv);
        if (!(ret &amp; FD_CLOEXEC)) return Qfalse;
    }
    return Qtrue;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="closed?-instance_method">
  <h3 class='signature ro'>
    #<strong>closed?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if <em>ios</em> is completely closed (for duplex streams, both reader and writer), <code>false</code> otherwise.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>         <span class='comment'>#=&gt; nil
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_closed?'>closed?</span>       <span class='comment'>#=&gt; true
</span><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_popen'><a href="#popen-class_method" title="IO.popen (method)">popen</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/bin/sh</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>r+</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close_write'><a href="#close_write-instance_method" title="IO#close_write (method)">close_write</a></span>   <span class='comment'>#=&gt; nil
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_closed?'>closed?</span>       <span class='comment'>#=&gt; false
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close_read'><a href="#close_read-instance_method" title="IO#close_read (method)">close_read</a></span>    <span class='comment'>#=&gt; nil
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_closed?'>closed?</span>       <span class='comment'>#=&gt; true</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L5316-L5333'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5316' data-end='5333'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 5316</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_closed(VALUE io)
{
    rb_io_t *fptr;
    VALUE write_io;
    rb_io_t *write_fptr;

    write_io = GetWriteIO(io);
    if (io != write_io) {
        write_fptr = RFILE(write_io)-&gt;fptr;
        if (write_fptr &amp;&amp; 0 &lt;= write_fptr-&gt;fd) {
            return Qfalse;
        }
    }

    fptr = rb_io_get_fptr(io);
    return RBOOL(0 &gt; fptr-&gt;fd);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="eof-instance_method">
  <h3 class='signature ro'>
    #<strong>eof</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>    <span class='aliases'>Also known as: <span class='names'>#eof?</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if the stream is positioned at its end, <code>false</code> otherwise; see <a href='#label-Position'>Position</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_eof'>eof</span>           <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_seek'><a href="#seek-instance_method" title="IO#seek (method)">seek</a></span>(<span class='int'>0</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='kw'>END</span>) <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_eof'>eof</span>           <span class='comment'># =&gt; true</span></code></pre>

<p>Raises an exception unless the stream is opened for reading; see <a href='#label-Mode'>Mode</a>.</p>

<p>If <code>self</code> is a stream such as pipe or socket, this method blocks until the other end sends some data or closes it:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_w'>w</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>
<span class='const'><a href="Thread.html" title="Thread (class)">Thread</a></span>.<span class='id identifier rubyid_new'><a href="Thread.html#new-class_method" title="Thread.new (method)">new</a></span> { <span class='id identifier rubyid_sleep'>sleep</span> <span class='int'>1</span><span class='semicolon'>;</span> <span class='id identifier rubyid_w'>w</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span> }
<span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_eof?'><a href="#eof%3F-instance_method" title="IO#eof? (method)">eof?</a></span> <span class='comment'># =&gt; true # After 1-second wait.
</span>
<span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_w'>w</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>
<span class='const'><a href="Thread.html" title="Thread (class)">Thread</a></span>.<span class='id identifier rubyid_new'><a href="Thread.html#new-class_method" title="Thread.new (method)">new</a></span> { <span class='id identifier rubyid_sleep'>sleep</span> <span class='int'>1</span><span class='semicolon'>;</span> <span class='id identifier rubyid_w'>w</span>.<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span> }
<span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_eof?'><a href="#eof%3F-instance_method" title="IO#eof? (method)">eof?</a></span>  <span class='comment'># =&gt; false # After 1-second wait.
</span>
<span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_w'>w</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>
<span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_eof?'><a href="#eof%3F-instance_method" title="IO#eof? (method)">eof?</a></span>  <span class='comment'># blocks forever</span></code></pre>

<p>Note that this method reads data to the input byte buffer.  So <a href="#sysread-instance_method" title="IO#sysread (method)">#sysread</a> may not behave as you intend with <a href="#eof%3F-instance_method" title="IO#eof? (method)">#eof?</a>, unless you call <a href="#rewind-instance_method" title="IO#rewind (method)">#rewind</a> first (which is not available for some streams).</p>

<p><code>I#eof?</code> is an alias for <code>eof</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L2449-L2466'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2449' data-end='2466'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2449</span></pre>
<pre class='code cpp'>

VALUE
rb_io_eof(VALUE io)
{
    rb_io_t *fptr;

    GetOpenFile(io, fptr);
    rb_io_check_char_readable(fptr);

    if (READ_CHAR_PENDING(fptr)) return Qfalse;
    if (READ_DATA_PENDING(fptr)) return Qfalse;
    READ_CHECK(fptr);
#if RUBY_CRLF_ENVIRONMENT
    if (!NEED_READCONV(fptr) &amp;&amp; NEED_NEWLINE_DECORATOR_ON_READ(fptr)) {
	return RBOOL(eof(fptr-&gt;fd));;
    }
#endif
    return RBOOL(io_fillbuf(fptr) &lt; 0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="eof?-instance_method">
  <h3 class='signature ro'>
    <div class='inline-block'>
      <span class='overload'>#<strong>eof</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span></span>
      <span class='overload'>#<strong>eof?</strong>  &#x21d2; <code>Boolean</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#eof-instance_method" title="IO#eof (method)">#eof</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="isatty-instance_method">
  <h3 class='signature ro'>
    <div class='inline-block'>
      <span class='overload'>#<strong>isatty</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span></span>
      <span class='overload'>#<strong>tty?</strong>  &#x21d2; <code>Boolean</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#tty%3F-instance_method" title="IO#tty? (method)">#tty?</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="lineno-instance_method">
  <h3 class='signature rw'>
    #<strong>lineno</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the current line number in <em>ios</em>.  The stream must be opened for reading. <code>#lineno</code> counts the number of times <a href="#gets-instance_method" title="IO#gets (method)">#gets</a> is called rather than the number of newlines encountered.  The two values will differ if <a href="#gets-instance_method" title="IO#gets (method)">#gets</a> is called with a separator other than newline.</p>

<p>Methods that use <code>$/</code> like <a href="#each-instance_method" title="IO#each (method)">#each</a>, <code>#lines</code> and <a href="#readline-instance_method" title="IO#readline (method)">#readline</a> will also increment <code>#lineno</code>.</p>

<p>See also the <code>$.</code> variable.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'>lineno</span>   <span class='comment'>#=&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>     <span class='comment'>#=&gt; &quot;This is line one\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'>lineno</span>   <span class='comment'>#=&gt; 1
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>     <span class='comment'>#=&gt; &quot;This is line two\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'>lineno</span>   <span class='comment'>#=&gt; 2</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L4075-L4083'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4075' data-end='4083'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4075</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_lineno(VALUE io)
{
    rb_io_t *fptr;

    GetOpenFile(io, fptr);
    rb_io_check_char_readable(fptr);
    return INT2NUM(fptr-&gt;lineno);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="lineno=-instance_method">
  <h3 class='signature rw'>
    #<strong>lineno=</strong>(integer)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Manually sets the current line number to the given value. <code>$.</code> is updated only on the next read.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>                     <span class='comment'>#=&gt; &quot;This is line one\n&quot;
</span><span class='gvar'>$.</span>                         <span class='comment'>#=&gt; 1
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="IO#lineno (method)">lineno</a></span> <span class='op'>=</span> <span class='int'>1000</span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="IO#lineno (method)">lineno</a></span>                   <span class='comment'>#=&gt; 1000
</span><span class='gvar'>$.</span>                         <span class='comment'>#=&gt; 1         # lineno of last read
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>                     <span class='comment'>#=&gt; &quot;This is line two\n&quot;
</span><span class='gvar'>$.</span>                         <span class='comment'>#=&gt; 1001      # lineno of last read</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L4102-L4111'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4102' data-end='4111'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4102</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_set_lineno(VALUE io, VALUE lineno)
{
    rb_io_t *fptr;

    GetOpenFile(io, fptr);
    rb_io_check_char_readable(fptr);
    fptr-&gt;lineno = NUM2INT(lineno);
    return lineno;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pos-instance_method">
  <h3 class='signature rw'>
    #<strong>pos</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>  <span class="extras">(<span class='rw'>rw</span>)</span>    <span class='aliases'>Also known as: <span class='names'>#tell</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the current position (in bytes) in <code>self</code> (see <a href='#label-Position'>Position</a>):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>     <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readline'><a href="#readline-instance_method" title="IO#readline (method)">readline</a></span> <span class='comment'># =&gt; &quot;This is line one.\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>     <span class='comment'># =&gt; 19</span></code></pre>

<p>Related: <a href="#pos=-instance_method" title="IO#pos= (method)">#pos=</a>, <a href="#seek-instance_method" title="IO#seek (method)">#seek</a>.</p>

<p><code>pos</code> is an alias for <a href="#tell-instance_method" title="IO#tell (method)">#tell</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L2185-L2196'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2185' data-end='2196'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2185</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_tell(VALUE io)
{
    rb_io_t *fptr;
    off_t pos;

    GetOpenFile(io, fptr);
    pos = io_tell(fptr);
    if (pos &lt; 0 &amp;&amp; errno) rb_sys_fail_path(fptr-&gt;pathv);
    pos -= fptr-&gt;rbuf.len;
    return OFFT2NUM(pos);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pos=-instance_method">
  <h3 class='signature rw'>
    #<strong>pos=</strong>(new_position)  &#x21d2; <code>IO</code>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Seeks to the given <code>new_position</code> (in bytes); see <a href='#label-Position'>Position</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>     <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="IO#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>20</span> <span class='comment'># =&gt; 20
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>     <span class='comment'># =&gt; 20</span></code></pre>

<p>Related: <a href="#seek-instance_method" title="IO#seek (method)">#seek</a>, <a href="#tell-instance_method" title="IO#tell (method)">#tell</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L2305-L2317'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2305' data-end='2317'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2305</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_set_pos(VALUE io, VALUE offset)
{
    rb_io_t *fptr;
    off_t pos;

    pos = NUM2OFFT(offset);
    GetOpenFile(io, fptr);
    pos = io_seek(fptr, pos, SEEK_SET);
    if (pos &lt; 0 &amp;&amp; errno) rb_sys_fail_path(fptr-&gt;pathv);

    return OFFT2NUM(pos);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sync-instance_method">
  <h3 class='signature rw'>
    #<strong>sync</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the current sync mode of the stream. When sync mode is true, all output is immediately flushed to the underlying operating system and is not buffered by Ruby internally. See also <a href="#fsync-instance_method" title="IO#fsync (method)">#fsync</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_sync'>sync</span> <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_sync'>sync</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_sync'>sync</span> <span class='comment'># =&gt; true</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L2483-L2491'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2483' data-end='2491'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2483</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_sync(VALUE io)
{
    rb_io_t *fptr;

    io = GetWriteIO(io);
    GetOpenFile(io, fptr);
    return RBOOL(fptr-&gt;mode &amp; FMODE_SYNC);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sync=-instance_method">
  <h3 class='signature rw'>
    #<strong>sync=</strong>(boolean)  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets the <em>sync</em> <em>mode</em> for the stream to the given value; returns the given value.</p>

<p>Values for the sync mode:</p>
<ul><li>
<p><code>true</code>: All output is immediately flushed to the underlying operating system and is not buffered internally.</p>
</li><li>
<p><code>false</code>: Output may be buffered internally.</p>
</li></ul>

<p>Example;</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_sync'><a href="#sync-instance_method" title="IO#sync (method)">sync</a></span> <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_sync'><a href="#sync-instance_method" title="IO#sync (method)">sync</a></span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_sync'><a href="#sync-instance_method" title="IO#sync (method)">sync</a></span> <span class='comment'># =&gt; true</span></code></pre>

<p>Related: <a href="#fsync-instance_method" title="IO#fsync (method)">#fsync</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L2519-L2533'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2519' data-end='2533'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2519</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_set_sync(VALUE io, VALUE sync)
{
    rb_io_t *fptr;

    io = GetWriteIO(io);
    GetOpenFile(io, fptr);
    if (RTEST(sync)) {
	fptr-&gt;mode |= FMODE_SYNC;
    }
    else {
	fptr-&gt;mode &amp;= ~FMODE_SYNC;
    }
    return sync;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="tell-instance_method">
  <h3 class='signature ro'>
    <div class='inline-block'>
      <span class='overload'>#<strong>pos</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>  <span class="extras">(<span class='readonly'>readonly</span>)</span></span>
      <span class='overload'>#<strong>tell</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#pos-instance_method" title="IO#pos (method)">#pos</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="tty?-instance_method">
  <h3 class='signature ro'>
    <div class='inline-block'>
      <span class='overload'>#<strong>isatty</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span></span>
      <span class='overload'>#<strong>tty?</strong>  &#x21d2; <code>Boolean</code> </span>
    </div>
    <span class='aliases'>Also known as: <span class='names'>#isatty</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if <em>ios</em> is associated with a terminal device (tty), <code>false</code> otherwise.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_isatty'><a href="#isatty-instance_method" title="IO#isatty (method)">isatty</a></span>   <span class='comment'>#=&gt; false
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/dev/tty</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_isatty'><a href="#isatty-instance_method" title="IO#isatty (method)">isatty</a></span>   <span class='comment'>#=&gt; true</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L4778-L4785'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4778' data-end='4785'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4778</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_isatty(VALUE io)
{
    rb_io_t *fptr;

    GetOpenFile(io, fptr);
    return RBOOL(isatty(fptr-&gt;fd) != 0);
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="<<-instance_method">
  <h3 class='signature  first'>
    #<strong>&lt;&lt;</strong>(object)  &#x21d2; <code>self</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes the given <code>object</code> to <code>self</code>, which must be opened for writing (see <a href='#label-Modes'>Modes</a>); returns <code>self</code>; if <code>object</code> is not a string, it is converted via method <code>to_s</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$stdout</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Hello</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>World!</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
<span class='gvar'>$stdout</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&lt;&lt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bar'>bar</span> <span class='op'>&lt;&lt;</span> <span class='int'>2</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Hello</span><span class='comma'>,</span> <span class='id identifier rubyid_World!'>World!</span>
<span class='id identifier rubyid_foobar2'>foobar2</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L2105-L2110'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2105' data-end='2110'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2105</span></pre>
<pre class='code cpp'>

VALUE
rb_io_addstr(VALUE io, VALUE str)
{
    rb_io_write(io, str);
    return io;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="advise-instance_method">
  <h3 class='signature '>
    #<strong>advise</strong>(advice, offset = 0, len = 0)  &#x21d2; <code>nil</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Announce an intention to access data from the current file in a specific pattern. On platforms that do not support the <em>posix_fadvise(2)</em> system call, this method is a no-op.</p>

<p><em>advice</em> is one of the following symbols:</p>
<dl class="rdoc-list note-list"><dt>:normal</dt>
<dd>
<p>No advice to give; the default assumption for an open file.</p>
</dd><dt>:sequential</dt>
<dd>
<p>The data will be accessed sequentially with lower offsets read before higher ones.</p>
</dd><dt>:random</dt>
<dd>
<p>The data will be accessed in random order.</p>
</dd><dt>:willneed</dt>
<dd>
<p>The data will be accessed in the near future.</p>
</dd><dt>:dontneed</dt>
<dd>
<p>The data will not be accessed in the near future.</p>
</dd><dt>:noreuse</dt>
<dd>
<p>The data will only be accessed once.</p>
</dd></dl>

<p>The semantics of a piece of advice are platform-dependent. See <em>man 2 posix_fadvise</em> for details.</p>

<p>“data” means the region of the current file that begins at <em>offset</em> and extends for <em>len</em> bytes. If <em>len</em> is 0, the region ends at the last byte of the file. By default, both <em>offset</em> and <em>len</em> are 0, meaning that the advice applies to the entire file.</p>

<p>If an error occurs, one of the following exceptions will be raised:</p>
<dl class="rdoc-list note-list"><dt>IOError</dt>
<dd>
<p>The IO stream is closed.</p>
</dd><dt>Errno::EBADF</dt>
<dd>
<p>The file descriptor of the current file is invalid.</p>
</dd><dt>Errno::EINVAL</dt>
<dd>
<p>An invalid value for <em>advice</em> was given.</p>
</dd><dt>Errno::ESPIPE</dt>
<dd>
<p>The file descriptor of the current file refers to a FIFO or pipe. (Linux raises Errno::EINVAL in this case).</p>
</dd><dt>TypeError</dt>
<dd>
<p>Either <em>advice</em> was not a Symbol, or one of the other arguments was not an Integer.</p>
</dd><dt>RangeError</dt>
<dd>
<p>One of the arguments given was too big/small.</p>
</dd><dt>This list is not exhaustive; other Errno</dt>
<dd>
<p>exceptions are also possible.</p>
</dd></dl>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L9899-L9921'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9899' data-end='9921'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 9899</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_advise(int argc, VALUE *argv, VALUE io)
{
    VALUE advice, offset, len;
    off_t off, l;
    rb_io_t *fptr;

    rb_scan_args(argc, argv, &quot;12&quot;, &amp;advice, &amp;offset, &amp;len);
    advice_arg_check(advice);

    io = GetWriteIO(io);
    GetOpenFile(io, fptr);

    off = NIL_P(offset) ? 0 : NUM2OFFT(offset);
    l   = NIL_P(len)    ? 0 : NUM2OFFT(len);

#ifdef HAVE_POSIX_FADVISE
    return do_io_advise(fptr, advice, off, l);
#else
    ((void)off, (void)l);	/* Ignore all hint */
    return Qnil;
#endif
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="close-instance_method">
  <h3 class='signature '>
    #<strong>close</strong>  &#x21d2; <code>nil</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Closes <em>ios</em> and flushes any pending writes to the operating system. The stream is unavailable for any further data operations; an <a href="IOError.html" title="IOError (class)"><code>::IOError</code></a> is raised if such an attempt is made. I/O streams are automatically closed when they are claimed by the garbage collector.</p>

<p>If <em>ios</em> is opened by <a href="#popen-class_method" title="IO.popen (method)">.popen</a>, <code>#close</code> sets <code>$?</code>.</p>

<p>Calling this method on closed <code>IO</code> object is just ignored since Ruby 2.3.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L5256-L5265'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5256' data-end='5265'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 5256</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_close_m(VALUE io)
{
    rb_io_t *fptr = rb_io_get_fptr(io);
    if (fptr-&gt;fd &lt; 0) {
        return Qnil;
    }
    rb_io_close(io);
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="close_read-instance_method">
  <h3 class='signature '>
    #<strong>close_read</strong>  &#x21d2; <code>nil</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Closes the read end of a duplex I/O stream (i.e., one that contains both a read and a write stream, such as a pipe). Will raise an <a href="IOError.html" title="IOError (class)"><code>::IOError</code></a> if the stream is not duplexed.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_popen'><a href="#popen-class_method" title="IO.popen (method)">popen</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/bin/sh</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>r+</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close_read'>close_read</span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readlines'><a href="#readlines-class_method" title="IO.readlines (method)">readlines</a></span></code></pre>

<p><em>produces:</em></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_prog'>prog</span>.<span class='id identifier rubyid_rb'>rb</span><span class='symbeg'>:</span><span class='int'>3</span><span class='symbeg'>:</span><span class='kw'>in</span> <span class='backtick'>`</span><span class='tstring_content'>readlines&#39;: not opened for reading (IOError)
 from prog.rb:3</span></code></pre>

<p>Calling this method on closed <code>IO</code> object is just ignored since Ruby 2.3.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L5355-L5394'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5355' data-end='5394'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 5355</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_close_read(VALUE io)
{
    rb_io_t *fptr;
    VALUE write_io;

    fptr = rb_io_get_fptr(rb_io_taint_check(io));
    if (fptr-&gt;fd &lt; 0) return Qnil;
    if (is_socket(fptr-&gt;fd, fptr-&gt;pathv)) {
#ifndef SHUT_RD
# define SHUT_RD 0
#endif
        if (shutdown(fptr-&gt;fd, SHUT_RD) &lt; 0)
            rb_sys_fail_path(fptr-&gt;pathv);
        fptr-&gt;mode &amp;= ~FMODE_READABLE;
        if (!(fptr-&gt;mode &amp; FMODE_WRITABLE))
            return rb_io_close(io);
        return Qnil;
    }

    write_io = GetWriteIO(io);
    if (io != write_io) {
	rb_io_t *wfptr;
	wfptr = rb_io_get_fptr(rb_io_taint_check(write_io));
	wfptr-&gt;pid = fptr-&gt;pid;
	fptr-&gt;pid = 0;
        RFILE(io)-&gt;fptr = wfptr;
	/* bind to write_io temporarily to get rid of memory/fd leak */
	fptr-&gt;tied_io_for_writing = 0;
	RFILE(write_io)-&gt;fptr = fptr;
	rb_io_fptr_cleanup(fptr, FALSE);
	/* should not finalize fptr because another thread may be reading it */
        return Qnil;
    }

    if ((fptr-&gt;mode &amp; (FMODE_DUPLEX|FMODE_WRITABLE)) == FMODE_WRITABLE) {
	rb_raise(rb_eIOError, &quot;closing non-duplex IO for reading&quot;);
    }
    return rb_io_close(io);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="close_write-instance_method">
  <h3 class='signature '>
    #<strong>close_write</strong>  &#x21d2; <code>nil</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Closes the write end of a duplex I/O stream (i.e., one that contains both a read and a write stream, such as a pipe). Will raise an <a href="IOError.html" title="IOError (class)"><code>::IOError</code></a> if the stream is not duplexed.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_popen'><a href="#popen-class_method" title="IO.popen (method)">popen</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/bin/sh</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>r+</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close_write'>close_write</span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_print'><a href="#print-instance_method" title="IO#print (method)">print</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>nowhere</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p><em>produces:</em></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_prog'>prog</span>.<span class='id identifier rubyid_rb'>rb</span><span class='symbeg'>:</span><span class='int'>3</span><span class='symbeg'>:</span><span class='kw'>in</span> <span class='backtick'>`</span><span class='tstring_content'>write&#39;: not opened for writing (IOError)
 from prog.rb:3:in </span><span class='tstring_end'>`</span></span><span class='id identifier rubyid_print'><a href="#print-instance_method" title="IO#print (method)">print</a></span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>
 from prog.rb:3</span></code></pre>

<p>Calling this method on closed <code>IO</code> object is just ignored since Ruby 2.3.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L5417-L5448'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5417' data-end='5448'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 5417</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_close_write(VALUE io)
{
    rb_io_t *fptr;
    VALUE write_io;

    write_io = GetWriteIO(io);
    fptr = rb_io_get_fptr(rb_io_taint_check(write_io));
    if (fptr-&gt;fd &lt; 0) return Qnil;
    if (is_socket(fptr-&gt;fd, fptr-&gt;pathv)) {
#ifndef SHUT_WR
# define SHUT_WR 1
#endif
        if (shutdown(fptr-&gt;fd, SHUT_WR) &lt; 0)
            rb_sys_fail_path(fptr-&gt;pathv);
        fptr-&gt;mode &amp;= ~FMODE_WRITABLE;
        if (!(fptr-&gt;mode &amp; FMODE_READABLE))
	    return rb_io_close(write_io);
        return Qnil;
    }

    if ((fptr-&gt;mode &amp; (FMODE_DUPLEX|FMODE_READABLE)) == FMODE_READABLE) {
	rb_raise(rb_eIOError, &quot;closing non-duplex IO for writing&quot;);
    }

    if (io != write_io) {
	fptr = rb_io_get_fptr(rb_io_taint_check(io));
	fptr-&gt;tied_io_for_writing = 0;
    }
    rb_io_close(write_io);
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="each-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>each</strong>(sep=$/ [, getline_args]) {|line| ... } &#x21d2; <code>IO</code> </span>
      <span class='overload'>#<strong>each</strong>(limit [, getline_args]) {|line| ... } &#x21d2; <code>IO</code> </span>
      <span class='overload'>#<strong>each</strong>(sep, limit [, getline_args]) {|line| ... } &#x21d2; <code>IO</code> </span>
      <span class='overload'>#<strong>each</strong>(...)  &#x21d2; <a href="Enumerator.html" title="Enumerator (class)">Enumerator</a> </span>
    </div>
    <span class='aliases'>Also known as: <span class='names'>#each_line</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>ios.each_line(sep=$/ [, getline_args])     {|line| block } -&gt; ios</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ios'>ios</span>.<span class='id identifier rubyid_each_line'><a href="#each_line-instance_method" title="IO#each_line (method)">each_line</a></span>(<span class='id identifier rubyid_limit'>limit</span> [<span class='comma'>,</span> <span class='id identifier rubyid_getline_args'>getline_args</span>])      {<span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_block'>block</span> } <span class='tlambda'>-&gt;</span> <span class='id identifier rubyid_ios'>ios</span>
<span class='id identifier rubyid_ios'>ios</span>.<span class='id identifier rubyid_each_line'><a href="#each_line-instance_method" title="IO#each_line (method)">each_line</a></span>(<span class='id identifier rubyid_sep'>sep</span><span class='comma'>,</span> <span class='id identifier rubyid_limit'>limit</span> [<span class='comma'>,</span> <span class='id identifier rubyid_getline_args'>getline_args</span>]) <span class='tlambeg'>{</span><span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_block'>block</span> } <span class='tlambda'>-&gt;</span> <span class='id identifier rubyid_ios'>ios</span>
<span class='id identifier rubyid_ios'>ios</span>.<span class='id identifier rubyid_each_line'><a href="#each_line-instance_method" title="IO#each_line (method)">each_line</a></span>(<span class='op'>...</span>)                        <span class='tlambda'>-&gt;</span> <span class='id identifier rubyid_an_enumerator'>an_enumerator</span></code></pre>

<p>Executes the block for every line in <em>ios</em>, where lines are separated by <em>sep</em>. <em>ios</em> must be opened for reading or an <a href="IOError.html" title="IOError (class)"><code>::IOError</code></a> will be raised.</p>

<p>If no block is given, an enumerator is returned instead.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_each'>each</span> {<span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="IO#lineno (method)">lineno</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_line'>line</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> }</code></pre>

<p><em>produces:</em></p>

<pre class="code ruby"><code class="ruby"><span class='int'>1</span><span class='op'>:</span> <span class='const'>This</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_line'>line</span> <span class='id identifier rubyid_one'>one</span>
<span class='int'>2</span><span class='op'>:</span> <span class='const'>This</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_line'>line</span> <span class='id identifier rubyid_two'>two</span>
<span class='int'>3</span><span class='op'>:</span> <span class='const'>This</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_line'>line</span> <span class='id identifier rubyid_three'>three</span>
<span class='int'>4</span><span class='op'>:</span> <span class='const'>And</span> <span class='id identifier rubyid_so'>so</span> <span class='id identifier rubyid_on'>on</span><span class='op'>...</span></code></pre>

<p>See <a href="#readlines-class_method" title="IO.readlines (method)">.readlines</a> for details about getline_args.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L4213-L4227'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4213' data-end='4227'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4213</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_each_line(int argc, VALUE *argv, VALUE io)
{
    VALUE str;
    struct getline_arg args;

    RETURN_ENUMERATOR(io, argc, argv);
    prepare_getline_args(argc, argv, &amp;args, io);
    if (args.limit == 0)
	rb_raise(rb_eArgError, &quot;invalid limit: 0 for each_line&quot;);
    while (!NIL_P(str = rb_io_getline_1(args.rs, args.limit, args.chomp, io))) {
	rb_yield(str);
    }
    return io;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="each_byte-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>each_byte</strong> {|byte| ... } &#x21d2; <code>IO</code> </span>
      <span class='overload'>#<strong>each_byte</strong>  &#x21d2; <a href="Enumerator.html" title="Enumerator (class)">Enumerator</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Calls the given block once for each byte (0..255) in <em>ios</em>, passing the byte as an argument. The stream must be opened for reading or an <a href="IOError.html" title="IOError (class)"><code>::IOError</code></a> will be raised.</p>

<p>If no block is given, an enumerator is returned instead.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_checksum'>checksum</span> <span class='op'>=</span> <span class='int'>0</span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_each_byte'>each_byte</span> {<span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_checksum'>checksum</span> <span class='op'>^=</span> <span class='id identifier rubyid_x'>x</span> }   <span class='comment'>#=&gt; #&lt;File:testfile&gt;
</span><span class='id identifier rubyid_checksum'>checksum</span>                           <span class='comment'>#=&gt; 12</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L4246-L4265'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4246' data-end='4265'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4246</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_each_byte(VALUE io)
{
    rb_io_t *fptr;

    RETURN_ENUMERATOR(io, 0, 0);
    GetOpenFile(io, fptr);

    do {
	while (fptr-&gt;rbuf.len &gt; 0) {
	    char *p = fptr-&gt;rbuf.ptr + fptr-&gt;rbuf.off++;
	    fptr-&gt;rbuf.len--;
	    rb_yield(INT2FIX(*p &amp; 0xff));
	    rb_io_check_byte_readable(fptr);
	    errno = 0;
	}
	READ_CHECK(fptr);
    } while (io_fillbuf(fptr) &gt;= 0);
    return io;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="each_char-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>each_char</strong> {|c| ... } &#x21d2; <code>IO</code> </span>
      <span class='overload'>#<strong>each_char</strong>  &#x21d2; <a href="Enumerator.html" title="Enumerator (class)">Enumerator</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Calls the given block once for each character in <em>ios</em>, passing the character as an argument. The stream must be opened for reading or an <a href="IOError.html" title="IOError (class)"><code>::IOError</code></a> will be raised.</p>

<p>If no block is given, an enumerator is returned instead.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_each_char'>each_char</span> {<span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_print'><a href="#print-instance_method" title="IO#print (method)">print</a></span> <span class='id identifier rubyid_c'>c</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span> }   <span class='comment'>#=&gt; #&lt;File:testfile&gt;</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L4389-L4406'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4389' data-end='4406'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4389</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_each_char(VALUE io)
{
    rb_io_t *fptr;
    rb_encoding *enc;
    VALUE c;

    RETURN_ENUMERATOR(io, 0, 0);
    GetOpenFile(io, fptr);
    rb_io_check_char_readable(fptr);

    enc = io_input_encoding(fptr);
    READ_CHECK(fptr);
    while (!NIL_P(c = io_getc(fptr, enc))) {
        rb_yield(c);
    }
    return io;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="each_codepoint-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>each_codepoint</strong> {|c| ... } &#x21d2; <code>IO</code> </span>
      <span class='overload'>#<strong>each_codepoint</strong>  &#x21d2; <a href="Enumerator.html" title="Enumerator (class)">Enumerator</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Passes the <a href="Integer.html" title="Integer (class)"><code>::Integer</code></a> ordinal of each character in <em>ios</em>, passing the codepoint as an argument. The stream must be opened for reading or an <a href="IOError.html" title="IOError (class)"><code>::IOError</code></a> will be raised.</p>

<p>If no block is given, an enumerator is returned instead.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L4421-L4523'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4421' data-end='4523'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4421</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_each_codepoint(VALUE io)
{
    rb_io_t *fptr;
    rb_encoding *enc;
    unsigned int c;
    int r, n;

    RETURN_ENUMERATOR(io, 0, 0);
    GetOpenFile(io, fptr);
    rb_io_check_char_readable(fptr);

    READ_CHECK(fptr);
    if (NEED_READCONV(fptr)) {
	SET_BINARY_MODE(fptr);
	r = 1;		/* no invalid char yet */
	for (;;) {
	    make_readconv(fptr, 0);
	    for (;;) {
		if (fptr-&gt;cbuf.len) {
		    if (fptr-&gt;encs.enc)
			r = rb_enc_precise_mbclen(fptr-&gt;cbuf.ptr+fptr-&gt;cbuf.off,
						  fptr-&gt;cbuf.ptrfptr-&gt;cbuf.offfptr-&gt;cbuf.len,
						  fptr-&gt;encs.enc);
		    else
			r = ONIGENC_CONSTRUCT_MBCLEN_CHARFOUND(1);
		    if (!MBCLEN_NEEDMORE_P(r))
			break;
		    if (fptr-&gt;cbuf.len == fptr-&gt;cbuf.capa) {
			rb_raise(rb_eIOError, &quot;too long character&quot;);
		    }
		}
		if (more_char(fptr) == MORE_CHAR_FINISHED) {
                    clear_readconv(fptr);
		    if (!MBCLEN_CHARFOUND_P(r)) {
			enc = fptr-&gt;encs.enc;
			goto invalid;
		    }
		    return io;
		}
	    }
	    if (MBCLEN_INVALID_P(r)) {
		enc = fptr-&gt;encs.enc;
		goto invalid;
	    }
	    n = MBCLEN_CHARFOUND_LEN(r);
	    if (fptr-&gt;encs.enc) {
		c = rb_enc_codepoint(fptr-&gt;cbuf.ptr+fptr-&gt;cbuf.off,
				     fptr-&gt;cbuf.ptrfptr-&gt;cbuf.offfptr-&gt;cbuf.len,
				     fptr-&gt;encs.enc);
	    }
	    else {
		c = (unsigned char)fptr-&gt;cbuf.ptr[fptr-&gt;cbuf.off];
	    }
	    fptr-&gt;cbuf.off += n;
	    fptr-&gt;cbuf.len -= n;
	    rb_yield(UINT2NUM(c));
            rb_io_check_byte_readable(fptr);
	}
    }
    NEED_NEWLINE_DECORATOR_ON_READ_CHECK(fptr);
    enc = io_input_encoding(fptr);
    while (io_fillbuf(fptr) &gt;= 0) {
	r = rb_enc_precise_mbclen(fptr-&gt;rbuf.ptr+fptr-&gt;rbuf.off,
				  fptr-&gt;rbuf.ptrfptr-&gt;rbuf.offfptr-&gt;rbuf.len, enc);
	if (MBCLEN_CHARFOUND_P(r) &amp;&amp;
	    (n = MBCLEN_CHARFOUND_LEN(r)) &lt;= fptr-&gt;rbuf.len) {
	    c = rb_enc_codepoint(fptr-&gt;rbuf.ptr+fptr-&gt;rbuf.off,
				 fptr-&gt;rbuf.ptrfptr-&gt;rbuf.offfptr-&gt;rbuf.len, enc);
	    fptr-&gt;rbuf.off += n;
	    fptr-&gt;rbuf.len -= n;
	    rb_yield(UINT2NUM(c));
	}
	else if (MBCLEN_INVALID_P(r)) {
            goto invalid;
	}
	else if (MBCLEN_NEEDMORE_P(r)) {
	    char cbuf[8], *p = cbuf;
	    int more = MBCLEN_NEEDMORE_LEN(r);
	    if (more &gt; numberof(cbuf)) goto invalid;
	    more += n = fptr-&gt;rbuf.len;
	    if (more &gt; numberof(cbuf)) goto invalid;
	    while ((n = (int)read_buffered_data(p, more, fptr)) &gt; 0 &amp;&amp;
		   (p += n, (more -= n) &gt; 0)) {
		if (io_fillbuf(fptr) &lt; 0) goto invalid;
		if ((n = fptr-&gt;rbuf.len) &gt; more) n = more;
	    }
	    r = rb_enc_precise_mbclen(cbuf, p, enc);
	    if (!MBCLEN_CHARFOUND_P(r)) goto invalid;
	    c = rb_enc_codepoint(cbuf, p, enc);
	    rb_yield(UINT2NUM(c));
	}
	else {
	    continue;
	}
        rb_io_check_byte_readable(fptr);
    }
    return io;

  invalid:
    rb_raise(rb_eArgError, &quot;invalid byte sequence in %s&quot;, rb_enc_name(enc));
    UNREACHABLE_RETURN(Qundef);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="each_line-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>each</strong>(sep=$/ [, getline_args]) {|line| ... } &#x21d2; <code>IO</code> </span>
      <span class='overload'>#<strong>each</strong>(limit [, getline_args]) {|line| ... } &#x21d2; <code>IO</code> </span>
      <span class='overload'>#<strong>each</strong>(sep, limit [, getline_args]) {|line| ... } &#x21d2; <code>IO</code> </span>
      <span class='overload'>#<strong>each</strong>(...)  &#x21d2; <a href="Enumerator.html" title="Enumerator (class)">Enumerator</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#each-instance_method" title="IO#each (method)">#each</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="external_encoding-instance_method">
  <h3 class='signature '>
    #<strong>external_encoding</strong>  &#x21d2; <a href="Encoding.html" title="Encoding (class)">Encoding</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the <a href="Encoding.html" title="Encoding (class)"><code>::Encoding</code></a> object that represents the encoding of the file. If <em>io</em> is in write mode and no encoding is specified, returns <code>nil</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L12296-L12310'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='12296' data-end='12310'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 12296</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_external_encoding(VALUE io)
{
    rb_io_t *fptr = RFILE(rb_io_taint_check(io))-&gt;fptr;

    if (fptr-&gt;encs.enc2) {
	return rb_enc_from_encoding(fptr-&gt;encs.enc2);
    }
    if (fptr-&gt;mode &amp; FMODE_WRITABLE) {
	if (fptr-&gt;encs.enc)
	    return rb_enc_from_encoding(fptr-&gt;encs.enc);
	return Qnil;
    }
    return rb_enc_from_encoding(io_read_encoding(fptr));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fcntl-instance_method">
  <h3 class='signature '>
    #<strong>fcntl</strong>(integer_cmd, arg)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Provides a mechanism for issuing low-level commands to control or query file-oriented I/O streams. Arguments and results are platform dependent. If <em>arg</em> is a number, its value is passed directly. If it is a string, it is interpreted as a binary sequence of bytes (Array#pack might be a useful way to build this string). On Unix platforms, see <code>fcntl(2)</code> for details.  Not implemented on all platforms.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L10479-L10486'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='10479' data-end='10486'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 10479</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_fcntl(int argc, VALUE *argv, VALUE io)
{
    VALUE req, arg;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;req, &amp;arg);
    return rb_fcntl(io, req, arg);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fdatasync-instance_method">
  <h3 class='signature '>
    #<strong>fdatasync</strong>  &#x21d2; <code>0</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Immediately writes to disk all data buffered in the stream, via the operating system’s: <code>fdatasync(2)</code>, if supported, otherwise via <code>fsync(2)</code>, if supported; otherwise raises an exception.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L2602-L2618'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2602' data-end='2618'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2602</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_fdatasync(VALUE io)
{
    rb_io_t *fptr;

    io = GetWriteIO(io);
    GetOpenFile(io, fptr);

    if (io_fflush(fptr) &lt; 0)
        rb_sys_fail_on_write(fptr);

    if ((int)rb_thread_io_blocking_region(nogvl_fdatasync, fptr, fptr-&gt;fd) == 0)
	return INT2FIX(0);

    /* fall back */
    return rb_io_fsync(io);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fileno-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>to_i</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a> </span>
      <span class='overload'>#<strong>fileno</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#to_i-instance_method" title="IO#to_i (method)">#to_i</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="flush-instance_method">
  <h3 class='signature '>
    #<strong>flush</strong>  &#x21d2; <code>self</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Flushes data buffered in <code>self</code> to the operating system (but does not necessarily flush data buffered in the operating system):</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$stdout</span>.<span class='id identifier rubyid_print'><a href="#print-instance_method" title="IO#print (method)">print</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>no newline</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># Not necessarily flushed.
</span><span class='gvar'>$stdout</span>.<span class='id identifier rubyid_flush'>flush</span>              <span class='comment'># Flushed.</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L2161-L2165'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2161' data-end='2165'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2161</span></pre>
<pre class='code cpp'>

VALUE
rb_io_flush(VALUE io)
{
    return rb_io_flush_raw(io, 1);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fsync-instance_method">
  <h3 class='signature '>
    #<strong>fsync</strong>  &#x21d2; <code>0</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Immediately writes to disk all data buffered in the stream, via the operating system’s <code>fsync(2)</code>.</p>

<p>Note this difference:</p>
<ul><li>
<p><a href="#sync=-instance_method" title="IO#sync= (method)">#sync=</a>: Ensures that data is flushed from the stream’s internal buffers, but does not guarantee that the operating system actually writes the data to disk.</p>
</li><li>
<p><code>fsync</code>: Ensures both that data is flushed from internal buffers, and that data is written to disk.</p>
</li></ul>

<p>Raises an exception if the operating system does not support <code>fsync(2)</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L2553-L2566'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2553' data-end='2566'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2553</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_fsync(VALUE io)
{
    rb_io_t *fptr;

    io = GetWriteIO(io);
    GetOpenFile(io, fptr);

    if (io_fflush(fptr) &lt; 0)
        rb_sys_fail_on_write(fptr);
    if ((int)rb_thread_io_blocking_region(nogvl_fsync, fptr, fptr-&gt;fd) &lt; 0)
	rb_sys_fail_path(fptr-&gt;pathv);
    return INT2FIX(0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="getbyte-instance_method">
  <h3 class='signature '>
    #<strong>getbyte</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Gets the next 8-bit byte (0..255) from <em>ios</em>. Returns <code>nil</code> if called at end of file.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_getbyte'>getbyte</span>   <span class='comment'>#=&gt; 84
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_getbyte'>getbyte</span>   <span class='comment'>#=&gt; 104</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L4586-L4610'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4586' data-end='4610'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4586</span></pre>
<pre class='code cpp'>

VALUE
rb_io_getbyte(VALUE io)
{
    rb_io_t *fptr;
    int c;

    GetOpenFile(io, fptr);
    rb_io_check_byte_readable(fptr);
    READ_CHECK(fptr);
    VALUE r_stdout = rb_ractor_stdout();
    if (fptr-&gt;fd == 0 &amp;&amp; (fptr-&gt;mode &amp; FMODE_TTY) &amp;&amp; RB_TYPE_P(r_stdout, T_FILE)) {
        rb_io_t *ofp;
        GetOpenFile(r_stdout, ofp);
        if (ofp-&gt;mode &amp; FMODE_TTY) {
            rb_io_flush(r_stdout);
        }
    }
    if (io_fillbuf(fptr) &lt; 0) {
	return Qnil;
    }
    fptr-&gt;rbuf.off++;
    fptr-&gt;rbuf.len--;
    c = (unsigned char)fptr-&gt;rbuf.ptr[fptr-&gt;rbuf.off-1];
    return INT2FIX(c &amp; 0xff);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="getc-instance_method">
  <h3 class='signature '>
    #<strong>getc</strong>  &#x21d2; <a href="String.html" title="String (class)">String</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads a one-character string from <em>ios</em>. Returns <code>nil</code> if called at end of file.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_getc'>getc</span>   <span class='comment'>#=&gt; &quot;h&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_getc'>getc</span>   <span class='comment'>#=&gt; &quot;e&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L4537-L4549'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4537' data-end='4549'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4537</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_getc(VALUE io)
{
    rb_io_t *fptr;
    rb_encoding *enc;

    GetOpenFile(io, fptr);
    rb_io_check_char_readable(fptr);

    enc = io_input_encoding(fptr);
    READ_CHECK(fptr);
    return io_getc(fptr, enc);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="gets-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>gets</strong>(sep = $/, **getline_opts)  &#x21d2; <a href="String.html" title="String (class)">String</a><sup>?</sup> </span>
      <span class='overload'>#<strong>gets</strong>(limit, **getline_opts)  &#x21d2; <a href="String.html" title="String (class)">String</a><sup>?</sup> </span>
      <span class='overload'>#<strong>gets</strong>(sep, limit, **getline_opts)  &#x21d2; <a href="String.html" title="String (class)">String</a><sup>?</sup> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads and returns data from the stream; assigns the return value to <code>$_</code>.</p>

<p>With no arguments given, returns the next line as determined by line separator <code>$/</code>, or <code>nil</code> if none:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span> <span class='comment'># =&gt; &quot;This is line one.\n&quot;
</span><span class='gvar'>$_</span>     <span class='comment'># =&gt; &quot;This is line one.\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span> <span class='comment'># =&gt; &quot;This is the second line.\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span> <span class='comment'># =&gt; &quot;This is the third line.\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span> <span class='comment'># =&gt; nil</span></code></pre>

<p>With string argument <code>sep</code> given, but not argument <code>limit</code>, returns the next line as determined by line separator <code>sep</code>, or <code>nil</code> if none:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> is</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;This is&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> is</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot; line one.\nThis is&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> is</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot; the second line.\nThis is&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> is</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot; the third line.\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> is</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil</span></code></pre>

<p>Note two special values for <code>sep</code>:</p>
<ul><li>
<p><code>nil</code>: The entire stream is read and returned.</p>
</li><li>
<p><code>&#39;&#39;</code> (empty string): The next “paragraph” is read and returned, the paragraph separator being two successive line separators.</p>
</li></ul>

<p>With integer argument <code>limit</code> given, returns up to <code>limit</code>1&lt;/tt&gt; bytes:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Text with 1-byte characters.
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='int'>1</span>) } <span class='comment'># =&gt; &quot;T&quot;
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='int'>2</span>) } <span class='comment'># =&gt; &quot;Th&quot;
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='int'>3</span>) } <span class='comment'># =&gt; &quot;Thi&quot;
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='int'>4</span>) } <span class='comment'># =&gt; &quot;This&quot;
</span><span class='comment'># No more than one line.
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='int'>17</span>) } <span class='comment'># =&gt; &quot;This is line one.&quot;
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='int'>18</span>) } <span class='comment'># =&gt; &quot;This is line one.\n&quot;
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='int'>19</span>) } <span class='comment'># =&gt; &quot;This is line one.\n&quot;
</span>
<span class='comment'># Text with 2-byte characters, which will not be split.
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.rus</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='int'>1</span>).<span class='id identifier rubyid_size'>size</span> } <span class='comment'># =&gt; 1
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.rus</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='int'>2</span>).<span class='id identifier rubyid_size'>size</span> } <span class='comment'># =&gt; 1
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.rus</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='int'>3</span>).<span class='id identifier rubyid_size'>size</span> } <span class='comment'># =&gt; 2
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.rus</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='int'>4</span>).<span class='id identifier rubyid_size'>size</span> } <span class='comment'># =&gt; 2</span></code></pre>

<p>With arguments <code>sep</code> and <code>limit</code>, combines the two behaviors above:</p>
<ul><li>
<p>Returns the next line as determined by line separator <code>sep</code>, or <code>nil</code> if none.</p>
</li><li>
<p>But returns no more than <code>limit</code>1&lt;/tt&gt; bytes.</p>
</li></ul>

<p>For all forms above, trailing optional keyword arguments may be given; see <a href='#label-Getline+Options'>Getline Options</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># Chomp the lines.
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='label'>chomp:</span> <span class='kw'>true</span>) <span class='comment'># =&gt; &quot;This is line one.&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='label'>chomp:</span> <span class='kw'>true</span>) <span class='comment'># =&gt; &quot;This is the second line.&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='label'>chomp:</span> <span class='kw'>true</span>) <span class='comment'># =&gt; &quot;This is the third line.&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='label'>chomp:</span> <span class='kw'>true</span>) <span class='comment'># =&gt; nil</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L4042-L4051'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4042' data-end='4051'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4042</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_gets_m(int argc, VALUE *argv, VALUE io)
{
    VALUE str;

    str = rb_io_getline(argc, argv, io);
    rb_lastline_set(str);

    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="initialize_copy-instance_method">
  <h3 class='signature nodoc'>
    #<strong>initialize_copy</strong>(io)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L7904-L7944'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='7904' data-end='7944'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 7904</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_init_copy(VALUE dest, VALUE io)
{
    rb_io_t *fptr, *orig;
    int fd;
    VALUE write_io;
    off_t pos;

    io = rb_io_get_io(io);
    if (!OBJ_INIT_COPY(dest, io)) return dest;
    GetOpenFile(io, orig);
    MakeOpenFile(dest, fptr);

    rb_io_flush(io);

    /* copy rb_io_t structure */
    fptr-&gt;mode = orig-&gt;mode &amp; ~FMODE_PREP;
    fptr-&gt;encs = orig-&gt;encs;
    fptr-&gt;pid = orig-&gt;pid;
    fptr-&gt;lineno = orig-&gt;lineno;
    if (!NIL_P(orig-&gt;pathv)) fptr-&gt;pathv = orig-&gt;pathv;
    fptr_copy_finalizer(fptr, orig);

    fd = ruby_dup(orig-&gt;fd);
    fptr-&gt;fd = fd;
    pos = io_tell(orig);
    if (0 &lt;= pos)
        io_seek(fptr, pos, SEEK_SET);
    if (fptr-&gt;mode &amp; FMODE_BINMODE) {
	rb_io_binmode(dest);
    }

    write_io = GetWriteIO(io);
    if (io != write_io) {
        write_io = rb_obj_dup(write_io);
        fptr-&gt;tied_io_for_writing = write_io;
        rb_ivar_set(dest, rb_intern(&quot;@tied_io_for_writing&quot;), write_io);
    }

    return dest;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inspect-instance_method">
  <h3 class='signature '>
    #<strong>inspect</strong>  &#x21d2; <a href="String.html" title="String (class)">String</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a string representation of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_inspect'>inspect</span> <span class='comment'># =&gt; &quot;#&lt;File:t.txt&gt;&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L2707-L2734'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2707' data-end='2734'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2707</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_inspect(VALUE obj)
{
    rb_io_t *fptr;
    VALUE result;
    static const char closed[] = &quot; (closed)&quot;;

    fptr = RFILE(obj)-&gt;fptr;
    if (!fptr) return rb_any_to_s(obj);
    result = rb_str_new_cstr(&quot;#&lt;&quot;);
    rb_str_append(result, rb_class_name(CLASS_OF(obj)));
    rb_str_cat2(result, &quot;:&quot;);
    if (NIL_P(fptr-&gt;pathv)) {
        if (fptr-&gt;fd &lt; 0) {
	    rb_str_cat(result, closed+1, strlen(closed)-1);
        }
        else {
	    rb_str_catf(result, &quot;fd %d&quot;, fptr-&gt;fd);
        }
    }
    else {
	rb_str_append(result, fptr-&gt;pathv);
        if (fptr-&gt;fd &lt; 0) {
	    rb_str_cat(result, closed, strlen(closed));
        }
    }
    return rb_str_cat2(result, &quot;&gt;&quot;);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="internal_encoding-instance_method">
  <h3 class='signature '>
    #<strong>internal_encoding</strong>  &#x21d2; <a href="Encoding.html" title="Encoding (class)">Encoding</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the <a href="Encoding.html" title="Encoding (class)"><code>::Encoding</code></a> of the internal string if conversion is specified.  Otherwise returns <code>nil</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L12320-L12327'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='12320' data-end='12327'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 12320</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_internal_encoding(VALUE io)
{
    rb_io_t *fptr = RFILE(rb_io_taint_check(io))-&gt;fptr;

    if (!fptr-&gt;encs.enc2) return Qnil;
    return rb_enc_from_encoding(io_read_encoding(fptr));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ioctl-instance_method">
  <h3 class='signature '>
    #<strong>ioctl</strong>(integer_cmd, arg)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Provides a mechanism for issuing low-level commands to control or query I/O devices. Arguments and results are platform dependent. If <em>arg</em> is a number, its value is passed directly. If it is a string, it is interpreted as a binary sequence of bytes. On Unix platforms, see <code>ioctl(2)</code> for details. Not implemented on all platforms.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L10395-L10402'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='10395' data-end='10402'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 10395</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_ioctl(int argc, VALUE *argv, VALUE io)
{
    VALUE req, arg;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;req, &amp;arg);
    return rb_ioctl(io, req, arg);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pid-instance_method">
  <h3 class='signature '>
    #<strong>pid</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the process ID of a child process associated with the stream, which will have been set by <code>IO#popen</code>, or <code>nil</code> if the stream was not created by <code>IO#popen</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_popen'><a href="#popen-class_method" title="IO.popen (method)">popen</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>if</span> <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>
  <span class='gvar'>$stderr</span>.<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>In parent, child pid is </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_pid'>pid</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>else</span>
  <span class='gvar'>$stderr</span>.<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>In child, pid is </span><span class='embexpr_beg'>#{</span><span class='gvar'>$$</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>In</span> <span class='id identifier rubyid_child'>child</span><span class='comma'>,</span> <span class='id identifier rubyid_pid'>pid</span> <span class='id identifier rubyid_is'>is</span> <span class='int'>26209</span>
<span class='const'>In</span> <span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span> <span class='id identifier rubyid_pid'>pid</span> <span class='id identifier rubyid_is'>is</span> <span class='int'>26209</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L2684-L2693'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2684' data-end='2693'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2684</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_pid(VALUE io)
{
    rb_io_t *fptr;

    GetOpenFile(io, fptr);
    if (!fptr-&gt;pid)
	return Qnil;
    return PIDT2NUM(fptr-&gt;pid);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pread-instance_method">
  <h3 class='signature '>
    #<strong>pread</strong>(maxlen, offset[, outbuf])  &#x21d2; <a href="String.html" title="String (class)">String</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads <em>maxlen</em> bytes from <em>ios</em> using the pread system call and returns them as a string without modifying the underlying descriptor offset.  This is advantageous compared to combining <a href="#seek-instance_method" title="IO#seek (method)">#seek</a> and <a href="#read-instance_method" title="IO#read (method)">#read</a> in that it is atomic, allowing multiple threads/process to share the same <code>IO</code> object for reading the file at various locations. This bypasses any userspace buffering of the <code>IO</code> layer. If the optional <em>outbuf</em> argument is present, it must reference a <a href="String.html" title="String (class)"><code>::String</code></a>, which will receive the data. Raises SystemCallError on error, <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a> at end of file and <a href="NotImplementedError.html" title="NotImplementedError (class)"><code>::NotImplementedError</code></a> if platform does not implement the system call.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_write'><a href="#write-class_method" title="IO.write (method)">write</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is line one\nThis is line two\n</span><span class='tstring_end'>&quot;</span></span>)
<span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>           <span class='comment'># =&gt; &quot;This is line one\nThis is line two\n&quot;
</span>  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_pread'>pread</span>(<span class='int'>12</span><span class='comma'>,</span> <span class='int'>0</span>)   <span class='comment'># =&gt; &quot;This is line&quot;
</span>  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_pread'>pread</span>(<span class='int'>9</span><span class='comma'>,</span> <span class='int'>8</span>)    <span class='comment'># =&gt; &quot;line one\n&quot;
</span><span class='kw'>end</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L5641-L5676'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5641' data-end='5676'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 5641</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_pread(int argc, VALUE *argv, VALUE io)
{
    VALUE len, offset, str;
    rb_io_t *fptr;
    ssize_t n;
    struct prdwr_internal_arg arg;
    int shrinkable;

    rb_scan_args(argc, argv, &quot;21&quot;, &amp;len, &amp;offset, &amp;str);
    arg.count = NUM2SIZET(len);
    arg.offset = NUM2OFFT(offset);

    shrinkable = io_setstrbuf(&amp;str, (long)arg.count);
    if (arg.count == 0) return str;
    arg.buf = RSTRING_PTR(str);

    GetOpenFile(io, fptr);
    rb_io_check_byte_readable(fptr);

    arg.fd = fptr-&gt;fd;
    rb_io_check_closed(fptr);

    rb_str_locktmp(str);
    n = (ssize_t)rb_ensure(pread_internal_call, (VALUE)&amp;arg, rb_str_unlocktmp, str);

    if (n &lt; 0) {
	rb_sys_fail_path(fptr-&gt;pathv);
    }
    io_set_read_length(str, n, shrinkable);
    if (n == 0 &amp;&amp; arg.count &gt; 0) {
	rb_eof_error();
    }

    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="print-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>print</strong>  &#x21d2; <code>nil</code> </span>
      <span class='overload'>#<strong>print</strong>(obj, ...)  &#x21d2; <code>nil</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes the given object(s) to <em>ios</em>. Returns <code>nil</code>.</p>

<p>The stream must be opened for writing. Each given object that isn’t a string will be converted by calling its <code>to_s</code> method. When called without arguments, prints the contents of <code>$_</code>.</p>

<p>If the output field separator (<code>$,</code>) is not <code>nil</code>, it is inserted between objects. If the output record separator (<code>$\</code>) is not <code>nil</code>, it is appended to the output.</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$stdout</span>.<span class='id identifier rubyid_print'>print</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>100</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> percent.\n</span><span class='tstring_end'>&quot;</span></span>)</code></pre>

<p><em>produces:</em></p>

<pre class="code ruby"><code class="ruby"><span class='const'>This</span> <span class='id identifier rubyid_is'>is</span> <span class='int'>100</span> <span class='id identifier rubyid_percent'>percent</span>.</code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L8025-L8051'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8025' data-end='8051'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 8025</span></pre>
<pre class='code cpp'>

VALUE
rb_io_print(int argc, const VALUE *argv, VALUE out)
{
    int i;
    VALUE line;

    /* if no argument given, print `$_&#39; */
    if (argc == 0) {
	argc = 1;
	line = rb_lastline_get();
	argv = &amp;line;
    }
    if (argc &gt; 1 &amp;&amp; !NIL_P(rb_output_fs)) {
        rb_category_warn(RB_WARN_CATEGORY_DEPRECATED, &quot;$, is set to non-nil value&quot;);
    }
    for (i=0; i&lt;argc; i++) {
	if (!NIL_P(rb_output_fs) &amp;&amp; i&gt;0) {
	    rb_io_write(out, rb_output_fs);
	}
	rb_io_write(out, argv[i]);
    }
    if (argc &gt; 0 &amp;&amp; !NIL_P(rb_output_rs)) {
	rb_io_write(out, rb_output_rs);
    }

    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="printf-instance_method">
  <h3 class='signature '>
    #<strong>printf</strong>(format_string [, obj, ...])  &#x21d2; <code>nil</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Formats and writes to <em>ios</em>, converting parameters under control of the format string. See <a href="Kernel.html#sprintf-class_method" title="Kernel.sprintf (method)">Kernel.sprintf</a> for details.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L7954-L7959'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='7954' data-end='7959'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 7954</span></pre>
<pre class='code cpp'>

VALUE
rb_io_printf(int argc, const VALUE *argv, VALUE out)
{
    rb_io_write(out, rb_f_sprintf(argc, argv));
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="putc-instance_method">
  <h3 class='signature '>
    #<strong>putc</strong>(obj)  &#x21d2; <a href="Object.html" title="Object (class)">Object</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>If <em>obj</em> is <a href="Numeric.html" title="Numeric (class)"><code>::Numeric</code></a>, write the character whose code is the least-significant byte of <em>obj</em>.  If <em>obj</em> is <a href="String.html" title="String (class)"><code>::String</code></a>, write the first character of <em>obj</em> to <em>ios</em>.  Otherwise, raise <a href="TypeError.html" title="TypeError (class)"><code>::TypeError</code></a>.</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$stdout</span>.<span class='id identifier rubyid_putc'>putc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A</span><span class='tstring_end'>&quot;</span></span>
<span class='gvar'>$stdout</span>.<span class='id identifier rubyid_putc'>putc</span> <span class='int'>65</span></code></pre>

<p><em>produces:</em></p>

<pre class="code ruby"><code class="ruby"><span class='const'>AA</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L8100-L8113'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8100' data-end='8113'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 8100</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_putc(VALUE io, VALUE ch)
{
    VALUE str;
    if (RB_TYPE_P(ch, T_STRING)) {
	str = rb_str_substr(ch, 0, 1);
    }
    else {
	char c = NUM2CHR(ch);
	str = rb_str_new(&amp;c, 1);
    }
    rb_io_write(io, str);
    return ch;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="puts-instance_method">
  <h3 class='signature '>
    #<strong>puts</strong>(obj, ...)  &#x21d2; <code>nil</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes the given object(s) to <em>ios</em>. Writes a newline after any that do not already end with a newline sequence. Returns <code>nil</code>.</p>

<p>The stream must be opened for writing. If called with an array argument, writes each element on a new line. Each given object that isn’t a string or array will be converted by calling its <code>to_s</code> method. If called without arguments, outputs a single newline.</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$stdout</span>.<span class='id identifier rubyid_puts'>puts</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>this</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>is</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test</span><span class='tstring_end'>&quot;</span></span>])</code></pre>

<p><em>produces:</em></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_this'>this</span>
<span class='id identifier rubyid_is'>is</span>
<span class='id identifier rubyid_a'>a</span>
<span class='id identifier rubyid_test'>test</span></code></pre>

<p>Note that <code>puts</code> always uses newlines and is not affected by the output record separator (<code>$\</code>).</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L8207-L8238'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8207' data-end='8238'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 8207</span></pre>
<pre class='code cpp'>

VALUE
rb_io_puts(int argc, const VALUE *argv, VALUE out)
{
    int i, n;
    VALUE line, args[2];

    /* if no argument given, print newline. */
    if (argc == 0) {
	rb_io_write(out, rb_default_rs);
	return Qnil;
    }
    for (i=0; i&lt;argc; i++) {
	if (RB_TYPE_P(argv[i], T_STRING)) {
	    line = argv[i];
	    goto string;
	}
	if (rb_exec_recursive(io_puts_ary, argv[i], out)) {
	    continue;
	}
	line = rb_obj_as_string(argv[i]);
      string:
	n = 0;
	args[n++] = line;
	if (RSTRING_LEN(line) == 0 ||
            !rb_str_end_with_asciichar(line, &#39;\n&#39;)) {
	    args[n++] = rb_default_rs;
	}
	rb_io_writev(out, n, args);
    }

    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pwrite-instance_method">
  <h3 class='signature '>
    #<strong>pwrite</strong>(string, offset)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes the given string to <em>ios</em> at <em>offset</em> using pwrite() system call.  This is advantageous to combining <a href="#seek-instance_method" title="IO#seek (method)">#seek</a> and <a href="#write-instance_method" title="IO#write (method)">#write</a> in that it is atomic, allowing multiple threads/process to share the same <code>IO</code> object for reading the file at various locations. This bypasses any userspace buffering of the <code>IO</code> layer. Returns the number of bytes written. Raises SystemCallError on error and <a href="NotImplementedError.html" title="NotImplementedError (class)"><code>::NotImplementedError</code></a> if platform does not implement the system call.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>out</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>w</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
  <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_pwrite'>pwrite</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ABCDEF</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>3</span>)   <span class='comment'>#=&gt; 6
</span><span class='kw'>end</span>

<span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>out</span><span class='tstring_end'>&quot;</span></span>)          <span class='comment'>#=&gt; &quot;\u0000\u0000\u0000ABCDEF&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L5709-L5736'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5709' data-end='5736'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 5709</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_pwrite(VALUE io, VALUE str, VALUE offset)
{
    rb_io_t *fptr;
    ssize_t n;
    struct prdwr_internal_arg arg;
    VALUE tmp;

    if (!RB_TYPE_P(str, T_STRING))
	str = rb_obj_as_string(str);

    arg.offset = NUM2OFFT(offset);

    io = GetWriteIO(io);
    GetOpenFile(io, fptr);
    rb_io_check_writable(fptr);
    arg.fd = fptr-&gt;fd;

    tmp = rb_str_tmp_frozen_acquire(str);
    arg.buf = RSTRING_PTR(tmp);
    arg.count = (size_t)RSTRING_LEN(tmp);

    n = (ssize_t)rb_thread_io_blocking_region(internal_pwrite_func, &amp;arg, fptr-&gt;fd);
    if (n &lt; 0) rb_sys_fail_path(fptr-&gt;pathv);
    rb_str_tmp_frozen_release(str, tmp);

    return SSIZET2NUM(n);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="read-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>read</strong>(maxlen = nil)  &#x21d2; <a href="String.html" title="String (class)">String</a><sup>?</sup> </span>
      <span class='overload'>#<strong>read</strong>(maxlen = nil, out_string)  &#x21d2; <code>out_string</code><sup>?</sup> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads bytes from the stream (in binary mode):</p>
<ul><li>
<p>If <code>maxlen</code> is <code>nil</code>, reads all bytes.</p>
</li><li>
<p>Otherwise reads <code>maxlen</code> bytes, if available.</p>
</li><li>
<p>Otherwise reads all bytes.</p>
</li></ul>

<p>Returns a string (either a new string or the given <code>out_string</code>) containing the bytes read. The encoding of the string depends on both <code>maxLen</code> and <code>out_string</code>:</p>
<ul><li>
<p><code>maxlen</code> is <code>nil</code>: uses internal encoding of <code>self</code> (regardless of whether <code>out_string</code> was given).</p>
</li><li>
<p><code>maxlen</code> not <code>nil</code>:</p>
<ul><li>
<p><code>out_string</code> given: encoding of <code>out_string</code> not modified.</p>
</li><li>
<p><code>out_string</code> not given: ASCII-8BIT is used.</p>
</li></ul>
</li></ul>

<p><strong>Without Argument <code>out_string</code></strong></p>

<p>When argument <code>out_string</code> is omitted, the returned value is a new string:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'>read</span>
<span class='comment'># =&gt; &quot;This is line one.\nThis is the second line.\nThis is the third line.\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_rewind'><a href="#rewind-instance_method" title="IO#rewind (method)">rewind</a></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'>read</span>(<span class='int'>40</span>)      <span class='comment'># =&gt; &quot;This is line one.\r\nThis is the second li&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'>read</span>(<span class='int'>40</span>)      <span class='comment'># =&gt; &quot;ne.\r\nThis is the third line.\r\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'>read</span>(<span class='int'>40</span>)      <span class='comment'># =&gt; nil</span></code></pre>

<p>If <code>maxlen</code> is zero, returns an empty string.</p>

<p><strong> With Argument <code>out_string</code></strong></p>

<p>When argument <code>out_string</code> is given, the returned value is <code>out_string</code>, whose content is replaced:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>      <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'>read</span>(<span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span>) <span class='comment'># =&gt; &quot;This is line one.\nThis is the second line.\nThis is the third line.\n&quot;
</span><span class='id identifier rubyid_s'>s</span>              <span class='comment'># =&gt; &quot;This is line one.\nThis is the second line.\nThis is the third line.\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_rewind'><a href="#rewind-instance_method" title="IO#rewind (method)">rewind</a></span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'>read</span>(<span class='int'>40</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span>)  <span class='comment'># =&gt; &quot;This is line one.\r\nThis is the second li&quot;
</span><span class='id identifier rubyid_s'>s</span>              <span class='comment'># =&gt; &quot;This is line one.\r\nThis is the second li&quot;
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'>read</span>(<span class='int'>40</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span>)  <span class='comment'># =&gt; &quot;ne.\r\nThis is the third line.\r\n&quot;
</span><span class='id identifier rubyid_s'>s</span>              <span class='comment'># =&gt; &quot;ne.\r\nThis is the third line.\r\n&quot;
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bat</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'>read</span>(<span class='int'>40</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span>)  <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_s'>s</span>              <span class='comment'># =&gt; &quot;&quot;</span></code></pre>

<p>Note that this method behaves like the fread() function in C. This means it retries to invoke read(2) system calls to read data with the specified maxlen (or until EOF).</p>

<p>This behavior is preserved even if the stream is in non-blocking mode. (This method is non-blocking-flag insensitive as other methods.)</p>

<p>If you need the behavior like a single read(2) system call, consider <a href="#readpartial-instance_method" title="IO#readpartial (method)">#readpartial</a>, <a href="#read_nonblock-instance_method" title="IO#read_nonblock (method)">#read_nonblock</a>, and <a href="#sysread-instance_method" title="IO#sysread (method)">#sysread</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L3487-L3533'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3487' data-end='3533'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 3487</span></pre>
<pre class='code cpp'>

static VALUE
io_read(int argc, VALUE *argv, VALUE io)
{
    rb_io_t *fptr;
    long n, len;
    VALUE length, str;
    int shrinkable;
#if RUBY_CRLF_ENVIRONMENT
    int previous_mode;
#endif

    rb_scan_args(argc, argv, &quot;02&quot;, &amp;length, &amp;str);

    if (NIL_P(length)) {
	GetOpenFile(io, fptr);
	rb_io_check_char_readable(fptr);
	return read_all(fptr, remain_size(fptr), str);
    }
    len = NUM2LONG(length);
    if (len &lt; 0) {
	rb_raise(rb_eArgError, &quot;negative length %ld given&quot;, len);
    }

    shrinkable = io_setstrbuf(&amp;str,len);

    GetOpenFile(io, fptr);
    rb_io_check_byte_readable(fptr);
    if (len == 0) {
	io_set_read_length(str, 0, shrinkable);
	return str;
    }

    READ_CHECK(fptr);
#if RUBY_CRLF_ENVIRONMENT
    previous_mode = set_binary_mode_with_seek_cur(fptr);
#endif
    n = io_fread(str, 0, len, fptr);
    io_set_read_length(str, n, shrinkable);
#if RUBY_CRLF_ENVIRONMENT
    if (previous_mode == O_TEXT) {
	setmode(fptr-&gt;fd, O_TEXT);
    }
#endif
    if (n == 0) return Qnil;

    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="read_nonblock-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>read_nonblock</strong>(maxlen [, options])  &#x21d2; <a href="String.html" title="String (class)">String</a> </span>
      <span class='overload'>#<strong>read_nonblock</strong>(maxlen, outbuf [, options])  &#x21d2; <code>outbuf</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads at most <em>maxlen</em> bytes from <em>ios</em> using the read(2) system call after O_NONBLOCK is set for the underlying file descriptor.</p>

<p>If the optional <em>outbuf</em> argument is present, it must reference a <a href="String.html" title="String (class)"><code>::String</code></a>, which will receive the data. The <em>outbuf</em> will contain only the received data after the method call even if it is not empty at the beginning.</p>

<p>read_nonblock just calls the read(2) system call. It causes all errors the read(2) system call causes: <code>Errno::EWOULDBLOCK</code>, <code>Errno::EINTR</code>, etc. The caller should care such errors.</p>

<p>If the exception is <code>Errno::EWOULDBLOCK</code> or <code>Errno::EAGAIN</code>, it is extended by <a href="IO/WaitReadable.html" title="IO::WaitReadable (module)"><code>::IO::WaitReadable</code></a>. So <a href="IO/WaitReadable.html" title="IO::WaitReadable (module)"><code>::IO::WaitReadable</code></a> can be used to rescue the exceptions for retrying read_nonblock.</p>

<p>read_nonblock causes <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a> on EOF.</p>

<p>On some platforms, such as Windows, non-blocking mode is not supported on <code>IO</code> objects other than sockets. In such cases, <code>Errno::EBADF</code> will be raised.</p>

<p>If the read byte buffer is not empty, read_nonblock reads from the buffer like readpartial. In this case, the read(2) system call is not called.</p>

<p>When read_nonblock raises an exception kind of <a href="IO/WaitReadable.html" title="IO::WaitReadable (module)"><code>::IO::WaitReadable</code></a>, read_nonblock should not be called until io is readable for avoiding busy loop. This can be done as follows.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># emulates blocking read (readpartial).
</span><span class='kw'>begin</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_read_nonblock'>read_nonblock</span>(<span class='id identifier rubyid_maxlen'>maxlen</span>)
<span class='kw'>rescue</span> <span class='const'>IO</span><span class='op'>::</span><span class='const'><a href="IO/WaitReadable.html" title="IO::WaitReadable (module)">WaitReadable</a></span>
  <span class='const'>IO</span>.<span class='id identifier rubyid_select'><a href="#select-class_method" title="IO.select (method)">select</a></span>([<span class='id identifier rubyid_io'>io</span>])
  <span class='kw'>retry</span>
<span class='kw'>end</span></code></pre>

<p>Although <code>read_nonblock</code> doesn’t raise <a href="IO/WaitWritable.html" title="IO::WaitWritable (module)"><code>::IO::WaitWritable</code></a>. <code>OpenSSL::Buffering#read_nonblock</code> can raise <a href="IO/WaitWritable.html" title="IO::WaitWritable (module)"><code>::IO::WaitWritable</code></a>. If IO and SSL should be used polymorphically, <a href="IO/WaitWritable.html" title="IO::WaitWritable (module)"><code>::IO::WaitWritable</code></a> should be rescued too. See the document of <code>OpenSSL::Buffering#read_nonblock</code> for sample code.</p>

<p>Note that this method is identical to readpartial except the non-blocking flag is set.</p>

<p>By specifying a keyword argument <em>exception</em> to <code>false</code>, you can indicate that read_nonblock should not raise an <a href="IO/WaitReadable.html" title="IO::WaitReadable (module)"><code>::IO::WaitReadable</code></a> exception, but return the symbol <code>:wait_readable</code> instead. At EOF, it will return nil instead of raising <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.rb#L62-L64'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='62' data-end='64'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.rb', line 62</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_read_nonblock'>read_nonblock</span>(<span class='id identifier rubyid_len'>len</span><span class='comma'>,</span> <span class='id identifier rubyid_buf'>buf</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>exception:</span> <span class='kw'>true</span>)
  <span class='const'>Primitive</span>.<span class='id identifier rubyid_io_read_nonblock'>io_read_nonblock</span>(<span class='id identifier rubyid_len'>len</span><span class='comma'>,</span> <span class='id identifier rubyid_buf'>buf</span><span class='comma'>,</span> <span class='id identifier rubyid_exception'>exception</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="readbyte-instance_method">
  <h3 class='signature '>
    #<strong>readbyte</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads a byte as with <a href="#getbyte-instance_method" title="IO#getbyte (method)">#getbyte</a>, but raises an <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a> on end of file.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L4620-L4629'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4620' data-end='4629'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4620</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_readbyte(VALUE io)
{
    VALUE c = rb_io_getbyte(io);

    if (NIL_P(c)) {
	rb_eof_error();
    }
    return c;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="readchar-instance_method">
  <h3 class='signature '>
    #<strong>readchar</strong>  &#x21d2; <a href="String.html" title="String (class)">String</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads a one-character string from <em>ios</em>. Raises an <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a> on end of file.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readchar'>readchar</span>   <span class='comment'>#=&gt; &quot;h&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readchar'>readchar</span>   <span class='comment'>#=&gt; &quot;e&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L4563-L4572'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4563' data-end='4572'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4563</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_readchar(VALUE io)
{
    VALUE c = rb_io_getc(io);

    if (NIL_P(c)) {
	rb_eof_error();
    }
    return c;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="readline-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>readline</strong>(sep=$/ [, getline_args])  &#x21d2; <a href="String.html" title="String (class)">String</a> </span>
      <span class='overload'>#<strong>readline</strong>(limit [, getline_args])  &#x21d2; <a href="String.html" title="String (class)">String</a> </span>
      <span class='overload'>#<strong>readline</strong>(sep, limit [, getline_args])  &#x21d2; <a href="String.html" title="String (class)">String</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads a line as with <a href="#gets-instance_method" title="IO#gets (method)">#gets</a>, but raises an <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a> on end of file.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L4122-L4131'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4122' data-end='4131'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4122</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_readline(int argc, VALUE *argv, VALUE io)
{
    VALUE line = rb_io_gets_m(argc, argv, io);

    if (NIL_P(line)) {
	rb_eof_error();
    }
    return line;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="readlines-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>readlines</strong>(sep=$/ [, getline_args])  &#x21d2; <a href="Array.html" title="Array (class)">Array</a> </span>
      <span class='overload'>#<strong>readlines</strong>(limit [, getline_args])  &#x21d2; <a href="Array.html" title="Array (class)">Array</a> </span>
      <span class='overload'>#<strong>readlines</strong>(sep, limit [, getline_args])  &#x21d2; <a href="Array.html" title="Array (class)">Array</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads all of the lines in <em>ios</em>, and returns them in an array. Lines are separated by the optional <em>sep</em>. If <em>sep</em> is <code>nil</code>, the rest of the stream is returned as a single record. If the first argument is an integer, or an optional second argument is given, the returning string would not be longer than the given value in bytes. The stream must be opened for reading or an <a href="IOError.html" title="IOError (class)"><code>::IOError</code></a> will be raised.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readlines'>readlines</span>[<span class='int'>0</span>]   <span class='comment'>#=&gt; &quot;This is line one\n&quot;
</span>
<span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>chomp:</span> <span class='kw'>true</span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readlines'>readlines</span>[<span class='int'>0</span>]   <span class='comment'>#=&gt; &quot;This is line one&quot;</span></code></pre>

<p>See <a href="#readlines-class_method" title="IO.readlines (method)">.readlines</a> for details about getline_args.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L4159-L4166'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4159' data-end='4166'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4159</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_readlines(int argc, VALUE *argv, VALUE io)
{
    struct getline_arg args;

    prepare_getline_args(argc, argv, &amp;args, io);
    return io_readlines(&amp;args, io);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="readpartial-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>readpartial</strong>(maxlen)  &#x21d2; <a href="String.html" title="String (class)">String</a> </span>
      <span class='overload'>#<strong>readpartial</strong>(maxlen, out_string)  &#x21d2; <code>out_string</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads up to <code>maxlen</code> bytes from the stream; returns a string (either a new string or the given <code>out_string</code>). Its encoding is:</p>
<ul><li>
<p>The unchanged encoding of <code>out_string</code>, if <code>out_string</code> is given.</p>
</li><li>
<p>ASCII-8BIT, otherwise.</p>
</li><li>
<p>Contains <code>maxlen</code> bytes from the stream, if available.</p>
</li><li>
<p>Otherwise contains all available bytes, if any available.</p>
</li><li>
<p>Otherwise is an empty string.</p>
</li></ul>

<p>With the single non-negative integer argument <code>maxlen</code> given, returns a new string:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readpartial'>readpartial</span>(<span class='int'>30</span>) <span class='comment'># =&gt; &quot;This is line one.\nThis is the&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readpartial'>readpartial</span>(<span class='int'>30</span>) <span class='comment'># =&gt; &quot; second line.\nThis is the thi&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readpartial'>readpartial</span>(<span class='int'>30</span>) <span class='comment'># =&gt; &quot;rd line.\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_eof'><a href="#eof-instance_method" title="IO#eof (method)">eof</a></span>             <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readpartial'>readpartial</span>(<span class='int'>30</span>) <span class='comment'># Raises EOFError.</span></code></pre>

<p>With both argument <code>maxlen</code> and string argument <code>out_string</code> given, returns modified <code>out_string</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readpartial'>readpartial</span>(<span class='int'>30</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span>) <span class='comment'># =&gt; &quot;This is line one.\nThis is the&quot;
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readpartial'>readpartial</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span>)  <span class='comment'># =&gt; &quot;&quot;</span></code></pre>

<p>This method is useful for a stream such as a pipe, a socket, or a tty. It blocks only when no data is immediately available. This means that it blocks only when <em>all</em> of the following are true:</p>
<ul><li>
<p>The byte buffer in the stream is empty.</p>
</li><li>
<p>The content of the stream is empty.</p>
</li><li>
<p>The stream is not at EOF.</p>
</li></ul>

<p>When blocked, the method waits for either more data or EOF on the stream:</p>
<ul><li>
<p>If more data is read, the method returns the data.</p>
</li><li>
<p>If EOF is reached, the method raises <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a>.</p>
</li></ul>

<p>When not blocked, the method responds immediately:</p>
<ul><li>
<p>Returns data from the buffer if there is any.</p>
</li><li>
<p>Otherwise returns data from the stream if there is any.</p>
</li><li>
<p>Otherwise raises <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a> if the stream has reached EOF.</p>
</li></ul>

<p>Note that this method is similar to sysread. The differences are:</p>
<ul><li>
<p>If the byte buffer is not empty, read from the byte buffer instead of “sysread for buffered IO (IOError)”.</p>
</li><li>
<p>It doesn’t cause <code>Errno::EWOULDBLOCK</code> and <code>Errno::EINTR</code>.  When readpartial meets EWOULDBLOCK and EINTR by read system call, readpartial retries the system call.</p>
</li></ul>

<p>The latter means that readpartial is non-blocking-flag insensitive. It blocks on the situation <a href="#sysread-instance_method" title="IO#sysread (method)">#sysread</a> causes <code>Errno::EWOULDBLOCK</code> as if the fd is blocking mode.</p>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'>#                        # Returned      Buffer Content    Pipe Content
</span><span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_w'>w</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>           <span class='comment'>#
</span><span class='id identifier rubyid_w'>w</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>               <span class='comment'>#               &quot;&quot;                &quot;abc&quot;.
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_readpartial'>readpartial</span>(<span class='int'>4096</span>)      <span class='comment'># =&gt; &quot;abc&quot;      &quot;&quot;                &quot;&quot;
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_readpartial'>readpartial</span>(<span class='int'>4096</span>)      <span class='comment'># (Blocks because buffer and pipe are empty.)
</span>
<span class='comment'>#                        # Returned      Buffer Content    Pipe Content
</span><span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_w'>w</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>           <span class='comment'>#
</span><span class='id identifier rubyid_w'>w</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>               <span class='comment'>#               &quot;&quot;                &quot;abc&quot;
</span><span class='id identifier rubyid_w'>w</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>                  <span class='comment'>#               &quot;&quot;                &quot;abc&quot; EOF
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_readpartial'>readpartial</span>(<span class='int'>4096</span>)      <span class='comment'># =&gt; &quot;abc&quot;      &quot;&quot;                 EOF
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_readpartial'>readpartial</span>(<span class='int'>4096</span>)      <span class='comment'># raises EOFError
</span>
<span class='comment'>#                        # Returned      Buffer Content    Pipe Content
</span><span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_w'>w</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>           <span class='comment'>#
</span><span class='id identifier rubyid_w'>w</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>abc\ndef\n</span><span class='tstring_end'>&quot;</span></span>        <span class='comment'>#               &quot;&quot;                &quot;abc\ndef\n&quot;
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>                   <span class='comment'># =&gt; &quot;abc\n&quot;    &quot;def\n&quot;           &quot;&quot;
</span><span class='id identifier rubyid_w'>w</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ghi\n</span><span class='tstring_end'>&quot;</span></span>             <span class='comment'>#               &quot;def\n&quot;           &quot;ghi\n&quot;
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_readpartial'>readpartial</span>(<span class='int'>4096</span>)      <span class='comment'># =&gt; &quot;def\n&quot;    &quot;&quot;                &quot;ghi\n&quot;
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_readpartial'>readpartial</span>(<span class='int'>4096</span>)      <span class='comment'># =&gt; &quot;ghi\n&quot;    &quot;&quot;                &quot;&quot;</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L3307-L3316'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3307' data-end='3316'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 3307</span></pre>
<pre class='code cpp'>

static VALUE
io_readpartial(int argc, VALUE *argv, VALUE io)
{
    VALUE ret;

    ret = io_getpartial(argc, argv, io, Qnil, 0);
    if (NIL_P(ret))
        rb_eof_error();
    return ret;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="reopen-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>reopen</strong>(other_IO)  &#x21d2; <code>IO</code> </span>
      <span class='overload'>#<strong>reopen</strong>(path, mode [, opt])  &#x21d2; <code>IO</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reassociates <em>ios</em> with the I/O stream given in <em>other_IO</em> or to a new stream opened on <em>path</em>. This may dynamically change the actual class of this stream. The <code>mode</code> and <code>opt</code> parameters accept the same values as <a href="#open-class_method" title="IO.open (method)">.open</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f1'>f1</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_f2'>f2</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_f2'>f2</span>.<span class='id identifier rubyid_readlines'><a href="#readlines-class_method" title="IO.readlines (method)">readlines</a></span>[<span class='int'>0</span>]   <span class='comment'>#=&gt; &quot;This is line one\n&quot;
</span><span class='id identifier rubyid_f2'>f2</span>.<span class='id identifier rubyid_reopen'>reopen</span>(<span class='id identifier rubyid_f1'>f1</span>)     <span class='comment'>#=&gt; #&lt;File:testfile&gt;
</span><span class='id identifier rubyid_f2'>f2</span>.<span class='id identifier rubyid_readlines'><a href="#readlines-class_method" title="IO.readlines (method)">readlines</a></span>[<span class='int'>0</span>]   <span class='comment'>#=&gt; &quot;This is line one\n&quot;</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L7815-L7901'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='7815' data-end='7901'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 7815</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_reopen(int argc, VALUE *argv, VALUE file)
{
    VALUE fname, nmode, opt;
    int oflags;
    rb_io_t *fptr;

    if (rb_scan_args(argc, argv, &quot;11:&quot;, &amp;fname, &amp;nmode, &amp;opt) == 1) {
	VALUE tmp = rb_io_check_io(fname);
	if (!NIL_P(tmp)) {
	    return io_reopen(file, tmp);
	}
    }

    FilePathValue(fname);
    rb_io_taint_check(file);
    fptr = RFILE(file)-&gt;fptr;
    if (!fptr) {
	fptr = RFILE(file)-&gt;fptr = ZALLOC(rb_io_t);
    }

    if (!NIL_P(nmode) || !NIL_P(opt)) {
	int fmode;
	convconfig_t convconfig;

	rb_io_extract_modeenc(&amp;nmode, 0, opt, &amp;oflags, &amp;fmode, &amp;convconfig);
	if (IS_PREP_STDIO(fptr) &amp;&amp;
            ((fptr-&gt;mode &amp; FMODE_READWRITE) &amp; (fmode &amp; FMODE_READWRITE)) !=
            (fptr-&gt;mode &amp; FMODE_READWRITE)) {
	    rb_raise(rb_eArgError,
		     &quot;%s can&#39;t change access mode from \&quot;%s\&quot; to \&quot;%s\&quot;&quot;,
		     PREP_STDIO_NAME(fptr), rb_io_fmode_modestr(fptr-&gt;mode),
		     rb_io_fmode_modestr(fmode));
	}
	fptr-&gt;mode = fmode;
	fptr-&gt;encs = convconfig;
    }
    else {
	oflags = rb_io_fmode_oflags(fptr-&gt;mode);
    }

    fptr-&gt;pathv = fname;
    if (fptr-&gt;fd &lt; 0) {
        fptr-&gt;fd = rb_sysopen(fptr-&gt;pathv, oflags, 0666);
	fptr-&gt;stdio_file = 0;
	return file;
    }

    if (fptr-&gt;mode &amp; FMODE_WRITABLE) {
        if (io_fflush(fptr) &lt; 0)
            rb_sys_fail_on_write(fptr);
    }
    fptr-&gt;rbuf.off = fptr-&gt;rbuf.len = 0;

    if (fptr-&gt;stdio_file) {
	int e = rb_freopen(rb_str_encode_ospath(fptr-&gt;pathv),
			   rb_io_oflags_modestr(oflags),
			   fptr-&gt;stdio_file);
        if (e) rb_syserr_fail_path(e, fptr-&gt;pathv);
        fptr-&gt;fd = fileno(fptr-&gt;stdio_file);
        rb_fd_fix_cloexec(fptr-&gt;fd);
#ifdef USE_SETVBUF
        if (setvbuf(fptr-&gt;stdio_file, NULL, _IOFBF, 0) != 0)
            rb_warn(&quot;setvbuf() can&#39;t be honoured for %&quot;PRIsVALUE, fptr-&gt;pathv);
#endif
        if (fptr-&gt;stdio_file == stderr) {
            if (setvbuf(fptr-&gt;stdio_file, NULL, _IONBF, BUFSIZ) != 0)
                rb_warn(&quot;setvbuf() can&#39;t be honoured for %&quot;PRIsVALUE, fptr-&gt;pathv);
        }
        else if (fptr-&gt;stdio_file == stdout &amp;&amp; isatty(fptr-&gt;fd)) {
            if (setvbuf(fptr-&gt;stdio_file, NULL, _IOLBF, BUFSIZ) != 0)
                rb_warn(&quot;setvbuf() can&#39;t be honoured for %&quot;PRIsVALUE, fptr-&gt;pathv);
        }
    }
    else {
	int tmpfd = rb_sysopen(fptr-&gt;pathv, oflags, 0666);
	int err = 0;
	if (rb_cloexec_dup2(tmpfd, fptr-&gt;fd) &lt; 0)
	    err = errno;
	(void)close(tmpfd);
	if (err) {
	    rb_syserr_fail_path(err, fptr-&gt;pathv);
	}
    }

    return file;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="rewind-instance_method">
  <h3 class='signature '>
    #<strong>rewind</strong>  &#x21d2; <code>0</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Repositions the stream to its beginning, setting both the position and the line number to zero; see <a href='#label-Position'>Position</a> and <a href='#label-Line+Number'>Line Number</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>     <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="IO#lineno (method)">lineno</a></span>   <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readline'><a href="#readline-instance_method" title="IO#readline (method)">readline</a></span> <span class='comment'># =&gt; &quot;This is line one.\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>     <span class='comment'># =&gt; 19
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="IO#lineno (method)">lineno</a></span>   <span class='comment'># =&gt; 1
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_rewind'>rewind</span>   <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>     <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="IO#lineno (method)">lineno</a></span>   <span class='comment'># =&gt; 0</span></code></pre>

<p>Note that this method cannot be used with streams such as pipes, ttys, and sockets.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L2344-L2360'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2344' data-end='2360'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2344</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_rewind(VALUE io)
{
    rb_io_t *fptr;

    GetOpenFile(io, fptr);
    if (io_seek(fptr, 0L, 0) &lt; 0 &amp;&amp; errno) rb_sys_fail_path(fptr-&gt;pathv);
    if (io == ARGF.current_file) {
	ARGF.lineno -= fptr-&gt;lineno;
    }
    fptr-&gt;lineno = 0;
    if (fptr-&gt;readconv) {
	clear_readconv(fptr);
    }

    return INT2FIX(0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="seek-instance_method">
  <h3 class='signature '>
    #<strong>seek</strong>(offset, whence = IO::SEEK_SET)  &#x21d2; <code>0</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Seeks to the position given by integer <code>offset</code> (see <a href='#label-Position'>Position</a>) and constant <code>whence</code>, which is one of:</p>
<ul><li>
<p><code>:CUR</code> or <a href="#SEEK_CUR-constant" title="IO::SEEK_CUR (constant)">SEEK_CUR</a>: Repositions the stream to its current position plus the given <code>offset</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>            <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_seek'>seek</span>(<span class='int'>20</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='const'>CUR</span>)  <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>            <span class='comment'># =&gt; 20
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_seek'>seek</span>(<span class='op'>-</span><span class='int'>10</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='const'>CUR</span>) <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>            <span class='comment'># =&gt; 10</span></code></pre>
</li><li>
<p><code>:END</code> or <a href="#SEEK_END-constant" title="IO::SEEK_END (constant)">SEEK_END</a>: Repositions the stream to its end plus the given <code>offset</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>            <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_seek'>seek</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='kw'>END</span>)   <span class='comment'># =&gt; 0  # Repositions to stream end.
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>            <span class='comment'># =&gt; 70
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_seek'>seek</span>(<span class='op'>-</span><span class='int'>20</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='kw'>END</span>) <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>            <span class='comment'># =&gt; 50
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_seek'>seek</span>(<span class='op'>-</span><span class='int'>40</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='kw'>END</span>) <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>            <span class='comment'># =&gt; 30</span></code></pre>
</li><li>
<p><code>:SET</code> or <code>IO:SEEK_SET</code>: Repositions the stream to the given <code>offset</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>            <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_seek'>seek</span>(<span class='int'>20</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='const'>SET</span>) <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>           <span class='comment'># =&gt; 20
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_seek'>seek</span>(<span class='int'>40</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='const'>SET</span>) <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>           <span class='comment'># =&gt; 40</span></code></pre>
</li></ul>

<p>Related: <a href="#pos=-instance_method" title="IO#pos= (method)">#pos=</a>, <a href="#tell-instance_method" title="IO#tell (method)">#tell</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L2276-L2287'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2276' data-end='2287'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2276</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_seek_m(int argc, VALUE *argv, VALUE io)
{
    VALUE offset, ptrname;
    int whence = SEEK_SET;

    if (rb_scan_args(argc, argv, &quot;11&quot;, &amp;offset, &amp;ptrname) == 2) {
	whence = interpret_seek_whence(ptrname);
    }

    return rb_io_seek(io, offset, whence);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="set_encoding-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>set_encoding</strong>(ext_enc)  &#x21d2; <code>IO</code> </span>
      <span class='overload'>#<strong>set_encoding</strong>(&quot;ext_enc:int_enc&quot;)  &#x21d2; <code>IO</code> </span>
      <span class='overload'>#<strong>set_encoding</strong>(ext_enc, int_enc)  &#x21d2; <code>IO</code> </span>
      <span class='overload'>#<strong>set_encoding</strong>(&quot;ext_enc:int_enc&quot;, opt)  &#x21d2; <code>IO</code> </span>
      <span class='overload'>#<strong>set_encoding</strong>(ext_enc, int_enc, opt)  &#x21d2; <code>IO</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>If single argument is specified, read string from io is tagged with the encoding specified.  If encoding is a colon separated two encoding names “A:B”, the read string is converted from encoding A (external encoding) to encoding B (internal encoding), then tagged with B.  If two arguments are specified, those must be encoding objects or encoding names, and the first one is the external encoding, and the second one is the internal encoding. If the external encoding and the internal encoding is specified, optional hash argument specify the conversion option.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L12348-L12362'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='12348' data-end='12362'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 12348</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_set_encoding(int argc, VALUE *argv, VALUE io)
{
    rb_io_t *fptr;
    VALUE v1, v2, opt;

    if (!RB_TYPE_P(io, T_FILE)) {
        return forward(io, id_set_encoding, argc, argv);
    }

    argc = rb_scan_args(argc, argv, &quot;11:&quot;, &amp;v1, &amp;v2, &amp;opt);
    GetOpenFile(io, fptr);
    io_encoding_set(fptr, v1, v2, opt);
    return io;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="set_encoding_by_bom-instance_method">
  <h3 class='signature '>
    #<strong>set_encoding_by_bom</strong>  &#x21d2; <a href="Encoding.html" title="Encoding (class)">Encoding</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Checks if <code>ios</code> starts with a BOM, and then consumes it and sets the external encoding.  Returns the result encoding if found, or nil.  If <code>ios</code> is not binmode or its encoding has been set already, an exception will be raised.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_write'><a href="#write-class_method" title="IO.write (method)">write</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bom.txt</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u{FEFF}abc</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_ios'>ios</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bom.txt</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rb</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_ios'>ios</span>.<span class='id identifier rubyid_set_encoding_by_bom'>set_encoding_by_bom</span>    <span class='comment'>#=&gt;  #&lt;Encoding:UTF-8&gt;
</span>
<span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_write'><a href="#write-class_method" title="IO.write (method)">write</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>nobom.txt</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_ios'>ios</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>nobom.txt</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rb</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_ios'>ios</span>.<span class='id identifier rubyid_set_encoding_by_bom'>set_encoding_by_bom</span>    <span class='comment'>#=&gt;  nil</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L8840-L8858'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8840' data-end='8858'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 8840</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_set_encoding_by_bom(VALUE io)
{
    rb_io_t *fptr;

    GetOpenFile(io, fptr);
    if (!(fptr-&gt;mode &amp; FMODE_BINMODE)) {
        rb_raise(rb_eArgError, &quot;ASCII incompatible encoding needs binmode&quot;);
    }
    if (fptr-&gt;encs.enc2) {
        rb_raise(rb_eArgError, &quot;encoding conversion is set&quot;);
    }
    else if (fptr-&gt;encs.enc &amp;&amp; fptr-&gt;encs.enc != rb_ascii8bit_encoding()) {
        rb_raise(rb_eArgError, &quot;encoding is set to %s already&quot;,
                 rb_enc_name(fptr-&gt;encs.enc));
    }
    if (!io_set_encoding_by_bom(io)) return Qnil;
    return rb_enc_from_encoding(fptr-&gt;encs.enc);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="stat-instance_method">
  <h3 class='signature '>
    #<strong>stat</strong>  &#x21d2; stat   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns status information for <em>ios</em> as an object of type <a href="File/Stat.html" title="File::Stat (class)"><code>::File::Stat</code></a>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_stat'>stat</span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%o</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_mode'>mode</span>   <span class='comment'>#=&gt; &quot;100644&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_blksize'>blksize</span>       <span class='comment'>#=&gt; 4096
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_atime'>atime</span>         <span class='comment'>#=&gt; Wed Apr 09 08:53:54 CDT 2003</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/file.c#L1388-L1399'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1388' data-end='1399'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'file.c', line 1388</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_stat(VALUE obj)
{
    rb_io_t *fptr;
    struct stat st;

    GetOpenFile(obj, fptr);
    if (fstat(fptr-&gt;fd, &amp;st) == -1) {
	rb_sys_fail_path(fptr-&gt;pathv);
    }
    return rb_stat_new(&amp;st);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sysread-instance_method">
  <h3 class='signature '>
    #<strong>sysread</strong>(maxlen[, outbuf])  &#x21d2; <a href="String.html" title="String (class)">String</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads <em>maxlen</em> bytes from <em>ios</em> using a low-level read and returns them as a string.  Do not mix with other methods that read from <em>ios</em> or you may get unpredictable results.</p>

<p>If the optional <em>outbuf</em> argument is present, it must reference a <a href="String.html" title="String (class)"><code>::String</code></a>, which will receive the data. The <em>outbuf</em> will contain only the received data after the method call even if it is not empty at the beginning.</p>

<p>Raises SystemCallError on error and <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a> at end of file.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_sysread'>sysread</span>(<span class='int'>16</span>)   <span class='comment'>#=&gt; &quot;This is line one&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L5550-L5593'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5550' data-end='5593'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 5550</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_sysread(int argc, VALUE *argv, VALUE io)
{
    VALUE len, str;
    rb_io_t *fptr;
    long n, ilen;
    struct io_internal_read_struct iis;
    int shrinkable;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;len, &amp;str);
    ilen = NUM2LONG(len);

    shrinkable = io_setstrbuf(&amp;str, ilen);
    if (ilen == 0) return str;

    GetOpenFile(io, fptr);
    rb_io_check_byte_readable(fptr);

    if (READ_DATA_BUFFERED(fptr)) {
        rb_raise(rb_eIOError, &quot;sysread for buffered IO&quot;);
    }

    rb_io_check_closed(fptr);

    io_setstrbuf(&amp;str, ilen);
    iis.th = rb_thread_current();
    iis.fptr = fptr;
    iis.nonblock = 0;
    iis.buf = RSTRING_PTR(str);
    iis.capa = ilen;
    n = read_internal_locktmp(str, &amp;iis);

    if (n &lt; 0) {
        rb_sys_fail_path(fptr-&gt;pathv);
    }

    io_set_read_length(str, n, shrinkable);

    if (n == 0 &amp;&amp; ilen &gt; 0) {
        rb_eof_error();
    }

    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sysseek-instance_method">
  <h3 class='signature '>
    #<strong>sysseek</strong>(offset, whence = IO::SEEK_SET)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Seeks to a given <em>offset</em> in the stream according to the value of <em>whence</em> (see <a href="#seek-instance_method" title="IO#seek (method)">#seek</a> for values of <em>whence</em>). Returns the new offset into the file.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_sysseek'>sysseek</span>(<span class='op'>-</span><span class='int'>13</span><span class='comma'>,</span> <span class='const'>IO</span><span class='op'>::</span><span class='const'><a href="#SEEK_END-constant" title="IO::SEEK_END (constant)">SEEK_END</a></span>)   <span class='comment'>#=&gt; 53
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_sysread'><a href="#sysread-instance_method" title="IO#sysread (method)">sysread</a></span>(<span class='int'>10</span>)                  <span class='comment'>#=&gt; &quot;And so on.&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L5463-L5488'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5463' data-end='5488'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 5463</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_sysseek(int argc, VALUE *argv, VALUE io)
{
    VALUE offset, ptrname;
    int whence = SEEK_SET;
    rb_io_t *fptr;
    off_t pos;

    if (rb_scan_args(argc, argv, &quot;11&quot;, &amp;offset, &amp;ptrname) == 2) {
	whence = interpret_seek_whence(ptrname);
    }
    pos = NUM2OFFT(offset);
    GetOpenFile(io, fptr);
    if ((fptr-&gt;mode &amp; FMODE_READABLE) &amp;&amp;
        (READ_DATA_BUFFERED(fptr) || READ_CHAR_PENDING(fptr))) {
	rb_raise(rb_eIOError, &quot;sysseek for buffered IO&quot;);
    }
    if ((fptr-&gt;mode &amp; FMODE_WRITABLE) &amp;&amp; fptr-&gt;wbuf.len) {
	rb_warn(&quot;sysseek for buffered IO&quot;);
    }
    errno = 0;
    pos = lseek(fptr-&gt;fd, pos, whence);
    if (pos &lt; 0 &amp;&amp; errno) rb_sys_fail_path(fptr-&gt;pathv);

    return OFFT2NUM(pos);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="syswrite-instance_method">
  <h3 class='signature '>
    #<strong>syswrite</strong>(string)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes the given string to <em>ios</em> using a low-level write. Returns the number of bytes written. Do not mix with other methods that write to <em>ios</em> or you may get unpredictable results. Raises SystemCallError on error.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>out</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>w</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_syswrite'>syswrite</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ABCDEF</span><span class='tstring_end'>&quot;</span></span>)   <span class='comment'>#=&gt; 6</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L5503-L5529'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5503' data-end='5529'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 5503</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_syswrite(VALUE io, VALUE str)
{
    VALUE tmp;
    rb_io_t *fptr;
    long n, len;
    const char *ptr;

    if (!RB_TYPE_P(str, T_STRING))
	str = rb_obj_as_string(str);

    io = GetWriteIO(io);
    GetOpenFile(io, fptr);
    rb_io_check_writable(fptr);

    if (fptr-&gt;wbuf.len) {
	rb_warn(&quot;syswrite for buffered IO&quot;);
    }

    tmp = rb_str_tmp_frozen_acquire(str);
    RSTRING_GETMEM(tmp, ptr, len);
    n = rb_write_internal(fptr, ptr, len);
    if (n &lt; 0) rb_sys_fail_path(fptr-&gt;pathv);
    rb_str_tmp_frozen_release(str, tmp);

    return LONG2FIX(n);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_i-instance_method">
  <h3 class='signature '>
    #<strong>to_i</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>     <span class='aliases'>Also known as: <span class='names'>#fileno</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the integer file descriptor for the stream:</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$stdin</span>.<span class='id identifier rubyid_fileno'><a href="#fileno-instance_method" title="IO#fileno (method)">fileno</a></span>             <span class='comment'># =&gt; 0
</span><span class='gvar'>$stdout</span>.<span class='id identifier rubyid_fileno'><a href="#fileno-instance_method" title="IO#fileno (method)">fileno</a></span>            <span class='comment'># =&gt; 1
</span><span class='gvar'>$stderr</span>.<span class='id identifier rubyid_fileno'><a href="#fileno-instance_method" title="IO#fileno (method)">fileno</a></span>            <span class='comment'># =&gt; 2
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_fileno'><a href="#fileno-instance_method" title="IO#fileno (method)">fileno</a></span> <span class='comment'># =&gt; 10</span></code></pre>

<p><code>to_i</code> is an alias for <a href="#fileno-instance_method" title="IO#fileno (method)">#fileno</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L2638-L2647'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2638' data-end='2647'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2638</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_fileno(VALUE io)
{
    rb_io_t *fptr = RFILE(io)-&gt;fptr;
    int fd;

    rb_io_check_closed(fptr);
    fd = fptr-&gt;fd;
    return INT2FIX(fd);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_io-instance_method">
  <h3 class='signature '>
    #<strong>to_io</strong>  &#x21d2; <code>self</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>self</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L2744-L2748'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2744' data-end='2748'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2744</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_to_io(VALUE io)
{
    return io;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ungetbyte-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>ungetbyte</strong>(string)  &#x21d2; <code>nil</code> </span>
      <span class='overload'>#<strong>ungetbyte</strong>(integer)  &#x21d2; <code>nil</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Pushes back bytes (passed as a parameter) onto <em>ios</em>, such that a subsequent buffered read will return it. It is only guaranteed to support a single byte, and only if ungetbyte or ungetc has not already been called on <em>ios</em> since the previous read of at least a single byte from <em>ios</em>. However, it can support additional bytes if there is space in the internal buffer to allow for it.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)   <span class='comment'>#=&gt; #&lt;File:testfile&gt;
</span><span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_getbyte'><a href="#getbyte-instance_method" title="IO#getbyte (method)">getbyte</a></span>              <span class='comment'>#=&gt; 0x38
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_ungetbyte'>ungetbyte</span>(<span class='id identifier rubyid_b'>b</span>)             <span class='comment'>#=&gt; nil
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_getbyte'><a href="#getbyte-instance_method" title="IO#getbyte (method)">getbyte</a></span>                  <span class='comment'>#=&gt; 0x38</span></code></pre>

<p>If given an integer, only uses the lower 8 bits of the integer as the byte to push.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)   <span class='comment'>#=&gt; #&lt;File:testfile&gt;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_ungetbyte'>ungetbyte</span>(<span class='int'>0x102</span>)         <span class='comment'>#=&gt; nil
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_getbyte'><a href="#getbyte-instance_method" title="IO#getbyte (method)">getbyte</a></span>                  <span class='comment'>#=&gt; 0x2</span></code></pre>

<p>Calling this method prepends to the existing buffer, even if the method has already been called previously:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)   <span class='comment'>#=&gt; #&lt;File:testfile&gt;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_ungetbyte'>ungetbyte</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ab</span><span class='tstring_end'>&quot;</span></span>)          <span class='comment'>#=&gt; nil
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_ungetbyte'>ungetbyte</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cd</span><span class='tstring_end'>&quot;</span></span>)          <span class='comment'>#=&gt; nil
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>(<span class='int'>5</span>)                  <span class='comment'>#=&gt; &quot;cdab8&quot;</span></code></pre>

<p>Has no effect with unbuffered reads (such as <a href="#sysread-instance_method" title="IO#sysread (method)">#sysread</a>).</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L4667-L4688'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4667' data-end='4688'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4667</span></pre>
<pre class='code cpp'>

VALUE
rb_io_ungetbyte(VALUE io, VALUE b)
{
    rb_io_t *fptr;

    GetOpenFile(io, fptr);
    rb_io_check_byte_readable(fptr);
    switch (TYPE(b)) {
      case T_NIL:
        return Qnil;
      case T_FIXNUM:
      case T_BIGNUM: ;
        VALUE v = rb_int_modulo(b, INT2FIX(256));
        unsigned char c = NUM2INT(v) &amp; 0xFF;
        b = rb_str_new((const char *)&amp;c, 1);
        break;
      default:
        SafeStringValue(b);
    }
    io_ungetbyte(b, fptr);
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ungetc-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>ungetc</strong>(integer)  &#x21d2; <code>nil</code> </span>
      <span class='overload'>#<strong>ungetc</strong>(string)  &#x21d2; <code>nil</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Pushes back characters (passed as a parameter) onto <em>ios</em>, such that a subsequent buffered read will return it. It is only guaranteed to support a single byte, and only if ungetbyte or ungetc has not already been called on <em>ios</em> since the previous read of at least a single byte from <em>ios</em>. However, it can support additional bytes if there is space in the internal buffer to allow for it.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)   <span class='comment'>#=&gt; #&lt;File:testfile&gt;
</span><span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_getc'><a href="#getc-instance_method" title="IO#getc (method)">getc</a></span>                 <span class='comment'>#=&gt; &quot;8&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_ungetc'>ungetc</span>(<span class='id identifier rubyid_c'>c</span>)                <span class='comment'>#=&gt; nil
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_getc'><a href="#getc-instance_method" title="IO#getc (method)">getc</a></span>                     <span class='comment'>#=&gt; &quot;8&quot;</span></code></pre>

<p>If given an integer, the integer must represent a valid codepoint in the external encoding of <em>ios</em>.</p>

<p>Calling this method prepends to the existing buffer, even if the method has already been called previously:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)   <span class='comment'>#=&gt; #&lt;File:testfile&gt;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_ungetc'>ungetc</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ab</span><span class='tstring_end'>&quot;</span></span>)             <span class='comment'>#=&gt; nil
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_ungetc'>ungetc</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cd</span><span class='tstring_end'>&quot;</span></span>)             <span class='comment'>#=&gt; nil
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>(<span class='int'>5</span>)                  <span class='comment'>#=&gt; &quot;cdab8&quot;</span></code></pre>

<p>Has no effect with unbuffered reads (such as <a href="#sysread-instance_method" title="IO#sysread (method)">#sysread</a>).</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L4722-L4764'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4722' data-end='4764'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4722</span></pre>
<pre class='code cpp'>

VALUE
rb_io_ungetc(VALUE io, VALUE c)
{
    rb_io_t *fptr;
    long len;

    GetOpenFile(io, fptr);
    rb_io_check_char_readable(fptr);
    if (FIXNUM_P(c)) {
	c = rb_enc_uint_chr(FIX2UINT(c), io_read_encoding(fptr));
    }
    else if (RB_BIGNUM_TYPE_P(c)) {
	c = rb_enc_uint_chr(NUM2UINT(c), io_read_encoding(fptr));
    }
    else {
	SafeStringValue(c);
    }
    if (NEED_READCONV(fptr)) {
	SET_BINARY_MODE(fptr);
        len = RSTRING_LEN(c);
#if SIZEOF_LONG &gt; SIZEOF_INT
	if (len &gt; INT_MAX)
	    rb_raise(rb_eIOError, &quot;ungetc failed&quot;);
#endif
        make_readconv(fptr, (int)len);
        if (fptr-&gt;cbuf.capa - fptr-&gt;cbuf.len &lt; len)
            rb_raise(rb_eIOError, &quot;ungetc failed&quot;);
        if (fptr-&gt;cbuf.off &lt; len) {
            MEMMOVE(fptr-&gt;cbuf.ptr+fptr-&gt;cbuf.capa-fptr-&gt;cbuf.len,
                    fptr-&gt;cbuf.ptr+fptr-&gt;cbuf.off,
                    char, fptr-&gt;cbuf.len);
            fptr-&gt;cbuf.off = fptr-&gt;cbuf.capa-fptr-&gt;cbuf.len;
        }
        fptr-&gt;cbuf.off -= (int)len;
        fptr-&gt;cbuf.len += (int)len;
        MEMMOVE(fptr-&gt;cbuf.ptr+fptr-&gt;cbuf.off, RSTRING_PTR(c), char, len);
    }
    else {
	NEED_NEWLINE_DECORATOR_ON_READ_CHECK(fptr);
        io_ungetbyte(c, fptr);
    }
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="write-instance_method">
  <h3 class='signature '>
    #<strong>write</strong>(*objects)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes each of the given <code>objects</code> to <code>self</code>, which must be opened for writing (see <a href='#label-Modes'>Modes</a>); returns the total number bytes written; each of <code>objects</code> that is not a string is converted via method <code>to_s</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$stdout</span>.<span class='id identifier rubyid_write'>write</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Hello</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>World!</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; 14
</span><span class='gvar'>$stdout</span>.<span class='id identifier rubyid_write'>write</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bar'>bar</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>)          <span class='comment'># =&gt; 8</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Hello</span><span class='comma'>,</span> <span class='id identifier rubyid_World!'>World!</span>
<span class='id identifier rubyid_foobar2'>foobar2</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.c#L2050-L2060'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2050' data-end='2060'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2050</span></pre>
<pre class='code cpp'>

static VALUE
io_write_m(int argc, VALUE *argv, VALUE io)
{
    if (argc != 1) {
	return io_writev(argc, argv, io);
    }
    else {
	VALUE str = argv[0];
	return io_write(io, str, 0);
    }
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="write_nonblock-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>write_nonblock</strong>(string)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a> </span>
      <span class='overload'>#<strong>write_nonblock</strong>(string [, options])  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes the given string to <em>ios</em> using the write(2) system call after O_NONBLOCK is set for the underlying file descriptor.</p>

<p>It returns the number of bytes written.</p>

<p>write_nonblock just calls the write(2) system call. It causes all errors the write(2) system call causes: <code>Errno::EWOULDBLOCK</code>, <code>Errno::EINTR</code>, etc. The result may also be smaller than string.length (partial write). The caller should care such errors and partial write.</p>

<p>If the exception is <code>Errno::EWOULDBLOCK</code> or <code>Errno::EAGAIN</code>, it is extended by <a href="IO/WaitWritable.html" title="IO::WaitWritable (module)"><code>::IO::WaitWritable</code></a>. So <a href="IO/WaitWritable.html" title="IO::WaitWritable (module)"><code>::IO::WaitWritable</code></a> can be used to rescue the exceptions for retrying write_nonblock.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Creates a pipe.
</span><span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_w'>w</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>

<span class='comment'># write_nonblock writes only 65536 bytes and return 65536.
</span><span class='comment'># (The pipe size is 65536 bytes on this environment.)
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span> <span class='op'>*</span> <span class='int'>100000</span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_w'>w</span>.<span class='id identifier rubyid_write_nonblock'>write_nonblock</span>(<span class='id identifier rubyid_s'>s</span>)     <span class='comment'>#=&gt; 65536
</span>
<span class='comment'># write_nonblock cannot write a byte and raise EWOULDBLOCK (EAGAIN).
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_w'>w</span>.<span class='id identifier rubyid_write_nonblock'>write_nonblock</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span>)   <span class='comment'># Resource temporarily unavailable (Errno::EAGAIN)</span></code></pre>

<p>If the write buffer is not empty, it is flushed at first.</p>

<p>When write_nonblock raises an exception kind of <a href="IO/WaitWritable.html" title="IO::WaitWritable (module)"><code>::IO::WaitWritable</code></a>, write_nonblock should not be called until io is writable for avoiding busy loop. This can be done as follows.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>begin</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_write_nonblock'>write_nonblock</span>(<span class='id identifier rubyid_string'>string</span>)
<span class='kw'>rescue</span> <span class='const'>IO</span><span class='op'>::</span><span class='const'><a href="IO/WaitWritable.html" title="IO::WaitWritable (module)">WaitWritable</a></span><span class='comma'>,</span> <span class='const'><a href="Errno.html" title="Errno (module)">Errno</a></span><span class='op'>::</span><span class='const'>EINTR</span>
  <span class='const'>IO</span>.<span class='id identifier rubyid_select'><a href="#select-class_method" title="IO.select (method)">select</a></span>(<span class='kw'>nil</span><span class='comma'>,</span> [<span class='id identifier rubyid_io'>io</span>])
  <span class='kw'>retry</span>
<span class='kw'>end</span></code></pre>

<p>Note that this doesn’t guarantee to write all data in string. The length written is reported as result and it should be checked later.</p>

<p>On some platforms such as Windows, write_nonblock is not supported according to the kind of the <code>IO</code> object. In such cases, write_nonblock raises <code>Errno::EBADF</code>.</p>

<p>By specifying a keyword argument <em>exception</em> to <code>false</code>, you can indicate that write_nonblock should not raise an <a href="IO/WaitWritable.html" title="IO::WaitWritable (module)"><code>::IO::WaitWritable</code></a> exception, but return the symbol <code>:wait_writable</code> instead.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_7/io.rb#L120-L122'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='120' data-end='122'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.rb', line 120</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_write_nonblock'>write_nonblock</span>(<span class='id identifier rubyid_buf'>buf</span><span class='comma'>,</span> <span class='label'>exception:</span> <span class='kw'>true</span>)
  <span class='const'>Primitive</span>.<span class='id identifier rubyid_io_write_nonblock'>io_write_nonblock</span>(<span class='id identifier rubyid_buf'>buf</span><span class='comma'>,</span> <span class='id identifier rubyid_exception'>exception</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>