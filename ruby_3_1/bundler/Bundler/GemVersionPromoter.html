<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Bundler::GemVersionPromoter &mdash; bundler  Ruby-3.1.5 p252</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Bundler::GemVersionPromoter",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Ruby-3.1.5</a> &raquo; 
      <a href='../'>bundler</a> &raquo; 
      <a href='../_index.html#alpha_G'>Index (G)</a> &raquo; 
        <a href="../Bundler.html" title="Bundler (module)">Bundler</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>GemVersionPromoter&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Bundler::GemVersionPromoter</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'>Object</span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_5/lib/bundler/gem_version_promoter.rb#L9'>lib/bundler/gem_version_promoter.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>This class contains all of the logic for determining the next version of a <a href="../Gem.html" title="Gem (module)"><code>::Gem</code></a> to update to based on the requested level (patch, minor, major). Primarily designed to work with <a href="Resolver.html" title="Bundler::Resolver (class)"><code>Resolver</code></a> which will provide it the list of available dependency versions as found in its index, before returning it to to the resolution engine to select the best version.</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='DEBUG-constant' class='summary_signature'>DEBUG =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_5/lib/bundler/gem_version_promoter.rb#L10-L10'># File 'lib/bundler/gem_version_promoter.rb', line 10</a>    <pre class='code ruby'><span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BUNDLER_DEBUG_RESOLVER</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>||</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DEBUG_RESOLVER</span><span class='tstring_end'>&quot;</span></span>]</pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(locked_specs = SpecSet.new([]), unlock_gems = [])  &#x21d2; GemVersionPromoter </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Given a list of locked_specs and a list of gems to unlock creates a <code>GemVersionPromoter</code> instance.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#level-instance_method" title="#level (instance method)">#<strong>level</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#level=-instance_method" title="#level= (instance method)">#<strong>level=</strong>(value)  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#locked_specs-instance_method" title="#locked_specs (instance method)">#<strong>locked_specs</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#major%3F-instance_method" title="#major? (instance method)">#<strong>major?</strong>  &#x21d2; bool </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#minor%3F-instance_method" title="#minor? (instance method)">#<strong>minor?</strong>  &#x21d2; bool </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#prerelease_specified-instance_method" title="#prerelease_specified (instance method)">#<strong>prerelease_specified</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#strict-instance_method" title="#strict (instance method)">#<strong>strict</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>By default, strict is false, meaning every available version of a gem is returned from sort_versions.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#unlock_gems-instance_method" title="#unlock_gems (instance method)">#<strong>unlock_gems</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro priv'>
      <a href="#unlocking_gem%3F-instance_method" title="#unlocking_gem? (instance method)">#<strong>unlocking_gem?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='note title private'>private</span>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#reset-instance_method" title="#reset (instance method)">#<strong>reset</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#sort_versions-instance_method" title="#sort_versions (instance method)">#<strong>sort_versions</strong>(dep, spec_groups)  &#x21d2; Specification </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Given a <a href="Dependency.html" title="Bundler::Dependency (class)"><code>Dependency</code></a> and an Array of Specifications of available versions for a gem, this method will return the Array of Specifications sorted (and possibly truncated if strict is true) in an order to give preference to the current level (:major, <code>:minor</code> or <code>:patch</code>) when resolution is deciding what versions best resolve all dependencies in the bundle.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#either_version_older_than_locked-instance_method" title="#either_version_older_than_locked (instance method)">#<strong>either_version_older_than_locked</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#filter_dep_specs-instance_method" title="#filter_dep_specs (instance method)">#<strong>filter_dep_specs</strong>(spec_groups, locked_spec)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#move_version_to_end-instance_method" title="#move_version_to_end (instance method)">#<strong>move_version_to_end</strong>(result, version)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#post_sort-instance_method" title="#post_sort (instance method)">#<strong>post_sort</strong>(result)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Specific version moves can’t always reliably be done during sorting as not all elements are compared against each other.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#segments_do_not_match-instance_method" title="#segments_do_not_match (instance method)">#<strong>segments_do_not_match</strong>(level)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#sort_dep_specs-instance_method" title="#sort_dep_specs (instance method)">#<strong>sort_dep_specs</strong>(spec_groups, locked_spec)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(locked_specs = SpecSet.new([]), unlock_gems = [])  &#x21d2; <code>GemVersionPromoter</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Given a list of locked_specs and a list of gems to unlock creates a <code>GemVersionPromoter</code> instance.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>locked_specs</span>
    <span class='type'>(<a href="SpecSet.html" title="Bundler::SpecSet (class)">SpecSet</a>)</span>
    <em class='default'>(defaults to: <tt>SpecSet.new([])</tt>)</em>
&mdash;    <div class='inline'>
<p>All current locked specs. Unlike Definition where this list is empty if all gems are being updated, this should always be populated for all gems so this class can properly function.</p>
</div>
  </li>
  <li>
    <span class='name'>unlock_gems</span>
    <span class='type'>(<code>String</code>)</span>
    <em class='default'>(defaults to: <tt>[]</tt>)</em>
&mdash;    <div class='inline'>
<p>List of gem names being unlocked. If empty, all gems will be considered unlocked.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_5/lib/bundler/gem_version_promoter.rb#L38-L45'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='38' data-end='45'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/gem_version_promoter.rb', line 38</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_locked_specs'><a href="#locked_specs-instance_method" title="Bundler::GemVersionPromoter#locked_specs (method)">locked_specs</a></span> <span class='op'>=</span> <span class='const'><a href="SpecSet.html" title="Bundler::SpecSet (class)">SpecSet</a></span>.<span class='id identifier rubyid_new'><a href="SpecSet.html#new-class_method" title="Bundler::SpecSet.new (method)">new</a></span>([])<span class='comma'>,</span> <span class='id identifier rubyid_unlock_gems'><a href="#unlock_gems-instance_method" title="Bundler::GemVersionPromoter#unlock_gems (method)">unlock_gems</a></span> <span class='op'>=</span> [])
  <span class='ivar'>@level</span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_major'>major</span>
  <span class='ivar'>@strict</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@locked_specs</span> <span class='op'>=</span> <span class='id identifier rubyid_locked_specs'><a href="#locked_specs-instance_method" title="Bundler::GemVersionPromoter#locked_specs (method)">locked_specs</a></span>
  <span class='ivar'>@unlock_gems</span> <span class='op'>=</span> <span class='id identifier rubyid_unlock_gems'><a href="#unlock_gems-instance_method" title="Bundler::GemVersionPromoter#unlock_gems (method)">unlock_gems</a></span>
  <span class='ivar'>@sort_versions</span> <span class='op'>=</span> {}
  <span class='ivar'>@prerelease_specified</span> <span class='op'>=</span> {}
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="level-instance_method">
  <h3 class='signature rw first'>
    #<strong>level</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_5/lib/bundler/gem_version_promoter.rb#L12-L12'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='12' data-end='12'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/gem_version_promoter.rb', line 12</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_level'>level</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_locked_specs'><a href="#locked_specs-instance_method" title="Bundler::GemVersionPromoter#locked_specs (method)">locked_specs</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_unlock_gems'><a href="#unlock_gems-instance_method" title="Bundler::GemVersionPromoter#unlock_gems (method)">unlock_gems</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="level=-instance_method">
  <h3 class='signature rw'>
    #<strong>level=</strong>(value)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>value</span>
    <span class='type'>(<code>Symbol</code>)</span>
&mdash;    <div class='inline'>
<p>One of three Symbols: <code>:major</code>, <code>:minor</code> or <code>:patch</code>.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_5/lib/bundler/gem_version_promoter.rb#L48-L56'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='48' data-end='56'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/gem_version_promoter.rb', line 48</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_level='>level=</span>(<span class='id identifier rubyid_value'>value</span>)
  <span class='id identifier rubyid_v'>v</span> <span class='op'>=</span> <span class='kw'>case</span> <span class='id identifier rubyid_value'>value</span>
      <span class='kw'>when</span> <span class='const'>String</span><span class='comma'>,</span> <span class='const'>Symbol</span>
        <span class='id identifier rubyid_value'>value</span>.<span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unexpected level </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_v'>v</span><span class='embexpr_end'>}</span><span class='tstring_content'>. Must be :major, :minor or :patch</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_major'>major</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_minor'>minor</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_patch'>patch</span>].<span class='id identifier rubyid_include?'>include?</span>(<span class='id identifier rubyid_v'>v</span>)
  <span class='ivar'>@level</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="locked_specs-instance_method">
  <h3 class='signature ro'>
    #<strong>locked_specs</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_5/lib/bundler/gem_version_promoter.rb#L12-L12'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='12' data-end='12'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/gem_version_promoter.rb', line 12</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_level'><a href="#level-instance_method" title="Bundler::GemVersionPromoter#level (method)">level</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_locked_specs'>locked_specs</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_unlock_gems'><a href="#unlock_gems-instance_method" title="Bundler::GemVersionPromoter#unlock_gems (method)">unlock_gems</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="major?-instance_method">
  <h3 class='signature ro'>
    #<strong>major?</strong>  &#x21d2; <code>bool</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>bool</code>)</span>
&mdash;    <div class='inline'>
<p>Convenience method for testing value of level variable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_5/lib/bundler/gem_version_promoter.rb#L89-L91'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='89' data-end='91'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/gem_version_promoter.rb', line 89</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_major?'>major?</span>
  <span class='id identifier rubyid_level'><a href="#level-instance_method" title="Bundler::GemVersionPromoter#level (method)">level</a></span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_major'>major</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="minor?-instance_method">
  <h3 class='signature ro'>
    #<strong>minor?</strong>  &#x21d2; <code>bool</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>bool</code>)</span>
&mdash;    <div class='inline'>
<p>Convenience method for testing value of level variable.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_5/lib/bundler/gem_version_promoter.rb#L94-L96'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='94' data-end='96'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/gem_version_promoter.rb', line 94</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_minor?'>minor?</span>
  <span class='id identifier rubyid_level'><a href="#level-instance_method" title="Bundler::GemVersionPromoter#level (method)">level</a></span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_minor'>minor</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="prerelease_specified-instance_method">
  <h3 class='signature rw'>
    #<strong>prerelease_specified</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_5/lib/bundler/gem_version_promoter.rb#L27-L27'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='27' data-end='27'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/gem_version_promoter.rb', line 27</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_prerelease_specified'>prerelease_specified</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="strict-instance_method">
  <h3 class='signature rw'>
    #<strong>strict</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>By default, strict is false, meaning every available version of a gem is returned from sort_versions. The order gives preference to the requested level (:patch, <code>:minor</code>, <code>:major</code>) but in complicated requirement cases some gems will by necessity by promoted past the requested level, or even reverted to older versions.</p>

<p>If strict is set to true, the results from sort_versions will be truncated, eliminating any version outside the current level scope. This can lead to unexpected outcomes or even <a href="VersionConflict.html" title="Bundler::VersionConflict (class)"><code>VersionConflict</code></a> exceptions that report a version of a gem not existing for versions that indeed do existing in the referenced source.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_5/lib/bundler/gem_version_promoter.rb#L25-L25'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='25' data-end='25'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/gem_version_promoter.rb', line 25</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_strict'>strict</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="unlock_gems-instance_method">
  <h3 class='signature ro'>
    #<strong>unlock_gems</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_5/lib/bundler/gem_version_promoter.rb#L12-L12'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='12' data-end='12'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/gem_version_promoter.rb', line 12</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_level'><a href="#level-instance_method" title="Bundler::GemVersionPromoter#level (method)">level</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_locked_specs'><a href="#locked_specs-instance_method" title="Bundler::GemVersionPromoter#locked_specs (method)">locked_specs</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_unlock_gems'>unlock_gems</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="unlocking_gem?-instance_method">
  <h3 class='signature ro priv'>
    #<strong>unlocking_gem?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_5/lib/bundler/gem_version_promoter.rb#L158-L160'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='158' data-end='160'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/gem_version_promoter.rb', line 158</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_unlocking_gem?'>unlocking_gem?</span>
  <span class='id identifier rubyid_unlock_gems'><a href="#unlock_gems-instance_method" title="Bundler::GemVersionPromoter#unlock_gems (method)">unlock_gems</a></span>.<span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>||</span> (<span class='ivar'>@gem_name</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_unlock_gems'><a href="#unlock_gems-instance_method" title="Bundler::GemVersionPromoter#unlock_gems (method)">unlock_gems</a></span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='ivar'>@gem_name</span>))
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="either_version_older_than_locked-instance_method">
  <h3 class='signature priv first'>
    #<strong>either_version_older_than_locked</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_5/lib/bundler/gem_version_promoter.rb#L149-L151'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='149' data-end='151'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/gem_version_promoter.rb', line 149</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_either_version_older_than_locked'>either_version_older_than_locked</span>
  <span class='ivar'>@locked_version</span> <span class='op'>&amp;&amp;</span> (<span class='ivar'>@a_ver</span> <span class='op'>&lt;</span> <span class='ivar'>@locked_version</span> <span class='op'>||</span> <span class='ivar'>@b_ver</span> <span class='op'>&lt;</span> <span class='ivar'>@locked_version</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="filter_dep_specs-instance_method">
  <h3 class='signature priv'>
    #<strong>filter_dep_specs</strong>(spec_groups, locked_spec)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_5/lib/bundler/gem_version_promoter.rb#L100-L116'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='100' data-end='116'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/gem_version_promoter.rb', line 100</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_filter_dep_specs'>filter_dep_specs</span>(<span class='id identifier rubyid_spec_groups'>spec_groups</span><span class='comma'>,</span> <span class='id identifier rubyid_locked_spec'>locked_spec</span>)
  <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='id identifier rubyid_spec_groups'>spec_groups</span>.<span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_spec_group'>spec_group</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_locked_spec'>locked_spec</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_major?'><a href="#major%3F-instance_method" title="Bundler::GemVersionPromoter#major? (method)">major?</a></span>
      <span class='id identifier rubyid_gsv'>gsv</span> <span class='op'>=</span> <span class='id identifier rubyid_spec_group'>spec_group</span>.<span class='id identifier rubyid_version'>version</span>
      <span class='id identifier rubyid_lsv'>lsv</span> <span class='op'>=</span> <span class='id identifier rubyid_locked_spec'>locked_spec</span>.<span class='id identifier rubyid_version'>version</span>

      <span class='id identifier rubyid_must_match'>must_match</span> <span class='op'>=</span> <span class='id identifier rubyid_minor?'><a href="#minor%3F-instance_method" title="Bundler::GemVersionPromoter#minor? (method)">minor?</a></span> <span class='op'>?</span> [<span class='int'>0</span>] <span class='op'>:</span> [<span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span>]

      <span class='id identifier rubyid_matches'>matches</span> <span class='op'>=</span> <span class='id identifier rubyid_must_match'>must_match</span>.<span class='id identifier rubyid_map'>map</span> {<span class='op'>|</span><span class='id identifier rubyid_idx'>idx</span><span class='op'>|</span> <span class='id identifier rubyid_gsv'>gsv</span>.<span class='id identifier rubyid_segments'>segments</span>[<span class='id identifier rubyid_idx'>idx</span>] <span class='op'>==</span> <span class='id identifier rubyid_lsv'>lsv</span>.<span class='id identifier rubyid_segments'>segments</span>[<span class='id identifier rubyid_idx'>idx</span>] }
      <span class='id identifier rubyid_matches'>matches</span>.<span class='id identifier rubyid_uniq'>uniq</span> <span class='op'>==</span> [<span class='kw'>true</span>] <span class='op'>?</span> (<span class='id identifier rubyid_gsv'>gsv</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_lsv'>lsv</span>) <span class='op'>:</span> <span class='kw'>false</span>
    <span class='kw'>else</span>
      <span class='kw'>true</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_sort_dep_specs'><a href="#sort_dep_specs-instance_method" title="Bundler::GemVersionPromoter#sort_dep_specs (method)">sort_dep_specs</a></span>(<span class='id identifier rubyid_res'>res</span><span class='comma'>,</span> <span class='id identifier rubyid_locked_spec'>locked_spec</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="move_version_to_end-instance_method">
  <h3 class='signature priv'>
    #<strong>move_version_to_end</strong>(result, version)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_5/lib/bundler/gem_version_promoter.rb#L174-L177'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='174' data-end='177'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/gem_version_promoter.rb', line 174</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_move_version_to_end'>move_version_to_end</span>(<span class='id identifier rubyid_result'>result</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span>)
  <span class='id identifier rubyid_move'>move</span><span class='comma'>,</span> <span class='id identifier rubyid_keep'>keep</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_partition'>partition</span> {<span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_version'>version</span>.<span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>==</span> <span class='id identifier rubyid_version'>version</span>.<span class='id identifier rubyid_to_s'>to_s</span> }
  <span class='id identifier rubyid_keep'>keep</span>.<span class='id identifier rubyid_concat'>concat</span>(<span class='id identifier rubyid_move'>move</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="post_sort-instance_method">
  <h3 class='signature priv'>
    #<strong>post_sort</strong>(result)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Specific version moves can’t always reliably be done during sorting as not all elements are compared against each other.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_5/lib/bundler/gem_version_promoter.rb#L164-L172'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='164' data-end='172'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/gem_version_promoter.rb', line 164</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_post_sort'>post_sort</span>(<span class='id identifier rubyid_result'>result</span>)
  <span class='comment'># default :major behavior in Bundler does not do this
</span>  <span class='kw'>return</span> <span class='id identifier rubyid_result'>result</span> <span class='kw'>if</span> <span class='id identifier rubyid_major?'><a href="#major%3F-instance_method" title="Bundler::GemVersionPromoter#major? (method)">major?</a></span>
  <span class='kw'>if</span> <span class='id identifier rubyid_unlocking_gem?'><a href="#unlocking_gem%3F-instance_method" title="Bundler::GemVersionPromoter#unlocking_gem? (method)">unlocking_gem?</a></span> <span class='op'>||</span> <span class='ivar'>@locked_version</span>.<span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_result'>result</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_move_version_to_end'><a href="#move_version_to_end-instance_method" title="Bundler::GemVersionPromoter#move_version_to_end (method)">move_version_to_end</a></span>(<span class='id identifier rubyid_result'>result</span><span class='comma'>,</span> <span class='ivar'>@locked_version</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="reset-instance_method">
  <h3 class='signature '>
    #<strong>reset</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_5/lib/bundler/gem_version_promoter.rb#L84-L86'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='84' data-end='86'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/gem_version_promoter.rb', line 84</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_reset'>reset</span>
  <span class='ivar'>@sort_versions</span> <span class='op'>=</span> {}
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="segments_do_not_match-instance_method">
  <h3 class='signature priv'>
    #<strong>segments_do_not_match</strong>(level)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_5/lib/bundler/gem_version_promoter.rb#L153-L156'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='153' data-end='156'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/gem_version_promoter.rb', line 153</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_segments_do_not_match'>segments_do_not_match</span>(<span class='id identifier rubyid_level'><a href="#level-instance_method" title="Bundler::GemVersionPromoter#level (method)">level</a></span>)
  <span class='id identifier rubyid_index'>index</span> <span class='op'>=</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_major'>major</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_minor'>minor</span>].<span class='id identifier rubyid_index'>index</span>(<span class='id identifier rubyid_level'><a href="#level-instance_method" title="Bundler::GemVersionPromoter#level (method)">level</a></span>)
  <span class='ivar'>@a_ver</span>.<span class='id identifier rubyid_segments'>segments</span>[<span class='id identifier rubyid_index'>index</span>] <span class='op'>!=</span> <span class='ivar'>@b_ver</span>.<span class='id identifier rubyid_segments'>segments</span>[<span class='id identifier rubyid_index'>index</span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sort_dep_specs-instance_method">
  <h3 class='signature priv'>
    #<strong>sort_dep_specs</strong>(spec_groups, locked_spec)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_5/lib/bundler/gem_version_promoter.rb#L118-L147'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='118' data-end='147'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/gem_version_promoter.rb', line 118</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_sort_dep_specs'>sort_dep_specs</span>(<span class='id identifier rubyid_spec_groups'>spec_groups</span><span class='comma'>,</span> <span class='id identifier rubyid_locked_spec'>locked_spec</span>)
  <span class='ivar'>@locked_version</span> <span class='op'>=</span> <span class='id identifier rubyid_locked_spec'>locked_spec</span><span class='op'>&amp;.</span><span class='id identifier rubyid_version'>version</span>
  <span class='ivar'>@gem_name</span> <span class='op'>=</span> <span class='id identifier rubyid_locked_spec'>locked_spec</span><span class='op'>&amp;.</span><span class='id identifier rubyid_name'>name</span>

  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_spec_groups'>spec_groups</span>.<span class='id identifier rubyid_sort'>sort</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
    <span class='ivar'>@a_ver</span> <span class='op'>=</span> <span class='id identifier rubyid_a'>a</span>.<span class='id identifier rubyid_version'>version</span>
    <span class='ivar'>@b_ver</span> <span class='op'>=</span> <span class='id identifier rubyid_b'>b</span>.<span class='id identifier rubyid_version'>version</span>

    <span class='kw'>unless</span> <span class='ivar'>@gem_name</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@prerelease_specified</span>[<span class='ivar'>@gem_name</span>]
      <span class='id identifier rubyid_a_pre'>a_pre</span> <span class='op'>=</span> <span class='ivar'>@a_ver</span>.<span class='id identifier rubyid_prerelease?'>prerelease?</span>
      <span class='id identifier rubyid_b_pre'>b_pre</span> <span class='op'>=</span> <span class='ivar'>@b_ver</span>.<span class='id identifier rubyid_prerelease?'>prerelease?</span>

      <span class='kw'>next</span> <span class='op'>-</span><span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_a_pre'>a_pre</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_b_pre'>b_pre</span>
      <span class='kw'>next</span>  <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_b_pre'>b_pre</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_a_pre'>a_pre</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_major?'><a href="#major%3F-instance_method" title="Bundler::GemVersionPromoter#major? (method)">major?</a></span>
      <span class='ivar'>@a_ver</span> <span class='op'>&lt;=&gt;</span> <span class='ivar'>@b_ver</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_either_version_older_than_locked'><a href="#either_version_older_than_locked-instance_method" title="Bundler::GemVersionPromoter#either_version_older_than_locked (method)">either_version_older_than_locked</a></span>
      <span class='ivar'>@a_ver</span> <span class='op'>&lt;=&gt;</span> <span class='ivar'>@b_ver</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_segments_do_not_match'><a href="#segments_do_not_match-instance_method" title="Bundler::GemVersionPromoter#segments_do_not_match (method)">segments_do_not_match</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_major'>major</span>)
      <span class='ivar'>@b_ver</span> <span class='op'>&lt;=&gt;</span> <span class='ivar'>@a_ver</span>
    <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_minor?'><a href="#minor%3F-instance_method" title="Bundler::GemVersionPromoter#minor? (method)">minor?</a></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_segments_do_not_match'><a href="#segments_do_not_match-instance_method" title="Bundler::GemVersionPromoter#segments_do_not_match (method)">segments_do_not_match</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_minor'>minor</span>)
      <span class='ivar'>@b_ver</span> <span class='op'>&lt;=&gt;</span> <span class='ivar'>@a_ver</span>
    <span class='kw'>else</span>
      <span class='ivar'>@a_ver</span> <span class='op'>&lt;=&gt;</span> <span class='ivar'>@b_ver</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_post_sort'><a href="#post_sort-instance_method" title="Bundler::GemVersionPromoter#post_sort (method)">post_sort</a></span>(<span class='id identifier rubyid_result'>result</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sort_versions-instance_method">
  <h3 class='signature '>
    #<strong>sort_versions</strong>(dep, spec_groups)  &#x21d2; <code>Specification</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Given a <a href="Dependency.html" title="Bundler::Dependency (class)"><code>Dependency</code></a> and an Array of Specifications of available versions for a gem, this method will return the Array of Specifications sorted (and possibly truncated if strict is true) in an order to give preference to the current level (:major, <code>:minor</code> or <code>:patch</code>) when resolution is deciding what versions best resolve all dependencies in the bundle.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>dep</span>
    <span class='type'>(<a href="Dependency.html" title="Bundler::Dependency (class)">Dependency</a>)</span>
&mdash;    <div class='inline'>
<p>The Dependency of the gem.</p>
</div>
  </li>
  <li>
    <span class='name'>spec_groups</span>
    <span class='type'>(<code>Specification</code>)</span>
&mdash;    <div class='inline'>
<p>An array of Specifications for the same gem named in the @dep param.</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Specification</code>)</span>
&mdash;    <div class='inline'>
<p>A new instance of the Specification Array sorted and possibly filtered.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_1_5/lib/bundler/gem_version_promoter.rb#L68-L82'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='68' data-end='82'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/gem_version_promoter.rb', line 68</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_sort_versions'>sort_versions</span>(<span class='id identifier rubyid_dep'>dep</span><span class='comma'>,</span> <span class='id identifier rubyid_spec_groups'>spec_groups</span>)
  <span class='ivar'>@sort_versions</span>[<span class='id identifier rubyid_dep'>dep</span>] <span class='op'>||=</span> <span class='kw'>begin</span>
    <span class='id identifier rubyid_gem_name'>gem_name</span> <span class='op'>=</span> <span class='id identifier rubyid_dep'>dep</span>.<span class='id identifier rubyid_name'>name</span>

    <span class='comment'># An Array per version returned, different entries for different platforms.
</span>    <span class='comment'># We only need the version here so it&#39;s ok to hard code this to the first instance.
</span>    <span class='id identifier rubyid_locked_spec'>locked_spec</span> <span class='op'>=</span> <span class='id identifier rubyid_locked_specs'><a href="#locked_specs-instance_method" title="Bundler::GemVersionPromoter#locked_specs (method)">locked_specs</a></span>[<span class='id identifier rubyid_gem_name'>gem_name</span>].<span class='id identifier rubyid_first'>first</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_strict'><a href="#strict-instance_method" title="Bundler::GemVersionPromoter#strict (method)">strict</a></span>
      <span class='id identifier rubyid_filter_dep_specs'><a href="#filter_dep_specs-instance_method" title="Bundler::GemVersionPromoter#filter_dep_specs (method)">filter_dep_specs</a></span>(<span class='id identifier rubyid_spec_groups'>spec_groups</span><span class='comma'>,</span> <span class='id identifier rubyid_locked_spec'>locked_spec</span>)
    <span class='kw'>else</span>
      <span class='id identifier rubyid_sort_dep_specs'><a href="#sort_dep_specs-instance_method" title="Bundler::GemVersionPromoter#sort_dep_specs (method)">sort_dep_specs</a></span>(<span class='id identifier rubyid_spec_groups'>spec_groups</span><span class='comma'>,</span> <span class='id identifier rubyid_locked_spec'>locked_spec</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>