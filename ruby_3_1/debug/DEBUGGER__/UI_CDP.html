<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: DEBUGGER__::UI_CDP &mdash; debug  Ruby-3.1.7 p261</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "DEBUGGER__::UI_CDP",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Ruby-3.1.7</a> &raquo; 
      <a href='../'>debug</a> &raquo; 
      <a href='../_index.html#alpha_U'>Index (U)</a> &raquo; 
        <a href="../DEBUGGER__.html" title="DEBUGGER__ (module)">DEBUGGER__</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>UI_CDP&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: DEBUGGER__::UI_CDP</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="UI_CDP/WebSocketUtils.html" title="DEBUGGER__::UI_CDP::WebSocketUtils (module)"><code>WebSocketUtils</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a href="UI_CDP/WebSocketClient.html" title="DEBUGGER__::UI_CDP::WebSocketClient (class)"><code>WebSocketClient</code></a>,
        <a href="UI_CDP/WebSocketServer.html" title="DEBUGGER__::UI_CDP::WebSocketServer (class)"><code>WebSocketServer</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Exceptions:</div>
      <div class='box_11'>
          <a href="UI_CDP/Detach.html" title="DEBUGGER__::UI_CDP::Detach (class)"><code>Detach</code></a>      </div>
    </td></tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/debug/blob/v1.6.3/lib/debug/server_cdp.rb#L12'>lib/debug/server_cdp.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='INVALID_REQUEST-constant' class='summary_signature'>INVALID_REQUEST =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/debug/blob/v1.6.3/lib/debug/server_cdp.rb#L328-L328'># File 'lib/debug/server_cdp.rb', line 328</a>    <pre class='code ruby'><span class='op'>-</span><span class='int'>32600</span></pre>
  </li>
  <li>
    <span id='SHOW_PROTOCOL-constant' class='summary_signature'>SHOW_PROTOCOL =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/debug/blob/v1.6.3/lib/debug/server_cdp.rb#L13-L13'># File 'lib/debug/server_cdp.rb', line 13</a>    <pre class='code ruby'><span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RUBY_DEBUG_CDP_SHOW_PROTOCOL</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span></pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#get_chrome_path-class_method" title=".get_chrome_path (class method)">.<strong>get_chrome_path</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#run_new_chrome-class_method" title=".run_new_chrome (class method)">.<strong>run_new_chrome</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#setup_chrome-class_method" title=".setup_chrome (class method)">.<strong>setup_chrome</strong>(addr)  </a>
    </span>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#activate_bp-instance_method" title="#activate_bp (instance method)">#<strong>activate_bp</strong>(bps)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#cleanup_reader-instance_method" title="#cleanup_reader (instance method)">#<strong>cleanup_reader</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#deactivate_bp-instance_method" title="#deactivate_bp (instance method)">#<strong>deactivate_bp</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#del_bp-instance_method" title="#del_bp (instance method)">#<strong>del_bp</strong>(bps, k)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#fire_event-instance_method" title="#fire_event (instance method)">#<strong>fire_event</strong>(event, **result)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#get_source_code-instance_method" title="#get_source_code (instance method)">#<strong>get_source_code</strong>(path)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#process-instance_method" title="#process (instance method)">#<strong>process</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#puts-instance_method" title="#puts (instance method)">#<strong>puts</strong>(result)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#readline-instance_method" title="#readline (instance method)">#<strong>readline</strong>(prompt)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Called by the SESSION thread.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#respond-instance_method" title="#respond (instance method)">#<strong>respond</strong>(req, **result)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#respond_fail-instance_method" title="#respond_fail (instance method)">#<strong>respond_fail</strong>(req, **result)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#send_event-instance_method" title="#send_event (instance method)">#<strong>send_event</strong>(method, **params)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#send_fail_response-instance_method" title="#send_fail_response (instance method)">#<strong>send_fail_response</strong>(req, **res)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#send_response-instance_method" title="#send_response (instance method)">#<strong>send_response</strong>(req, **res)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#sock-instance_method" title="#sock (instance method)">#<strong>sock</strong>(skip: false) {|$stderr| ... } </a>
    </span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="get_chrome_path-class_method">
  <h3 class='signature  first'>
    .<strong>get_chrome_path</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.6.3/lib/debug/server_cdp.rb#L66-L80'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='66' data-end='80'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 66</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_get_chrome_path'>get_chrome_path</span>
  <span class='kw'>return</span> <span class='const'><a href="../DEBUGGER__.html#CONFIG-constant" title="DEBUGGER__::CONFIG (constant)">CONFIG</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_chrome_path'>chrome_path</span>] <span class='kw'>if</span> <span class='const'><a href="../DEBUGGER__.html#CONFIG-constant" title="DEBUGGER__::CONFIG (constant)">CONFIG</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_chrome_path'>chrome_path</span>]

  <span class='comment'># The process to check OS is based on `selenium` project.
</span>  <span class='kw'>case</span> <span class='const'>RbConfig</span><span class='op'>::</span><span class='const'><a href="../DEBUGGER__.html#CONFIG-constant" title="DEBUGGER__::CONFIG (constant)">CONFIG</a></span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>host_os</span><span class='tstring_end'>&#39;</span></span>]
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>mswin|msys|mingw|cygwin|emc</span><span class='regexp_end'>/</span></span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>C:\Program Files (x86)\Google\Chrome\Application\chrome.exe</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>darwin|mac os</span><span class='regexp_end'>/</span></span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>linux</span><span class='regexp_end'>/</span></span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>google-chrome</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unsupported OS</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="run_new_chrome-class_method">
  <h3 class='signature '>
    .<strong>run_new_chrome</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.6.3/lib/debug/server_cdp.rb#L82-L102'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='82' data-end='102'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 82</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_run_new_chrome'>run_new_chrome</span>
  <span class='id identifier rubyid_dir'>dir</span> <span class='op'>=</span> <span class='const'>Dir</span>.<span class='id identifier rubyid_mktmpdir'>mktmpdir</span>
  <span class='comment'># The command line flags are based on: https://developer.mozilla.org/en-US/docs/Tools/Remote_Debugging/Chrome_Desktop#connecting
</span>  <span class='id identifier rubyid_stdin'>stdin</span><span class='comma'>,</span> <span class='id identifier rubyid_stdout'>stdout</span><span class='comma'>,</span> <span class='id identifier rubyid_stderr'>stderr</span><span class='comma'>,</span> <span class='id identifier rubyid_wait_thr'>wait_thr</span> <span class='op'>=</span> <span class='op'>*</span><span class='const'>Open3</span>.<span class='id identifier rubyid_popen3'>popen3</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_get_chrome_path'><a href="#get_chrome_path-class_method" title="DEBUGGER__::UI_CDP.get_chrome_path (method)">get_chrome_path</a></span><span class='embexpr_end'>}</span><span class='tstring_content'> --remote-debugging-port=0 --no-first-run --no-default-browser-check --user-data-dir=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_dir'>dir</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>)
  <span class='id identifier rubyid_stdin'>stdin</span>.<span class='id identifier rubyid_close'>close</span>
  <span class='id identifier rubyid_stdout'>stdout</span>.<span class='id identifier rubyid_close'>close</span>

  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_stderr'>stderr</span>.<span class='id identifier rubyid_readpartial'>readpartial</span> <span class='int'>4096</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_match'>match</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>DevTools listening on ws:\/\/127.0.0.1:(\d+)(.*)</span><span class='regexp_end'>/</span></span>
    <span class='id identifier rubyid_port'>port</span> <span class='op'>=</span> <span class='backref'>$1</span>
    <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='backref'>$2</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_stderr'>stderr</span>.<span class='id identifier rubyid_close'>close</span>

  <span class='id identifier rubyid_at_exit'>at_exit</span>{
    <span class='const'><a href="../DEBUGGER__.html#CONFIG-constant" title="DEBUGGER__::CONFIG (constant)">CONFIG</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_skip_path'>skip_path</span>] <span class='op'>=</span> [<span class='tstring'><span class='regexp_beg'>/</span><span class='regexp_end'>/</span></span>] <span class='comment'># skip all
</span>    <span class='const'>FileUtils</span>.<span class='id identifier rubyid_rm_rf'>rm_rf</span> <span class='id identifier rubyid_dir'>dir</span>
  }

  [<span class='id identifier rubyid_port'>port</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_wait_thr'>wait_thr</span>.<span class='id identifier rubyid_pid'>pid</span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setup_chrome-class_method">
  <h3 class='signature '>
    .<strong>setup_chrome</strong>(addr)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.6.3/lib/debug/server_cdp.rb#L16-L64'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='16' data-end='64'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 16</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_setup_chrome'>setup_chrome</span> <span class='id identifier rubyid_addr'>addr</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='const'><a href="../DEBUGGER__.html#CONFIG-constant" title="DEBUGGER__::CONFIG (constant)">CONFIG</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_chrome_path'>chrome_path</span>] <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>

  <span class='id identifier rubyid_port'>port</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_pid'>pid</span> <span class='op'>=</span> <span class='id identifier rubyid_run_new_chrome'><a href="#run_new_chrome-class_method" title="DEBUGGER__::UI_CDP.run_new_chrome (method)">run_new_chrome</a></span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='const'>Socket</span>.<span class='id identifier rubyid_tcp'>tcp</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>127.0.0.1</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_port'>port</span>
  <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ECONNREFUSED</span><span class='comma'>,</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>EADDRNOTAVAIL</span>
    <span class='kw'>return</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_ws_client'>ws_client</span> <span class='op'>=</span> <span class='const'><a href="UI_CDP/WebSocketClient.html" title="DEBUGGER__::UI_CDP::WebSocketClient (class)">WebSocketClient</a></span>.<span class='id identifier rubyid_new'><a href="UI_CDP/WebSocketClient.html#new-class_method" title="DEBUGGER__::UI_CDP::WebSocketClient.new (method)">new</a></span>(<span class='id identifier rubyid_s'>s</span>)
  <span class='id identifier rubyid_ws_client'>ws_client</span>.<span class='id identifier rubyid_handshake'>handshake</span> <span class='id identifier rubyid_port'>port</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span>
  <span class='id identifier rubyid_ws_client'>ws_client</span>.<span class='id identifier rubyid_send'>send</span> <span class='label'>id:</span> <span class='int'>1</span><span class='comma'>,</span> <span class='label'>method:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Target.getTargets</span><span class='tstring_end'>&#39;</span></span>

  <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='id identifier rubyid_ws_client'>ws_client</span>.<span class='id identifier rubyid_extract_data'>extract_data</span>
    <span class='kw'>case</span>
    <span class='kw'>when</span> <span class='id identifier rubyid_res'>res</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>==</span> <span class='int'>1</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_target_info'>target_info</span> <span class='op'>=</span> <span class='id identifier rubyid_res'>res</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>result</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>targetInfos</span><span class='tstring_end'>&#39;</span></span>)
      <span class='id identifier rubyid_page'>page</span> <span class='op'>=</span> <span class='id identifier rubyid_target_info'>target_info</span>.<span class='id identifier rubyid_find'>find</span>{<span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span> <span class='id identifier rubyid_t'>t</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>type</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>page</span><span class='tstring_end'>&#39;</span></span>}
      <span class='id identifier rubyid_ws_client'>ws_client</span>.<span class='id identifier rubyid_send'>send</span> <span class='label'>id:</span> <span class='int'>2</span><span class='comma'>,</span> <span class='label'>method:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Target.attachToTarget</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                    <span class='label'>params:</span> {
                      <span class='label'>targetId:</span> <span class='id identifier rubyid_page'>page</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>targetId</span><span class='tstring_end'>&#39;</span></span>]<span class='comma'>,</span>
                      <span class='label'>flatten:</span> <span class='kw'>true</span>
                    }
    <span class='kw'>when</span> <span class='id identifier rubyid_res'>res</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>==</span> <span class='int'>2</span>
      <span class='id identifier rubyid_s_id'>s_id</span> <span class='op'>=</span> <span class='id identifier rubyid_res'>res</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>result</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sessionId</span><span class='tstring_end'>&#39;</span></span>)
      <span class='id identifier rubyid_ws_client'>ws_client</span>.<span class='id identifier rubyid_send'>send</span> <span class='label'>sessionId:</span> <span class='id identifier rubyid_s_id'>s_id</span><span class='comma'>,</span> <span class='label'>id:</span> <span class='int'>3</span><span class='comma'>,</span>
                    <span class='label'>method:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Page.enable</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>when</span> <span class='id identifier rubyid_res'>res</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>==</span> <span class='int'>3</span>
      <span class='id identifier rubyid_s_id'>s_id</span> <span class='op'>=</span> <span class='id identifier rubyid_res'>res</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sessionId</span><span class='tstring_end'>&#39;</span></span>]
      <span class='id identifier rubyid_ws_client'>ws_client</span>.<span class='id identifier rubyid_send'>send</span> <span class='label'>sessionId:</span> <span class='id identifier rubyid_s_id'>s_id</span><span class='comma'>,</span> <span class='label'>id:</span> <span class='int'>4</span><span class='comma'>,</span>
                    <span class='label'>method:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Page.getFrameTree</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>when</span> <span class='id identifier rubyid_res'>res</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>==</span> <span class='int'>4</span>
      <span class='id identifier rubyid_s_id'>s_id</span> <span class='op'>=</span> <span class='id identifier rubyid_res'>res</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sessionId</span><span class='tstring_end'>&#39;</span></span>]
      <span class='id identifier rubyid_f_id'>f_id</span> <span class='op'>=</span> <span class='id identifier rubyid_res'>res</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>result</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>frameTree</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>frame</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span>)
      <span class='id identifier rubyid_ws_client'>ws_client</span>.<span class='id identifier rubyid_send'>send</span> <span class='label'>sessionId:</span> <span class='id identifier rubyid_s_id'>s_id</span><span class='comma'>,</span> <span class='label'>id:</span> <span class='int'>5</span><span class='comma'>,</span>
                    <span class='label'>method:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Page.navigate</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                    <span class='label'>params:</span> {
                      <span class='label'>url:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>devtools://devtools/bundled/inspector.html?v8only=true&amp;panel=sources&amp;ws=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_addr'>addr</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='const'>SecureRandom</span>.<span class='id identifier rubyid_uuid'>uuid</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                      <span class='label'>frameId:</span> <span class='id identifier rubyid_f_id'>f_id</span>
                    }
    <span class='kw'>when</span> <span class='id identifier rubyid_res'>res</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>method</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Page.loadEventFired</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>break</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_pid'>pid</span>
<span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ENOENT</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="activate_bp-instance_method">
  <h3 class='signature  first'>
    #<strong>activate_bp</strong>(bps)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.6.3/lib/debug/server_cdp.rb#L507-L517'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='507' data-end='517'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 507</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_activate_bp'>activate_bp</span> <span class='id identifier rubyid_bps'>bps</span>
  <span class='id identifier rubyid_bps'>bps</span>.<span class='id identifier rubyid_each_key'>each_key</span>{<span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_k'>k</span>.<span class='id identifier rubyid_match'>match</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\d:(\d):(.*)</span><span class='regexp_end'>/</span></span>
      <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='backref'>$1</span>
      <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='backref'>$2</span>
      <span class='const'>SESSION</span>.<span class='id identifier rubyid_add_line_breakpoint'><a href="../DEBUGGER__.html#add_line_breakpoint-class_method" title="DEBUGGER__.add_line_breakpoint (method)">add_line_breakpoint</a></span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_line'>line</span>.<span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>+</span> <span class='int'>1</span>)
    <span class='kw'>else</span>
      <span class='const'>SESSION</span>.<span class='id identifier rubyid_add_catch_breakpoint'><a href="../DEBUGGER__.html#add_catch_breakpoint-class_method" title="DEBUGGER__.add_catch_breakpoint (method)">add_catch_breakpoint</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Exception</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>
  }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="cleanup_reader-instance_method">
  <h3 class='signature '>
    #<strong>cleanup_reader</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.6.3/lib/debug/server_cdp.rb#L524-L527'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='524' data-end='527'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 524</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_cleanup_reader'>cleanup_reader</span>
  <span class='kw'>super</span>
  <span class='const'><a href="../Process.html" title="Process (module)">Process</a></span>.<span class='id identifier rubyid_kill'>kill</span> <span class='symbeg'>:</span><span class='const'>KILL</span><span class='comma'>,</span> <span class='ivar'>@chrome_pid</span> <span class='kw'>if</span> <span class='ivar'>@chrome_pid</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="deactivate_bp-instance_method">
  <h3 class='signature '>
    #<strong>deactivate_bp</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.6.3/lib/debug/server_cdp.rb#L519-L522'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='519' data-end='522'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 519</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_deactivate_bp'>deactivate_bp</span>
  <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>del</span><span class='tstring_end'>&#39;</span></span>
  <span class='ivar'>@q_ans</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>y</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="del_bp-instance_method">
  <h3 class='signature '>
    #<strong>del_bp</strong>(bps, k)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.6.3/lib/debug/server_cdp.rb#L490-L497'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='490' data-end='497'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 490</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_del_bp'>del_bp</span> <span class='id identifier rubyid_bps'>bps</span><span class='comma'>,</span> <span class='id identifier rubyid_k'>k</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_bps'>bps</span> <span class='kw'>unless</span> <span class='id identifier rubyid_idx'>idx</span> <span class='op'>=</span> <span class='id identifier rubyid_bps'>bps</span>[<span class='id identifier rubyid_k'>k</span>]

  <span class='id identifier rubyid_bps'>bps</span>.<span class='id identifier rubyid_delete'>delete</span> <span class='id identifier rubyid_k'>k</span>
  <span class='id identifier rubyid_bps'>bps</span>.<span class='id identifier rubyid_each_key'>each_key</span>{<span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_bps'>bps</span>[<span class='id identifier rubyid_i'>i</span>] <span class='op'>-=</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_bps'>bps</span>[<span class='id identifier rubyid_i'>i</span>] <span class='op'>&gt;</span> <span class='id identifier rubyid_idx'>idx</span>}
  <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>del </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_idx'>idx</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_bps'>bps</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fire_event-instance_method">
  <h3 class='signature '>
    #<strong>fire_event</strong>(event, **result)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.6.3/lib/debug/server_cdp.rb#L545-L551'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='545' data-end='551'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 545</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_fire_event'>fire_event</span> <span class='id identifier rubyid_event'>event</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_result'>result</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_send_event'><a href="#send_event-instance_method" title="DEBUGGER__::UI_CDP#send_event (method)">send_event</a></span> <span class='id identifier rubyid_event'>event</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_send_event'><a href="#send_event-instance_method" title="DEBUGGER__::UI_CDP#send_event (method)">send_event</a></span> <span class='id identifier rubyid_event'>event</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_result'>result</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="get_source_code-instance_method">
  <h3 class='signature '>
    #<strong>get_source_code</strong>(path)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.6.3/lib/debug/server_cdp.rb#L499-L505'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='499' data-end='505'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 499</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_get_source_code'>get_source_code</span> <span class='id identifier rubyid_path'>path</span>
  <span class='kw'>return</span> <span class='ivar'>@src_map</span>[<span class='id identifier rubyid_path'>path</span>] <span class='kw'>if</span> <span class='ivar'>@src_map</span>[<span class='id identifier rubyid_path'>path</span>]

  <span class='id identifier rubyid_src'>src</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span>(<span class='id identifier rubyid_path'>path</span>)
  <span class='ivar'>@src_map</span>[<span class='id identifier rubyid_path'>path</span>] <span class='op'>=</span> <span class='id identifier rubyid_src'>src</span>
  <span class='id identifier rubyid_src'>src</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="process-instance_method">
  <h3 class='signature '>
    #<strong>process</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.6.3/lib/debug/server_cdp.rb#L330-L488'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='330' data-end='488'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 330</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_process'>process</span>
  <span class='id identifier rubyid_bps'>bps</span> <span class='op'>=</span> {}
  <span class='ivar'>@src_map</span> <span class='op'>=</span> {}
  <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='ivar'>@ws_server</span>.<span class='id identifier rubyid_extract_data'>extract_data</span>

    <span class='kw'>case</span> <span class='id identifier rubyid_req'>req</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>method</span><span class='tstring_end'>&#39;</span></span>]

    <span class='comment'>## boot/configuration
</span>    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.getScriptSource</span><span class='tstring_end'>&#39;</span></span>
      <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_req'>req</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.enable</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span>
      <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_req'>req</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Runtime.enable</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span>
      <span class='id identifier rubyid_send_event'><a href="#send_event-instance_method" title="DEBUGGER__::UI_CDP#send_event (method)">send_event</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Runtime.executionContextCreated</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                  <span class='label'>context:</span> {
                    <span class='label'>id:</span> <span class='const'>SecureRandom</span>.<span class='id identifier rubyid_hex'>hex</span>(<span class='int'>16</span>)<span class='comma'>,</span>
                    <span class='label'>origin:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://</span><span class='embexpr_beg'>#{</span><span class='ivar'>@local_addr</span>.<span class='id identifier rubyid_inspect_sockaddr'>inspect_sockaddr</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                    <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
                  }
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Runtime.getIsolateId</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span><span class='comma'>,</span>
                    <span class='label'>id:</span> <span class='const'>SecureRandom</span>.<span class='id identifier rubyid_hex'>hex</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Runtime.terminateExecution</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span>
      <span class='id identifier rubyid_exit'>exit</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Page.startScreencast</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Emulation.setTouchEmulationEnabled</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Emulation.setEmitTouchEventsForMouse</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Runtime.compileScript</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Page.getResourceContent</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Overlay.setPausedInDebuggerMessage</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Runtime.releaseObjectGroup</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Runtime.discardConsoleEntries</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Log.clear</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Runtime.runIfWaitingForDebugger</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span>

    <span class='comment'>## control
</span>    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.resume</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span>
      <span class='id identifier rubyid_send_event'><a href="#send_event-instance_method" title="DEBUGGER__::UI_CDP#send_event (method)">send_event</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.resumed</span><span class='tstring_end'>&#39;</span></span>
      <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>c</span><span class='tstring_end'>&#39;</span></span>
      <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_req'>req</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.stepOver</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>begin</span>
        <span class='ivar'>@session</span>.<span class='id identifier rubyid_check_postmortem'>check_postmortem</span>
        <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span>
        <span class='id identifier rubyid_send_event'><a href="#send_event-instance_method" title="DEBUGGER__::UI_CDP#send_event (method)">send_event</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.resumed</span><span class='tstring_end'>&#39;</span></span>
        <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>n</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>rescue</span> <span class='const'><a href="PostmortemError.html" title="DEBUGGER__::PostmortemError (class)">PostmortemError</a></span>
        <span class='id identifier rubyid_send_fail_response'><a href="#send_fail_response-instance_method" title="DEBUGGER__::UI_CDP#send_fail_response (method)">send_fail_response</a></span> <span class='id identifier rubyid_req'>req</span><span class='comma'>,</span>
                          <span class='label'>code:</span> <span class='const'><a href="#INVALID_REQUEST-constant" title="DEBUGGER__::UI_CDP::INVALID_REQUEST (constant)">INVALID_REQUEST</a></span><span class='comma'>,</span>
                          <span class='label'>message:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&#39;stepOver&#39; is not supported while postmortem mode</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>ensure</span>
        <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_req'>req</span>
      <span class='kw'>end</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.stepInto</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>begin</span>
        <span class='ivar'>@session</span>.<span class='id identifier rubyid_check_postmortem'>check_postmortem</span>
        <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span>
        <span class='id identifier rubyid_send_event'><a href="#send_event-instance_method" title="DEBUGGER__::UI_CDP#send_event (method)">send_event</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.resumed</span><span class='tstring_end'>&#39;</span></span>
        <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>s</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>rescue</span> <span class='const'><a href="PostmortemError.html" title="DEBUGGER__::PostmortemError (class)">PostmortemError</a></span>
        <span class='id identifier rubyid_send_fail_response'><a href="#send_fail_response-instance_method" title="DEBUGGER__::UI_CDP#send_fail_response (method)">send_fail_response</a></span> <span class='id identifier rubyid_req'>req</span><span class='comma'>,</span>
                          <span class='label'>code:</span> <span class='const'><a href="#INVALID_REQUEST-constant" title="DEBUGGER__::UI_CDP::INVALID_REQUEST (constant)">INVALID_REQUEST</a></span><span class='comma'>,</span>
                          <span class='label'>message:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&#39;stepInto&#39; is not supported while postmortem mode</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>ensure</span>
        <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_req'>req</span>
      <span class='kw'>end</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.stepOut</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>begin</span>
        <span class='ivar'>@session</span>.<span class='id identifier rubyid_check_postmortem'>check_postmortem</span>
        <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span>
        <span class='id identifier rubyid_send_event'><a href="#send_event-instance_method" title="DEBUGGER__::UI_CDP#send_event (method)">send_event</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.resumed</span><span class='tstring_end'>&#39;</span></span>
        <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fin</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>rescue</span> <span class='const'><a href="PostmortemError.html" title="DEBUGGER__::PostmortemError (class)">PostmortemError</a></span>
        <span class='id identifier rubyid_send_fail_response'><a href="#send_fail_response-instance_method" title="DEBUGGER__::UI_CDP#send_fail_response (method)">send_fail_response</a></span> <span class='id identifier rubyid_req'>req</span><span class='comma'>,</span>
                          <span class='label'>code:</span> <span class='const'><a href="#INVALID_REQUEST-constant" title="DEBUGGER__::UI_CDP::INVALID_REQUEST (constant)">INVALID_REQUEST</a></span><span class='comma'>,</span>
                          <span class='label'>message:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&#39;stepOut&#39; is not supported while postmortem mode</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>ensure</span>
        <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_req'>req</span>
      <span class='kw'>end</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.setSkipAllPauses</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_skip'>skip</span> <span class='op'>=</span> <span class='id identifier rubyid_req'>req</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>skip</span><span class='tstring_end'>&#39;</span></span>)
      <span class='kw'>if</span> <span class='id identifier rubyid_skip'>skip</span>
        <span class='id identifier rubyid_deactivate_bp'><a href="#deactivate_bp-instance_method" title="DEBUGGER__::UI_CDP#deactivate_bp (method)">deactivate_bp</a></span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_activate_bp'><a href="#activate_bp-instance_method" title="DEBUGGER__::UI_CDP#activate_bp (method)">activate_bp</a></span> <span class='id identifier rubyid_bps'>bps</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span>

    <span class='comment'># breakpoint
</span>    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.getPossibleBreakpoints</span><span class='tstring_end'>&#39;</span></span>
      <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_req'>req</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.setBreakpointByUrl</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='id identifier rubyid_req'>req</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lineNumber</span><span class='tstring_end'>&#39;</span></span>)
      <span class='kw'>if</span> <span class='id identifier rubyid_regexp'>regexp</span> <span class='op'>=</span> <span class='id identifier rubyid_req'>req</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>urlRegex</span><span class='tstring_end'>&#39;</span></span>)
        <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='id identifier rubyid_regexp'>regexp</span>.<span class='id identifier rubyid_match'>match</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(.*)\|</span><span class='regexp_end'>/</span></span>)[<span class='int'>1</span>].<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>)
        <span class='id identifier rubyid_cond'>cond</span> <span class='op'>=</span> <span class='id identifier rubyid_req'>req</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>condition</span><span class='tstring_end'>&#39;</span></span>)
        <span class='id identifier rubyid_src'>src</span> <span class='op'>=</span> <span class='id identifier rubyid_get_source_code'><a href="#get_source_code-instance_method" title="DEBUGGER__::UI_CDP#get_source_code (method)">get_source_code</a></span> <span class='id identifier rubyid_path'>path</span>
        <span class='id identifier rubyid_end_line'>end_line</span> <span class='op'>=</span> <span class='id identifier rubyid_src'>src</span>.<span class='id identifier rubyid_lines'>lines</span>.<span class='id identifier rubyid_count'>count</span>
        <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='id identifier rubyid_end_line'>end_line</span>  <span class='kw'>if</span> <span class='id identifier rubyid_line'>line</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_end_line'>end_line</span>
        <span class='id identifier rubyid_b_id'>b_id</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_line'>line</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_regexp'>regexp</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>if</span> <span class='id identifier rubyid_cond'>cond</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
          <span class='const'>SESSION</span>.<span class='id identifier rubyid_add_line_breakpoint'><a href="../DEBUGGER__.html#add_line_breakpoint-class_method" title="DEBUGGER__.add_line_breakpoint (method)">add_line_breakpoint</a></span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_line'>line</span> <span class='op'>+</span> <span class='int'>1</span><span class='comma'>,</span> <span class='label'>cond:</span> <span class='id identifier rubyid_cond'>cond</span>)
        <span class='kw'>else</span>
          <span class='const'>SESSION</span>.<span class='id identifier rubyid_add_line_breakpoint'><a href="../DEBUGGER__.html#add_line_breakpoint-class_method" title="DEBUGGER__.add_line_breakpoint (method)">add_line_breakpoint</a></span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_line'>line</span> <span class='op'>+</span> <span class='int'>1</span>)
        <span class='kw'>end</span>
        <span class='id identifier rubyid_bps'>bps</span>[<span class='id identifier rubyid_b_id'>b_id</span>] <span class='op'>=</span> <span class='id identifier rubyid_bps'>bps</span>.<span class='id identifier rubyid_size'>size</span>
        <span class='comment'># Because we need to return scriptId, responses are returned in SESSION thread.
</span>        <span class='id identifier rubyid_req'>req</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span>][<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>scriptId</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span>
        <span class='id identifier rubyid_req'>req</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span>][<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lineNumber</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='id identifier rubyid_line'>line</span>
        <span class='id identifier rubyid_req'>req</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span>][<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>breakpointId</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='id identifier rubyid_b_id'>b_id</span>
        <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_req'>req</span>
      <span class='kw'>elsif</span> <span class='id identifier rubyid_url'>url</span> <span class='op'>=</span> <span class='id identifier rubyid_req'>req</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>url</span><span class='tstring_end'>&#39;</span></span>)
        <span class='id identifier rubyid_b_id'>b_id</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_line'>line</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_url'>url</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span><span class='comma'>,</span>
                      <span class='label'>breakpointId:</span> <span class='id identifier rubyid_b_id'>b_id</span><span class='comma'>,</span>
                      <span class='label'>locations:</span> []
      <span class='kw'>elsif</span> <span class='id identifier rubyid_hash'>hash</span> <span class='op'>=</span> <span class='id identifier rubyid_req'>req</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>scriptHash</span><span class='tstring_end'>&#39;</span></span>)
        <span class='id identifier rubyid_b_id'>b_id</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_line'>line</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_hash'>hash</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span><span class='comma'>,</span>
                      <span class='label'>breakpointId:</span> <span class='id identifier rubyid_b_id'>b_id</span><span class='comma'>,</span>
                      <span class='label'>locations:</span> []
      <span class='kw'>else</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Unsupported</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.removeBreakpoint</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_b_id'>b_id</span> <span class='op'>=</span> <span class='id identifier rubyid_req'>req</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>breakpointId</span><span class='tstring_end'>&#39;</span></span>)
      <span class='id identifier rubyid_bps'>bps</span> <span class='op'>=</span> <span class='id identifier rubyid_del_bp'><a href="#del_bp-instance_method" title="DEBUGGER__::UI_CDP#del_bp (method)">del_bp</a></span> <span class='id identifier rubyid_bps'>bps</span><span class='comma'>,</span> <span class='id identifier rubyid_b_id'>b_id</span>
      <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.setBreakpointsActive</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_active'>active</span> <span class='op'>=</span> <span class='id identifier rubyid_req'>req</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>active</span><span class='tstring_end'>&#39;</span></span>)
      <span class='kw'>if</span> <span class='id identifier rubyid_active'>active</span>
        <span class='id identifier rubyid_activate_bp'><a href="#activate_bp-instance_method" title="DEBUGGER__::UI_CDP#activate_bp (method)">activate_bp</a></span> <span class='id identifier rubyid_bps'>bps</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_deactivate_bp'><a href="#deactivate_bp-instance_method" title="DEBUGGER__::UI_CDP#deactivate_bp (method)">deactivate_bp</a></span> <span class='comment'># TODO: Change this part because catch breakpoints should not be deactivated.
</span>      <span class='kw'>end</span>
      <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.setPauseOnExceptions</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_state'>state</span> <span class='op'>=</span> <span class='id identifier rubyid_req'>req</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>state</span><span class='tstring_end'>&#39;</span></span>)
      <span class='id identifier rubyid_ex'>ex</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Exception</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>case</span> <span class='id identifier rubyid_state'>state</span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>none</span><span class='tstring_end'>&#39;</span></span>
        <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>config postmortem = false</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_bps'>bps</span> <span class='op'>=</span> <span class='id identifier rubyid_del_bp'><a href="#del_bp-instance_method" title="DEBUGGER__::UI_CDP#del_bp (method)">del_bp</a></span> <span class='id identifier rubyid_bps'>bps</span><span class='comma'>,</span> <span class='id identifier rubyid_ex'>ex</span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>uncaught</span><span class='tstring_end'>&#39;</span></span>
        <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>config postmortem = true</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_bps'>bps</span> <span class='op'>=</span> <span class='id identifier rubyid_del_bp'><a href="#del_bp-instance_method" title="DEBUGGER__::UI_CDP#del_bp (method)">del_bp</a></span> <span class='id identifier rubyid_bps'>bps</span><span class='comma'>,</span> <span class='id identifier rubyid_ex'>ex</span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>all</span><span class='tstring_end'>&#39;</span></span>
        <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>config postmortem = false</span><span class='tstring_end'>&#39;</span></span>
        <span class='const'>SESSION</span>.<span class='id identifier rubyid_add_catch_breakpoint'><a href="../DEBUGGER__.html#add_catch_breakpoint-class_method" title="DEBUGGER__.add_catch_breakpoint (method)">add_catch_breakpoint</a></span> <span class='id identifier rubyid_ex'>ex</span>
        <span class='id identifier rubyid_bps'>bps</span>[<span class='id identifier rubyid_ex'>ex</span>] <span class='op'>=</span> <span class='id identifier rubyid_bps'>bps</span>.<span class='id identifier rubyid_size'>size</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span>

    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.evaluateOnCallFrame</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Runtime.getProperties</span><span class='tstring_end'>&#39;</span></span>
      <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_req'>req</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>rescue</span> <span class='const'><a href="UI_CDP/Detach.html" title="DEBUGGER__::UI_CDP::Detach (class)">Detach</a></span>
  <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>continue</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="puts-instance_method">
  <h3 class='signature '>
    #<strong>puts</strong>(result)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.6.3/lib/debug/server_cdp.rb#L557-L560'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='557' data-end='560'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 557</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_result'>result</span>
  <span class='comment'># STDERR.puts &quot;puts: #{result}&quot;
</span>  <span class='comment'># send_event &#39;output&#39;, category: &#39;stderr&#39;, output: &quot;PUTS!!: &quot; + result.to_s
</span><span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="readline-instance_method">
  <h3 class='signature '>
    #<strong>readline</strong>(prompt)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Called by the SESSION thread</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.6.3/lib/debug/server_cdp.rb#L531-L535'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='531' data-end='535'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 531</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_readline'>readline</span> <span class='id identifier rubyid_prompt'>prompt</span>
  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>c</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='ivar'>@q_msg</span>

  <span class='ivar'>@q_msg</span>.<span class='id identifier rubyid_pop'>pop</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>kill!</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="respond-instance_method">
  <h3 class='signature '>
    #<strong>respond</strong>(req, **result)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.6.3/lib/debug/server_cdp.rb#L537-L539'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='537' data-end='539'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 537</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_respond'>respond</span> <span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_result'>result</span>
  <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="respond_fail-instance_method">
  <h3 class='signature '>
    #<strong>respond_fail</strong>(req, **result)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.6.3/lib/debug/server_cdp.rb#L541-L543'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='541' data-end='543'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 541</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_respond_fail'>respond_fail</span> <span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_result'>result</span>
  <span class='id identifier rubyid_send_fail_response'><a href="#send_fail_response-instance_method" title="DEBUGGER__::UI_CDP#send_fail_response (method)">send_fail_response</a></span> <span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="send_event-instance_method">
  <h3 class='signature '>
    #<strong>send_event</strong>(method, **params)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.6.3/lib/debug/server_cdp.rb#L320-L326'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='320' data-end='326'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 320</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_send_event'>send_event</span> <span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_params'>params</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_params'>params</span>.<span class='id identifier rubyid_empty?'>empty?</span>
    <span class='ivar'>@ws_server</span>.<span class='id identifier rubyid_send'>send</span> <span class='label'>method:</span> <span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='label'>params:</span> {}
  <span class='kw'>else</span>
    <span class='ivar'>@ws_server</span>.<span class='id identifier rubyid_send'>send</span> <span class='label'>method:</span> <span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='label'>params:</span> <span class='id identifier rubyid_params'>params</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="send_fail_response-instance_method">
  <h3 class='signature '>
    #<strong>send_fail_response</strong>(req, **res)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.6.3/lib/debug/server_cdp.rb#L316-L318'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='316' data-end='318'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 316</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_send_fail_response'>send_fail_response</span> <span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_res'>res</span>
  <span class='ivar'>@ws_server</span>.<span class='id identifier rubyid_send'>send</span> <span class='label'>id:</span> <span class='id identifier rubyid_req'>req</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span>]<span class='comma'>,</span> <span class='label'>error:</span> <span class='id identifier rubyid_res'>res</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="send_response-instance_method">
  <h3 class='signature '>
    #<strong>send_response</strong>(req, **res)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.6.3/lib/debug/server_cdp.rb#L308-L314'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='308' data-end='314'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 308</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_send_response'>send_response</span> <span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_res'>res</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_res'>res</span>.<span class='id identifier rubyid_empty?'>empty?</span>
    <span class='ivar'>@ws_server</span>.<span class='id identifier rubyid_send'>send</span> <span class='label'>id:</span> <span class='id identifier rubyid_req'>req</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span>]<span class='comma'>,</span> <span class='label'>result:</span> {}
  <span class='kw'>else</span>
    <span class='ivar'>@ws_server</span>.<span class='id identifier rubyid_send'>send</span> <span class='label'>id:</span> <span class='id identifier rubyid_req'>req</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span>]<span class='comma'>,</span> <span class='label'>result:</span> <span class='id identifier rubyid_res'>res</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sock-instance_method">
  <h3 class='signature '>
    #<strong>sock</strong>(skip: false) {|$stderr| ... } 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Yields:</p>
<ul class='yield'>
  <li>
    <span class='type'>($<code>stderr</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.6.3/lib/debug/server_cdp.rb#L553-L555'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='553' data-end='555'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 553</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_sock'>sock</span> <span class='label'>skip:</span> <span class='kw'>false</span>
  <span class='kw'>yield</span> <span class='gvar'>$stderr</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>