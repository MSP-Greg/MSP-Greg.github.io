<!DOCTYPE html>
<html>
<head>

<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>File: RBS By Example &mdash; rbs  Ruby-3.1.5 p252</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "rbs_by_example",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../.'>Ruby-3.1.5</a> &raquo; 
      <a href='.'>rbs</a> &raquo; 
      <a href='_index.html'>Index</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>File: RBS By Example&nbsp;&#x25B2;</a></span>
          </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='file'>
<h1><a href="RBS.html" title="RBS (module)"><code>RBS</code></a> By Example</h1>

<h2>Goal</h2>

<p>The purpose of this doc is to teach you how to write <a href="RBS.html" title="RBS (module)"><code>RBS</code></a> signatures by using the standard library&#39;s methods as a guide.</p>

<h2>Examples</h2>

<h3>Zero argument methods</h3>

<p><strong>Example:</strong> <code>String#empty?</code></p>

<pre class="code ruby"><code class="ruby"><span class='comment'># .rb
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_empty?'>empty?</span>
<span class='comment'># =&gt; true
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_empty?'>empty?</span>
<span class='comment'># =&gt; false</span></code></pre>

<pre class="code ruby"><code class="ruby"><span class='comment'># .rbs
</span><span class='kw'>class</span> <span class='const'>String</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_empty?'>empty?</span><span class='op'>:</span> () <span class='tlambda'>-&gt;</span> <span class='id identifier rubyid_bool'>bool</span>
<span class='kw'>end</span></code></pre>

<p><code>String</code>&#39;s <code>#empty</code> method takes no parameters, and returns a boolean value</p>

<h3>Single argument methods</h3>

<p><strong>Example:</strong> <code>String#include?</code></p>

<pre class="code ruby"><code class="ruby"><span class='comment'># .rb
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>homeowner</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>house</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'># =&gt; false
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>homeowner</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_include?'>include?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>meow</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'># =&gt; true</span></code></pre>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>String</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_include?'>include?</span><span class='op'>:</span> (<span class='const'>String</span>) <span class='tlambda'>-&gt;</span> <span class='id identifier rubyid_bool'>bool</span>
<span class='kw'>end</span></code></pre>

<p><code>String</code>&#39;s <code>include?</code> method takes one argument, a <code>String</code>, and returns a
boolean value</p>

<h3>Variable argument methods</h3>

<p><strong>Example:</strong> <code>String#end_with?</code></p>

<pre class="code ruby"><code class="ruby"><span class='comment'># .rb
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello?</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_end_with?'>end_with?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>!</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'># =&gt; false
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello?</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_end_with?'>end_with?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>?</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'># =&gt; true
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello?</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_end_with?'>end_with?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>?</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>!</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'># =&gt; true
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello?</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_end_with?'>end_with?</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>!</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'># =&gt; false</span></code></pre>

<pre class="code ruby"><code class="ruby"><span class='comment'># .rbs
</span><span class='kw'>class</span> <span class='const'>String</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_end_with?'>end_with?</span><span class='op'>:</span> (<span class='op'>*</span><span class='const'>String</span>) <span class='tlambda'>-&gt;</span> <span class='id identifier rubyid_bool'>bool</span>
<span class='kw'>end</span></code></pre>

<p><code>String</code>&#39;s <code>#end_with?</code> method takes any number of <code>String</code> arguments, and
returns a boolean value.</p>

<h3>Optional positional arguments</h3>

<p><strong>Example:</strong> <code>String#ljust</code></p>

<pre class="code ruby"><code class="ruby"><span class='comment'># .rb
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_ljust'>ljust</span>(<span class='int'>4</span>)
<span class='comment'>#=&gt; &quot;hello&quot;
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_ljust'>ljust</span>(<span class='int'>20</span>)
<span class='comment'>#=&gt; &quot;hello               &quot;
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_ljust'>ljust</span>(<span class='int'>20</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1234</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'>#=&gt; &quot;hello123412341234123&quot;</span></code></pre>

<pre class="code ruby"><code class="ruby"><span class='comment'># .rbs
</span><span class='kw'>class</span> <span class='const'>String</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_ljust'>ljust</span><span class='op'>:</span> (<span class='const'>Integer</span><span class='comma'>,</span> <span class='op'>?</span><span class='const'>String</span>) <span class='tlambda'>-&gt;</span> <span class='const'>String</span>
<span class='kw'>end</span></code></pre>

<p><code>String</code>&#39;s <code>ljust</code> takes one <code>Integer</code> argument, and an optional <code>String</code> argument, indicated by the the <code>?</code> prefix marker. It returns a <code>String</code>.</p>

<h3>Multiple signatures for a single method</h3>

<p><strong>Example:</strong> <code>Array#*</code></p>

<pre class="code ruby"><code class="ruby"><span class='comment'># .rb
</span>[<span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span>] <span class='op'>*</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span>
<span class='comment'># =&gt; &quot;1,2,3&quot;
</span>[<span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span>] <span class='op'>*</span> <span class='int'>2</span>
<span class='comment'># =&gt; [1, 2, 3, 1, 2, 3]</span></code></pre>

<p><em>Note:</em> Some of the signatures after this point include type variables (e.g. <code>Elem</code>, <code>T</code>).
For now, it&#39;s safe to ignore them, but they&#39;re included for completeness.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># .rbs
</span><span class='kw'>class</span> <span class='const'>Array</span>[<span class='const'>Elem</span>]
  <span class='kw'>def</span> <span class='op'>*</span><span class='op'>:</span> (<span class='const'>String</span>) <span class='tlambda'>-&gt;</span> <span class='const'>String</span>
       <span class='op'>|</span> (<span class='const'>Integer</span>) <span class='tlambda'>-&gt;</span> <span class='const'>Array</span>[<span class='const'>Elem</span>]
<span class='kw'>end</span></code></pre>

<p><code>Array</code>&#39;s <code>*</code> method, when given a <code>String</code> returns a <code>String</code>. When given an
<code>Integer</code>, it returns an <code>Array</code> of the same contained type <code>Elem</code> (in our example case, <code>Elem</code> corresponds to <code>Integer</code>).</p>

<h3>Union types</h3>

<p><strong>Example:</strong> <code>String#<<</code></p>

<pre class="code ruby"><code class="ruby"><span class='comment'># .rb
</span><span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello </span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_a'>a</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>world</span><span class='tstring_end'>&quot;</span></span>
<span class='comment'>#=&gt; &quot;hello world&quot;
</span><span class='id identifier rubyid_a'>a</span> <span class='op'>&lt;&lt;</span> <span class='int'>33</span>
<span class='comment'>#=&gt; &quot;hello world!&quot;</span></code></pre>

<pre class="code ruby"><code class="ruby"><span class='comment'># .rbs
</span><span class='kw'>class</span> <span class='const'>String</span>
  <span class='kw'>def</span> <span class='op'>&lt;&lt;</span><span class='op'>:</span> (<span class='const'>String</span> <span class='op'>|</span> <span class='const'>Integer</span>) <span class='tlambda'>-&gt;</span> <span class='const'>String</span>
<span class='kw'>end</span></code></pre>

<p><code>String</code>&#39;s <code>&lt;&lt;</code> operator takes either a <code>String</code> or an <code>Integer</code>, and returns a <code>String</code>.</p>

<h3>Nilable types</h3>

<pre class="code ruby"><code class="ruby"><span class='comment'># .rb
</span>[<span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span>].<span class='id identifier rubyid_first'>first</span>
<span class='comment'># =&gt; 1
</span>[].<span class='id identifier rubyid_first'>first</span>
<span class='comment'># =&gt; nil
</span>[<span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span>].<span class='id identifier rubyid_first'>first</span>(<span class='int'>2</span>)
<span class='comment'># =&gt; [1, 2]
</span>[].<span class='id identifier rubyid_first'>first</span>(<span class='int'>2</span>)
<span class='comment'># =&gt; []</span></code></pre>

<pre class="code ruby"><code class="ruby"><span class='comment'># .rbs
</span><span class='kw'>class</span> <span class='const'>Enumerable</span>[<span class='const'>Elem</span>]
  <span class='kw'>def</span> <span class='id identifier rubyid_first'>first</span><span class='op'>:</span> () <span class='tlambda'>-&gt;</span> <span class='id identifier rubyid_Elem?'>Elem?</span>
           <span class='op'>|</span> (<span class='const'>Integer</span>) <span class='tlambda'>-&gt;</span> <span class='const'>Array</span>[<span class='const'>Elem</span>]
<span class='kw'>end</span></code></pre>

<p><code>Enumerable</code>&#39;s <code>#first</code> method has two different signatures.</p>

<p>When called with no arguments, the return value will either be an instance of
whatever type is contained in the enumerable, or <code>nil</code>. We represent that with
the type variable <code>Elem</code>, and the <code>?</code> suffix nilable marker.</p>

<p>When called with an <code>Integer</code> positional argument, the return value will be an
<code>Array</code> of whatever type is contained.</p>

<p>The <code>?</code> syntax is a convenient shorthand for a union with nil. An equivalent union type woould be <code>(Elem | nil)</code>.</p>

<h3>Keyword Arguments</h3>

<p><strong>Example</strong>: <code>String#lines</code></p>

<pre class="code ruby"><code class="ruby"><span class='comment'># .rb
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello\nworld\n</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_lines'>lines</span>
<span class='comment'># =&gt; [&quot;hello\n&quot;, &quot;world\n&quot;]
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello  world</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_lines'>lines</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># =&gt; [&quot;hello &quot;, &quot; &quot;, &quot;world&quot;]
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello\nworld\n</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_lines'>lines</span>(<span class='label'>chomp:</span> <span class='kw'>true</span>)
<span class='comment'># =&gt; [&quot;hello&quot;, &quot;world&quot;]</span></code></pre>

<pre class="code ruby"><code class="ruby"><span class='comment'># .rbs
</span><span class='kw'>class</span> <span class='const'>String</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_lines'>lines</span><span class='op'>:</span> (<span class='op'>?</span><span class='const'>String</span><span class='comma'>,</span> <span class='op'>?</span><span class='id identifier rubyid_chomp'>chomp</span><span class='op'>:</span> <span class='id identifier rubyid_bool'>bool</span>) <span class='tlambda'>-&gt;</span> <span class='const'>Array</span>[<span class='const'>String</span>]
<span class='kw'>end</span></code></pre>

<p><code>String</code>&#39;s <code>#lines</code> method take two arguments: one optional String argument, and another optional boolean keyword argument. It returns an <code>Array</code> of <code>String</code>s.</p>

<p>Keyword arguments are declared similar to in ruby, with the keyword immediately followed by a colon. Keyword arguments that are optional are indicated as optional using the same <code>?</code> prefix as positional arguments.</p>

<h3>Class methods</h3>

<p><strong>Example</strong>: <code>Time.now</code></p>

<pre class="code ruby"><code class="ruby"><span class='comment'># .rb
</span><span class='const'>Time</span>.<span class='id identifier rubyid_now'>now</span>
<span class='comment'># =&gt; 2009-06-24 12:39:54 +0900</span></code></pre>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Time</span>
  <span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_now'>now</span><span class='op'>:</span> () <span class='tlambda'>-&gt;</span> <span class='const'>Time</span>
<span class='kw'>end</span></code></pre>

<p><code>Time</code>&#39;s class method <code>now</code> takes no arguments, and returns an instance of the
<code>Time</code> class.</p>

<h3>Block Arguments</h3>

<p><strong>Example</strong>: <code>Array#filter</code></p>

<pre class="code ruby"><code class="ruby"><span class='comment'># .rb
</span>[<span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span><span class='comma'>,</span><span class='int'>4</span><span class='comma'>,</span><span class='int'>5</span>].<span class='id identifier rubyid_filter'>filter</span> {<span class='op'>|</span><span class='id identifier rubyid_num'>num</span><span class='op'>|</span> <span class='id identifier rubyid_num'>num</span>.<span class='id identifier rubyid_even?'>even?</span> }
<span class='comment'># =&gt; [2, 4]
</span><span class='qwords'><span class='qwords_beg'>%w[</span><span class='words_sep'> </span><span class='tstring_content'>a</span><span class='words_sep'> </span><span class='tstring_content'>b</span><span class='words_sep'> </span><span class='tstring_content'>c</span><span class='words_sep'> </span><span class='tstring_content'>d</span><span class='words_sep'> </span><span class='tstring_content'>e</span><span class='words_sep'> </span><span class='tstring_content'>f</span><span class='words_sep'> </span><span class='tstring_end'>]</span></span>.<span class='id identifier rubyid_filter'>filter</span> {<span class='op'>|</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[aeiou]</span><span class='regexp_end'>/</span></span> }
<span class='comment'># =&gt; [&quot;a&quot;, &quot;e&quot;]
</span>[<span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span><span class='comma'>,</span><span class='int'>4</span><span class='comma'>,</span><span class='int'>5</span>].<span class='id identifier rubyid_filter'>filter</span></code></pre>

<pre class="code ruby"><code class="ruby"><span class='comment'># .rbs
</span><span class='kw'>class</span> <span class='const'>Array</span>[<span class='const'>Elem</span>]
  <span class='kw'>def</span> <span class='id identifier rubyid_filter'>filter</span><span class='op'>:</span> () { (<span class='const'>Elem</span>) <span class='tlambda'>-&gt;</span> <span class='id identifier rubyid_boolish'>boolish</span> } <span class='tlambda'>-&gt;</span> <span class='op'>::</span><span class='const'>Array</span>[<span class='const'>Elem</span>]
            <span class='op'>|</span> () <span class='tlambda'>-&gt;</span> <span class='op'>::</span><span class='const'>Enumerator</span>[<span class='const'>Elem</span><span class='comma'>,</span> <span class='op'>::</span><span class='const'>Array</span>[<span class='const'>Elem</span>]]
<span class='kw'>end</span></code></pre>

<p><code>Array</code>&#39;s <code>#filter</code> method, when called with no arguments returns an Enumerator.</p>

<p>When called with a block, the method returns an <code>Array</code> of whatever type the original contained. The block will take one argument, of the type of the contained value, and the block will return a truthy or falsy value.</p>

<p><code>boolish</code> is a special keyword for any type that will be treated as if it were a <code>bool</code>.</p>

<h3>Type Variables</h3>

<p><strong>Example</strong>: <code>Hash</code>, <code>Hash#keys</code></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_h'>h</span> <span class='op'>=</span> { <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='int'>100</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='int'>200</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='int'>300</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='int'>400</span> }
<span class='id identifier rubyid_h'>h</span>.<span class='id identifier rubyid_keys'>keys</span>
<span class='comment'># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;]</span></code></pre>

<pre class="code ruby"><code class="ruby"><span class='comment'># .rbs
</span><span class='kw'>class</span> <span class='const'>Hash</span>[<span class='const'>K</span><span class='comma'>,</span> <span class='const'>V</span>]
  <span class='kw'>def</span> <span class='id identifier rubyid_keys'>keys</span><span class='op'>:</span> () <span class='tlambda'>-&gt;</span> <span class='const'>Array</span>[<span class='const'>K</span>]
<span class='kw'>end</span></code></pre>

<p>Generic types in RBS are parameterized at declaration time. These type variables are then available throughout all the methods contained in the <code>class</code> block.</p>

<p><code>Hash</code>&#39;s <code>#keys</code> method takes no arguments, and returns an <code>Array</code> of the first type parameter. In the above example, <code>a</code> is of concrete type <code>Hash[String, Integer]</code>, so <code>#keys</code> returns an <code>Array</code> for <code>String</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># .rb
</span><span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> [ <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d</span><span class='tstring_end'>&quot;</span></span> ]
<span class='id identifier rubyid_a'>a</span>.<span class='id identifier rubyid_collect'>collect</span> {<span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>!</span><span class='tstring_end'>&quot;</span></span>}
<span class='comment'># =&gt; [&quot;a!&quot;, &quot;b!&quot;, &quot;c!&quot;, &quot;d!&quot;]
</span><span class='id identifier rubyid_a'>a</span>.<span class='id identifier rubyid_collect'>collect</span>.<span class='id identifier rubyid_with_index'>with_index</span> {<span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>*</span> <span class='id identifier rubyid_i'>i</span>}
<span class='comment'># =&gt; [&quot;&quot;, &quot;b&quot;, &quot;cc&quot;, &quot;ddd&quot;]</span></code></pre>

<pre class="code ruby"><code class="ruby"><span class='comment'># .rbs
</span><span class='kw'>class</span> <span class='const'>Array</span>[<span class='const'>Elem</span>]
  <span class='kw'>def</span> <span class='id identifier rubyid_collect'>collect</span><span class='op'>:</span> [<span class='const'>U</span>] () { (<span class='const'>Elem</span>) <span class='tlambda'>-&gt;</span> <span class='const'>U</span> } <span class='tlambda'>-&gt;</span> <span class='const'>Array</span>[<span class='const'>U</span>]
             <span class='op'>|</span> () <span class='tlambda'>-&gt;</span> <span class='const'>Enumerator</span>[<span class='const'>Elem</span><span class='comma'>,</span> <span class='const'>Array</span>[<span class='id identifier rubyid_untyped'>untyped</span>]]
<span class='kw'>end</span></code></pre>

<p>Type variables can also be introduced in methods. Here, in <code>Array</code>&#39;s <code>#collect</code> method, we introduce a type variable <code>U</code>. The block passed to <code>#collect</code> will receive a parameter of type <code>Elem</code>, and return a value of type <code>U</code>. Then <code>#collect</code> will return an <code>Array</code> of type <code>U</code>.</p>

<p>In this example, the method receives its signature from the inferred return type of the passed block. When then block is absent, as in when the method returns an <code>Enumerator</code>, we can&#39;t infer the type, and so the return value of the enumerator can only be described as <code>Array[untyped]</code>.</p>

<h3>Tuples</h3>

<p><strong>Examples</strong>: <code>Enumerable#partition</code>, <code>Enumerable#to_h</code></p>

<pre class="code ruby"><code class="ruby">(<span class='int'>1</span><span class='op'>..</span><span class='int'>6</span>).<span class='id identifier rubyid_partition'>partition</span> { <span class='op'>|</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span>.<span class='id identifier rubyid_even?'>even?</span> }
<span class='comment'># =&gt; [[2, 4, 6], [1, 3, 5]]</span></code></pre>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Enumerable</span>[<span class='const'>Elem</span>]
  <span class='kw'>def</span> <span class='id identifier rubyid_partition'>partition</span><span class='op'>:</span> () { (<span class='const'>Elem</span>) <span class='tlambda'>-&gt;</span> <span class='id identifier rubyid_boolish'>boolish</span> } <span class='tlambda'>-&gt;</span> [<span class='const'>Array</span>[<span class='const'>Elem</span>]<span class='comma'>,</span> <span class='const'>Array</span>[<span class='const'>Elem</span>]]
               <span class='op'>|</span> () <span class='tlambda'>-&gt;</span> <span class='op'>::</span><span class='const'>Enumerator</span>[<span class='const'>Elem</span><span class='comma'>,</span> [<span class='const'>Array</span>[<span class='const'>Elem</span>]<span class='comma'>,</span> <span class='const'>Array</span>[<span class='const'>Elem</span>] ]]
<span class='kw'>end</span></code></pre>

<p><code>Enumerable</code>&#39;s <code>partition</code> method, when given a block, returns a 2-item tuple of <code>Array</code>s containing the original type of the <code>Enumerable</code>.</p>

<p>Tuples can be of any size, and they can have mixed types.</p>

<pre class="code ruby"><code class="ruby">(<span class='int'>1</span><span class='op'>..</span><span class='int'>5</span>).<span class='id identifier rubyid_to_h'>to_h</span> {<span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> [<span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>**</span> <span class='int'>2</span>]}
<span class='comment'># =&gt; {1=&gt;1, 2=&gt;4, 3=&gt;9, 4=&gt;16, 5=&gt;25}</span></code></pre>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Enumerable</span>[<span class='const'>Elem</span>]
  <span class='kw'>def</span> <span class='id identifier rubyid_to_h'>to_h</span><span class='op'>:</span> () <span class='tlambda'>-&gt;</span> <span class='op'>::</span><span class='const'>Hash</span>[<span class='id identifier rubyid_untyped'>untyped</span><span class='comma'>,</span> <span class='id identifier rubyid_untyped'>untyped</span>]
          <span class='op'>|</span> [<span class='const'>T</span><span class='comma'>,</span> <span class='const'>U</span>] () { (<span class='const'>Elem</span>) <span class='tlambda'>-&gt;</span> [<span class='const'>T</span><span class='comma'>,</span> <span class='const'>U</span>] } <span class='tlambda'>-&gt;</span> <span class='op'>::</span><span class='const'>Hash</span>[<span class='const'>T</span><span class='comma'>,</span> <span class='const'>U</span>]
<span class='kw'>end</span></code></pre>

<p><code>Enumerable</code>&#39;s <code>to_h</code> method, when given a block that returns a 2-item tuple, returns a <code>Hash</code> with keys the type of the first position in the tuple, and values the type of the second position in the tuple.</p>

<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>