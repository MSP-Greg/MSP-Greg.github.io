<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: REXML::Source &mdash; rexml  Ruby-3.1.5 p252</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "REXML::Source",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Ruby-3.1.5</a> &raquo; 
      <a href='../'>rexml</a> &raquo; 
      <a href='../_index.html#alpha_S'>Index (S)</a> &raquo; 
        <a href="../REXML.html" title="REXML (module)">REXML</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Source&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: REXML::Source</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Subclasses:</div>
        <div class='box_22'>
          <a href="IOSource.html" title="REXML::IOSource (class)">IOSource</a>
        </div>
      </td>
    </tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="Encoding.html" title="REXML::Encoding (module)"><code>Encoding</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'>Object</span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/rexml/blob/v3.2.5/lib/rexml/source.rb#L31'>lib/rexml/source.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>A Source can be searched for patterns, and wraps buffers and other objects and provides consumption of text</p>

  </div>
</div>
</div>
<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(arg, encoding = nil)  &#x21d2; Source </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Constructor value, overriding all encoding detection.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#buffer-instance_method" title="#buffer (instance method)">#<strong>buffer</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>The current buffer (what we’re going to read next).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#empty%3F-instance_method" title="#empty? (instance method)">#<strong>empty?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#encoding-instance_method" title="#encoding (instance method)">#<strong>encoding</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#encoding=-instance_method" title="#encoding= (instance method)">#<strong>encoding=</strong>(enc)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Inherited from <a href="Encoding.html" title="REXML::Encoding (module)"><code>Encoding</code></a> Overridden to support optimized en/decoding.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#line-instance_method" title="#line (instance method)">#<strong>line</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>The line number of the last consumed text.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="Encoding.html" title="REXML::Encoding (module)"><code>Encoding</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m rw' href="Encoding.html#encoding-instance_method" title="REXML::Encoding#encoding (method)">#encoding</a></td>
      <td><div class='inline'><p>ID —&gt; <a href="Encoding.html" title="REXML::Encoding (module)"><code>Encoding</code></a> name.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m rw' href="Encoding.html#encoding=-instance_method" title="REXML::Encoding#encoding= (method)">#encoding=</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#consume-instance_method" title="#consume (instance method)">#<strong>consume</strong>(pattern)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#current_line-instance_method" title="#current_line (instance method)">#<strong>current_line</strong>  &#x21d2; Object </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#match-instance_method" title="#match (instance method)">#<strong>match</strong>(pattern, cons = false)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#match_to-instance_method" title="#match_to (instance method)">#<strong>match_to</strong>(char, pattern)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#match_to_consume-instance_method" title="#match_to_consume (instance method)">#<strong>match_to_consume</strong>(char, pattern)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#position-instance_method" title="#position (instance method)">#<strong>position</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#read-instance_method" title="#read (instance method)">#<strong>read</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#scan-instance_method" title="#scan (instance method)">#<strong>scan</strong>(pattern, cons = false)  &#x21d2; Object </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Scans the source for a given pattern.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#detect_encoding-instance_method" title="#detect_encoding (instance method)">#<strong>detect_encoding</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#encoding_updated-instance_method" title="#encoding_updated (instance method)">#<strong>encoding_updated</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
</ul>

<h3 class='inherited'><a href="Encoding.html" title="REXML::Encoding (module)"><code>Encoding</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="Encoding.html#decode-instance_method" title="REXML::Encoding#decode (method)">#decode</a>,
        <a class='i_m ' href="Encoding.html#encode-instance_method" title="REXML::Encoding#encode (method)">#encode</a>,
        <a class='i_m priv' href="Encoding.html#find_encoding-instance_method" title="REXML::Encoding#find_encoding (method)">#find_encoding</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(arg, encoding = nil)  &#x21d2; <code>Source</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Constructor value, overriding all encoding detection</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>arg</span>
    <span class='type'></span>
&mdash;    <div class='inline'>
<p>must be a String, and should be a valid XML document</p>
</div>
  </li>
  <li>
    <span class='name'>encoding</span>
    <span class='type'></span>
    <em class='default'>(defaults to: <tt>nil</tt>)</em>
&mdash;    <div class='inline'>
<p>if non-null, sets the encoding of the source to this</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.2.5/lib/rexml/source.rb#L43-L51'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='43' data-end='51'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/source.rb', line 43</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_arg'>arg</span><span class='comma'>,</span> <span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="REXML::Source#encoding (method)">encoding</a></span><span class='op'>=</span><span class='kw'>nil</span>)
  <span class='ivar'>@orig</span> <span class='op'>=</span> <span class='ivar'>@buffer</span> <span class='op'>=</span> <span class='id identifier rubyid_arg'>arg</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="REXML::Source#encoding (method)">encoding</a></span>
    <span class='kw'>self</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="REXML::Source#encoding (method)">encoding</a></span> <span class='op'>=</span> <span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="REXML::Source#encoding (method)">encoding</a></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_detect_encoding'><a href="#detect_encoding-instance_method" title="REXML::Source#detect_encoding (method)">detect_encoding</a></span>
  <span class='kw'>end</span>
  <span class='ivar'>@line</span> <span class='op'>=</span> <span class='int'>0</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="buffer-instance_method">
  <h3 class='signature ro first'>
    #<strong>buffer</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The current buffer (what we’re going to read next)</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.2.5/lib/rexml/source.rb#L34-L34'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='34' data-end='34'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/source.rb', line 34</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_buffer'>buffer</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="empty?-instance_method">
  <h3 class='signature ro'>
    #<strong>empty?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Boolean</code>)</span>
&mdash;    <div class='inline'>
<p>true if the <code>Source</code> is exhausted</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.2.5/lib/rexml/source.rb#L108-L110'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='108' data-end='110'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/source.rb', line 108</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_empty?'>empty?</span>
  <span class='ivar'>@buffer</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="encoding-instance_method">
  <h3 class='signature rw'>
    #<strong>encoding</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.2.5/lib/rexml/source.rb#L37-L37'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='37' data-end='37'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/source.rb', line 37</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_encoding'>encoding</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="encoding=-instance_method">
  <h3 class='signature rw'>
    #<strong>encoding=</strong>(enc)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Inherited from <a href="Encoding.html" title="REXML::Encoding (module)"><code>Encoding</code></a> Overridden to support optimized en/decoding</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.2.5/lib/rexml/source.rb#L56-L59'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='56' data-end='59'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/source.rb', line 56</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_encoding='>encoding=</span>(<span class='id identifier rubyid_enc'>enc</span>)
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='kw'>super</span>
  <span class='id identifier rubyid_encoding_updated'><a href="#encoding_updated-instance_method" title="REXML::Source#encoding_updated (method)">encoding_updated</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="line-instance_method">
  <h3 class='signature ro'>
    #<strong>line</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The line number of the last consumed text</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.2.5/lib/rexml/source.rb#L36-L36'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='36' data-end='36'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/source.rb', line 36</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_line'>line</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="consume-instance_method">
  <h3 class='signature  first'>
    #<strong>consume</strong>(pattern)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.2.5/lib/rexml/source.rb#L87-L89'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='87' data-end='89'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/source.rb', line 87</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_consume'>consume</span>( <span class='id identifier rubyid_pattern'>pattern</span> )
  <span class='ivar'>@buffer</span> <span class='op'>=</span> <span class='backref'>$&#39;</span> <span class='kw'>if</span> <span class='id identifier rubyid_pattern'>pattern</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="REXML::Source#match (method)">match</a></span>( <span class='ivar'>@buffer</span> )
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="current_line-instance_method">
  <h3 class='signature '>
    #<strong>current_line</strong>  &#x21d2; <code>Object</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'></span>
    <div class='inline'>
<p>the current line in the source</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.2.5/lib/rexml/source.rb#L117-L122'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='117' data-end='122'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/source.rb', line 117</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_current_line'>current_line</span>
  <span class='id identifier rubyid_lines'>lines</span> <span class='op'>=</span> <span class='ivar'>@orig</span>.<span class='id identifier rubyid_split'>split</span>
  <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='id identifier rubyid_lines'>lines</span>.<span class='id identifier rubyid_grep'>grep</span> <span class='ivar'>@buffer</span>[<span class='int'>0</span><span class='op'>..</span><span class='int'>30</span>]
  <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='id identifier rubyid_res'>res</span>[<span class='op'>-</span><span class='int'>1</span>] <span class='kw'>if</span> <span class='id identifier rubyid_res'>res</span>.<span class='id identifier rubyid_kind_of?'>kind_of?</span> <span class='const'>Array</span>
  <span class='id identifier rubyid_lines'>lines</span>.<span class='id identifier rubyid_index'>index</span>( <span class='id identifier rubyid_res'>res</span> ) <span class='kw'>if</span> <span class='id identifier rubyid_res'>res</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="detect_encoding-instance_method">
  <h3 class='signature priv'>
    #<strong>detect_encoding</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.2.5/lib/rexml/source.rb#L125-L144'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='125' data-end='144'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/source.rb', line 125</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_detect_encoding'>detect_encoding</span>
  <span class='id identifier rubyid_buffer_encoding'>buffer_encoding</span> <span class='op'>=</span> <span class='ivar'>@buffer</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="REXML::Source#encoding (method)">encoding</a></span>
  <span class='id identifier rubyid_detected_encoding'>detected_encoding</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>begin</span>
    <span class='ivar'>@buffer</span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ASCII-8BIT</span><span class='tstring_end'>&quot;</span></span>)
    <span class='kw'>if</span> <span class='ivar'>@buffer</span>[<span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span>] <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\xfe\xff</span><span class='tstring_end'>&quot;</span></span>
      <span class='ivar'>@buffer</span>[<span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_detected_encoding'>detected_encoding</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-16BE</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>elsif</span> <span class='ivar'>@buffer</span>[<span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span>] <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\xff\xfe</span><span class='tstring_end'>&quot;</span></span>
      <span class='ivar'>@buffer</span>[<span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_detected_encoding'>detected_encoding</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-16LE</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>elsif</span> <span class='ivar'>@buffer</span>[<span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span>] <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\xef\xbb\xbf</span><span class='tstring_end'>&quot;</span></span>
      <span class='ivar'>@buffer</span>[<span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span>] <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_detected_encoding'>detected_encoding</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>ensure</span>
    <span class='ivar'>@buffer</span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='id identifier rubyid_buffer_encoding'>buffer_encoding</span>)
  <span class='kw'>end</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="REXML::Source#encoding (method)">encoding</a></span> <span class='op'>=</span> <span class='id identifier rubyid_detected_encoding'>detected_encoding</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="encoding_updated-instance_method">
  <h3 class='signature priv'>
    #<strong>encoding_updated</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.2.5/lib/rexml/source.rb#L146-L154'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='146' data-end='154'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/source.rb', line 146</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_encoding_updated'>encoding_updated</span>
  <span class='kw'>if</span> <span class='ivar'>@encoding</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&#39;</span></span>
    <span class='ivar'>@buffer</span> <span class='op'>=</span> <span class='id identifier rubyid_decode'>decode</span>(<span class='ivar'>@buffer</span>)
    <span class='ivar'>@to_utf</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>else</span>
    <span class='ivar'>@to_utf</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='ivar'>@buffer</span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span> <span class='op'>::</span><span class='const'><a href="Encoding.html" title="REXML::Encoding (module)">Encoding</a></span><span class='op'>::</span><span class='const'>UTF_8</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="match-instance_method">
  <h3 class='signature '>
    #<strong>match</strong>(pattern, cons = false)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.2.5/lib/rexml/source.rb#L101-L105'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='101' data-end='105'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/source.rb', line 101</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_match'>match</span>(<span class='id identifier rubyid_pattern'>pattern</span><span class='comma'>,</span> <span class='id identifier rubyid_cons'>cons</span><span class='op'>=</span><span class='kw'>false</span>)
  <span class='id identifier rubyid_md'>md</span> <span class='op'>=</span> <span class='id identifier rubyid_pattern'>pattern</span>.<span class='id identifier rubyid_match'>match</span>(<span class='ivar'>@buffer</span>)
  <span class='ivar'>@buffer</span> <span class='op'>=</span> <span class='backref'>$&#39;</span> <span class='kw'>if</span> <span class='id identifier rubyid_cons'>cons</span> <span class='kw'>and</span> <span class='id identifier rubyid_md'>md</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_md'>md</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="match_to-instance_method">
  <h3 class='signature '>
    #<strong>match_to</strong>(char, pattern)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.2.5/lib/rexml/source.rb#L91-L93'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='91' data-end='93'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/source.rb', line 91</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_match_to'>match_to</span>( <span class='id identifier rubyid_char'>char</span><span class='comma'>,</span> <span class='id identifier rubyid_pattern'>pattern</span> )
  <span class='kw'>return</span> <span class='id identifier rubyid_pattern'>pattern</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="REXML::Source#match (method)">match</a></span>(<span class='ivar'>@buffer</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="match_to_consume-instance_method">
  <h3 class='signature '>
    #<strong>match_to_consume</strong>(char, pattern)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.2.5/lib/rexml/source.rb#L95-L99'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='95' data-end='99'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/source.rb', line 95</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_match_to_consume'>match_to_consume</span>( <span class='id identifier rubyid_char'>char</span><span class='comma'>,</span> <span class='id identifier rubyid_pattern'>pattern</span> )
  <span class='id identifier rubyid_md'>md</span> <span class='op'>=</span> <span class='id identifier rubyid_pattern'>pattern</span>.<span class='id identifier rubyid_match'><a href="#match-instance_method" title="REXML::Source#match (method)">match</a></span>(<span class='ivar'>@buffer</span>)
  <span class='ivar'>@buffer</span> <span class='op'>=</span> <span class='backref'>$&#39;</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_md'>md</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="position-instance_method">
  <h3 class='signature '>
    #<strong>position</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.2.5/lib/rexml/source.rb#L112-L114'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='112' data-end='114'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/source.rb', line 112</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_position'>position</span>
  <span class='ivar'>@orig</span>.<span class='id identifier rubyid_index'>index</span>( <span class='ivar'>@buffer</span> )
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="read-instance_method">
  <h3 class='signature '>
    #<strong>read</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.2.5/lib/rexml/source.rb#L84-L85'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='84' data-end='85'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/source.rb', line 84</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_read'>read</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="scan-instance_method">
  <h3 class='signature '>
    #<strong>scan</strong>(pattern, cons = false)  &#x21d2; <code>Object</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Scans the source for a given pattern.  Note, that this is not your usual scan() method.  For one thing, the pattern argument has some requirements; for another, the source can be consumed.  You can easily confuse this method.  Originally, the patterns were easier to construct and this method more robust, because this method generated search regexps on the fly; however, this was computationally expensive and slowed down the entire <a href="../REXML.html" title="REXML (module)"><code>::REXML</code></a> package considerably, since this is by far the most commonly called method. /^s*(#<code>pattern, with no groups</code>)(.*)/.  The first group will be returned; the second group is used if the consume flag is set. everything after it in the <code>Source</code>. pattern is not found.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Parameters:</p>
<ul class='param'>
  <li>
    <span class='name'>pattern</span>
    <span class='type'></span>
&mdash;    <div class='inline'>
<p>must be a Regexp, and must be in the form of</p>
</div>
  </li>
  <li>
    <span class='name'>consume</span>
    <span class='type'></span>
&mdash;    <div class='inline'>
<p>if true, the pattern returned will be consumed, leaving</p>
</div>
  </li>
</ul>
<p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'></span>
    <div class='inline'>
<p>the pattern, if found, or nil if the <code>Source</code> is empty or the</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/rexml/blob/v3.2.5/lib/rexml/source.rb#L77-L82'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='77' data-end='82'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rexml/source.rb', line 77</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_scan'>scan</span>(<span class='id identifier rubyid_pattern'>pattern</span><span class='comma'>,</span> <span class='id identifier rubyid_cons'>cons</span><span class='op'>=</span><span class='kw'>false</span>)
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='ivar'>@buffer</span>.<span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_rv'>rv</span> <span class='op'>=</span> <span class='ivar'>@buffer</span>.<span class='id identifier rubyid_scan'>scan</span>(<span class='id identifier rubyid_pattern'>pattern</span>)
  <span class='ivar'>@buffer</span> <span class='op'>=</span> <span class='backref'>$&#39;</span> <span class='kw'>if</span> <span class='id identifier rubyid_cons'>cons</span> <span class='kw'>and</span> <span class='id identifier rubyid_rv'>rv</span>.<span class='id identifier rubyid_size'>size</span><span class='op'>&gt;</span><span class='int'>0</span>
  <span class='id identifier rubyid_rv'>rv</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>