<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Bundler::CompactIndexClient &mdash; bundler  Ruby-3.3.0 pp0</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Bundler::CompactIndexClient",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Ruby-3.3.0</a> &raquo; 
      <a href='../'>bundler</a> &raquo; 
      <a href='../_index.html#alpha_C'>Index (C)</a> &raquo; 
        <a href="../Bundler.html" title="Bundler (module)">Bundler</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>CompactIndexClient&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Bundler::CompactIndexClient</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a href="CompactIndexClient/Cache.html" title="Bundler::CompactIndexClient::Cache (class)"><code>Cache</code></a>,
        <a href="CompactIndexClient/CacheFile.html" title="Bundler::CompactIndexClient::CacheFile (class)"><code>CacheFile</code></a>,
        <a href="CompactIndexClient/GemParser.html" title="Bundler::CompactIndexClient::GemParser (class)"><code>GemParser</code></a>,
        <a href="CompactIndexClient/Updater.html" title="Bundler::CompactIndexClient::Updater (class)"><code>Updater</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Exceptions:</div>
      <div class='box_11'>
          <a href="CompactIndexClient/Error.html" title="Bundler::CompactIndexClient::Error (class)"><code>Error</code></a>      </div>
    </td></tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'>Object</span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_0/lib/bundler/compact_index_client.rb#L7'>lib/bundler/compact_index_client.rb</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_0/lib/bundler/compact_index_client/cache.rb#L6'>lib/bundler/compact_index_client/cache.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_0/lib/bundler/compact_index_client/cache_file.rb#L7'>lib/bundler/compact_index_client/cache_file.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_0/lib/bundler/compact_index_client/gem_parser.rb#L4'>lib/bundler/compact_index_client/gem_parser.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_0/lib/bundler/compact_index_client/updater.rb#L4'>lib/bundler/compact_index_client/updater.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='DEBUG_MUTEX-constant' class='summary_signature'>DEBUG_MUTEX =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_0/lib/bundler/compact_index_client.rb#L13-L13'># File 'lib/bundler/compact_index_client.rb', line 13</a>    <pre class='code ruby'><span class='const'>Thread</span><span class='op'>::</span><span class='const'>Mutex</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Bundler::CompactIndexClient.new (method)">new</a></span></pre>
  </li>
  <li>
    <span id='SUPPORTED_DIGESTS-constant' class='summary_signature'>SUPPORTED_DIGESTS =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>NOTE: MD5 is here not because we expect a server to respond with it, but because we use it to generate the etag on first request during the upgrade to the compact index client that uses opaque etags saved to files. Remove once 2.5.0 has been out for a while.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_0/lib/bundler/compact_index_client.rb#L12-L12'># File 'lib/bundler/compact_index_client.rb', line 12</a>    <pre class='code ruby'>{ <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sha-256</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='const'>SHA256</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>md5</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='const'>MD5</span> }.<span class='id identifier rubyid_freeze'>freeze</span></pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#debug-class_method" title=".debug (class method)">.<strong>debug</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(directory, fetcher)  &#x21d2; CompactIndexClient </a>
    </span>
    <span class='note title constructor'>constructor</span>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#directory-instance_method" title="#directory (instance method)">#<strong>directory</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#execution_mode-instance_method" title="#execution_mode (instance method)">#<strong>execution_mode</strong>  &#x21d2; Lambda </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#execution_mode=-instance_method" title="#execution_mode= (instance method)">#<strong>execution_mode=</strong>(block)  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#dependencies-instance_method" title="#dependencies (instance method)">#<strong>dependencies</strong>(names)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#names-instance_method" title="#names (instance method)">#<strong>names</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#sequential_execution_mode!-instance_method" title="#sequential_execution_mode! (instance method)">#<strong>sequential_execution_mode!</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#sequentially-instance_method" title="#sequentially (instance method)">#<strong>sequentially</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#update_and_parse_checksums!-instance_method" title="#update_and_parse_checksums! (instance method)">#<strong>update_and_parse_checksums!</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#versions-instance_method" title="#versions (instance method)">#<strong>versions</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#synchronize-instance_method" title="#synchronize (instance method)">#<strong>synchronize</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#update-instance_method" title="#update (instance method)">#<strong>update</strong>(remote_path, local_path, local_etag_path)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#update_info-instance_method" title="#update_info (instance method)">#<strong>update_info</strong>(name)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#url-instance_method" title="#url (instance method)">#<strong>url</strong>(path)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(directory, fetcher)  &#x21d2; <code>CompactIndexClient</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_0/lib/bundler/compact_index_client.rb#L28-L36'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='28' data-end='36'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/compact_index_client.rb', line 28</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_directory'><a href="#directory-instance_method" title="Bundler::CompactIndexClient#directory (method)">directory</a></span><span class='comma'>,</span> <span class='id identifier rubyid_fetcher'>fetcher</span>)
  <span class='ivar'>@directory</span> <span class='op'>=</span> <span class='const'>Pathname</span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_directory'><a href="#directory-instance_method" title="Bundler::CompactIndexClient#directory (method)">directory</a></span>)
  <span class='ivar'>@updater</span> <span class='op'>=</span> <span class='const'><a href="CompactIndexClient/Updater.html" title="Bundler::CompactIndexClient::Updater (class)">Updater</a></span>.<span class='id identifier rubyid_new'><a href="CompactIndexClient/Updater.html#new-class_method" title="Bundler::CompactIndexClient::Updater.new (method)">new</a></span>(<span class='id identifier rubyid_fetcher'>fetcher</span>)
  <span class='ivar'>@cache</span> <span class='op'>=</span> <span class='const'><a href="CompactIndexClient/Cache.html" title="Bundler::CompactIndexClient::Cache (class)">Cache</a></span>.<span class='id identifier rubyid_new'><a href="CompactIndexClient/Cache.html#new-class_method" title="Bundler::CompactIndexClient::Cache.new (method)">new</a></span>(<span class='ivar'>@directory</span>)
  <span class='ivar'>@endpoints</span> <span class='op'>=</span> <span class='const'>Set</span>.<span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@info_checksums_by_name</span> <span class='op'>=</span> {}
  <span class='ivar'>@parsed_checksums</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@mutex</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='op'>::</span><span class='const'>Mutex</span>.<span class='id identifier rubyid_new'>new</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="debug-class_method">
  <h3 class='signature  first'>
    .<strong>debug</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_0/lib/bundler/compact_index_client.rb#L15-L18'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='15' data-end='18'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/compact_index_client.rb', line 15</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_debug'>debug</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DEBUG_COMPACT_INDEX</span><span class='tstring_end'>&quot;</span></span>]
  <span class='const'><a href="#DEBUG_MUTEX-constant" title="Bundler::CompactIndexClient::DEBUG_MUTEX (constant)">DEBUG_MUTEX</a></span>.<span class='id identifier rubyid_synchronize'><a href="#synchronize-instance_method" title="Bundler::CompactIndexClient#synchronize (method)">synchronize</a></span> { <span class='id identifier rubyid_warn'>warn</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='embexpr_end'>}</span><span class='tstring_content'>] </span><span class='embexpr_beg'>#{</span><span class='kw'>yield</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="directory-instance_method">
  <h3 class='signature ro first'>
    #<strong>directory</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_0/lib/bundler/compact_index_client.rb#L26-L26'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='26' data-end='26'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/compact_index_client.rb', line 26</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_directory'>directory</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="execution_mode-instance_method">
  <h3 class='signature rw'>
    #<strong>execution_mode</strong>  &#x21d2; <code>Lambda</code>  <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Returns:</p>
<ul class='return'>
  <li>
    <span class='type'>(<code>Lambda</code>)</span>
&mdash;    <div class='inline'>
<p>A lambda that takes an array of inputs and a block, and maps the inputs with the block in parallel.</p>
</div>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_0/lib/bundler/compact_index_client.rb#L48-L50'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='48' data-end='50'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/compact_index_client.rb', line 48</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_execution_mode'>execution_mode</span>
  <span class='ivar'>@execution_mode</span> <span class='op'>||</span> <span class='id identifier rubyid_sequentially'><a href="#sequentially-instance_method" title="Bundler::CompactIndexClient#sequentially (method)">sequentially</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="execution_mode=-instance_method">
  <h3 class='signature rw'>
    #<strong>execution_mode=</strong>(block)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_0/lib/bundler/compact_index_client.rb#L38-L43'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='38' data-end='43'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/compact_index_client.rb', line 38</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_execution_mode='>execution_mode=</span>(<span class='id identifier rubyid_block'>block</span>)
  <span class='const'><a href="../Bundler.html" title="Bundler (module)">Bundler</a></span><span class='op'>::</span><span class='const'>CompactIndexClient</span>.<span class='id identifier rubyid_debug'><a href="#debug-class_method" title="Bundler::CompactIndexClient.debug (method)">debug</a></span> { <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>execution_mode=</span><span class='tstring_end'>&quot;</span></span> }
  <span class='ivar'>@endpoints</span> <span class='op'>=</span> <span class='const'>Set</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Bundler::CompactIndexClient.new (method)">new</a></span>

  <span class='ivar'>@execution_mode</span> <span class='op'>=</span> <span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="dependencies-instance_method">
  <h3 class='signature  first'>
    #<strong>dependencies</strong>(names)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_0/lib/bundler/compact_index_client.rb#L75-L81'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='75' data-end='81'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/compact_index_client.rb', line 75</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_dependencies'>dependencies</span>(<span class='id identifier rubyid_names'><a href="#names-instance_method" title="Bundler::CompactIndexClient#names (method)">names</a></span>)
  <span class='const'><a href="../Bundler.html" title="Bundler (module)">Bundler</a></span><span class='op'>::</span><span class='const'>CompactIndexClient</span>.<span class='id identifier rubyid_debug'><a href="#debug-class_method" title="Bundler::CompactIndexClient.debug (method)">debug</a></span> { <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>dependencies(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_names'><a href="#names-instance_method" title="Bundler::CompactIndexClient#names (method)">names</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span> }
  <span class='id identifier rubyid_execution_mode'><a href="#execution_mode-instance_method" title="Bundler::CompactIndexClient#execution_mode (method)">execution_mode</a></span>.<span class='id identifier rubyid_call'>call</span>(<span class='id identifier rubyid_names'><a href="#names-instance_method" title="Bundler::CompactIndexClient#names (method)">names</a></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span>
    <span class='id identifier rubyid_update_info'><a href="#update_info-instance_method" title="Bundler::CompactIndexClient#update_info (method)">update_info</a></span>(<span class='id identifier rubyid_name'>name</span>)
    <span class='ivar'>@cache</span>.<span class='id identifier rubyid_dependencies'>dependencies</span>(<span class='id identifier rubyid_name'>name</span>).<span class='id identifier rubyid_map'>map</span> {<span class='op'>|</span><span class='id identifier rubyid_d'>d</span><span class='op'>|</span> <span class='id identifier rubyid_d'>d</span>.<span class='id identifier rubyid_unshift'>unshift</span>(<span class='id identifier rubyid_name'>name</span>) }
  <span class='kw'>end</span>.<span class='id identifier rubyid_flatten'>flatten</span>(<span class='int'>1</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="names-instance_method">
  <h3 class='signature '>
    #<strong>names</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_0/lib/bundler/compact_index_client.rb#L62-L66'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='62' data-end='66'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/compact_index_client.rb', line 62</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_names'>names</span>
  <span class='const'><a href="../Bundler.html" title="Bundler (module)">Bundler</a></span><span class='op'>::</span><span class='const'>CompactIndexClient</span>.<span class='id identifier rubyid_debug'><a href="#debug-class_method" title="Bundler::CompactIndexClient.debug (method)">debug</a></span> { <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/names</span><span class='tstring_end'>&quot;</span></span> }
  <span class='id identifier rubyid_update'><a href="#update-instance_method" title="Bundler::CompactIndexClient#update (method)">update</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>names</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='ivar'>@cache</span>.<span class='id identifier rubyid_names_path'>names_path</span><span class='comma'>,</span> <span class='ivar'>@cache</span>.<span class='id identifier rubyid_names_etag_path'>names_etag_path</span>)
  <span class='ivar'>@cache</span>.<span class='id identifier rubyid_names'>names</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sequential_execution_mode!-instance_method">
  <h3 class='signature '>
    #<strong>sequential_execution_mode!</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_0/lib/bundler/compact_index_client.rb#L52-L54'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='52' data-end='54'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/compact_index_client.rb', line 52</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_sequential_execution_mode!'>sequential_execution_mode!</span>
  <span class='kw'>self</span>.<span class='id identifier rubyid_execution_mode'><a href="#execution_mode-instance_method" title="Bundler::CompactIndexClient#execution_mode (method)">execution_mode</a></span> <span class='op'>=</span> <span class='id identifier rubyid_sequentially'><a href="#sequentially-instance_method" title="Bundler::CompactIndexClient#sequentially (method)">sequentially</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sequentially-instance_method">
  <h3 class='signature '>
    #<strong>sequentially</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_0/lib/bundler/compact_index_client.rb#L56-L60'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='56' data-end='60'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/compact_index_client.rb', line 56</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_sequentially'>sequentially</span>
  <span class='ivar'>@sequentially</span> <span class='op'>||=</span> <span class='id identifier rubyid_lambda'>lambda</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_inputs'>inputs</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_blk'>blk</span><span class='op'>|</span>
    <span class='id identifier rubyid_inputs'>inputs</span>.<span class='id identifier rubyid_map'>map</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_blk'>blk</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="synchronize-instance_method">
  <h3 class='signature priv'>
    #<strong>synchronize</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_0/lib/bundler/compact_index_client.rb#L122-L124'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='122' data-end='124'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/compact_index_client.rb', line 122</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_synchronize'>synchronize</span>
  <span class='ivar'>@mutex</span>.<span class='id identifier rubyid_synchronize'>synchronize</span> { <span class='kw'>yield</span> }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="update-instance_method">
  <h3 class='signature priv'>
    #<strong>update</strong>(remote_path, local_path, local_etag_path)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_0/lib/bundler/compact_index_client.rb#L93-L100'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='93' data-end='100'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/compact_index_client.rb', line 93</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_update'>update</span>(<span class='id identifier rubyid_remote_path'>remote_path</span><span class='comma'>,</span> <span class='id identifier rubyid_local_path'>local_path</span><span class='comma'>,</span> <span class='id identifier rubyid_local_etag_path'>local_etag_path</span>)
  <span class='const'><a href="../Bundler.html" title="Bundler (module)">Bundler</a></span><span class='op'>::</span><span class='const'>CompactIndexClient</span>.<span class='id identifier rubyid_debug'><a href="#debug-class_method" title="Bundler::CompactIndexClient.debug (method)">debug</a></span> { <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>update(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_local_path'>local_path</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_remote_path'>remote_path</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span> }
  <span class='kw'>unless</span> <span class='id identifier rubyid_synchronize'><a href="#synchronize-instance_method" title="Bundler::CompactIndexClient#synchronize (method)">synchronize</a></span> { <span class='ivar'>@endpoints</span>.<span class='id identifier rubyid_add?'>add?</span>(<span class='id identifier rubyid_remote_path'>remote_path</span>) }
    <span class='const'><a href="../Bundler.html" title="Bundler (module)">Bundler</a></span><span class='op'>::</span><span class='const'>CompactIndexClient</span>.<span class='id identifier rubyid_debug'><a href="#debug-class_method" title="Bundler::CompactIndexClient.debug (method)">debug</a></span> { <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>already fetched </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_remote_path'>remote_path</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> }
    <span class='kw'>return</span>
  <span class='kw'>end</span>
  <span class='ivar'>@updater</span>.<span class='id identifier rubyid_update'>update</span>(<span class='id identifier rubyid_url'><a href="#url-instance_method" title="Bundler::CompactIndexClient#url (method)">url</a></span>(<span class='id identifier rubyid_remote_path'>remote_path</span>)<span class='comma'>,</span> <span class='id identifier rubyid_local_path'>local_path</span><span class='comma'>,</span> <span class='id identifier rubyid_local_etag_path'>local_etag_path</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="update_and_parse_checksums!-instance_method">
  <h3 class='signature '>
    #<strong>update_and_parse_checksums!</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_0/lib/bundler/compact_index_client.rb#L83-L89'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='83' data-end='89'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/compact_index_client.rb', line 83</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_update_and_parse_checksums!'>update_and_parse_checksums!</span>
  <span class='const'><a href="../Bundler.html" title="Bundler (module)">Bundler</a></span><span class='op'>::</span><span class='const'>CompactIndexClient</span>.<span class='id identifier rubyid_debug'><a href="#debug-class_method" title="Bundler::CompactIndexClient.debug (method)">debug</a></span> { <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>update_and_parse_checksums!</span><span class='tstring_end'>&quot;</span></span> }
  <span class='kw'>return</span> <span class='ivar'>@info_checksums_by_name</span> <span class='kw'>if</span> <span class='ivar'>@parsed_checksums</span>
  <span class='id identifier rubyid_update'><a href="#update-instance_method" title="Bundler::CompactIndexClient#update (method)">update</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>versions</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='ivar'>@cache</span>.<span class='id identifier rubyid_versions_path'>versions_path</span><span class='comma'>,</span> <span class='ivar'>@cache</span>.<span class='id identifier rubyid_versions_etag_path'>versions_etag_path</span>)
  <span class='ivar'>@info_checksums_by_name</span> <span class='op'>=</span> <span class='ivar'>@cache</span>.<span class='id identifier rubyid_checksums'>checksums</span>
  <span class='ivar'>@parsed_checksums</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="update_info-instance_method">
  <h3 class='signature priv'>
    #<strong>update_info</strong>(name)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_0/lib/bundler/compact_index_client.rb#L102-L116'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='102' data-end='116'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/compact_index_client.rb', line 102</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_update_info'>update_info</span>(<span class='id identifier rubyid_name'>name</span>)
  <span class='const'><a href="../Bundler.html" title="Bundler (module)">Bundler</a></span><span class='op'>::</span><span class='const'>CompactIndexClient</span>.<span class='id identifier rubyid_debug'><a href="#debug-class_method" title="Bundler::CompactIndexClient.debug (method)">debug</a></span> { <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>update_info(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span> }
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='ivar'>@cache</span>.<span class='id identifier rubyid_info_path'>info_path</span>(<span class='id identifier rubyid_name'>name</span>)
  <span class='kw'>unless</span> <span class='id identifier rubyid_existing'>existing</span> <span class='op'>=</span> <span class='ivar'>@info_checksums_by_name</span>[<span class='id identifier rubyid_name'>name</span>]
    <span class='const'><a href="../Bundler.html" title="Bundler (module)">Bundler</a></span><span class='op'>::</span><span class='const'>CompactIndexClient</span>.<span class='id identifier rubyid_debug'><a href="#debug-class_method" title="Bundler::CompactIndexClient.debug (method)">debug</a></span> { <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>skipping updating info for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> since it is missing from versions</span><span class='tstring_end'>&quot;</span></span> }
    <span class='kw'>return</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_checksum'>checksum</span> <span class='op'>=</span> <span class='const'><a href="SharedHelpers.html" title="Bundler::SharedHelpers (module)">SharedHelpers</a></span>.<span class='id identifier rubyid_checksum_for_file'><a href="SharedHelpers.html#checksum_for_file-instance_method" title="Bundler::SharedHelpers#checksum_for_file (method)">checksum_for_file</a></span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='const'>MD5</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_checksum'>checksum</span> <span class='op'>==</span> <span class='id identifier rubyid_existing'>existing</span>
    <span class='const'><a href="../Bundler.html" title="Bundler (module)">Bundler</a></span><span class='op'>::</span><span class='const'>CompactIndexClient</span>.<span class='id identifier rubyid_debug'><a href="#debug-class_method" title="Bundler::CompactIndexClient.debug (method)">debug</a></span> { <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>skipping updating info for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> since the versions checksum matches the local checksum</span><span class='tstring_end'>&quot;</span></span> }
    <span class='kw'>return</span>
  <span class='kw'>end</span>
  <span class='const'><a href="../Bundler.html" title="Bundler (module)">Bundler</a></span><span class='op'>::</span><span class='const'>CompactIndexClient</span>.<span class='id identifier rubyid_debug'><a href="#debug-class_method" title="Bundler::CompactIndexClient.debug (method)">debug</a></span> { <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>updating info for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> since the versions checksum </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_existing'>existing</span><span class='embexpr_end'>}</span><span class='tstring_content'> != the local checksum </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_checksum'>checksum</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> }
  <span class='id identifier rubyid_update'><a href="#update-instance_method" title="Bundler::CompactIndexClient#update (method)">update</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>info/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='ivar'>@cache</span>.<span class='id identifier rubyid_info_etag_path'>info_etag_path</span>(<span class='id identifier rubyid_name'>name</span>))
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="url-instance_method">
  <h3 class='signature priv'>
    #<strong>url</strong>(path)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_0/lib/bundler/compact_index_client.rb#L118-L120'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='118' data-end='120'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/compact_index_client.rb', line 118</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_url'>url</span>(<span class='id identifier rubyid_path'>path</span>)
  <span class='id identifier rubyid_path'>path</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="versions-instance_method">
  <h3 class='signature '>
    #<strong>versions</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_0/lib/bundler/compact_index_client.rb#L68-L73'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='68' data-end='73'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/bundler/compact_index_client.rb', line 68</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_versions'>versions</span>
  <span class='const'><a href="../Bundler.html" title="Bundler (module)">Bundler</a></span><span class='op'>::</span><span class='const'>CompactIndexClient</span>.<span class='id identifier rubyid_debug'><a href="#debug-class_method" title="Bundler::CompactIndexClient.debug (method)">debug</a></span> { <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/versions</span><span class='tstring_end'>&quot;</span></span> }
  <span class='id identifier rubyid_update'><a href="#update-instance_method" title="Bundler::CompactIndexClient#update (method)">update</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>versions</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='ivar'>@cache</span>.<span class='id identifier rubyid_versions_path'>versions_path</span><span class='comma'>,</span> <span class='ivar'>@cache</span>.<span class='id identifier rubyid_versions_etag_path'>versions_etag_path</span>)
  <span class='id identifier rubyid_versions'>versions</span><span class='comma'>,</span> <span class='ivar'>@info_checksums_by_name</span> <span class='op'>=</span> <span class='ivar'>@cache</span>.<span class='id identifier rubyid_versions'>versions</span>
  <span class='id identifier rubyid_versions'>versions</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>