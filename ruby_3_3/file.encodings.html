<!DOCTYPE html>
<html>
<head>

<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>File: Encodings &mdash; Ruby-3.3.1</title>

<link rel='stylesheet'  type='text/css' href='../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "encodings",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='.'>Ruby-3.3.1</a> &raquo; 
      <a href='_index.html'>Index</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>File: Encodings&nbsp;&#x25B2;</a></span>
          </div>

    <a id='list_href' href="file_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='file'>

<h1 id="label-Encodings">Encodings</h1>

<h2 id="label-The+Basics">The Basics</h2>

<p>A <a href="https://en.wikipedia.org/wiki/Character_encoding" target="_parent" title="character encoding">character encoding</a>, often shortened to <em>encoding</em>, is a mapping between:</p>
<ul><li>
<p>A sequence of 8-bit bytes (each byte in the range <code>0..255</code>).</p>
</li><li>
<p>Characters in a specific character set.</p>
</li></ul>

<p>Some character sets contain only 1-byte characters; <a href="https://en.wikipedia.org/wiki/ASCII" target="_parent" title="US-ASCII">US-ASCII</a>, for example, has 256 1-byte characters. This string, encoded in US-ASCII, has six characters that are stored as six bytes:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Hello!</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>US-ASCII</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; &quot;Hello!&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encoding'>encoding</span>                       <span class='comment'># =&gt; #&lt;Encoding:US-ASCII&gt;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_bytes'>bytes</span>                          <span class='comment'># =&gt; [72, 101, 108, 108, 111, 33]</span></code></pre>

<p>Other encodings may involve multi-byte characters. <a href="https://en.wikipedia.org/wiki/UTF-8" target="_parent" title="UTF-8">UTF-8</a>, for example, encodes more than one million characters, encoding each in one to four bytes. The lowest-valued of these characters correspond to ASCII characters, and so are 1-byte characters:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Hello!</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; &quot;Hello!&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_bytes'>bytes</span>      <span class='comment'># =&gt; [72, 101, 108, 108, 111, 33]</span></code></pre>

<p>Other characters, such as the Euro symbol, are multi-byte:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u20ac</span><span class='tstring_end'>&quot;</span></span> <span class='comment'># =&gt; &quot;€&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_bytes'>bytes</span>      <span class='comment'># =&gt; [226, 130, 172]</span></code></pre>

<h2 id="label-The+Encoding+Class">The Encoding Class</h2>

<h3 id="label-Encoding+Objects">Encoding Objects</h3>

<p>Ruby encodings are defined by constants in class Encoding. There can be only one instance of Encoding for each of these constants. Method Encoding.list returns an array of Encoding objects (one for each constant):</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Encoding</span>.<span class='id identifier rubyid_list'>list</span>.<span class='id identifier rubyid_size'>size</span>        <span class='comment'># =&gt; 103
</span><span class='const'>Encoding</span>.<span class='id identifier rubyid_list'>list</span>.<span class='id identifier rubyid_first'>first</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># =&gt; Encoding
</span><span class='const'>Encoding</span>.<span class='id identifier rubyid_list'>list</span>.<span class='id identifier rubyid_take'>take</span>(<span class='int'>3</span>)
<span class='comment'># =&gt; [#&lt;Encoding:ASCII-8BIT&gt;, #&lt;Encoding:UTF-8&gt;, #&lt;Encoding:US-ASCII&gt;]</span></code></pre>

<h3 id="label-Names+and+Aliases">Names and Aliases</h3>

<p>Method Encoding#name returns the name of an Encoding:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Encoding</span><span class='op'>::</span><span class='const'>ASCII_8BIT</span>.<span class='id identifier rubyid_name'>name</span>  <span class='comment'># =&gt; &quot;ASCII-8BIT&quot;
</span><span class='const'>Encoding</span><span class='op'>::</span><span class='const'>WINDOWS_31J</span>.<span class='id identifier rubyid_name'>name</span> <span class='comment'># =&gt; &quot;Windows-31J&quot;</span></code></pre>

<p>An Encoding object has zero or more aliases; method Encoding#names returns an array containing the name and all aliases:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Encoding</span><span class='op'>::</span><span class='const'>ASCII_8BIT</span>.<span class='id identifier rubyid_names'>names</span>
<span class='comment'># =&gt; [&quot;ASCII-8BIT&quot;, &quot;BINARY&quot;]
</span><span class='const'>Encoding</span><span class='op'>::</span><span class='const'>WINDOWS_31J</span>.<span class='id identifier rubyid_names'>names</span>
<span class='comment'>#=&gt; [&quot;Windows-31J&quot;, &quot;CP932&quot;, &quot;csWindows31J&quot;, &quot;SJIS&quot;, &quot;PCK&quot;]</span></code></pre>

<p>Method Encoding.aliases returns a hash of all alias/name pairs:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Encoding</span>.<span class='id identifier rubyid_aliases'>aliases</span>.<span class='id identifier rubyid_size'>size</span> <span class='comment'># =&gt; 71
</span><span class='const'>Encoding</span>.<span class='id identifier rubyid_aliases'>aliases</span>.<span class='id identifier rubyid_take'>take</span>(<span class='int'>3</span>)
<span class='comment'># =&gt; [[&quot;BINARY&quot;, &quot;ASCII-8BIT&quot;], [&quot;CP437&quot;, &quot;IBM437&quot;], [&quot;CP720&quot;, &quot;IBM720&quot;]]</span></code></pre>

<p>Method Encoding.name_list returns an array of all the encoding names and aliases:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Encoding</span>.<span class='id identifier rubyid_name_list'>name_list</span>.<span class='id identifier rubyid_size'>size</span> <span class='comment'># =&gt; 175
</span><span class='const'>Encoding</span>.<span class='id identifier rubyid_name_list'>name_list</span>.<span class='id identifier rubyid_take'>take</span>(<span class='int'>3</span>)
<span class='comment'># =&gt; [&quot;ASCII-8BIT&quot;, &quot;UTF-8&quot;, &quot;US-ASCII&quot;]</span></code></pre>

<p>Method <code>name_list</code> returns more entries than method <code>list</code> because it includes both the names and their aliases.</p>

<p>Method Encoding.find returns the Encoding for a given name or alias, if it exists:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Encoding</span>.<span class='id identifier rubyid_find'>find</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>US-ASCII</span><span class='tstring_end'>&quot;</span></span>)       <span class='comment'># =&gt; #&lt;Encoding:US-ASCII&gt;
</span><span class='const'>Encoding</span>.<span class='id identifier rubyid_find'>find</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>US-ASCII</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_class'>class</span> <span class='comment'># =&gt; Encoding</span></code></pre>

<h3 id="label-Default+Encodings">Default Encodings</h3>

<p>Method Encoding.find, above, also returns a default Encoding for each of these special names:</p>
<ul><li>
<p><code>external</code>: the default external Encoding:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Encoding</span>.<span class='id identifier rubyid_find'>find</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>external</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;</span></code></pre>
</li><li>
<p><code>internal</code>: the default internal Encoding (may be <code>nil</code>):</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Encoding</span>.<span class='id identifier rubyid_find'>find</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>internal</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; nil</span></code></pre>
</li><li>
<p><code>locale</code>: the default Encoding for a string from the environment:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Encoding</span>.<span class='id identifier rubyid_find'>find</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>locale</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;  # Linux
</span><span class='const'>Encoding</span>.<span class='id identifier rubyid_find'>find</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>locale</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; #&lt;Encoding:IBM437&gt; # Windows</span></code></pre>
</li><li>
<p><code>filesystem</code>: the default Encoding for a string from the filesystem:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Encoding</span>.<span class='id identifier rubyid_find'>find</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>filesystem</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;</span></code></pre>
</li></ul>

<p>Method Encoding.default_external returns the default external Encoding:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Encoding</span>.<span class='id identifier rubyid_default_external'>default_external</span> <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;</span></code></pre>

<p>Method Encoding.default_external= sets that value:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Encoding</span>.<span class='id identifier rubyid_default_external'>default_external</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>US-ASCII</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; &quot;US-ASCII&quot;
</span><span class='const'>Encoding</span>.<span class='id identifier rubyid_default_external'>default_external</span>              <span class='comment'># =&gt; #&lt;Encoding:US-ASCII&gt;</span></code></pre>

<p>Method Encoding.default_internal returns the default internal Encoding:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Encoding</span>.<span class='id identifier rubyid_default_internal'>default_internal</span> <span class='comment'># =&gt; nil</span></code></pre>

<p>Method Encoding.default_internal= sets the default internal Encoding:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Encoding</span>.<span class='id identifier rubyid_default_internal'>default_internal</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>US-ASCII</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># =&gt; &quot;US-ASCII&quot;
</span><span class='const'>Encoding</span>.<span class='id identifier rubyid_default_internal'>default_internal</span>              <span class='comment'># =&gt; #&lt;Encoding:US-ASCII&gt;</span></code></pre>

<h3 id="label-Compatible+Encodings">Compatible Encodings</h3>

<p>Method Encoding.compatible? returns whether two given objects are encoding-compatible (that is, whether they can be concatenated); returns the Encoding of the concatenated string, or <code>nil</code> if incompatible:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_rus'>rus</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u{442 435 441 442}</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_eng'>eng</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>text</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>Encoding</span>.<span class='id identifier rubyid_compatible?'>compatible?</span>(<span class='id identifier rubyid_rus'>rus</span><span class='comma'>,</span> <span class='id identifier rubyid_eng'>eng</span>) <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;
</span>
<span class='id identifier rubyid_s0'>s0</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\xa1\xa1</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>iso-8859-1</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;\xA1\xA1&quot;
</span><span class='id identifier rubyid_s1'>s1</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\xa1\xa1</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>euc-jp</span><span class='tstring_end'>&#39;</span></span>)     <span class='comment'># =&gt; &quot;\x{A1A1}&quot;
</span><span class='const'>Encoding</span>.<span class='id identifier rubyid_compatible?'>compatible?</span>(<span class='id identifier rubyid_s0'>s0</span><span class='comma'>,</span> <span class='id identifier rubyid_s1'>s1</span>)                 <span class='comment'># =&gt; nil</span></code></pre>

<h2 id="label-String+Encoding">String Encoding</h2>

<p>A Ruby String object has an encoding that is an instance of class Encoding. The encoding may be retrieved by method String#encoding.</p>

<p>The default encoding for a string literal is the script encoding; see <a href="file.encodings.html">Script Encoding</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>s</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_encoding'>encoding</span> <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;</span></code></pre>

<p>The default encoding for a string created with method String.new is:</p>
<ul><li>
<p>For a String object argument, the encoding of that string.</p>
</li><li>
<p>For a string literal, the script encoding; see <a href="file.encodings.html">Script Encoding</a>.</p>
</li></ul>

<p>In either case, any encoding may be specified:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='const'>String</span>.<span class='id identifier rubyid_new'>new</span>(<span class='label'>encoding:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&#39;</span></span>)             <span class='comment'># =&gt; &quot;&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encoding'>encoding</span>                                    <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='const'>String</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>encoding:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ASCII-8BIT</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encoding'>encoding</span>                                    <span class='comment'># =&gt; #&lt;Encoding:ASCII-8BIT&gt;</span></code></pre>

<p>The encoding for a string may be changed:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>R\xC3\xA9sum\xC3\xA9</span><span class='tstring_end'>&quot;</span></span>     <span class='comment'># =&gt; &quot;Résumé&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encoding'>encoding</span>                     <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ISO-8859-1</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;R\xC3\xA9sum\xC3\xA9&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encoding'>encoding</span>                     <span class='comment'># =&gt; #&lt;Encoding:ISO-8859-1&gt;</span></code></pre>

<p>Changing the assigned encoding does not alter the content of the string; it changes only the way the content is to be interpreted:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span>                         <span class='comment'># =&gt; &quot;R\xC3\xA9sum\xC3\xA9&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;Résumé&quot;</span></code></pre>

<p>The actual content of a string may also be altered; see <a href="#label-Transcoding+a+String">Transcoding a String</a>.</p>

<p>Here are a couple of useful query methods:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&quot;</span></span>)         <span class='comment'># =&gt; &quot;abc&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_ascii_only?'>ascii_only?</span>                             <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>abc\u{6666}</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; &quot;abc晦&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_ascii_only?'>ascii_only?</span>                             <span class='comment'># =&gt; false
</span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\xc2\xa1</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; &quot;¡&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_valid_encoding?'>valid_encoding?</span>                      <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\xc2</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&quot;</span></span>)     <span class='comment'># =&gt; &quot;\xC2&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_valid_encoding?'>valid_encoding?</span>                      <span class='comment'># =&gt; false</span></code></pre>

<h2 id="label-Symbol+and+Regexp+Encodings">Symbol and Regexp Encodings</h2>

<p>The string stored in a Symbol or Regexp object also has an encoding; the encoding may be retrieved by method Symbol#encoding or Regexp#encoding.</p>

<p>The default encoding for these, however, is:</p>
<ul><li>
<p>US-ASCII, if all characters are US-ASCII.</p>
</li><li>
<p>The script encoding, otherwise; see (Script <a href="file.encodings.html">Encoding)</a>.</p>
</li></ul>

<h2 id="label-Filesystem+Encoding">Filesystem Encoding</h2>

<p>The filesystem encoding is the default Encoding for a string from the filesystem:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Encoding</span>.<span class='id identifier rubyid_find'>find</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>filesystem</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;</span></code></pre>

<h2 id="label-Locale+Encoding">Locale Encoding</h2>

<p>The locale encoding is the default encoding for a string from the environment, other than from the filesystem:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Encoding</span>.<span class='id identifier rubyid_find'>find</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>locale</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;Encoding:IBM437&gt;</span></code></pre>

<h2 id="label-Stream+Encodings">Stream Encodings</h2>

<p>Certain stream objects can have two encodings; these objects include instances of:</p>
<ul><li>
<p>IO.</p>
</li><li>
<p>File.</p>
</li><li>
<p>ARGF.</p>
</li><li>
<p>StringIO.</p>
</li></ul>

<p>The two encodings are:</p>
<ul><li>
<p>An <em>external</em> <em>encoding</em>, which identifies the encoding of the stream.</p>
</li><li>
<p>An <em>internal</em> <em>encoding</em>, which (if not <code>nil</code>) specifies the encoding to be used for the string constructed from the stream.</p>
</li></ul>

<h3 id="label-External+Encoding">External Encoding</h3>

<p>The external encoding, which is an Encoding object, specifies how bytes read from the stream are to be interpreted as characters.</p>

<p>The default external encoding is:</p>
<ul><li>
<p>UTF-8 for a text stream.</p>
</li><li>
<p>ASCII-8BIT for a binary stream.</p>
</li></ul>

<p>The default external encoding is returned by method Encoding.default_external, and may be set by:</p>
<ul><li>
<p>Ruby command-line options <code>--external_encoding</code> or <code>-E</code>.</p>
</li></ul>

<p>You can also set the default external encoding using method Encoding.default_external=, but doing so may cause problems; strings created before and after the change may have a different encodings.</p>

<p>For an IO or File object, the external encoding may be set by:</p>
<ul><li>
<p>Open options <code>external_encoding</code> or <code>encoding</code>, when the object is created; see <a href="file.IO@Open+Options.html">Open Options</a>.</p>
</li></ul>

<p>For an IO, File, ARGF, or StringIO object, the external encoding may be set by:</p>
<ul><li>
<p>Methods <code>set_encoding</code> or (except for ARGF) <code>set_encoding_by_bom</code>.</p>
</li></ul>

<h3 id="label-Internal+Encoding">Internal Encoding</h3>

<p>The internal encoding, which is an Encoding object or <code>nil</code>, specifies how characters read from the stream are to be converted to characters in the internal encoding; those characters become a string whose encoding is set to the internal encoding.</p>

<p>The default internal encoding is <code>nil</code> (no conversion). It is returned by method Encoding.default_internal, and may be set by:</p>
<ul><li>
<p>Ruby command-line options <code>--internal_encoding</code> or <code>-E</code>.</p>
</li></ul>

<p>You can also set the default internal encoding using method Encoding.default_internal=, but doing so may cause problems; strings created before and after the change may have a different encodings.</p>

<p>For an IO or File object, the internal encoding may be set by:</p>
<ul><li>
<p>Open options <code>internal_encoding</code> or <code>encoding</code>, when the object is created; see <a href="file.IO@Open+Options.html">Open Options</a>.</p>
</li></ul>

<p>For an IO, File, ARGF, or StringIO object, the internal encoding may be set by:</p>
<ul><li>
<p>Method <code>set_encoding</code>.</p>
</li></ul>

<h2 id="label-Script+Encoding">Script Encoding</h2>

<p>A Ruby script has a script encoding, which may be retrieved by:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>__ENCODING__</span> <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;</span></code></pre>

<p>The default script encoding is UTF-8; a Ruby source file may set its script encoding with a magic comment on the first line of the file (or second line, if there is a shebang on the first). The comment must contain the word <code>coding</code> or <code>encoding</code>, followed by a colon, space and the Encoding name or alias:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># encoding: ISO-8859-1
</span><span class='kw'>__ENCODING__</span> <span class='comment'>#=&gt; #&lt;Encoding:ISO-8859-1&gt;</span></code></pre>

<h2 id="label-Transcoding">Transcoding</h2>

<p><em>Transcoding</em> is the process of changing a sequence of characters from one encoding to another.</p>

<p>As far as possible, the characters remain the same, but the bytes that represent them may change.</p>

<p>The handling for characters that cannot be represented in the destination encoding may be specified by @Encoding+Options.</p>

<h3 id="label-Transcoding+a+String">Transcoding a String</h3>

<p>Each of these methods transcodes a string:</p>
<ul><li>
<p>String#encode: Transcodes <code>self</code> into a new string according to given encodings and options.</p>
</li><li>
<p>String#encode!: Like String#encode, but transcodes <code>self</code> in place.</p>
</li><li>
<p>String#scrub: Transcodes <code>self</code> into a new string by replacing invalid byte sequences with a given or default replacement string.</p>
</li><li>
<p>String#scrub!: Like String#scrub, but transcodes <code>self</code> in place.</p>
</li><li>
<p>String#unicode_normalize: Transcodes <code>self</code> into a new string according to Unicode normalization.</p>
</li><li>
<p>String#unicode_normalize!: Like String#unicode_normalize, but transcodes <code>self</code> in place.</p>
</li></ul>

<h2 id="label-Transcoding+a+Stream">Transcoding a Stream</h2>

<p>Each of these methods may transcode a stream; whether it does so depends on the external and internal encodings:</p>
<ul><li>
<p>IO.foreach: Yields each line of given stream to the block.</p>
</li><li>
<p>IO.new: Creates and returns a new IO object for the given integer file descriptor.</p>
</li><li>
<p>IO.open: Creates a new IO object.</p>
</li><li>
<p>IO.pipe: Creates a connected pair of reader and writer IO objects.</p>
</li><li>
<p>IO.popen: Creates an IO object to interact with a subprocess.</p>
</li><li>
<p>IO.read: Returns a string with all or a subset of bytes from the given stream.</p>
</li><li>
<p>IO.readlines: Returns an array of strings, which are the lines from the given stream.</p>
</li><li>
<p>IO.write: Writes a given string to the given stream.</p>
</li></ul>

<p>This example writes a string to a file, encoding it as ISO-8859-1, then reads the file into a new string, encoding it as UTF-8:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>R\u00E9sum\u00E9</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_ext_enc'>ext_enc</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ISO-8859-1</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_int_enc'>int_enc</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&#39;</span></span>

<span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span><span class='comma'>,</span> <span class='label'>external_encoding:</span> <span class='id identifier rubyid_ext_enc'>ext_enc</span>)
<span class='id identifier rubyid_raw_text'>raw_text</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_binread'>binread</span>(<span class='id identifier rubyid_path'>path</span>)

<span class='id identifier rubyid_transcoded_text'>transcoded_text</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='label'>external_encoding:</span> <span class='id identifier rubyid_ext_enc'>ext_enc</span><span class='comma'>,</span> <span class='label'>internal_encoding:</span> <span class='id identifier rubyid_int_enc'>int_enc</span>)

<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_raw_text'>raw_text</span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_transcoded_text'>transcoded_text</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>R\xE9sum\xE9</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Résumé</span><span class='tstring_end'>&quot;</span></span></code></pre>

<h2 id="label-Encoding+Options">Encoding Options</h2>

<p>A number of methods in the Ruby core accept keyword arguments as encoding options.</p>

<p>Some of the options specify or utilize a <em>replacement</em> <em>string</em>, to be used in certain transcoding operations. A replacement string may be in any encoding that can be converted to the encoding of the destination string.</p>

<p>These keyword-value pairs specify encoding options:</p>
<ul><li>
<p>For an invalid byte sequence:</p>
<ul><li>
<p><code>:invalid: nil</code> (default): Raise exception.</p>
</li><li>
<p><code>:invalid: :replace</code>: Replace each invalid byte sequence with the replacement string.</p>
</li></ul>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x80foo\x80</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ISO-8859-3</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># Raises Encoding::InvalidByteSequenceError.
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ISO-8859-3</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>invalid:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_replace'>replace</span>) <span class='comment'># =&gt; &quot;?foo?&quot;</span></code></pre>
</li><li>
<p>For an undefined character:</p>
<ul><li>
<p><code>:undef: nil</code> (default): Raise exception.</p>
</li><li>
<p><code>:undef: :replace</code>: Replace each undefined character with the replacement string.</p>
</li></ul>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x80foo\x80</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x80</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ASCII-8BIT</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># Raises Encoding::UndefinedConversionError.
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ASCII-8BIT</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>undef:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_replace'>replace</span>) <span class='comment'># =&gt; &quot;�foo�&quot;</span></code></pre>
</li><li>
<p>Replacement string:</p>
<ul><li>
<p><code>:replace: nil</code> (default): Set replacement string to default value: <code>&quot;\uFFFD&quot;</code> (“�”) for a Unicode encoding, <code>&#39;?&#39;</code> otherwise.</p>
</li><li>
<p><code>:replace: <em>some_string</em></code>: Set replacement string to the given <code>some_string</code>; overrides <code>:fallback</code>.</p>
</li></ul>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\xA5foo\xA5</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> {<span class='symbeg'>:</span><span class='kw'>undef</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_replace'>replace</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_replace'>replace</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xyzzy</span><span class='tstring_end'>&#39;</span></span>}
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ISO-8859-3</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>) <span class='comment'># =&gt; &quot;xyzzyfooxyzzy&quot;</span></code></pre>
</li><li>
<p>Replacement fallback:</p>

<p>One of these may be specified:</p>
<ul><li>
<p><code>:fallback: nil</code> (default): No replacement fallback.</p>
</li><li>
<p><code>:fallback: <em>hash_like_object</em></code>: Set replacement fallback to the given <code>hash_like_object</code>; the replacement string is <code><em>hash_like_object</em>[X]</code>.</p>
</li><li>
<p><code>:fallback: <em>method</em></code>: Set replacement fallback to the given <code>method</code>; the replacement string is <code><em>method</em>(X)</code>.</p>
</li><li>
<p><code>:fallback: <em>proc</em></code>: Set replacement fallback to the given <code>proc</code>; the replacement string is <code><em>proc</em>[X]</code>.</p>
</li></ul>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u3042foo\u3043</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_hash'>hash</span> <span class='op'>=</span> {<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u3042</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xyzzy</span><span class='tstring_end'>&#39;</span></span>}
<span class='id identifier rubyid_hash'>hash</span>.<span class='id identifier rubyid_default'>default</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>XYZZY</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ASCII</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>fallback:</span> <span class='id identifier rubyid_h'>h</span>) <span class='comment'># =&gt; &quot;xyzzyfooXYZZY&quot;
</span>
<span class='kw'>def</span> (<span class='id identifier rubyid_fallback'>fallback</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>U+%.4X</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_escape'>escape</span>(<span class='id identifier rubyid_x'>x</span>)
  <span class='kw'>self</span> <span class='op'>%</span> <span class='id identifier rubyid_x'>x</span>.<span class='id identifier rubyid_unpack'>unpack</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>U</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>end</span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u{3042}</span><span class='tstring_end'>&quot;</span></span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>US-ASCII</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>fallback:</span> <span class='id identifier rubyid_fallback'>fallback</span>.<span class='id identifier rubyid_method'>method</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_escape'>escape</span>)) <span class='comment'># =&gt; &quot;U+3042&quot;
</span>
<span class='id identifier rubyid_proc'>proc</span> <span class='op'>=</span> <span class='const'>Proc</span>.<span class='id identifier rubyid_new'>new</span> {<span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u3042</span><span class='tstring_end'>&quot;</span></span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xyzzy</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>XYZZY</span><span class='tstring_end'>&#39;</span></span> }
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ASCII</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>fallback:</span> <span class='id identifier rubyid_proc'>proc</span>) <span class='comment'># =&gt; &quot;XYZZYfooXYZZY&quot;</span></code></pre>
</li><li>
<p>XML entities:</p>

<p>One of these may be specified:</p>
<ul><li>
<p><code>:xml: nil</code> (default): No handling for XML entities.</p>
</li><li>
<p><code>:xml: :text</code>: Treat source text as XML; replace each undefined character with its upper-case hexdecimal numeric character reference, except that:</p>
<ul><li>
<p><code>&amp;</code> is replaced with <code>&amp;amp;</code>.</p>
</li><li>
<p><code>&lt;</code> is replaced with <code>&amp;lt;</code>.</p>
</li><li>
<p><code>&gt;</code> is replaced with <code>&amp;gt;</code>.</p>
</li></ul>
</li><li>
<p><code>:xml: :attr</code>: Treat source text as XML attribute value; replace each undefined character with its upper-case hexdecimal numeric character reference, except that:</p>
<ul><li>
<p>The replacement string <code>r</code> is double-quoted (<code>&quot;r&quot;</code>).</p>
</li><li>
<p>Each embedded double-quote is replaced with <code>&amp;quot;</code>.</p>
</li><li>
<p><code>&amp;</code> is replaced with <code>&amp;amp;</code>.</p>
</li><li>
<p><code>&lt;</code> is replaced with <code>&amp;lt;</code>.</p>
</li><li>
<p><code>&gt;</code> is replaced with <code>&amp;gt;</code>.</p>
</li></ul>
</li></ul>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo&quot;&lt;&amp;&gt;&quot;bar</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u3042</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ASCII</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>xml:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_text'>text</span>) <span class='comment'># =&gt; &quot;foo\&quot;&amp;lt;&amp;amp;&amp;gt;\&quot;bar&amp;#x3042;&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ASCII</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>xml:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_attr'>attr</span>) <span class='comment'># =&gt; &quot;\&quot;foo&amp;quot;&amp;lt;&amp;amp;&amp;gt;&amp;quot;bar&amp;#x3042;\&quot;&quot;</span></code></pre>
</li><li>
<p>Newlines:</p>

<p>One of these may be specified:</p>
<ul><li>
<p><code>:cr_newline: true</code>: Replace each line-feed character (<code>&quot;\n&quot;</code>) with a carriage-return character (<code>&quot;\r&quot;</code>).</p>
</li><li>
<p><code>:crlf_newline: true</code>: Replace each line-feed character (<code>&quot;\n&quot;</code>) with a carriage-return/line-feed string (<code>&quot;\r\n&quot;</code>).</p>
</li><li>
<p><code>:universal_newline: true</code>: Replace each carriage-return character (<code>&quot;\r&quot;</code>) and each carriage-return/line-feed string (<code>&quot;\r\n&quot;</code>) with a line-feed character (<code>&quot;\n&quot;</code>).</p>
</li></ul>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n \r \r\n</span><span class='tstring_end'>&quot;</span></span>                           <span class='comment'># =&gt; &quot;\n \r \r\n&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ASCII</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>cr_newline:</span> <span class='kw'>true</span>)        <span class='comment'># =&gt; &quot;\r \r \r\r&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ASCII</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>crlf_newline:</span> <span class='kw'>true</span>)      <span class='comment'># =&gt; &quot;\r\n \r \r\r\n&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ASCII</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>universal_newline:</span> <span class='kw'>true</span>) <span class='comment'># =&gt; &quot;\n \n \n&quot;</span></code></pre>
</li></ul>

<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>