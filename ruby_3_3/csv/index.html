<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: CSV &mdash; csv  Ruby-3.3.9 p170</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "CSV",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../.'>Ruby-3.3.9</a> &raquo; 
      <a href='.'>csv</a> &raquo; 
      <a href='_index.html#alpha_C'>Index (C)</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>CSV&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: CSV</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="CSV/InputRecordSeparator.html" title="CSV::InputRecordSeparator (module)"><code>InputRecordSeparator</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a href="CSV/FieldInfo.html" title="CSV::FieldInfo (class)"><code>FieldInfo</code></a>,
        <a href="CSV/FieldsConverter.html" title="CSV::FieldsConverter (class)"><code>FieldsConverter</code></a>,
        <a href="CSV/Parser.html" title="CSV::Parser (class)"><code>Parser</code></a>,
        <a href="CSV/Row.html" title="CSV::Row (class)"><code>Row</code></a>,
        <a href="CSV/Table.html" title="CSV::Table (class)"><code>Table</code></a>,
        <a href="CSV/Writer.html" title="CSV::Writer (class)"><code>Writer</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Exceptions:</div>
      <div class='box_11'>
          <a href="CSV/InvalidEncodingError.html" title="CSV::InvalidEncodingError (class)"><code>InvalidEncodingError</code></a>,
        <a href="CSV/MalformedCSVError.html" title="CSV::MalformedCSVError (class)"><code>MalformedCSVError</code></a>      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          Forwardable
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          Enumerable
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'>Object</span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L837'>lib/csv.rb</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv/fields_converter.rb#L3'>lib/csv/fields_converter.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv/input_record_separator.rb#L4'>lib/csv/input_record_separator.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv/parser.rb#L9'>lib/csv/parser.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv/row.rb#L5'>lib/csv/row.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv/table.rb#L5'>lib/csv/table.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv/version.rb#L3'>lib/csv/version.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv/writer.rb#L6'>lib/csv/writer.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<h4 id="label-CSV+Data">CSV Data</h4>

<p>CSV (comma-separated values) data is a text representation of a table:</p>
<ul><li>
<p>A <em>row</em> <em>separator</em> delimits table rows. A common row separator is the newline character <code>&quot;\n&quot;</code>.</p>
</li><li>
<p>A <em>column</em> <em>separator</em> delimits fields in a row. A common column separator is the comma character <code>&quot;,&quot;</code>.</p>
</li></ul>

<p>This CSV String, with row separator <code>&quot;\n&quot;</code> and column separator <code>&quot;,&quot;</code>, has three rows and two columns:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>Despite the name CSV, a CSV representation can use different separators.</p>

<p>For more about tables, see the Wikipedia article “<a href="https://en.wikipedia.org/wiki/Table_(information" target="_parent" title=") {CSV::Table">) {CSV::Table</a> (information)}”, especially its section “<a href="https://en.wikipedia.org/wiki/Table_(information)#Simple_table" target="_parent" title="Simple table">Simple table</a>”</p>

<h3 id="label-Class+CSV">Class CSV</h3>

<p>Class CSV provides methods for:</p>
<ul><li>
<p>Parsing CSV data from a String object, a File (via its file path), or an IO object.</p>
</li><li>
<p>Generating CSV data to a String object.</p>
</li></ul>

<p>To make CSV available:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>csv</span><span class='tstring_end'>&#39;</span></span></code></pre>

<p>All examples here assume that this has been done.</p>

<h3 id="label-Keeping+It+Simple">Keeping It Simple</h3>

<p>A CSV object has dozens of instance methods that offer fine-grained control of parsing and generating CSV data. For many needs, though, simpler approaches will do.</p>

<p>This section summarizes the singleton methods in CSV that allow you to parse and generate without explicitly creating CSV objects. For details, follow the links.</p>

<h4 id="label-Simple+Parsing">Simple Parsing</h4>

<p>Parsing methods commonly return either of:</p>
<ul><li>
<p>An Array of Arrays of Strings:</p>
<ul><li>
<p>The outer Array is the entire “table”.</p>
</li><li>
<p>Each inner Array is a row.</p>
</li><li>
<p>Each String is a field.</p>
</li></ul>
</li><li>
<p>A <a href="CSV/Table.html" title="CSV::Table (class)"><code>Table</code></a> object.  For details, see <a href='#label-CSV+with+Headers'>\ with Headers</a>.</p>
</li></ul>

<h5 id="label-Parsing+a+String">Parsing a String</h5>

<p>The input to be parsed can be a string:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>Method <a href="#parse-class_method" title="CSV.parse (method)">.parse</a> returns the entire CSV data:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="CSV.parse (method)">parse</a></span>(<span class='id identifier rubyid_string'>string</span>) <span class='comment'># =&gt; [[&quot;foo&quot;, &quot;0&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span></code></pre>

<p>Method <a href="#parse_line-class_method" title="CSV.parse_line (method)">.parse_line</a> returns only the first row:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_parse_line'><a href="#parse_line-class_method" title="CSV.parse_line (method)">parse_line</a></span>(<span class='id identifier rubyid_string'>string</span>) <span class='comment'># =&gt; [&quot;foo&quot;, &quot;0&quot;]</span></code></pre>

<p>CSV extends class String with instance method <a href="String.html#parse_csv-instance_method" title="String#parse_csv (method)">String#parse_csv</a>, which also returns only the first row:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_parse_csv'>parse_csv</span> <span class='comment'># =&gt; [&quot;foo&quot;, &quot;0&quot;]</span></code></pre>

<h5 id="label-Parsing+Via+a+File+Path">Parsing Via a File Path</h5>

<p>The input to be parsed can be in a file:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>)</code></pre>

<p>Method <a href="#read-class_method" title="CSV.read (method)">.read</a> returns the entire CSV data:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="CSV.read (method)">read</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>) <span class='comment'># =&gt; [[&quot;foo&quot;, &quot;0&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span></code></pre>

<p>Method <a href="#foreach-class_method" title="CSV.foreach (method)">.foreach</a> iterates, passing each row to the given block:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_foreach'><a href="#foreach-class_method" title="CSV.foreach (method)">foreach</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_row'>row</span>
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby">[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0</span><span class='tstring_end'>&quot;</span></span>]
[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span>]
[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>2</span><span class='tstring_end'>&quot;</span></span>]</code></pre>

<p>Method <a href="#table-class_method" title="CSV.table (method)">.table</a> returns the entire CSV data as a <a href="CSV/Table.html" title="CSV::Table (class)"><code>Table</code></a> object:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_table'><a href="#table-class_method" title="CSV.table (method)">table</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>) <span class='comment'># =&gt; #&lt;CSV::Table mode:col_or_row row_count:3&gt;</span></code></pre>

<h5 id="label-Parsing+from+an+Open+IO+Stream">Parsing from an Open IO Stream</h5>

<p>The input to be parsed can be in an open IO stream:</p>

<p>Method <a href="#read-class_method" title="CSV.read (method)">.read</a> returns the entire CSV data:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>File</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
  <span class='const'>CSV</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="CSV.read (method)">read</a></span>(<span class='id identifier rubyid_file'>file</span>)
<span class='kw'>end</span> <span class='comment'># =&gt; [[&quot;foo&quot;, &quot;0&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span></code></pre>

<p>As does method <a href="#parse-class_method" title="CSV.parse (method)">.parse</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>File</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
  <span class='const'>CSV</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="CSV.parse (method)">parse</a></span>(<span class='id identifier rubyid_file'>file</span>)
<span class='kw'>end</span> <span class='comment'># =&gt; [[&quot;foo&quot;, &quot;0&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span></code></pre>

<p>Method <a href="#parse_line-class_method" title="CSV.parse_line (method)">.parse_line</a> returns only the first row:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>File</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
 <span class='const'>CSV</span>.<span class='id identifier rubyid_parse_line'><a href="#parse_line-class_method" title="CSV.parse_line (method)">parse_line</a></span>(<span class='id identifier rubyid_file'>file</span>)
<span class='kw'>end</span> <span class='comment'># =&gt; [&quot;foo&quot;, &quot;0&quot;]</span></code></pre>

<p>Method <a href="#foreach-class_method" title="CSV.foreach (method)">.foreach</a> iterates, passing each row to the given block:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>File</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
  <span class='const'>CSV</span>.<span class='id identifier rubyid_foreach'><a href="#foreach-class_method" title="CSV.foreach (method)">foreach</a></span>(<span class='id identifier rubyid_file'>file</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
    <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_row'>row</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby">[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0</span><span class='tstring_end'>&quot;</span></span>]
[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span>]
[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>2</span><span class='tstring_end'>&quot;</span></span>]</code></pre>

<p>Method <a href="#table-class_method" title="CSV.table (method)">.table</a> returns the entire CSV data as a <a href="CSV/Table.html" title="CSV::Table (class)"><code>Table</code></a> object:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>File</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
  <span class='const'>CSV</span>.<span class='id identifier rubyid_table'><a href="#table-class_method" title="CSV.table (method)">table</a></span>(<span class='id identifier rubyid_file'>file</span>)
<span class='kw'>end</span> <span class='comment'># =&gt; #&lt;CSV::Table mode:col_or_row row_count:3&gt;</span></code></pre>

<h4 id="label-Simple+Generating">Simple Generating</h4>

<p>Method <a href="#generate-class_method" title="CSV.generate (method)">.generate</a> returns a String; this example uses method <a href="#<<-instance_method" title="CSV#&lt;&lt; (method)">#&lt;&lt;</a> to append the rows that are to be generated:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_output_string'>output_string</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="CSV.generate (method)">generate</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span>]
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>1</span>]
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>2</span>]
<span class='kw'>end</span>
<span class='id identifier rubyid_output_string'>output_string</span> <span class='comment'># =&gt; &quot;foo,0\nbar,1\nbaz,2\n&quot;</span></code></pre>

<p>Method <a href="#generate_line-class_method" title="CSV.generate_line (method)">.generate_line</a> returns a String containing the single row constructed from an Array:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_generate_line'><a href="#generate_line-class_method" title="CSV.generate_line (method)">generate_line</a></span>([<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0</span><span class='tstring_end'>&#39;</span></span>]) <span class='comment'># =&gt; &quot;foo,0\n&quot;</span></code></pre>

<p>CSV extends class Array with instance method <a href="Array.html#to_csv-instance_method" title="Array#to_csv (method)">Array#to_csv</a>, which forms an Array into a String:</p>

<pre class="code ruby"><code class="ruby">[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0</span><span class='tstring_end'>&#39;</span></span>].<span class='id identifier rubyid_to_csv'>to_csv</span> <span class='comment'># =&gt; &quot;foo,0\n&quot;</span></code></pre>

<h4 id="label-22Filtering-22+CSV">“Filtering” CSV</h4>

<p>Method <a href="#filter-class_method" title="CSV.filter (method)">.filter</a> provides a Unix-style filter for CSV data. The input data is processed to form the output data:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_in_string'>in_string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_out_string'>out_string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>CSV</span>.<span class='id identifier rubyid_filter'><a href="#filter-class_method" title="CSV.filter (method)">filter</a></span>(<span class='id identifier rubyid_in_string'>in_string</span><span class='comma'>,</span> <span class='id identifier rubyid_out_string'>out_string</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
  <span class='id identifier rubyid_row'>row</span>[<span class='int'>0</span>] <span class='op'>=</span> <span class='id identifier rubyid_row'>row</span>[<span class='int'>0</span>].<span class='id identifier rubyid_upcase'>upcase</span>
  <span class='id identifier rubyid_row'>row</span>[<span class='int'>1</span>] <span class='op'>*=</span> <span class='int'>4</span>
<span class='kw'>end</span>
<span class='id identifier rubyid_out_string'>out_string</span> <span class='comment'># =&gt; &quot;FOO,0000\nBAR,1111\nBAZ,2222\n&quot;</span></code></pre>

<h3 id="label-CSV+Objects">CSV Objects</h3>

<p>There are three ways to create a CSV object:</p>
<ul><li>
<p>Method <a href="#new-class_method" title="CSV.new (method)">.new</a> returns a new CSV object.</p>
</li><li>
<p>Method <a href="#instance-class_method" title="CSV.instance (method)">.instance</a> returns a new or cached CSV object.</p>
</li><li>
<p>Method CSV() also returns a new or cached CSV object.</p>
</li></ul>

<h4 id="label-Instance+Methods">Instance Methods</h4>

<p>CSV has three groups of instance methods:</p>
<ul><li>
<p>Its own internally defined instance methods.</p>
</li><li>
<p>Methods included by module Enumerable.</p>
</li><li>
<p>Methods delegated to class IO. See below.</p>
</li></ul>

<h5 id="label-Delegated+Methods">Delegated Methods</h5>

<p>For convenience, a <code>CSV</code> object will delegate to many methods in class IO. (A few have wrapper “guard code” in CSV.) You may call:</p>
<ul><li>
<p><code>IO#binmode</code></p>
</li><li>
<p><a href="#binmode%3F-instance_method" title="CSV#binmode? (method)">#binmode?</a></p>
</li><li>
<p><code>IO#close</code></p>
</li><li>
<p><code>IO#close_read</code></p>
</li><li>
<p><code>IO#close_write</code></p>
</li><li>
<p><code>IO#closed?</code></p>
</li><li>
<p><a href="#eof-instance_method" title="CSV#eof (method)">#eof</a></p>
</li><li>
<p><a href="#eof%3F-instance_method" title="CSV#eof? (method)">#eof?</a></p>
</li><li>
<p><code>IO#external_encoding</code></p>
</li><li>
<p><code>IO#fcntl</code></p>
</li><li>
<p><code>IO#fileno</code></p>
</li><li>
<p><a href="#flock-instance_method" title="CSV#flock (method)">#flock</a></p>
</li><li>
<p><code>IO#flush</code></p>
</li><li>
<p><code>IO#fsync</code></p>
</li><li>
<p><code>IO#internal_encoding</code></p>
</li><li>
<p><a href="#ioctl-instance_method" title="CSV#ioctl (method)">#ioctl</a></p>
</li><li>
<p><code>IO#isatty</code></p>
</li><li>
<p><a href="#path-instance_method" title="CSV#path (method)">#path</a></p>
</li><li>
<p><code>IO#pid</code></p>
</li><li>
<p><code>IO#pos</code></p>
</li><li>
<p><code>IO#pos=</code></p>
</li><li>
<p><code>IO#reopen</code></p>
</li><li>
<p><a href="#rewind-instance_method" title="CSV#rewind (method)">#rewind</a></p>
</li><li>
<p><code>IO#seek</code></p>
</li><li>
<p><a href="#stat-instance_method" title="CSV#stat (method)">#stat</a></p>
</li><li>
<p><code>IO#string</code></p>
</li><li>
<p><code>IO#sync</code></p>
</li><li>
<p><code>IO#sync=</code></p>
</li><li>
<p><code>IO#tell</code></p>
</li><li>
<p><a href="#to_i-instance_method" title="CSV#to_i (method)">#to_i</a></p>
</li><li>
<p><a href="#to_io-instance_method" title="CSV#to_io (method)">#to_io</a></p>
</li><li>
<p><code>IO#truncate</code></p>
</li><li>
<p><code>IO#tty?</code></p>
</li></ul>

<h4 id="label-Options">Options</h4>

<p>The default values for options are:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="#DEFAULT_OPTIONS-constant" title="CSV::DEFAULT_OPTIONS (constant)">DEFAULT_OPTIONS</a></span> <span class='op'>=</span> {
  <span class='comment'># For both parsing and generating.
</span>  <span class='label'>col_sep:</span>            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='label'>row_sep:</span>            <span class='symbeg'>:</span><span class='id identifier rubyid_auto'>auto</span><span class='comma'>,</span>
  <span class='label'>quote_char:</span>         <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='comment'># For parsing.
</span>  <span class='label'>field_size_limit:</span>   <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>converters:</span>         <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>unconverted_fields:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>headers:</span>            <span class='kw'>false</span><span class='comma'>,</span>
  <span class='label'>return_headers:</span>     <span class='kw'>false</span><span class='comma'>,</span>
  <span class='label'>header_converters:</span>  <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>skip_blanks:</span>        <span class='kw'>false</span><span class='comma'>,</span>
  <span class='label'>skip_lines:</span>         <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>liberal_parsing:</span>    <span class='kw'>false</span><span class='comma'>,</span>
  <span class='label'>nil_value:</span>          <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>empty_value:</span>        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='label'>strip:</span>              <span class='kw'>false</span><span class='comma'>,</span>
  <span class='comment'># For generating.
</span>  <span class='label'>write_headers:</span>      <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>quote_empty:</span>        <span class='kw'>true</span><span class='comma'>,</span>
  <span class='label'>force_quotes:</span>       <span class='kw'>false</span><span class='comma'>,</span>
  <span class='label'>write_converters:</span>   <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>write_nil_value:</span>    <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>write_empty_value:</span>  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
}</code></pre>

<h5 id="label-Options+for+Parsing">Options for Parsing</h5>

<p>Options for parsing, described in detail below, include:</p>
<ul><li>
<p><a href="#row_sep-instance_method" title="CSV#row_sep (method)">#row_sep</a>: Specifies the row separator; used to delimit rows.</p>
</li><li>
<p><a href="#col_sep-instance_method" title="CSV#col_sep (method)">#col_sep</a>: Specifies the column separator; used to delimit fields.</p>
</li><li>
<p><a href="#quote_char-instance_method" title="CSV#quote_char (method)">#quote_char</a>: Specifies the quote character; used to quote fields.</p>
</li><li>
<p><a href="#field_size_limit-instance_method" title="CSV#field_size_limit (method)">#field_size_limit</a>: Specifies the maximum field size + 1 allowed. Deprecated since 3.2.3. Use <a href="#max_field_size-instance_method" title="CSV#max_field_size (method)">#max_field_size</a> instead.</p>
</li><li>
<p><a href="#max_field_size-instance_method" title="CSV#max_field_size (method)">#max_field_size</a>: Specifies the maximum field size allowed.</p>
</li><li>
<p><a href="#converters-instance_method" title="CSV#converters (method)">#converters</a>: Specifies the field converters to be used.</p>
</li><li>
<p><code>unconverted_fields</code>: Specifies whether unconverted fields are to be available.</p>
</li><li>
<p><a href="#headers-instance_method" title="CSV#headers (method)">#headers</a>: Specifies whether data contains headers, or specifies the headers themselves.</p>
</li><li>
<p><code>return_headers</code>: Specifies whether headers are to be returned.</p>
</li><li>
<p><a href="#header_converters-instance_method" title="CSV#header_converters (method)">#header_converters</a>: Specifies the header converters to be used.</p>
</li><li>
<p><code>skip_blanks</code>: Specifies whether blanks lines are to be ignored.</p>
</li><li>
<p><a href="#skip_lines-instance_method" title="CSV#skip_lines (method)">#skip_lines</a>: Specifies how comments lines are to be recognized.</p>
</li><li>
<p><code>strip</code>: Specifies whether leading and trailing whitespace are to be stripped from fields. This must be compatible with <code>col_sep</code>; if it is not, then an <code>ArgumentError</code> exception will be raised.</p>
</li><li>
<p><code>liberal_parsing</code>: Specifies whether CSV should attempt to parse non-compliant data.</p>
</li><li>
<p><code>nil_value</code>: Specifies the object that is to be substituted for each null (no-text) field.</p>
</li><li>
<p><code>empty_value</code>: Specifies the object that is to be substituted for each empty field.</p>
</li></ul>

<p></p>

<p></p>

<p></p>

<p></p>

<p></p>

<p></p>

<p></p>

<p></p>

<p></p>

<p></p>

<p></p>

<p></p>

<p></p>

<p></p>

<p></p>

<h5 id="label-Options+for+Generating">Options for Generating</h5>

<p>Options for generating, described in detail below, include:</p>
<ul><li>
<p><a href="#row_sep-instance_method" title="CSV#row_sep (method)">#row_sep</a>: Specifies the row separator; used to delimit rows.</p>
</li><li>
<p><a href="#col_sep-instance_method" title="CSV#col_sep (method)">#col_sep</a>: Specifies the column separator; used to delimit fields.</p>
</li><li>
<p><a href="#quote_char-instance_method" title="CSV#quote_char (method)">#quote_char</a>: Specifies the quote character; used to quote fields.</p>
</li><li>
<p><code>write_headers</code>: Specifies whether headers are to be written.</p>
</li><li>
<p><code>force_quotes</code>: Specifies whether each output field is to be quoted.</p>
</li><li>
<p><code>quote_empty</code>: Specifies whether each empty output field is to be quoted.</p>
</li><li>
<p><code>write_converters</code>: Specifies the field converters to be used in writing.</p>
</li><li>
<p><code>write_nil_value</code>: Specifies the object that is to be substituted for each <code>nil</code>-valued field.</p>
</li><li>
<p><code>write_empty_value</code>: Specifies the object that is to be substituted for each empty field.</p>
</li></ul>

<p></p>

<p></p>

<p></p>

<p></p>

<p></p>

<p></p>

<p></p>

<p></p>

<p></p>

<h4 id="label-CSV+with+Headers">CSV with Headers</h4>

<p><code>CSV</code> allows to specify column names of <code>CSV</code> file, whether they are in data, or provided separately. If headers are specified, reading methods return an instance of <a href="CSV/Table.html" title="CSV::Table (class)"><code>Table</code></a>, consisting of <a href="CSV/Row.html" title="CSV::Row (class)"><code>Row</code></a>.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Headers are part of data
</span><span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="CSV.parse (method)">parse</a></span>(<span class='heredoc_beg'>&lt;&lt;~ROWS</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span>)
<span class='ignored_sp'>  </span><span class='tstring_content'>Name,Department,Salary
</span><span class='ignored_sp'>  </span><span class='tstring_content'>Bob,Engineering,1000
</span><span class='ignored_sp'>  </span><span class='tstring_content'>Jane,Sales,2000
</span><span class='ignored_sp'>  </span><span class='tstring_content'>John,Management,5000
</span><span class='heredoc_end'>ROWS
</span>
<span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_class'>class</span>      <span class='comment'>#=&gt; CSV::Table
</span><span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_first'>first</span>      <span class='comment'>#=&gt; #&lt;CSV::Row &quot;Name&quot;:&quot;Bob&quot; &quot;Department&quot;:&quot;Engineering&quot; &quot;Salary&quot;:&quot;1000&quot;&gt;
</span><span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_first'>first</span>.<span class='id identifier rubyid_to_h'>to_h</span> <span class='comment'>#=&gt; {&quot;Name&quot;=&gt;&quot;Bob&quot;, &quot;Department&quot;=&gt;&quot;Engineering&quot;, &quot;Salary&quot;=&gt;&quot;1000&quot;}
</span>
<span class='comment'># Headers provided by developer
</span><span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="CSV.parse (method)">parse</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Bob,Engineering,1000</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='qsymbols'><span class='qsymbols_beg'>%i[</span><span class='tstring_content'>name</span><span class='words_sep'> </span><span class='tstring_content'>department</span><span class='words_sep'> </span><span class='tstring_content'>salary</span><span class='tstring_end'>]</span></span>)
<span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_first'>first</span>      <span class='comment'>#=&gt; #&lt;CSV::Row name:&quot;Bob&quot; department:&quot;Engineering&quot; salary:&quot;1000&quot;&gt;</span></code></pre>

<h4 id="label-Converters">Converters</h4>

<p>By default, each value (field or header) parsed by CSV is formed into a String. You can use a <em>field</em> <em>converter</em> or  <em>header</em> <em>converter</em> to intercept and modify the parsed values:</p>
<ul><li>
<p>See <a href='#label-Field+Converters'>Field Converters</a>.</p>
</li><li>
<p>See <a href='#label-Header+Converters'>Header Converters</a>.</p>
</li></ul>

<p>Also by default, each value to be written during generation is written ‘as-is’. You can use a <em>write</em> <em>converter</em> to modify values before writing.</p>
<ul><li>
<p>See <a href='#label-Write+Converters'>Write Converters</a>.</p>
</li></ul>

<h5 id="label-Specifying+Converters">Specifying Converters</h5>

<p>You can specify converters for parsing or generating in the <code>options</code> argument to various CSV methods:</p>
<ul><li>
<p>Option <a href="#converters-instance_method" title="CSV#converters (method)">#converters</a> for converting parsed field values.</p>
</li><li>
<p>Option <a href="#header_converters-instance_method" title="CSV#header_converters (method)">#header_converters</a> for converting parsed header values.</p>
</li><li>
<p>Option <code>write_converters</code> for converting values to be written (generated).</p>
</li></ul>

<p>There are three forms for specifying converters:</p>
<ul><li>
<p>A converter proc: executable code to be used for conversion.</p>
</li><li>
<p>A converter name: the name of a stored converter.</p>
</li><li>
<p>A converter list: an array of converter procs, converter names, and converter lists.</p>
</li></ul>

<h6 id="label-Converter+Procs">Converter Procs</h6>

<p>This converter proc, <code>strip_converter</code>, accepts a value <code>field</code> and returns <code>field.strip</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_strip_converter'>strip_converter</span> <span class='op'>=</span> <span class='id identifier rubyid_proc'>proc</span> {<span class='op'>|</span><span class='id identifier rubyid_field'>field</span><span class='op'>|</span> <span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_strip'>strip</span> }</code></pre>

<p>In this call to <a href="#parse-class_method" title="CSV.parse (method)">.parse</a>, the keyword argument <code>converters: string_converter</code> specifies that:</p>
<ul><li>
<p>Proc <code>string_converter</code> is to be called for each parsed field.</p>
</li><li>
<p>The converter’s return value is to replace the <code>field</code> value.</p>
</li></ul>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> foo , 0 \n bar , 1 \n baz , 2 \n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="CSV.parse (method)">parse</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>converters:</span> <span class='id identifier rubyid_strip_converter'>strip_converter</span>)
<span class='id identifier rubyid_array'>array</span> <span class='comment'># =&gt; [[&quot;foo&quot;, &quot;0&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span></code></pre>

<p>A converter proc can receive a second argument, <code>field_info</code>, that contains details about the field. This modified <code>strip_converter</code> displays its arguments:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_strip_converter'>strip_converter</span> <span class='op'>=</span> <span class='id identifier rubyid_proc'>proc</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_field'>field</span><span class='comma'>,</span> <span class='id identifier rubyid_field_info'>field_info</span><span class='op'>|</span>
  <span class='id identifier rubyid_p'>p</span> [<span class='id identifier rubyid_field'>field</span><span class='comma'>,</span> <span class='id identifier rubyid_field_info'>field_info</span>]
  <span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_strip'>strip</span>
<span class='kw'>end</span>
<span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> foo , 0 \n bar , 1 \n baz , 2 \n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="CSV.parse (method)">parse</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>converters:</span> <span class='id identifier rubyid_strip_converter'>strip_converter</span>)
<span class='id identifier rubyid_array'>array</span> <span class='comment'># =&gt; [[&quot;foo&quot;, &quot;0&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby">[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> foo </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='comment'>#&lt;struct CSV::FieldInfo index=0, line=1, header=nil&gt;]
</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> 0 </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='comment'>#&lt;struct CSV::FieldInfo index=1, line=1, header=nil&gt;]
</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> bar </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='comment'>#&lt;struct CSV::FieldInfo index=0, line=2, header=nil&gt;]
</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> 1 </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='comment'>#&lt;struct CSV::FieldInfo index=1, line=2, header=nil&gt;]
</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> baz </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='comment'>#&lt;struct CSV::FieldInfo index=0, line=3, header=nil&gt;]
</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> 2 </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='comment'>#&lt;struct CSV::FieldInfo index=1, line=3, header=nil&gt;]</span></code></pre>

<p>Each <a href="CSV/FieldInfo.html" title="CSV::FieldInfo (class)"><code>FieldInfo</code></a> object shows:</p>
<ul><li>
<p>The 0-based field index.</p>
</li><li>
<p>The 1-based line index.</p>
</li><li>
<p>The field header, if any.</p>
</li></ul>

<h6 id="label-Stored+Converters">Stored Converters</h6>

<p>A converter may be given a name and stored in a structure where the parsing methods can find it by name.</p>

<p>The storage structure for field converters is the Hash <a href="#Converters-constant" title="CSV::Converters (constant)">Converters</a>. It has several built-in converter procs:</p>
<ul><li>
<p><code>:integer</code>: converts each String-embedded integer into a true Integer.</p>
</li><li>
<p><code>:float</code>: converts each String-embedded float into a true Float.</p>
</li><li>
<p><code>:date</code>: converts each String-embedded date into a true Date.</p>
</li><li>
<p><code>:date_time</code>: converts each String-embedded date-time into a true DateTime</p>
</li></ul>

<p>. This example creates a converter proc, then stores it:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_strip_converter'>strip_converter</span> <span class='op'>=</span> <span class='id identifier rubyid_proc'>proc</span> {<span class='op'>|</span><span class='id identifier rubyid_field'>field</span><span class='op'>|</span> <span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_strip'>strip</span> }
<span class='const'>CSV</span><span class='op'>::</span><span class='const'><a href="#Converters-constant" title="CSV::Converters (constant)">Converters</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_strip'>strip</span>] <span class='op'>=</span> <span class='id identifier rubyid_strip_converter'>strip_converter</span></code></pre>

<p>Then the parsing method call can refer to the converter by its name, <code>:strip</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> foo , 0 \n bar , 1 \n baz , 2 \n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="CSV.parse (method)">parse</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>converters:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_strip'>strip</span>)
<span class='id identifier rubyid_array'>array</span> <span class='comment'># =&gt; [[&quot;foo&quot;, &quot;0&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span></code></pre>

<p>The storage structure for header converters is the Hash <a href="#HeaderConverters-constant" title="CSV::HeaderConverters (constant)">HeaderConverters</a>, which works in the same way. It also has built-in converter procs:</p>
<ul><li>
<p><code>:downcase</code>: Downcases each header.</p>
</li><li>
<p><code>:symbol</code>: Converts each header to a Symbol.</p>
</li></ul>

<p>There is no such storage structure for write headers.</p>

<p>In order for the parsing methods to access stored converters in non-main-Ractors, the storage structure must be made shareable first. Therefore, <code>Ractor.make_shareable(CSV::Converters)</code> and <code>Ractor.make_shareable(CSV::HeaderConverters)</code> must be called before the creation of Ractors that use the converters stored in these structures. (Since making the storage structures shareable involves freezing them, any custom converters that are to be used must be added first.)</p>

<h6 id="label-Converter+Lists">Converter Lists</h6>

<p>A <em>converter</em> <em>list</em> is an Array that may include any assortment of:</p>
<ul><li>
<p>Converter procs.</p>
</li><li>
<p>Names of stored converters.</p>
</li><li>
<p>Nested converter lists.</p>
</li></ul>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_numeric_converters'>numeric_converters</span> <span class='op'>=</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_integer'>integer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_float'>float</span>]
<span class='id identifier rubyid_date_converters'>date_converters</span> <span class='op'>=</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_date'>date</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_date_time'>date_time</span>]
[<span class='id identifier rubyid_numeric_converters'>numeric_converters</span><span class='comma'>,</span> <span class='id identifier rubyid_strip_converter'>strip_converter</span>]
[<span class='id identifier rubyid_strip_converter'>strip_converter</span><span class='comma'>,</span> <span class='id identifier rubyid_date_converters'>date_converters</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_float'>float</span>]</code></pre>

<p>Like a converter proc, a converter list may be named and stored in either CSV::Converters or <a href="#HeaderConverters-constant" title="CSV::HeaderConverters (constant)">HeaderConverters</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span><span class='op'>::</span><span class='const'><a href="#Converters-constant" title="CSV::Converters (constant)">Converters</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_custom'>custom</span>] <span class='op'>=</span> [<span class='id identifier rubyid_strip_converter'>strip_converter</span><span class='comma'>,</span> <span class='id identifier rubyid_date_converters'>date_converters</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_float'>float</span>]
<span class='const'>CSV</span><span class='op'>::</span><span class='const'><a href="#HeaderConverters-constant" title="CSV::HeaderConverters (constant)">HeaderConverters</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_custom'>custom</span>] <span class='op'>=</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_downcase'>downcase</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_symbol'>symbol</span>]</code></pre>

<p>There are two built-in converter lists:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span><span class='op'>::</span><span class='const'><a href="#Converters-constant" title="CSV::Converters (constant)">Converters</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_numeric'>numeric</span>] <span class='comment'># =&gt; [:integer, :float]
</span><span class='const'>CSV</span><span class='op'>::</span><span class='const'><a href="#Converters-constant" title="CSV::Converters (constant)">Converters</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_all'>all</span>] <span class='comment'># =&gt; [:date_time, :numeric]</span></code></pre>

<h5 id="label-Field+Converters">Field Converters</h5>

<p>With no conversion, all parsed fields in all rows become Strings:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_ary'>ary</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="CSV.parse (method)">parse</a></span>(<span class='id identifier rubyid_string'>string</span>)
<span class='id identifier rubyid_ary'>ary</span> <span class='comment'># =&gt; # =&gt; [[&quot;foo&quot;, &quot;0&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span></code></pre>

<p>When you specify a field converter, each parsed field is passed to the converter; its return value becomes the stored value for the field. A converter might, for example, convert an integer embedded in a String into a true Integer. (In fact, that’s what built-in field converter <code>:integer</code> does.)</p>

<p>There are three ways to use field converters.</p>
<ul><li>
<p>Using option <a href='#label-Option+converters'>converters</a> with a parsing method:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ary'>ary</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="CSV.parse (method)">parse</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>converters:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_integer'>integer</span>)
<span class='id identifier rubyid_ary'>ary</span> <span class='comment'># =&gt; [0, 1, 2] # =&gt; [[&quot;foo&quot;, 0], [&quot;bar&quot;, 1], [&quot;baz&quot;, 2]]</span></code></pre>
</li><li>
<p>Using option <a href='#label-Option+converters'>converters</a> with a new CSV instance:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>converters:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_integer'>integer</span>)
<span class='comment'># Field converters in effect:
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_converters'><a href="#converters-instance_method" title="CSV#converters (method)">converters</a></span> <span class='comment'># =&gt; [:integer]
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="CSV.read (method)">read</a></span> <span class='comment'># =&gt; [[&quot;foo&quot;, 0], [&quot;bar&quot;, 1], [&quot;baz&quot;, 2]]</span></code></pre>
</li><li>
<p>Using method <a href="#convert-instance_method" title="CSV#convert (method)">#convert</a> to add a field converter to a CSV instance:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_string'>string</span>)
<span class='comment'># Add a converter.
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_convert'><a href="#convert-instance_method" title="CSV#convert (method)">convert</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_integer'>integer</span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_converters'><a href="#converters-instance_method" title="CSV#converters (method)">converters</a></span> <span class='comment'># =&gt; [:integer]
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="CSV.read (method)">read</a></span> <span class='comment'># =&gt; [[&quot;foo&quot;, 0], [&quot;bar&quot;, 1], [&quot;baz&quot;, 2]]</span></code></pre>
</li></ul>

<p>Installing a field converter does not affect already-read rows:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_string'>string</span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_shift'><a href="#shift-instance_method" title="CSV#shift (method)">shift</a></span> <span class='comment'># =&gt; [&quot;foo&quot;, &quot;0&quot;]
</span><span class='comment'># Add a converter.
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_convert'><a href="#convert-instance_method" title="CSV#convert (method)">convert</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_integer'>integer</span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_converters'><a href="#converters-instance_method" title="CSV#converters (method)">converters</a></span> <span class='comment'># =&gt; [:integer]
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="CSV.read (method)">read</a></span> <span class='comment'># =&gt; [[&quot;bar&quot;, 1], [&quot;baz&quot;, 2]]</span></code></pre>

<p>There are additional built-in converters, and custom converters are also supported.</p>

<h6 id="label-Built-In+Field+Converters">Built-In Field Converters</h6>

<p>The built-in field converters are in Hash <a href="#Converters-constant" title="CSV::Converters (constant)">Converters</a>:</p>
<ul><li>
<p>Each key is a field converter name.</p>
</li><li>
<p>Each value is one of:</p>
<ul><li>
<p>A Proc field converter.</p>
</li><li>
<p>An Array of field converter names.</p>
</li></ul>
</li></ul>

<p>Display:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span><span class='op'>::</span><span class='const'><a href="#Converters-constant" title="CSV::Converters (constant)">Converters</a></span>.<span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span>.<span class='id identifier rubyid_kind_of?'>kind_of?</span>(<span class='const'>Proc</span>)
    <span class='id identifier rubyid_p'>p</span> [<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>.<span class='id identifier rubyid_class'>class</span>]
  <span class='kw'>else</span>
    <span class='id identifier rubyid_p'>p</span> [<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span>]
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby">[<span class='symbeg'>:</span><span class='id identifier rubyid_integer'>integer</span><span class='comma'>,</span> <span class='const'>Proc</span>]
[<span class='symbeg'>:</span><span class='id identifier rubyid_float'>float</span><span class='comma'>,</span> <span class='const'>Proc</span>]
[<span class='symbeg'>:</span><span class='id identifier rubyid_numeric'>numeric</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_integer'>integer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_float'>float</span>]]
[<span class='symbeg'>:</span><span class='id identifier rubyid_date'>date</span><span class='comma'>,</span> <span class='const'>Proc</span>]
[<span class='symbeg'>:</span><span class='id identifier rubyid_date_time'>date_time</span><span class='comma'>,</span> <span class='const'>Proc</span>]
[<span class='symbeg'>:</span><span class='id identifier rubyid_all'>all</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_date_time'>date_time</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_numeric'>numeric</span>]]</code></pre>

<p>Each of these converters transcodes values to UTF-8 before attempting conversion. If a value cannot be transcoded to UTF-8 the conversion will fail and the value will remain unconverted.</p>

<p>Converter <code>:integer</code> converts each field that Integer() accepts:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0,1,2,x</span><span class='tstring_end'>&#39;</span></span>
<span class='comment'># Without the converter
</span><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse_line'><a href="#parse_line-class_method" title="CSV.parse_line (method)">parse_line</a></span>(<span class='id identifier rubyid_data'>data</span>)
<span class='id identifier rubyid_csv'>csv</span> <span class='comment'># =&gt; [&quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;x&quot;]
</span><span class='comment'># With the converter
</span><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse_line'><a href="#parse_line-class_method" title="CSV.parse_line (method)">parse_line</a></span>(<span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='label'>converters:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_integer'>integer</span>)
<span class='id identifier rubyid_csv'>csv</span> <span class='comment'># =&gt; [0, 1, 2, &quot;x&quot;]</span></code></pre>

<p>Converter <code>:float</code> converts each field that Float() accepts:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1.0,3.14159,x</span><span class='tstring_end'>&#39;</span></span>
<span class='comment'># Without the converter
</span><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse_line'><a href="#parse_line-class_method" title="CSV.parse_line (method)">parse_line</a></span>(<span class='id identifier rubyid_data'>data</span>)
<span class='id identifier rubyid_csv'>csv</span> <span class='comment'># =&gt; [&quot;1.0&quot;, &quot;3.14159&quot;, &quot;x&quot;]
</span><span class='comment'># With the converter
</span><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse_line'><a href="#parse_line-class_method" title="CSV.parse_line (method)">parse_line</a></span>(<span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='label'>converters:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_float'>float</span>)
<span class='id identifier rubyid_csv'>csv</span> <span class='comment'># =&gt; [1.0, 3.14159, &quot;x&quot;]</span></code></pre>

<p>Converter <code>:numeric</code> converts with both <code>:integer</code> and <code>:float</code>..</p>

<p>Converter <code>:date</code> converts each field that <code>Date.parse</code> accepts:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2001-02-03,x</span><span class='tstring_end'>&#39;</span></span>
<span class='comment'># Without the converter
</span><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse_line'><a href="#parse_line-class_method" title="CSV.parse_line (method)">parse_line</a></span>(<span class='id identifier rubyid_data'>data</span>)
<span class='id identifier rubyid_csv'>csv</span> <span class='comment'># =&gt; [&quot;2001-02-03&quot;, &quot;x&quot;]
</span><span class='comment'># With the converter
</span><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse_line'><a href="#parse_line-class_method" title="CSV.parse_line (method)">parse_line</a></span>(<span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='label'>converters:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_date'>date</span>)
<span class='id identifier rubyid_csv'>csv</span> <span class='comment'># =&gt; [#&lt;Date: 2001-02-03 ((2451944j,0s,0n),+0s,2299161j)&gt;, &quot;x&quot;]</span></code></pre>

<p>Converter <code>:date_time</code> converts each field that <code>DateTime.parse</code> accepts:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2020-05-07T14:59:00-05:00,x</span><span class='tstring_end'>&#39;</span></span>
<span class='comment'># Without the converter
</span><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse_line'><a href="#parse_line-class_method" title="CSV.parse_line (method)">parse_line</a></span>(<span class='id identifier rubyid_data'>data</span>)
<span class='id identifier rubyid_csv'>csv</span> <span class='comment'># =&gt; [&quot;2020-05-07T14:59:00-05:00&quot;, &quot;x&quot;]
</span><span class='comment'># With the converter
</span><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse_line'><a href="#parse_line-class_method" title="CSV.parse_line (method)">parse_line</a></span>(<span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='label'>converters:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_date_time'>date_time</span>)
<span class='id identifier rubyid_csv'>csv</span> <span class='comment'># =&gt; [#&lt;DateTime: 2020-05-07T14:59:00-05:00 ((2458977j,71940s,0n),-18000s,2299161j)&gt;, &quot;x&quot;]</span></code></pre>

<p>Converter <code>:numeric</code> converts with both <code>:date_time</code> and <code>:numeric</code>..</p>

<p>As seen above, method <a href="#convert-instance_method" title="CSV#convert (method)">#convert</a> adds converters to a CSV instance, and method <a href="#converters-instance_method" title="CSV#converters (method)">#converters</a> returns an Array of the converters in effect:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0,1,2</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_converters'><a href="#converters-instance_method" title="CSV#converters (method)">converters</a></span> <span class='comment'># =&gt; []
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_convert'><a href="#convert-instance_method" title="CSV#convert (method)">convert</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_integer'>integer</span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_converters'><a href="#converters-instance_method" title="CSV#converters (method)">converters</a></span> <span class='comment'># =&gt; [:integer]
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_convert'><a href="#convert-instance_method" title="CSV#convert (method)">convert</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_date'>date</span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_converters'><a href="#converters-instance_method" title="CSV#converters (method)">converters</a></span> <span class='comment'># =&gt; [:integer, :date]</span></code></pre>

<h6 id="label-Custom+Field+Converters">Custom Field Converters</h6>

<p>You can define a custom field converter:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_strip_converter'>strip_converter</span> <span class='op'>=</span> <span class='id identifier rubyid_proc'>proc</span> {<span class='op'>|</span><span class='id identifier rubyid_field'>field</span><span class='op'>|</span> <span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_strip'>strip</span> }
<span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> foo , 0 \n bar , 1 \n baz , 2 \n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="CSV.parse (method)">parse</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>converters:</span> <span class='id identifier rubyid_strip_converter'>strip_converter</span>)
<span class='id identifier rubyid_array'>array</span> <span class='comment'># =&gt; [[&quot;foo&quot;, &quot;0&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span></code></pre>

<p>You can register the converter in Converters Hash, which allows you to refer to it by name:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span><span class='op'>::</span><span class='const'><a href="#Converters-constant" title="CSV::Converters (constant)">Converters</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_strip'>strip</span>] <span class='op'>=</span> <span class='id identifier rubyid_strip_converter'>strip_converter</span>
<span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> foo , 0 \n bar , 1 \n baz , 2 \n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="CSV.parse (method)">parse</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>converters:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_strip'>strip</span>)
<span class='id identifier rubyid_array'>array</span> <span class='comment'># =&gt; [[&quot;foo&quot;, &quot;0&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span></code></pre>

<h5 id="label-Header+Converters">Header Converters</h5>

<p>Header converters operate only on headers (and not on other rows).</p>

<p>There are three ways to use header converters; these examples use built-in header converter <code>:downcase</code>, which downcases each parsed header.</p>
<ul><li>
<p>Option <a href="#header_converters-instance_method" title="CSV#header_converters (method)">#header_converters</a> with a singleton parsing method:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Name,Count\nFoo,0\n,Bar,1\nBaz,2</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_tbl'>tbl</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="CSV.parse (method)">parse</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>header_converters:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_downcase'>downcase</span>)
<span class='id identifier rubyid_tbl'>tbl</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># =&gt; CSV::Table
</span><span class='id identifier rubyid_tbl'>tbl</span>.<span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span> <span class='comment'># =&gt; [&quot;name&quot;, &quot;count&quot;]</span></code></pre>
</li><li>
<p>Option <a href="#header_converters-instance_method" title="CSV#header_converters (method)">#header_converters</a> with a new CSV instance:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>header_converters:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_downcase'>downcase</span>)
<span class='comment'># Header converters in effect:
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_header_converters'><a href="#header_converters-instance_method" title="CSV#header_converters (method)">header_converters</a></span> <span class='comment'># =&gt; [:downcase]
</span><span class='id identifier rubyid_tbl'>tbl</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="CSV.parse (method)">parse</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span>)
<span class='id identifier rubyid_tbl'>tbl</span>.<span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span> <span class='comment'># =&gt; [&quot;Name&quot;, &quot;Count&quot;]</span></code></pre>
</li><li>
<p>Method <a href="#header_convert-instance_method" title="CSV#header_convert (method)">#header_convert</a> adds a header converter to a CSV instance:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_string'>string</span>)
<span class='comment'># Add a header converter.
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_header_convert'><a href="#header_convert-instance_method" title="CSV#header_convert (method)">header_convert</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_downcase'>downcase</span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_header_converters'><a href="#header_converters-instance_method" title="CSV#header_converters (method)">header_converters</a></span> <span class='comment'># =&gt; [:downcase]
</span><span class='id identifier rubyid_tbl'>tbl</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="CSV.parse (method)">parse</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span>)
<span class='id identifier rubyid_tbl'>tbl</span>.<span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span> <span class='comment'># =&gt; [&quot;Name&quot;, &quot;Count&quot;]</span></code></pre>
</li></ul>

<h6 id="label-Built-In+Header+Converters">Built-In Header Converters</h6>

<p>The built-in header converters are in Hash <a href="#HeaderConverters-constant" title="CSV::HeaderConverters (constant)">HeaderConverters</a>. The keys there are the names of the converters:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span><span class='op'>::</span><span class='const'><a href="#HeaderConverters-constant" title="CSV::HeaderConverters (constant)">HeaderConverters</a></span>.<span class='id identifier rubyid_keys'>keys</span> <span class='comment'># =&gt; [:downcase, :symbol]</span></code></pre>

<p>Converter <code>:downcase</code> converts each header by downcasing it:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Name,Count\nFoo,0\n,Bar,1\nBaz,2</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_tbl'>tbl</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="CSV.parse (method)">parse</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>header_converters:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_downcase'>downcase</span>)
<span class='id identifier rubyid_tbl'>tbl</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># =&gt; CSV::Table
</span><span class='id identifier rubyid_tbl'>tbl</span>.<span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span> <span class='comment'># =&gt; [&quot;name&quot;, &quot;count&quot;]</span></code></pre>

<p>Converter <code>:symbol</code> converts each header by making it into a Symbol:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Name,Count\nFoo,0\n,Bar,1\nBaz,2</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_tbl'>tbl</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="CSV.parse (method)">parse</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>header_converters:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_symbol'>symbol</span>)
<span class='id identifier rubyid_tbl'>tbl</span>.<span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span> <span class='comment'># =&gt; [:name, :count]</span></code></pre>

<p>Details:</p>
<ul><li>
<p>Strips leading and trailing whitespace.</p>
</li><li>
<p>Downcases the header.</p>
</li><li>
<p>Replaces embedded spaces with underscores.</p>
</li><li>
<p>Removes non-word characters.</p>
</li><li>
<p>Makes the string into a Symbol.</p>
</li></ul>

<h6 id="label-Custom+Header+Converters">Custom Header Converters</h6>

<p>You can define a custom header converter:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_upcase_converter'>upcase_converter</span> <span class='op'>=</span> <span class='id identifier rubyid_proc'>proc</span> {<span class='op'>|</span><span class='id identifier rubyid_header'>header</span><span class='op'>|</span> <span class='id identifier rubyid_header'>header</span>.<span class='id identifier rubyid_upcase'>upcase</span> }
<span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Name,Value\nfoo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_table'><a href="#table-class_method" title="CSV.table (method)">table</a></span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="CSV.parse (method)">parse</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>header_converters:</span> <span class='id identifier rubyid_upcase_converter'>upcase_converter</span>)
<span class='id identifier rubyid_table'><a href="#table-class_method" title="CSV.table (method)">table</a></span> <span class='comment'># =&gt; #&lt;CSV::Table mode:col_or_row row_count:4&gt;
</span><span class='id identifier rubyid_table'><a href="#table-class_method" title="CSV.table (method)">table</a></span>.<span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span> <span class='comment'># =&gt; [&quot;NAME&quot;, &quot;VALUE&quot;]</span></code></pre>

<p>You can register the converter in HeaderConverters Hash, which allows you to refer to it by name:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span><span class='op'>::</span><span class='const'><a href="#HeaderConverters-constant" title="CSV::HeaderConverters (constant)">HeaderConverters</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_upcase'>upcase</span>] <span class='op'>=</span> <span class='id identifier rubyid_upcase_converter'>upcase_converter</span>
<span class='id identifier rubyid_table'><a href="#table-class_method" title="CSV.table (method)">table</a></span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="CSV.parse (method)">parse</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>header_converters:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_upcase'>upcase</span>)
<span class='id identifier rubyid_table'><a href="#table-class_method" title="CSV.table (method)">table</a></span> <span class='comment'># =&gt; #&lt;CSV::Table mode:col_or_row row_count:4&gt;
</span><span class='id identifier rubyid_table'><a href="#table-class_method" title="CSV.table (method)">table</a></span>.<span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span> <span class='comment'># =&gt; [&quot;NAME&quot;, &quot;VALUE&quot;]</span></code></pre>

<h6 id="label-Write+Converters">Write Converters</h6>

<p>When you specify a write converter for generating CSV, each field to be written is passed to the converter; its return value becomes the new value for the field. A converter might, for example, strip whitespace from a field.</p>

<p>Using no write converter (all fields unmodified):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_output_string'>output_string</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="CSV.generate (method)">generate</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> foo </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span>]
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> bar </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>1</span>]
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> baz </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>2</span>]
<span class='kw'>end</span>
<span class='id identifier rubyid_output_string'>output_string</span> <span class='comment'># =&gt; &quot; foo ,0\n bar ,1\n baz ,2\n&quot;</span></code></pre>

<p>Using option <code>write_converters</code> with two custom write converters:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_strip_converter'>strip_converter</span> <span class='op'>=</span> <span class='id identifier rubyid_proc'>proc</span> {<span class='op'>|</span><span class='id identifier rubyid_field'>field</span><span class='op'>|</span> <span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_strip'>strip</span>) <span class='op'>?</span> <span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_strip'>strip</span> <span class='op'>:</span> <span class='id identifier rubyid_field'>field</span> }
<span class='id identifier rubyid_upcase_converter'>upcase_converter</span> <span class='op'>=</span> <span class='id identifier rubyid_proc'>proc</span> {<span class='op'>|</span><span class='id identifier rubyid_field'>field</span><span class='op'>|</span> <span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_upcase'>upcase</span>) <span class='op'>?</span> <span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_upcase'>upcase</span> <span class='op'>:</span> <span class='id identifier rubyid_field'>field</span> }
<span class='id identifier rubyid_write_converters'>write_converters</span> <span class='op'>=</span> [<span class='id identifier rubyid_strip_converter'>strip_converter</span><span class='comma'>,</span> <span class='id identifier rubyid_upcase_converter'>upcase_converter</span>]
<span class='id identifier rubyid_output_string'>output_string</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="CSV.generate (method)">generate</a></span>(<span class='label'>write_converters:</span> <span class='id identifier rubyid_write_converters'>write_converters</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> foo </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span>]
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> bar </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>1</span>]
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> baz </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>2</span>]
<span class='kw'>end</span>
<span class='id identifier rubyid_output_string'>output_string</span> <span class='comment'># =&gt; &quot;FOO,0\nBAR,1\nBAZ,2\n&quot;</span></code></pre>

<h4 id="label-Character+Encodings+-28M17n+or+Multilingualization-29">Character Encodings (M17n or Multilingualization)</h4>

<p>This new <code>CSV</code> parser is m17n savvy.  The parser works in the Encoding of the IO or <a href="String.html" title="String (class)"><code>::String</code></a> object being read from or written to. Your data is never transcoded (unless you ask Ruby to transcode it for you) and will literally be parsed in the Encoding it is in. Thus CSV will return Arrays or Rows of Strings in the Encoding of your data. This is accomplished by transcoding the parser itself into your Encoding.</p>

<p>Some transcoding must take place, of course, to accomplish this multiencoding support. For example, <code>:col_sep</code>, <code>:row_sep</code>, and <code>:quote_char</code> must be transcoded to match your data.  Hopefully this makes the entire process feel transparent, since CSV’s defaults should just magically work for your data. However, you can set these values manually in the target Encoding to avoid the translation.</p>

<p>It’s also important to note that while all of CSV’s core parser is now Encoding agnostic, some features are not. For example, the built-in converters will try to transcode data to UTF-8 before making conversions. Again, you can provide custom converters that are aware of your Encodings to avoid this translation. It’s just too hard for me to support native conversions in all of Ruby’s Encodings.</p>

<p>Anyway, the practical side of this is simple: make sure IO and <a href="String.html" title="String (class)"><code>::String</code></a> objects passed into <code>CSV</code> have the proper Encoding set and everything should just work. <code>CSV</code> methods that allow you to open IO objects (CSV::foreach(), <a href="#open-class_method" title="CSV.open (method)">.open</a>(), <a href="#read-class_method" title="CSV.read (method)">.read</a>(), and <a href="#readlines-class_method" title="CSV.readlines (method)">.readlines</a>()) do allow you to specify the Encoding.</p>

<p>One minor exception comes when generating <code>CSV</code> into a <a href="String.html" title="String (class)"><code>::String</code></a> with an Encoding that is not ASCII compatible. There’s no existing data for <code>CSV</code> to use to prepare itself and thus you will probably need to manually specify the desired Encoding for most of those cases. It will try to guess using the fields in a row of output though, when using <a href="#generate_line-class_method" title="CSV.generate_line (method)">.generate_line</a>() or <a href="Array.html#to_csv-instance_method" title="Array#to_csv (method)">Array#to_csv</a>().</p>

<p>I try to point out any other Encoding issues in the documentation of methods as they come up.</p>

<p>This has been tested to the best of my ability with all non-“dummy” Encodings Ruby ships with. However, it is brave new code and may have some bugs. Please feel free to <a href="mailto:james@grayproductions.net" target="_parent" title="report">report</a> any issues you find with it.</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='ConverterEncoding-constant' class='summary_signature'>ConverterEncoding =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The encoding used by all converters.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L883-L883'># File 'lib/csv.rb', line 883</a>    <pre class='code ruby'><span class='const'>Encoding</span>.<span class='id identifier rubyid_find'>find</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&quot;</span></span>)</pre>
  </li>
  <li>
    <span id='Converters-constant' class='summary_signature'>Converters =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>A Hash containing the names and Procs for the built-in field converters. See <a href='#label-Built-In+Field+Converters'>Built-In Field Converters</a>.</p>

<p>This Hash is intentionally left unfrozen, and may be extended with custom field converters. See <a href='#label-Custom+Field+Converters'>Custom Field Converters</a>.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L891-L916'># File 'lib/csv.rb', line 891</a>    <pre class='code ruby'>{
  <span class='label'>integer:</span>   <span class='id identifier rubyid_lambda'>lambda</span> { <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
    <span class='const'>Integer</span>(<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='const'><a href="#ConverterEncoding-constant" title="CSV::ConverterEncoding (constant)">ConverterEncoding</a></span>)) <span class='kw'>rescue</span> <span class='id identifier rubyid_f'>f</span>
  }<span class='comma'>,</span>
  <span class='label'>float:</span>     <span class='id identifier rubyid_lambda'>lambda</span> { <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
    <span class='const'>Float</span>(<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='const'><a href="#ConverterEncoding-constant" title="CSV::ConverterEncoding (constant)">ConverterEncoding</a></span>)) <span class='kw'>rescue</span> <span class='id identifier rubyid_f'>f</span>
  }<span class='comma'>,</span>
  <span class='label'>numeric:</span>   [<span class='symbeg'>:</span><span class='id identifier rubyid_integer'>integer</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_float'>float</span>]<span class='comma'>,</span>
  <span class='label'>date:</span>      <span class='id identifier rubyid_lambda'>lambda</span> { <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_e'>e</span> <span class='op'>=</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='const'><a href="#ConverterEncoding-constant" title="CSV::ConverterEncoding (constant)">ConverterEncoding</a></span>)
      <span class='id identifier rubyid_e'>e</span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='const'><a href="#DateMatcher-constant" title="CSV::DateMatcher (constant)">DateMatcher</a></span>) <span class='op'>?</span> <span class='const'>Date</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="CSV.parse (method)">parse</a></span>(<span class='id identifier rubyid_e'>e</span>) <span class='op'>:</span> <span class='id identifier rubyid_f'>f</span>
    <span class='kw'>rescue</span>  <span class='comment'># encoding conversion or date parse errors
</span>      <span class='id identifier rubyid_f'>f</span>
    <span class='kw'>end</span>
  }<span class='comma'>,</span>
  <span class='label'>date_time:</span> <span class='id identifier rubyid_lambda'>lambda</span> { <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_e'>e</span> <span class='op'>=</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='const'><a href="#ConverterEncoding-constant" title="CSV::ConverterEncoding (constant)">ConverterEncoding</a></span>)
      <span class='id identifier rubyid_e'>e</span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='const'><a href="#DateTimeMatcher-constant" title="CSV::DateTimeMatcher (constant)">DateTimeMatcher</a></span>) <span class='op'>?</span> <span class='const'>DateTime</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="CSV.parse (method)">parse</a></span>(<span class='id identifier rubyid_e'>e</span>) <span class='op'>:</span> <span class='id identifier rubyid_f'>f</span>
    <span class='kw'>rescue</span>  <span class='comment'># encoding conversion or date parse errors
</span>      <span class='id identifier rubyid_f'>f</span>
    <span class='kw'>end</span>
  }<span class='comma'>,</span>
  <span class='label'>all:</span>       [<span class='symbeg'>:</span><span class='id identifier rubyid_date_time'>date_time</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_numeric'>numeric</span>]<span class='comma'>,</span>
}</pre>
  </li>
  <li>
    <span id='DEFAULT_OPTIONS-constant' class='summary_signature'>DEFAULT_OPTIONS =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Default values for method options.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L934-L960'># File 'lib/csv.rb', line 934</a>    <pre class='code ruby'>{
  <span class='comment'># For both parsing and generating.
</span>  <span class='label'>col_sep:</span>            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='label'>row_sep:</span>            <span class='symbeg'>:</span><span class='id identifier rubyid_auto'>auto</span><span class='comma'>,</span>
  <span class='label'>quote_char:</span>         <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='comment'># For parsing.
</span>  <span class='label'>field_size_limit:</span>   <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>max_field_size:</span>     <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>converters:</span>         <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>unconverted_fields:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>headers:</span>            <span class='kw'>false</span><span class='comma'>,</span>
  <span class='label'>return_headers:</span>     <span class='kw'>false</span><span class='comma'>,</span>
  <span class='label'>header_converters:</span>  <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>skip_blanks:</span>        <span class='kw'>false</span><span class='comma'>,</span>
  <span class='label'>skip_lines:</span>         <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>liberal_parsing:</span>    <span class='kw'>false</span><span class='comma'>,</span>
  <span class='label'>nil_value:</span>          <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>empty_value:</span>        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='label'>strip:</span>              <span class='kw'>false</span><span class='comma'>,</span>
  <span class='comment'># For generating.
</span>  <span class='label'>write_headers:</span>      <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>quote_empty:</span>        <span class='kw'>true</span><span class='comma'>,</span>
  <span class='label'>force_quotes:</span>       <span class='kw'>false</span><span class='comma'>,</span>
  <span class='label'>write_converters:</span>   <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>write_nil_value:</span>    <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>write_empty_value:</span>  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
}.<span class='id identifier rubyid_freeze'>freeze</span></pre>
  </li>
  <li>
    <span id='DateMatcher-constant' class='summary_signature'>DateMatcher =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>A Regexp used to find and convert some common Date formats.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L872-L873'># File 'lib/csv.rb', line 872</a>    <pre class='code ruby'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'> \A(?: (\w,?\s)?\w\s\d{1,2},?\s+\d{2,4} |
\d{4}-\d{2}-\d{2} )\z </span><span class='regexp_end'>/x</span></span></pre>
  </li>
  <li>
    <span id='DateTimeMatcher-constant' class='summary_signature'>DateTimeMatcher =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>A Regexp used to find and convert some common DateTime formats.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L875-L880'># File 'lib/csv.rb', line 875</a>    <pre class='code ruby'><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'> \A(?: (\w,?\s)?\w\s\d{1,2}\s\d{1,2}:\d{1,2}:\d{1,2},?\s\d{2,4} |
    # ISO-8601 and RFC-3339 (space instead of T) recognized by DateTime.parse
    \d{4}-\d{2}-\d{2}
      (?:[T\s]\d{2}:\d{2}(?::\d{2}(?:\.\d)?(?:[-]\d{2}(?::\d{2})|Z)?)?)?
)\z </span><span class='regexp_end'>/x</span></span></pre>
  </li>
  <li>
    <span id='HeaderConverters-constant' class='summary_signature'>HeaderConverters =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>A Hash containing the names and Procs for the built-in header converters. See <a href='#label-Built-In+Header+Converters'>Built-In Header Converters</a>.</p>

<p>This Hash is intentionally left unfrozen, and may be extended with custom field converters. See <a href='#label-Custom+Header+Converters'>Custom Header Converters</a>.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L924-L931'># File 'lib/csv.rb', line 924</a>    <pre class='code ruby'>{
  <span class='label'>downcase:</span> <span class='id identifier rubyid_lambda'>lambda</span> { <span class='op'>|</span><span class='id identifier rubyid_h'>h</span><span class='op'>|</span> <span class='id identifier rubyid_h'>h</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='const'><a href="#ConverterEncoding-constant" title="CSV::ConverterEncoding (constant)">ConverterEncoding</a></span>).<span class='id identifier rubyid_downcase'>downcase</span> }<span class='comma'>,</span>
  <span class='label'>symbol:</span>   <span class='id identifier rubyid_lambda'>lambda</span> { <span class='op'>|</span><span class='id identifier rubyid_h'>h</span><span class='op'>|</span>
    <span class='id identifier rubyid_h'>h</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='const'><a href="#ConverterEncoding-constant" title="CSV::ConverterEncoding (constant)">ConverterEncoding</a></span>).<span class='id identifier rubyid_downcase'>downcase</span>.<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[^\s\w]+</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_strip'>strip</span>.
                                         <span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s+</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_to_sym'>to_sym</span>
  }<span class='comma'>,</span>
  <span class='label'>symbol_raw:</span> <span class='id identifier rubyid_lambda'>lambda</span> { <span class='op'>|</span><span class='id identifier rubyid_h'>h</span><span class='op'>|</span> <span class='id identifier rubyid_h'>h</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='const'><a href="#ConverterEncoding-constant" title="CSV::ConverterEncoding (constant)">ConverterEncoding</a></span>).<span class='id identifier rubyid_to_sym'>to_sym</span> }
}</pre>
  </li>
  <li>
    <span id='VERSION-constant' class='summary_signature'>VERSION =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The version of the installed library.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv/version.rb#L5-L5'># File 'lib/csv/version.rb', line 5</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>3.2.8</span><span class='tstring_end'>&quot;</span></span></pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#filter-class_method" title="filter (class method)">.<strong>filter</strong>(in_string_or_io, **options) {|row| ... } &#x21d2; array_of_arrays, CSV </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><ul><li><p>Parses CSV from a source (String, IO stream, or ARGF).</p></li></ul></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#foreach-class_method" title="foreach (class method)">.<strong>foreach</strong>(path_or_io, mode=&#39;r&#39;, **options) {|row| ... )  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Calls the block with each row read from source <code>path_or_io</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#generate-class_method" title="generate (class method)">.<strong>generate</strong>(csv_string, **options) {|csv| ... } </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><ul><li><p>Argument <code>csv_string</code>, if given, must be a String object;.</p></li></ul></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#generate_line-class_method" title="generate_line (class method)">.<strong>generate_line</strong>(ary)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the String created by generating CSV from <code>ary</code> using the specified <code>options</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#generate_lines-class_method" title="generate_lines (class method)">.<strong>generate_lines</strong>(rows)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the String created by generating CSV from using the specified <code>options</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#instance-class_method" title="instance (class method)">.<strong>instance</strong>(string, **options)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates or retrieves cached CSV objects.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title="new (class method)">.<strong>new</strong>(string)  &#x21d2; CSV </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the new CSV object created using <code>string</code> or <code>io</code> and the specified <code>options</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#open-class_method" title="open (class method)">.<strong>open</strong>(file_path, mode = &quot;rb&quot;, **options)  &#x21d2; CSV </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>possible options elements:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse-class_method" title="parse (class method)">.<strong>parse</strong>(string)  &#x21d2; array_of_arrays </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Parses <code>string</code> or <code>io</code> using the specified <code>options</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse_line-class_method" title="parse_line (class method)">.<strong>parse_line</strong>(string)  &#x21d2; Array<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the data created by parsing the first line of <code>string</code> or <code>io</code> using the specified <code>options</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#read-class_method" title="read (class method)">.<strong>read</strong>(source, **options)  &#x21d2; array_of_arrays </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Opens the given <code>source</code> with the given <code>options</code> (see <a href="#open-class_method" title="CSV.open (method)">.open</a>), reads the source (see <a href="#read-instance_method" title="CSV#read (method)">#read</a>), and returns the result, which will be either an Array of Arrays or a <a href="CSV/Table.html" title="CSV::Table (class)"><code>Table</code></a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#readlines-class_method" title="readlines (class method)">.<strong>readlines</strong>(source, **options)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#read-class_method" title="CSV.read (method)">.read</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#table-class_method" title="table (class method)">.<strong>table</strong>(source, **options)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Calls <a href="#read-class_method" title="CSV.read (method)">.read</a> with <code>source</code>, <code>options</code>, and certain default options: - <a href="#headers-instance_method" title="CSV#headers (method)">#headers</a>: <code>true</code> - <a href="#converters-instance_method" title="CSV#converters (method)">#converters</a>: <code>:numeric</code> - <a href="#header_converters-instance_method" title="CSV#header_converters (method)">#header_converters</a>: <code>:symbol</code></p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#binmode%3F-instance_method" title="#binmode? (instance method)">#<strong>binmode?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#encoding-instance_method" title="#encoding (instance method)">#<strong>encoding</strong>  &#x21d2; Encoding </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the encoding used for parsing and generating; see <a href='#label-Character+Encodings+-28M17n+or+Multilingualization-29'>Character Encodings (M17n or Multilingualization)</a>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#eof-instance_method" title="#eof (instance method)">#<strong>eof</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#eof%3F-instance_method" title="CSV#eof? (method)">#eof?</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#force_quotes%3F-instance_method" title="#force_quotes? (instance method)">#<strong>force_quotes?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the value that determines whether all output fields are to be quoted; used for generating; see <a href='#label-Option+force_quotes'>Option <code>force_quotes</code></a>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#header_row%3F-instance_method" title="#header_row? (instance method)">#<strong>header_row?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if the next row to be read is a header row; <code>false</code> otherwise.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#liberal_parsing%3F-instance_method" title="#liberal_parsing? (instance method)">#<strong>liberal_parsing?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the value that determines whether illegal input is to be handled; used for parsing; see <a href='#label-Option+liberal_parsing'>Option <code>liberal_parsing</code></a>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#return_headers%3F-instance_method" title="#return_headers? (instance method)">#<strong>return_headers?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the value that determines whether headers are to be returned; used for parsing; see <a href='#label-Option+return_headers'>Option <code>return_headers</code></a>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#skip_blanks%3F-instance_method" title="#skip_blanks? (instance method)">#<strong>skip_blanks?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the value that determines whether blank lines are to be ignored; used for parsing; see <a href='#label-Option+skip_blanks'>Option <code>skip_blanks</code></a>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#unconverted_fields%3F-instance_method" title="#unconverted_fields? (instance method)">#<strong>unconverted_fields?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the value that determines whether unconverted fields are to be available; used for parsing; see <a href='#label-Option+unconverted_fields'>Option <code>unconverted_fields</code></a>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#write_headers%3F-instance_method" title="#write_headers? (instance method)">#<strong>write_headers?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the value that determines whether headers are to be written; used for generating; see <a href='#label-Option+write_headers'>Option <code>write_headers</code></a>:</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#<<-instance_method" title="#&lt;&lt; (instance method)">#<strong>&lt;&lt;</strong>(row)  &#x21d2; self </a>
      (also: #add_row, #puts)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Appends a row to <code>self</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#add_row-instance_method" title="#add_row (instance method)">#<strong>add_row</strong>(row)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#<<-instance_method" title="CSV#&lt;&lt; (method)">#&lt;&lt;</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#col_sep-instance_method" title="#col_sep (instance method)">#<strong>col_sep</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the encoded column separator; used for parsing and writing; see <a href='#label-Option+col_sep'>Option <code>col_sep</code></a>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#convert-instance_method" title="#convert (instance method)">#<strong>convert</strong>(converter_name)  &#x21d2; array_of_procs </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><ul><li><p>With no block, installs a field converter (a Proc).</p></li></ul></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#converters-instance_method" title="#converters (instance method)">#<strong>converters</strong>  &#x21d2; Array </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an Array containing field converters; see <a href='#label-Field+Converters'>Field Converters</a>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#each-instance_method" title="#each (instance method)">#<strong>each</strong>  &#x21d2; Enumerator </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Calls the block with each successive row.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#eof%3F-instance_method" title="#eof? (instance method)">#<strong>eof?</strong>  &#x21d2; Boolean </a>
      (also: #eof)
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#field_size_limit-instance_method" title="#field_size_limit (instance method)">#<strong>field_size_limit</strong>  &#x21d2; Integer<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the limit for field size; used for parsing; see <a href='#label-Option+field_size_limit'>Option <code>field_size_limit</code></a>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#flock-instance_method" title="#flock (instance method)">#<strong>flock</strong>(*args)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#gets-instance_method" title="#gets (instance method)">#<strong>gets</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#shift-instance_method" title="CSV#shift (method)">#shift</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#header_convert-instance_method" title="#header_convert (instance method)">#<strong>header_convert</strong>(name = nil, &amp;converter)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>The block need not return a String object:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#header_converters-instance_method" title="#header_converters (instance method)">#<strong>header_converters</strong>  &#x21d2; Array </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an Array containing header converters; used for parsing; see <a href='#label-Header+Converters'>Header Converters</a>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#headers-instance_method" title="#headers (instance method)">#<strong>headers</strong>  &#x21d2; Object </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the value that determines whether headers are used; used for parsing; see <a href='#label-Option+headers'>Option <code>headers</code></a>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a String showing certain properties of <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#ioctl-instance_method" title="#ioctl (instance method)">#<strong>ioctl</strong>(*args)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#line-instance_method" title="#line (instance method)">#<strong>line</strong>  &#x21d2; Array </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the line most recently read:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#lineno-instance_method" title="#line_no (instance method)">#<strong>line_no</strong>  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the count of the rows parsed or generated.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#max_field_size-instance_method" title="#max_field_size (instance method)">#<strong>max_field_size</strong>  &#x21d2; Integer<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the limit for field size; used for parsing; see <a href='#label-Option+max_field_size'>Option <code>max_field_size</code></a>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#path-instance_method" title="#path (instance method)">#<strong>path</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#puts-instance_method" title="#puts (instance method)">#<strong>puts</strong>(row)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#<<-instance_method" title="CSV#&lt;&lt; (method)">#&lt;&lt;</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#quote_char-instance_method" title="#quote_char (instance method)">#<strong>quote_char</strong>  &#x21d2; character </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the encoded quote character; used for parsing and writing; see <a href='#label-Option+quote_char'>Option <code>quote_char</code></a>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#read-instance_method" title="#read (instance method)">#<strong>read</strong>  &#x21d2; Array, CSV </a>
      (also: #readlines)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Forms the remaining rows from <code>self</code> into: - A <a href="CSV/Table.html" title="CSV::Table (class)"><code>Table</code></a> object, if headers are in use.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#readline-instance_method" title="#readline (instance method)">#<strong>readline</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#shift-instance_method" title="CSV#shift (method)">#shift</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#readlines-instance_method" title="#readlines (instance method)">#<strong>readlines</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#read-instance_method" title="CSV#read (method)">#read</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#rewind-instance_method" title="#rewind (instance method)">#<strong>rewind</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Rewinds the underlying IO object and resets CSV’s lineno() counter.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#row_sep-instance_method" title="#row_sep (instance method)">#<strong>row_sep</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the encoded row separator; used for parsing and writing; see <a href='#label-Option+row_sep'>Option <code>row_sep</code></a>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#shift-instance_method" title="#shift (instance method)">#<strong>shift</strong>  &#x21d2; Array, ... </a>
      (also: #gets, #readline)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the next row of data as: - An Array if no headers are used.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#skip_lines-instance_method" title="#skip_lines (instance method)">#<strong>skip_lines</strong>  &#x21d2; Regexp<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the Regexp used to identify comment lines; used for parsing; see <a href='#label-Option+skip_lines'>Option <code>skip_lines</code></a>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#stat-instance_method" title="#stat (instance method)">#<strong>stat</strong>(*args)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_i-instance_method" title="#to_i (instance method)">#<strong>to_i</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_io-instance_method" title="#to_io (instance method)">#<strong>to_io</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#build_fields_converter-instance_method" title="#build_fields_converter (instance method)">#<strong>build_fields_converter</strong>(initial_converters, options)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#build_header_fields_converter-instance_method" title="#build_header_fields_converter (instance method)">#<strong>build_header_fields_converter</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#build_parser_fields_converter-instance_method" title="#build_parser_fields_converter (instance method)">#<strong>build_parser_fields_converter</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#build_writer_fields_converter-instance_method" title="#build_writer_fields_converter (instance method)">#<strong>build_writer_fields_converter</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#convert_fields-instance_method" title="#convert_fields (instance method)">#<strong>convert_fields</strong>(fields, headers = false)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Processes <code>fields</code> with <code>@converters</code>, or <code>@header_converters</code> if <a href="#headers-instance_method" title="CSV#headers (method)">#headers</a> is passed as <code>true</code>, returning the converted field set.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#determine_encoding-instance_method" title="#determine_encoding (instance method)">#<strong>determine_encoding</strong>(encoding, internal_encoding)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#header_fields_converter-instance_method" title="#header_fields_converter (instance method)">#<strong>header_fields_converter</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#normalize_converters-instance_method" title="#normalize_converters (instance method)">#<strong>normalize_converters</strong>(converters)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#parser-instance_method" title="#parser (instance method)">#<strong>parser</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#parser_enumerator-instance_method" title="#parser_enumerator (instance method)">#<strong>parser_enumerator</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#parser_fields_converter-instance_method" title="#parser_fields_converter (instance method)">#<strong>parser_fields_converter</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#parser_options-instance_method" title="#parser_options (instance method)">#<strong>parser_options</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#raw_encoding-instance_method" title="#raw_encoding (instance method)">#<strong>raw_encoding</strong>  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the encoding of the internal IO object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#writer-instance_method" title="#writer (instance method)">#<strong>writer</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#writer_fields_converter-instance_method" title="#writer_fields_converter (instance method)">#<strong>writer_fields_converter</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#writer_options-instance_method" title="#writer_options (instance method)">#<strong>writer_options</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    <div class='inline-block'>
      <span class='overload'>.<strong>new</strong>(string)  &#x21d2; <code>CSV</code> </span>
      <span class='overload'>.<strong>new</strong>(io)  &#x21d2; <code>CSV</code> </span>
      <span class='overload'>.<strong>new</strong>(string, **options)  &#x21d2; <code>CSV</code> </span>
      <span class='overload'>.<strong>new</strong>(io, **options)  &#x21d2; <code>CSV</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the new CSV object created using <code>string</code> or <code>io</code> and the specified <code>options</code>.</p>
<ul><li>
<p>Argument <code>string</code> should be a String object; it will be put into a new StringIO object positioned at the beginning.</p>
</li></ul>

<p></p>
<ul><li>
<p>Argument <code>options</code>: See:</p>
<ul><li>
<p><a href='#label-Options+for+Parsing'>Options for Parsing</a></p>
</li><li>
<p><a href='#label-Options+for+Generating'>Options for Generating</a></p>
</li></ul>

<p>For performance reasons, the options cannot be overridden in a CSV object, so those specified here will endure.</p>
</li></ul>

<p>In addition to the CSV instance methods, several IO methods are delegated. See <a href='#label-Delegated+Methods'>Delegated Methods</a>.</p>
<hr>

<p>Create a CSV object from a String object:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo,0</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_csv'>csv</span> <span class='comment'># =&gt; #&lt;CSV io_type:StringIO encoding:UTF-8 lineno:0 col_sep:&quot;,&quot; row_sep:&quot;\n&quot; quote_char:&quot;\&quot;&quot;&gt;</span></code></pre>

<p>Create a CSV object from a File object:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo,0</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_new'>new</span>(<span class='const'>File</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>))
<span class='id identifier rubyid_csv'>csv</span> <span class='comment'># =&gt; #&lt;CSV io_type:File io_path:&quot;t.csv&quot; encoding:UTF-8 lineno:0 col_sep:&quot;,&quot; row_sep:&quot;\n&quot; quote_char:&quot;\&quot;&quot;&gt;</span></code></pre>
<hr>

<p>Raises an exception if the argument is <code>nil</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Raises ArgumentError (Cannot parse nil as CSV):
</span><span class='const'>CSV</span>.<span class='id identifier rubyid_new'>new</span>(<span class='kw'>nil</span>)</code></pre>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L1905-L2001'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1905' data-end='2001'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 1905</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_data'>data</span><span class='comma'>,</span>
               <span class='label'>col_sep:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
               <span class='label'>row_sep:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_auto'>auto</span><span class='comma'>,</span>
               <span class='label'>quote_char:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
               <span class='label'>field_size_limit:</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='label'>max_field_size:</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='label'>converters:</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='label'>unconverted_fields:</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='label'>headers:</span> <span class='kw'>false</span><span class='comma'>,</span>
               <span class='label'>return_headers:</span> <span class='kw'>false</span><span class='comma'>,</span>
               <span class='label'>write_headers:</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='label'>header_converters:</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='label'>skip_blanks:</span> <span class='kw'>false</span><span class='comma'>,</span>
               <span class='label'>force_quotes:</span> <span class='kw'>false</span><span class='comma'>,</span>
               <span class='label'>skip_lines:</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='label'>liberal_parsing:</span> <span class='kw'>false</span><span class='comma'>,</span>
               <span class='label'>internal_encoding:</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='label'>external_encoding:</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='label'>encoding:</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='label'>nil_value:</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='label'>empty_value:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
               <span class='label'>strip:</span> <span class='kw'>false</span><span class='comma'>,</span>
               <span class='label'>quote_empty:</span> <span class='kw'>true</span><span class='comma'>,</span>
               <span class='label'>write_converters:</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='label'>write_nil_value:</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='label'>write_empty_value:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot parse nil as CSV</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_nil?'>nil?</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="String.html" title="String (class)">String</a></span>)
    <span class='kw'>if</span> <span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span>
      <span class='kw'>if</span> <span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="String.html" title="String (class)">String</a></span>)
        <span class='id identifier rubyid_data_external_encoding'>data_external_encoding</span><span class='comma'>,</span> <span class='id identifier rubyid_data_internal_encoding'>data_internal_encoding</span> <span class='op'>=</span> <span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>2</span>)
        <span class='kw'>if</span> <span class='id identifier rubyid_data_internal_encoding'>data_internal_encoding</span>
          <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='id identifier rubyid_data_internal_encoding'>data_internal_encoding</span><span class='comma'>,</span> <span class='id identifier rubyid_data_external_encoding'>data_external_encoding</span>)
        <span class='kw'>else</span>
          <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_dup'>dup</span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='id identifier rubyid_data_external_encoding'>data_external_encoding</span>)
        <span class='kw'>end</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_dup'>dup</span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span>)
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='ivar'>@io</span> <span class='op'>=</span> <span class='const'>StringIO</span>.<span class='id identifier rubyid_new'>new</span>(<span class='id identifier rubyid_data'>data</span>)
  <span class='kw'>else</span>
    <span class='ivar'>@io</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span>
  <span class='kw'>end</span>
  <span class='ivar'>@encoding</span> <span class='op'>=</span> <span class='id identifier rubyid_determine_encoding'><a href="#determine_encoding-instance_method" title="CSV#determine_encoding (method)">determine_encoding</a></span>(<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span><span class='comma'>,</span> <span class='id identifier rubyid_internal_encoding'>internal_encoding</span>)

  <span class='ivar'>@base_fields_converter_options</span> <span class='op'>=</span> {
    <span class='label'>nil_value:</span> <span class='id identifier rubyid_nil_value'>nil_value</span><span class='comma'>,</span>
    <span class='label'>empty_value:</span> <span class='id identifier rubyid_empty_value'>empty_value</span><span class='comma'>,</span>
  }
  <span class='ivar'>@write_fields_converter_options</span> <span class='op'>=</span> {
    <span class='label'>nil_value:</span> <span class='id identifier rubyid_write_nil_value'>write_nil_value</span><span class='comma'>,</span>
    <span class='label'>empty_value:</span> <span class='id identifier rubyid_write_empty_value'>write_empty_value</span><span class='comma'>,</span>
  }
  <span class='ivar'>@initial_converters</span> <span class='op'>=</span> <span class='id identifier rubyid_converters'><a href="#converters-instance_method" title="CSV#converters (method)">converters</a></span>
  <span class='ivar'>@initial_header_converters</span> <span class='op'>=</span> <span class='id identifier rubyid_header_converters'><a href="#header_converters-instance_method" title="CSV#header_converters (method)">header_converters</a></span>
  <span class='ivar'>@initial_write_converters</span> <span class='op'>=</span> <span class='id identifier rubyid_write_converters'>write_converters</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_max_field_size'><a href="#max_field_size-instance_method" title="CSV#max_field_size (method)">max_field_size</a></span>.<span class='id identifier rubyid_nil?'>nil?</span> <span class='kw'>and</span> <span class='id identifier rubyid_field_size_limit'><a href="#field_size_limit-instance_method" title="CSV#field_size_limit (method)">field_size_limit</a></span>
    <span class='id identifier rubyid_max_field_size'><a href="#max_field_size-instance_method" title="CSV#max_field_size (method)">max_field_size</a></span> <span class='op'>=</span> <span class='id identifier rubyid_field_size_limit'><a href="#field_size_limit-instance_method" title="CSV#field_size_limit (method)">field_size_limit</a></span> <span class='op'>-</span> <span class='int'>1</span>
  <span class='kw'>end</span>
  <span class='ivar'>@parser_options</span> <span class='op'>=</span> {
    <span class='label'>column_separator:</span> <span class='id identifier rubyid_col_sep'><a href="#col_sep-instance_method" title="CSV#col_sep (method)">col_sep</a></span><span class='comma'>,</span>
    <span class='label'>row_separator:</span> <span class='id identifier rubyid_row_sep'><a href="#row_sep-instance_method" title="CSV#row_sep (method)">row_sep</a></span><span class='comma'>,</span>
    <span class='label'>quote_character:</span> <span class='id identifier rubyid_quote_char'><a href="#quote_char-instance_method" title="CSV#quote_char (method)">quote_char</a></span><span class='comma'>,</span>
    <span class='label'>max_field_size:</span> <span class='id identifier rubyid_max_field_size'><a href="#max_field_size-instance_method" title="CSV#max_field_size (method)">max_field_size</a></span><span class='comma'>,</span>
    <span class='label'>unconverted_fields:</span> <span class='id identifier rubyid_unconverted_fields'>unconverted_fields</span><span class='comma'>,</span>
    <span class='label'>headers:</span> <span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span><span class='comma'>,</span>
    <span class='label'>return_headers:</span> <span class='id identifier rubyid_return_headers'>return_headers</span><span class='comma'>,</span>
    <span class='label'>skip_blanks:</span> <span class='id identifier rubyid_skip_blanks'>skip_blanks</span><span class='comma'>,</span>
    <span class='label'>skip_lines:</span> <span class='id identifier rubyid_skip_lines'><a href="#skip_lines-instance_method" title="CSV#skip_lines (method)">skip_lines</a></span><span class='comma'>,</span>
    <span class='label'>liberal_parsing:</span> <span class='id identifier rubyid_liberal_parsing'>liberal_parsing</span><span class='comma'>,</span>
    <span class='label'>encoding:</span> <span class='ivar'>@encoding</span><span class='comma'>,</span>
    <span class='label'>nil_value:</span> <span class='id identifier rubyid_nil_value'>nil_value</span><span class='comma'>,</span>
    <span class='label'>empty_value:</span> <span class='id identifier rubyid_empty_value'>empty_value</span><span class='comma'>,</span>
    <span class='label'>strip:</span> <span class='id identifier rubyid_strip'>strip</span><span class='comma'>,</span>
  }
  <span class='ivar'>@parser</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@parser_enumerator</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@eof_error</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='ivar'>@writer_options</span> <span class='op'>=</span> {
    <span class='label'>encoding:</span> <span class='ivar'>@encoding</span><span class='comma'>,</span>
    <span class='label'>force_encoding:</span> (<span class='kw'>not</span> <span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span>.<span class='id identifier rubyid_nil?'>nil?</span>)<span class='comma'>,</span>
    <span class='label'>force_quotes:</span> <span class='id identifier rubyid_force_quotes'>force_quotes</span><span class='comma'>,</span>
    <span class='label'>headers:</span> <span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span><span class='comma'>,</span>
    <span class='label'>write_headers:</span> <span class='id identifier rubyid_write_headers'>write_headers</span><span class='comma'>,</span>
    <span class='label'>column_separator:</span> <span class='id identifier rubyid_col_sep'><a href="#col_sep-instance_method" title="CSV#col_sep (method)">col_sep</a></span><span class='comma'>,</span>
    <span class='label'>row_separator:</span> <span class='id identifier rubyid_row_sep'><a href="#row_sep-instance_method" title="CSV#row_sep (method)">row_sep</a></span><span class='comma'>,</span>
    <span class='label'>quote_character:</span> <span class='id identifier rubyid_quote_char'><a href="#quote_char-instance_method" title="CSV#quote_char (method)">quote_char</a></span><span class='comma'>,</span>
    <span class='label'>quote_empty:</span> <span class='id identifier rubyid_quote_empty'>quote_empty</span><span class='comma'>,</span>
  }

  <span class='ivar'>@writer</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_writer'><a href="#writer-instance_method" title="CSV#writer (method)">writer</a></span> <span class='kw'>if</span> <span class='ivar'>@writer_options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_write_headers'>write_headers</span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="filter-class_method">
  <h3 class='signature  first'>
    <div class='inline-block'>
      <span class='overload'>.<strong>filter</strong>(in_string_or_io, **options) {|row| ... } &#x21d2; <code>array_of_arrays</code>, <code>CSV</code> </span>
      <span class='overload'>.<strong>filter</strong>(in_string_or_io, out_string_or_io, **options) {|row| ... } &#x21d2; <code>array_of_arrays</code>, <code>CSV</code> </span>
      <span class='overload'>.<strong>filter</strong>(**options) {|row| ... } &#x21d2; <code>array_of_arrays</code>, <code>CSV</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <ul><li>
<p>Parses CSV from a source (String, IO stream, or ARGF).</p>
</li><li>
<p>Calls the given block with each parsed row:</p>
<ul><li>
<p>Without headers, each row is an Array.</p>
</li><li>
<p>With headers, each row is a CSV::Row.</p>
</li></ul>
</li><li>
<p>Generates CSV to an output (String, IO stream, or STDOUT).</p>
</li><li>
<p>Returns the parsed source:</p>
<ul><li>
<p>Without headers, an Array of Arrays.</p>
</li><li>
<p>With headers, a CSV::Table.</p>
</li></ul>
</li></ul>

<p>When <code>in_string_or_io</code> is given, but not <code>out_string_or_io</code>, parses from the given <code>in_string_or_io</code> and generates to STDOUT.</p>

<p>String input without headers:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_in_string'>in_string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2</span><span class='tstring_end'>&quot;</span></span>
<span class='const'>CSV</span>.<span class='id identifier rubyid_filter'>filter</span>(<span class='id identifier rubyid_in_string'>in_string</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
  <span class='id identifier rubyid_row'>row</span>[<span class='int'>0</span>].<span class='id identifier rubyid_upcase!'>upcase!</span>
  <span class='id identifier rubyid_row'>row</span>[<span class='int'>1</span>] <span class='op'>=</span> <span class='op'>-</span> <span class='id identifier rubyid_row'>row</span>[<span class='int'>1</span>].<span class='id identifier rubyid_to_i'><a href="#to_i-instance_method" title="CSV#to_i (method)">to_i</a></span>
<span class='kw'>end</span> <span class='comment'># =&gt; [[&quot;FOO&quot;, 0], [&quot;BAR&quot;, -1], [&quot;BAZ&quot;, -2]]</span></code></pre>

<p>Output (to STDOUT):</p>

<pre class="code ruby"><code class="ruby"><span class='const'>FOO</span><span class='comma'>,</span><span class='int'>0</span>
<span class='const'>BAR</span><span class='comma'>,</span><span class='op'>-</span><span class='int'>1</span>
<span class='const'>BAZ</span><span class='comma'>,</span><span class='op'>-</span><span class='int'>2</span></code></pre>

<p>String input with headers:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_in_string'>in_string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Name,Value\nfoo,0\nbar,1\nbaz,2</span><span class='tstring_end'>&quot;</span></span>
<span class='const'>CSV</span>.<span class='id identifier rubyid_filter'>filter</span>(<span class='id identifier rubyid_in_string'>in_string</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
  <span class='id identifier rubyid_row'>row</span>[<span class='int'>0</span>].<span class='id identifier rubyid_upcase!'>upcase!</span>
  <span class='id identifier rubyid_row'>row</span>[<span class='int'>1</span>] <span class='op'>=</span> <span class='op'>-</span> <span class='id identifier rubyid_row'>row</span>[<span class='int'>1</span>].<span class='id identifier rubyid_to_i'><a href="#to_i-instance_method" title="CSV#to_i (method)">to_i</a></span>
<span class='kw'>end</span> <span class='comment'># =&gt; #&lt;CSV::Table mode:col_or_row row_count:4&gt;</span></code></pre>

<p>Output (to STDOUT):</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Name</span><span class='comma'>,</span><span class='const'>Value</span>
<span class='const'>FOO</span><span class='comma'>,</span><span class='int'>0</span>
<span class='const'>BAR</span><span class='comma'>,</span><span class='op'>-</span><span class='int'>1</span>
<span class='const'>BAZ</span><span class='comma'>,</span><span class='op'>-</span><span class='int'>2</span></code></pre>

<p>IO stream input without headers:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2</span><span class='tstring_end'>&quot;</span></span>)
<span class='const'>File</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_in_io'>in_io</span><span class='op'>|</span>
  <span class='const'>CSV</span>.<span class='id identifier rubyid_filter'>filter</span>(<span class='id identifier rubyid_in_io'>in_io</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
    <span class='id identifier rubyid_row'>row</span>[<span class='int'>0</span>].<span class='id identifier rubyid_upcase!'>upcase!</span>
    <span class='id identifier rubyid_row'>row</span>[<span class='int'>1</span>] <span class='op'>=</span> <span class='op'>-</span> <span class='id identifier rubyid_row'>row</span>[<span class='int'>1</span>].<span class='id identifier rubyid_to_i'><a href="#to_i-instance_method" title="CSV#to_i (method)">to_i</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span> <span class='comment'># =&gt; [[&quot;FOO&quot;, 0], [&quot;BAR&quot;, -1], [&quot;BAZ&quot;, -2]]</span></code></pre>

<p>Output (to STDOUT):</p>

<pre class="code ruby"><code class="ruby"><span class='const'>FOO</span><span class='comma'>,</span><span class='int'>0</span>
<span class='const'>BAR</span><span class='comma'>,</span><span class='op'>-</span><span class='int'>1</span>
<span class='const'>BAZ</span><span class='comma'>,</span><span class='op'>-</span><span class='int'>2</span></code></pre>

<p>IO stream input with headers:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Name,Value\nfoo,0\nbar,1\nbaz,2</span><span class='tstring_end'>&quot;</span></span>)
<span class='const'>File</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_in_io'>in_io</span><span class='op'>|</span>
  <span class='const'>CSV</span>.<span class='id identifier rubyid_filter'>filter</span>(<span class='id identifier rubyid_in_io'>in_io</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
    <span class='id identifier rubyid_row'>row</span>[<span class='int'>0</span>].<span class='id identifier rubyid_upcase!'>upcase!</span>
    <span class='id identifier rubyid_row'>row</span>[<span class='int'>1</span>] <span class='op'>=</span> <span class='op'>-</span> <span class='id identifier rubyid_row'>row</span>[<span class='int'>1</span>].<span class='id identifier rubyid_to_i'><a href="#to_i-instance_method" title="CSV#to_i (method)">to_i</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span> <span class='comment'># =&gt; #&lt;CSV::Table mode:col_or_row row_count:4&gt;</span></code></pre>

<p>Output (to STDOUT):</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Name</span><span class='comma'>,</span><span class='const'>Value</span>
<span class='const'>FOO</span><span class='comma'>,</span><span class='int'>0</span>
<span class='const'>BAR</span><span class='comma'>,</span><span class='op'>-</span><span class='int'>1</span>
<span class='const'>BAZ</span><span class='comma'>,</span><span class='op'>-</span><span class='int'>2</span></code></pre>

<p>When both <code>in_string_or_io</code> and <code>out_string_or_io</code> are given, parses from <code>in_string_or_io</code> and generates to <code>out_string_or_io</code>.</p>

<p>String output without headers:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_in_string'>in_string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_out_string'>out_string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>CSV</span>.<span class='id identifier rubyid_filter'>filter</span>(<span class='id identifier rubyid_in_string'>in_string</span><span class='comma'>,</span> <span class='id identifier rubyid_out_string'>out_string</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
  <span class='id identifier rubyid_row'>row</span>[<span class='int'>0</span>].<span class='id identifier rubyid_upcase!'>upcase!</span>
  <span class='id identifier rubyid_row'>row</span>[<span class='int'>1</span>] <span class='op'>=</span> <span class='op'>-</span> <span class='id identifier rubyid_row'>row</span>[<span class='int'>1</span>].<span class='id identifier rubyid_to_i'><a href="#to_i-instance_method" title="CSV#to_i (method)">to_i</a></span>
<span class='kw'>end</span> <span class='comment'># =&gt; [[&quot;FOO&quot;, 0], [&quot;BAR&quot;, -1], [&quot;BAZ&quot;, -2]]
</span><span class='id identifier rubyid_out_string'>out_string</span> <span class='comment'># =&gt; &quot;FOO,0\nBAR,-1\nBAZ,-2\n&quot;</span></code></pre>

<p>String output with headers:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_in_string'>in_string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Name,Value\nfoo,0\nbar,1\nbaz,2</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_out_string'>out_string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>CSV</span>.<span class='id identifier rubyid_filter'>filter</span>(<span class='id identifier rubyid_in_string'>in_string</span><span class='comma'>,</span> <span class='id identifier rubyid_out_string'>out_string</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
  <span class='id identifier rubyid_row'>row</span>[<span class='int'>0</span>].<span class='id identifier rubyid_upcase!'>upcase!</span>
  <span class='id identifier rubyid_row'>row</span>[<span class='int'>1</span>] <span class='op'>=</span> <span class='op'>-</span> <span class='id identifier rubyid_row'>row</span>[<span class='int'>1</span>].<span class='id identifier rubyid_to_i'><a href="#to_i-instance_method" title="CSV#to_i (method)">to_i</a></span>
<span class='kw'>end</span> <span class='comment'># =&gt; #&lt;CSV::Table mode:col_or_row row_count:4&gt;
</span><span class='id identifier rubyid_out_string'>out_string</span> <span class='comment'># =&gt; &quot;Name,Value\nFOO,0\nBAR,-1\nBAZ,-2\n&quot;</span></code></pre>

<p>IO stream output without headers:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_in_string'>in_string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2</span><span class='tstring_end'>&quot;</span></span>
<span class='const'>File</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_out_io'>out_io</span><span class='op'>|</span>
  <span class='const'>CSV</span>.<span class='id identifier rubyid_filter'>filter</span>(<span class='id identifier rubyid_in_string'>in_string</span><span class='comma'>,</span> <span class='id identifier rubyid_out_io'>out_io</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
    <span class='id identifier rubyid_row'>row</span>[<span class='int'>0</span>].<span class='id identifier rubyid_upcase!'>upcase!</span>
    <span class='id identifier rubyid_row'>row</span>[<span class='int'>1</span>] <span class='op'>=</span> <span class='op'>-</span> <span class='id identifier rubyid_row'>row</span>[<span class='int'>1</span>].<span class='id identifier rubyid_to_i'><a href="#to_i-instance_method" title="CSV#to_i (method)">to_i</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span> <span class='comment'># =&gt; [[&quot;FOO&quot;, 0], [&quot;BAR&quot;, -1], [&quot;BAZ&quot;, -2]]
</span><span class='const'>File</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="CSV.read (method)">read</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;FOO,0\nBAR,-1\nBAZ,-2\n&quot;</span></code></pre>

<p>IO stream output with headers:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_in_string'>in_string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Name,Value\nfoo,0\nbar,1\nbaz,2</span><span class='tstring_end'>&quot;</span></span>
<span class='const'>File</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_out_io'>out_io</span><span class='op'>|</span>
  <span class='const'>CSV</span>.<span class='id identifier rubyid_filter'>filter</span>(<span class='id identifier rubyid_in_string'>in_string</span><span class='comma'>,</span> <span class='id identifier rubyid_out_io'>out_io</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
    <span class='id identifier rubyid_row'>row</span>[<span class='int'>0</span>].<span class='id identifier rubyid_upcase!'>upcase!</span>
    <span class='id identifier rubyid_row'>row</span>[<span class='int'>1</span>] <span class='op'>=</span> <span class='op'>-</span> <span class='id identifier rubyid_row'>row</span>[<span class='int'>1</span>].<span class='id identifier rubyid_to_i'><a href="#to_i-instance_method" title="CSV#to_i (method)">to_i</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span> <span class='comment'># =&gt; #&lt;CSV::Table mode:col_or_row row_count:4&gt;
</span><span class='const'>File</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="CSV.read (method)">read</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;Name,Value\nFOO,0\nBAR,-1\nBAZ,-2\n&quot;</span></code></pre>

<p>When neither <code>in_string_or_io</code> nor <code>out_string_or_io</code> given, parses from <code>ARGF</code> and generates to STDOUT.</p>

<p>Without headers:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Put Ruby code into a file.
</span><span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;-EOT</span>
<span class='tstring_content'>  require &#39;csv&#39;
  CSV.filter do |row|
    row[0].upcase!
    row[1] = - row[1].to_i
  end
</span><span class='heredoc_end'>EOT
</span><span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.rb</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_ruby'>ruby</span>)
<span class='comment'># Put some CSV into a file.
</span><span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'># Run the Ruby code with CSV filename as argument.
</span><span class='id identifier rubyid_system'>system</span>(<span class='const'>Gem</span>.<span class='id identifier rubyid_ruby'>ruby</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>t.rb</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&quot;</span></span>)</code></pre>

<p>Output (to STDOUT):</p>

<pre class="code ruby"><code class="ruby"><span class='const'>FOO</span><span class='comma'>,</span><span class='int'>0</span>
<span class='const'>BAR</span><span class='comma'>,</span><span class='op'>-</span><span class='int'>1</span>
<span class='const'>BAZ</span><span class='comma'>,</span><span class='op'>-</span><span class='int'>2</span></code></pre>

<p>With headers:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Put Ruby code into a file.
</span><span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;-EOT</span>
<span class='tstring_content'>  require &#39;csv&#39;
  CSV.filter(headers: true) do |row|
    row[0].upcase!
    row[1] = - row[1].to_i
  end
</span><span class='heredoc_end'>EOT
</span><span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.rb</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_ruby'>ruby</span>)
<span class='comment'># Put some CSV into a file.
</span><span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Name,Value\nfoo,0\nbar,1\nbaz,2</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'># Run the Ruby code with CSV filename as argument.
</span><span class='id identifier rubyid_system'>system</span>(<span class='const'>Gem</span>.<span class='id identifier rubyid_ruby'>ruby</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>t.rb</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&quot;</span></span>)</code></pre>

<p>Output (to STDOUT):</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Name</span><span class='comma'>,</span><span class='const'>Value</span>
<span class='const'>FOO</span><span class='comma'>,</span><span class='int'>0</span>
<span class='const'>BAR</span><span class='comma'>,</span><span class='op'>-</span><span class='int'>1</span>
<span class='const'>BAZ</span><span class='comma'>,</span><span class='op'>-</span><span class='int'>2</span></code></pre>

<p>Arguments:</p>
<ul><li>
<p>Argument <code>in_string_or_io</code> must be a String or an IO stream.</p>
</li><li>
<p>Argument <code>out_string_or_io</code> must be a String or an IO stream.</p>
</li><li>
<p>Arguments <code>**options</code> must be keyword options. See <a href='#label-Options+for+Parsing'>Options for Parsing</a>.</p>
</li></ul>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L1202-L1244'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1202' data-end='1244'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 1202</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_filter'>filter</span>(<span class='id identifier rubyid_input'>input</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_output'>output</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>)
  <span class='comment'># parse options for input, output, or both
</span>  <span class='id identifier rubyid_in_options'>in_options</span><span class='comma'>,</span> <span class='id identifier rubyid_out_options'>out_options</span> <span class='op'>=</span> <span class='const'>Hash</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span><span class='comma'>,</span> {<span class='label'>row_sep:</span> <span class='const'><a href="CSV/InputRecordSeparator.html" title="CSV::InputRecordSeparator (module)">InputRecordSeparator</a></span>.<span class='id identifier rubyid_value'><a href="CSV/InputRecordSeparator.html#value-class_method" title="CSV::InputRecordSeparator.value (method)">value</a></span>}
  <span class='id identifier rubyid_options'>options</span>.<span class='id identifier rubyid_each'><a href="#each-instance_method" title="CSV#each (method)">each</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_key'>key</span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\Ain(?:put)?_(.+)\Z</span><span class='regexp_end'>/</span></span>
      <span class='id identifier rubyid_in_options'>in_options</span>[<span class='backref'>$1</span>.<span class='id identifier rubyid_to_sym'>to_sym</span>] <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\Aout(?:put)?_(.+)\Z</span><span class='regexp_end'>/</span></span>
      <span class='id identifier rubyid_out_options'>out_options</span>[<span class='backref'>$1</span>.<span class='id identifier rubyid_to_sym'>to_sym</span>] <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_in_options'>in_options</span>[<span class='id identifier rubyid_key'>key</span>]  <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
      <span class='id identifier rubyid_out_options'>out_options</span>[<span class='id identifier rubyid_key'>key</span>] <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># build input and output wrappers
</span>  <span class='id identifier rubyid_input'>input</span>  <span class='op'>=</span> <span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_input'>input</span>  <span class='op'>||</span> <span class='const'>ARGF</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_in_options'>in_options</span>)
  <span class='id identifier rubyid_output'>output</span> <span class='op'>=</span> <span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_output'>output</span> <span class='op'>||</span> <span class='gvar'>$stdout</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_out_options'>out_options</span>)

  <span class='comment'># process headers
</span>  <span class='id identifier rubyid_need_manual_header_output'>need_manual_header_output</span> <span class='op'>=</span>
    (<span class='id identifier rubyid_in_options'>in_options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span>] <span class='kw'>and</span>
     <span class='id identifier rubyid_out_options'>out_options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span>] <span class='op'>==</span> <span class='kw'>true</span> <span class='kw'>and</span>
     <span class='id identifier rubyid_out_options'>out_options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_write_headers'>write_headers</span>])
  <span class='kw'>if</span> <span class='id identifier rubyid_need_manual_header_output'>need_manual_header_output</span>
    <span class='id identifier rubyid_first_row'>first_row</span> <span class='op'>=</span> <span class='id identifier rubyid_input'>input</span>.<span class='id identifier rubyid_shift'><a href="#shift-instance_method" title="CSV#shift (method)">shift</a></span>
    <span class='kw'>if</span> <span class='id identifier rubyid_first_row'>first_row</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_first_row'>first_row</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="CSV/Row.html" title="CSV::Row (class)">Row</a></span>)
        <span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span> <span class='op'>=</span> <span class='id identifier rubyid_first_row'>first_row</span>.<span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span>
        <span class='kw'>yield</span> <span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span>
        <span class='id identifier rubyid_output'>output</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span>
      <span class='kw'>end</span>
      <span class='kw'>yield</span> <span class='id identifier rubyid_first_row'>first_row</span>
      <span class='id identifier rubyid_output'>output</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_first_row'>first_row</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># read, yield, write
</span>  <span class='id identifier rubyid_input'>input</span>.<span class='id identifier rubyid_each'><a href="#each-instance_method" title="CSV#each (method)">each</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
    <span class='kw'>yield</span> <span class='id identifier rubyid_row'>row</span>
    <span class='id identifier rubyid_output'>output</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="foreach-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>foreach</strong>(path_or_io, mode=&#39;r&#39;, **options) {|row| ... )  </span>
      <span class='overload'>.<strong>foreach</strong>(path_or_io, mode = &#39;r&#39;, **options)  &#x21d2; <code>Enumerator</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Calls the block with each row read from source <code>path_or_io</code>.</p>

<p>Path input without headers:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_in_path'>in_path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_in_path'>in_path</span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>)
<span class='const'>CSV</span>.<span class='id identifier rubyid_foreach'>foreach</span>(<span class='id identifier rubyid_in_path'>in_path</span>) {<span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_row'>row</span> }</code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby">[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0</span><span class='tstring_end'>&quot;</span></span>]
[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span>]
[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>2</span><span class='tstring_end'>&quot;</span></span>]</code></pre>

<p>Path input with headers:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Name,Value\nfoo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_in_path'>in_path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_in_path'>in_path</span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>)
<span class='const'>CSV</span>.<span class='id identifier rubyid_foreach'>foreach</span>(<span class='id identifier rubyid_in_path'>in_path</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span>) {<span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_row'>row</span> }</code></pre>

<p>Output:</p>

<pre class="code xml"><code class="xml">&lt;CSV::Row &quot;Name&quot;:&quot;foo&quot; &quot;Value&quot;:&quot;0&quot;&gt;
&lt;CSV::Row &quot;Name&quot;:&quot;bar&quot; &quot;Value&quot;:&quot;1&quot;&gt;
&lt;CSV::Row &quot;Name&quot;:&quot;baz&quot; &quot;Value&quot;:&quot;2&quot;&gt;
</code></pre>

<p>IO stream input without headers:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>)
<span class='const'>File</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_in_io'>in_io</span><span class='op'>|</span>
  <span class='const'>CSV</span>.<span class='id identifier rubyid_foreach'>foreach</span>(<span class='id identifier rubyid_in_io'>in_io</span>) {<span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_row'>row</span> }
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby">[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0</span><span class='tstring_end'>&quot;</span></span>]
[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span>]
[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>2</span><span class='tstring_end'>&quot;</span></span>]</code></pre>

<p>IO stream input with headers:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Name,Value\nfoo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>)
<span class='const'>File</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_in_io'>in_io</span><span class='op'>|</span>
  <span class='const'>CSV</span>.<span class='id identifier rubyid_foreach'>foreach</span>(<span class='id identifier rubyid_in_io'>in_io</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span>) {<span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_row'>row</span> }
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code xml"><code class="xml">&lt;CSV::Row &quot;Name&quot;:&quot;foo&quot; &quot;Value&quot;:&quot;0&quot;&gt;
&lt;CSV::Row &quot;Name&quot;:&quot;bar&quot; &quot;Value&quot;:&quot;1&quot;&gt;
&lt;CSV::Row &quot;Name&quot;:&quot;baz&quot; &quot;Value&quot;:&quot;2&quot;&gt;
</code></pre>

<p>With no block given, returns an Enumerator:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>)
<span class='const'>CSV</span>.<span class='id identifier rubyid_foreach'>foreach</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>) <span class='comment'># =&gt; #&lt;Enumerator: CSV:foreach(&quot;t.csv&quot;, &quot;r&quot;)&gt;</span></code></pre>

<p>Arguments:</p>
<ul><li>
<p>Argument <code>path_or_io</code> must be a file path or an IO stream.</p>
</li><li>
<p>Argument <code>mode</code>, if given, must be a File mode. See <code>Access Modes</code>.</p>
</li><li>
<p>Arguments <code>**options</code> must be keyword options. See <a href='#label-Options+for+Parsing'>Options for Parsing</a>.</p>
</li><li>
<p>This method optionally accepts an additional <code>:encoding</code> option that you can use to specify the Encoding of the data read from <a href="#path-instance_method" title="CSV#path (method)">#path</a> or <code>io</code>. You must provide this unless your data is in the encoding given by <code>Encoding.default_external</code>. Parsing will use this to determine how to parse the data. You may provide a second Encoding to have the data transcoded as it is read. For example,</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span><span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UTF-32BE:UTF-8</span><span class='tstring_end'>&#39;</span></span></code></pre>

<p>would read <code>UTF-32BE</code> data from the file but transcode it to <code>UTF-8</code> before parsing.</p>
</li></ul>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L1332-L1337'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1332' data-end='1337'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 1332</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_foreach'>foreach</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_mode'>mode</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>r</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>return</span> <span class='id identifier rubyid_to_enum'>to_enum</span>(<span class='id identifier rubyid___method__'>__method__</span><span class='comma'>,</span> <span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_mode'>mode</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>) <span class='kw'>unless</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_mode'>mode</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
    <span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_each'><a href="#each-instance_method" title="CSV#each (method)">each</a></span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="generate-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>generate</strong>(csv_string, **options) {|csv| ... } </span>
      <span class='overload'>.<strong>generate</strong>(**options) {|csv| ... } </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <ul><li>
<p>Argument <code>csv_string</code>, if given, must be a String object; defaults to a new empty String.</p>
</li><li>
<p>Arguments <code>options</code>, if given, should be generating options. See <a href='#label-Options+for+Generating'>Options for Generating</a>.</p>
</li></ul>
<hr>

<p>Creates a new CSV object via <code>CSV.new(csv_string, **options)</code>; calls the block with the CSV object, which the block may modify; returns the String generated from the CSV object.</p>

<p>Note that a passed String <strong>is</strong> modified by this method. Pass <code>csv_string</code>.dup if the String must be preserved.</p>

<p>This method has one additional option: <code>:encoding</code>, which sets the base Encoding for the output if no no <code>str</code> is specified. <code>CSV</code> needs this hint if you plan to output non-ASCII compatible data.</p>
<hr>

<p>Add lines:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_input_string'>input_string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_output_string'>output_string</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_generate'>generate</span>(<span class='id identifier rubyid_input_string'>input_string</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bat</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>3</span>]
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bam</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>4</span>]
<span class='kw'>end</span>
<span class='id identifier rubyid_output_string'>output_string</span> <span class='comment'># =&gt; &quot;foo,0\nbar,1\nbaz,2\nbat,3\nbam,4\n&quot;
</span><span class='id identifier rubyid_input_string'>input_string</span> <span class='comment'># =&gt; &quot;foo,0\nbar,1\nbaz,2\nbat,3\nbam,4\n&quot;
</span><span class='id identifier rubyid_output_string'>output_string</span>.<span class='id identifier rubyid_equal?'>equal?</span>(<span class='id identifier rubyid_input_string'>input_string</span>) <span class='comment'># =&gt; true # Same string, modified</span></code></pre>

<p>Add lines into new string, preserving old string:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_input_string'>input_string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_output_string'>output_string</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_generate'>generate</span>(<span class='id identifier rubyid_input_string'>input_string</span>.<span class='id identifier rubyid_dup'>dup</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bat</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>3</span>]
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bam</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>4</span>]
<span class='kw'>end</span>
<span class='id identifier rubyid_output_string'>output_string</span> <span class='comment'># =&gt; &quot;foo,0\nbar,1\nbaz,2\nbat,3\nbam,4\n&quot;
</span><span class='id identifier rubyid_input_string'>input_string</span> <span class='comment'># =&gt; &quot;foo,0\nbar,1\nbaz,2\n&quot;
</span><span class='id identifier rubyid_output_string'>output_string</span>.<span class='id identifier rubyid_equal?'>equal?</span>(<span class='id identifier rubyid_input_string'>input_string</span>) <span class='comment'># =&gt; false # Different strings</span></code></pre>

<p>Create lines from nothing:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_output_string'>output_string</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_generate'>generate</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span>]
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>1</span>]
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>2</span>]
<span class='kw'>end</span>
<span class='id identifier rubyid_output_string'>output_string</span> <span class='comment'># =&gt; &quot;foo,0\nbar,1\nbaz,2\n&quot;</span></code></pre>
<hr>

<p>Raises an exception if <code>csv_string</code> is not a String object:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Raises TypeError (no implicit conversion of Integer into String)
</span><span class='const'>CSV</span>.<span class='id identifier rubyid_generate'>generate</span>(<span class='int'>0</span>)</code></pre>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Yields:</p>
<ul class='yield'>
  <li>
    <span class='type'>(<code>csv</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L1398-L1412'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1398' data-end='1412'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 1398</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_generate'>generate</span>(<span class='id identifier rubyid_str'>str</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>)
  <span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span>]
  <span class='comment'># add a default empty String, if none was given
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_str'>str</span>
    <span class='id identifier rubyid_str'>str</span> <span class='op'>=</span> <span class='const'>StringIO</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_str'>str</span>)
    <span class='id identifier rubyid_str'>str</span>.<span class='id identifier rubyid_seek'>seek</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='const'>IO</span><span class='op'>::</span><span class='const'>SEEK_END</span>)
    <span class='id identifier rubyid_str'>str</span>.<span class='id identifier rubyid_set_encoding'>set_encoding</span>(<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span>) <span class='kw'>if</span> <span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_str'>str</span> <span class='op'>=</span> <span class='op'>+</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_str'>str</span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span>) <span class='kw'>if</span> <span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_str'>str</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>) <span class='comment'># wrap
</span>  <span class='kw'>yield</span> <span class='id identifier rubyid_csv'>csv</span>         <span class='comment'># yield for appending
</span>  <span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_string'>string</span>        <span class='comment'># return final String
</span><span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="generate_line-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>generate_line</strong>(ary)  </span>
      <span class='overload'>.<strong>generate_line</strong>(ary, **options)  </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the String created by generating CSV from <code>ary</code> using the specified <code>options</code>.</p>

<p>Argument <code>ary</code> must be an Array.</p>

<p>Special options:</p>
<ul><li>
<p>Option <code>:row_sep</code> defaults to <code>&quot;\n&quot;&gt; on Ruby 3.0 or later and &lt;tt&gt;$INPUT_RECORD_SEPARATOR</code> (<code>$/</code>) otherwise.:</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$INPUT_RECORD_SEPARATOR</span> <span class='comment'># =&gt; &quot;\n&quot;</span></code></pre>
</li><li>
<p>This method accepts an additional option, <code>:encoding</code>, which sets the base Encoding for the output. This method will try to guess your Encoding from the first non-<code>nil</code> field in <code>row</code>, if possible, but you may need to use this parameter as a backup plan.</p>
</li></ul>

<p>For other <code>options</code>, see <a href='#label-Options+for+Generating'>Options for Generating</a>.</p>
<hr>

<p>Returns the String generated from an Array:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_generate_line'>generate_line</span>([<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0</span><span class='tstring_end'>&#39;</span></span>]) <span class='comment'># =&gt; &quot;foo,0\n&quot;</span></code></pre>
<hr>

<p>Raises an exception if <code>ary</code> is not an Array:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Raises NoMethodError (undefined method `find&#39; for :foo:Symbol)
</span><span class='const'>CSV</span>.<span class='id identifier rubyid_generate_line'>generate_line</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_foo'>foo</span>)</code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L1446-L1467'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1446' data-end='1467'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 1446</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_line'>generate_line</span>(<span class='id identifier rubyid_row'>row</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>)
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> {<span class='label'>row_sep:</span> <span class='const'><a href="CSV/InputRecordSeparator.html" title="CSV::InputRecordSeparator (module)">InputRecordSeparator</a></span>.<span class='id identifier rubyid_value'><a href="CSV/InputRecordSeparator.html#value-class_method" title="CSV::InputRecordSeparator.value (method)">value</a></span>}.<span class='id identifier rubyid_merge'>merge</span>(<span class='id identifier rubyid_options'>options</span>)
  <span class='id identifier rubyid_str'>str</span> <span class='op'>=</span> <span class='op'>+</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span>]
    <span class='id identifier rubyid_str'>str</span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='id identifier rubyid_options'>options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span>])
  <span class='kw'>else</span>
    <span class='id identifier rubyid_fallback_encoding'>fallback_encoding</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_output_encoding'>output_encoding</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_row'>row</span>.<span class='id identifier rubyid_each'><a href="#each-instance_method" title="CSV#each (method)">each</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_field'>field</span><span class='op'>|</span>
      <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="String.html" title="String (class)">String</a></span>)
      <span class='id identifier rubyid_fallback_encoding'>fallback_encoding</span> <span class='op'>||=</span> <span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_ascii_only?'>ascii_only?</span>
      <span class='id identifier rubyid_output_encoding'>output_encoding</span> <span class='op'>=</span> <span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span>
      <span class='kw'>break</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_output_encoding'>output_encoding</span> <span class='op'>||=</span> <span class='id identifier rubyid_fallback_encoding'>fallback_encoding</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_output_encoding'>output_encoding</span>
      <span class='id identifier rubyid_str'>str</span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='id identifier rubyid_output_encoding'>output_encoding</span>)
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  (<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_str'>str</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>) <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span>).<span class='id identifier rubyid_string'>string</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="generate_lines-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>generate_lines</strong>(rows)  </span>
      <span class='overload'>.<strong>generate_lines</strong>(rows, **options)  </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the String created by generating CSV from using the specified <code>options</code>.</p>

<p>Argument <code>rows</code> must be an Array of row. <a href="CSV/Row.html" title="CSV::Row (class)"><code>::CSV::Row</code></a> is Array of String or CSV::Row.</p>

<p>Special options:</p>
<ul><li>
<p>Option <code>:row_sep</code> defaults to <code>&quot;\n&quot;</code> on Ruby 3.0 or later and <code>$INPUT_RECORD_SEPARATOR</code> (<code>$/</code>) otherwise.:</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$INPUT_RECORD_SEPARATOR</span> <span class='comment'># =&gt; &quot;\n&quot;</span></code></pre>
</li><li>
<p>This method accepts an additional option, <code>:encoding</code>, which sets the base Encoding for the output. This method will try to guess your Encoding from the first non-<code>nil</code> field in <code>row</code>, if possible, but you may need to use this parameter as a backup plan.</p>
</li></ul>

<p>For other <code>options</code>, see <a href='#label-Options+for+Generating'>Options for Generating</a>.</p>
<hr>

<p>Returns the String generated from an</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_generate_lines'>generate_lines</span>([[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0</span><span class='tstring_end'>&#39;</span></span>]<span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span>]<span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2</span><span class='tstring_end'>&#39;</span></span>]]) <span class='comment'># =&gt; &quot;foo,0\nbar,1\nbaz,2\n&quot;</span></code></pre>
<hr>

<p>Raises an exception</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Raises NoMethodError (undefined method `each&#39; for :foo:Symbol)
</span><span class='const'>CSV</span>.<span class='id identifier rubyid_generate_lines'>generate_lines</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_foo'>foo</span>)</code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L1501-L1507'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1501' data-end='1507'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 1501</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_lines'>generate_lines</span>(<span class='id identifier rubyid_rows'>rows</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>)
  <span class='kw'>self</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="CSV.generate (method)">generate</a></span>(<span class='op'>**</span><span class='id identifier rubyid_options'>options</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
    <span class='id identifier rubyid_rows'>rows</span>.<span class='id identifier rubyid_each'><a href="#each-instance_method" title="CSV#each (method)">each</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
      <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="instance-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>instance</strong>(string, **options)  </span>
      <span class='overload'>.<strong>instance</strong>(io = $stdout, **options)  </span>
      <span class='overload'>.<strong>instance</strong>(string, **options) {|csv| ... } </span>
      <span class='overload'>.<strong>instance</strong>(io = $stdout, **options) {|csv| ... } </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates or retrieves cached CSV objects. For arguments and options, see <a href="#new-class_method" title="CSV.new (method)">.new</a>.</p>

<p>This API is not Ractor-safe.</p>
<hr>

<p>With no block given, returns a CSV object.</p>

<p>The first call to <code>instance</code> creates and caches a CSV object:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s0'>s0</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>s0</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_csv0'>csv0</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_instance'>instance</span>(<span class='id identifier rubyid_s0'>s0</span>)
<span class='id identifier rubyid_csv0'>csv0</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># =&gt; CSV</span></code></pre>

<p>Subsequent calls to <code>instance</code> with that <em>same</em> <code>string</code> or <code>io</code> retrieve that same cached object:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv1'>csv1</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_instance'>instance</span>(<span class='id identifier rubyid_s0'>s0</span>)
<span class='id identifier rubyid_csv1'>csv1</span>.<span class='id identifier rubyid_class'>class</span> <span class='comment'># =&gt; CSV
</span><span class='id identifier rubyid_csv1'>csv1</span>.<span class='id identifier rubyid_equal?'>equal?</span>(<span class='id identifier rubyid_csv0'>csv0</span>) <span class='comment'># =&gt; true # Same CSV object</span></code></pre>

<p>A subsequent call to <code>instance</code> with a <em>different</em> <code>string</code> or <code>io</code> creates and caches a <em>different</em> CSV object.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s1'>s1</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>s1</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_csv2'>csv2</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_instance'>instance</span>(<span class='id identifier rubyid_s1'>s1</span>)
<span class='id identifier rubyid_csv2'>csv2</span>.<span class='id identifier rubyid_equal?'>equal?</span>(<span class='id identifier rubyid_csv0'>csv0</span>) <span class='comment'># =&gt; false # Different CSV object</span></code></pre>

<p>All the cached objects remains available:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv3'>csv3</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_instance'>instance</span>(<span class='id identifier rubyid_s0'>s0</span>)
<span class='id identifier rubyid_csv3'>csv3</span>.<span class='id identifier rubyid_equal?'>equal?</span>(<span class='id identifier rubyid_csv0'>csv0</span>) <span class='comment'># true # Same CSV object
</span><span class='id identifier rubyid_csv4'>csv4</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_instance'>instance</span>(<span class='id identifier rubyid_s1'>s1</span>)
<span class='id identifier rubyid_csv4'>csv4</span>.<span class='id identifier rubyid_equal?'>equal?</span>(<span class='id identifier rubyid_csv2'>csv2</span>) <span class='comment'># true # Same CSV object</span></code></pre>
<hr>

<p>When a block is given, calls the block with the created or retrieved CSV object; returns the block’s return value:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_instance'>instance</span>(<span class='id identifier rubyid_s0'>s0</span>) {<span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span> <span class='symbeg'>:</span><span class='id identifier rubyid_foo'>foo</span> } <span class='comment'># =&gt; :foo</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L1006-L1020'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1006' data-end='1020'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 1006</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_instance'>instance</span>(<span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='gvar'>$stdout</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>)
  <span class='comment'># create a _signature_ for this method call, data object and options
</span>  <span class='id identifier rubyid_sig'>sig</span> <span class='op'>=</span> [<span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_object_id'>object_id</span>] <span class='op'>+</span>
        <span class='id identifier rubyid_options'>options</span>.<span class='id identifier rubyid_values_at'>values_at</span>(<span class='op'>*</span><span class='const'><a href="#DEFAULT_OPTIONS-constant" title="CSV::DEFAULT_OPTIONS (constant)">DEFAULT_OPTIONS</a></span>.<span class='id identifier rubyid_keys'>keys</span>)

  <span class='comment'># fetch or create the instance for this signature
</span>  <span class='cvar'>@@instances</span> <span class='op'>||=</span> <span class='const'>Hash</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>
  <span class='id identifier rubyid_instance'>instance</span> <span class='op'>=</span> (<span class='cvar'>@@instances</span>[<span class='id identifier rubyid_sig'>sig</span>] <span class='op'>||=</span> <span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>))

  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='kw'>yield</span> <span class='id identifier rubyid_instance'>instance</span>  <span class='comment'># run block, if given, returning result
</span>  <span class='kw'>else</span>
    <span class='id identifier rubyid_instance'>instance</span>        <span class='comment'># or return the instance
</span>  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="open-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>open</strong>(file_path, mode = &quot;rb&quot;, **options)  &#x21d2; <code>CSV</code> </span>
      <span class='overload'>.<strong>open</strong>(io, mode = &quot;rb&quot;, **options)  &#x21d2; <code>CSV</code> </span>
      <span class='overload'>.<strong>open</strong>(file_path, mode = &quot;rb&quot;, **options) {|csv| ... } &#x21d2; <code>Object</code> </span>
      <span class='overload'>.<strong>open</strong>(io, mode = &quot;rb&quot;, **options) {|csv| ... } &#x21d2; <code>Object</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>possible options elements:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_keyword'>keyword</span> <span class='label'>form:</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_invalid'>invalid</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span>      <span class='comment'># raise error on invalid byte sequence (default)
</span>  <span class='symbeg'>:</span><span class='id identifier rubyid_invalid'>invalid</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_replace'>replace</span> <span class='comment'># replace invalid byte sequence
</span>  <span class='symbeg'>:</span><span class='kw'>undef</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_replace'>replace</span>   <span class='comment'># replace undefined conversion
</span>  <span class='symbeg'>:</span><span class='id identifier rubyid_replace'>replace</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_string'>string</span>   <span class='comment'># replacement string (&quot;?&quot; or &quot;\uFFFD&quot; if not specified)</span></code></pre>
<ul><li>
<p>Argument <a href="#path-instance_method" title="CSV#path (method)">#path</a>, if given, must be the path to a file.</p>
</li></ul>

<p></p>
<ul><li>
<p>Argument <code>mode</code>, if given, must be a File mode. See <code>Access Modes</code>.</p>
</li><li>
<p>Arguments <code>**options</code> must be keyword options. See <a href='#label-Options+for+Generating'>Options for Generating</a>.</p>
</li><li>
<p>This method optionally accepts an additional <code>:encoding</code> option that you can use to specify the Encoding of the data read from <a href="#path-instance_method" title="CSV#path (method)">#path</a> or <code>io</code>. You must provide this unless your data is in the encoding given by <code>Encoding.default_external</code>. Parsing will use this to determine how to parse the data. You may provide a second Encoding to have the data transcoded as it is read. For example,</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span><span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UTF-32BE:UTF-8</span><span class='tstring_end'>&#39;</span></span></code></pre>

<p>would read <code>UTF-32BE</code> data from the file but transcode it to <code>UTF-8</code> before parsing.</p>
</li></ul>
<hr>

<p>These examples assume prior execution of:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>)</code></pre>
<hr>

<p>With no block given, returns a new CSV object.</p>

<p>Create a CSV object using a file path:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_open'>open</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>)
<span class='id identifier rubyid_csv'>csv</span> <span class='comment'># =&gt; #&lt;CSV io_type:File io_path:&quot;t.csv&quot; encoding:UTF-8 lineno:0 col_sep:&quot;,&quot; row_sep:&quot;\n&quot; quote_char:&quot;\&quot;&quot;&gt;</span></code></pre>

<p>Create a CSV object using an open File:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_open'>open</span>(<span class='const'>File</span>.<span class='id identifier rubyid_open'>open</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>))
<span class='id identifier rubyid_csv'>csv</span> <span class='comment'># =&gt; #&lt;CSV io_type:File io_path:&quot;t.csv&quot; encoding:UTF-8 lineno:0 col_sep:&quot;,&quot; row_sep:&quot;\n&quot; quote_char:&quot;\&quot;&quot;&gt;</span></code></pre>
<hr>

<p>With a block given, calls the block with the created CSV object; returns the block’s return value:</p>

<p>Using a file path:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_open'>open</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>) {<span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_csv'>csv</span>}
<span class='id identifier rubyid_csv'>csv</span> <span class='comment'># =&gt; #&lt;CSV io_type:File io_path:&quot;t.csv&quot; encoding:UTF-8 lineno:0 col_sep:&quot;,&quot; row_sep:&quot;\n&quot; quote_char:&quot;\&quot;&quot;&gt;</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'>#&lt;CSV io_type:File io_path:&quot;t.csv&quot; encoding:UTF-8 lineno:0 col_sep:&quot;,&quot; row_sep:&quot;\n&quot; quote_char:&quot;\&quot;&quot;&gt;</span></code></pre>

<p>Using an open File:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_open'>open</span>(<span class='const'>File</span>.<span class='id identifier rubyid_open'>open</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>)) {<span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_csv'>csv</span>}
<span class='id identifier rubyid_csv'>csv</span> <span class='comment'># =&gt; #&lt;CSV io_type:File io_path:&quot;t.csv&quot; encoding:UTF-8 lineno:0 col_sep:&quot;,&quot; row_sep:&quot;\n&quot; quote_char:&quot;\&quot;&quot;&gt;</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'>#&lt;CSV io_type:File io_path:&quot;t.csv&quot; encoding:UTF-8 lineno:0 col_sep:&quot;,&quot; row_sep:&quot;\n&quot; quote_char:&quot;\&quot;&quot;&gt;</span></code></pre>
<hr>

<p>Raises an exception if the argument is not a String object or IO object:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Raises TypeError (no implicit conversion of Symbol into String)
</span><span class='const'>CSV</span>.<span class='id identifier rubyid_open'>open</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_foo'>foo</span>)</code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L1581-L1618'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1581' data-end='1618'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 1581</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_open'>open</span>(<span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='id identifier rubyid_mode'>mode</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>r</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>)
  <span class='comment'># wrap a File opened with the remaining args with no newline
</span>  <span class='comment'># decorator
</span>  <span class='id identifier rubyid_file_opts'>file_opts</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span>.<span class='id identifier rubyid_dup'>dup</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_file_opts'>file_opts</span>.<span class='id identifier rubyid_key?'>key?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_newline'>newline</span>)
    <span class='id identifier rubyid_file_opts'>file_opts</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_universal_newline'>universal_newline</span>] <span class='op'>||=</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_options'>options</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_invalid'>invalid</span>)
  <span class='id identifier rubyid_options'>options</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='symbeg'>:</span><span class='kw'>undef</span>)
  <span class='id identifier rubyid_options'>options</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_replace'>replace</span>)
  <span class='id identifier rubyid_options'>options</span>.<span class='id identifier rubyid_delete_if'>delete_if</span> {<span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='op'>|</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>newline\z</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='id identifier rubyid_k'>k</span>)}

  <span class='kw'>begin</span>
    <span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_open'>open</span>(<span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='id identifier rubyid_mode'>mode</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_file_opts'>file_opts</span>)
  <span class='kw'>rescue</span> <span class='const'>ArgumentError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='kw'>unless</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>needs binmode</span><span class='regexp_end'>/</span></span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='id identifier rubyid_e'>e</span>.<span class='id identifier rubyid_message'>message</span>) <span class='kw'>and</span> <span class='id identifier rubyid_mode'>mode</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>r</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_mode'>mode</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rb</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_file_opts'>file_opts</span> <span class='op'>=</span> {<span class='label'>encoding:</span> <span class='const'>Encoding</span>.<span class='id identifier rubyid_default_external'>default_external</span>}.<span class='id identifier rubyid_merge'>merge</span>(<span class='id identifier rubyid_file_opts'>file_opts</span>)
    <span class='kw'>retry</span>
  <span class='kw'>end</span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_f'>f</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>)
  <span class='kw'>rescue</span> <span class='const'>Exception</span>
    <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'>close</span>
    <span class='id identifier rubyid_raise'>raise</span>
  <span class='kw'>end</span>

  <span class='comment'># handle blocks like Ruby&#39;s open(), not like the CSV library
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='kw'>begin</span>
      <span class='kw'>yield</span> <span class='id identifier rubyid_csv'>csv</span>
    <span class='kw'>ensure</span>
      <span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_close'>close</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_csv'>csv</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>parse</strong>(string)  &#x21d2; <code>array_of_arrays</code> </span>
      <span class='overload'>.<strong>parse</strong>(io)  &#x21d2; <code>array_of_arrays</code> </span>
      <span class='overload'>.<strong>parse</strong>(string, headers: ..., **options)  &#x21d2; <code>CSV</code> </span>
      <span class='overload'>.<strong>parse</strong>(io, headers: ..., **options)  &#x21d2; <code>CSV</code> </span>
      <span class='overload'>.<strong>parse</strong>(string, **options) {|row| ... } </span>
      <span class='overload'>.<strong>parse</strong>(io, **options) {|row| ... } </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Parses <code>string</code> or <code>io</code> using the specified <code>options</code>.</p>
<ul><li>
<p>Argument <code>string</code> should be a String object; it will be put into a new StringIO object positioned at the beginning.</p>
</li></ul>

<p></p>
<ul><li>
<p>Argument <code>options</code>: see <a href='#label-Options+for+Parsing'>Options for Parsing</a></p>
</li></ul>

<h6 id="label-Without+Option+-7Bheaders-7D">Without Option <a href="#headers-instance_method" title="CSV#headers (method)">#headers</a></h6>

<p>Without <a href='#label-Option+headers'>option <a href="#headers-instance_method" title="CSV#headers (method)">#headers</a></a> case.</p>

<p>These examples assume prior execution of:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>)</code></pre>
<hr>

<p>With no block given, returns an Array of Arrays formed from the source.</p>

<p>Parse a String:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_a_of_a'>a_of_a</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse'>parse</span>(<span class='id identifier rubyid_string'>string</span>)
<span class='id identifier rubyid_a_of_a'>a_of_a</span> <span class='comment'># =&gt; [[&quot;foo&quot;, &quot;0&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span></code></pre>

<p>Parse an open File:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_a_of_a'>a_of_a</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
  <span class='const'>CSV</span>.<span class='id identifier rubyid_parse'>parse</span>(<span class='id identifier rubyid_file'>file</span>)
<span class='kw'>end</span>
<span class='id identifier rubyid_a_of_a'>a_of_a</span> <span class='comment'># =&gt; [[&quot;foo&quot;, &quot;0&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span></code></pre>
<hr>

<p>With a block given, calls the block with each parsed row:</p>

<p>Parse a String:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_parse'>parse</span>(<span class='id identifier rubyid_string'>string</span>) {<span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_row'>row</span> }</code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby">[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0</span><span class='tstring_end'>&quot;</span></span>]
[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span>]
[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>2</span><span class='tstring_end'>&quot;</span></span>]</code></pre>

<p>Parse an open File:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>File</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
  <span class='const'>CSV</span>.<span class='id identifier rubyid_parse'>parse</span>(<span class='id identifier rubyid_file'>file</span>) {<span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_row'>row</span> }
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby">[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0</span><span class='tstring_end'>&quot;</span></span>]
[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span>]
[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>2</span><span class='tstring_end'>&quot;</span></span>]</code></pre>

<h6 id="label-With+Option+-7Bheaders-7D">With Option <a href="#headers-instance_method" title="CSV#headers (method)">#headers</a></h6>

<p>With <a href='#label-Option+headers'>option <a href="#headers-instance_method" title="CSV#headers (method)">#headers</a></a> case.</p>

<p>These examples assume prior execution of:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Name,Count\nfoo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>)</code></pre>
<hr>

<p>With no block given, returns a <a href="CSV/Table.html" title="CSV::Table (class)"><code>::CSV::Table</code></a> object formed from the source.</p>

<p>Parse a String:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv_table'>csv_table</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_parse'>parse</span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>headers:</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Name</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Count</span><span class='tstring_end'>&#39;</span></span>])
<span class='id identifier rubyid_csv_table'>csv_table</span> <span class='comment'># =&gt; #&lt;CSV::Table mode:col_or_row row_count:5&gt;</span></code></pre>

<p>Parse an open File:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv_table'>csv_table</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
  <span class='const'>CSV</span>.<span class='id identifier rubyid_parse'>parse</span>(<span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='label'>headers:</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Name</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Count</span><span class='tstring_end'>&#39;</span></span>])
<span class='kw'>end</span>
<span class='id identifier rubyid_csv_table'>csv_table</span> <span class='comment'># =&gt; #&lt;CSV::Table mode:col_or_row row_count:4&gt;</span></code></pre>
<hr>

<p>With a block given, calls the block with each parsed row, which has been formed into a <a href="CSV/Row.html" title="CSV::Row (class)"><code>::CSV::Row</code></a> object:</p>

<p>Parse a String:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_parse'>parse</span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>headers:</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Name</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Count</span><span class='tstring_end'>&#39;</span></span>]) {<span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_row'>row</span> }</code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># &lt;CSV::Row &quot;Name&quot;:&quot;foo&quot; &quot;Count&quot;:&quot;0&quot;&gt;
</span><span class='comment'># &lt;CSV::Row &quot;Name&quot;:&quot;bar&quot; &quot;Count&quot;:&quot;1&quot;&gt;
</span><span class='comment'># &lt;CSV::Row &quot;Name&quot;:&quot;baz&quot; &quot;Count&quot;:&quot;2&quot;&gt;</span></code></pre>

<p>Parse an open File:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>File</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
  <span class='const'>CSV</span>.<span class='id identifier rubyid_parse'>parse</span>(<span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='label'>headers:</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Name</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Count</span><span class='tstring_end'>&#39;</span></span>]) {<span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_row'>row</span> }
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># &lt;CSV::Row &quot;Name&quot;:&quot;foo&quot; &quot;Count&quot;:&quot;0&quot;&gt;
</span><span class='comment'># &lt;CSV::Row &quot;Name&quot;:&quot;bar&quot; &quot;Count&quot;:&quot;1&quot;&gt;
</span><span class='comment'># &lt;CSV::Row &quot;Name&quot;:&quot;baz&quot; &quot;Count&quot;:&quot;2&quot;&gt;</span></code></pre>
<hr>

<p>Raises an exception if the argument is not a String object or IO object:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Raises NoMethodError (undefined method `close&#39; for :foo:Symbol)
</span><span class='const'>CSV</span>.<span class='id identifier rubyid_parse'>parse</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_foo'>foo</span>)</code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L1732-L1743'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1732' data-end='1743'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 1732</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_parse'>parse</span>(<span class='id identifier rubyid_str'>str</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_str'>str</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>)

  <span class='kw'>return</span> <span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_each'><a href="#each-instance_method" title="CSV#each (method)">each</a></span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>) <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>

  <span class='comment'># slurp contents, if no block is given
</span>  <span class='kw'>begin</span>
    <span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="CSV.read (method)">read</a></span>
  <span class='kw'>ensure</span>
    <span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_close'>close</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_line-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>parse_line</strong>(string)  &#x21d2; <a href="Array.html" title="Array (class)">Array</a><sup>?</sup> </span>
      <span class='overload'>.<strong>parse_line</strong>(io)  &#x21d2; <a href="Array.html" title="Array (class)">Array</a><sup>?</sup> </span>
      <span class='overload'>.<strong>parse_line</strong>(string, **options)  &#x21d2; <a href="Array.html" title="Array (class)">Array</a><sup>?</sup> </span>
      <span class='overload'>.<strong>parse_line</strong>(io, **options)  &#x21d2; <a href="Array.html" title="Array (class)">Array</a><sup>?</sup> </span>
      <span class='overload'>.<strong>parse_line</strong>(string, headers: true, **options)  &#x21d2; <code>CSV</code><sup>?</sup> </span>
      <span class='overload'>.<strong>parse_line</strong>(io, headers: true, **options)  &#x21d2; <code>CSV</code><sup>?</sup> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the data created by parsing the first line of <code>string</code> or <code>io</code> using the specified <code>options</code>.</p>
<ul><li>
<p>Argument <code>string</code> should be a String object; it will be put into a new StringIO object positioned at the beginning.</p>
</li></ul>

<p></p>
<ul><li>
<p>Argument <code>options</code>: see <a href='#label-Options+for+Parsing'>Options for Parsing</a></p>
</li></ul>

<h6 id="label-Without+Option+-7Bheaders-7D">Without Option <a href="#headers-instance_method" title="CSV#headers (method)">#headers</a></h6>

<p>Without option <a href="#headers-instance_method" title="CSV#headers (method)">#headers</a>, returns the first row as a new Array.</p>

<p>These examples assume prior execution of:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>)</code></pre>

<p>Parse the first line from a String object:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_parse_line'>parse_line</span>(<span class='id identifier rubyid_string'>string</span>) <span class='comment'># =&gt; [&quot;foo&quot;, &quot;0&quot;]</span></code></pre>

<p>Parse the first line from a File object:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>File</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
  <span class='const'>CSV</span>.<span class='id identifier rubyid_parse_line'>parse_line</span>(<span class='id identifier rubyid_file'>file</span>) <span class='comment'># =&gt; [&quot;foo&quot;, &quot;0&quot;]
</span><span class='kw'>end</span> <span class='comment'># =&gt; [&quot;foo&quot;, &quot;0&quot;]</span></code></pre>

<p>Returns <code>nil</code> if the argument is an empty String:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_parse_line'>parse_line</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil</span></code></pre>

<h6 id="label-With+Option+-7Bheaders-7D">With Option <a href="#headers-instance_method" title="CSV#headers (method)">#headers</a></h6>

<p>With <a href='#label-Option+headers'>option <a href="#headers-instance_method" title="CSV#headers (method)">#headers</a></a>, returns the first row as a <a href="CSV/Row.html" title="CSV::Row (class)"><code>::CSV::Row</code></a> object.</p>

<p>These examples assume prior execution of:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Name,Count\nfoo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>)</code></pre>

<p>Parse the first line from a String object:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_parse_line'>parse_line</span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span>) <span class='comment'># =&gt; #&lt;CSV::Row &quot;Name&quot;:&quot;foo&quot; &quot;Count&quot;:&quot;0&quot;&gt;</span></code></pre>

<p>Parse the first line from a File object:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>File</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
  <span class='const'>CSV</span>.<span class='id identifier rubyid_parse_line'>parse_line</span>(<span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span>)
<span class='kw'>end</span> <span class='comment'># =&gt; #&lt;CSV::Row &quot;Name&quot;:&quot;foo&quot; &quot;Count&quot;:&quot;0&quot;&gt;</span></code></pre>
<hr>

<p>Raises an exception if the argument is <code>nil</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Raises ArgumentError (Cannot parse nil as CSV):
</span><span class='const'>CSV</span>.<span class='id identifier rubyid_parse_line'>parse_line</span>(<span class='kw'>nil</span>)</code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L1805-L1807'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1805' data-end='1807'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 1805</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_line'>parse_line</span>(<span class='id identifier rubyid_line'><a href="#line-instance_method" title="CSV#line (method)">line</a></span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>)
  <span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_line'><a href="#line-instance_method" title="CSV#line (method)">line</a></span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>).<span class='id identifier rubyid_each'><a href="#each-instance_method" title="CSV#each (method)">each</a></span>.<span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="read-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>read</strong>(source, **options)  &#x21d2; <code>array_of_arrays</code> </span>
      <span class='overload'>.<strong>read</strong>(source, headers: true, **options)  &#x21d2; <code>CSV</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Opens the given <code>source</code> with the given <code>options</code> (see <a href="#open-class_method" title="CSV.open (method)">.open</a>), reads the source (see <a href="#read-instance_method" title="CSV#read (method)">#read</a>), and returns the result, which will be either an Array of Arrays or a <a href="CSV/Table.html" title="CSV::Table (class)"><code>::CSV::Table</code></a>.</p>

<p>Without headers:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>)
<span class='const'>CSV</span>.<span class='id identifier rubyid_read'>read</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>) <span class='comment'># =&gt; [[&quot;foo&quot;, &quot;0&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span></code></pre>

<p>With headers:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Name,Value\nfoo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>)
<span class='const'>CSV</span>.<span class='id identifier rubyid_read'>read</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span>) <span class='comment'># =&gt; #&lt;CSV::Table mode:col_or_row row_count:4&gt;</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L1829-L1831'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1829' data-end='1831'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 1829</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_read'>read</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>)
  <span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>) { <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span> <span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_read'>read</span> }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="readlines-class_method">
  <h3 class='signature '>
    .<strong>readlines</strong>(source, **options)    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#read-class_method" title="CSV.read (method)">.read</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L1837-L1839'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1837' data-end='1839'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 1837</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_readlines'>readlines</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>)
  <span class='id identifier rubyid_read'><a href="#read-class_method" title="CSV.read (method)">read</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="table-class_method">
  <h3 class='signature '>
    .<strong>table</strong>(source, **options)    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Calls <a href="#read-class_method" title="CSV.read (method)">.read</a> with <code>source</code>, <code>options</code>, and certain default options:</p>
<ul><li>
<p><a href="#headers-instance_method" title="CSV#headers (method)">#headers</a>: <code>true</code></p>
</li><li>
<p><a href="#converters-instance_method" title="CSV#converters (method)">#converters</a>: <code>:numeric</code></p>
</li><li>
<p><a href="#header_converters-instance_method" title="CSV#header_converters (method)">#header_converters</a>: <code>:symbol</code></p>
</li></ul>

<p>Returns a <a href="CSV/Table.html" title="CSV::Table (class)"><code>::CSV::Table</code></a> object.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Name,Value\nfoo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>)
<span class='const'>CSV</span>.<span class='id identifier rubyid_table'>table</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>) <span class='comment'># =&gt; #&lt;CSV::Table mode:col_or_row row_count:4&gt;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L1856-L1864'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1856' data-end='1864'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 1856</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_table'>table</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>)
  <span class='id identifier rubyid_default_options'>default_options</span> <span class='op'>=</span> {
    <span class='label'>headers:</span>           <span class='kw'>true</span><span class='comma'>,</span>
    <span class='label'>converters:</span>        <span class='symbeg'>:</span><span class='id identifier rubyid_numeric'>numeric</span><span class='comma'>,</span>
    <span class='label'>header_converters:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_symbol'>symbol</span><span class='comma'>,</span>
  }
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_default_options'>default_options</span>.<span class='id identifier rubyid_merge'>merge</span>(<span class='id identifier rubyid_options'>options</span>)
  <span class='id identifier rubyid_read'><a href="#read-class_method" title="CSV.read (method)">read</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="binmode?-instance_method">
  <h3 class='signature ro first'>
    #<strong>binmode?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2261-L2267'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2261' data-end='2267'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2261</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_binmode?'>binmode?</span>
  <span class='kw'>if</span> <span class='ivar'>@io</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_binmode?'>binmode?</span>)
    <span class='ivar'>@io</span>.<span class='id identifier rubyid_binmode?'>binmode?</span>
  <span class='kw'>else</span>
    <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="encoding-instance_method">
  <h3 class='signature ro'>
    #<strong>encoding</strong>  &#x21d2; <code>Encoding</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the encoding used for parsing and generating; see <a href='#label-Character+Encodings+-28M17n+or+Multilingualization-29'>Character Encodings (M17n or Multilingualization)</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_encoding'>encoding</span> <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2192-L2192'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2192' data-end='2192'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2192</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_encoding'>encoding</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="eof-instance_method">
  <h3 class='signature ro'>
    #<strong>eof</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#eof%3F-instance_method" title="CSV#eof? (method)">#eof?</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2309-L2309'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2309' data-end='2309'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2309</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_alias_method'>alias_method</span> <span class='symbeg'>:</span><span class='id identifier rubyid_eof'>eof</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_eof?'><a href="#eof%3F-instance_method" title="CSV#eof? (method)">eof?</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="force_quotes?-instance_method">
  <h3 class='signature ro'>
    #<strong>force_quotes?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the value that determines whether all output fields are to be quoted; used for generating; see <a href='#label-Option+force_quotes'>Option <code>force_quotes</code></a>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_force_quotes?'>force_quotes?</span> <span class='comment'># =&gt; false</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2172-L2174'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2172' data-end='2174'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2172</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_force_quotes?'>force_quotes?</span>
  <span class='ivar'>@writer_options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_force_quotes'>force_quotes</span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="header_row?-instance_method">
  <h3 class='signature ro'>
    #<strong>header_row?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if the next row to be read is a header row; <code>false</code> otherwise.</p>

<p>Without headers:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_string'>string</span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_header_row?'>header_row?</span> <span class='comment'># =&gt; false</span></code></pre>

<p>With headers:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Name,Value\nfoo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_header_row?'>header_row?</span> <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_shift'><a href="#shift-instance_method" title="CSV#shift (method)">shift</a></span> <span class='comment'># =&gt; #&lt;CSV::Row &quot;Name&quot;:&quot;foo&quot; &quot;Value&quot;:&quot;0&quot;&gt;
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_header_row?'>header_row?</span> <span class='comment'># =&gt; false</span></code></pre>
<hr>

<p>Raises an exception if the source is not opened for reading:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_string'>string</span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_close'>close</span>
<span class='comment'># Raises IOError (not opened for reading)
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_header_row?'>header_row?</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2631-L2633'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2631' data-end='2633'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2631</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_header_row?'>header_row?</span>
  <span class='id identifier rubyid_parser'><a href="#parser-instance_method" title="CSV#parser (method)">parser</a></span>.<span class='id identifier rubyid_header_row?'>header_row?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="liberal_parsing?-instance_method">
  <h3 class='signature ro'>
    #<strong>liberal_parsing?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the value that determines whether illegal input is to be handled; used for parsing; see <a href='#label-Option+liberal_parsing'>Option <code>liberal_parsing</code></a>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_liberal_parsing?'>liberal_parsing?</span> <span class='comment'># =&gt; false</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2182-L2184'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2182' data-end='2184'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2182</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_liberal_parsing?'>liberal_parsing?</span>
  <span class='id identifier rubyid_parser'><a href="#parser-instance_method" title="CSV#parser (method)">parser</a></span>.<span class='id identifier rubyid_liberal_parsing?'>liberal_parsing?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="return_headers?-instance_method">
  <h3 class='signature ro'>
    #<strong>return_headers?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the value that determines whether headers are to be returned; used for parsing; see <a href='#label-Option+return_headers'>Option <code>return_headers</code></a>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_return_headers?'>return_headers?</span> <span class='comment'># =&gt; false</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2124-L2126'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2124' data-end='2126'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2124</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_return_headers?'>return_headers?</span>
  <span class='id identifier rubyid_parser'><a href="#parser-instance_method" title="CSV#parser (method)">parser</a></span>.<span class='id identifier rubyid_return_headers?'>return_headers?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="skip_blanks?-instance_method">
  <h3 class='signature ro'>
    #<strong>skip_blanks?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the value that determines whether blank lines are to be ignored; used for parsing; see <a href='#label-Option+skip_blanks'>Option <code>skip_blanks</code></a>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_skip_blanks?'>skip_blanks?</span> <span class='comment'># =&gt; false</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2161-L2163'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2161' data-end='2163'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2161</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_skip_blanks?'>skip_blanks?</span>
  <span class='id identifier rubyid_parser'><a href="#parser-instance_method" title="CSV#parser (method)">parser</a></span>.<span class='id identifier rubyid_skip_blanks?'>skip_blanks?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="unconverted_fields?-instance_method">
  <h3 class='signature ro'>
    #<strong>unconverted_fields?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the value that determines whether unconverted fields are to be available; used for parsing; see <a href='#label-Option+unconverted_fields'>Option <code>unconverted_fields</code></a>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_unconverted_fields?'>unconverted_fields?</span> <span class='comment'># =&gt; nil</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2096-L2098'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2096' data-end='2098'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2096</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_unconverted_fields?'>unconverted_fields?</span>
  <span class='id identifier rubyid_parser'><a href="#parser-instance_method" title="CSV#parser (method)">parser</a></span>.<span class='id identifier rubyid_unconverted_fields?'>unconverted_fields?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="write_headers?-instance_method">
  <h3 class='signature ro'>
    #<strong>write_headers?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the value that determines whether headers are to be written; used for generating; see <a href='#label-Option+write_headers'>Option <code>write_headers</code></a>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_write_headers?'>write_headers?</span> <span class='comment'># =&gt; nil</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2134-L2136'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2134' data-end='2136'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2134</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_write_headers?'>write_headers?</span>
  <span class='ivar'>@writer_options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_write_headers'>write_headers</span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="<<-instance_method">
  <h3 class='signature  first'>
    #<strong>&lt;&lt;</strong>(row)  &#x21d2; <code>self</code>     <span class='aliases'>Also known as: <span class='names'>#add_row, #puts</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Appends a row to <code>self</code>.</p>
<ul><li>
<p>Argument <code>row</code> must be an Array object or a <a href="CSV/Row.html" title="CSV::Row (class)"><code>::CSV::Row</code></a> object.</p>
</li><li>
<p>The output stream must be open for writing.</p>
</li></ul>
<hr>

<p>Append Arrays:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="CSV.generate (method)">generate</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span>]
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>1</span>]
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>2</span>]
<span class='kw'>end</span> <span class='comment'># =&gt; &quot;foo,0\nbar,1\nbaz,2\n&quot;</span></code></pre>

<p>Append <code>CSV::Rows</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span> <span class='op'>=</span> []
<span class='const'>CSV</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="CSV.generate (method)">generate</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='const'>CSV</span><span class='op'>::</span><span class='const'><a href="CSV/Row.html" title="CSV::Row (class)">Row</a></span>.<span class='id identifier rubyid_new'><a href="CSV/Row.html#new-class_method" title="CSV::Row.new (method)">new</a></span>(<span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span><span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span>])
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='const'>CSV</span><span class='op'>::</span><span class='const'><a href="CSV/Row.html" title="CSV::Row (class)">Row</a></span>.<span class='id identifier rubyid_new'><a href="CSV/Row.html#new-class_method" title="CSV::Row.new (method)">new</a></span>(<span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span><span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>1</span>])
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='const'>CSV</span><span class='op'>::</span><span class='const'><a href="CSV/Row.html" title="CSV::Row (class)">Row</a></span>.<span class='id identifier rubyid_new'><a href="CSV/Row.html#new-class_method" title="CSV::Row.new (method)">new</a></span>(<span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span><span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>2</span>])
<span class='kw'>end</span> <span class='comment'># =&gt; &quot;foo,0\nbar,1\nbaz,2\n&quot;</span></code></pre>

<p>Headers in <a href="CSV/Row.html" title="CSV::Row (class)"><code>::CSV::Row</code></a> objects are not appended:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span> <span class='op'>=</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Name</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Count</span><span class='tstring_end'>&#39;</span></span>]
<span class='const'>CSV</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="CSV.generate (method)">generate</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='const'>CSV</span><span class='op'>::</span><span class='const'><a href="CSV/Row.html" title="CSV::Row (class)">Row</a></span>.<span class='id identifier rubyid_new'><a href="CSV/Row.html#new-class_method" title="CSV::Row.new (method)">new</a></span>(<span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span><span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span>])
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='const'>CSV</span><span class='op'>::</span><span class='const'><a href="CSV/Row.html" title="CSV::Row (class)">Row</a></span>.<span class='id identifier rubyid_new'><a href="CSV/Row.html#new-class_method" title="CSV::Row.new (method)">new</a></span>(<span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span><span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>1</span>])
  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='const'>CSV</span><span class='op'>::</span><span class='const'><a href="CSV/Row.html" title="CSV::Row (class)">Row</a></span>.<span class='id identifier rubyid_new'><a href="CSV/Row.html#new-class_method" title="CSV::Row.new (method)">new</a></span>(<span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span><span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>2</span>])
<span class='kw'>end</span> <span class='comment'># =&gt; &quot;foo,0\nbar,1\nbaz,2\n&quot;</span></code></pre>
<hr>

<p>Raises an exception if <code>row</code> is not an Array or CSV::Row:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="CSV.generate (method)">generate</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
  <span class='comment'># Raises NoMethodError (undefined method `collect&#39; for :foo:Symbol)
</span>  <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_foo'>foo</span>
<span class='kw'>end</span></code></pre>

<p>Raises an exception if the output stream is not opened for writing:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)
<span class='const'>File</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
  <span class='const'>CSV</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_file'>file</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
    <span class='comment'># Raises IOError (not opened for writing)
</span>    <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span>]
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2372-L2375'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2372' data-end='2375'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2372</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='op'>&lt;&lt;</span>(<span class='id identifier rubyid_row'>row</span>)
  <span class='id identifier rubyid_writer'><a href="#writer-instance_method" title="CSV#writer (method)">writer</a></span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_row'>row</span>
  <span class='kw'>self</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="add_row-instance_method">
  <h3 class='signature '>
    #<strong>add_row</strong>(row)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#<<-instance_method" title="CSV#&lt;&lt; (method)">#&lt;&lt;</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2376-L2376'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2376' data-end='2376'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2376</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_alias_method'>alias_method</span> <span class='symbeg'>:</span><span class='id identifier rubyid_add_row'>add_row</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='op'>&lt;&lt;</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="build_fields_converter-instance_method">
  <h3 class='signature priv'>
    #<strong>build_fields_converter</strong>(initial_converters, options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2822-L2828'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2822' data-end='2828'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2822</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build_fields_converter'>build_fields_converter</span>(<span class='id identifier rubyid_initial_converters'>initial_converters</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>)
  <span class='id identifier rubyid_fields_converter'>fields_converter</span> <span class='op'>=</span> <span class='const'><a href="CSV/FieldsConverter.html" title="CSV::FieldsConverter (class)">FieldsConverter</a></span>.<span class='id identifier rubyid_new'><a href="CSV/FieldsConverter.html#new-class_method" title="CSV::FieldsConverter.new (method)">new</a></span>(<span class='id identifier rubyid_options'>options</span>)
  <span class='id identifier rubyid_normalize_converters'><a href="#normalize_converters-instance_method" title="CSV#normalize_converters (method)">normalize_converters</a></span>(<span class='id identifier rubyid_initial_converters'>initial_converters</span>).<span class='id identifier rubyid_each'><a href="#each-instance_method" title="CSV#each (method)">each</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_converter'>converter</span><span class='op'>|</span>
    <span class='id identifier rubyid_fields_converter'>fields_converter</span>.<span class='id identifier rubyid_add_converter'>add_converter</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_converter'>converter</span>)
  <span class='kw'>end</span>
  <span class='id identifier rubyid_fields_converter'>fields_converter</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="build_header_fields_converter-instance_method">
  <h3 class='signature priv'>
    #<strong>build_header_fields_converter</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2804-L2811'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2804' data-end='2811'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2804</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build_header_fields_converter'>build_header_fields_converter</span>
  <span class='id identifier rubyid_specific_options'>specific_options</span> <span class='op'>=</span> {
    <span class='label'>builtin_converters_name:</span> <span class='symbeg'>:</span><span class='const'><a href="#HeaderConverters-constant" title="CSV::HeaderConverters (constant)">HeaderConverters</a></span><span class='comma'>,</span>
    <span class='label'>accept_nil:</span> <span class='kw'>true</span><span class='comma'>,</span>
  }
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='ivar'>@base_fields_converter_options</span>.<span class='id identifier rubyid_merge'>merge</span>(<span class='id identifier rubyid_specific_options'>specific_options</span>)
  <span class='id identifier rubyid_build_fields_converter'><a href="#build_fields_converter-instance_method" title="CSV#build_fields_converter (method)">build_fields_converter</a></span>(<span class='ivar'>@initial_header_converters</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="build_parser_fields_converter-instance_method">
  <h3 class='signature priv'>
    #<strong>build_parser_fields_converter</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2792-L2798'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2792' data-end='2798'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2792</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build_parser_fields_converter'>build_parser_fields_converter</span>
  <span class='id identifier rubyid_specific_options'>specific_options</span> <span class='op'>=</span> {
    <span class='label'>builtin_converters_name:</span> <span class='symbeg'>:</span><span class='const'><a href="#Converters-constant" title="CSV::Converters (constant)">Converters</a></span><span class='comma'>,</span>
  }
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='ivar'>@base_fields_converter_options</span>.<span class='id identifier rubyid_merge'>merge</span>(<span class='id identifier rubyid_specific_options'>specific_options</span>)
  <span class='id identifier rubyid_build_fields_converter'><a href="#build_fields_converter-instance_method" title="CSV#build_fields_converter (method)">build_fields_converter</a></span>(<span class='ivar'>@initial_converters</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="build_writer_fields_converter-instance_method">
  <h3 class='signature priv'>
    #<strong>build_writer_fields_converter</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2817-L2820'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2817' data-end='2820'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2817</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build_writer_fields_converter'>build_writer_fields_converter</span>
  <span class='id identifier rubyid_build_fields_converter'><a href="#build_fields_converter-instance_method" title="CSV#build_fields_converter (method)">build_fields_converter</a></span>(<span class='ivar'>@initial_write_converters</span><span class='comma'>,</span>
                         <span class='ivar'>@write_fields_converter_options</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="col_sep-instance_method">
  <h3 class='signature '>
    #<strong>col_sep</strong>  &#x21d2; <a href="String.html" title="String (class)">String</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the encoded column separator; used for parsing and writing; see <a href='#label-Option+col_sep'>Option <code>col_sep</code></a>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_col_sep'>col_sep</span> <span class='comment'># =&gt; &quot;,&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2009-L2011'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2009' data-end='2011'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2009</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_col_sep'>col_sep</span>
  <span class='id identifier rubyid_parser'><a href="#parser-instance_method" title="CSV#parser (method)">parser</a></span>.<span class='id identifier rubyid_column_separator'>column_separator</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="convert-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>convert</strong>(converter_name)  &#x21d2; <code>array_of_procs</code> </span>
      <span class='overload'>#<strong>convert</strong> {|field, field_info| ... } &#x21d2; <code>array_of_procs</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <ul><li>
<p>With no block, installs a field converter (a Proc).</p>
</li><li>
<p>With a block, defines and installs a custom field converter.</p>
</li><li>
<p>Returns the Array of installed field converters.</p>
</li><li>
<p>Argument <code>converter_name</code>, if given, should be the name of an existing field converter.</p>
</li></ul>

<p>See <a href='#label-Field+Converters'>Field Converters</a>.</p>
<hr>

<p>With no block, installs a field converter:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_convert'>convert</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_integer'>integer</span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_convert'>convert</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_float'>float</span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_convert'>convert</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_date'>date</span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_converters'><a href="#converters-instance_method" title="CSV#converters (method)">converters</a></span> <span class='comment'># =&gt; [:integer, :float, :date]</span></code></pre>
<hr>

<p>The block, if given, is called for each field:</p>
<ul><li>
<p>Argument <code>field</code> is the field value.</p>
</li><li>
<p>Argument <code>field_info</code> is a <a href="CSV/FieldInfo.html" title="CSV::FieldInfo (class)"><code>::CSV::FieldInfo</code></a> object containing details about the field.</p>
</li></ul>

<p>The examples here assume the prior execution of:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>)</code></pre>

<p>Example giving a block:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_convert'>convert</span> {<span class='op'>|</span><span class='id identifier rubyid_field'>field</span><span class='comma'>,</span> <span class='id identifier rubyid_field_info'>field_info</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> [<span class='id identifier rubyid_field'>field</span><span class='comma'>,</span> <span class='id identifier rubyid_field_info'>field_info</span>]<span class='semicolon'>;</span> <span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_upcase'>upcase</span> }
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="CSV.read (method)">read</a></span> <span class='comment'># =&gt; [[&quot;FOO&quot;, &quot;0&quot;], [&quot;BAR&quot;, &quot;1&quot;], [&quot;BAZ&quot;, &quot;2&quot;]]</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby">[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='comment'>#&lt;struct CSV::FieldInfo index=0, line=1, header=nil&gt;]
</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='comment'>#&lt;struct CSV::FieldInfo index=1, line=1, header=nil&gt;]
</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='comment'>#&lt;struct CSV::FieldInfo index=0, line=2, header=nil&gt;]
</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='comment'>#&lt;struct CSV::FieldInfo index=1, line=2, header=nil&gt;]
</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='comment'>#&lt;struct CSV::FieldInfo index=0, line=3, header=nil&gt;]
</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>2</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='comment'>#&lt;struct CSV::FieldInfo index=1, line=3, header=nil&gt;]</span></code></pre>

<p>The block need not return a String object:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_convert'>convert</span> {<span class='op'>|</span><span class='id identifier rubyid_field'>field</span><span class='comma'>,</span> <span class='id identifier rubyid_field_info'>field_info</span><span class='op'>|</span> <span class='id identifier rubyid_field'>field</span>.<span class='id identifier rubyid_to_sym'>to_sym</span> }
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="CSV.read (method)">read</a></span> <span class='comment'># =&gt; [[:foo, :&quot;0&quot;], [:bar, :&quot;1&quot;], [:baz, :&quot;2&quot;]]</span></code></pre>

<p>If <code>converter_name</code> is given, the block is not called:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_convert'>convert</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_integer'>integer</span>) {<span class='op'>|</span><span class='id identifier rubyid_field'>field</span><span class='comma'>,</span> <span class='id identifier rubyid_field_info'>field_info</span><span class='op'>|</span> <span class='id identifier rubyid_fail'>fail</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Cannot happen</span><span class='tstring_end'>&#39;</span></span> }
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="CSV.read (method)">read</a></span> <span class='comment'># =&gt; [[&quot;foo&quot;, 0], [&quot;bar&quot;, 1], [&quot;baz&quot;, 2]]</span></code></pre>
<hr>

<p>Raises a parse-time exception if <code>converter_name</code> is not the name of a built-in field converter:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_convert'>convert</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_nosuch'>nosuch</span>) <span class='op'>=&gt;</span> [<span class='kw'>nil</span>]
<span class='comment'># Raises NoMethodError (undefined method `arity&#39; for nil:NilClass)
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="CSV.read (method)">read</a></span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2443-L2445'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2443' data-end='2445'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2443</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_convert'>convert</span>(<span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_converter'>converter</span>)
  <span class='id identifier rubyid_parser_fields_converter'><a href="#parser_fields_converter-instance_method" title="CSV#parser_fields_converter (method)">parser_fields_converter</a></span>.<span class='id identifier rubyid_add_converter'>add_converter</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_converter'>converter</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="convert_fields-instance_method">
  <h3 class='signature priv'>
    #<strong>convert_fields</strong>(fields, headers = false)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Processes <code>fields</code> with <code>@converters</code>, or <code>@header_converters</code> if <a href="#headers-instance_method" title="CSV#headers (method)">#headers</a> is passed as <code>true</code>, returning the converted field set. Any converter that changes the field into something other than a <a href="String.html" title="String (class)"><code>::String</code></a> halts the pipeline of conversion for that field. This is primarily an efficiency shortcut.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2767-L2773'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2767' data-end='2773'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2767</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_convert_fields'>convert_fields</span>(<span class='id identifier rubyid_fields'>fields</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span> <span class='op'>=</span> <span class='kw'>false</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span>
    <span class='id identifier rubyid_header_fields_converter'><a href="#header_fields_converter-instance_method" title="CSV#header_fields_converter (method)">header_fields_converter</a></span>.<span class='id identifier rubyid_convert'><a href="#convert-instance_method" title="CSV#convert (method)">convert</a></span>(<span class='id identifier rubyid_fields'>fields</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='int'>0</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_parser_fields_converter'><a href="#parser_fields_converter-instance_method" title="CSV#parser_fields_converter (method)">parser_fields_converter</a></span>.<span class='id identifier rubyid_convert'><a href="#convert-instance_method" title="CSV#convert (method)">convert</a></span>(<span class='id identifier rubyid_fields'>fields</span><span class='comma'>,</span> <span class='ivar'>@headers</span><span class='comma'>,</span> <span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="CSV#lineno (method)">lineno</a></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="converters-instance_method">
  <h3 class='signature '>
    #<strong>converters</strong>  &#x21d2; <a href="Array.html" title="Array (class)">Array</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an Array containing field converters; see <a href='#label-Field+Converters'>Field Converters</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_converters'>converters</span> <span class='comment'># =&gt; []
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_convert'><a href="#convert-instance_method" title="CSV#convert (method)">convert</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_integer'>integer</span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_converters'>converters</span> <span class='comment'># =&gt; [:integer]
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_convert'><a href="#convert-instance_method" title="CSV#convert (method)">convert</a></span>(<span class='id identifier rubyid_proc'>proc</span> {<span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span>.<span class='id identifier rubyid_to_s'>to_s</span> })
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_converters'>converters</span></code></pre>

<p>Notes that you need to call <tt>Ractor.make_shareable(CSV::Converters)</tt> on the main Ractor to use this method.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2082-L2087'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2082' data-end='2087'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2082</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_converters'>converters</span>
  <span class='id identifier rubyid_parser_fields_converter'><a href="#parser_fields_converter-instance_method" title="CSV#parser_fields_converter (method)">parser_fields_converter</a></span>.<span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_converter'>converter</span><span class='op'>|</span>
    <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='const'><a href="#Converters-constant" title="CSV::Converters (constant)">Converters</a></span>.<span class='id identifier rubyid_rassoc'>rassoc</span>(<span class='id identifier rubyid_converter'>converter</span>)
    <span class='id identifier rubyid_name'>name</span> <span class='op'>?</span> <span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_first'>first</span> <span class='op'>:</span> <span class='id identifier rubyid_converter'>converter</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="determine_encoding-instance_method">
  <h3 class='signature priv'>
    #<strong>determine_encoding</strong>(encoding, internal_encoding)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2730-L2743'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2730' data-end='2743'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2730</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_determine_encoding'>determine_encoding</span>(<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span><span class='comma'>,</span> <span class='id identifier rubyid_internal_encoding'>internal_encoding</span>)
  <span class='comment'># honor the IO encoding if we can, otherwise default to ASCII-8BIT
</span>  <span class='id identifier rubyid_io_encoding'>io_encoding</span> <span class='op'>=</span> <span class='id identifier rubyid_raw_encoding'><a href="#raw_encoding-instance_method" title="CSV#raw_encoding (method)">raw_encoding</a></span>
  <span class='kw'>return</span> <span class='id identifier rubyid_io_encoding'>io_encoding</span> <span class='kw'>if</span> <span class='id identifier rubyid_io_encoding'>io_encoding</span>

  <span class='kw'>return</span> <span class='const'>Encoding</span>.<span class='id identifier rubyid_find'>find</span>(<span class='id identifier rubyid_internal_encoding'>internal_encoding</span>) <span class='kw'>if</span> <span class='id identifier rubyid_internal_encoding'>internal_encoding</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span>
    <span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span><span class='comma'>,</span> <span class='op'>=</span> <span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span>.<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>2</span>) <span class='kw'>if</span> <span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="String.html" title="String (class)">String</a></span>)
    <span class='kw'>return</span> <span class='const'>Encoding</span>.<span class='id identifier rubyid_find'>find</span>(<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span>)
  <span class='kw'>end</span>

  <span class='const'>Encoding</span>.<span class='id identifier rubyid_default_internal'>default_internal</span> <span class='op'>||</span> <span class='const'>Encoding</span>.<span class='id identifier rubyid_default_external'>default_external</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="each-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>each</strong>  &#x21d2; <code>Enumerator</code> </span>
      <span class='overload'>#<strong>each</strong> {|row| ... } </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Calls the block with each successive row. The data source must be opened for reading.</p>

<p>Without headers:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_string'>string</span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_row'>row</span>
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby">[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0</span><span class='tstring_end'>&quot;</span></span>]
[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span>]
[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>2</span><span class='tstring_end'>&quot;</span></span>]</code></pre>

<p>With headers:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Name,Value\nfoo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_row'>row</span>
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code xml"><code class="xml">&lt;CSV::Row &quot;Name&quot;:&quot;foo&quot; &quot;Value&quot;:&quot;0&quot;&gt;
&lt;CSV::Row &quot;Name&quot;:&quot;bar&quot; &quot;Value&quot;:&quot;1&quot;&gt;
&lt;CSV::Row &quot;Name&quot;:&quot;baz&quot; &quot;Value&quot;:&quot;2&quot;&gt;
</code></pre>
<hr>

<p>Raises an exception if the source is not opened for reading:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_string'>string</span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_close'>close</span>
<span class='comment'># Raises IOError (not opened for reading)
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_row'>row</span>
<span class='kw'>end</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2554-L2562'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2554' data-end='2562'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2554</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_each'>each</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>return</span> <span class='id identifier rubyid_to_enum'>to_enum</span>(<span class='id identifier rubyid___method__'>__method__</span>) <span class='kw'>unless</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='kw'>begin</span>
    <span class='kw'>while</span> <span class='kw'>true</span>
      <span class='kw'>yield</span>(<span class='id identifier rubyid_parser_enumerator'><a href="#parser_enumerator-instance_method" title="CSV#parser_enumerator (method)">parser_enumerator</a></span>.<span class='id identifier rubyid_next'>next</span>)
    <span class='kw'>end</span>
  <span class='kw'>rescue</span> <span class='const'>StopIteration</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="eof?-instance_method">
  <h3 class='signature ro'>
    #<strong>eof?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
    <span class='aliases'>Also known as: <span class='names'>#eof</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2297-L2308'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2297' data-end='2308'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2297</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_eof?'>eof?</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='ivar'>@eof_error</span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_parser_enumerator'><a href="#parser_enumerator-instance_method" title="CSV#parser_enumerator (method)">parser_enumerator</a></span>.<span class='id identifier rubyid_peek'>peek</span>
    <span class='kw'>false</span>
  <span class='kw'>rescue</span> <span class='const'><a href="CSV/MalformedCSVError.html" title="CSV::MalformedCSVError (class)">MalformedCSVError</a></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_error'>error</span>
    <span class='ivar'>@eof_error</span> <span class='op'>=</span> <span class='id identifier rubyid_error'>error</span>
    <span class='kw'>false</span>
  <span class='kw'>rescue</span> <span class='const'>StopIteration</span>
    <span class='kw'>true</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="field_size_limit-instance_method">
  <h3 class='signature '>
    #<strong>field_size_limit</strong>  &#x21d2; <code>Integer</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the limit for field size; used for parsing; see <a href='#label-Option+field_size_limit'>Option <code>field_size_limit</code></a>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_field_size_limit'>field_size_limit</span> <span class='comment'># =&gt; nil</span></code></pre>

<p>Deprecated since 3.2.3. Use <a href="#max_field_size-instance_method" title="CSV#max_field_size (method)">#max_field_size</a> instead.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2041-L2043'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2041' data-end='2043'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2041</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_field_size_limit'>field_size_limit</span>
  <span class='id identifier rubyid_parser'><a href="#parser-instance_method" title="CSV#parser (method)">parser</a></span>.<span class='id identifier rubyid_field_size_limit'>field_size_limit</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="flock-instance_method">
  <h3 class='signature '>
    #<strong>flock</strong>(*args)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>NotImplementedError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2269-L2272'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2269' data-end='2272'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2269</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_flock'>flock</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span> <span class='kw'>unless</span> <span class='ivar'>@io</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_flock'>flock</span>)
  <span class='ivar'>@io</span>.<span class='id identifier rubyid_flock'>flock</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="gets-instance_method">
  <h3 class='signature '>
    #<strong>gets</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#shift-instance_method" title="CSV#shift (method)">#shift</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2679-L2679'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2679' data-end='2679'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2679</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_alias_method'>alias_method</span> <span class='symbeg'>:</span><span class='id identifier rubyid_gets'>gets</span><span class='comma'>,</span>     <span class='symbeg'>:</span><span class='id identifier rubyid_shift'><a href="#shift-instance_method" title="CSV#shift (method)">shift</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="header_convert-instance_method">
  <h3 class='signature '>
    #<strong>header_convert</strong>(name = nil, &amp;converter)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The block need not return a String object:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_header_convert'>header_convert</span> {<span class='op'>|</span><span class='id identifier rubyid_header'>header</span><span class='comma'>,</span> <span class='id identifier rubyid_field_info'>field_info</span><span class='op'>|</span> <span class='id identifier rubyid_header'>header</span>.<span class='id identifier rubyid_to_sym'>to_sym</span> }
<span class='id identifier rubyid_table'><a href="#table-class_method" title="CSV.table (method)">table</a></span> <span class='op'>=</span> <span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="CSV.read (method)">read</a></span>
<span class='id identifier rubyid_table'><a href="#table-class_method" title="CSV.table (method)">table</a></span>.<span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span> <span class='comment'># =&gt; [:Name, :Value]</span></code></pre>

<p>If <code>converter_name</code> is given, the block is not called:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_header_convert'>header_convert</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_downcase'>downcase</span>) {<span class='op'>|</span><span class='id identifier rubyid_header'>header</span><span class='comma'>,</span> <span class='id identifier rubyid_field_info'>field_info</span><span class='op'>|</span> <span class='id identifier rubyid_fail'>fail</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Cannot happen</span><span class='tstring_end'>&#39;</span></span> }
<span class='id identifier rubyid_table'><a href="#table-class_method" title="CSV.table (method)">table</a></span> <span class='op'>=</span> <span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="CSV.read (method)">read</a></span>
<span class='id identifier rubyid_table'><a href="#table-class_method" title="CSV.table (method)">table</a></span>.<span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span> <span class='comment'># =&gt; [&quot;name&quot;, &quot;value&quot;]</span></code></pre>
<hr>

<p>Raises a parse-time exception if <code>converter_name</code> is not the name of a built-in field converter:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_header_convert'>header_convert</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_nosuch'>nosuch</span>)
<span class='comment'># Raises NoMethodError (undefined method `arity&#39; for nil:NilClass)
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="CSV.read (method)">read</a></span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2509-L2511'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2509' data-end='2511'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2509</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_header_convert'>header_convert</span>(<span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_converter'>converter</span>)
  <span class='id identifier rubyid_header_fields_converter'><a href="#header_fields_converter-instance_method" title="CSV#header_fields_converter (method)">header_fields_converter</a></span>.<span class='id identifier rubyid_add_converter'>add_converter</span>(<span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_converter'>converter</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="header_converters-instance_method">
  <h3 class='signature '>
    #<strong>header_converters</strong>  &#x21d2; <a href="Array.html" title="Array (class)">Array</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an Array containing header converters; used for parsing; see <a href='#label-Header+Converters'>Header Converters</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_header_converters'>header_converters</span> <span class='comment'># =&gt; []</span></code></pre>

<p>Notes that you need to call <tt>Ractor.make_shareable(CSV::HeaderConverters)</tt> on the main Ractor to use this method.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2148-L2153'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2148' data-end='2153'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2148</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_header_converters'>header_converters</span>
  <span class='id identifier rubyid_header_fields_converter'><a href="#header_fields_converter-instance_method" title="CSV#header_fields_converter (method)">header_fields_converter</a></span>.<span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_converter'>converter</span><span class='op'>|</span>
    <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='const'><a href="#HeaderConverters-constant" title="CSV::HeaderConverters (constant)">HeaderConverters</a></span>.<span class='id identifier rubyid_rassoc'>rassoc</span>(<span class='id identifier rubyid_converter'>converter</span>)
    <span class='id identifier rubyid_name'>name</span> <span class='op'>?</span> <span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_first'>first</span> <span class='op'>:</span> <span class='id identifier rubyid_converter'>converter</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="header_fields_converter-instance_method">
  <h3 class='signature priv'>
    #<strong>header_fields_converter</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2800-L2802'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2800' data-end='2802'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2800</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_header_fields_converter'>header_fields_converter</span>
  <span class='ivar'>@header_fields_converter</span> <span class='op'>||=</span> <span class='id identifier rubyid_build_header_fields_converter'><a href="#build_header_fields_converter-instance_method" title="CSV#build_header_fields_converter (method)">build_header_fields_converter</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="headers-instance_method">
  <h3 class='signature '>
    #<strong>headers</strong>  &#x21d2; <code>Object</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the value that determines whether headers are used; used for parsing; see <a href='#label-Option+headers'>Option <code>headers</code></a>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_headers'>headers</span> <span class='comment'># =&gt; nil</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2106-L2116'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2106' data-end='2116'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2106</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_headers'>headers</span>
  <span class='kw'>if</span> <span class='ivar'>@writer</span>
    <span class='ivar'>@writer</span>.<span class='id identifier rubyid_headers'>headers</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_parsed_headers'>parsed_headers</span> <span class='op'>=</span> <span class='id identifier rubyid_parser'><a href="#parser-instance_method" title="CSV#parser (method)">parser</a></span>.<span class='id identifier rubyid_headers'>headers</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_parsed_headers'>parsed_headers</span> <span class='kw'>if</span> <span class='id identifier rubyid_parsed_headers'>parsed_headers</span>
    <span class='id identifier rubyid_raw_headers'>raw_headers</span> <span class='op'>=</span> <span class='ivar'>@parser_options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_headers'>headers</span>]
    <span class='id identifier rubyid_raw_headers'>raw_headers</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_raw_headers'>raw_headers</span> <span class='op'>==</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_raw_headers'>raw_headers</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inspect-instance_method">
  <h3 class='signature '>
    #<strong>inspect</strong>  &#x21d2; <a href="String.html" title="String (class)">String</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a String showing certain properties of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Name,Value\nfoo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span>)
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_inspect'>inspect</span>
<span class='id identifier rubyid_s'>s</span> <span class='comment'># =&gt; &quot;#&lt;CSV io_type:StringIO encoding:UTF-8 lineno:0 col_sep:\&quot;,\&quot; row_sep:\&quot;\\n\&quot; quote_char:\&quot;\\\&quot;\&quot; headers:true&gt;&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2690-L2726'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2690' data-end='2726'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2690</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_inspect'>inspect</span>
  <span class='id identifier rubyid_str'>str</span> <span class='op'>=</span> [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#&lt;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>self</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> io_type:</span><span class='tstring_end'>&quot;</span></span>]
  <span class='comment'># show type of wrapped IO
</span>  <span class='kw'>if</span>    <span class='ivar'>@io</span> <span class='op'>==</span> <span class='gvar'>$stdout</span> <span class='kw'>then</span> <span class='id identifier rubyid_str'>str</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$stdout</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>elsif</span> <span class='ivar'>@io</span> <span class='op'>==</span> <span class='gvar'>$stdin</span>  <span class='kw'>then</span> <span class='id identifier rubyid_str'>str</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$stdin</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>elsif</span> <span class='ivar'>@io</span> <span class='op'>==</span> <span class='gvar'>$stderr</span> <span class='kw'>then</span> <span class='id identifier rubyid_str'>str</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$stderr</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>                      <span class='id identifier rubyid_str'>str</span> <span class='op'>&lt;&lt;</span> <span class='ivar'>@io</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='kw'>end</span>
  <span class='comment'># show IO.path(), if available
</span>  <span class='kw'>if</span> <span class='ivar'>@io</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>) <span class='kw'>and</span> (<span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='ivar'>@io</span>.<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>)
    <span class='id identifier rubyid_str'>str</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> io_path:</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_p'>p</span>.<span class='id identifier rubyid_inspect'>inspect</span>
  <span class='kw'>end</span>
  <span class='comment'># show encoding
</span>  <span class='id identifier rubyid_str'>str</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> encoding:</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span> <span class='ivar'>@encoding</span>.<span class='id identifier rubyid_name'>name</span>
  <span class='comment'># show other attributes
</span>  [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>lineno</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>col_sep</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>row_sep</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>quote_char</span><span class='tstring_end'>&quot;</span></span>].<span class='id identifier rubyid_each'><a href="#each-instance_method" title="CSV#each (method)">each</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_attr_name'>attr_name</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='id identifier rubyid___send__'>__send__</span>(<span class='id identifier rubyid_attr_name'>attr_name</span>)
      <span class='id identifier rubyid_str'>str</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_attr_name'>attr_name</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_a'>a</span>.<span class='id identifier rubyid_inspect'>inspect</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>skip_blanks</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>liberal_parsing</span><span class='tstring_end'>&quot;</span></span>].<span class='id identifier rubyid_each'><a href="#each-instance_method" title="CSV#each (method)">each</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_attr_name'>attr_name</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='id identifier rubyid___send__'>__send__</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_attr_name'>attr_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>?</span><span class='tstring_end'>&quot;</span></span>)
      <span class='id identifier rubyid_str'>str</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_attr_name'>attr_name</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_a'>a</span>.<span class='id identifier rubyid_inspect'>inspect</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid__headers'>_headers</span> <span class='op'>=</span> <span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span>
  <span class='id identifier rubyid_str'>str</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> headers:</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid__headers'>_headers</span>.<span class='id identifier rubyid_inspect'>inspect</span> <span class='kw'>if</span> <span class='id identifier rubyid__headers'>_headers</span>
  <span class='id identifier rubyid_str'>str</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_str'>str</span>.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)
  <span class='kw'>rescue</span>  <span class='comment'># any encoding error
</span>    <span class='id identifier rubyid_str'>str</span>.<span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
      <span class='id identifier rubyid_e'>e</span> <span class='op'>=</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>Converter</span>.<span class='id identifier rubyid_asciicompat_encoding'>asciicompat_encoding</span>(<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span>)
      <span class='id identifier rubyid_e'>e</span> <span class='op'>?</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_encode'>encode</span>(<span class='id identifier rubyid_e'>e</span>) <span class='op'>:</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_force_encoding'>force_encoding</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ASCII-8BIT</span><span class='tstring_end'>&quot;</span></span>)
    <span class='kw'>end</span>.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ioctl-instance_method">
  <h3 class='signature '>
    #<strong>ioctl</strong>(*args)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>NotImplementedError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2274-L2277'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2274' data-end='2277'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2274</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ioctl'>ioctl</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span> <span class='kw'>unless</span> <span class='ivar'>@io</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_ioctl'>ioctl</span>)
  <span class='ivar'>@io</span>.<span class='id identifier rubyid_ioctl'>ioctl</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="line-instance_method">
  <h3 class='signature '>
    #<strong>line</strong>  &#x21d2; <a href="Array.html" title="Array (class)">Array</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the line most recently read:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>)
<span class='const'>CSV</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
  <span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_each'><a href="#each-instance_method" title="CSV#each (method)">each</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
    <span class='id identifier rubyid_p'>p</span> [<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="CSV#lineno (method)">lineno</a></span><span class='comma'>,</span> <span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_line'>line</span>]
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby">[<span class='int'>1</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\n</span><span class='tstring_end'>&quot;</span></span>]
[<span class='int'>2</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar,1\n</span><span class='tstring_end'>&quot;</span></span>]
[<span class='int'>3</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>baz,2\n</span><span class='tstring_end'>&quot;</span></span>]</code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2247-L2249'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2247' data-end='2249'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2247</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_line'>line</span>
  <span class='id identifier rubyid_parser'><a href="#parser-instance_method" title="CSV#parser (method)">parser</a></span>.<span class='id identifier rubyid_line'>line</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="lineno-instance_method">
  <h3 class='signature '>
    #<strong>line_no</strong>  &#x21d2; <code>Integer</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the count of the rows parsed or generated.</p>

<p>Parsing:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>)
<span class='const'>CSV</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
  <span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_each'><a href="#each-instance_method" title="CSV#each (method)">each</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
    <span class='id identifier rubyid_p'>p</span> [<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_lineno'>lineno</span><span class='comma'>,</span> <span class='id identifier rubyid_row'>row</span>]
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby">[<span class='int'>1</span><span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0</span><span class='tstring_end'>&quot;</span></span>]]
[<span class='int'>2</span><span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span>]]
[<span class='int'>3</span><span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>2</span><span class='tstring_end'>&quot;</span></span>]]</code></pre>

<p>Generating:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_generate'><a href="#generate-class_method" title="CSV.generate (method)">generate</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_lineno'>lineno</span><span class='semicolon'>;</span> <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span>]
  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_lineno'>lineno</span><span class='semicolon'>;</span> <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>1</span>]
  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_lineno'>lineno</span><span class='semicolon'>;</span> <span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>2</span>]
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='int'>0</span>
<span class='int'>1</span>
<span class='int'>2</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2223-L2229'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2223' data-end='2229'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2223</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_lineno'>lineno</span>
  <span class='kw'>if</span> <span class='ivar'>@writer</span>
    <span class='ivar'>@writer</span>.<span class='id identifier rubyid_lineno'>lineno</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_parser'><a href="#parser-instance_method" title="CSV#parser (method)">parser</a></span>.<span class='id identifier rubyid_lineno'>lineno</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="max_field_size-instance_method">
  <h3 class='signature '>
    #<strong>max_field_size</strong>  &#x21d2; <code>Integer</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the limit for field size; used for parsing; see <a href='#label-Option+max_field_size'>Option <code>max_field_size</code></a>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_max_field_size'>max_field_size</span> <span class='comment'># =&gt; nil</span></code></pre>

<p>Since 3.2.3.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2053-L2055'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2053' data-end='2055'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2053</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_max_field_size'>max_field_size</span>
  <span class='id identifier rubyid_parser'><a href="#parser-instance_method" title="CSV#parser (method)">parser</a></span>.<span class='id identifier rubyid_max_field_size'>max_field_size</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="normalize_converters-instance_method">
  <h3 class='signature priv'>
    #<strong>normalize_converters</strong>(converters)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2745-L2758'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2745' data-end='2758'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2745</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_normalize_converters'>normalize_converters</span>(<span class='id identifier rubyid_converters'><a href="#converters-instance_method" title="CSV#converters (method)">converters</a></span>)
  <span class='id identifier rubyid_converters'><a href="#converters-instance_method" title="CSV#converters (method)">converters</a></span> <span class='op'>||=</span> []
  <span class='kw'>unless</span> <span class='id identifier rubyid_converters'><a href="#converters-instance_method" title="CSV#converters (method)">converters</a></span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'><a href="Array.html" title="Array (class)">Array</a></span>)
    <span class='id identifier rubyid_converters'><a href="#converters-instance_method" title="CSV#converters (method)">converters</a></span> <span class='op'>=</span> [<span class='id identifier rubyid_converters'><a href="#converters-instance_method" title="CSV#converters (method)">converters</a></span>]
  <span class='kw'>end</span>
  <span class='id identifier rubyid_converters'><a href="#converters-instance_method" title="CSV#converters (method)">converters</a></span>.<span class='id identifier rubyid_collect'>collect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_converter'>converter</span><span class='op'>|</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_converter'>converter</span>
    <span class='kw'>when</span> <span class='const'>Proc</span> <span class='comment'># custom code block
</span>      [<span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_converter'>converter</span>]
    <span class='kw'>else</span> <span class='comment'># by name
</span>      [<span class='id identifier rubyid_converter'>converter</span><span class='comma'>,</span> <span class='kw'>nil</span>]
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parser-instance_method">
  <h3 class='signature priv'>
    #<strong>parser</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2830-L2832'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2830' data-end='2832'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2830</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_parser'>parser</span>
  <span class='ivar'>@parser</span> <span class='op'>||=</span> <span class='const'><a href="CSV/Parser.html" title="CSV::Parser (class)">Parser</a></span>.<span class='id identifier rubyid_new'><a href="CSV/Parser.html#new-class_method" title="CSV::Parser.new (method)">new</a></span>(<span class='ivar'>@io</span><span class='comma'>,</span> <span class='id identifier rubyid_parser_options'><a href="#parser_options-instance_method" title="CSV#parser_options (method)">parser_options</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parser_enumerator-instance_method">
  <h3 class='signature priv'>
    #<strong>parser_enumerator</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2839-L2841'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2839' data-end='2841'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2839</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_parser_enumerator'>parser_enumerator</span>
  <span class='ivar'>@parser_enumerator</span> <span class='op'>||=</span> <span class='id identifier rubyid_parser'><a href="#parser-instance_method" title="CSV#parser (method)">parser</a></span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="CSV.parse (method)">parse</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parser_fields_converter-instance_method">
  <h3 class='signature priv'>
    #<strong>parser_fields_converter</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2788-L2790'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2788' data-end='2790'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2788</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_parser_fields_converter'>parser_fields_converter</span>
  <span class='ivar'>@parser_fields_converter</span> <span class='op'>||=</span> <span class='id identifier rubyid_build_parser_fields_converter'><a href="#build_parser_fields_converter-instance_method" title="CSV#build_parser_fields_converter (method)">build_parser_fields_converter</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parser_options-instance_method">
  <h3 class='signature priv'>
    #<strong>parser_options</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2834-L2837'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2834' data-end='2837'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2834</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_parser_options'>parser_options</span>
  <span class='ivar'>@parser_options</span>.<span class='id identifier rubyid_merge'>merge</span>(<span class='label'>header_fields_converter:</span> <span class='id identifier rubyid_header_fields_converter'><a href="#header_fields_converter-instance_method" title="CSV#header_fields_converter (method)">header_fields_converter</a></span><span class='comma'>,</span>
                        <span class='label'>fields_converter:</span> <span class='id identifier rubyid_parser_fields_converter'><a href="#parser_fields_converter-instance_method" title="CSV#parser_fields_converter (method)">parser_fields_converter</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="path-instance_method">
  <h3 class='signature '>
    #<strong>path</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2279-L2281'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2279' data-end='2281'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2279</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_path'>path</span>
  <span class='ivar'>@io</span>.<span class='id identifier rubyid_path'>path</span> <span class='kw'>if</span> <span class='ivar'>@io</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_path'>path</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="puts-instance_method">
  <h3 class='signature '>
    #<strong>puts</strong>(row)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#<<-instance_method" title="CSV#&lt;&lt; (method)">#&lt;&lt;</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2377-L2377'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2377' data-end='2377'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2377</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_alias_method'>alias_method</span> <span class='symbeg'>:</span><span class='id identifier rubyid_puts'>puts</span><span class='comma'>,</span>    <span class='symbeg'>:</span><span class='op'>&lt;&lt;</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="quote_char-instance_method">
  <h3 class='signature '>
    #<strong>quote_char</strong>  &#x21d2; <code>character</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the encoded quote character; used for parsing and writing; see <a href='#label-Option+quote_char'>Option <code>quote_char</code></a>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_quote_char'>quote_char</span> <span class='comment'># =&gt; &quot;\&quot;&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2029-L2031'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2029' data-end='2031'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2029</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_quote_char'>quote_char</span>
  <span class='id identifier rubyid_parser'><a href="#parser-instance_method" title="CSV#parser (method)">parser</a></span>.<span class='id identifier rubyid_quote_character'>quote_character</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="raw_encoding-instance_method">
  <h3 class='signature priv'>
    #<strong>raw_encoding</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the encoding of the internal IO object.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2778-L2786'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2778' data-end='2786'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2778</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_raw_encoding'>raw_encoding</span>
  <span class='kw'>if</span> <span class='ivar'>@io</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_internal_encoding'>internal_encoding</span>
    <span class='ivar'>@io</span>.<span class='id identifier rubyid_internal_encoding'>internal_encoding</span> <span class='op'>||</span> <span class='ivar'>@io</span>.<span class='id identifier rubyid_external_encoding'>external_encoding</span>
  <span class='kw'>elsif</span> <span class='ivar'>@io</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span>
    <span class='ivar'>@io</span>.<span class='id identifier rubyid_encoding'><a href="#encoding-instance_method" title="CSV#encoding (method)">encoding</a></span>
  <span class='kw'>else</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="read-instance_method">
  <h3 class='signature '>
    #<strong>read</strong>  &#x21d2; <a href="Array.html" title="Array (class)">Array</a>, <code>CSV</code>     <span class='aliases'>Also known as: <span class='names'>#readlines</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Forms the remaining rows from <code>self</code> into:</p>
<ul><li>
<p>A <a href="CSV/Table.html" title="CSV::Table (class)"><code>::CSV::Table</code></a> object, if headers are in use.</p>
</li><li>
<p>An Array of Arrays, otherwise.</p>
</li></ul>

<p>The data source must be opened for reading.</p>

<p>Without headers:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>)
<span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_read'>read</span> <span class='comment'># =&gt; [[&quot;foo&quot;, &quot;0&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span></code></pre>

<p>With headers:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Name,Value\nfoo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.csv</span><span class='tstring_end'>&#39;</span></span>
<span class='const'>File</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_string'>string</span>)
<span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_open'><a href="#open-class_method" title="CSV.open (method)">open</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="CSV#path (method)">path</a></span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_read'>read</span> <span class='comment'># =&gt; #&lt;CSV::Table mode:col_or_row row_count:4&gt;</span></code></pre>
<hr>

<p>Raises an exception if the source is not opened for reading:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_string'>string</span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_close'>close</span>
<span class='comment'># Raises IOError (not opened for reading)
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_read'>read</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2595-L2602'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2595' data-end='2602'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2595</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_read'>read</span>
  <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='id identifier rubyid_to_a'>to_a</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_parser'><a href="#parser-instance_method" title="CSV#parser (method)">parser</a></span>.<span class='id identifier rubyid_use_headers?'>use_headers?</span>
    <span class='const'><a href="CSV/Table.html" title="CSV::Table (class)">Table</a></span>.<span class='id identifier rubyid_new'><a href="CSV/Table.html#new-class_method" title="CSV::Table.new (method)">new</a></span>(<span class='id identifier rubyid_rows'>rows</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='id identifier rubyid_parser'><a href="#parser-instance_method" title="CSV#parser (method)">parser</a></span>.<span class='id identifier rubyid_headers'><a href="#headers-instance_method" title="CSV#headers (method)">headers</a></span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_rows'>rows</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="readline-instance_method">
  <h3 class='signature '>
    #<strong>readline</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#shift-instance_method" title="CSV#shift (method)">#shift</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2680-L2680'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2680' data-end='2680'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2680</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_alias_method'>alias_method</span> <span class='symbeg'>:</span><span class='id identifier rubyid_readline'>readline</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_shift'><a href="#shift-instance_method" title="CSV#shift (method)">shift</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="readlines-instance_method">
  <h3 class='signature '>
    #<strong>readlines</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#read-instance_method" title="CSV#read (method)">#read</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2603-L2603'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2603' data-end='2603'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2603</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_alias_method'>alias_method</span> <span class='symbeg'>:</span><span class='id identifier rubyid_readlines'>readlines</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_read'><a href="#read-class_method" title="CSV.read (method)">read</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="rewind-instance_method">
  <h3 class='signature '>
    #<strong>rewind</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Rewinds the underlying IO object and resets CSV’s lineno() counter.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2312-L2318'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2312' data-end='2318'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2312</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_rewind'>rewind</span>
  <span class='ivar'>@parser</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@parser_enumerator</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@eof_error</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@writer</span>.<span class='id identifier rubyid_rewind'>rewind</span> <span class='kw'>if</span> <span class='ivar'>@writer</span>
  <span class='ivar'>@io</span>.<span class='id identifier rubyid_rewind'>rewind</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="row_sep-instance_method">
  <h3 class='signature '>
    #<strong>row_sep</strong>  &#x21d2; <a href="String.html" title="String (class)">String</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the encoded row separator; used for parsing and writing; see <a href='#label-Option+row_sep'>Option <code>row_sep</code></a>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_row_sep'>row_sep</span> <span class='comment'># =&gt; &quot;\n&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2019-L2021'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2019' data-end='2021'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2019</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_row_sep'>row_sep</span>
  <span class='id identifier rubyid_parser'><a href="#parser-instance_method" title="CSV#parser (method)">parser</a></span>.<span class='id identifier rubyid_row_separator'>row_separator</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="shift-instance_method">
  <h3 class='signature '>
    #<strong>shift</strong>  &#x21d2; <a href="Array.html" title="Array (class)">Array</a>, ...     <span class='aliases'>Also known as: <span class='names'>#gets, #readline</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the next row of data as:</p>
<ul><li>
<p>An Array if no headers are used.</p>
</li><li>
<p>A <a href="CSV/Row.html" title="CSV::Row (class)"><code>::CSV::Row</code></a> object if headers are used.</p>
</li></ul>

<p>The data source must be opened for reading.</p>

<p>Without headers:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_string'>string</span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_shift'>shift</span> <span class='comment'># =&gt; [&quot;foo&quot;, &quot;0&quot;]
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_shift'>shift</span> <span class='comment'># =&gt; [&quot;bar&quot;, &quot;1&quot;]
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_shift'>shift</span> <span class='comment'># =&gt; [&quot;baz&quot;, &quot;2&quot;]
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_shift'>shift</span> <span class='comment'># =&gt; nil</span></code></pre>

<p>With headers:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Name,Value\nfoo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>true</span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_shift'>shift</span> <span class='comment'># =&gt; #&lt;CSV::Row &quot;Name&quot;:&quot;foo&quot; &quot;Value&quot;:&quot;0&quot;&gt;
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_shift'>shift</span> <span class='comment'># =&gt; #&lt;CSV::Row &quot;Name&quot;:&quot;bar&quot; &quot;Value&quot;:&quot;1&quot;&gt;
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_shift'>shift</span> <span class='comment'># =&gt; #&lt;CSV::Row &quot;Name&quot;:&quot;baz&quot; &quot;Value&quot;:&quot;2&quot;&gt;
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_shift'>shift</span> <span class='comment'># =&gt; nil</span></code></pre>
<hr>

<p>Raises an exception if the source is not opened for reading:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo,0\nbar,1\nbaz,2\n</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_csv'>csv</span> <span class='op'>=</span> <span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='id identifier rubyid_string'>string</span>)
<span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_close'>close</span>
<span class='comment'># Raises IOError (not opened for reading)
</span><span class='id identifier rubyid_csv'>csv</span>.<span class='id identifier rubyid_shift'>shift</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2668-L2678'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2668' data-end='2678'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2668</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_shift'>shift</span>
  <span class='kw'>if</span> <span class='ivar'>@eof_error</span>
    <span class='id identifier rubyid_eof_error'>eof_error</span><span class='comma'>,</span> <span class='ivar'>@eof_error</span> <span class='op'>=</span> <span class='ivar'>@eof_error</span><span class='comma'>,</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid_eof_error'>eof_error</span>
  <span class='kw'>end</span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_parser_enumerator'><a href="#parser_enumerator-instance_method" title="CSV#parser_enumerator (method)">parser_enumerator</a></span>.<span class='id identifier rubyid_next'>next</span>
  <span class='kw'>rescue</span> <span class='const'>StopIteration</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="skip_lines-instance_method">
  <h3 class='signature '>
    #<strong>skip_lines</strong>  &#x21d2; <code>Regexp</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the Regexp used to identify comment lines; used for parsing; see <a href='#label-Option+skip_lines'>Option <code>skip_lines</code></a>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>CSV</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="CSV.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_skip_lines'>skip_lines</span> <span class='comment'># =&gt; nil</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2063-L2065'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2063' data-end='2065'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2063</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_skip_lines'>skip_lines</span>
  <span class='id identifier rubyid_parser'><a href="#parser-instance_method" title="CSV#parser (method)">parser</a></span>.<span class='id identifier rubyid_skip_lines'>skip_lines</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="stat-instance_method">
  <h3 class='signature '>
    #<strong>stat</strong>(*args)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>NotImplementedError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2283-L2286'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2283' data-end='2286'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2283</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_stat'>stat</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span> <span class='kw'>unless</span> <span class='ivar'>@io</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_stat'>stat</span>)
  <span class='ivar'>@io</span>.<span class='id identifier rubyid_stat'>stat</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_i-instance_method">
  <h3 class='signature '>
    #<strong>to_i</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>NotImplementedError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2288-L2291'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2288' data-end='2291'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2288</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span> <span class='kw'>unless</span> <span class='ivar'>@io</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_to_i'>to_i</span>)
  <span class='ivar'>@io</span>.<span class='id identifier rubyid_to_i'>to_i</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_io-instance_method">
  <h3 class='signature '>
    #<strong>to_io</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2293-L2295'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2293' data-end='2295'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2293</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_to_io'>to_io</span>
  <span class='ivar'>@io</span>.<span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_to_io'>to_io</span>) <span class='op'>?</span> <span class='ivar'>@io</span>.<span class='id identifier rubyid_to_io'>to_io</span> <span class='op'>:</span> <span class='ivar'>@io</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="writer-instance_method">
  <h3 class='signature priv'>
    #<strong>writer</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2843-L2845'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2843' data-end='2845'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2843</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_writer'>writer</span>
  <span class='ivar'>@writer</span> <span class='op'>||=</span> <span class='const'><a href="CSV/Writer.html" title="CSV::Writer (class)">Writer</a></span>.<span class='id identifier rubyid_new'><a href="CSV/Writer.html#new-class_method" title="CSV::Writer.new (method)">new</a></span>(<span class='ivar'>@io</span><span class='comma'>,</span> <span class='id identifier rubyid_writer_options'><a href="#writer_options-instance_method" title="CSV#writer_options (method)">writer_options</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="writer_fields_converter-instance_method">
  <h3 class='signature priv'>
    #<strong>writer_fields_converter</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2813-L2815'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2813' data-end='2815'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2813</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_writer_fields_converter'>writer_fields_converter</span>
  <span class='ivar'>@writer_fields_converter</span> <span class='op'>||=</span> <span class='id identifier rubyid_build_writer_fields_converter'><a href="#build_writer_fields_converter-instance_method" title="CSV#build_writer_fields_converter (method)">build_writer_fields_converter</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="writer_options-instance_method">
  <h3 class='signature priv'>
    #<strong>writer_options</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_9/lib/csv.rb#L2847-L2850'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2847' data-end='2850'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/csv.rb', line 2847</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_writer_options'>writer_options</span>
  <span class='ivar'>@writer_options</span>.<span class='id identifier rubyid_merge'>merge</span>(<span class='label'>header_fields_converter:</span> <span class='id identifier rubyid_header_fields_converter'><a href="#header_fields_converter-instance_method" title="CSV#header_fields_converter (method)">header_fields_converter</a></span><span class='comma'>,</span>
                        <span class='label'>fields_converter:</span> <span class='id identifier rubyid_writer_fields_converter'><a href="#writer_fields_converter-instance_method" title="CSV#writer_fields_converter (method)">writer_fields_converter</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>