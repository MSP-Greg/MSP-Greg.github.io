<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: DEBUGGER__::UI_CDP &mdash; debug  Ruby-3.3.1 p55</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "DEBUGGER__::UI_CDP",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Ruby-3.3.1</a> &raquo; 
      <a href='../'>debug</a> &raquo; 
      <a href='../_index.html#alpha_U'>Index (U)</a> &raquo; 
        <a href="../DEBUGGER__.html" title="DEBUGGER__ (module)">DEBUGGER__</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>UI_CDP&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: DEBUGGER__::UI_CDP</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="UI_CDP/WebSocketUtils.html" title="DEBUGGER__::UI_CDP::WebSocketUtils (module)"><code>WebSocketUtils</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a href="UI_CDP/WebSocketClient.html" title="DEBUGGER__::UI_CDP::WebSocketClient (class)"><code>WebSocketClient</code></a>,
        <a href="UI_CDP/WebSocketServer.html" title="DEBUGGER__::UI_CDP::WebSocketServer (class)"><code>WebSocketServer</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Exceptions:</div>
      <div class='box_11'>
          <a href="UI_CDP/Detach.html" title="DEBUGGER__::UI_CDP::Detach (class)"><code>Detach</code></a>,
        <a href="UI_CDP/NotFoundChromeEndpointError.html" title="DEBUGGER__::UI_CDP::NotFoundChromeEndpointError (class)"><code>NotFoundChromeEndpointError</code></a>,
        <a href="UI_CDP/UnsupportedError.html" title="DEBUGGER__::UI_CDP::UnsupportedError (class)"><code>UnsupportedError</code></a>      </div>
    </td></tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L14'>lib/debug/server_cdp.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='INVALID_REQUEST-constant' class='summary_signature'>INVALID_REQUEST =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L463-L463'># File 'lib/debug/server_cdp.rb', line 463</a>    <pre class='code ruby'><span class='op'>-</span><span class='int'>32600</span></pre>
  </li>
  <li>
    <span id='ITERATIONS-constant' class='summary_signature'>ITERATIONS =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L186-L186'># File 'lib/debug/server_cdp.rb', line 186</a>    <pre class='code ruby'><span class='int'>50</span></pre>
  </li>
  <li>
    <span id='SHOW_PROTOCOL-constant' class='summary_signature'>SHOW_PROTOCOL =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L15-L15'># File 'lib/debug/server_cdp.rb', line 15</a>    <pre class='code ruby'><span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RUBY_DEBUG_CDP_SHOW_PROTOCOL</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span></pre>
  </li>
  <li>
    <span id='TIMEOUT_SEC-constant' class='summary_signature'>TIMEOUT_SEC =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L85-L85'># File 'lib/debug/server_cdp.rb', line 85</a>    <pre class='code ruby'><span class='int'>5</span></pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#get_chrome_path-class_method" title=".get_chrome_path (class method)">.<strong>get_chrome_path</strong>(candidates)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#get_devtools_endpoint-class_method" title=".get_devtools_endpoint (class method)">.<strong>get_devtools_endpoint</strong>(tf)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#run_new_chrome-class_method" title=".run_new_chrome (class method)">.<strong>run_new_chrome</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#setup_chrome-class_method" title=".setup_chrome (class method)">.<strong>setup_chrome</strong>(addr, uuid)  </a>
    </span>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#activate_bp-instance_method" title="#activate_bp (instance method)">#<strong>activate_bp</strong>(bps)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#add_line_breakpoint-instance_method" title="#add_line_breakpoint (instance method)">#<strong>add_line_breakpoint</strong>(req, b_id, path)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#cleanup_reader-instance_method" title="#cleanup_reader (instance method)">#<strong>cleanup_reader</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#deactivate_bp-instance_method" title="#deactivate_bp (instance method)">#<strong>deactivate_bp</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#del_bp-instance_method" title="#del_bp (instance method)">#<strong>del_bp</strong>(bps, k)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#fire_event-instance_method" title="#fire_event (instance method)">#<strong>fire_event</strong>(method, **params)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#send_event-instance_method" title="DEBUGGER__::UI_CDP#send_event (method)">#send_event</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#get_source_code-instance_method" title="#get_source_code (instance method)">#<strong>get_source_code</strong>(path)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#process-instance_method" title="#process (instance method)">#<strong>process</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#puts-instance_method" title="#puts (instance method)">#<strong>puts</strong>(result = &#39;&#39;)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#respond-instance_method" title="#respond (instance method)">#<strong>respond</strong>(req, **res)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Called by the SESSION thread.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#respond_fail-instance_method" title="#respond_fail (instance method)">#<strong>respond_fail</strong>(req, **res)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#send_fail_response-instance_method" title="DEBUGGER__::UI_CDP#send_fail_response (method)">#send_fail_response</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#send_chrome_response-instance_method" title="#send_chrome_response (instance method)">#<strong>send_chrome_response</strong>(req)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#send_event-instance_method" title="#send_event (instance method)">#<strong>send_event</strong>(method, **params)  </a>
      (also: #fire_event)
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#send_fail_response-instance_method" title="#send_fail_response (instance method)">#<strong>send_fail_response</strong>(req, **res)  </a>
      (also: #respond_fail)
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#send_http_res-instance_method" title="#send_http_res (instance method)">#<strong>send_http_res</strong>(body)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#send_response-instance_method" title="#send_response (instance method)">#<strong>send_response</strong>(req, **res)  </a>
      (also: #respond)
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#sock-instance_method" title="#sock (instance method)">#<strong>sock</strong>(skip: false) {|$stderr| ... } </a>
    </span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="get_chrome_path-class_method">
  <h3 class='signature  first'>
    .<strong>get_chrome_path</strong>(candidates)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="UI_CDP/UnsupportedError.html" title="DEBUGGER__::UI_CDP::UnsupportedError (class)">UnsupportedError</a>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L177-L184'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='177' data-end='184'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 177</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_get_chrome_path'>get_chrome_path</span> <span class='id identifier rubyid_candidates'>candidates</span>
  <span class='id identifier rubyid_candidates'>candidates</span>.<span class='id identifier rubyid_each'>each</span>{<span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='const'>File</span>.<span class='id identifier rubyid_exist?'>exist?</span> <span class='id identifier rubyid_c'>c</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_c'>c</span>
    <span class='kw'>end</span>
  }
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="UI_CDP/UnsupportedError.html" title="DEBUGGER__::UI_CDP::UnsupportedError (class)">UnsupportedError</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="get_devtools_endpoint-class_method">
  <h3 class='signature '>
    .<strong>get_devtools_endpoint</strong>(tf)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<a href="UI_CDP/NotFoundChromeEndpointError.html" title="DEBUGGER__::UI_CDP::NotFoundChromeEndpointError (class)">NotFoundChromeEndpointError</a>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L188-L202'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='188' data-end='202'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 188</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_get_devtools_endpoint'>get_devtools_endpoint</span> <span class='id identifier rubyid_tf'>tf</span>
  <span class='id identifier rubyid_i'>i</span> <span class='op'>=</span> <span class='int'>1</span>
  <span class='kw'>while</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>&lt;</span> <span class='const'><a href="#ITERATIONS-constant" title="DEBUGGER__::UI_CDP::ITERATIONS (constant)">ITERATIONS</a></span>
    <span class='id identifier rubyid_i'>i</span> <span class='op'>+=</span> <span class='int'>1</span>
    <span class='kw'>if</span> <span class='const'>File</span>.<span class='id identifier rubyid_exist?'>exist?</span>(<span class='id identifier rubyid_tf'>tf</span>) <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span>(<span class='id identifier rubyid_tf'>tf</span>)
      <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_match'>match</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>DevTools listening on ws:\/\/127.0.0.1:(\d+)(.*)</span><span class='regexp_end'>/</span></span>
        <span class='id identifier rubyid_port'>port</span> <span class='op'>=</span> <span class='backref'>$1</span>
        <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='backref'>$2</span>
        <span class='kw'>return</span> [<span class='id identifier rubyid_port'>port</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span>]
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_sleep'>sleep</span> <span class='float'>0.1</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="UI_CDP/NotFoundChromeEndpointError.html" title="DEBUGGER__::UI_CDP::NotFoundChromeEndpointError (class)">NotFoundChromeEndpointError</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="run_new_chrome-class_method">
  <h3 class='signature '>
    .<strong>run_new_chrome</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L87-L175'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='87' data-end='175'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 87</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_run_new_chrome'>run_new_chrome</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='const'><a href="../DEBUGGER__.html#CONFIG-constant" title="DEBUGGER__::CONFIG (constant)">CONFIG</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_chrome_path'>chrome_path</span>]

  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_port'>port</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_wait_thr'>wait_thr</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='comment'># The process to check OS is based on `selenium` project.
</span>  <span class='kw'>case</span> <span class='const'>RbConfig</span><span class='op'>::</span><span class='const'><a href="../DEBUGGER__.html#CONFIG-constant" title="DEBUGGER__::CONFIG (constant)">CONFIG</a></span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>host_os</span><span class='tstring_end'>&#39;</span></span>]
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>mswin|msys|mingw|cygwin|emc</span><span class='regexp_end'>/</span></span>
    <span class='kw'>if</span> <span class='id identifier rubyid_path'>path</span>.<span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_candidates'>candidates</span> <span class='op'>=</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe</span><span class='tstring_end'>&#39;</span></span>]
      <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='id identifier rubyid_get_chrome_path'><a href="#get_chrome_path-class_method" title="DEBUGGER__::UI_CDP.get_chrome_path (method)">get_chrome_path</a></span> <span class='id identifier rubyid_candidates'>candidates</span>
    <span class='kw'>end</span>
    <span class='comment'># The path is based on https://github.com/sindresorhus/open/blob/v8.4.0/index.js#L128.
</span>    <span class='id identifier rubyid_stdin'>stdin</span><span class='comma'>,</span> <span class='id identifier rubyid_stdout'>stdout</span><span class='comma'>,</span> <span class='id identifier rubyid_stderr'>stderr</span><span class='comma'>,</span> <span class='id identifier rubyid_wait_thr'>wait_thr</span> <span class='op'>=</span> <span class='op'>*</span><span class='const'>Open3</span>.<span class='id identifier rubyid_popen3'>popen3</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SystemRoot</span><span class='tstring_end'>&#39;</span></span>]<span class='embexpr_end'>}</span><span class='tstring_content'>\\System32\\WindowsPowerShell\\v1.0\\powershell</span><span class='tstring_end'>&quot;</span></span>)
    <span class='id identifier rubyid_tf'>tf</span> <span class='op'>=</span> <span class='const'>Tempfile</span>.<span class='id identifier rubyid_create'>create</span>([<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>debug-</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.txt</span><span class='tstring_end'>&#39;</span></span>])

    <span class='id identifier rubyid_stdin'>stdin</span>.<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="DEBUGGER__::UI_CDP#puts (method)">puts</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Start-process &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; -Argumentlist &#39;--remote-debugging-port=0&#39;, &#39;--no-first-run&#39;, &#39;--no-default-browser-check&#39;, &#39;--user-data-dir=C:\\temp&#39; -Wait -RedirectStandardError </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tf'>tf</span>.<span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>)
    <span class='id identifier rubyid_stdin'>stdin</span>.<span class='id identifier rubyid_close'>close</span>
    <span class='id identifier rubyid_stdout'>stdout</span>.<span class='id identifier rubyid_close'>close</span>
    <span class='id identifier rubyid_stderr'>stderr</span>.<span class='id identifier rubyid_close'>close</span>
    <span class='id identifier rubyid_port'>port</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='id identifier rubyid_get_devtools_endpoint'><a href="#get_devtools_endpoint-class_method" title="DEBUGGER__::UI_CDP.get_devtools_endpoint (method)">get_devtools_endpoint</a></span>(<span class='id identifier rubyid_tf'>tf</span>.<span class='id identifier rubyid_path'>path</span>)

    <span class='id identifier rubyid_at_exit'>at_exit</span>{
      <span class='const'><a href="../DEBUGGER__.html" title="DEBUGGER__ (module)">DEBUGGER__</a></span>.<span class='id identifier rubyid_skip_all'><a href="../DEBUGGER__.html#skip_all-class_method" title="DEBUGGER__.skip_all (method)">skip_all</a></span>

      <span class='id identifier rubyid_stdin'>stdin</span><span class='comma'>,</span> <span class='id identifier rubyid_stdout'>stdout</span><span class='comma'>,</span> <span class='id identifier rubyid_stderr'>stderr</span><span class='comma'>,</span> <span class='id identifier rubyid_wait_thr'>wait_thr</span> <span class='op'>=</span> <span class='op'>*</span><span class='const'>Open3</span>.<span class='id identifier rubyid_popen3'>popen3</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>ENV</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SystemRoot</span><span class='tstring_end'>&#39;</span></span>]<span class='embexpr_end'>}</span><span class='tstring_content'>\\System32\\WindowsPowerShell\\v1.0\\powershell</span><span class='tstring_end'>&quot;</span></span>)
      <span class='id identifier rubyid_stdin'>stdin</span>.<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="DEBUGGER__::UI_CDP#puts (method)">puts</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Stop-process -Name chrome</span><span class='tstring_end'>&quot;</span></span>)
      <span class='id identifier rubyid_stdin'>stdin</span>.<span class='id identifier rubyid_close'>close</span>
      <span class='id identifier rubyid_stdout'>stdout</span>.<span class='id identifier rubyid_close'>close</span>
      <span class='id identifier rubyid_stderr'>stderr</span>.<span class='id identifier rubyid_close'>close</span>
      <span class='id identifier rubyid_tf'>tf</span>.<span class='id identifier rubyid_close'>close</span>
      <span class='kw'>begin</span>
        <span class='const'>File</span>.<span class='id identifier rubyid_unlink'>unlink</span>(<span class='id identifier rubyid_tf'>tf</span>)
      <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>EACCES</span>
      <span class='kw'>end</span>
    }
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>darwin|mac os</span><span class='regexp_end'>/</span></span>
    <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_dir'>dir</span> <span class='op'>=</span> <span class='const'>Dir</span>.<span class='id identifier rubyid_mktmpdir'>mktmpdir</span>
    <span class='comment'># The command line flags are based on: https://developer.mozilla.org/en-US/docs/Tools/Remote_Debugging/Chrome_Desktop#connecting.
</span>    <span class='id identifier rubyid_stdin'>stdin</span><span class='comma'>,</span> <span class='id identifier rubyid_stdout'>stdout</span><span class='comma'>,</span> <span class='id identifier rubyid_stderr'>stderr</span><span class='comma'>,</span> <span class='id identifier rubyid_wait_thr'>wait_thr</span> <span class='op'>=</span> <span class='op'>*</span><span class='const'>Open3</span>.<span class='id identifier rubyid_popen3'>popen3</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'> --remote-debugging-port=0 --no-first-run --no-default-browser-check --user-data-dir=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_dir'>dir</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>)
    <span class='id identifier rubyid_stdin'>stdin</span>.<span class='id identifier rubyid_close'>close</span>
    <span class='id identifier rubyid_stdout'>stdout</span>.<span class='id identifier rubyid_close'>close</span>
    <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_stderr'>stderr</span>.<span class='id identifier rubyid_readpartial'>readpartial</span> <span class='int'>4096</span>
    <span class='id identifier rubyid_stderr'>stderr</span>.<span class='id identifier rubyid_close'>close</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_match'>match</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>DevTools listening on ws:\/\/127.0.0.1:(\d+)(.*)</span><span class='regexp_end'>/</span></span>
      <span class='id identifier rubyid_port'>port</span> <span class='op'>=</span> <span class='backref'>$1</span>
      <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='backref'>$2</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_at_exit'>at_exit</span>{
      <span class='const'><a href="../DEBUGGER__.html" title="DEBUGGER__ (module)">DEBUGGER__</a></span>.<span class='id identifier rubyid_skip_all'><a href="../DEBUGGER__.html#skip_all-class_method" title="DEBUGGER__.skip_all (method)">skip_all</a></span>
      <span class='const'>FileUtils</span>.<span class='id identifier rubyid_rm_rf'>rm_rf</span> <span class='id identifier rubyid_dir'>dir</span>
    }
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>linux</span><span class='regexp_end'>/</span></span>
    <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>google-chrome</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_dir'>dir</span> <span class='op'>=</span> <span class='const'>Dir</span>.<span class='id identifier rubyid_mktmpdir'>mktmpdir</span>
    <span class='comment'># The command line flags are based on: https://developer.mozilla.org/en-US/docs/Tools/Remote_Debugging/Chrome_Desktop#connecting.
</span>    <span class='id identifier rubyid_stdin'>stdin</span><span class='comma'>,</span> <span class='id identifier rubyid_stdout'>stdout</span><span class='comma'>,</span> <span class='id identifier rubyid_stderr'>stderr</span><span class='comma'>,</span> <span class='id identifier rubyid_wait_thr'>wait_thr</span> <span class='op'>=</span> <span class='op'>*</span><span class='const'>Open3</span>.<span class='id identifier rubyid_popen3'>popen3</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'> --remote-debugging-port=0 --no-first-run --no-default-browser-check --user-data-dir=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_dir'>dir</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>)
    <span class='id identifier rubyid_stdin'>stdin</span>.<span class='id identifier rubyid_close'>close</span>
    <span class='id identifier rubyid_stdout'>stdout</span>.<span class='id identifier rubyid_close'>close</span>
    <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>begin</span>
      <span class='const'>Timeout</span>.<span class='id identifier rubyid_timeout'>timeout</span>(<span class='const'><a href="#TIMEOUT_SEC-constant" title="DEBUGGER__::UI_CDP::TIMEOUT_SEC (constant)">TIMEOUT_SEC</a></span>) <span class='kw'>do</span>
        <span class='kw'>until</span> <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>DevTools listening on ws:\/\/127.0.0.1:\d+.*</span><span class='regexp_end'>/</span></span>)
          <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_stderr'>stderr</span>.<span class='id identifier rubyid_readpartial'>readpartial</span> <span class='int'>4096</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>rescue</span> <span class='const'>Exception</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="UI_CDP/NotFoundChromeEndpointError.html" title="DEBUGGER__::UI_CDP::NotFoundChromeEndpointError (class)">NotFoundChromeEndpointError</a></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_stderr'>stderr</span>.<span class='id identifier rubyid_close'>close</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span>.<span class='id identifier rubyid_match'>match</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>DevTools listening on ws:\/\/127.0.0.1:(\d+)(.*)</span><span class='regexp_end'>/</span></span>
      <span class='id identifier rubyid_port'>port</span> <span class='op'>=</span> <span class='backref'>$1</span>
      <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='backref'>$2</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_at_exit'>at_exit</span>{
      <span class='const'><a href="../DEBUGGER__.html" title="DEBUGGER__ (module)">DEBUGGER__</a></span>.<span class='id identifier rubyid_skip_all'><a href="../DEBUGGER__.html#skip_all-class_method" title="DEBUGGER__.skip_all (method)">skip_all</a></span>
      <span class='const'>FileUtils</span>.<span class='id identifier rubyid_rm_rf'>rm_rf</span> <span class='id identifier rubyid_dir'>dir</span>
    }
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="UI_CDP/UnsupportedError.html" title="DEBUGGER__::UI_CDP::UnsupportedError (class)">UnsupportedError</a></span>
  <span class='kw'>end</span>

  [<span class='id identifier rubyid_port'>port</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_wait_thr'>wait_thr</span>.<span class='id identifier rubyid_pid'>pid</span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setup_chrome-class_method">
  <h3 class='signature '>
    .<strong>setup_chrome</strong>(addr, uuid)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L21-L83'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='21' data-end='83'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 21</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_setup_chrome'>setup_chrome</span> <span class='id identifier rubyid_addr'>addr</span><span class='comma'>,</span> <span class='id identifier rubyid_uuid'>uuid</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='const'><a href="../DEBUGGER__.html#CONFIG-constant" title="DEBUGGER__::CONFIG (constant)">CONFIG</a></span>[<span class='symbeg'>:</span><span class='id identifier rubyid_chrome_path'>chrome_path</span>] <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>

  <span class='id identifier rubyid_port'>port</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_pid'>pid</span> <span class='op'>=</span> <span class='id identifier rubyid_run_new_chrome'><a href="#run_new_chrome-class_method" title="DEBUGGER__::UI_CDP.run_new_chrome (method)">run_new_chrome</a></span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='const'>Socket</span>.<span class='id identifier rubyid_tcp'>tcp</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>127.0.0.1</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_port'>port</span>
  <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ECONNREFUSED</span><span class='comma'>,</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>EADDRNOTAVAIL</span>
    <span class='kw'>return</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_ws_client'>ws_client</span> <span class='op'>=</span> <span class='const'><a href="UI_CDP/WebSocketClient.html" title="DEBUGGER__::UI_CDP::WebSocketClient (class)">WebSocketClient</a></span>.<span class='id identifier rubyid_new'><a href="UI_CDP/WebSocketClient.html#new-class_method" title="DEBUGGER__::UI_CDP::WebSocketClient.new (method)">new</a></span>(<span class='id identifier rubyid_s'>s</span>)
  <span class='id identifier rubyid_ws_client'>ws_client</span>.<span class='id identifier rubyid_handshake'>handshake</span> <span class='id identifier rubyid_port'>port</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span>
  <span class='id identifier rubyid_ws_client'>ws_client</span>.<span class='id identifier rubyid_send'>send</span> <span class='label'>id:</span> <span class='int'>1</span><span class='comma'>,</span> <span class='label'>method:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Target.getTargets</span><span class='tstring_end'>&#39;</span></span>

  <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='id identifier rubyid_ws_client'>ws_client</span>.<span class='id identifier rubyid_extract_data'>extract_data</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_res'>res</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span>]
    <span class='kw'>when</span> <span class='int'>1</span>
      <span class='id identifier rubyid_target_info'>target_info</span> <span class='op'>=</span> <span class='id identifier rubyid_res'>res</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>result</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>targetInfos</span><span class='tstring_end'>&#39;</span></span>)
      <span class='id identifier rubyid_page'>page</span> <span class='op'>=</span> <span class='id identifier rubyid_target_info'>target_info</span>.<span class='id identifier rubyid_find'>find</span>{<span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span> <span class='id identifier rubyid_t'>t</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>type</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>page</span><span class='tstring_end'>&#39;</span></span>}
      <span class='id identifier rubyid_ws_client'>ws_client</span>.<span class='id identifier rubyid_send'>send</span> <span class='label'>id:</span> <span class='int'>2</span><span class='comma'>,</span> <span class='label'>method:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Target.attachToTarget</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                    <span class='label'>params:</span> {
                      <span class='label'>targetId:</span> <span class='id identifier rubyid_page'>page</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>targetId</span><span class='tstring_end'>&#39;</span></span>]<span class='comma'>,</span>
                      <span class='label'>flatten:</span> <span class='kw'>true</span>
                    }
    <span class='kw'>when</span> <span class='int'>2</span>
      <span class='id identifier rubyid_s_id'>s_id</span> <span class='op'>=</span> <span class='id identifier rubyid_res'>res</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>result</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sessionId</span><span class='tstring_end'>&#39;</span></span>)
      <span class='comment'># TODO: change id
</span>      <span class='id identifier rubyid_ws_client'>ws_client</span>.<span class='id identifier rubyid_send'>send</span> <span class='label'>sessionId:</span> <span class='id identifier rubyid_s_id'>s_id</span><span class='comma'>,</span> <span class='label'>id:</span> <span class='int'>100</span><span class='comma'>,</span> <span class='label'>method:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Network.enable</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_ws_client'>ws_client</span>.<span class='id identifier rubyid_send'>send</span> <span class='label'>sessionId:</span> <span class='id identifier rubyid_s_id'>s_id</span><span class='comma'>,</span> <span class='label'>id:</span> <span class='int'>3</span><span class='comma'>,</span>
                    <span class='label'>method:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Page.enable</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>when</span> <span class='int'>3</span>
      <span class='id identifier rubyid_s_id'>s_id</span> <span class='op'>=</span> <span class='id identifier rubyid_res'>res</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sessionId</span><span class='tstring_end'>&#39;</span></span>]
      <span class='id identifier rubyid_ws_client'>ws_client</span>.<span class='id identifier rubyid_send'>send</span> <span class='label'>sessionId:</span> <span class='id identifier rubyid_s_id'>s_id</span><span class='comma'>,</span> <span class='label'>id:</span> <span class='int'>4</span><span class='comma'>,</span>
                    <span class='label'>method:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Page.getFrameTree</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>when</span> <span class='int'>4</span>
      <span class='id identifier rubyid_s_id'>s_id</span> <span class='op'>=</span> <span class='id identifier rubyid_res'>res</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sessionId</span><span class='tstring_end'>&#39;</span></span>]
      <span class='id identifier rubyid_f_id'>f_id</span> <span class='op'>=</span> <span class='id identifier rubyid_res'>res</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>result</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>frameTree</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>frame</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span>)
      <span class='id identifier rubyid_ws_client'>ws_client</span>.<span class='id identifier rubyid_send'>send</span> <span class='label'>sessionId:</span> <span class='id identifier rubyid_s_id'>s_id</span><span class='comma'>,</span> <span class='label'>id:</span> <span class='int'>5</span><span class='comma'>,</span>
                    <span class='label'>method:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Page.navigate</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                    <span class='label'>params:</span> {
                      <span class='label'>url:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>devtools://devtools/bundled/inspector.html?v8only=true&amp;panel=sources&amp;noJavaScriptCompletion=true&amp;ws=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_addr'>addr</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uuid'>uuid</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                      <span class='label'>frameId:</span> <span class='id identifier rubyid_f_id'>f_id</span>
                    }
    <span class='kw'>when</span> <span class='int'>101</span>
      <span class='kw'>break</span>
    <span class='kw'>else</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_res'>res</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>method</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Network.webSocketWillSendHandshakeRequest</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_s_id'>s_id</span> <span class='op'>=</span> <span class='id identifier rubyid_res'>res</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sessionId</span><span class='tstring_end'>&#39;</span></span>]
        <span class='comment'># Display the console by entering ESC key
</span>        <span class='id identifier rubyid_ws_client'>ws_client</span>.<span class='id identifier rubyid_send'>send</span> <span class='label'>sessionId:</span> <span class='id identifier rubyid_s_id'>s_id</span><span class='comma'>,</span> <span class='label'>id:</span> <span class='int'>101</span><span class='comma'>,</span>  <span class='comment'># TODO: change id
</span>                      <span class='label'>method:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Input.dispatchKeyEvent</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                      <span class='label'>params:</span> {
                        <span class='label'>type:</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>keyDown</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                        <span class='label'>windowsVirtualKeyCode:</span><span class='int'>27</span> <span class='comment'># ESC key
</span>                      }
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_pid'>pid</span>
<span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ENOENT</span><span class='comma'>,</span> <span class='const'><a href="UI_CDP/UnsupportedError.html" title="DEBUGGER__::UI_CDP::UnsupportedError (class)">UnsupportedError</a></span><span class='comma'>,</span> <span class='const'><a href="UI_CDP/NotFoundChromeEndpointError.html" title="DEBUGGER__::UI_CDP::NotFoundChromeEndpointError (class)">NotFoundChromeEndpointError</a></span>
  <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="activate_bp-instance_method">
  <h3 class='signature  first'>
    #<strong>activate_bp</strong>(bps)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L659-L669'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='659' data-end='669'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 659</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_activate_bp'>activate_bp</span> <span class='id identifier rubyid_bps'>bps</span>
  <span class='id identifier rubyid_bps'>bps</span>.<span class='id identifier rubyid_each_key'>each_key</span>{<span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_k'>k</span>.<span class='id identifier rubyid_match'>match</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\d:(\d):(.*)</span><span class='regexp_end'>/</span></span>
      <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='backref'>$1</span>
      <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='backref'>$2</span>
      <span class='const'>SESSION</span>.<span class='id identifier rubyid_add_line_breakpoint'><a href="#add_line_breakpoint-instance_method" title="DEBUGGER__::UI_CDP#add_line_breakpoint (method)">add_line_breakpoint</a></span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_line'>line</span>.<span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>+</span> <span class='int'>1</span>)
    <span class='kw'>else</span>
      <span class='const'>SESSION</span>.<span class='id identifier rubyid_add_catch_breakpoint'><a href="../DEBUGGER__.html#add_catch_breakpoint-class_method" title="DEBUGGER__.add_catch_breakpoint (method)">add_catch_breakpoint</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Exception</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>
  }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="add_line_breakpoint-instance_method">
  <h3 class='signature '>
    #<strong>add_line_breakpoint</strong>(req, b_id, path)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L624-L640'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='624' data-end='640'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 624</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_add_line_breakpoint'>add_line_breakpoint</span> <span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='id identifier rubyid_b_id'>b_id</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span>
  <span class='id identifier rubyid_cond'>cond</span> <span class='op'>=</span> <span class='id identifier rubyid_req'>req</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>condition</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='id identifier rubyid_req'>req</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lineNumber</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_src'>src</span> <span class='op'>=</span> <span class='id identifier rubyid_get_source_code'><a href="#get_source_code-instance_method" title="DEBUGGER__::UI_CDP#get_source_code (method)">get_source_code</a></span> <span class='id identifier rubyid_path'>path</span>
  <span class='id identifier rubyid_end_line'>end_line</span> <span class='op'>=</span> <span class='id identifier rubyid_src'>src</span>.<span class='id identifier rubyid_lines'>lines</span>.<span class='id identifier rubyid_count'>count</span>
  <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='id identifier rubyid_end_line'>end_line</span>  <span class='kw'>if</span> <span class='id identifier rubyid_line'>line</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_end_line'>end_line</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_cond'>cond</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
    <span class='const'>SESSION</span>.<span class='id identifier rubyid_add_line_breakpoint'>add_line_breakpoint</span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_line'>line</span> <span class='op'>+</span> <span class='int'>1</span><span class='comma'>,</span> <span class='label'>cond:</span> <span class='id identifier rubyid_cond'>cond</span>)
  <span class='kw'>else</span>
    <span class='const'>SESSION</span>.<span class='id identifier rubyid_add_line_breakpoint'>add_line_breakpoint</span>(<span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_line'>line</span> <span class='op'>+</span> <span class='int'>1</span>)
  <span class='kw'>end</span>
  <span class='comment'># Because we need to return scriptId, responses are returned in SESSION thread.
</span>  <span class='id identifier rubyid_req'>req</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span>][<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>scriptId</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span>
  <span class='id identifier rubyid_req'>req</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span>][<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lineNumber</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='id identifier rubyid_line'>line</span>
  <span class='id identifier rubyid_req'>req</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span>][<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>breakpointId</span><span class='tstring_end'>&#39;</span></span>] <span class='op'>=</span> <span class='id identifier rubyid_b_id'>b_id</span>
  <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_req'>req</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="cleanup_reader-instance_method">
  <h3 class='signature '>
    #<strong>cleanup_reader</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L676-L680'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='676' data-end='680'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 676</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_cleanup_reader'>cleanup_reader</span>
  <span class='kw'>super</span>
  <span class='const'><a href="../Process.html" title="Process (module)">Process</a></span>.<span class='id identifier rubyid_kill'>kill</span> <span class='symbeg'>:</span><span class='const'>KILL</span><span class='comma'>,</span> <span class='ivar'>@chrome_pid</span> <span class='kw'>if</span> <span class='ivar'>@chrome_pid</span>
<span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ESRCH</span> <span class='comment'># continue if @chrome_pid process is not found
</span><span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="deactivate_bp-instance_method">
  <h3 class='signature '>
    #<strong>deactivate_bp</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L671-L674'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='671' data-end='674'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 671</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_deactivate_bp'>deactivate_bp</span>
  <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>del</span><span class='tstring_end'>&#39;</span></span>
  <span class='ivar'>@q_ans</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>y</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="del_bp-instance_method">
  <h3 class='signature '>
    #<strong>del_bp</strong>(bps, k)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L642-L649'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='642' data-end='649'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 642</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_del_bp'>del_bp</span> <span class='id identifier rubyid_bps'>bps</span><span class='comma'>,</span> <span class='id identifier rubyid_k'>k</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_bps'>bps</span> <span class='kw'>unless</span> <span class='id identifier rubyid_idx'>idx</span> <span class='op'>=</span> <span class='id identifier rubyid_bps'>bps</span>[<span class='id identifier rubyid_k'>k</span>]

  <span class='id identifier rubyid_bps'>bps</span>.<span class='id identifier rubyid_delete'>delete</span> <span class='id identifier rubyid_k'>k</span>
  <span class='id identifier rubyid_bps'>bps</span>.<span class='id identifier rubyid_each_key'>each_key</span>{<span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_bps'>bps</span>[<span class='id identifier rubyid_i'>i</span>] <span class='op'>-=</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_bps'>bps</span>[<span class='id identifier rubyid_i'>i</span>] <span class='op'>&gt;</span> <span class='id identifier rubyid_idx'>idx</span>}
  <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>del </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_idx'>idx</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_bps'>bps</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fire_event-instance_method">
  <h3 class='signature '>
    #<strong>fire_event</strong>(method, **params)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#send_event-instance_method" title="DEBUGGER__::UI_CDP#send_event (method)">#send_event</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L686-L686'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='686' data-end='686'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 686</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_fire_event'>fire_event</span> <span class='id identifier rubyid_send_event'><a href="#send_event-instance_method" title="DEBUGGER__::UI_CDP#send_event (method)">send_event</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="get_source_code-instance_method">
  <h3 class='signature '>
    #<strong>get_source_code</strong>(path)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L651-L657'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='651' data-end='657'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 651</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_get_source_code'>get_source_code</span> <span class='id identifier rubyid_path'>path</span>
  <span class='kw'>return</span> <span class='ivar'>@src_map</span>[<span class='id identifier rubyid_path'>path</span>] <span class='kw'>if</span> <span class='ivar'>@src_map</span>[<span class='id identifier rubyid_path'>path</span>]

  <span class='id identifier rubyid_src'>src</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span>(<span class='id identifier rubyid_path'>path</span>)
  <span class='ivar'>@src_map</span>[<span class='id identifier rubyid_path'>path</span>] <span class='op'>=</span> <span class='id identifier rubyid_src'>src</span>
  <span class='id identifier rubyid_src'>src</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="process-instance_method">
  <h3 class='signature '>
    #<strong>process</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L465-L622'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='465' data-end='622'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 465</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_process'>process</span>
  <span class='id identifier rubyid_bps'>bps</span> <span class='op'>=</span> {}
  <span class='ivar'>@src_map</span> <span class='op'>=</span> {}
  <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='ivar'>@ws_server</span>.<span class='id identifier rubyid_extract_data'>extract_data</span>

    <span class='kw'>case</span> <span class='id identifier rubyid_req'>req</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>method</span><span class='tstring_end'>&#39;</span></span>]

    <span class='comment'>## boot/configuration
</span>    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.getScriptSource</span><span class='tstring_end'>&#39;</span></span>
      <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_req'>req</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.enable</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='label'>debuggerId:</span> <span class='id identifier rubyid_rand'>rand</span>.<span class='id identifier rubyid_to_s'>to_s</span>
      <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_req'>req</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Runtime.enable</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span>
      <span class='id identifier rubyid_send_event'><a href="#send_event-instance_method" title="DEBUGGER__::UI_CDP#send_event (method)">send_event</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Runtime.executionContextCreated</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                  <span class='label'>context:</span> {
                    <span class='label'>id:</span> <span class='const'>SecureRandom</span>.<span class='id identifier rubyid_hex'>hex</span>(<span class='int'>16</span>)<span class='comma'>,</span>
                    <span class='label'>origin:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://</span><span class='embexpr_beg'>#{</span><span class='ivar'>@local_addr</span>.<span class='id identifier rubyid_inspect_sockaddr'>inspect_sockaddr</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                    <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
                  }
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Runtime.getIsolateId</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span><span class='comma'>,</span>
                    <span class='label'>id:</span> <span class='const'>SecureRandom</span>.<span class='id identifier rubyid_hex'>hex</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Runtime.terminateExecution</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span>
      <span class='id identifier rubyid_exit'>exit</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Page.startScreencast</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Emulation.setTouchEmulationEnabled</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Emulation.setEmitTouchEventsForMouse</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Runtime.compileScript</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Page.getResourceContent</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Overlay.setPausedInDebuggerMessage</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Runtime.releaseObjectGroup</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Runtime.discardConsoleEntries</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Log.clear</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Runtime.runIfWaitingForDebugger</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span>

    <span class='comment'>## control
</span>    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.resume</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span>
      <span class='id identifier rubyid_send_event'><a href="#send_event-instance_method" title="DEBUGGER__::UI_CDP#send_event (method)">send_event</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.resumed</span><span class='tstring_end'>&#39;</span></span>
      <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>c</span><span class='tstring_end'>&#39;</span></span>
      <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_req'>req</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.stepOver</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>begin</span>
        <span class='ivar'>@session</span>.<span class='id identifier rubyid_check_postmortem'>check_postmortem</span>
        <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span>
        <span class='id identifier rubyid_send_event'><a href="#send_event-instance_method" title="DEBUGGER__::UI_CDP#send_event (method)">send_event</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.resumed</span><span class='tstring_end'>&#39;</span></span>
        <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>n</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>rescue</span> <span class='const'><a href="PostmortemError.html" title="DEBUGGER__::PostmortemError (class)">PostmortemError</a></span>
        <span class='id identifier rubyid_send_fail_response'><a href="#send_fail_response-instance_method" title="DEBUGGER__::UI_CDP#send_fail_response (method)">send_fail_response</a></span> <span class='id identifier rubyid_req'>req</span><span class='comma'>,</span>
                          <span class='label'>code:</span> <span class='const'><a href="#INVALID_REQUEST-constant" title="DEBUGGER__::UI_CDP::INVALID_REQUEST (constant)">INVALID_REQUEST</a></span><span class='comma'>,</span>
                          <span class='label'>message:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&#39;stepOver&#39; is not supported while postmortem mode</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>ensure</span>
        <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_req'>req</span>
      <span class='kw'>end</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.stepInto</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>begin</span>
        <span class='ivar'>@session</span>.<span class='id identifier rubyid_check_postmortem'>check_postmortem</span>
        <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span>
        <span class='id identifier rubyid_send_event'><a href="#send_event-instance_method" title="DEBUGGER__::UI_CDP#send_event (method)">send_event</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.resumed</span><span class='tstring_end'>&#39;</span></span>
        <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>s</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>rescue</span> <span class='const'><a href="PostmortemError.html" title="DEBUGGER__::PostmortemError (class)">PostmortemError</a></span>
        <span class='id identifier rubyid_send_fail_response'><a href="#send_fail_response-instance_method" title="DEBUGGER__::UI_CDP#send_fail_response (method)">send_fail_response</a></span> <span class='id identifier rubyid_req'>req</span><span class='comma'>,</span>
                          <span class='label'>code:</span> <span class='const'><a href="#INVALID_REQUEST-constant" title="DEBUGGER__::UI_CDP::INVALID_REQUEST (constant)">INVALID_REQUEST</a></span><span class='comma'>,</span>
                          <span class='label'>message:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&#39;stepInto&#39; is not supported while postmortem mode</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>ensure</span>
        <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_req'>req</span>
      <span class='kw'>end</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.stepOut</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>begin</span>
        <span class='ivar'>@session</span>.<span class='id identifier rubyid_check_postmortem'>check_postmortem</span>
        <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span>
        <span class='id identifier rubyid_send_event'><a href="#send_event-instance_method" title="DEBUGGER__::UI_CDP#send_event (method)">send_event</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.resumed</span><span class='tstring_end'>&#39;</span></span>
        <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fin</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>rescue</span> <span class='const'><a href="PostmortemError.html" title="DEBUGGER__::PostmortemError (class)">PostmortemError</a></span>
        <span class='id identifier rubyid_send_fail_response'><a href="#send_fail_response-instance_method" title="DEBUGGER__::UI_CDP#send_fail_response (method)">send_fail_response</a></span> <span class='id identifier rubyid_req'>req</span><span class='comma'>,</span>
                          <span class='label'>code:</span> <span class='const'><a href="#INVALID_REQUEST-constant" title="DEBUGGER__::UI_CDP::INVALID_REQUEST (constant)">INVALID_REQUEST</a></span><span class='comma'>,</span>
                          <span class='label'>message:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&#39;stepOut&#39; is not supported while postmortem mode</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>ensure</span>
        <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_req'>req</span>
      <span class='kw'>end</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.setSkipAllPauses</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_skip'>skip</span> <span class='op'>=</span> <span class='id identifier rubyid_req'>req</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>skip</span><span class='tstring_end'>&#39;</span></span>)
      <span class='kw'>if</span> <span class='id identifier rubyid_skip'>skip</span>
        <span class='id identifier rubyid_deactivate_bp'><a href="#deactivate_bp-instance_method" title="DEBUGGER__::UI_CDP#deactivate_bp (method)">deactivate_bp</a></span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_activate_bp'><a href="#activate_bp-instance_method" title="DEBUGGER__::UI_CDP#activate_bp (method)">activate_bp</a></span> <span class='id identifier rubyid_bps'>bps</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.pause</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span>
      <span class='const'><a href="../Process.html" title="Process (module)">Process</a></span>.<span class='id identifier rubyid_kill'>kill</span>(<span class='const'><a href="UI_ServerBase.html" title="DEBUGGER__::UI_ServerBase (class)">UI_ServerBase</a></span><span class='op'>::</span><span class='const'>TRAP_SIGNAL</span><span class='comma'>,</span> <span class='const'><a href="../Process.html" title="Process (module)">Process</a></span>.<span class='id identifier rubyid_pid'>pid</span>)

    <span class='comment'># breakpoint
</span>    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.getPossibleBreakpoints</span><span class='tstring_end'>&#39;</span></span>
      <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_req'>req</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.setBreakpointByUrl</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='id identifier rubyid_req'>req</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lineNumber</span><span class='tstring_end'>&#39;</span></span>)
      <span class='kw'>if</span> <span class='id identifier rubyid_regexp'>regexp</span> <span class='op'>=</span> <span class='id identifier rubyid_req'>req</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>urlRegex</span><span class='tstring_end'>&#39;</span></span>)
        <span class='id identifier rubyid_b_id'>b_id</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_line'>line</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_regexp'>regexp</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_bps'>bps</span>[<span class='id identifier rubyid_b_id'>b_id</span>] <span class='op'>=</span> <span class='id identifier rubyid_bps'>bps</span>.<span class='id identifier rubyid_size'>size</span>
        <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='id identifier rubyid_regexp'>regexp</span>.<span class='id identifier rubyid_match'>match</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(.*)\|</span><span class='regexp_end'>/</span></span>)[<span class='int'>1</span>].<span class='id identifier rubyid_gsub'>gsub</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>)
        <span class='id identifier rubyid_add_line_breakpoint'><a href="#add_line_breakpoint-instance_method" title="DEBUGGER__::UI_CDP#add_line_breakpoint (method)">add_line_breakpoint</a></span>(<span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='id identifier rubyid_b_id'>b_id</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span>)
      <span class='kw'>elsif</span> <span class='id identifier rubyid_url'>url</span> <span class='op'>=</span> <span class='id identifier rubyid_req'>req</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>url</span><span class='tstring_end'>&#39;</span></span>)
        <span class='id identifier rubyid_b_id'>b_id</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_line'>line</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_url'>url</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='comment'># When breakpoints are set in Script snippet, non-existent path such as &quot;snippet:///Script%20snippet%20%231&quot; sent.
</span>        <span class='comment'># That&#39;s why we need to check it here.
</span>        <span class='kw'>if</span> <span class='const'>File</span>.<span class='id identifier rubyid_exist?'>exist?</span> <span class='id identifier rubyid_url'>url</span>
          <span class='id identifier rubyid_bps'>bps</span>[<span class='id identifier rubyid_b_id'>b_id</span>] <span class='op'>=</span> <span class='id identifier rubyid_bps'>bps</span>.<span class='id identifier rubyid_size'>size</span>
          <span class='id identifier rubyid_add_line_breakpoint'><a href="#add_line_breakpoint-instance_method" title="DEBUGGER__::UI_CDP#add_line_breakpoint (method)">add_line_breakpoint</a></span>(<span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='id identifier rubyid_b_id'>b_id</span><span class='comma'>,</span> <span class='id identifier rubyid_url'>url</span>)
        <span class='kw'>else</span>
          <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span><span class='comma'>,</span>
                        <span class='label'>breakpointId:</span> <span class='id identifier rubyid_b_id'>b_id</span><span class='comma'>,</span>
                        <span class='label'>locations:</span> []
        <span class='kw'>end</span>            
      <span class='kw'>else</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_hash'>hash</span> <span class='op'>=</span> <span class='id identifier rubyid_req'>req</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>scriptHash</span><span class='tstring_end'>&#39;</span></span>)
          <span class='id identifier rubyid_b_id'>b_id</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_line'>line</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_hash'>hash</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span><span class='comma'>,</span>
                        <span class='label'>breakpointId:</span> <span class='id identifier rubyid_b_id'>b_id</span><span class='comma'>,</span>
                        <span class='label'>locations:</span> []
        <span class='kw'>else</span>
          <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Unsupported</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.removeBreakpoint</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_b_id'>b_id</span> <span class='op'>=</span> <span class='id identifier rubyid_req'>req</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>breakpointId</span><span class='tstring_end'>&#39;</span></span>)
      <span class='id identifier rubyid_bps'>bps</span> <span class='op'>=</span> <span class='id identifier rubyid_del_bp'><a href="#del_bp-instance_method" title="DEBUGGER__::UI_CDP#del_bp (method)">del_bp</a></span> <span class='id identifier rubyid_bps'>bps</span><span class='comma'>,</span> <span class='id identifier rubyid_b_id'>b_id</span>
      <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.setBreakpointsActive</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_active'>active</span> <span class='op'>=</span> <span class='id identifier rubyid_req'>req</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>active</span><span class='tstring_end'>&#39;</span></span>)
      <span class='kw'>if</span> <span class='id identifier rubyid_active'>active</span>
        <span class='id identifier rubyid_activate_bp'><a href="#activate_bp-instance_method" title="DEBUGGER__::UI_CDP#activate_bp (method)">activate_bp</a></span> <span class='id identifier rubyid_bps'>bps</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_deactivate_bp'><a href="#deactivate_bp-instance_method" title="DEBUGGER__::UI_CDP#deactivate_bp (method)">deactivate_bp</a></span> <span class='comment'># TODO: Change this part because catch breakpoints should not be deactivated.
</span>      <span class='kw'>end</span>
      <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.setPauseOnExceptions</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_state'>state</span> <span class='op'>=</span> <span class='id identifier rubyid_req'>req</span>.<span class='id identifier rubyid_dig'>dig</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>params</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>state</span><span class='tstring_end'>&#39;</span></span>)
      <span class='id identifier rubyid_ex'>ex</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Exception</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>case</span> <span class='id identifier rubyid_state'>state</span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>none</span><span class='tstring_end'>&#39;</span></span>
        <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>config postmortem = false</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_bps'>bps</span> <span class='op'>=</span> <span class='id identifier rubyid_del_bp'><a href="#del_bp-instance_method" title="DEBUGGER__::UI_CDP#del_bp (method)">del_bp</a></span> <span class='id identifier rubyid_bps'>bps</span><span class='comma'>,</span> <span class='id identifier rubyid_ex'>ex</span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>uncaught</span><span class='tstring_end'>&#39;</span></span>
        <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>config postmortem = true</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_bps'>bps</span> <span class='op'>=</span> <span class='id identifier rubyid_del_bp'><a href="#del_bp-instance_method" title="DEBUGGER__::UI_CDP#del_bp (method)">del_bp</a></span> <span class='id identifier rubyid_bps'>bps</span><span class='comma'>,</span> <span class='id identifier rubyid_ex'>ex</span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>all</span><span class='tstring_end'>&#39;</span></span>
        <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>config postmortem = false</span><span class='tstring_end'>&#39;</span></span>
        <span class='const'>SESSION</span>.<span class='id identifier rubyid_add_catch_breakpoint'><a href="../DEBUGGER__.html#add_catch_breakpoint-class_method" title="DEBUGGER__.add_catch_breakpoint (method)">add_catch_breakpoint</a></span> <span class='id identifier rubyid_ex'>ex</span>
        <span class='id identifier rubyid_bps'>bps</span>[<span class='id identifier rubyid_ex'>ex</span>] <span class='op'>=</span> <span class='id identifier rubyid_bps'>bps</span>.<span class='id identifier rubyid_size'>size</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span> <span class='id identifier rubyid_req'>req</span>

    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Debugger.evaluateOnCallFrame</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Runtime.getProperties</span><span class='tstring_end'>&#39;</span></span>
      <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_req'>req</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>rescue</span> <span class='const'><a href="UI_CDP/Detach.html" title="DEBUGGER__::UI_CDP::Detach (class)">Detach</a></span>
  <span class='ivar'>@q_msg</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>continue</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="puts-instance_method">
  <h3 class='signature '>
    #<strong>puts</strong>(result = &#39;&#39;)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L692-L695'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='692' data-end='695'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 692</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_result'>result</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='comment'># STDERR.puts &quot;puts: #{result}&quot;
</span>  <span class='comment'># send_event &#39;output&#39;, category: &#39;stderr&#39;, output: &quot;PUTS!!: &quot; + result.to_s
</span><span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="respond-instance_method">
  <h3 class='signature '>
    #<strong>respond</strong>(req, **res)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Called by the SESSION thread</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L684-L684'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='684' data-end='684'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 684</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_respond'>respond</span> <span class='id identifier rubyid_send_response'><a href="#send_response-instance_method" title="DEBUGGER__::UI_CDP#send_response (method)">send_response</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="respond_fail-instance_method">
  <h3 class='signature '>
    #<strong>respond_fail</strong>(req, **res)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#send_fail_response-instance_method" title="DEBUGGER__::UI_CDP#send_fail_response (method)">#send_fail_response</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L685-L685'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='685' data-end='685'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 685</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='id identifier rubyid_respond_fail'>respond_fail</span> <span class='id identifier rubyid_send_fail_response'><a href="#send_fail_response-instance_method" title="DEBUGGER__::UI_CDP#send_fail_response (method)">send_fail_response</a></span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="send_chrome_response-instance_method">
  <h3 class='signature '>
    #<strong>send_chrome_response</strong>(req)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L205-L240'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='205' data-end='240'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 205</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_send_chrome_response'>send_chrome_response</span> <span class='id identifier rubyid_req'>req</span>
  <span class='ivar'>@repl</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_req'>req</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^GET\s\/json\/version\sHTTP\/1.1</span><span class='regexp_end'>/</span></span>
    <span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> {
      <span class='label'>Browser:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ruby/v</span><span class='embexpr_beg'>#{</span><span class='const'>RUBY_VERSION</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Protocol-Version</span><span class='label_end'>&#39;:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.1</span><span class='tstring_end'>&quot;</span></span>
    }
    <span class='id identifier rubyid_send_http_res'><a href="#send_http_res-instance_method" title="DEBUGGER__::UI_CDP#send_http_res (method)">send_http_res</a></span> <span class='id identifier rubyid_body'>body</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="UI_ServerBase.html" title="DEBUGGER__::UI_ServerBase (class)">UI_ServerBase</a></span><span class='op'>::</span><span class='const'><a href="UI_ServerBase/RetryConnection.html" title="DEBUGGER__::UI_ServerBase::RetryConnection (class)">RetryConnection</a></span>

  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^GET\s\/json\sHTTP\/1.1</span><span class='regexp_end'>/</span></span>
    <span class='ivar'>@uuid</span> <span class='op'>=</span> <span class='ivar'>@uuid</span> <span class='op'>||</span> <span class='const'>SecureRandom</span>.<span class='id identifier rubyid_uuid'>uuid</span>
    <span class='id identifier rubyid_addr'>addr</span> <span class='op'>=</span> <span class='ivar'>@local_addr</span>.<span class='id identifier rubyid_inspect_sockaddr'>inspect_sockaddr</span>
    <span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> [{
      <span class='label'>description:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ruby instance</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>devtoolsFrontendUrl:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>devtools://devtools/bundled/inspector.html?experiments=true&amp;v8only=true&amp;ws=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_addr'>addr</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@uuid</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>id:</span> <span class='ivar'>@uuid</span><span class='comma'>,</span>
      <span class='label'>title:</span> <span class='gvar'>$0</span><span class='comma'>,</span>
      <span class='label'>type:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>node</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>url:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file://</span><span class='embexpr_beg'>#{</span><span class='const'>File</span>.<span class='id identifier rubyid_absolute_path'>absolute_path</span>(<span class='gvar'>$0</span>)<span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='label'>webSocketDebuggerUrl:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ws://</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_addr'>addr</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@uuid</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    }]
    <span class='id identifier rubyid_send_http_res'><a href="#send_http_res-instance_method" title="DEBUGGER__::UI_CDP#send_http_res (method)">send_http_res</a></span> <span class='id identifier rubyid_body'>body</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="UI_ServerBase.html" title="DEBUGGER__::UI_ServerBase (class)">UI_ServerBase</a></span><span class='op'>::</span><span class='const'><a href="UI_ServerBase/RetryConnection.html" title="DEBUGGER__::UI_ServerBase::RetryConnection (class)">RetryConnection</a></span>

  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^GET\s\/(\w{8}-\w{4}-\w{4}-\w{4}-\w{12})\sHTTP\/1.1</span><span class='regexp_end'>/</span></span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Incorrect uuid</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='backref'>$1</span> <span class='op'>==</span> <span class='ivar'>@uuid</span>

    <span class='ivar'>@need_pause_at_first</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='const'><a href="../DEBUGGER__.html#CONFIG-constant" title="DEBUGGER__::CONFIG (constant)">CONFIG</a></span>.<span class='id identifier rubyid_set_config'>set_config</span> <span class='label'>no_color:</span> <span class='kw'>true</span>

    <span class='ivar'>@ws_server</span> <span class='op'>=</span> <span class='const'><a href="UI_CDP/WebSocketServer.html" title="DEBUGGER__::UI_CDP::WebSocketServer (class)">WebSocketServer</a></span>.<span class='id identifier rubyid_new'><a href="UI_CDP/WebSocketServer.html#new-class_method" title="DEBUGGER__::UI_CDP::WebSocketServer.new (method)">new</a></span>(<span class='ivar'>@sock</span>)
    <span class='ivar'>@ws_server</span>.<span class='id identifier rubyid_handshake'>handshake</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="send_event-instance_method">
  <h3 class='signature '>
    #<strong>send_event</strong>(method, **params)  
    <span class='aliases'>Also known as: <span class='names'>#fire_event</span></span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L459-L461'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='459' data-end='461'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 459</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_send_event'>send_event</span> <span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_params'>params</span>
  <span class='ivar'>@ws_server</span>.<span class='id identifier rubyid_send'>send</span> <span class='label'>method:</span> <span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='label'>params:</span> <span class='id identifier rubyid_params'>params</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="send_fail_response-instance_method">
  <h3 class='signature '>
    #<strong>send_fail_response</strong>(req, **res)  
    <span class='aliases'>Also known as: <span class='names'>#respond_fail</span></span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L455-L457'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='455' data-end='457'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 455</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_send_fail_response'>send_fail_response</span> <span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_res'>res</span>
  <span class='ivar'>@ws_server</span>.<span class='id identifier rubyid_send'>send</span> <span class='label'>id:</span> <span class='id identifier rubyid_req'>req</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span>]<span class='comma'>,</span> <span class='label'>error:</span> <span class='id identifier rubyid_res'>res</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="send_http_res-instance_method">
  <h3 class='signature '>
    #<strong>send_http_res</strong>(body)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L242-L246'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='242' data-end='246'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 242</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_send_http_res'>send_http_res</span> <span class='id identifier rubyid_body'>body</span>
  <span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='const'>JSON</span>.<span class='id identifier rubyid_generate'>generate</span> <span class='id identifier rubyid_body'>body</span>
  <span class='id identifier rubyid_header'>header</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HTTP/1.0 200 OK\r\nContent-Type: application/json; charset=UTF-8\r\nCache-Control: no-cache\r\nContent-Length: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_json'>json</span>.<span class='id identifier rubyid_bytesize'>bytesize</span><span class='embexpr_end'>}</span><span class='tstring_content'>\r\n\r\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@sock</span>.<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="DEBUGGER__::UI_CDP#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_header'>header</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_json'>json</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="send_response-instance_method">
  <h3 class='signature '>
    #<strong>send_response</strong>(req, **res)  
    <span class='aliases'>Also known as: <span class='names'>#respond</span></span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L451-L453'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='451' data-end='453'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 451</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_send_response'>send_response</span> <span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_res'>res</span>
  <span class='ivar'>@ws_server</span>.<span class='id identifier rubyid_send'>send</span> <span class='label'>id:</span> <span class='id identifier rubyid_req'>req</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span>]<span class='comma'>,</span> <span class='label'>result:</span> <span class='id identifier rubyid_res'>res</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sock-instance_method">
  <h3 class='signature '>
    #<strong>sock</strong>(skip: false) {|$stderr| ... } 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Yields:</p>
<ul class='yield'>
  <li>
    <span class='type'>($<code>stderr</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/debug/blob/v1.9.1/lib/debug/server_cdp.rb#L688-L690'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='688' data-end='690'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/debug/server_cdp.rb', line 688</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_sock'>sock</span> <span class='label'>skip:</span> <span class='kw'>false</span>
  <span class='kw'>yield</span> <span class='gvar'>$stderr</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>