<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: Process::GID &mdash; Core  Ruby-3.3.10 p183</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Process::GID",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Ruby-3.3.10</a> &raquo; 
      <a href='../'>Core</a> &raquo; 
      <a href='../_index.html#alpha_G'>Index (G)</a> &raquo; 
        <a href="../Process.html" title="Process (module)">Process</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>GID&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: Process::GID</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_10/process.c#L9530'>process.c</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>The <code>GID</code> module contains a collection of module functions which can be used to portably get, set, and switch the current process’s real, effective, and saved group IDs.</p>

  </div>
</div>
</div>
<h2 class='h2_sum' id='class_attribute_summary'>Class Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#re_exchangeable%3F-class_method" title="re_exchangeable? (class method)">.<strong>re_exchangeable?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if the real and effective group IDs of a process may be exchanged on the current platform.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#rid-class_method" title="rid (class method)">.<strong>rid</strong>  &#x21d2; Integer </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="../Process.html#gid-class_method" title="Process.gid (method)">gid</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#sid_available%3F-class_method" title="sid_available? (class method)">.<strong>sid_available?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if the current platform has saved group ID functionality.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_attribute_summary -->

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature mf'>
      <a href="#change_privilege-class_method" title="change_privilege (class method)">.<strong>change_privilege</strong>(group)  &#x21d2; Integer </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Change the current process’s real and effective group ID to that specified by <em>group</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#eid-class_method" title="eid (class method)">.<strong>eid</strong>  &#x21d2; Integer </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="../Process.html#egid-class_method" title="Process.egid (method)">egid</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#from_name-class_method" title="from_name (class method)">.<strong>from_name</strong>(name)  &#x21d2; GID </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Get the group ID by the <em>name</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#grant_privilege-class_method" title="grant_privilege (class method)">.<strong>grant_privilege</strong>(group)  &#x21d2; Integer </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set the effective group ID, and if possible, the saved group ID of the process to the given <em>group</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#re_exchange-class_method" title="re_exchange (class method)">.<strong>re_exchange</strong>  &#x21d2; Integer </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Exchange real and effective group IDs and return the new effective group ID.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#switch-class_method" title="switch (class method)">.<strong>switch</strong>  &#x21d2; Integer </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Switch the effective and real group IDs of the current process.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->
<h2 class='y_details'>Class Attribute Details</h2>
<section class='method_details first' id="re_exchangeable?-class_method">
  <h3 class='signature ro  private first'>
    .<strong>re_exchangeable?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>, <span class='mod_func'>mod_func</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if the real and effective group IDs of a process may be exchanged on the current platform.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_10/process.c#L7552-L7562'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='7552' data-end='7562'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'process.c', line 7552</span></pre>
<pre class='code cpp'>

static VALUE
p_gid_exchangeable(VALUE _)
{
#if defined(HAVE_SETRESGID)
    return Qtrue;
#elif defined(HAVE_SETREGID) &amp;&amp; !defined(OBSOLETE_SETREGID)
    return Qtrue;
#else
    return Qfalse;
#endif
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="rid-class_method">
  <h3 class='signature ro  private'>
    .<strong>rid</strong>  &#x21d2; <a href="../Integer.html" title="Integer (class)">Integer</a>  <span class="extras">(<span class='readonly'>readonly</span>, <span class='mod_func'>mod_func</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="../Process.html#gid-class_method" title="Process.gid (method)">Process.gid</a>.</p>

  </div>
</div>

</section>

<section class='method_details' id="sid_available?-class_method">
  <h3 class='signature ro  private'>
    .<strong>sid_available?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>, <span class='mod_func'>mod_func</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if the current platform has saved group ID functionality.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_10/process.c#L7730-L7738'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='7730' data-end='7738'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'process.c', line 7730</span></pre>
<pre class='code cpp'>

static VALUE
p_gid_have_saved_id(VALUE _)
{
#if defined(HAVE_SETRESGID) || defined(HAVE_SETEGID) || defined(_POSIX_SAVED_IDS)
    return Qtrue;
#else
    return Qfalse;
#endif
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="change_privilege-class_method">
  <h3 class='signature private first'>
    .<strong>change_privilege</strong>(group)  &#x21d2; <a href="../Integer.html" title="Integer (class)">Integer</a>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Change the current process’s real and effective group ID to that specified by <em>group</em>. Returns the new group ID. Not available on all platforms.</p>

<pre class="code ruby"><code class="ruby">[<span class='const'><a href="../Process.html" title="Process (module)">Process</a></span>.<span class='id identifier rubyid_gid'><a href="../Process.html#gid-class_method" title="Process.gid (method)">gid</a></span><span class='comma'>,</span> <span class='const'><a href="../Process.html" title="Process (module)">Process</a></span>.<span class='id identifier rubyid_egid'><a href="../Process.html#egid-class_method" title="Process.egid (method)">egid</a></span>]          <span class='comment'>#=&gt; [0, 0]
</span><span class='const'><a href="../Process.html" title="Process (module)">Process</a></span><span class='op'>::</span><span class='const'>GID</span>.<span class='id identifier rubyid_change_privilege'>change_privilege</span>(<span class='int'>33</span>)    <span class='comment'>#=&gt; 33
</span>[<span class='const'><a href="../Process.html" title="Process (module)">Process</a></span>.<span class='id identifier rubyid_gid'><a href="../Process.html#gid-class_method" title="Process.gid (method)">gid</a></span><span class='comma'>,</span> <span class='const'><a href="../Process.html" title="Process (module)">Process</a></span>.<span class='id identifier rubyid_egid'><a href="../Process.html#egid-class_method" title="Process.egid (method)">egid</a></span>]          <span class='comment'>#=&gt; [33, 33]</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_10/process.c#L7068-L7221'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='7068' data-end='7221'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'process.c', line 7068</span></pre>
<pre class='code cpp'>

static VALUE
p_gid_change_privilege(VALUE obj, VALUE id)
{
    rb_gid_t gid;

    check_gid_switch();

    gid = OBJ2GID(id);

    if (geteuid() == 0) { /* root-user */
#if defined(HAVE_SETRESGID)
        if (setresgid(gid, gid, gid) &lt; 0) rb_sys_fail(0);
        SAVED_GROUP_ID = gid;
#elif defined HAVE_SETGID
        if (setgid(gid) &lt; 0) rb_sys_fail(0);
        SAVED_GROUP_ID = gid;
#elif defined(HAVE_SETREGID) &amp;&amp; !defined(OBSOLETE_SETREGID)
        if (getgid() == gid) {
            if (SAVED_GROUP_ID == gid) {
                if (setregid(-1, gid) &lt; 0) rb_sys_fail(0);
            }
            else {
                if (gid == 0) { /* (r,e,s) == (root, y, x) */
                    if (setregid(-1, SAVED_GROUP_ID) &lt; 0) rb_sys_fail(0);
                    if (setregid(SAVED_GROUP_ID, 0) &lt; 0) rb_sys_fail(0);
                    SAVED_GROUP_ID = 0; /* (r,e,s) == (x, root, root) */
                    if (setregid(gid, gid) &lt; 0) rb_sys_fail(0);
                    SAVED_GROUP_ID = gid;
                }
                else { /* (r,e,s) == (z, y, x) */
                    if (setregid(0, 0) &lt; 0) rb_sys_fail(0);
                    SAVED_GROUP_ID = 0;
                    if (setregid(gid, gid) &lt; 0) rb_sys_fail(0);
                    SAVED_GROUP_ID = gid;
                }
            }
        }
        else {
            if (setregid(gid, gid) &lt; 0) rb_sys_fail(0);
            SAVED_GROUP_ID = gid;
        }
#elif defined(HAVE_SETRGID) &amp;&amp; defined (HAVE_SETEGID)
        if (getgid() == gid) {
            if (SAVED_GROUP_ID == gid) {
                if (setegid(gid) &lt; 0) rb_sys_fail(0);
            }
            else {
                if (gid == 0) {
                    if (setegid(gid) &lt; 0) rb_sys_fail(0);
                    if (setrgid(SAVED_GROUP_ID) &lt; 0) rb_sys_fail(0);
                    SAVED_GROUP_ID = 0;
                    if (setrgid(0) &lt; 0) rb_sys_fail(0);
                }
                else {
                    if (setrgid(0) &lt; 0) rb_sys_fail(0);
                    SAVED_GROUP_ID = 0;
                    if (setegid(gid) &lt; 0) rb_sys_fail(0);
                    if (setrgid(gid) &lt; 0) rb_sys_fail(0);
                    SAVED_GROUP_ID = gid;
                }
            }
        }
        else {
            if (setegid(gid) &lt; 0) rb_sys_fail(0);
            if (setrgid(gid) &lt; 0) rb_sys_fail(0);
            SAVED_GROUP_ID = gid;
        }
#else
        rb_notimplement();
#endif
    }
    else { /* unprivileged user */
#if defined(HAVE_SETRESGID)
        if (setresgid((getgid() == gid)? (rb_gid_t)-1: gid,
                      (getegid() == gid)? (rb_gid_t)-1: gid,
                      (SAVED_GROUP_ID == gid)? (rb_gid_t)-1: gid) &lt; 0) rb_sys_fail(0);
        SAVED_GROUP_ID = gid;
#elif defined(HAVE_SETREGID) &amp;&amp; !defined(OBSOLETE_SETREGID)
        if (SAVED_GROUP_ID == gid) {
            if (setregid((getgid() == gid)? (rb_uid_t)-1: gid,
                         (getegid() == gid)? (rb_uid_t)-1: gid) &lt; 0)
                rb_sys_fail(0);
        }
        else if (getgid() != gid) {
            if (setregid(gid, (getegid() == gid)? (rb_uid_t)-1: gid) &lt; 0)
                rb_sys_fail(0);
            SAVED_GROUP_ID = gid;
        }
        else if (/* getgid() == gid &amp;&amp; */ getegid() != gid) {
            if (setregid(getegid(), gid) &lt; 0) rb_sys_fail(0);
            SAVED_GROUP_ID = gid;
            if (setregid(gid, -1) &lt; 0) rb_sys_fail(0);
        }
        else { /* getgid() == gid &amp;&amp; getegid() == gid */
            if (setregid(-1, SAVED_GROUP_ID) &lt; 0) rb_sys_fail(0);
            if (setregid(SAVED_GROUP_ID, gid) &lt; 0) rb_sys_fail(0);
            SAVED_GROUP_ID = gid;
            if (setregid(gid, -1) &lt; 0) rb_sys_fail(0);
        }
#elif defined(HAVE_SETRGID) &amp;&amp; defined(HAVE_SETEGID)
        if (SAVED_GROUP_ID == gid) {
            if (getegid() != gid &amp;&amp; setegid(gid) &lt; 0) rb_sys_fail(0);
            if (getgid() != gid &amp;&amp; setrgid(gid) &lt; 0) rb_sys_fail(0);
        }
        else if (/* SAVED_GROUP_ID != gid &amp;&amp; */ getegid() == gid) {
            if (getgid() != gid) {
                if (setrgid(gid) &lt; 0) rb_sys_fail(0);
                SAVED_GROUP_ID = gid;
            }
            else {
                if (setrgid(SAVED_GROUP_ID) &lt; 0) rb_sys_fail(0);
                SAVED_GROUP_ID = gid;
                if (setrgid(gid) &lt; 0) rb_sys_fail(0);
            }
        }
        else if (/* getegid() != gid &amp;&amp; */ getgid() == gid) {
            if (setegid(gid) &lt; 0) rb_sys_fail(0);
            if (setrgid(SAVED_GROUP_ID) &lt; 0) rb_sys_fail(0);
            SAVED_GROUP_ID = gid;
            if (setrgid(gid) &lt; 0) rb_sys_fail(0);
        }
        else {
            rb_syserr_fail(EPERM, 0);
        }
#elif defined HAVE_44BSD_SETGID
        if (getgid() == gid) {
            /* (r,e,s)==(gid,?,?) ==&gt; (gid,gid,gid) */
            if (setgid(gid) &lt; 0) rb_sys_fail(0);
            SAVED_GROUP_ID = gid;
        }
        else {
            rb_syserr_fail(EPERM, 0);
        }
#elif defined HAVE_SETEGID
        if (getgid() == gid &amp;&amp; SAVED_GROUP_ID == gid) {
            if (setegid(gid) &lt; 0) rb_sys_fail(0);
        }
        else {
            rb_syserr_fail(EPERM, 0);
        }
#elif defined HAVE_SETGID
        if (getgid() == gid &amp;&amp; SAVED_GROUP_ID == gid) {
            if (setgid(gid) &lt; 0) rb_sys_fail(0);
        }
        else {
            rb_syserr_fail(EPERM, 0);
        }
#else
        (void)gid;
        rb_notimplement();
#endif
    }
    return id;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="eid-class_method">
  <h3 class='signature private'>
    .<strong>eid</strong>  &#x21d2; <a href="../Integer.html" title="Integer (class)">Integer</a>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="../Process.html#egid-class_method" title="Process.egid (method)">Process.egid</a>.</p>

  </div>
</div>

</section>

<section class='method_details' id="from_name-class_method">
  <h3 class='signature private'>
    .<strong>from_name</strong>(name)  &#x21d2; <code>GID</code>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get the group ID by the <em>name</em>. If the group is not found, <a href="../ArgumentError.html" title="ArgumentError (class)"><code>::ArgumentError</code></a> will be raised.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../Process.html" title="Process (module)">Process</a></span><span class='op'>::</span><span class='const'>GID</span>.<span class='id identifier rubyid_from_name'>from_name</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>wheel</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'>#=&gt; 0
</span><span class='const'><a href="../Process.html" title="Process (module)">Process</a></span><span class='op'>::</span><span class='const'>GID</span>.<span class='id identifier rubyid_from_name'>from_name</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>nosuchgroup</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'>#=&gt; can&#39;t find group for nosuchgroup (ArgumentError)</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_10/process.c#L6118-L6122'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='6118' data-end='6122'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'process.c', line 6118</span></pre>
<pre class='code cpp'>

static VALUE
p_gid_from_name(VALUE self, VALUE id)
{
    return GIDT2NUM(OBJ2GID(id));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="grant_privilege-class_method">
  <h3 class='signature private'>
    <div class='inline-block'>
      <span class='overload'>.<strong>grant_privilege</strong>(group)  &#x21d2; <a href="../Integer.html" title="Integer (class)">Integer</a>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span></span>
      <span class='overload'>.<strong>eid=</strong>(group)  &#x21d2; <a href="../Integer.html" title="Integer (class)">Integer</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set the effective group ID, and if possible, the saved group ID of the process to the given <em>group</em>. Returns the new effective group ID. Not available on all platforms.</p>

<pre class="code ruby"><code class="ruby">[<span class='const'><a href="../Process.html" title="Process (module)">Process</a></span>.<span class='id identifier rubyid_gid'><a href="../Process.html#gid-class_method" title="Process.gid (method)">gid</a></span><span class='comma'>,</span> <span class='const'><a href="../Process.html" title="Process (module)">Process</a></span>.<span class='id identifier rubyid_egid'><a href="../Process.html#egid-class_method" title="Process.egid (method)">egid</a></span>]          <span class='comment'>#=&gt; [0, 0]
</span><span class='const'><a href="../Process.html" title="Process (module)">Process</a></span><span class='op'>::</span><span class='const'>GID</span>.<span class='id identifier rubyid_grant_privilege'>grant_privilege</span>(<span class='int'>31</span>)     <span class='comment'>#=&gt; 33
</span>[<span class='const'><a href="../Process.html" title="Process (module)">Process</a></span>.<span class='id identifier rubyid_gid'><a href="../Process.html#gid-class_method" title="Process.gid (method)">gid</a></span><span class='comma'>,</span> <span class='const'><a href="../Process.html" title="Process (module)">Process</a></span>.<span class='id identifier rubyid_egid'><a href="../Process.html#egid-class_method" title="Process.egid (method)">egid</a></span>]          <span class='comment'>#=&gt; [0, 33]</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_10/process.c#L7473-L7478'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='7473' data-end='7478'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'process.c', line 7473</span></pre>
<pre class='code cpp'>

static VALUE
p_gid_grant_privilege(VALUE obj, VALUE id)
{
    rb_setegid_core(OBJ2GID(id));
    return id;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="re_exchange-class_method">
  <h3 class='signature private'>
    .<strong>re_exchange</strong>  &#x21d2; <a href="../Integer.html" title="Integer (class)">Integer</a>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Exchange real and effective group IDs and return the new effective group ID. Not available on all platforms.</p>

<pre class="code ruby"><code class="ruby">[<span class='const'><a href="../Process.html" title="Process (module)">Process</a></span>.<span class='id identifier rubyid_gid'><a href="../Process.html#gid-class_method" title="Process.gid (method)">gid</a></span><span class='comma'>,</span> <span class='const'><a href="../Process.html" title="Process (module)">Process</a></span>.<span class='id identifier rubyid_egid'><a href="../Process.html#egid-class_method" title="Process.egid (method)">egid</a></span>]   <span class='comment'>#=&gt; [0, 33]
</span><span class='const'><a href="../Process.html" title="Process (module)">Process</a></span><span class='op'>::</span><span class='const'>GID</span>.<span class='id identifier rubyid_re_exchange'>re_exchange</span>      <span class='comment'>#=&gt; 0
</span>[<span class='const'><a href="../Process.html" title="Process (module)">Process</a></span>.<span class='id identifier rubyid_gid'><a href="../Process.html#gid-class_method" title="Process.gid (method)">gid</a></span><span class='comma'>,</span> <span class='const'><a href="../Process.html" title="Process (module)">Process</a></span>.<span class='id identifier rubyid_egid'><a href="../Process.html#egid-class_method" title="Process.egid (method)">egid</a></span>]   <span class='comment'>#=&gt; [33, 0]</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_10/process.c#L7577-L7602'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='7577' data-end='7602'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'process.c', line 7577</span></pre>
<pre class='code cpp'>

static VALUE
p_gid_exchange(VALUE obj)
{
    rb_gid_t gid;
#if defined(HAVE_SETRESGID) || (defined(HAVE_SETREGID) &amp;&amp; !defined(OBSOLETE_SETREGID))
    rb_gid_t egid;
#endif

    check_gid_switch();

    gid = getgid();
#if defined(HAVE_SETRESGID) || (defined(HAVE_SETREGID) &amp;&amp; !defined(OBSOLETE_SETREGID))
    egid = getegid();
#endif

#if defined(HAVE_SETRESGID)
    if (setresgid(egid, gid, gid) &lt; 0) rb_sys_fail(0);
    SAVED_GROUP_ID = gid;
#elif defined(HAVE_SETREGID) &amp;&amp; !defined(OBSOLETE_SETREGID)
    if (setregid(egid,gid) &lt; 0) rb_sys_fail(0);
    SAVED_GROUP_ID = gid;
#else
    rb_notimplement();
#endif
    return GIDT2NUM(gid);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="switch-class_method">
  <h3 class='signature private'>
    <div class='inline-block'>
      <span class='overload'>.<strong>switch</strong>  &#x21d2; <a href="../Integer.html" title="Integer (class)">Integer</a>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span></span>
      <span class='overload'>.<strong>switch</strong>  &#x21d2; <a href="../Object.html" title="Object (class)">Object</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Switch the effective and real group IDs of the current process. If a <em>block</em> is given, the group IDs will be switched back after the block is executed. Returns the new effective group ID if called without a block, and the return value of the block if one is given.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_10/process.c#L7764-L7799'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='7764' data-end='7799'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'process.c', line 7764</span></pre>
<pre class='code cpp'>

static VALUE
p_gid_switch(VALUE obj)
{
    rb_gid_t gid, egid;

    check_gid_switch();

    gid = getgid();
    egid = getegid();

    if (gid != egid) {
        proc_setegid(obj, GIDT2NUM(gid));
        if (rb_block_given_p()) {
            under_gid_switch = 1;
            return rb_ensure(rb_yield, Qnil, p_gid_sw_ensure, SAVED_GROUP_ID);
        }
        else {
            return GIDT2NUM(egid);
        }
    }
    else if (egid != SAVED_GROUP_ID) {
        proc_setegid(obj, GIDT2NUM(SAVED_GROUP_ID));
        if (rb_block_given_p()) {
            under_gid_switch = 1;
            return rb_ensure(rb_yield, Qnil, p_gid_sw_ensure, egid);
        }
        else {
            return GIDT2NUM(gid);
        }
    }
    else {
        rb_syserr_fail(EPERM, 0);
    }

    UNREACHABLE_RETURN(Qnil);
}
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>