<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: IO &mdash; Core Ruby-3.3.1 p55</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "IO",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../.'>Ruby-3.3.1</a> &raquo; 
      <a href='.'>Core</a> &raquo; 
      <a href='_index.html#alpha_I'>Index (I)</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>IO&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: IO</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="IO/WaitReadable.html" title="IO::WaitReadable (module)"><code>WaitReadable</code></a>,
        <a href="IO/WaitWritable.html" title="IO::WaitWritable (module)"><code>WaitWritable</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a href="IO/Buffer.html" title="IO::Buffer (class)"><code>Buffer</code></a>,
        <a href="IO/EAGAINWaitReadable.html" title="IO::EAGAINWaitReadable (class)"><code>EAGAINWaitReadable</code></a>,
        <a href="IO/EAGAINWaitWritable.html" title="IO::EAGAINWaitWritable (class)"><code>EAGAINWaitWritable</code></a>,
        <a href="IO/EINPROGRESSWaitReadable.html" title="IO::EINPROGRESSWaitReadable (class)"><code>EINPROGRESSWaitReadable</code></a>,
        <a href="IO/EINPROGRESSWaitWritable.html" title="IO::EINPROGRESSWaitWritable (class)"><code>EINPROGRESSWaitWritable</code></a>,
        <a href="IO/EWOULDBLOCKWaitReadable.html" title="IO::EWOULDBLOCKWaitReadable (class)"><code>EWOULDBLOCKWaitReadable</code></a>,
        <a href="IO/EWOULDBLOCKWaitWritable.html" title="IO::EWOULDBLOCKWaitWritable (class)"><code>EWOULDBLOCKWaitWritable</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Exceptions:</div>
      <div class='box_11'>
          <a href="IO/TimeoutError.html" title="IO::TimeoutError (class)"><code>TimeoutError</code></a>      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Subclasses:</div>
        <div class='box_22'>
          <a href="File.html" title="File (class)">File</a>
        </div>
      </td>
    </tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="Enumerable.html" title="Enumerable (module)"><code>::Enumerable</code></a>,
          <a href="File/Constants.html" title="File::Constants (module)"><code>::File::Constants</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L15321'>io.c</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/file.c#L1356'>file.c</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.rb#L1'>io.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>An instance of class IO (commonly called a <em>stream</em>) represents an input/output stream in the underlying operating system. Class IO is the basis for input and output in Ruby.</p>

<p>Class <a href="File.html" title="File (class)"><code>::File</code></a> is the only class in the Ruby core that is a subclass of IO. Some classes in the Ruby standard library are also subclasses of IO; these include TCPSocket and UDPSocket.</p>

<p>The global constant <a href="ARGF.html" title="ARGF (class)"><code>::ARGF</code></a> (also accessible as <code>$&lt;</code>) provides an IO-like stream that allows access to all file paths found in <a href="top-level-namespace.html#ARGV-constant" title="ARGV (constant)">ARGV</a> (or found in <a href="top-level-namespace.html#STDIN-constant" title="STDIN (constant)">STDIN</a> if <a href="top-level-namespace.html#ARGV-constant" title="ARGV (constant)">ARGV</a> is empty). <a href="ARGF.html" title="ARGF (class)"><code>::ARGF</code></a> is not itself a subclass of IO.</p>

<p>Class StringIO provides an IO-like stream that handles a <a href="String.html" title="String (class)"><code>::String</code></a>. StringIO is not itself a subclass of IO.</p>

<p>Important objects based on IO include:</p>
<ul><li>
<p>$stdin.</p>
</li><li>
<p>$stdout.</p>
</li><li>
<p>$stderr.</p>
</li><li>
<p>Instances of class <a href="File.html" title="File (class)"><code>::File</code></a>.</p>
</li></ul>

<p>An instance of IO may be created using:</p>
<ul><li>
<p><a href="#new-class_method" title="IO.new (method)">.new</a>: returns a new IO object for the given integer file descriptor.</p>
</li><li>
<p><a href="#open-class_method" title="IO.open (method)">.open</a>: passes a new IO object to the given block.</p>
</li><li>
<p><a href="#popen-class_method" title="IO.popen (method)">.popen</a>: returns a new IO object that is connected to the $stdin and $stdout of a newly-launched subprocess.</p>
</li><li>
<p><a href="Kernel.html#open-class_method" title="Kernel.open (method)">Kernel.open</a>: Returns a new IO object connected to a given source: stream, file, or subprocess.</p>
</li></ul>

<p>Like a <a href="File.html" title="File (class)"><code>::File</code></a> stream, an IO stream has:</p>
<ul><li>
<p>A read/write mode, which may be read-only, write-only, or read/write; see <code>Read/Write Mode</code>.</p>
</li><li>
<p>A data mode, which may be text-only or binary; see <code>Data Mode</code>.</p>
</li><li>
<p>Internal and external encodings; see <code>Encodings</code>.</p>
</li></ul>

<p>And like other IO streams, it has:</p>
<ul><li>
<p>A position, which determines where in the stream the next read or write is to occur; see <code>Position</code>.</p>
</li><li>
<p>A line number, which is a special, line-oriented, “position” (different from the position mentioned above); see <code>Line Number</code>.</p>
</li></ul>

<h3 id="label-Extension+io-2Fconsole">Extension <code>io/console</code></h3>

<p>Extension <code>io/console</code> provides numerous methods for interacting with the console; requiring it adds numerous methods to class IO.</p>

<h3 id="label-Example+Files">Example Files</h3>

<p>Many examples here use these variables:</p>

<p>
<h3 id="label-English+text+with+newlines.">English text with newlines.</h3>

<p>text = &lt;&lt;~EOT</p>

<pre class="code ruby"><code class="ruby"><span class='const'>First</span> <span class='id identifier rubyid_line'>line</span>
<span class='const'>Second</span> <span class='id identifier rubyid_line'>line</span>

<span class='const'>Fourth</span> <span class='id identifier rubyid_line'>line</span>
<span class='const'>Fifth</span> <span class='id identifier rubyid_line'>line</span></code></pre>

<p>EOT</p>

<h3 id="label-Russian+text.">Russian text.</h3>

<p>russian = “u<code>435 441 442</code>” # =&gt; “тест”</p>

<h3 id="label-Binary+data.">Binary data.</h3>

<p>data = “u9990u9991u9992u9993u9994”</p>

<h3 id="label-Text+file.">Text file.</h3>

<p><code>File.write</code>(‘t.txt’, text)</p>

<h3 id="label-File+with+Russian+text.">File with Russian text.</h3>

<p><code>File.write</code>(‘t.rus’, russian)</p>

<h3 id="label-File+with+binary+data.">File with binary data.</h3>

<p>f = <a href="File.html#new-class_method" title="File.new (method)">File.new</a>(‘t.dat’, ‘wb:UTF-16’) f.write(data) f.close</p>

<h3 id="label-Open+Options">Open Options</h3>

<p>A number of IO methods accept optional keyword arguments that determine how a new stream is to be opened:</p>
<ul><li>
<p><code>:mode</code>: Stream mode.</p>
</li><li>
<p><code>:flags</code>: <a href="Integer.html" title="Integer (class)"><code>::Integer</code></a> file open flags; If <code>mode</code> is also given, the two are bitwise-ORed.</p>
</li><li>
<p><code>:external_encoding</code>: External encoding for the stream.</p>
</li><li>
<p><code>:internal_encoding</code>: Internal encoding for the stream. <code>&#39;-&#39;</code> is a synonym for the default internal encoding. If the value is <code>nil</code> no conversion occurs.</p>
</li><li>
<p><code>:encoding</code>: Specifies external and internal encodings as <code>&#39;extern:intern&#39;</code>.</p>
</li><li>
<p><code>:textmode</code>: If a truthy value, specifies the mode as text-only, binary otherwise.</p>
</li><li>
<p><code>:binmode</code>: If a truthy value, specifies the mode as binary, text-only otherwise.</p>
</li><li>
<p><code>:autoclose</code>: If a truthy value, specifies that the <code>fd</code> will close when the stream closes; otherwise it remains open.</p>
</li><li>
<p><code>:path:</code> If a string value is provided, it is used in <a href="#inspect-instance_method" title="IO#inspect (method)">#inspect</a> and is available as #path method.</p>
</li></ul>

<p>Also available are the options offered in <a href="String.html#encode-instance_method" title="String#encode (method)">String#encode</a>, which may control conversion between external and internal encoding.</p>

<h3 id="label-Basic+IO">Basic IO</h3>

<p>You can perform basic stream IO with these methods, which typically operate on multi-byte strings:</p>
<ul><li>
<p><a href="#read-instance_method" title="IO#read (method)">#read</a>: Reads and returns some or all of the remaining bytes from the stream.</p>
</li><li>
<p><a href="#write-instance_method" title="IO#write (method)">#write</a>: Writes zero or more strings to the stream; each given object that is not already a string is converted via <code>to_s</code>.</p>
</li></ul>

<h4 id="label-Position">Position</h4>

<p>An IO stream has a nonnegative integer <em>position</em>, which is the byte offset at which the next read or write is to occur. A new stream has position zero (and line number zero); method <a href="#rewind-instance_method" title="IO#rewind (method)">#rewind</a> resets the position (and line number) to zero.</p>

<p>The relevant methods:</p>
<ul><li>
<p><a href="#tell-instance_method" title="IO#tell (method)">#tell</a> (aliased as <a href="#pos-instance_method" title="IO#pos (method)">#pos</a>): Returns the current position (in bytes) in the stream.</p>
</li><li>
<p><a href="#pos=-instance_method" title="IO#pos= (method)">#pos=</a>: Sets the position of the stream to a given integer <code>new_position</code> (in bytes).</p>
</li><li>
<p><a href="#seek-instance_method" title="IO#seek (method)">#seek</a>: Sets the position of the stream to a given integer <code>offset</code> (in bytes), relative to a given position <code>whence</code> (indicating the beginning, end, or current position).</p>
</li><li>
<p><a href="#rewind-instance_method" title="IO#rewind (method)">#rewind</a>: Positions the stream at the beginning (also resetting the line number).</p>
</li></ul>

<h4 id="label-Open+and+Closed+Streams">Open and Closed Streams</h4>

<p>A new IO stream may be open for reading, open for writing, or both.</p>

<p>A stream is automatically closed when claimed by the garbage collector.</p>

<p>Attempted reading or writing on a closed stream raises an exception.</p>

<p>The relevant methods:</p>
<ul><li>
<p><a href="#close-instance_method" title="IO#close (method)">#close</a>: Closes the stream for both reading and writing.</p>
</li><li>
<p><a href="#close_read-instance_method" title="IO#close_read (method)">#close_read</a>: Closes the stream for reading.</p>
</li><li>
<p><a href="#close_write-instance_method" title="IO#close_write (method)">#close_write</a>: Closes the stream for writing.</p>
</li><li>
<p><a href="#closed%3F-instance_method" title="IO#closed? (method)">#closed?</a>: Returns whether the stream is closed.</p>
</li></ul>

<h4 id="label-End-of-Stream">End-of-Stream</h4>

<p>You can query whether a stream is positioned at its end:</p>
<ul><li>
<p><a href="#eof%3F-instance_method" title="IO#eof? (method)">#eof?</a> (also aliased as <a href="#eof-instance_method" title="IO#eof (method)">#eof</a>): Returns whether the stream is at end-of-stream.</p>
</li></ul>

<p>You can reposition to end-of-stream by using method <a href="#seek-instance_method" title="IO#seek (method)">#seek</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_eof?'><a href="#eof%3F-instance_method" title="IO#eof? (method)">eof?</a></span> <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_seek'><a href="#seek-instance_method" title="IO#seek (method)">seek</a></span>(<span class='int'>0</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='kw'>END</span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_eof?'><a href="#eof%3F-instance_method" title="IO#eof? (method)">eof?</a></span> <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Or by reading all stream content (which is slower than using <a href="#seek-instance_method" title="IO#seek (method)">#seek</a>):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_rewind'><a href="#rewind-instance_method" title="IO#rewind (method)">rewind</a></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_eof?'><a href="#eof%3F-instance_method" title="IO#eof? (method)">eof?</a></span> <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span> <span class='comment'># =&gt; &quot;First line\nSecond line\n\nFourth line\nFifth line\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_eof?'><a href="#eof%3F-instance_method" title="IO#eof? (method)">eof?</a></span> <span class='comment'># =&gt; true</span></code></pre>

<h3 id="label-Line+IO">Line IO</h3>

<p>You can read an IO stream line-by-line using these methods:</p>
<ul><li>
<p><a href="#each_line-instance_method" title="IO#each_line (method)">#each_line</a>: Reads each remaining line, passing it to the given block.</p>
</li><li>
<p><a href="#gets-instance_method" title="IO#gets (method)">#gets</a>: Returns the next line.</p>
</li><li>
<p><a href="#readline-instance_method" title="IO#readline (method)">#readline</a>: Like <a href="#gets-instance_method" title="IO#gets (method)">#gets</a>, but raises an exception at end-of-stream.</p>
</li><li>
<p><a href="#readlines-instance_method" title="IO#readlines (method)">#readlines</a>: Returns all remaining lines in an array.</p>
</li></ul>

<p>Each of these reader methods accepts:</p>
<ul><li>
<p>An optional line separator, <code>sep</code>; see <code>Line Separator</code>.</p>
</li><li>
<p>An optional line-size limit, <code>limit</code>; see <code>Line Limit</code>.</p>
</li></ul>

<p>For each of these reader methods, reading may begin mid-line, depending on the stream’s position; see <code>Position</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="IO#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>27</span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_each_line'><a href="#each_line-instance_method" title="IO#each_line (method)">each_line</a></span> {<span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_line'>line</span> }
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rth line\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Fifth line\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>You can write to an IO stream line-by-line using this method:</p>
<ul><li>
<p><a href="#puts-instance_method" title="IO#puts (method)">#puts</a>: Writes objects to the stream.</p>
</li></ul>

<h4 id="label-Line+Separator">Line Separator</h4>

<p>Each of these methods uses a <em>line separator</em>, which is the string that delimits lines:</p>
<ul><li>
<p><a href="#foreach-class_method" title="IO.foreach (method)">.foreach</a>.</p>
</li><li>
<p><a href="#readlines-class_method" title="IO.readlines (method)">.readlines</a>.</p>
</li><li>
<p><a href="#each_line-instance_method" title="IO#each_line (method)">#each_line</a>.</p>
</li><li>
<p><a href="#gets-instance_method" title="IO#gets (method)">#gets</a>.</p>
</li><li>
<p><a href="#readline-instance_method" title="IO#readline (method)">#readline</a>.</p>
</li><li>
<p><a href="#readlines-instance_method" title="IO#readlines (method)">#readlines</a>.</p>
</li></ul>

<p>The default line separator is the given by the global variable <code>$/</code>, whose value is by default <code>&quot;\n&quot;</code>. The line to be read next is all data from the current position to the next line separator:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span> <span class='comment'># =&gt; &quot;First line\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span> <span class='comment'># =&gt; &quot;Second line\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span> <span class='comment'># =&gt; &quot;\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span> <span class='comment'># =&gt; &quot;Fourth line\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span> <span class='comment'># =&gt; &quot;Fifth line\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>You can specify a different line separator:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>l</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; &quot;First l&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>li</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; &quot;ine\nSecond li&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lin</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;ne\n\nFourth lin&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>        <span class='comment'># =&gt; &quot;e\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>There are two special line separators:</p>
<ul><li>
<p><code>nil</code>: The entire stream is read into a single string:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>(<span class='kw'>nil</span>) <span class='comment'># =&gt; &quot;First line\nSecond line\n\nFourth line\nFifth line\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>
</li><li>
<p><code>&#39;&#39;</code> (the empty string): The next “paragraph” is read (paragraphs being separated by two consecutive line separators):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;First line\nSecond line\n\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;Fourth line\nFifth line\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>
</li></ul>

<h4 id="label-Line+Limit">Line Limit</h4>

<p>Each of these methods uses a <em>line limit</em>, which specifies that the number of bytes returned may not be (much) longer than the given <code>limit</code>;</p>
<ul><li>
<p><a href="#foreach-class_method" title="IO.foreach (method)">.foreach</a>.</p>
</li><li>
<p><a href="#readlines-class_method" title="IO.readlines (method)">.readlines</a>.</p>
</li><li>
<p><a href="#each_line-instance_method" title="IO#each_line (method)">#each_line</a>.</p>
</li><li>
<p><a href="#gets-instance_method" title="IO#gets (method)">#gets</a>.</p>
</li><li>
<p><a href="#readline-instance_method" title="IO#readline (method)">#readline</a>.</p>
</li><li>
<p><a href="#readlines-instance_method" title="IO#readlines (method)">#readlines</a>.</p>
</li></ul>

<p>A multi-byte character will not be split, and so a line may be slightly longer than the given limit.</p>

<p>If <code>limit</code> is not given, the line is determined only by <code>sep</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Text with 1-byte characters.
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>(<span class='int'>1</span>) }  <span class='comment'># =&gt; &quot;F&quot;
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>(<span class='int'>2</span>) }  <span class='comment'># =&gt; &quot;Fi&quot;
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>(<span class='int'>3</span>) }  <span class='comment'># =&gt; &quot;Fir&quot;
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>(<span class='int'>4</span>) }  <span class='comment'># =&gt; &quot;Firs&quot;
</span><span class='comment'># No more than one line.
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>(<span class='int'>10</span>) } <span class='comment'># =&gt; &quot;First line&quot;
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>(<span class='int'>11</span>) } <span class='comment'># =&gt; &quot;First line\n&quot;
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>(<span class='int'>12</span>) } <span class='comment'># =&gt; &quot;First line\n&quot;
</span>
<span class='comment'># Text with 2-byte characters, which will not be split.
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.rus</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>(<span class='int'>1</span>).<span class='id identifier rubyid_size'>size</span> } <span class='comment'># =&gt; 1
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.rus</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>(<span class='int'>2</span>).<span class='id identifier rubyid_size'>size</span> } <span class='comment'># =&gt; 1
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.rus</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>(<span class='int'>3</span>).<span class='id identifier rubyid_size'>size</span> } <span class='comment'># =&gt; 2
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.rus</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>(<span class='int'>4</span>).<span class='id identifier rubyid_size'>size</span> } <span class='comment'># =&gt; 2</span></code></pre>

<h4 id="label-Line+Separator+and+Line+Limit">Line Separator and Line Limit</h4>

<p>With arguments <code>sep</code> and <code>limit</code> given, combines the two behaviors:</p>
<ul><li>
<p>Returns the next line as determined by line separator <code>sep</code>.</p>
</li><li>
<p>But returns no more bytes than are allowed by the limit.</p>
</li></ul>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>li</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>20</span>) } <span class='comment'># =&gt; &quot;First li&quot;
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>li</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>2</span>) }  <span class='comment'># =&gt; &quot;Fi&quot;</span></code></pre>

<h4 id="label-Line+Number">Line Number</h4>

<p>A readable IO stream has a non-negative integer <em>line number</em>.</p>

<p>The relevant methods:</p>
<ul><li>
<p><a href="#lineno-instance_method" title="IO#lineno (method)">#lineno</a>: Returns the line number.</p>
</li><li>
<p><a href="#lineno=-instance_method" title="IO#lineno= (method)">#lineno=</a>: Resets and returns the line number.</p>
</li></ul>

<p>Unless modified by a call to method <a href="#lineno=-instance_method" title="IO#lineno= (method)">#lineno=</a>, the line number is the number of lines read by certain line-oriented methods, according to the given line separator <code>sep</code>:</p>
<ul><li>
<p><a href="#foreach-class_method" title="IO.foreach (method)">.foreach</a>: Increments the line number on each call to the block.</p>
</li><li>
<p><a href="#each_line-instance_method" title="IO#each_line (method)">#each_line</a>: Increments the line number on each call to the block.</p>
</li><li>
<p><a href="#gets-instance_method" title="IO#gets (method)">#gets</a>: Increments the line number.</p>
</li><li>
<p><a href="#readline-instance_method" title="IO#readline (method)">#readline</a>: Increments the line number.</p>
</li><li>
<p><a href="#readlines-instance_method" title="IO#readlines (method)">#readlines</a>: Increments the line number for each line read.</p>
</li></ul>

<p>A new stream is initially has line number zero (and position zero); method <a href="#rewind-instance_method" title="IO#rewind (method)">#rewind</a> resets the line number (and position) to zero:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="IO#lineno (method)">lineno</a></span> <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>   <span class='comment'># =&gt; &quot;First line\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="IO#lineno (method)">lineno</a></span> <span class='comment'># =&gt; 1
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_rewind'><a href="#rewind-instance_method" title="IO#rewind (method)">rewind</a></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="IO#lineno (method)">lineno</a></span> <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Reading lines from a stream usually changes its line number:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="IO#lineno (method)">lineno</a></span>   <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readline'><a href="#readline-instance_method" title="IO#readline (method)">readline</a></span> <span class='comment'># =&gt; &quot;This is line one.\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="IO#lineno (method)">lineno</a></span>   <span class='comment'># =&gt; 1
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readline'><a href="#readline-instance_method" title="IO#readline (method)">readline</a></span> <span class='comment'># =&gt; &quot;This is the second line.\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="IO#lineno (method)">lineno</a></span>   <span class='comment'># =&gt; 2
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readline'><a href="#readline-instance_method" title="IO#readline (method)">readline</a></span> <span class='comment'># =&gt; &quot;Here&#39;s the third line.\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="IO#lineno (method)">lineno</a></span>   <span class='comment'># =&gt; 3
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_eof?'><a href="#eof%3F-instance_method" title="IO#eof? (method)">eof?</a></span>     <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Iterating over lines in a stream usually changes its line number:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
  <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_each_line'><a href="#each_line-instance_method" title="IO#each_line (method)">each_line</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
    <span class='id identifier rubyid_p'>p</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>position=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="IO#pos (method)">pos</a></span><span class='embexpr_end'>}</span><span class='tstring_content'> eof?=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_eof?'><a href="#eof%3F-instance_method" title="IO#eof? (method)">eof?</a></span><span class='embexpr_end'>}</span><span class='tstring_content'> lineno=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="IO#lineno (method)">lineno</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>position=11 eof?=false lineno=1</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>position=23 eof?=false lineno=2</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>position=24 eof?=false lineno=3</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>position=36 eof?=false lineno=4</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>position=47 eof?=true lineno=5</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>Unlike the stream’s <code>position</code>, the line number does not affect where the next read or write will occur:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="IO#lineno (method)">lineno</a></span> <span class='op'>=</span> <span class='int'>1000</span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="IO#lineno (method)">lineno</a></span> <span class='comment'># =&gt; 1000
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>   <span class='comment'># =&gt; &quot;First line\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="IO#lineno (method)">lineno</a></span> <span class='comment'># =&gt; 1001
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Associated with the line number is the global variable <code>$.</code>:</p>
<ul><li>
<p>When a stream is opened, <code>$.</code> is not set; its value is left over from previous activity in the process:</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$.</span> <span class='op'>=</span> <span class='int'>41</span>
<span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='gvar'>$.</span> <span class='op'>=</span> <span class='int'>41</span>
<span class='comment'># =&gt; 41
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>
</li><li>
<p>When a stream is read, <code>$.</code> is set to the line number for that stream:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f0'>f0</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f1'>f1</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.dat</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f0'>f0</span>.<span class='id identifier rubyid_readlines'><a href="#readlines-class_method" title="IO.readlines (method)">readlines</a></span> <span class='comment'># =&gt; [&quot;First line\n&quot;, &quot;Second line\n&quot;, &quot;\n&quot;, &quot;Fourth line\n&quot;, &quot;Fifth line\n&quot;]
</span><span class='gvar'>$.</span>           <span class='comment'># =&gt; 5
</span><span class='id identifier rubyid_f1'>f1</span>.<span class='id identifier rubyid_readlines'><a href="#readlines-class_method" title="IO.readlines (method)">readlines</a></span> <span class='comment'># =&gt; [&quot;\xFE\xFF\x99\x90\x99\x91\x99\x92\x99\x93\x99\x94&quot;]
</span><span class='gvar'>$.</span>           <span class='comment'># =&gt; 1
</span><span class='id identifier rubyid_f0'>f0</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>
<span class='id identifier rubyid_f1'>f1</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>
</li><li>
<p>Methods <a href="#rewind-instance_method" title="IO#rewind (method)">#rewind</a> and <a href="#seek-instance_method" title="IO#seek (method)">#seek</a> do not affect <code>$.</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readlines'><a href="#readlines-class_method" title="IO.readlines (method)">readlines</a></span> <span class='comment'># =&gt; [&quot;First line\n&quot;, &quot;Second line\n&quot;, &quot;\n&quot;, &quot;Fourth line\n&quot;, &quot;Fifth line\n&quot;]
</span><span class='gvar'>$.</span>          <span class='comment'># =&gt; 5
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_rewind'><a href="#rewind-instance_method" title="IO#rewind (method)">rewind</a></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_seek'><a href="#seek-instance_method" title="IO#seek (method)">seek</a></span>(<span class='int'>0</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='const'>SET</span>)
<span class='gvar'>$.</span>          <span class='comment'># =&gt; 5
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>
</li></ul>

<h3 id="label-Character+IO">Character IO</h3>

<p>You can process an IO stream character-by-character using these methods:</p>
<ul><li>
<p><a href="#getc-instance_method" title="IO#getc (method)">#getc</a>: Reads and returns the next character from the stream.</p>
</li><li>
<p><a href="#readchar-instance_method" title="IO#readchar (method)">#readchar</a>: Like <a href="#getc-instance_method" title="IO#getc (method)">#getc</a>, but raises an exception at end-of-stream.</p>
</li><li>
<p><a href="#ungetc-instance_method" title="IO#ungetc (method)">#ungetc</a>: Pushes back (“unshifts”) a character or integer onto the stream.</p>
</li><li>
<p><a href="#putc-instance_method" title="IO#putc (method)">#putc</a>: Writes a character to the stream.</p>
</li><li>
<p><a href="#each_char-instance_method" title="IO#each_char (method)">#each_char</a>: Reads each remaining character in the stream, passing the character to the given block.</p>
</li></ul>

<h3 id="label-Byte+IO">Byte IO</h3>

<p>You can process an IO stream byte-by-byte using these methods:</p>
<ul><li>
<p><a href="#getbyte-instance_method" title="IO#getbyte (method)">#getbyte</a>: Returns the next 8-bit byte as an integer in range 0..255.</p>
</li><li>
<p><a href="#readbyte-instance_method" title="IO#readbyte (method)">#readbyte</a>: Like <a href="#getbyte-instance_method" title="IO#getbyte (method)">#getbyte</a>, but raises an exception if at end-of-stream.</p>
</li><li>
<p><a href="#ungetbyte-instance_method" title="IO#ungetbyte (method)">#ungetbyte</a>: Pushes back (“unshifts”) a byte back onto the stream.</p>
</li><li>
<p><a href="#each_byte-instance_method" title="IO#each_byte (method)">#each_byte</a>: Reads each remaining byte in the stream, passing the byte to the given block.</p>
</li></ul>

<h3 id="label-Codepoint+IO">Codepoint IO</h3>

<p>You can process an IO stream codepoint-by-codepoint:</p>
<ul><li>
<p><a href="#each_codepoint-instance_method" title="IO#each_codepoint (method)">#each_codepoint</a>: Reads each remaining codepoint, passing it to the given block.</p>
</li></ul>

<h3 id="label-What-27s+Here">What’s Here</h3>

<p>First, what’s elsewhere. Class IO:</p>
<ul><li>
<p>Inherits from <code>class Object</code>.</p>
</li><li>
<p>Includes <code>module Enumerable</code>, which provides dozens of additional methods.</p>
</li></ul>

<p>Here, class IO provides methods that are useful for:</p>
<ul><li>
<p><code>Creating</code></p>
</li><li>
<p><code>Reading</code></p>
</li><li>
<p><code>Writing</code></p>
</li><li>
<p><code>Positioning</code></p>
</li><li>
<p><code>Iterating</code></p>
</li><li>
<p><code>Settings</code></p>
</li><li>
<p><code>Querying</code></p>
</li><li>
<p><code>Buffering</code></p>
</li><li>
<p><code>Low-Level Access</code></p>
</li><li>
<p><code>Other</code></p>
</li></ul>

<h4 id="label-Creating">Creating</h4>
<ul><li>
<p><a href="#new-class_method" title="IO.new (method)">.new</a> (aliased as <a href="#for_fd-class_method" title="IO.for_fd (method)">.for_fd</a>): Creates and returns a new IO object for the given integer file descriptor.</p>
</li><li>
<p><a href="#open-class_method" title="IO.open (method)">.open</a>: Creates a new IO object.</p>
</li><li>
<p><a href="#pipe-class_method" title="IO.pipe (method)">.pipe</a>: Creates a connected pair of reader and writer IO objects.</p>
</li><li>
<p><a href="#popen-class_method" title="IO.popen (method)">.popen</a>: Creates an IO object to interact with a subprocess.</p>
</li><li>
<p><a href="#select-class_method" title="IO.select (method)">.select</a>: Selects which given IO instances are ready for reading, writing, or have pending exceptions.</p>
</li></ul>

<h4 id="label-Reading">Reading</h4>
<ul><li>
<p><a href="#binread-class_method" title="IO.binread (method)">.binread</a>: Returns a binary string with all or a subset of bytes from the given file.</p>
</li><li>
<p><a href="#read-class_method" title="IO.read (method)">.read</a>: Returns a string with all or a subset of bytes from the given file.</p>
</li><li>
<p><a href="#readlines-class_method" title="IO.readlines (method)">.readlines</a>: Returns an array of strings, which are the lines from the given file.</p>
</li><li>
<p><a href="#getbyte-instance_method" title="IO#getbyte (method)">#getbyte</a>: Returns the next 8-bit byte read from <code>self</code> as an integer.</p>
</li><li>
<p><a href="#getc-instance_method" title="IO#getc (method)">#getc</a>: Returns the next character read from <code>self</code> as a string.</p>
</li><li>
<p><a href="#gets-instance_method" title="IO#gets (method)">#gets</a>: Returns the line read from <code>self</code>.</p>
</li><li>
<p><a href="#pread-instance_method" title="IO#pread (method)">#pread</a>: Returns all or the next <em>n</em> bytes read from <code>self</code>, not updating the receiver’s offset.</p>
</li><li>
<p><a href="#read-instance_method" title="IO#read (method)">#read</a>: Returns all remaining or the next <em>n</em> bytes read from <code>self</code> for a given <em>n</em>.</p>
</li><li>
<p><a href="#read_nonblock-instance_method" title="IO#read_nonblock (method)">#read_nonblock</a>: the next <em>n</em> bytes read from <code>self</code> for a given <em>n</em>, in non-block mode.</p>
</li><li>
<p><a href="#readbyte-instance_method" title="IO#readbyte (method)">#readbyte</a>: Returns the next byte read from <code>self</code>; same as #getbyte, but raises an exception on end-of-stream.</p>
</li><li>
<p><a href="#readchar-instance_method" title="IO#readchar (method)">#readchar</a>: Returns the next character read from <code>self</code>; same as #getc, but raises an exception on end-of-stream.</p>
</li><li>
<p><a href="#readline-instance_method" title="IO#readline (method)">#readline</a>: Returns the next line read from <code>self</code>; same as #getline, but raises an exception of end-of-stream.</p>
</li><li>
<p><a href="#readlines-instance_method" title="IO#readlines (method)">#readlines</a>: Returns an array of all lines read read from <code>self</code>.</p>
</li><li>
<p><a href="#readpartial-instance_method" title="IO#readpartial (method)">#readpartial</a>: Returns up to the given number of bytes from <code>self</code>.</p>
</li></ul>

<h4 id="label-Writing">Writing</h4>
<ul><li>
<p><a href="#binwrite-class_method" title="IO.binwrite (method)">.binwrite</a>: Writes the given string to the file at the given filepath, in binary mode.</p>
</li><li>
<p><a href="#write-class_method" title="IO.write (method)">.write</a>: Writes the given string to <code>self</code>.</p>
</li><li>
<p><a href="#<<-instance_method" title="IO#&lt;&lt; (method)">#&lt;&lt;</a>: Appends the given string to <code>self</code>.</p>
</li><li>
<p><a href="#print-instance_method" title="IO#print (method)">#print</a>: Prints last read line or given objects to <code>self</code>.</p>
</li><li>
<p><a href="#printf-instance_method" title="IO#printf (method)">#printf</a>: Writes to <code>self</code> based on the given format string and objects.</p>
</li><li>
<p><a href="#putc-instance_method" title="IO#putc (method)">#putc</a>: Writes a character to <code>self</code>.</p>
</li><li>
<p><a href="#puts-instance_method" title="IO#puts (method)">#puts</a>: Writes lines to <code>self</code>, making sure line ends with a newline.</p>
</li><li>
<p><a href="#pwrite-instance_method" title="IO#pwrite (method)">#pwrite</a>: Writes the given string at the given offset, not updating the receiver’s offset.</p>
</li><li>
<p><a href="#write-instance_method" title="IO#write (method)">#write</a>: Writes one or more given strings to <code>self</code>.</p>
</li><li>
<p><a href="#write_nonblock-instance_method" title="IO#write_nonblock (method)">#write_nonblock</a>: Writes one or more given strings to <code>self</code> in non-blocking mode.</p>
</li></ul>

<h4 id="label-Positioning">Positioning</h4>
<ul><li>
<p><a href="#lineno-instance_method" title="IO#lineno (method)">#lineno</a>: Returns the current line number in <code>self</code>.</p>
</li><li>
<p><a href="#lineno=-instance_method" title="IO#lineno= (method)">#lineno=</a>: Sets the line number is <code>self</code>.</p>
</li><li>
<p><a href="#pos-instance_method" title="IO#pos (method)">#pos</a> (aliased as <a href="#tell-instance_method" title="IO#tell (method)">#tell</a>): Returns the current byte offset in <code>self</code>.</p>
</li><li>
<p><a href="#pos=-instance_method" title="IO#pos= (method)">#pos=</a>: Sets the byte offset in <code>self</code>.</p>
</li><li>
<p><a href="#reopen-instance_method" title="IO#reopen (method)">#reopen</a>: Reassociates <code>self</code> with a new or existing IO stream.</p>
</li><li>
<p><a href="#rewind-instance_method" title="IO#rewind (method)">#rewind</a>: Positions <code>self</code> to the beginning of input.</p>
</li><li>
<p><a href="#seek-instance_method" title="IO#seek (method)">#seek</a>: Sets the offset for <code>self</code> relative to given position.</p>
</li></ul>

<h4 id="label-Iterating">Iterating</h4>
<ul><li>
<p><a href="#foreach-class_method" title="IO.foreach (method)">.foreach</a>: Yields each line of given file to the block.</p>
</li><li>
<p><a href="#each-instance_method" title="IO#each (method)">#each</a> (aliased as <a href="#each_line-instance_method" title="IO#each_line (method)">#each_line</a>): Calls the given block with each successive line in <code>self</code>.</p>
</li><li>
<p><a href="#each_byte-instance_method" title="IO#each_byte (method)">#each_byte</a>: Calls the given block with each successive byte in <code>self</code> as an integer.</p>
</li><li>
<p><a href="#each_char-instance_method" title="IO#each_char (method)">#each_char</a>: Calls the given block with each successive character in <code>self</code> as a string.</p>
</li><li>
<p><a href="#each_codepoint-instance_method" title="IO#each_codepoint (method)">#each_codepoint</a>: Calls the given block with each successive codepoint in <code>self</code> as an integer.</p>
</li></ul>

<h4 id="label-Settings">Settings</h4>
<ul><li>
<p><a href="#autoclose=-instance_method" title="IO#autoclose= (method)">#autoclose=</a>: Sets whether <code>self</code> auto-closes.</p>
</li><li>
<p><a href="#binmode-instance_method" title="IO#binmode (method)">#binmode</a>: Sets <code>self</code> to binary mode.</p>
</li><li>
<p><a href="#close-instance_method" title="IO#close (method)">#close</a>: Closes <code>self</code>.</p>
</li><li>
<p><a href="#close_on_exec=-instance_method" title="IO#close_on_exec= (method)">#close_on_exec=</a>: Sets the close-on-exec flag.</p>
</li><li>
<p><a href="#close_read-instance_method" title="IO#close_read (method)">#close_read</a>: Closes <code>self</code> for reading.</p>
</li><li>
<p><a href="#close_write-instance_method" title="IO#close_write (method)">#close_write</a>: Closes <code>self</code> for writing.</p>
</li><li>
<p><a href="#set_encoding-instance_method" title="IO#set_encoding (method)">#set_encoding</a>: Sets the encoding for <code>self</code>.</p>
</li><li>
<p><a href="#set_encoding_by_bom-instance_method" title="IO#set_encoding_by_bom (method)">#set_encoding_by_bom</a>: Sets the encoding for <code>self</code>, based on its Unicode byte-order-mark.</p>
</li><li>
<p><a href="#sync=-instance_method" title="IO#sync= (method)">#sync=</a>: Sets the sync-mode to the given value.</p>
</li></ul>

<h4 id="label-Querying">Querying</h4>
<ul><li>
<p><a href="#autoclose%3F-instance_method" title="IO#autoclose? (method)">#autoclose?</a>: Returns whether <code>self</code> auto-closes.</p>
</li><li>
<p><a href="#binmode%3F-instance_method" title="IO#binmode? (method)">#binmode?</a>: Returns whether <code>self</code> is in binary mode.</p>
</li><li>
<p><a href="#close_on_exec%3F-instance_method" title="IO#close_on_exec? (method)">#close_on_exec?</a>: Returns the close-on-exec flag for <code>self</code>.</p>
</li><li>
<p><a href="#closed%3F-instance_method" title="IO#closed? (method)">#closed?</a>: Returns whether <code>self</code> is closed.</p>
</li><li>
<p><a href="#eof%3F-instance_method" title="IO#eof? (method)">#eof?</a> (aliased as <a href="#eof-instance_method" title="IO#eof (method)">#eof</a>): Returns whether <code>self</code> is at end-of-stream.</p>
</li><li>
<p><a href="#external_encoding-instance_method" title="IO#external_encoding (method)">#external_encoding</a>: Returns the external encoding object for <code>self</code>.</p>
</li><li>
<p><a href="#fileno-instance_method" title="IO#fileno (method)">#fileno</a> (aliased as <a href="#to_i-instance_method" title="IO#to_i (method)">#to_i</a>): Returns the integer file descriptor for <code>self</code></p>
</li><li>
<p><a href="#internal_encoding-instance_method" title="IO#internal_encoding (method)">#internal_encoding</a>: Returns the internal encoding object for <code>self</code>.</p>
</li><li>
<p><a href="#pid-instance_method" title="IO#pid (method)">#pid</a>: Returns the process ID of a child process associated with <code>self</code>, if <code>self</code> was created by ::popen.</p>
</li><li>
<p><a href="#stat-instance_method" title="IO#stat (method)">#stat</a>: Returns the <a href="File/Stat.html" title="File::Stat (class)"><code>::File::Stat</code></a> object containing status information for <code>self</code>.</p>
</li><li>
<p><a href="#sync-instance_method" title="IO#sync (method)">#sync</a>: Returns whether <code>self</code> is in sync-mode.</p>
</li><li>
<p><a href="#tty%3F-instance_method" title="IO#tty? (method)">#tty?</a> (aliased as <a href="#isatty-instance_method" title="IO#isatty (method)">#isatty</a>): Returns whether <code>self</code> is a terminal.</p>
</li></ul>

<h4 id="label-Buffering">Buffering</h4>
<ul><li>
<p><a href="#fdatasync-instance_method" title="IO#fdatasync (method)">#fdatasync</a>: Immediately writes all buffered data in <code>self</code> to disk.</p>
</li><li>
<p><a href="#flush-instance_method" title="IO#flush (method)">#flush</a>: Flushes any buffered data within <code>self</code> to the underlying operating system.</p>
</li><li>
<p><a href="#fsync-instance_method" title="IO#fsync (method)">#fsync</a>: Immediately writes all buffered data and attributes in <code>self</code> to disk.</p>
</li><li>
<p><a href="#ungetbyte-instance_method" title="IO#ungetbyte (method)">#ungetbyte</a>: Prepends buffer for <code>self</code> with given integer byte or string.</p>
</li><li>
<p><a href="#ungetc-instance_method" title="IO#ungetc (method)">#ungetc</a>: Prepends buffer for <code>self</code> with given string.</p>
</li></ul>

<h4 id="label-Low-Level+Access">Low-Level Access</h4>
<ul><li>
<p><a href="#sysopen-class_method" title="IO.sysopen (method)">.sysopen</a>: Opens the file given by its path, returning the integer file descriptor.</p>
</li><li>
<p><a href="#advise-instance_method" title="IO#advise (method)">#advise</a>: Announces the intention to access data from <code>self</code> in a specific way.</p>
</li><li>
<p><a href="#fcntl-instance_method" title="IO#fcntl (method)">#fcntl</a>: Passes a low-level command to the file specified by the given file descriptor.</p>
</li><li>
<p><a href="#ioctl-instance_method" title="IO#ioctl (method)">#ioctl</a>: Passes a low-level command to the device specified by the given file descriptor.</p>
</li><li>
<p><a href="#sysread-instance_method" title="IO#sysread (method)">#sysread</a>: Returns up to the next <em>n</em> bytes read from self using a low-level read.</p>
</li><li>
<p><a href="#sysseek-instance_method" title="IO#sysseek (method)">#sysseek</a>: Sets the offset for <code>self</code>.</p>
</li><li>
<p><a href="#syswrite-instance_method" title="IO#syswrite (method)">#syswrite</a>: Writes the given string to <code>self</code> using a low-level write.</p>
</li></ul>

<h4 id="label-Other">Other</h4>
<ul><li>
<p><a href="#copy_stream-class_method" title="IO.copy_stream (method)">.copy_stream</a>: Copies data from a source to a destination, each of which is a filepath or an IO-like object.</p>
</li><li>
<p><a href="#try_convert-class_method" title="IO.try_convert (method)">.try_convert</a>: Returns a new IO object resulting from converting the given object.</p>
</li><li>
<p><a href="#inspect-instance_method" title="IO#inspect (method)">#inspect</a>: Returns the string representation of <code>self</code>.</p>
</li></ul>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='PRIORITY-constant' class='summary_signature'>PRIORITY =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Priority event mask for <a href="#wait-instance_method" title="IO#wait (method)">#wait</a>.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L15332'># File 'io.c', line 15332</a>    <pre class='code c'><span class='const'>INT2NUM</span>(<span class='const'>RUBY_IO_PRIORITY</span>)</pre>
  </li>
  <li>
    <span id='READABLE-constant' class='summary_signature'>READABLE =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Readable event mask for <a href="#wait-instance_method" title="IO#wait (method)">#wait</a>.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L15328'># File 'io.c', line 15328</a>    <pre class='code c'><span class='const'>INT2NUM</span>(<span class='const'>RUBY_IO_READABLE</span>)</pre>
  </li>
  <li>
    <span id='SEEK_CUR-constant' class='summary_signature'>SEEK_CUR =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Set I/O position from the current position</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L15458'># File 'io.c', line 15458</a>    <pre class='code c'><span class='const'>INT2FIX</span>(<span class='const'><a href="#SEEK_CUR-constant" title="IO::SEEK_CUR (constant)">SEEK_CUR</a></span>)</pre>
  </li>
  <li>
    <span id='SEEK_DATA-constant' class='summary_signature'>SEEK_DATA =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Set I/O position to the next location containing data</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L15463'># File 'io.c', line 15463</a>    <pre class='code c'><span class='const'>INT2FIX</span>(<span class='const'><a href="#SEEK_DATA-constant" title="IO::SEEK_DATA (constant)">SEEK_DATA</a></span>)</pre>
  </li>
  <li>
    <span id='SEEK_END-constant' class='summary_signature'>SEEK_END =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Set I/O position from the end</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L15460'># File 'io.c', line 15460</a>    <pre class='code c'><span class='const'>INT2FIX</span>(<span class='const'><a href="#SEEK_END-constant" title="IO::SEEK_END (constant)">SEEK_END</a></span>)</pre>
  </li>
  <li>
    <span id='SEEK_HOLE-constant' class='summary_signature'>SEEK_HOLE =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Set I/O position to the next hole</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L15467'># File 'io.c', line 15467</a>    <pre class='code c'><span class='const'>INT2FIX</span>(<span class='const'><a href="#SEEK_HOLE-constant" title="IO::SEEK_HOLE (constant)">SEEK_HOLE</a></span>)</pre>
  </li>
  <li>
    <span id='SEEK_SET-constant' class='summary_signature'>SEEK_SET =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Set I/O position from the beginning</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L15456'># File 'io.c', line 15456</a>    <pre class='code c'><span class='const'>INT2FIX</span>(<span class='const'><a href="#SEEK_SET-constant" title="IO::SEEK_SET (constant)">SEEK_SET</a></span>)</pre>
  </li>
  <li>
    <span id='WRITABLE-constant' class='summary_signature'>WRITABLE =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Writable event mask for <a href="#wait-instance_method" title="IO#wait (method)">#wait</a>.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L15330'># File 'io.c', line 15330</a>    <pre class='code c'><span class='const'>INT2NUM</span>(<span class='const'>RUBY_IO_WRITABLE</span>)</pre>
  </li>
</ul>
  <h3 class='inherited'><a href="File/Constants.html" title="File::Constants (module)"><code>::File::Constants</code></a> - Included</h3>
  <p  class='inherited'>
    <a href="File/Constants.html#APPEND-constant" title="File::Constants::APPEND (constant)">APPEND</a>, 
    <a href="File/Constants.html#BINARY-constant" title="File::Constants::BINARY (constant)">BINARY</a>, 
    <a href="File/Constants.html#CREAT-constant" title="File::Constants::CREAT (constant)">CREAT</a>, 
    <a href="File/Constants.html#DIRECT-constant" title="File::Constants::DIRECT (constant)">DIRECT</a>, 
    <a href="File/Constants.html#DSYNC-constant" title="File::Constants::DSYNC (constant)">DSYNC</a>, 
    <a href="File/Constants.html#EXCL-constant" title="File::Constants::EXCL (constant)">EXCL</a>, 
    <a href="File/Constants.html#LOCK_EX-constant" title="File::Constants::LOCK_EX (constant)">LOCK_EX</a>, 
    <a href="File/Constants.html#LOCK_NB-constant" title="File::Constants::LOCK_NB (constant)">LOCK_NB</a>, 
    <a href="File/Constants.html#LOCK_SH-constant" title="File::Constants::LOCK_SH (constant)">LOCK_SH</a>, 
    <a href="File/Constants.html#LOCK_UN-constant" title="File::Constants::LOCK_UN (constant)">LOCK_UN</a>, 
    <a href="File/Constants.html#NOATIME-constant" title="File::Constants::NOATIME (constant)">NOATIME</a>, 
    <a href="File/Constants.html#NOCTTY-constant" title="File::Constants::NOCTTY (constant)">NOCTTY</a>, 
    <a href="File/Constants.html#NOFOLLOW-constant" title="File::Constants::NOFOLLOW (constant)">NOFOLLOW</a>, 
    <a href="File/Constants.html#NONBLOCK-constant" title="File::Constants::NONBLOCK (constant)">NONBLOCK</a>, 
    <a href="File/Constants.html#NULL-constant" title="File::Constants::NULL (constant)">NULL</a>, 
    <a href="File/Constants.html#RDONLY-constant" title="File::Constants::RDONLY (constant)">RDONLY</a>, 
    <a href="File/Constants.html#RDWR-constant" title="File::Constants::RDWR (constant)">RDWR</a>, 
    <a href="File/Constants.html#RSYNC-constant" title="File::Constants::RSYNC (constant)">RSYNC</a>, 
    <a href="File/Constants.html#SHARE_DELETE-constant" title="File::Constants::SHARE_DELETE (constant)">SHARE_DELETE</a>, 
    <a href="File/Constants.html#SYNC-constant" title="File::Constants::SYNC (constant)">SYNC</a>, 
    <a href="File/Constants.html#TMPFILE-constant" title="File::Constants::TMPFILE (constant)">TMPFILE</a>, 
    <a href="File/Constants.html#TRUNC-constant" title="File::Constants::TRUNC (constant)">TRUNC</a>, 
    <a href="File/Constants.html#WRONLY-constant" title="File::Constants::WRONLY (constant)">WRONLY</a>
  </p>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#binread-class_method" title="binread (class method)">.<strong>binread</strong>(path, length = nil, offset = 0)  &#x21d2; String<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Behaves like <a href="#read-class_method" title="IO.read (method)">.read</a>, except that the stream is opened in binary mode with ASCII-8BIT encoding.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#binwrite-class_method" title="binwrite (class method)">.<strong>binwrite</strong>(path, string, offset = 0)  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Behaves like <a href="#write-class_method" title="IO.write (method)">.write</a>, except that the stream is opened in binary mode with ASCII-8BIT encoding.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#copy_stream-class_method" title="copy_stream (class method)">.<strong>copy_stream</strong>(src, dst, src_length = nil, src_offset = 0)  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Copies from the given <code>src</code> to the given <code>dst</code>, returning the number of bytes copied.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#for_fd-class_method" title="for_fd (class method)">.<strong>for_fd</strong>(fd, mode = &#39;r&#39;, **opts)  &#x21d2; IO </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Synonym for <a href="#new-class_method" title="IO.new (method)">.new</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#foreach-class_method" title="foreach (class method)">.<strong>foreach</strong>(path, sep = $/, **opts) {|line| ... } &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Calls the block with each successive line read from the stream.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#open-class_method" title="open (class method)">.<strong>open</strong>(path, mode = &#39;r&#39;, perm = 0666, **opts)  &#x21d2; File </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="File.html#open-class_method" title="File.open (method)">File.open</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#pipe-class_method" title="pipe (class method)">.<strong>pipe</strong>(**opts)  &#x21d2; IO </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates a pair of pipe endpoints, <code>read_io</code> and <code>write_io</code>, connected to each other.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#popen-class_method" title="popen (class method)">.<strong>popen</strong>(env = {}, cmd, mode = &#39;r&#39;, **opts)  &#x21d2; IO </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Executes the given command <code>cmd</code> as a subprocess whose $stdin and $stdout are connected to a new stream <code>io</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#read-class_method" title="read (class method)">.<strong>read</strong>(path, length = nil, offset = 0, **opts)  &#x21d2; String<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Opens the stream, reads and returns some or all of its content, and closes the stream; returns <code>nil</code> if no bytes were read.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#readlines-class_method" title="readlines (class method)">.<strong>readlines</strong>(path, sep = $/, **opts)  &#x21d2; Array </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an array of all lines read from the stream.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#select-class_method" title="select (class method)">.<strong>select</strong>(read_ios, write_ios = [], error_ios = [], timeout = nil)  &#x21d2; Array<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="Kernel.html#select-class_method" title="Kernel.select (method)">Kernel.select</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#sysopen-class_method" title="sysopen (class method)">.<strong>sysopen</strong>(path, mode = &#39;r&#39;, perm = 0666)  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Opens the file at the given path with the given mode and permissions; returns the integer file descriptor.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#try_convert-class_method" title="try_convert (class method)">.<strong>try_convert</strong>(object)  &#x21d2; IO<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Attempts to convert <code>object</code> into an IO object via method <a href="#to_io-instance_method" title="IO#to_io (method)">#to_io</a>; returns the new IO object if successful, or <code>nil</code> otherwise:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#write-class_method" title="write (class method)">.<strong>write</strong>(path, data, offset = 0, **opts)  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Opens the stream, writes the given <code>data</code> to it, and closes the stream; returns the number of bytes written.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(*args)  </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#autoclose=-instance_method" title="#autoclose= (instance method)">#<strong>autoclose=</strong>(bool)  &#x21d2; Boolean </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets auto-close flag.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#autoclose%3F-instance_method" title="#autoclose? (instance method)">#<strong>autoclose?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if the underlying file descriptor of <em>ios</em> will be closed at its finalization or at calling <a href="#close-instance_method" title="IO#close (method)">#close</a>, otherwise <code>false</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#binmode-instance_method" title="#binmode (instance method)">#<strong>binmode</strong>  &#x21d2; self </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets the stream’s data mode as binary (see <code>{Data</code> Mode}).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#binmode%3F-instance_method" title="#binmode? (instance method)">#<strong>binmode?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if the stream is on binary mode, <code>false</code> otherwise.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#close_on_exec=-instance_method" title="#close_on_exec= (instance method)">#<strong>close_on_exec=</strong>(bool)  &#x21d2; Boolean </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets a close-on-exec flag.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#close_on_exec%3F-instance_method" title="#close_on_exec? (instance method)">#<strong>close_on_exec?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if the stream will be closed on exec, <code>false</code> otherwise:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#closed%3F-instance_method" title="#closed? (instance method)">#<strong>closed?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if the stream is closed for both reading and writing, <code>false</code> otherwise.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#eof%3F-instance_method" title="#eof (instance method)">#<strong>eof</strong>  &#x21d2; Boolean </a>
      (also: #eof?)
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if the stream is positioned at its end, <code>false</code> otherwise; see <code>Position</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#eof%3F-instance_method" title="#eof? (instance method)">#<strong>eof?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#eof-instance_method" title="IO#eof (method)">#eof</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#isatty-instance_method" title="#isatty (instance method)">#<strong>isatty</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#tty%3F-instance_method" title="IO#tty? (method)">#tty?</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#lineno-instance_method" title="#lineno (instance method)">#<strong>lineno</strong>  &#x21d2; Integer </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the current line number for the stream; see <code>Line Number</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#lineno=-instance_method" title="#lineno= (instance method)">#<strong>lineno=</strong>(integer)  &#x21d2; Integer </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets and returns the line number for the stream; see <code>Line Number</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#pos-instance_method" title="#pos (instance method)">#<strong>pos</strong>  &#x21d2; Integer </a>
      (also: #tell)
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the current position (in bytes) in <code>self</code> (see <code>Position</code>):</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#pos=-instance_method" title="#pos= (instance method)">#<strong>pos=</strong>(new_position)  &#x21d2; IO </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Seeks to the given <code>new_position</code> (in bytes); see <code>Position</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#sync-instance_method" title="#sync (instance method)">#<strong>sync</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the current sync mode of the stream.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#sync=-instance_method" title="#sync= (instance method)">#<strong>sync=</strong>(boolean)  &#x21d2; Boolean </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets the <em>sync</em> <em>mode</em> for the stream to the given value; returns the given value.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#tell-instance_method" title="#tell (instance method)">#<strong>tell</strong>  &#x21d2; Integer </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#pos-instance_method" title="IO#pos (method)">#pos</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#timeout-instance_method" title="#timeout (instance method)">#<strong>timeout</strong>  &#x21d2; IO<sup>?</sup> </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Get the internal timeout duration or nil if it was not set.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#timeout=-instance_method" title="#timeout= (instance method)">#<strong>timeout=</strong>(duration)  &#x21d2; IO </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets the internal timeout to the specified duration or nil.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#tty%3F-instance_method" title="#tty? (instance method)">#<strong>tty?</strong>  &#x21d2; Boolean </a>
      (also: #isatty)
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if the stream is associated with a terminal device (tty), <code>false</code> otherwise:</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#<<-instance_method" title="#&lt;&lt; (instance method)">#<strong>&lt;&lt;</strong>(object)  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes the given <code>object</code> to <code>self</code>, which must be opened for writing (see <code>Access Modes</code>); returns <code>self</code>; if <code>object</code> is not a string, it is converted via method <code>to_s</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#advise-instance_method" title="#advise (instance method)">#<strong>advise</strong>(advice, offset = 0, len = 0)  &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Invokes Posix system call <a href="https://linux.die.net/man/2/posix_fadvise" target="_parent" title="posix_fadvise(2)">posix_fadvise(2)</a>, which announces an intention to access data from the current file in a particular manner.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#close-instance_method" title="#close (instance method)">#<strong>close</strong>  &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Closes the stream for both reading and writing if open for either or both; returns <code>nil</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#close_read-instance_method" title="#close_read (instance method)">#<strong>close_read</strong>  &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Closes the stream for reading if open for reading; returns <code>nil</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#close_write-instance_method" title="#close_write (instance method)">#<strong>close_write</strong>  &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Closes the stream for writing if open for writing; returns <code>nil</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#each-instance_method" title="#each_line (instance method)">#<strong>each_line</strong>(sep = $/, chomp: false) {|line| ... } &#x21d2; self </a>
      (also: #each_line)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Calls the block with each remaining line read from the stream; returns <code>self</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#each_byte-instance_method" title="#each_byte (instance method)">#<strong>each_byte</strong> {|byte| ... } &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Calls the given block with each byte (0..255) in the stream; returns <code>self</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#each_char-instance_method" title="#each_char (instance method)">#<strong>each_char</strong> {|c| ... } &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Calls the given block with each character in the stream; returns <code>self</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#each_codepoint-instance_method" title="#each_codepoint (instance method)">#<strong>each_codepoint</strong> {|c| ... } &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Calls the given block with each codepoint in the stream; returns <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#each_line-instance_method" title="#each_line (instance method)">#<strong>each_line</strong>(sep = $/, chomp: false) {|line| ... } &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#each-instance_method" title="IO#each (method)">#each</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#external_encoding-instance_method" title="#external_encoding (instance method)">#<strong>external_encoding</strong>  &#x21d2; Encoding<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the <a href="Encoding.html" title="Encoding (class)"><code>::Encoding</code></a> object that represents the encoding of the stream, or <code>nil</code> if the stream is in write mode and no encoding is specified.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#fcntl-instance_method" title="#fcntl (instance method)">#<strong>fcntl</strong>(integer_cmd, argument)  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Invokes Posix system call <a href="https://linux.die.net/man/2/fcntl" target="_parent" title="fcntl(2)">fcntl(2)</a>, which provides a mechanism for issuing low-level commands to control or query a file-oriented I/O stream.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#fdatasync-instance_method" title="#fdatasync (instance method)">#<strong>fdatasync</strong>  &#x21d2; 0 </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Immediately writes to disk all data buffered in the stream, via the operating system’s: <code>fdatasync(2)</code>, if supported, otherwise via <code>fsync(2)</code>, if supported; otherwise raises an exception.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#fileno-instance_method" title="#fileno (instance method)">#<strong>fileno</strong>  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#to_i-instance_method" title="IO#to_i (method)">#to_i</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#flush-instance_method" title="#flush (instance method)">#<strong>flush</strong>  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Flushes data buffered in <code>self</code> to the operating system (but does not necessarily flush data buffered in the operating system):</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#fsync-instance_method" title="#fsync (instance method)">#<strong>fsync</strong>  &#x21d2; 0 </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Immediately writes to disk all data buffered in the stream, via the operating system’s <code>fsync(2)</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#getbyte-instance_method" title="#getbyte (instance method)">#<strong>getbyte</strong>  &#x21d2; Integer<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads and returns the next byte (in range 0..255) from the stream; returns <code>nil</code> if already at end-of-stream.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#getc-instance_method" title="#getc (instance method)">#<strong>getc</strong>  &#x21d2; character<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads and returns the next 1-character string from the stream; returns <code>nil</code> if already at end-of-stream.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#gets-instance_method" title="#gets (instance method)">#<strong>gets</strong>(sep = $/, chomp: false)  &#x21d2; String<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads and returns a line from the stream; assigns the return value to <code>$_</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#initialize-instance_method" title="#new (instance method)">#<strong>new</strong>(fd, mode = &#39;r&#39;, **opts)  &#x21d2; IO </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates and returns a new IO object (file stream) from a file descriptor.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a string representation of <code>self</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#internal_encoding-instance_method" title="#internal_encoding (instance method)">#<strong>internal_encoding</strong>  &#x21d2; Encoding<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the <a href="Encoding.html" title="Encoding (class)"><code>::Encoding</code></a> object that represents the encoding of the internal string, if conversion is specified, or <code>nil</code> otherwise.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#ioctl-instance_method" title="#ioctl (instance method)">#<strong>ioctl</strong>(integer_cmd, argument)  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Invokes Posix system call <a href="https://linux.die.net/man/2/ioctl" target="_parent" title="ioctl(2)">ioctl(2)</a>, which issues a low-level command to an I/O device.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_path-instance_method" title="#path (instance method)">#<strong>path</strong>  &#x21d2; String<sup>?</sup> </a>
      (also: #to_path)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the path associated with the <code>IO</code>, or <code>nil</code> if there is no path associated with the <code>IO</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#pid-instance_method" title="#pid (instance method)">#<strong>pid</strong>  &#x21d2; Integer<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the process ID of a child process associated with the stream, which will have been set by <code>IO#popen</code>, or <code>nil</code> if the stream was not created by <code>IO#popen</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#pread-instance_method" title="#pread (instance method)">#<strong>pread</strong>(maxlen, offset)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Behaves like <a href="#readpartial-instance_method" title="IO#readpartial (method)">#readpartial</a>, except that it:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#print-instance_method" title="#print (instance method)">#<strong>print</strong>(*objects)  &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes the given objects to the stream; returns <code>nil</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#printf-instance_method" title="#printf (instance method)">#<strong>printf</strong>(format_string, *objects)  &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Formats and writes <code>objects</code> to the stream.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#putc-instance_method" title="#putc (instance method)">#<strong>putc</strong>(object)  &#x21d2; Object </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes a character to the stream.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#puts-instance_method" title="#puts (instance method)">#<strong>puts</strong>(*objects)  &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes the given <code>objects</code> to the stream, which must be open for writing; returns <code>nil</code>.\ Writes a newline after each that does not already end with a newline sequence.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#pwrite-instance_method" title="#pwrite (instance method)">#<strong>pwrite</strong>(object, offset)  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Behaves like <a href="#write-instance_method" title="IO#write (method)">#write</a>, except that it:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#read-instance_method" title="#read (instance method)">#<strong>read</strong>(maxlen = nil, out_string = nil)  &#x21d2; String, ... </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads bytes from the stream; the stream must be opened for reading (see <code>Access Modes</code>):</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#read_nonblock-instance_method" title="#read_nonblock (instance method)">#<strong>read_nonblock</strong>(maxlen [, options])  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads at most <em>maxlen</em> bytes from <em>ios</em> using the read(2) system call after O_NONBLOCK is set for the underlying file descriptor.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#readbyte-instance_method" title="#readbyte (instance method)">#<strong>readbyte</strong>  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads and returns the next byte (in range 0..255) from the stream; raises <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a> if already at end-of-stream.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#readchar-instance_method" title="#readchar (instance method)">#<strong>readchar</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads and returns the next 1-character string from the stream; raises <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a> if already at end-of-stream.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#readline-instance_method" title="#readline (instance method)">#<strong>readline</strong>(sep = $/, chomp: false)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads a line as with <a href="#gets-instance_method" title="IO#gets (method)">#gets</a>, but raises <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a> if already at end-of-stream.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#readlines-instance_method" title="#readlines (instance method)">#<strong>readlines</strong>(sep = $/, chomp: false)  &#x21d2; Array </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads and returns all remaining line from the stream; does not modify <code>$_</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#readpartial-instance_method" title="#readpartial (instance method)">#<strong>readpartial</strong>(maxlen)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads up to <code>maxlen</code> bytes from the stream; returns a string (either a new string or the given <code>out_string</code>).</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#reopen-instance_method" title="#reopen (instance method)">#<strong>reopen</strong>(other_io)  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reassociates the stream with another stream, which may be of a different class.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#rewind-instance_method" title="#rewind (instance method)">#<strong>rewind</strong>  &#x21d2; 0 </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Repositions the stream to its beginning, setting both the position and the line number to zero; see <code>Position</code> and <code>Line Number</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#seek-instance_method" title="#seek (instance method)">#<strong>seek</strong>(offset, whence = IO::SEEK_SET)  &#x21d2; 0 </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Seeks to the position given by integer <code>offset</code> (see <code>Position</code>) and constant <code>whence</code>, which is one of:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#set_encoding-instance_method" title="#set_encoding (instance method)">#<strong>set_encoding</strong>(ext_enc)  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>See <code>Encodings</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#set_encoding_by_bom-instance_method" title="#set_encoding_by_bom (instance method)">#<strong>set_encoding_by_bom</strong>  &#x21d2; Encoding<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>If the stream begins with a BOM (<a href="https://en.wikipedia.org/wiki/Byte_order_mark" target="_parent" title="byte order marker">byte order marker</a>), consumes the BOM and sets the external encoding accordingly; returns the result encoding if found, or <code>nil</code> otherwise:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#stat-instance_method" title="#stat (instance method)">#<strong>stat</strong>  &#x21d2; stat </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns status information for <em>ios</em> as an object of type <a href="File/Stat.html" title="File::Stat (class)"><code>::File::Stat</code></a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#sysread-instance_method" title="#sysread (instance method)">#<strong>sysread</strong>(maxlen)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Behaves like <a href="#readpartial-instance_method" title="IO#readpartial (method)">#readpartial</a>, except that it uses low-level system functions.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#sysseek-instance_method" title="#sysseek (instance method)">#<strong>sysseek</strong>(offset, whence = IO::SEEK_SET)  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Behaves like <a href="#seek-instance_method" title="IO#seek (method)">#seek</a>, except that it:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#syswrite-instance_method" title="#syswrite (instance method)">#<strong>syswrite</strong>(object)  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes the given <code>object</code> to self, which must be opened for writing (see Modes); returns the number bytes written.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_i-instance_method" title="#to_i (instance method)">#<strong>to_i</strong>  &#x21d2; Integer </a>
      (also: #fileno)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the integer file descriptor for the stream:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_io-instance_method" title="#to_io (instance method)">#<strong>to_io</strong>  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>self</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_path-instance_method" title="#to_path (instance method)">#<strong>to_path</strong>  &#x21d2; String<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#path-instance_method" title="IO#path (method)">#path</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#ungetbyte-instance_method" title="#ungetbyte (instance method)">#<strong>ungetbyte</strong>(integer)  &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Pushes back (“unshifts”) the given data onto the stream’s buffer, placing the data so that it is next to be read; returns <code>nil</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#ungetc-instance_method" title="#ungetc (instance method)">#<strong>ungetc</strong>(integer)  &#x21d2; nil </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Pushes back (“unshifts”) the given data onto the stream’s buffer, placing the data so that it is next to be read; returns <code>nil</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#wait-instance_method" title="#wait (instance method)">#<strong>wait</strong>(events, timeout)  &#x21d2; event mask, ... </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Waits until the <code>IO</code> becomes ready for the specified events and returns the subset of events that become ready, or a falsy value when times out.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#wait_priority-instance_method" title="#wait_priority (instance method)">#<strong>wait_priority</strong>  &#x21d2; truthy, falsy </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Waits until <code>IO</code> is priority and returns a truthy value or a falsy value when times out.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#wait_readable-instance_method" title="#wait_readable (instance method)">#<strong>wait_readable</strong>  &#x21d2; truthy, falsy </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Waits until <code>IO</code> is readable and returns a truthy value, or a falsy value when times out.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#wait_writable-instance_method" title="#wait_writable (instance method)">#<strong>wait_writable</strong>  &#x21d2; truthy, falsy </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Waits until <code>IO</code> is writable and returns a truthy value or a falsy value when times out.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#write-instance_method" title="#write (instance method)">#<strong>write</strong>(*objects)  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes each of the given <code>objects</code> to <code>self</code>, which must be opened for writing (see <code>Access Modes</code>); returns the total number bytes written; each of <code>objects</code> that is not a string is converted via method <code>to_s</code>:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#write_nonblock-instance_method" title="#write_nonblock (instance method)">#<strong>write_nonblock</strong>(string)  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes the given string to <em>ios</em> using the write(2) system call after O_NONBLOCK is set for the underlying file descriptor.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#initialize_copy-instance_method" title="#initialize_copy (instance method)">#<strong>initialize_copy</strong>(io)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>

<h3 class='inherited'><a href="Enumerable.html" title="Enumerable (module)"><code>::Enumerable</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#all%3F-instance_method" title="Enumerable#all? (method)">#all?</a></td>
      <td><div class='inline'><p>Returns whether every element meets a given criterion.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#any%3F-instance_method" title="Enumerable#any? (method)">#any?</a></td>
      <td><div class='inline'><p>Returns whether any element meets a given criterion.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#chain-instance_method" title="Enumerable#chain (method)">#chain</a></td>
      <td><div class='inline'><p>Returns an enumerator object generated from this enumerator and given enumerables.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#chunk-instance_method" title="Enumerable#chunk (method)">#chunk</a></td>
      <td><div class='inline'><p>Each element in the returned enumerator is a 2-element array consisting of:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#chunk_while-instance_method" title="Enumerable#chunk_while (method)">#chunk_while</a></td>
      <td><div class='inline'><p>Creates an enumerator for each chunked elements.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#collect-instance_method" title="Enumerable#collect (method)">#collect</a></td>
      <td><div class='inline'><p>Alias for <a href="Enumerable.html#map-instance_method" title="Enumerable#map (method)">Enumerable#map</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#collect_concat-instance_method" title="Enumerable#collect_concat (method)">#collect_concat</a></td>
      <td><div class='inline'><p>Alias for <a href="Enumerable.html#flat_map-instance_method" title="Enumerable#flat_map (method)">Enumerable#flat_map</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#compact-instance_method" title="Enumerable#compact (method)">#compact</a></td>
      <td><div class='inline'><p>Returns an array of all non-<code>nil</code> elements:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#count-instance_method" title="Enumerable#count (method)">#count</a></td>
      <td><div class='inline'><p>Returns the count of elements, based on an argument or block criterion, if given.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#cycle-instance_method" title="Enumerable#cycle (method)">#cycle</a></td>
      <td><div class='inline'><p>When called with positive integer argument <code>n</code> and a block, calls the block with each element, then does so again, until it has done so <code>n</code> times; returns <code>nil</code>:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#detect-instance_method" title="Enumerable#detect (method)">#detect</a></td>
      <td><div class='inline'><p>Alias for <a href="Enumerable.html#find-instance_method" title="Enumerable#find (method)">Enumerable#find</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#drop-instance_method" title="Enumerable#drop (method)">#drop</a></td>
      <td><div class='inline'><p>For positive integer <code>n</code>, returns an array containing all but the first <code>n</code> elements:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#drop_while-instance_method" title="Enumerable#drop_while (method)">#drop_while</a></td>
      <td><div class='inline'><p>Calls the block with successive elements as long as the block returns a truthy value; returns an array of all elements after that point:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#each_cons-instance_method" title="Enumerable#each_cons (method)">#each_cons</a></td>
      <td><div class='inline'><p>Calls the block with each successive overlapped <code>n</code>-tuple of elements; returns <code>self</code>:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#each_entry-instance_method" title="Enumerable#each_entry (method)">#each_entry</a></td>
      <td><div class='inline'><p>Calls the given block with each element, converting multiple values from yield to an array; returns <code>self</code>:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#each_slice-instance_method" title="Enumerable#each_slice (method)">#each_slice</a></td>
      <td><div class='inline'><p>Calls the block with each successive disjoint <code>n</code>-tuple of elements; returns <code>self</code>:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#each_with_index-instance_method" title="Enumerable#each_with_index (method)">#each_with_index</a></td>
      <td><div class='inline'><p>With a block given, calls the block with each element and its index; returns <code>self</code>:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#each_with_object-instance_method" title="Enumerable#each_with_object (method)">#each_with_object</a></td>
      <td><div class='inline'><p>Calls the block once for each element, passing both the element and the given object:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#entries-instance_method" title="Enumerable#entries (method)">#entries</a></td>
      <td><div class='inline'><p>Alias for <a href="Enumerable.html#to_a-instance_method" title="Enumerable#to_a (method)">Enumerable#to_a</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#filter-instance_method" title="Enumerable#filter (method)">#filter</a></td>
      <td><div class='inline'><p>Returns an array containing elements selected by the block.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#filter_map-instance_method" title="Enumerable#filter_map (method)">#filter_map</a></td>
      <td><div class='inline'><p>Returns an array containing truthy elements returned by the block.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#find-instance_method" title="Enumerable#find (method)">#find</a></td>
      <td><div class='inline'><p>Returns the first element for which the block returns a truthy value.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#find_all-instance_method" title="Enumerable#find_all (method)">#find_all</a></td>
      <td><div class='inline'><p>Alias for <a href="Enumerable.html#filter-instance_method" title="Enumerable#filter (method)">Enumerable#filter</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#find_index-instance_method" title="Enumerable#find_index (method)">#find_index</a></td>
      <td><div class='inline'><p>Returns the index of the first element that meets a specified criterion, or <code>nil</code> if no such element is found.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#first-instance_method" title="Enumerable#first (method)">#first</a></td>
      <td><div class='inline'><p>Returns the first element or elements.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#flat_map-instance_method" title="Enumerable#flat_map (method)">#flat_map</a></td>
      <td><div class='inline'><p>Returns an array of flattened objects returned by the block.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#grep-instance_method" title="Enumerable#grep (method)">#grep</a></td>
      <td><div class='inline'><p>Returns an array of objects based elements of <code>self</code> that match the given pattern.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#grep_v-instance_method" title="Enumerable#grep_v (method)">#grep_v</a></td>
      <td><div class='inline'><p>Returns an array of objects based on elements of <code>self</code> that <em>don’t</em> match the given pattern.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#group_by-instance_method" title="Enumerable#group_by (method)">#group_by</a></td>
      <td><div class='inline'><p>With a block given returns a hash:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#include%3F-instance_method" title="Enumerable#include? (method)">#include?</a></td>
      <td><div class='inline'><p>Alias for <a href="Enumerable.html#member%3F-instance_method" title="Enumerable#member? (method)">Enumerable#member?</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#inject-instance_method" title="Enumerable#inject (method)">#inject</a></td>
      <td><div class='inline'><p>Returns an object formed from operands via either:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#lazy-instance_method" title="Enumerable#lazy (method)">#lazy</a></td>
      <td><div class='inline'><p>Returns an <a href="Enumerator/Lazy.html" title="Enumerator::Lazy (class)"><code>::Enumerator::Lazy</code></a>, which redefines most <a href="Enumerable.html" title="Enumerable (module)"><code>::Enumerable</code></a> methods to postpone enumeration and enumerate values only on an as-needed basis.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#map-instance_method" title="Enumerable#map (method)">#map</a></td>
      <td><div class='inline'><p>Returns an array of objects returned by the block.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#max-instance_method" title="Enumerable#max (method)">#max</a></td>
      <td><div class='inline'><p>Returns the element with the maximum element according to a given criterion.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#max_by-instance_method" title="Enumerable#max_by (method)">#max_by</a></td>
      <td><div class='inline'><p>Returns the elements for which the block returns the maximum values.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#member%3F-instance_method" title="Enumerable#member? (method)">#member?</a></td>
      <td><div class='inline'><p>Returns whether for any element <code>object == element</code>:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#min-instance_method" title="Enumerable#min (method)">#min</a></td>
      <td><div class='inline'><p>Returns the element with the minimum element according to a given criterion.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#min_by-instance_method" title="Enumerable#min_by (method)">#min_by</a></td>
      <td><div class='inline'><p>Returns the elements for which the block returns the minimum values.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#minmax-instance_method" title="Enumerable#minmax (method)">#minmax</a></td>
      <td><div class='inline'><p>Returns a 2-element array containing the minimum and maximum elements according to a given criterion.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#minmax_by-instance_method" title="Enumerable#minmax_by (method)">#minmax_by</a></td>
      <td><div class='inline'><p>Returns a 2-element array containing the elements for which the block returns minimum and maximum values:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#none%3F-instance_method" title="Enumerable#none? (method)">#none?</a></td>
      <td><div class='inline'><p>Returns whether no element meets a given criterion.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#one%3F-instance_method" title="Enumerable#one? (method)">#one?</a></td>
      <td><div class='inline'><p>Returns whether exactly one element meets a given criterion.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#partition-instance_method" title="Enumerable#partition (method)">#partition</a></td>
      <td><div class='inline'><p>With a block given, returns an array of two arrays:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#reduce-instance_method" title="Enumerable#reduce (method)">#reduce</a></td>
      <td><div class='inline'><p>Alias for <a href="Enumerable.html#inject-instance_method" title="Enumerable#inject (method)">Enumerable#inject</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#reject-instance_method" title="Enumerable#reject (method)">#reject</a></td>
      <td><div class='inline'><p>Returns an array of objects rejected by the block.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#reverse_each-instance_method" title="Enumerable#reverse_each (method)">#reverse_each</a></td>
      <td><div class='inline'><p>With a block given, calls the block with each element, but in reverse order; returns <code>self</code>:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#select-instance_method" title="Enumerable#select (method)">#select</a></td>
      <td><div class='inline'><p>Alias for <a href="Enumerable.html#filter-instance_method" title="Enumerable#filter (method)">Enumerable#filter</a>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#slice_after-instance_method" title="Enumerable#slice_after (method)">#slice_after</a></td>
      <td><div class='inline'><p>Creates an enumerator for each chunked elements.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#slice_before-instance_method" title="Enumerable#slice_before (method)">#slice_before</a></td>
      <td><div class='inline'><p>With argument <code>pattern</code>, returns an enumerator that uses the pattern to partition elements into arrays (“slices”).</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#slice_when-instance_method" title="Enumerable#slice_when (method)">#slice_when</a></td>
      <td><div class='inline'><p>Creates an enumerator for each chunked elements.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#sort-instance_method" title="Enumerable#sort (method)">#sort</a></td>
      <td><div class='inline'><p>Returns an array containing the sorted elements of <code>self</code>.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#sort_by-instance_method" title="Enumerable#sort_by (method)">#sort_by</a></td>
      <td><div class='inline'><p>With a block given, returns an array of elements of <code>self</code>, sorted according to the value returned by the block for each element.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#sum-instance_method" title="Enumerable#sum (method)">#sum</a></td>
      <td><div class='inline'><p>With no block given, returns the sum of <code>initial_value</code> and the elements:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#take-instance_method" title="Enumerable#take (method)">#take</a></td>
      <td><div class='inline'><p>For non-negative integer <code>n</code>, returns the first <code>n</code> elements:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#take_while-instance_method" title="Enumerable#take_while (method)">#take_while</a></td>
      <td><div class='inline'><p>Calls the block with successive elements as long as the block returns a truthy value; returns an array of all elements up to that point:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#tally-instance_method" title="Enumerable#tally (method)">#tally</a></td>
      <td><div class='inline'><p>Returns a hash containing the counts of equal elements:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#to_a-instance_method" title="Enumerable#to_a (method)">#to_a</a></td>
      <td><div class='inline'><p>Returns an array containing the items in <code>self</code>:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#to_h-instance_method" title="Enumerable#to_h (method)">#to_h</a></td>
      <td><div class='inline'><p>When <code>self</code> consists of 2-element arrays, returns a hash each of whose entries is the key-value pair formed from one of those arrays:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#to_set-instance_method" title="Enumerable#to_set (method)">#to_set</a></td>
      <td><div class='inline'><p>Makes a set from the enumerable object with given arguments.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#uniq-instance_method" title="Enumerable#uniq (method)">#uniq</a></td>
      <td><div class='inline'><p>With no block, returns a new array containing only unique elements; the array has no two elements <code>e0</code> and <code>e1</code> such that <code>e0.eql?(e1)</code>:</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Enumerable.html#zip-instance_method" title="Enumerable#zip (method)">#zip</a></td>
      <td><div class='inline'><p>With no block given, returns a new array <code>new_array</code> of size self.size whose elements are arrays.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature nodoc first'>
    .<strong>new</strong>(*args)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L9586-L9596'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9586' data-end='9596'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 9586</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_new(int argc, VALUE *argv, VALUE klass)
{
    if (rb_block_given_p()) {
        VALUE cname = rb_obj_as_string(klass);

        rb_warn(&quot;%&quot;PRIsVALUE&quot;::new() does not take block; use %&quot;PRIsVALUE&quot;::open() instead&quot;,
                cname, cname);
    }
    return rb_class_new_instance_kw(argc, argv, klass, RB_PASS_CALLED_KEYWORDS);
}
</pre>
  </div>
</div>
</section>

  <section class='method_details' id="initialize-instance_method">
  <h3 class='signature '>
    #<strong>new</strong>(fd, mode = &#39;r&#39;, **opts)  &#x21d2; <code>IO</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates and returns a new IO object (file stream) from a file descriptor.</p>

<p>IO.new may be useful for interaction with low-level libraries. For higher-level interactions, it may be simpler to create the file stream using <a href="File.html#open-class_method" title="File.open (method)">File.open</a>.</p>

<p>Argument <code>fd</code> must be a valid file descriptor (integer):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_path'><a href="#path-instance_method" title="IO#path (method)">path</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_fd'>fd</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_sysopen'><a href="#sysopen-class_method" title="IO.sysopen (method)">sysopen</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="IO#path (method)">path</a></span>) <span class='comment'># =&gt; 3
</span><span class='const'>IO</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="IO.new (method)">new</a></span>(<span class='id identifier rubyid_fd'>fd</span>)            <span class='comment'># =&gt; #&lt;IO:fd 3&gt;</span></code></pre>

<p>The new IO object does not inherit encoding (because the integer file descriptor does not have an encoding):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_fd'>fd</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_sysopen'><a href="#sysopen-class_method" title="IO.sysopen (method)">sysopen</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.rus</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rb</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_io'>io</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="IO.new (method)">new</a></span>(<span class='id identifier rubyid_fd'>fd</span>)
<span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_external_encoding'><a href="#external_encoding-instance_method" title="IO#external_encoding (method)">external_encoding</a></span> <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt; # Not ASCII-8BIT.</span></code></pre>

<p>Optional argument <code>mode</code> (defaults to ‘r’) must specify a valid mode; see <code>Access Modes</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="IO.new (method)">new</a></span>(<span class='id identifier rubyid_fd'>fd</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span>)         <span class='comment'># =&gt; #&lt;IO:fd 3&gt;
</span><span class='const'>IO</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="IO.new (method)">new</a></span>(<span class='id identifier rubyid_fd'>fd</span><span class='comma'>,</span> <span class='const'><a href="File.html" title="File (class)">File</a></span><span class='op'>::</span><span class='const'><a href="File/Constants.html#WRONLY-constant" title="File::Constants::WRONLY (constant)">WRONLY</a></span>) <span class='comment'># =&gt; #&lt;IO:fd 3&gt;</span></code></pre>

<p>Optional keyword arguments <code>opts</code> specify:</p>
<ul><li>
<p><code>Open Options</code>.</p>
</li><li>
<p><code>{Encoding</code> options}.</p>
</li></ul>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="IO.new (method)">new</a></span>(<span class='id identifier rubyid_fd'>fd</span><span class='comma'>,</span> <span class='label'>internal_encoding:</span> <span class='kw'>nil</span>) <span class='comment'># =&gt; #&lt;IO:fd 3&gt;
</span><span class='const'>IO</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="IO.new (method)">new</a></span>(<span class='id identifier rubyid_fd'>fd</span><span class='comma'>,</span> <span class='label'>autoclose:</span> <span class='kw'>true</span>)        <span class='comment'># =&gt; #&lt;IO:fd 3&gt;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L9408-L9479'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9408' data-end='9479'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 9408</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_initialize(int argc, VALUE *argv, VALUE io)
{
    VALUE fnum, vmode;
    rb_io_t *fp;
    int fd, fmode, oflags = O_RDONLY;
    struct rb_io_encoding convconfig;
    VALUE opt;
#if defined(HAVE_FCNTL) &amp;&amp; defined(F_GETFL)
    int ofmode;
#else
    struct stat st;
#endif


    argc = rb_scan_args(argc, argv, &quot;11:&quot;, &amp;fnum, &amp;vmode, &amp;opt);
    rb_io_extract_modeenc(&amp;vmode, 0, opt, &amp;oflags, &amp;fmode, &amp;convconfig);

    fd = NUM2INT(fnum);
    if (rb_reserved_fd_p(fd)) {
        rb_raise(rb_eArgError, &quot;The given fd is not accessible because RubyVM reserves it&quot;);
    }
#if defined(HAVE_FCNTL) &amp;&amp; defined(F_GETFL)
    oflags = fcntl(fd, F_GETFL);
    if (oflags == -1) rb_sys_fail(0);
#else
    if (fstat(fd, &amp;st) &lt; 0) rb_sys_fail(0);
#endif
    rb_update_max_fd(fd);
#if defined(HAVE_FCNTL) &amp;&amp; defined(F_GETFL)
    ofmode = rb_io_oflags_fmode(oflags);
    if (NIL_P(vmode)) {
        fmode = ofmode;
    }
    else if ((~ofmode &amp; fmode) &amp; FMODE_READWRITE) {
        VALUE error = INT2FIX(EINVAL);
        rb_exc_raise(rb_class_new_instance(1, &amp;error, rb_eSystemCallError));
    }
#endif
    VALUE path = Qnil;

    if (!NIL_P(opt)) {
        if (rb_hash_aref(opt, sym_autoclose) == Qfalse) {
            fmode |= FMODE_EXTERNAL;
        }

        path = rb_hash_aref(opt, RB_ID2SYM(idPath));
        if (!NIL_P(path)) {
            StringValue(path);
            path = rb_str_new_frozen(path);
        }
    }

    MakeOpenFile(io, fp);
    fp-&gt;self = io;
    fp-&gt;fd = fd;
    fp-&gt;mode = fmode;
    fp-&gt;encs = convconfig;
    fp-&gt;pathv = path;
    fp-&gt;timeout = Qnil;
    clear_codeconv(fp);
    io_check_tty(fp);
    if (fileno(stdin) == fd)
        fp-&gt;stdio_file = stdin;
    else if (fileno(stdout) == fd)
        fp-&gt;stdio_file = stdout;
    else if (fileno(stderr) == fd)
        fp-&gt;stdio_file = stderr;

    if (fmode &amp; FMODE_SETENC_BY_BOM) io_set_encoding_by_bom(io);
    return io;
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="binread-class_method">
  <h3 class='signature  first'>
    .<strong>binread</strong>(path, length = nil, offset = 0)  &#x21d2; <a href="String.html" title="String (class)">String</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Behaves like <a href="#read-class_method" title="IO.read (method)">.read</a>, except that the stream is opened in binary mode with ASCII-8BIT encoding.</p>

<p>When called from class IO (but not subclasses of IO), this method has potential security vulnerabilities if called with untrusted input; see <code>Command Injection</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L12192-L12226'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='12192' data-end='12226'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 12192</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_binread(int argc, VALUE *argv, VALUE io)
{
    VALUE offset;
    struct foreach_arg arg;
    enum {
        fmode = FMODE_READABLE|FMODE_BINMODE,
        oflags = O_RDONLY
#ifdef O_BINARY
                |O_BINARY
#endif
    };
    struct rb_io_encoding convconfig = {NULL, NULL, 0, Qnil};

    rb_scan_args(argc, argv, &quot;12&quot;, NULL, NULL, &amp;offset);
    FilePathValue(argv[0]);
    convconfig.enc = rb_ascii8bit_encoding();
    arg.io = rb_io_open_generic(io, argv[0], oflags, fmode, &amp;convconfig, 0);
    if (NIL_P(arg.io)) return Qnil;
    arg.argv = argv+1;
    arg.argc = (argc &gt; 1) ? 1 : 0;
    if (!NIL_P(offset)) {
        struct seek_arg sarg;
        int state = 0;
        sarg.io = arg.io;
        sarg.offset = offset;
        sarg.mode = SEEK_SET;
        rb_protect(seek_before_access, (VALUE)&amp;sarg, &amp;state);
        if (state) {
            rb_io_close(arg.io);
            rb_jump_tag(state);
        }
    }
    return rb_ensure(io_s_read, (VALUE)&amp;arg, rb_io_close, arg.io);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="binwrite-class_method">
  <h3 class='signature '>
    .<strong>binwrite</strong>(path, string, offset = 0)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Behaves like <a href="#write-class_method" title="IO.write (method)">.write</a>, except that the stream is opened in binary mode with ASCII-8BIT encoding.</p>

<p>When called from class IO (but not subclasses of IO), this method has potential security vulnerabilities if called with untrusted input; see <code>Command Injection</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L12346-L12350'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='12346' data-end='12350'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 12346</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_binwrite(int argc, VALUE *argv, VALUE io)
{
    return io_s_write(argc, argv, io, 1);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="copy_stream-class_method">
  <h3 class='signature '>
    .<strong>copy_stream</strong>(src, dst, src_length = nil, src_offset = 0)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Copies from the given <code>src</code> to the given <code>dst</code>, returning the number of bytes copied.</p>
<ul><li>
<p>The given <code>src</code> must be one of the following:</p>
<ul><li>
<p>The path to a readable file, from which source data is to be read.</p>
</li><li>
<p>An IO-like object, opened for reading and capable of responding to method <code>:readpartial</code> or method <code>:read</code>.</p>
</li></ul>
</li><li>
<p>The given <code>dst</code> must be one of the following:</p>
<ul><li>
<p>The path to a writable file, to which data is to be written.</p>
</li><li>
<p>An IO-like object, opened for writing and capable of responding to method <code>:write</code>.</p>
</li></ul>
</li></ul>

<p>The examples here use file <code>t.txt</code> as source:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># =&gt; &quot;First line\nSecond line\n\nThird line\nFourth line\n&quot;
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_size'><a href="String.html#size-instance_method" title="String#size (method)">size</a></span> <span class='comment'># =&gt; 47</span></code></pre>

<p>If only arguments <code>src</code> and <code>dst</code> are given, the entire source stream is copied:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Paths.
</span><span class='const'>IO</span>.<span class='id identifier rubyid_copy_stream'>copy_stream</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; 47
</span>
<span class='comment'># IOs (recall that a File is also an IO).
</span><span class='id identifier rubyid_src_io'>src_io</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;File:t.txt&gt;
</span><span class='id identifier rubyid_dst_io'>dst_io</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;File:t.tmp&gt;
</span><span class='const'>IO</span>.<span class='id identifier rubyid_copy_stream'>copy_stream</span>(<span class='id identifier rubyid_src_io'>src_io</span><span class='comma'>,</span> <span class='id identifier rubyid_dst_io'>dst_io</span>)   <span class='comment'># =&gt; 47
</span><span class='id identifier rubyid_src_io'>src_io</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>
<span class='id identifier rubyid_dst_io'>dst_io</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>With argument <code>src_length</code> a non-negative integer, no more than that many bytes are copied:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_copy_stream'>copy_stream</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>10</span>) <span class='comment'># =&gt; 10
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span>)                   <span class='comment'># =&gt; &quot;First line&quot;</span></code></pre>

<p>With argument <code>src_offset</code> also given, the source stream is read beginning at that offset:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_copy_stream'>copy_stream</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>11</span><span class='comma'>,</span> <span class='int'>11</span>) <span class='comment'># =&gt; 11
</span><span class='const'>IO</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span>)                         <span class='comment'># =&gt; &quot;Second line&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L13314-L13343'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='13314' data-end='13343'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 13314</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_copy_stream(int argc, VALUE *argv, VALUE io)
{
    VALUE src, dst, length, src_offset;
    struct copy_stream_struct st;

    MEMZERO(&amp;st, struct copy_stream_struct, 1);

    rb_scan_args(argc, argv, &quot;22&quot;, &amp;src, &amp;dst, &amp;length, &amp;src_offset);

    st.src = src;
    st.dst = dst;

    st.src_fptr = NULL;
    st.dst_fptr = NULL;

    if (NIL_P(length))
        st.copy_length = (rb_off_t)-1;
    else
        st.copy_length = NUM2OFFT(length);

    if (NIL_P(src_offset))
        st.src_offset = (rb_off_t)-1;
    else
        st.src_offset = NUM2OFFT(src_offset);

    rb_ensure(copy_stream_body, (VALUE)&amp;st, copy_stream_finalize, (VALUE)&amp;st);

    return OFFT2NUM(st.total);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="for_fd-class_method">
  <h3 class='signature '>
    .<strong>for_fd</strong>(fd, mode = &#39;r&#39;, **opts)  &#x21d2; <code>IO</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Synonym for <a href="#new-class_method" title="IO.new (method)">.new</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L9607-L9613'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9607' data-end='9613'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 9607</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_for_fd(int argc, VALUE *argv, VALUE klass)
{
    VALUE io = rb_obj_alloc(klass);
    rb_io_initialize(argc, argv, io);
    return io;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="foreach-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>foreach</strong>(path, sep = $/, **opts) {|line| ... } &#x21d2; <code>nil</code> </span>
      <span class='overload'>.<strong>foreach</strong>(path, limit, **opts) {|line| ... } &#x21d2; <code>nil</code> </span>
      <span class='overload'>.<strong>foreach</strong>(path, sep, limit, **opts) {|line| ... } &#x21d2; <code>nil</code> </span>
      <span class='overload'>.<strong>foreach</strong>(...)  &#x21d2; <a href="Enumerator.html" title="Enumerator (class)">Enumerator</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Calls the block with each successive line read from the stream.</p>

<p>When called from class IO (but not subclasses of IO), this method has potential security vulnerabilities if called with untrusted input; see <code>Command Injection</code>.</p>

<p>The first argument must be a string that is the path to a file.</p>

<p>With only argument <a href="#path-instance_method" title="IO#path (method)">#path</a> given, parses lines from the file at the given <a href="#path-instance_method" title="IO#path (method)">#path</a>, as determined by the default line separator, and calls the block with each successive line:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_foreach'>foreach</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_line'>line</span> }</code></pre>

<p>Output: the same as above.</p>

<p>For both forms, command and path, the remaining arguments are the same.</p>

<p>With argument <code>sep</code> given, parses lines as determined by that line separator (see <code>Line Separator</code>):</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_foreach'>foreach</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>li</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_line'>line</span> }</code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>First li</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ne\nSecond li</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ne\n\nThird li</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ne\nFourth li</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ne\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>Each paragraph:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_foreach'>foreach</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_paragraph'>paragraph</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_paragraph'>paragraph</span> }</code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>First line\nSecond line\n\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Third line\nFourth line\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>With argument <code>limit</code> given, parses lines as determined by the default line separator and the given line-length limit (see <code>Line Limit</code>):</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_foreach'>foreach</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>7</span>) {<span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_line'>line</span> }</code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>First l</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ine\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Second </span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>line\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Third l</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ine\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Fourth l</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>line\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>With arguments <code>sep</code> and  <code>limit</code> given, parses lines as determined by the given line separator and the given line-length limit (see <code>Line Separator and Line Limit</code>):</p>

<p>Optional keyword arguments <code>opts</code> specify:</p>
<ul><li>
<p><code>Open Options</code>.</p>
</li><li>
<p><code>{Encoding</code> options}.</p>
</li><li>
<p><code>Line Options</code>.</p>
</li></ul>

<p>Returns an <a href="Enumerator.html" title="Enumerator (class)"><code>::Enumerator</code></a> if no block is given.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L11992-L12008'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11992' data-end='12008'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 11992</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_foreach(int argc, VALUE *argv, VALUE self)
{
    VALUE opt;
    int orig_argc = argc;
    struct foreach_arg arg;
    struct getline_arg garg;

    argc = rb_scan_args(argc, argv, &quot;12:&quot;, NULL, NULL, NULL, &amp;opt);
    RETURN_ENUMERATOR(self, orig_argc, argv);
    extract_getline_args(argc-1, argv+1, &amp;garg);
    open_key_args(self, argc, argv, opt, &amp;arg);
    if (NIL_P(arg.io)) return Qnil;
    extract_getline_opts(opt, &amp;garg);
    check_getline_args(&amp;garg.rs, &amp;garg.limit, garg.io = arg.io);
    return rb_ensure(io_s_foreach, (VALUE)&amp;garg, rb_io_close, arg.io);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="open-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>open</strong>(path, mode = &#39;r&#39;, perm = 0666, **opts)  &#x21d2; <a href="File.html" title="File (class)">File</a> </span>
      <span class='overload'>.<strong>open</strong>(path, mode = &#39;r&#39;, perm = 0666, **opts) {|f| ... } &#x21d2; <a href="Object.html" title="Object (class)">Object</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="File.html#open-class_method" title="File.open (method)">File.open</a>.  Creates a new IO object, via <a href="#new-class_method" title="IO.new (method)">.new</a> with the given arguments.</p>

<p>With no block given, returns the IO object.</p>

<p>With a block given, calls the block with the IO object and returns the block’s value.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[ <a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L8098'>GitHub</a> ]</span>

</section>

<section class='method_details' id="pipe-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>pipe</strong>(**opts)  &#x21d2; <code>IO</code> </span>
      <span class='overload'>.<strong>pipe</strong>(enc, **opts)  &#x21d2; <code>IO</code> </span>
      <span class='overload'>.<strong>pipe</strong>(ext_enc, int_enc, **opts)  &#x21d2; <code>IO</code> </span>
      <span class='overload'>.<strong>pipe</strong>(**opts) {|read_io, write_io| ... } &#x21d2; <a href="Object.html" title="Object (class)">Object</a> </span>
      <span class='overload'>.<strong>pipe</strong>(enc, **opts) {|read_io, write_io| ... } &#x21d2; <a href="Object.html" title="Object (class)">Object</a> </span>
      <span class='overload'>.<strong>pipe</strong>(ext_enc, int_enc, **opts) {|read_io, write_io| ... } &#x21d2; <a href="Object.html" title="Object (class)">Object</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates a pair of pipe endpoints, <code>read_io</code> and <code>write_io</code>, connected to each other.</p>

<p>If argument <code>enc_string</code> is given, it must be a string containing one of:</p>
<ul><li>
<p>The name of the encoding to be used as the external encoding.</p>
</li><li>
<p>The colon-separated names of two encodings to be used as the external and internal encodings.</p>
</li></ul>

<p>If argument <code>int_enc</code> is given, it must be an <a href="Encoding.html" title="Encoding (class)"><code>::Encoding</code></a> object or encoding name string that specifies the internal encoding to be used; if argument <code>ext_enc</code> is also given, it must be an <a href="Encoding.html" title="Encoding (class)"><code>::Encoding</code></a> object or encoding name string that specifies the external encoding to be used.</p>

<p>The string read from <code>read_io</code> is tagged with the external encoding; if an internal encoding is also specified, the string is converted to, and tagged with, that encoding.</p>

<p>If any encoding is specified, optional hash arguments specify the conversion option.</p>

<p>Optional keyword arguments <code>opts</code> specify:</p>
<ul><li>
<p><code>Open Options</code>.</p>
</li><li>
<p><code>{Encoding</code> Options}.</p>
</li></ul>

<p>With no block given, returns the two endpoints in an array:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_pipe'>pipe</span> <span class='comment'># =&gt; [#&lt;IO:fd 4&gt;, #&lt;IO:fd 5&gt;]</span></code></pre>

<p>With a block given, calls the block with the two endpoints; closes both endpoints and returns the value of the block:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_pipe'>pipe</span> {<span class='op'>|</span><span class='id identifier rubyid_read_io'>read_io</span><span class='comma'>,</span> <span class='id identifier rubyid_write_io'>write_io</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_read_io'>read_io</span><span class='semicolon'>;</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_write_io'>write_io</span> }</code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'>#&lt;IO:fd 6&gt;
</span><span class='comment'>#&lt;IO:fd 7&gt;</span></code></pre>

<p>Not available on all platforms.</p>

<p>In the example below, the two processes close the ends of the pipe that they are not using. This is not just a cosmetic nicety. The read end of a pipe will not generate an end of file condition if there are any writers with the pipe still open. In the case of the parent process, the <code>rd.read</code> will never return if it does not first issue a <code>wr.close</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_rd'>rd</span><span class='comma'>,</span> <span class='id identifier rubyid_wr'>wr</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_pipe'>pipe</span>

<span class='kw'>if</span> <span class='id identifier rubyid_fork'>fork</span>
  <span class='id identifier rubyid_wr'>wr</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>
  <span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Parent got: &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_rd'>rd</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_rd'>rd</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>
  <span class='const'><a href="Process.html" title="Process (module)">Process</a></span>.<span class='id identifier rubyid_wait'><a href="Process.html#wait-class_method" title="Process.wait (method)">wait</a></span>
<span class='kw'>else</span>
  <span class='id identifier rubyid_rd'>rd</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>
  <span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sending message to parent</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_wr'>wr</span>.<span class='id identifier rubyid_write'><a href="#write-class_method" title="IO.write (method)">write</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hi Dad</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_wr'>wr</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>
<span class='kw'>end</span></code></pre>

<p><em>produces:</em></p>

<pre class="code ruby"><code class="ruby"><span class='const'>Sending</span> <span class='id identifier rubyid_message'>message</span> <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_parent'>parent</span>
<span class='const'>Parent</span> <span class='label'>got:</span> <span class='op'>&lt;</span><span class='const'>Hi</span> <span class='const'>Dad</span><span class='op'>&gt;</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L11778-L11861'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11778' data-end='11861'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 11778</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_pipe(int argc, VALUE *argv, VALUE klass)
{
    int pipes[2], state;
    VALUE r, w, args[3], v1, v2;
    VALUE opt;
    rb_io_t *fptr, *fptr2;
    struct io_encoding_set_args ies_args;
    int fmode = 0;
    VALUE ret;

    argc = rb_scan_args(argc, argv, &quot;02:&quot;, &amp;v1, &amp;v2, &amp;opt);
    if (rb_pipe(pipes) &lt; 0)
        rb_sys_fail(0);

    args[0] = klass;
    args[1] = INT2NUM(pipes[0]);
    args[2] = INT2FIX(O_RDONLY);
    r = rb_protect(io_new_instance, (VALUE)args, &amp;state);
    if (state) {
        close(pipes[0]);
        close(pipes[1]);
        rb_jump_tag(state);
    }
    GetOpenFile(r, fptr);

    ies_args.fptr = fptr;
    ies_args.v1 = v1;
    ies_args.v2 = v2;
    ies_args.opt = opt;
    rb_protect(io_encoding_set_v, (VALUE)&amp;ies_args, &amp;state);
    if (state) {
        close(pipes[1]);
        io_close(r);
        rb_jump_tag(state);
    }

    args[1] = INT2NUM(pipes[1]);
    args[2] = INT2FIX(O_WRONLY);
    w = rb_protect(io_new_instance, (VALUE)args, &amp;state);
    if (state) {
        close(pipes[1]);
        if (!NIL_P(r)) rb_io_close(r);
        rb_jump_tag(state);
    }
    GetOpenFile(w, fptr2);
    rb_io_synchronized(fptr2);

    extract_binmode(opt, &amp;fmode);

    if ((fmode &amp; FMODE_BINMODE) &amp;&amp; NIL_P(v1)) {
        rb_io_ascii8bit_binmode(r);
        rb_io_ascii8bit_binmode(w);
    }

#if DEFAULT_TEXTMODE
    if ((fptr-&gt;mode &amp; FMODE_TEXTMODE) &amp;&amp; (fmode &amp; FMODE_BINMODE)) {
        fptr-&gt;mode &amp;= ~FMODE_TEXTMODE;
        setmode(fptr-&gt;fd, O_BINARY);
    }
#if RUBY_CRLF_ENVIRONMENT
    if (fptr-&gt;encs.ecflags &amp; ECONV_DEFAULT_NEWLINE_DECORATOR) {
        fptr-&gt;encs.ecflags |= ECONV_UNIVERSAL_NEWLINE_DECORATOR;
    }
#endif
#endif
    fptr-&gt;mode |= fmode;
#if DEFAULT_TEXTMODE
    if ((fptr2-&gt;mode &amp; FMODE_TEXTMODE) &amp;&amp; (fmode &amp; FMODE_BINMODE)) {
        fptr2-&gt;mode &amp;= ~FMODE_TEXTMODE;
        setmode(fptr2-&gt;fd, O_BINARY);
    }
#endif
    fptr2-&gt;mode |= fmode;

    ret = rb_assoc_new(r, w);
    if (rb_block_given_p()) {
        VALUE rw[2];
        rw[0] = r;
        rw[1] = w;
        return rb_ensure(rb_yield, ret, pipe_pair_close, (VALUE)rw);
    }
    return ret;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="popen-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>popen</strong>(env = {}, cmd, mode = &#39;r&#39;, **opts)  &#x21d2; <code>IO</code> </span>
      <span class='overload'>.<strong>popen</strong>(env =)  &#x21d2; <a href="Object.html" title="Object (class)">Object</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Executes the given command <code>cmd</code> as a subprocess whose $stdin and $stdout are connected to a new stream <code>io</code>.</p>

<p>This method has potential security vulnerabilities if called with untrusted input; see <code>Command Injection</code>.</p>

<p>If no block is given, returns the new stream, which depending on given <code>mode</code> may be open for reading, writing, or both. The stream should be explicitly closed (eventually) to avoid resource leaks.</p>

<p>If a block is given, the stream is passed to the block (again, open for reading, writing, or both); when the block exits, the stream is closed, and the block’s value is assigned to global variable <code>$?</code> and returned.</p>

<p>Optional argument <code>mode</code> may be any valid IO mode. See <code>Access Modes</code>.</p>

<p>Required argument <code>cmd</code> determines which of the following occurs:</p>
<ul><li>
<p>The process forks.</p>
</li><li>
<p>A specified program runs in a shell.</p>
</li><li>
<p>A specified program runs with specified arguments.</p>
</li><li>
<p>A specified program runs with specified arguments and a specified <code>argv0</code>.</p>
</li></ul>

<p>Each of these is detailed below.</p>

<p>The optional hash argument <code>env</code> specifies name/value pairs that are to be added to the environment variables for the subprocess:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_popen'>popen</span>({<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>FOO</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>}<span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ruby</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r+</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span><span class='op'>|</span>
  <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>puts ENV[&quot;FOO&quot;]</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_close_write'><a href="#close_write-instance_method" title="IO#close_write (method)">close_write</a></span>
  <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>
<span class='kw'>end</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>Optional keyword arguments <code>opts</code> specify:</p>
<ul><li>
<p><code>Open options</code>.</p>
</li><li>
<p><code>{Encoding</code> options}.</p>
</li><li>
<p>Options for <a href="Kernel.html#spawn-class_method" title="Kernel.spawn (method)">Kernel.spawn</a>.</p>
</li></ul>

<p><strong>Forked Process</strong></p>

<p>When argument <code>cmd</code> is the 1-character string <code>&#39;-&#39;</code>, causes the process to fork:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_popen'>popen</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span><span class='op'>|</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>
    <span class='gvar'>$stderr</span>.<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>In parent, child pid is </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_pid'><a href="#pid-instance_method" title="IO#pid (method)">pid</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='gvar'>$stderr</span>.<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>In child, pid is </span><span class='embexpr_beg'>#{</span><span class='gvar'>$$</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>In</span> <span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span> <span class='id identifier rubyid_pid'><a href="#pid-instance_method" title="IO#pid (method)">pid</a></span> <span class='id identifier rubyid_is'>is</span> <span class='int'>26253</span>
<span class='const'>In</span> <span class='id identifier rubyid_child'>child</span><span class='comma'>,</span> <span class='id identifier rubyid_pid'><a href="#pid-instance_method" title="IO#pid (method)">pid</a></span> <span class='id identifier rubyid_is'>is</span> <span class='int'>26253</span></code></pre>

<p>Note that this is not supported on all platforms.</p>

<p><strong>Shell Subprocess</strong></p>

<p>When argument <code>cmd</code> is a single string (but not <code>&#39;-&#39;</code>), the program named <code>cmd</code> is run as a shell command:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_popen'>popen</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>uname</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span><span class='op'>|</span>
  <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_readlines'><a href="#readlines-class_method" title="IO.readlines (method)">readlines</a></span>
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby">[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Linux\n</span><span class='tstring_end'>&quot;</span></span>]</code></pre>

<p>Another example:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_popen'>popen</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/bin/sh</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r+</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span><span class='op'>|</span>
  <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ls</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_close_write'><a href="#close_write-instance_method" title="IO#close_write (method)">close_write</a></span>
  <span class='gvar'>$stderr</span>.<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_readlines'><a href="#readlines-class_method" title="IO.readlines (method)">readlines</a></span>.<span class='id identifier rubyid_size'>size</span>
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='int'>213</span></code></pre>

<p><strong>Program Subprocess</strong></p>

<p>When argument <code>cmd</code> is an array of strings, the program named <code>cmd[0]</code> is run with all elements of <code>cmd</code> as its arguments:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_popen'>popen</span>([<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>du</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>..</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span>]) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span><span class='op'>|</span>
  <span class='gvar'>$stderr</span>.<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_readlines'><a href="#readlines-class_method" title="IO.readlines (method)">readlines</a></span>.<span class='id identifier rubyid_size'>size</span>
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='int'>1111</span></code></pre>

<p><strong>Program Subprocess with <code>argv0</code></strong></p>

<p>When argument <code>cmd</code> is an array whose first element is a 2-element string array and whose remaining elements (if any) are strings:</p>
<ul><li>
<p><code>cmd[0][0]</code> (the first string in the nested array) is the name of a program that is run.</p>
</li><li>
<p><code>cmd[0][1]</code> (the second string in the nested array) is set as the program’s <code>argv[0]</code>.</p>
</li><li>
<p><code>cmd[1..-1]</code> (the strings in the outer array) are the program’s arguments.</p>
</li></ul>

<p>Example (sets <code>$0</code> to ‘foo’):</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_popen'>popen</span>([[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/bin/sh</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>]<span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-c</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>echo $0</span><span class='tstring_end'>&#39;</span></span>]).<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span> <span class='comment'># =&gt; &quot;foo\n&quot;</span></code></pre>

<p><strong>Some Special Examples</strong></p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Set IO encoding.
</span><span class='const'>IO</span>.<span class='id identifier rubyid_popen'>popen</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>nkf -e filename</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_external_encoding'><a href="#external_encoding-instance_method" title="IO#external_encoding (method)">external_encoding</a></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EUC-JP</span><span class='tstring_end'>&quot;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_nkf_io'>nkf_io</span><span class='op'>|</span>
  <span class='id identifier rubyid_euc_jp_string'>euc_jp_string</span> <span class='op'>=</span> <span class='id identifier rubyid_nkf_io'>nkf_io</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>
}

<span class='comment'># Merge standard output and standard error using Kernel#spawn option. See Kernel#spawn.
</span><span class='const'>IO</span>.<span class='id identifier rubyid_popen'>popen</span>([<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ls</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_err'>err</span><span class='op'>=&gt;</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_child'>child</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_out'>out</span>]]) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
  <span class='id identifier rubyid_ls_result_with_error'>ls_result_with_error</span> <span class='op'>=</span> <span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>
<span class='kw'>end</span>

<span class='comment'># Use mixture of spawn options and IO options.
</span><span class='const'>IO</span>.<span class='id identifier rubyid_popen'>popen</span>([<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ls</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span>]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_err'>err</span><span class='op'>=&gt;</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_child'>child</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_out'>out</span>]) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
  <span class='id identifier rubyid_ls_result_with_error'>ls_result_with_error</span> <span class='op'>=</span> <span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>
<span class='kw'>end</span>

 <span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_popen'>popen</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>uname</span><span class='tstring_end'>&quot;</span></span>)
 <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readlines'><a href="#readlines-class_method" title="IO.readlines (method)">readlines</a></span>
 <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>
 <span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Parent is </span><span class='embexpr_beg'>#{</span><span class='const'><a href="Process.html" title="Process (module)">Process</a></span>.<span class='id identifier rubyid_pid'><a href="Process.html#pid-class_method" title="Process.pid (method)">pid</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
 <span class='const'>IO</span>.<span class='id identifier rubyid_popen'>popen</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>date</span><span class='tstring_end'>&quot;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span> }
 <span class='const'>IO</span>.<span class='id identifier rubyid_popen'>popen</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='gvar'>$stderr</span>.<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><a href="Process.html" title="Process (module)">Process</a></span>.<span class='id identifier rubyid_pid'><a href="Process.html#pid-class_method" title="Process.pid (method)">pid</a></span><span class='embexpr_end'>}</span><span class='tstring_content'> is here, f is </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_inspect'><a href="#inspect-instance_method" title="IO#inspect (method)">inspect</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>}
 <span class='id identifier rubyid_p'>p</span> <span class='gvar'>$?</span>
 <span class='const'>IO</span>.<span class='id identifier rubyid_popen'>popen</span>(<span class='qwords'><span class='qwords_beg'>%w&quot;</span><span class='tstring_content'>sed</span><span class='words_sep'> </span><span class='tstring_content'>-e</span><span class='words_sep'> </span><span class='tstring_content'>s|^|&lt;foo&gt;|</span><span class='words_sep'> </span><span class='tstring_content'>-e</span><span class='words_sep'> </span><span class='tstring_content'>s&amp;$&amp;;zot;&amp;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>r+</span><span class='tstring_end'>&quot;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
   <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span><span class='semicolon'>;</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close_write'><a href="#close_write-instance_method" title="IO#close_write (method)">close_write</a></span><span class='semicolon'>;</span> <span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>
 }</code></pre>

<p>Output (from last section):</p>

<pre class="code ruby"><code class="ruby">[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Linux\n</span><span class='tstring_end'>&quot;</span></span>]
<span class='const'>Parent</span> <span class='id identifier rubyid_is'>is</span> <span class='int'>21346</span>
<span class='const'>Thu</span> <span class='const'>Jan</span> <span class='int'>15</span> <span class='int'>22</span><span class='symbeg'>:</span><span class='int'>41</span><span class='symbeg'>:</span><span class='int'>19</span> <span class='const'>JST</span> <span class='int'>2009</span>
<span class='int'>21346</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_here'>here</span><span class='comma'>,</span> <span class='id identifier rubyid_f'>f</span> <span class='id identifier rubyid_is'>is</span> <span class='comment'>#&lt;IO:fd 3&gt;
</span><span class='int'>21352</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_here'>here</span><span class='comma'>,</span> <span class='id identifier rubyid_f'>f</span> <span class='id identifier rubyid_is'>is</span> <span class='kw'>nil</span>
<span class='comment'>#&lt;Process::Status: pid 21352 exit 0&gt;
</span><span class='op'>&lt;</span><span class='id identifier rubyid_foo'>foo</span><span class='op'>&gt;</span><span class='id identifier rubyid_bar'>bar</span><span class='semicolon'>;</span><span class='id identifier rubyid_zot'>zot</span><span class='semicolon'>;</span></code></pre>

<p>Raises exceptions that <a href="#pipe-class_method" title="IO.pipe (method)">.pipe</a> and <a href="Kernel.html#spawn-class_method" title="Kernel.spawn (method)">Kernel.spawn</a> raise.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L7897-L7917'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='7897' data-end='7917'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 7897</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_popen(int argc, VALUE *argv, VALUE klass)
{
    VALUE pname, pmode = Qnil, opt = Qnil, env = Qnil;

    if (argc &gt; 1 &amp;&amp; !NIL_P(opt = rb_check_hash_type(argv[argc-1]))) --argc;
    if (argc &gt; 1 &amp;&amp; !NIL_P(env = rb_check_hash_type(argv[0]))) --argc, ++argv;
    switch (argc) {
      case 2:
        pmode = argv[1];
      case 1:
        pname = argv[0];
        break;
      default:
        {
            int ex = !NIL_P(opt);
            rb_error_arity(argc + ex, 1 + ex, 2 + ex);
        }
    }
    return popen_finish(rb_io_popen(pname, pmode, env, opt), klass);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="read-class_method">
  <h3 class='signature '>
    .<strong>read</strong>(path, length = nil, offset = 0, **opts)  &#x21d2; <a href="String.html" title="String (class)">String</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Opens the stream, reads and returns some or all of its content, and closes the stream; returns <code>nil</code> if no bytes were read.</p>

<p>When called from class IO (but not subclasses of IO), this method has potential security vulnerabilities if called with untrusted input; see <code>Command Injection</code>.</p>

<p>The first argument must be a string that is the path to a file.</p>

<p>With only argument <a href="#path-instance_method" title="IO#path (method)">#path</a> given, reads in text mode and returns the entire content of the file at the given path:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_read'>read</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># =&gt; &quot;First line\nSecond line\n\nThird line\nFourth line\n&quot;</span></code></pre>

<p>On Windows, text mode can terminate reading and leave bytes in the file unread when encountering certain special bytes. Consider using <a href="#binread-class_method" title="IO.binread (method)">.binread</a> if all bytes in the file should be read.</p>

<p>With argument <code>length</code>, returns <code>length</code> bytes if available:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_read'>read</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>7</span>) <span class='comment'># =&gt; &quot;First l&quot;
</span><span class='const'>IO</span>.<span class='id identifier rubyid_read'>read</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>700</span>)
<span class='comment'># =&gt; &quot;First line\r\nSecond line\r\n\r\nFourth line\r\nFifth line\r\n&quot;</span></code></pre>

<p>With arguments <code>length</code> and <code>offset</code>, returns <code>length</code> bytes if available, beginning at the given <code>offset</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_read'>read</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>10</span><span class='comma'>,</span> <span class='int'>2</span>)   <span class='comment'># =&gt; &quot;rst line\nS&quot;
</span><span class='const'>IO</span>.<span class='id identifier rubyid_read'>read</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>10</span><span class='comma'>,</span> <span class='int'>200</span>) <span class='comment'># =&gt; nil</span></code></pre>

<p>Optional keyword arguments <code>opts</code> specify:</p>
<ul><li>
<p><code>Open Options</code>.</p>
</li><li>
<p><code>{Encoding</code> options}.</p>
</li></ul>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L12150-L12177'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='12150' data-end='12177'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 12150</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_read(int argc, VALUE *argv, VALUE io)
{
    VALUE opt, offset;
    long off;
    struct foreach_arg arg;

    argc = rb_scan_args(argc, argv, &quot;13:&quot;, NULL, NULL, &amp;offset, NULL, &amp;opt);
    if (!NIL_P(offset) &amp;&amp; (off = NUM2LONG(offset)) &lt; 0) {
        rb_raise(rb_eArgError, &quot;negative offset %ld given&quot;, off);
    }
    open_key_args(io, argc, argv, opt, &amp;arg);
    if (NIL_P(arg.io)) return Qnil;
    if (!NIL_P(offset)) {
        struct seek_arg sarg;
        int state = 0;
        sarg.io = arg.io;
        sarg.offset = offset;
        sarg.mode = SEEK_SET;
        rb_protect(seek_before_access, (VALUE)&amp;sarg, &amp;state);
        if (state) {
            rb_io_close(arg.io);
            rb_jump_tag(state);
        }
        if (arg.argc == 2) arg.argc = 1;
    }
    return rb_ensure(io_s_read, (VALUE)&amp;arg, rb_io_close, arg.io);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="readlines-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>readlines</strong>(path, sep = $/, **opts)  &#x21d2; <a href="Array.html" title="Array (class)">Array</a> </span>
      <span class='overload'>.<strong>readlines</strong>(path, limit, **opts)  &#x21d2; <a href="Array.html" title="Array (class)">Array</a> </span>
      <span class='overload'>.<strong>readlines</strong>(path, sep, limit, **opts)  &#x21d2; <a href="Array.html" title="Array (class)">Array</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an array of all lines read from the stream.</p>

<p>When called from class IO (but not subclasses of IO), this method has potential security vulnerabilities if called with untrusted input; see <code>Command Injection</code>.</p>

<p>The first argument must be a string that is the path to a file.</p>

<p>With only argument <a href="#path-instance_method" title="IO#path (method)">#path</a> given, parses lines from the file at the given <a href="#path-instance_method" title="IO#path (method)">#path</a>, as determined by the default line separator, and returns those lines in an array:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_readlines'>readlines</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># =&gt; [&quot;First line\n&quot;, &quot;Second line\n&quot;, &quot;\n&quot;, &quot;Third line\n&quot;, &quot;Fourth line\n&quot;]</span></code></pre>

<p>With argument <code>sep</code> given, parses lines as determined by that line separator (see <code>Line Separator</code>):</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Ordinary separator.
</span><span class='const'>IO</span>.<span class='id identifier rubyid_readlines'>readlines</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>li</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># =&gt;[&quot;First li&quot;, &quot;ne\nSecond li&quot;, &quot;ne\n\nThird li&quot;, &quot;ne\nFourth li&quot;, &quot;ne\n&quot;]
</span><span class='comment'># Get-paragraphs separator.
</span><span class='const'>IO</span>.<span class='id identifier rubyid_readlines'>readlines</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># =&gt; [&quot;First line\nSecond line\n\n&quot;, &quot;Third line\nFourth line\n&quot;]
</span><span class='comment'># Get-all separator.
</span><span class='const'>IO</span>.<span class='id identifier rubyid_readlines'>readlines</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='kw'>nil</span>)
<span class='comment'># =&gt; [&quot;First line\nSecond line\n\nThird line\nFourth line\n&quot;]</span></code></pre>

<p>With argument <code>limit</code> given, parses lines as determined by the default line separator and the given line-length limit (see <code>Line Limit</code>):</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_readlines'>readlines</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>7</span>)
<span class='comment'># =&gt; [&quot;First l&quot;, &quot;ine\n&quot;, &quot;Second &quot;, &quot;line\n&quot;, &quot;\n&quot;, &quot;Third l&quot;, &quot;ine\n&quot;, &quot;Fourth &quot;, &quot;line\n&quot;]</span></code></pre>

<p>With arguments <code>sep</code> and  <code>limit</code> given, parses lines as determined by the given line separator and the given line-length limit (see <code>Line Separator and Line Limit</code>):</p>

<p>Optional keyword arguments <code>opts</code> specify:</p>
<ul><li>
<p><code>Open Options</code>.</p>
</li><li>
<p><code>{Encoding</code> options}.</p>
</li><li>
<p><code>Line Options</code>.</p>
</li></ul>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L12071-L12085'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='12071' data-end='12085'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 12071</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_readlines(int argc, VALUE *argv, VALUE io)
{
    VALUE opt;
    struct foreach_arg arg;
    struct getline_arg garg;

    argc = rb_scan_args(argc, argv, &quot;12:&quot;, NULL, NULL, NULL, &amp;opt);
    extract_getline_args(argc-1, argv+1, &amp;garg);
    open_key_args(io, argc, argv, opt, &amp;arg);
    if (NIL_P(arg.io)) return Qnil;
    extract_getline_opts(opt, &amp;garg);
    check_getline_args(&amp;garg.rs, &amp;garg.limit, garg.io = arg.io);
    return rb_ensure(io_s_readlines, (VALUE)&amp;garg, rb_io_close, arg.io);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="select-class_method">
  <h3 class='signature '>
    .<strong>select</strong>(read_ios, write_ios = [], error_ios = [], timeout = nil)  &#x21d2; <a href="Array.html" title="Array (class)">Array</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="Kernel.html#select-class_method" title="Kernel.select (method)">Kernel.select</a>. Invokes system call <a href="https://linux.die.net/man/2/select" target="_parent" title="select(2)">select(2)</a>, which monitors multiple file descriptors, waiting until one or more of the file descriptors becomes ready for some class of I/O operation.</p>

<p>Not implemented on all platforms.</p>

<p>Each of the arguments <code>read_ios</code>, <code>write_ios</code>, and <code>error_ios</code> is an array of <code>IO</code> objects.</p>

<p>Argument <a href="#timeout-instance_method" title="IO#timeout (method)">#timeout</a> is an integer timeout interval in seconds.</p>

<p>The method monitors the IO objects given in all three arrays, waiting for some to be ready; returns a 3-element array whose elements are:</p>
<ul><li>
<p>An array of the objects in <code>read_ios</code> that are ready for reading.</p>
</li><li>
<p>An array of the objects in <code>write_ios</code> that are ready for writing.</p>
</li><li>
<p>An array of the objects in <code>error_ios</code> have pending exceptions.</p>
</li></ul>

<p>If no object becomes ready within the given <a href="#timeout-instance_method" title="IO#timeout (method)">#timeout</a>, <code>nil</code> is returned.</p>

<p>IO.select peeks the buffer of IO objects for testing readability. If the IO buffer is not empty, IO.select immediately notifies readability.  This “peek” only happens for IO objects.  It does not happen for IO-like objects such as <code>OpenSSL::SSL::SSLSocket</code>.</p>

<p>The best way to use IO.select is invoking it after non-blocking methods such as <a href="#read_nonblock-instance_method" title="IO#read_nonblock (method)">#read_nonblock</a>, <a href="#write_nonblock-instance_method" title="IO#write_nonblock (method)">#write_nonblock</a>, etc.  The methods raise an exception which is extended by <a href="IO/WaitReadable.html" title="IO::WaitReadable (module)"><code>::IO::WaitReadable</code></a> or <a href="IO/WaitWritable.html" title="IO::WaitWritable (module)"><code>::IO::WaitWritable</code></a>.  The modules notify how the caller should wait with IO.select.  If <a href="IO/WaitReadable.html" title="IO::WaitReadable (module)"><code>::IO::WaitReadable</code></a> is raised, the caller should wait for reading.  If <a href="IO/WaitWritable.html" title="IO::WaitWritable (module)"><code>::IO::WaitWritable</code></a> is raised, the caller should wait for writing.</p>

<p>So, blocking read (#readpartial) can be emulated using <a href="#read_nonblock-instance_method" title="IO#read_nonblock (method)">#read_nonblock</a> and IO.select as follows:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>begin</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_io_like'>io_like</span>.<span class='id identifier rubyid_read_nonblock'><a href="#read_nonblock-instance_method" title="IO#read_nonblock (method)">read_nonblock</a></span>(<span class='id identifier rubyid_maxlen'>maxlen</span>)
<span class='kw'>rescue</span> <span class='const'>IO</span><span class='op'>::</span><span class='const'><a href="IO/WaitReadable.html" title="IO::WaitReadable (module)">WaitReadable</a></span>
  <span class='const'>IO</span>.<span class='id identifier rubyid_select'>select</span>([<span class='id identifier rubyid_io_like'>io_like</span>])
  <span class='kw'>retry</span>
<span class='kw'>rescue</span> <span class='const'>IO</span><span class='op'>::</span><span class='const'><a href="IO/WaitWritable.html" title="IO::WaitWritable (module)">WaitWritable</a></span>
  <span class='const'>IO</span>.<span class='id identifier rubyid_select'>select</span>(<span class='kw'>nil</span><span class='comma'>,</span> [<span class='id identifier rubyid_io_like'>io_like</span>])
  <span class='kw'>retry</span>
<span class='kw'>end</span></code></pre>

<p>Especially, the combination of non-blocking methods and IO.select is preferred for <code>IO</code> like objects such as <code>OpenSSL::SSL::SSLSocket</code>.  It has <a href="#to_io-instance_method" title="IO#to_io (method)">#to_io</a> method to return underlying <code>IO</code> object.  <code>select</code> calls <a href="#to_io-instance_method" title="IO#to_io (method)">#to_io</a> to obtain the file descriptor to wait.</p>

<p>This means that readability notified by IO.select doesn’t mean readability from <code>OpenSSL::SSL::SSLSocket</code> object.</p>

<p>The most likely situation is that <code>OpenSSL::SSL::SSLSocket</code> buffers some data.  IO.select doesn’t see the buffer.  So IO.select can block when <code>OpenSSL::SSL::SSLSocket#readpartial</code> doesn’t block.</p>

<p>However, several more complicated situations exist.</p>

<p>SSL is a protocol which is sequence of records. The record consists of multiple bytes. So, the remote side of SSL sends a partial record, <code>select</code> notifies readability but <code>OpenSSL::SSL::SSLSocket</code> cannot decrypt a byte and <code>OpenSSL::SSL::SSLSocket#readpartial</code> will block.</p>

<p>Also, the remote side can request SSL renegotiation which forces the local SSL engine to write some data. This means <code>OpenSSL::SSL::SSLSocket#readpartial</code> may invoke <a href="#write-instance_method" title="IO#write (method)">#write</a> system call and it can block. In such a situation, <code>OpenSSL::SSL::SSLSocket#read_nonblock</code> raises <a href="IO/WaitWritable.html" title="IO::WaitWritable (module)"><code>::IO::WaitWritable</code></a> instead of blocking. So, the caller should wait for ready for writability as above example.</p>

<p>The combination of non-blocking methods and IO.select is also useful for streams such as tty, pipe socket socket when multiple processes read from a stream.</p>

<p>Finally, Linux kernel developers don’t guarantee that readability of select(2) means readability of following read(2) even for a single process; see <a href="https://linux.die.net/man/2/select" target="_parent" title="select(2)">select(2)</a></p>

<p>Invoking IO.select before <a href="#readpartial-instance_method" title="IO#readpartial (method)">#readpartial</a> works well as usual. However it is not the best way to use IO.select.</p>

<p>The writability notified by select(2) doesn’t show how many bytes are writable. <a href="#write-instance_method" title="IO#write (method)">#write</a> method blocks until given whole string is written. So, <code>IO#write(two or more bytes)</code> can block after writability is notified by IO.select.  <a href="#write_nonblock-instance_method" title="IO#write_nonblock (method)">#write_nonblock</a> is required to avoid the blocking.</p>

<p>Blocking write (#write) can be emulated using <a href="#write_nonblock-instance_method" title="IO#write_nonblock (method)">#write_nonblock</a> and <code>select</code> as follows: <a href="IO/WaitReadable.html" title="IO::WaitReadable (module)"><code>::IO::WaitReadable</code></a> should also be rescued for SSL renegotiation in <code>OpenSSL::SSL::SSLSocket</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>while</span> <span class='int'>0</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_bytesize'>bytesize</span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_written'>written</span> <span class='op'>=</span> <span class='id identifier rubyid_io_like'>io_like</span>.<span class='id identifier rubyid_write_nonblock'><a href="#write_nonblock-instance_method" title="IO#write_nonblock (method)">write_nonblock</a></span>(<span class='id identifier rubyid_string'>string</span>)
  <span class='kw'>rescue</span> <span class='const'>IO</span><span class='op'>::</span><span class='const'><a href="IO/WaitReadable.html" title="IO::WaitReadable (module)">WaitReadable</a></span>
    <span class='const'>IO</span>.<span class='id identifier rubyid_select'>select</span>([<span class='id identifier rubyid_io_like'>io_like</span>])
    <span class='kw'>retry</span>
  <span class='kw'>rescue</span> <span class='const'>IO</span><span class='op'>::</span><span class='const'><a href="IO/WaitWritable.html" title="IO::WaitWritable (module)">WaitWritable</a></span>
    <span class='const'>IO</span>.<span class='id identifier rubyid_select'>select</span>(<span class='kw'>nil</span><span class='comma'>,</span> [<span class='id identifier rubyid_io_like'>io_like</span>])
    <span class='kw'>retry</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='id identifier rubyid_string'>string</span>.<span class='id identifier rubyid_byteslice'>byteslice</span>(<span class='id identifier rubyid_written'>written</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span>)
<span class='kw'>end</span></code></pre>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_rp'>rp</span><span class='comma'>,</span> <span class='id identifier rubyid_wp'>wp</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>
<span class='id identifier rubyid_mesg'>mesg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ping </span><span class='tstring_end'>&quot;</span></span>
<span class='int'>100</span>.<span class='id identifier rubyid_times'>times</span> {
  <span class='comment'># IO.select follows IO#read.  Not the best way to use IO.select.
</span>  <span class='id identifier rubyid_rs'>rs</span><span class='comma'>,</span> <span class='id identifier rubyid_ws'>ws</span><span class='comma'>,</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_select'>select</span>([<span class='id identifier rubyid_rp'>rp</span>]<span class='comma'>,</span> [<span class='id identifier rubyid_wp'>wp</span>])
  <span class='kw'>if</span> <span class='id identifier rubyid_r'>r</span> <span class='op'>=</span> <span class='id identifier rubyid_rs'>rs</span>[<span class='int'>0</span>]
    <span class='id identifier rubyid_ret'>ret</span> <span class='op'>=</span> <span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>(<span class='int'>5</span>)
    <span class='id identifier rubyid_print'><a href="#print-instance_method" title="IO#print (method)">print</a></span> <span class='id identifier rubyid_ret'>ret</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_ret'>ret</span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>ping</span><span class='regexp_end'>/</span></span>
      <span class='id identifier rubyid_mesg'>mesg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pong\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>pong</span><span class='regexp_end'>/</span></span>
      <span class='id identifier rubyid_mesg'>mesg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ping </span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_w'>w</span> <span class='op'>=</span> <span class='id identifier rubyid_ws'>ws</span>[<span class='int'>0</span>]
    <span class='id identifier rubyid_w'>w</span>.<span class='id identifier rubyid_write'><a href="#write-class_method" title="IO.write (method)">write</a></span>(<span class='id identifier rubyid_mesg'>mesg</span>)
  <span class='kw'>end</span>
}</code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ping'>ping</span> <span class='id identifier rubyid_pong'>pong</span>
<span class='id identifier rubyid_ping'>ping</span> <span class='id identifier rubyid_pong'>pong</span>
<span class='id identifier rubyid_ping'>ping</span> <span class='id identifier rubyid_pong'>pong</span>
(<span class='id identifier rubyid_snipped'>snipped</span>)
<span class='id identifier rubyid_ping'>ping</span></code></pre>

  </div>
</div>

</section>

<section class='method_details' id="sysopen-class_method">
  <h3 class='signature '>
    .<strong>sysopen</strong>(path, mode = &#39;r&#39;, perm = 0666)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Opens the file at the given path with the given mode and permissions; returns the integer file descriptor.</p>

<p>If the file is to be readable, it must exist; if the file is to be writable and does not exist, it is created with the given permissions:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_write'><a href="#write-class_method" title="IO.write (method)">write</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; 0
</span><span class='const'>IO</span>.<span class='id identifier rubyid_sysopen'>sysopen</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span>)      <span class='comment'># =&gt; 8
</span><span class='const'>IO</span>.<span class='id identifier rubyid_sysopen'>sysopen</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; 9</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L8128-L8153'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8128' data-end='8153'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 8128</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_sysopen(int argc, VALUE *argv, VALUE _)
{
    VALUE fname, vmode, vperm;
    VALUE intmode;
    int oflags, fd;
    mode_t perm;

    rb_scan_args(argc, argv, &quot;12&quot;, &amp;fname, &amp;vmode, &amp;vperm);
    FilePathValue(fname);

    if (NIL_P(vmode))
        oflags = O_RDONLY;
    else if (!NIL_P(intmode = rb_check_to_integer(vmode, &quot;to_int&quot;)))
        oflags = NUM2INT(intmode);
    else {
        SafeStringValue(vmode);
        oflags = rb_io_modestr_oflags(StringValueCStr(vmode));
    }
    if (NIL_P(vperm)) perm = 0666;
    else              perm = NUM2MODET(vperm);

    RB_GC_GUARD(fname) = rb_str_new4(fname);
    fd = rb_sysopen(fname, oflags, perm);
    return INT2NUM(fd);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="try_convert-class_method">
  <h3 class='signature '>
    .<strong>try_convert</strong>(object)  &#x21d2; <code>IO</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Attempts to convert <code>object</code> into an IO object via method <a href="#to_io-instance_method" title="IO#to_io (method)">#to_io</a>; returns the new IO object if successful, or <code>nil</code> otherwise:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_try_convert'>try_convert</span>(<span class='const'><a href="top-level-namespace.html#STDOUT-constant" title="STDOUT (constant)">STDOUT</a></span>)   <span class='comment'># =&gt; #&lt;IO:&lt;STDOUT&gt;&gt;
</span><span class='const'>IO</span>.<span class='id identifier rubyid_try_convert'>try_convert</span>(<span class='const'><a href="ARGF.html" title="ARGF (class)">ARGF</a></span>)     <span class='comment'># =&gt; #&lt;IO:&lt;STDIN&gt;&gt;
</span><span class='const'>IO</span>.<span class='id identifier rubyid_try_convert'>try_convert</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>STDOUT</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L893-L897'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='893' data-end='897'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 893</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_try_convert(VALUE dummy, VALUE io)
{
    return rb_io_check_io(io);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="write-class_method">
  <h3 class='signature '>
    .<strong>write</strong>(path, data, offset = 0, **opts)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Opens the stream, writes the given <code>data</code> to it, and closes the stream; returns the number of bytes written.</p>

<p>When called from class IO (but not subclasses of IO), this method has potential security vulnerabilities if called with untrusted input; see <code>Command Injection</code>.</p>

<p>The first argument must be a string that is the path to a file.</p>

<p>With only argument <a href="#path-instance_method" title="IO#path (method)">#path</a> given, writes the given <code>data</code> to the file at that path:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_write'>write</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; 3
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span>)          <span class='comment'># =&gt; &quot;abc&quot;</span></code></pre>

<p>If <code>offset</code> is zero (the default), the file is overwritten:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_write'>write</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>A</span><span class='tstring_end'>&#39;</span></span>)      <span class='comment'># =&gt; 1
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span>)          <span class='comment'># =&gt; &quot;A&quot;</span></code></pre>

<p>If <code>offset</code> in within the file content, the file is partly overwritten:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_write'>write</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abcdef</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; 3
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span>)          <span class='comment'># =&gt; &quot;abcdef&quot;
</span><span class='comment'># Offset within content.
</span><span class='const'>IO</span>.<span class='id identifier rubyid_write'>write</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>012</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>2</span>) <span class='comment'># =&gt; 3
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span>)          <span class='comment'># =&gt; &quot;ab012f&quot;</span></code></pre>

<p>If <code>offset</code> is outside the file content, the file is padded with null characters <code>&quot;\u0000&quot;</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_write'>write</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xyz</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>10</span>) <span class='comment'># =&gt; 3
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span>)           <span class='comment'># =&gt; &quot;ab012f\u0000\u0000\u0000\u0000xyz&quot;</span></code></pre>

<p>Optional keyword arguments <code>opts</code> specify:</p>
<ul><li>
<p><code>Open Options</code>.</p>
</li><li>
<p><code>{Encoding</code> options}.</p>
</li></ul>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L12327-L12331'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='12327' data-end='12331'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 12327</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_s_write(int argc, VALUE *argv, VALUE io)
{
    return io_s_write(argc, argv, io, 0);
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="autoclose=-instance_method">
  <h3 class='signature rw first'>
    #<strong>autoclose=</strong>(bool)  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets auto-close flag.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='const'><a href="File.html" title="File (class)">File</a></span><span class='op'>::</span><span class='const'><a href="File/Constants.html#NULL-constant" title="File::Constants::NULL (constant)">NULL</a></span>)
<span class='const'>IO</span>.<span class='id identifier rubyid_for_fd'><a href="#for_fd-class_method" title="IO.for_fd (method)">for_fd</a></span>(<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_fileno'><a href="#fileno-instance_method" title="IO#fileno (method)">fileno</a></span>).<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span> <span class='comment'># raises Errno::EBADF
</span>
<span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='const'><a href="File.html" title="File (class)">File</a></span><span class='op'>::</span><span class='const'><a href="File/Constants.html#NULL-constant" title="File::Constants::NULL (constant)">NULL</a></span>)
<span class='id identifier rubyid_g'>g</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_for_fd'><a href="#for_fd-class_method" title="IO.for_fd (method)">for_fd</a></span>(<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_fileno'><a href="#fileno-instance_method" title="IO#fileno (method)">fileno</a></span>)
<span class='id identifier rubyid_g'>g</span>.<span class='id identifier rubyid_autoclose'>autoclose</span> <span class='op'>=</span> <span class='kw'>false</span>
<span class='id identifier rubyid_g'>g</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span> <span class='comment'># won&#39;t cause Errno::EBADF</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L9648-L9658'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9648' data-end='9658'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 9648</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_set_autoclose(VALUE io, VALUE autoclose)
{
    rb_io_t *fptr;
    GetOpenFile(io, fptr);
    if (!RTEST(autoclose))
        fptr-&gt;mode |= FMODE_EXTERNAL;
    else
        fptr-&gt;mode &amp;= ~FMODE_EXTERNAL;
    return autoclose;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="autoclose?-instance_method">
  <h3 class='signature rw'>
    #<strong>autoclose?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if the underlying file descriptor of <em>ios</em> will be closed at its finalization or at calling <a href="#close-instance_method" title="IO#close (method)">#close</a>, otherwise <code>false</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L9623-L9629'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9623' data-end='9629'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 9623</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_autoclose_p(VALUE io)
{
    rb_io_t *fptr = RFILE(io)-&gt;fptr;
    rb_io_check_closed(fptr);
    return RBOOL(!(fptr-&gt;mode &amp; FMODE_EXTERNAL));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="binmode-instance_method">
  <h3 class='signature ro'>
    #<strong>binmode</strong>  &#x21d2; <code>self</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets the stream’s data mode as binary (see <code>{Data</code> Mode}).</p>

<p>A stream’s data mode may not be changed from binary to text.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L6329-L6340'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='6329' data-end='6340'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 6329</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_binmode_m(VALUE io)
{
    VALUE write_io;

    rb_io_ascii8bit_binmode(io);

    write_io = GetWriteIO(io);
    if (write_io != io)
        rb_io_ascii8bit_binmode(write_io);
    return io;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="binmode?-instance_method">
  <h3 class='signature ro'>
    #<strong>binmode?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if the stream is on binary mode, <code>false</code> otherwise. See <code>{Data</code> Mode}.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L6350-L6356'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='6350' data-end='6356'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 6350</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_binmode_p(VALUE io)
{
    rb_io_t *fptr;
    GetOpenFile(io, fptr);
    return RBOOL(fptr-&gt;mode &amp; FMODE_BINMODE);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="close_on_exec=-instance_method">
  <h3 class='signature rw'>
    #<strong>close_on_exec=</strong>(bool)  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets a close-on-exec flag.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='const'><a href="File.html" title="File (class)">File</a></span><span class='op'>::</span><span class='const'><a href="File/Constants.html#NULL-constant" title="File::Constants::NULL (constant)">NULL</a></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close_on_exec'>close_on_exec</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='id identifier rubyid_system'>system</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cat</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/proc/self/fd/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_fileno'><a href="#fileno-instance_method" title="IO#fileno (method)">fileno</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># cat: /proc/self/fd/3: No such file or directory
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_closed?'><a href="#closed%3F-instance_method" title="IO#closed? (method)">closed?</a></span>                <span class='comment'>#=&gt; false</span></code></pre>

<p>Ruby sets close-on-exec flags of all file descriptors by default since Ruby 2.0.0. So you don’t need to set by yourself. Also, unsetting a close-on-exec flag can cause file descriptor leak if another thread use fork() and exec() (via system() method for example). If you really needs file descriptor inheritance to child process, use spawn()‘s argument such as fd=&gt;fd.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L5294-L5326'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5294' data-end='5326'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 5294</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_set_close_on_exec(VALUE io, VALUE arg)
{
    int flag = RTEST(arg) ? FD_CLOEXEC : 0;
    rb_io_t *fptr;
    VALUE write_io;
    int fd, ret;

    write_io = GetWriteIO(io);
    if (io != write_io) {
        GetOpenFile(write_io, fptr);
        if (fptr &amp;&amp; 0 &lt;= (fd = fptr-&gt;fd)) {
            if ((ret = fcntl(fptr-&gt;fd, F_GETFD)) == -1) rb_sys_fail_path(fptr-&gt;pathv);
            if ((ret &amp; FD_CLOEXEC) != flag) {
                ret = (ret &amp; ~FD_CLOEXEC) | flag;
                ret = fcntl(fd, F_SETFD, ret);
                if (ret != 0) rb_sys_fail_path(fptr-&gt;pathv);
            }
        }

    }

    GetOpenFile(io, fptr);
    if (fptr &amp;&amp; 0 &lt;= (fd = fptr-&gt;fd)) {
        if ((ret = fcntl(fd, F_GETFD)) == -1) rb_sys_fail_path(fptr-&gt;pathv);
        if ((ret &amp; FD_CLOEXEC) != flag) {
            ret = (ret &amp; ~FD_CLOEXEC) | flag;
            ret = fcntl(fd, F_SETFD, ret);
            if (ret != 0) rb_sys_fail_path(fptr-&gt;pathv);
        }
    }
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="close_on_exec?-instance_method">
  <h3 class='signature rw'>
    #<strong>close_on_exec?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if the stream will be closed on exec, <code>false</code> otherwise:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close_on_exec?'>close_on_exec?</span> <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close_on_exec'>close_on_exec</span> <span class='op'>=</span> <span class='kw'>false</span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close_on_exec?'>close_on_exec?</span> <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L5246-L5268'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5246' data-end='5268'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 5246</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_close_on_exec_p(VALUE io)
{
    rb_io_t *fptr;
    VALUE write_io;
    int fd, ret;

    write_io = GetWriteIO(io);
    if (io != write_io) {
        GetOpenFile(write_io, fptr);
        if (fptr &amp;&amp; 0 &lt;= (fd = fptr-&gt;fd)) {
            if ((ret = fcntl(fd, F_GETFD)) == -1) rb_sys_fail_path(fptr-&gt;pathv);
            if (!(ret &amp; FD_CLOEXEC)) return Qfalse;
        }
    }

    GetOpenFile(io, fptr);
    if (fptr &amp;&amp; 0 &lt;= (fd = fptr-&gt;fd)) {
        if ((ret = fcntl(fd, F_GETFD)) == -1) rb_sys_fail_path(fptr-&gt;pathv);
        if (!(ret &amp; FD_CLOEXEC)) return Qfalse;
    }
    return Qtrue;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="closed?-instance_method">
  <h3 class='signature ro'>
    #<strong>closed?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if the stream is closed for both reading and writing, <code>false</code> otherwise. See <code>Open and Closed Streams</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_popen'><a href="#popen-class_method" title="IO.popen (method)">popen</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ruby</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r+</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span><span class='op'>|</span>
  <span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_closed?'>closed?</span>
  <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_close_read'><a href="#close_read-instance_method" title="IO#close_read (method)">close_read</a></span>
  <span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_closed?'>closed?</span>
  <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_close_write'><a href="#close_write-instance_method" title="IO#close_write (method)">close_write</a></span>
  <span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_closed?'>closed?</span>
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>false</span>
<span class='kw'>false</span>
<span class='kw'>true</span></code></pre>

<p>Related: <a href="#close_read-instance_method" title="IO#close_read (method)">#close_read</a>, <a href="#close_write-instance_method" title="IO#close_write (method)">#close_write</a>, <a href="#close-instance_method" title="IO#close (method)">#close</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L5792-L5809'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5792' data-end='5809'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 5792</span></pre>
<pre class='code cpp'>

VALUE
rb_io_closed_p(VALUE io)
{
    rb_io_t *fptr;
    VALUE write_io;
    rb_io_t *write_fptr;

    write_io = GetWriteIO(io);
    if (io != write_io) {
        write_fptr = RFILE(write_io)-&gt;fptr;
        if (write_fptr &amp;&amp; 0 &lt;= write_fptr-&gt;fd) {
            return Qfalse;
        }
    }

    fptr = rb_io_get_fptr(io);
    return RBOOL(0 &gt; fptr-&gt;fd);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="eof-instance_method">
  <h3 class='signature ro'>
    #<strong>eof</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>    <span class='aliases'>Also known as: <span class='names'>#eof?</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if the stream is positioned at its end, <code>false</code> otherwise; see <code>Position</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_eof'>eof</span>           <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_seek'><a href="#seek-instance_method" title="IO#seek (method)">seek</a></span>(<span class='int'>0</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='kw'>END</span>) <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_eof'>eof</span>           <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Raises an exception unless the stream is opened for reading; see <code>Mode</code>.</p>

<p>If <code>self</code> is a stream such as pipe or socket, this method blocks until the other end sends some data or closes it:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_w'>w</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>
<span class='const'><a href="Thread.html" title="Thread (class)">Thread</a></span>.<span class='id identifier rubyid_new'><a href="Thread.html#new-class_method" title="Thread.new (method)">new</a></span> { <span class='id identifier rubyid_sleep'>sleep</span> <span class='int'>1</span><span class='semicolon'>;</span> <span class='id identifier rubyid_w'>w</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span> }
<span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_eof?'><a href="#eof%3F-instance_method" title="IO#eof? (method)">eof?</a></span> <span class='comment'># =&gt; true # After 1-second wait.
</span>
<span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_w'>w</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>
<span class='const'><a href="Thread.html" title="Thread (class)">Thread</a></span>.<span class='id identifier rubyid_new'><a href="Thread.html#new-class_method" title="Thread.new (method)">new</a></span> { <span class='id identifier rubyid_sleep'>sleep</span> <span class='int'>1</span><span class='semicolon'>;</span> <span class='id identifier rubyid_w'>w</span>.<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span> }
<span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_eof?'><a href="#eof%3F-instance_method" title="IO#eof? (method)">eof?</a></span>  <span class='comment'># =&gt; false # After 1-second wait.
</span>
<span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_w'>w</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>
<span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_eof?'><a href="#eof%3F-instance_method" title="IO#eof? (method)">eof?</a></span>  <span class='comment'># blocks forever</span></code></pre>

<p>Note that this method reads data to the input byte buffer.  So <a href="#sysread-instance_method" title="IO#sysread (method)">#sysread</a> may not behave as you intend with <a href="#eof%3F-instance_method" title="IO#eof? (method)">#eof?</a>, unless you call <a href="#rewind-instance_method" title="IO#rewind (method)">#rewind</a> first (which is not available for some streams).</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L2661-L2678'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2661' data-end='2678'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2661</span></pre>
<pre class='code cpp'>

VALUE
rb_io_eof(VALUE io)
{
    rb_io_t *fptr;

    GetOpenFile(io, fptr);
    rb_io_check_char_readable(fptr);

    if (READ_CHAR_PENDING(fptr)) return Qfalse;
    if (READ_DATA_PENDING(fptr)) return Qfalse;
    READ_CHECK(fptr);
#if RUBY_CRLF_ENVIRONMENT
    if (!NEED_READCONV(fptr) &amp;&amp; NEED_NEWLINE_DECORATOR_ON_READ(fptr)) {
        return RBOOL(eof(fptr-&gt;fd));;
    }
#endif
    return RBOOL(io_fillbuf(fptr) &lt; 0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="eof?-instance_method">
  <h3 class='signature ro'>
    <div class='inline-block'>
      <span class='overload'>#<strong>eof</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span></span>
      <span class='overload'>#<strong>eof?</strong>  &#x21d2; <code>Boolean</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#eof-instance_method" title="IO#eof (method)">#eof</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="isatty-instance_method">
  <h3 class='signature ro'>
    <div class='inline-block'>
      <span class='overload'>#<strong>tty?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span></span>
      <span class='overload'>#<strong>isatty</strong>  &#x21d2; <code>Boolean</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#tty%3F-instance_method" title="IO#tty? (method)">#tty?</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="lineno-instance_method">
  <h3 class='signature rw'>
    #<strong>lineno</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the current line number for the stream; see <code>Line Number</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L4341-L4349'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4341' data-end='4349'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4341</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_lineno(VALUE io)
{
    rb_io_t *fptr;

    GetOpenFile(io, fptr);
    rb_io_check_char_readable(fptr);
    return INT2NUM(fptr-&gt;lineno);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="lineno=-instance_method">
  <h3 class='signature rw'>
    #<strong>lineno=</strong>(integer)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets and returns the line number for the stream; see <code>Line Number</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L4360-L4369'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4360' data-end='4369'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4360</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_set_lineno(VALUE io, VALUE lineno)
{
    rb_io_t *fptr;

    GetOpenFile(io, fptr);
    rb_io_check_char_readable(fptr);
    fptr-&gt;lineno = NUM2INT(lineno);
    return lineno;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pos-instance_method">
  <h3 class='signature rw'>
    #<strong>pos</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>  <span class="extras">(<span class='rw'>rw</span>)</span>    <span class='aliases'>Also known as: <span class='names'>#tell</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the current position (in bytes) in <code>self</code> (see <code>Position</code>):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span> <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span> <span class='comment'># =&gt; &quot;First line\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span> <span class='comment'># =&gt; 12
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Related: <a href="#pos=-instance_method" title="IO#pos= (method)">#pos=</a>, <a href="#seek-instance_method" title="IO#seek (method)">#seek</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L2394-L2405'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2394' data-end='2405'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2394</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_tell(VALUE io)
{
    rb_io_t *fptr;
    rb_off_t pos;

    GetOpenFile(io, fptr);
    pos = io_tell(fptr);
    if (pos &lt; 0 &amp;&amp; errno) rb_sys_fail_path(fptr-&gt;pathv);
    pos -= fptr-&gt;rbuf.len;
    return OFFT2NUM(pos);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pos=-instance_method">
  <h3 class='signature rw'>
    #<strong>pos=</strong>(new_position)  &#x21d2; <code>IO</code>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Seeks to the given <code>new_position</code> (in bytes); see <code>Position</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>     <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="IO#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>20</span> <span class='comment'># =&gt; 20
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>     <span class='comment'># =&gt; 20
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Related: <a href="#seek-instance_method" title="IO#seek (method)">#seek</a>, <a href="#tell-instance_method" title="IO#tell (method)">#tell</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L2518-L2530'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2518' data-end='2530'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2518</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_set_pos(VALUE io, VALUE offset)
{
    rb_io_t *fptr;
    rb_off_t pos;

    pos = NUM2OFFT(offset);
    GetOpenFile(io, fptr);
    pos = io_seek(fptr, pos, SEEK_SET);
    if (pos &lt; 0 &amp;&amp; errno) rb_sys_fail_path(fptr-&gt;pathv);

    return OFFT2NUM(pos);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sync-instance_method">
  <h3 class='signature rw'>
    #<strong>sync</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the current sync mode of the stream. When sync mode is true, all output is immediately flushed to the underlying operating system and is not buffered by Ruby internally. See also <a href="#fsync-instance_method" title="IO#fsync (method)">#fsync</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_sync'>sync</span> <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_sync'>sync</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_sync'>sync</span> <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L2696-L2704'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2696' data-end='2704'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2696</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_sync(VALUE io)
{
    rb_io_t *fptr;

    io = GetWriteIO(io);
    GetOpenFile(io, fptr);
    return RBOOL(fptr-&gt;mode &amp; FMODE_SYNC);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sync=-instance_method">
  <h3 class='signature rw'>
    #<strong>sync=</strong>(boolean)  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets the <em>sync</em> <em>mode</em> for the stream to the given value; returns the given value.</p>

<p>Values for the sync mode:</p>
<ul><li>
<p><code>true</code>: All output is immediately flushed to the underlying operating system and is not buffered internally.</p>
</li><li>
<p><code>false</code>: Output may be buffered internally.</p>
</li></ul>

<p>Example;</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_sync'><a href="#sync-instance_method" title="IO#sync (method)">sync</a></span> <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_sync'><a href="#sync-instance_method" title="IO#sync (method)">sync</a></span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_sync'><a href="#sync-instance_method" title="IO#sync (method)">sync</a></span> <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Related: <a href="#fsync-instance_method" title="IO#fsync (method)">#fsync</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L2733-L2747'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2733' data-end='2747'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2733</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_set_sync(VALUE io, VALUE sync)
{
    rb_io_t *fptr;

    io = GetWriteIO(io);
    GetOpenFile(io, fptr);
    if (RTEST(sync)) {
        fptr-&gt;mode |= FMODE_SYNC;
    }
    else {
        fptr-&gt;mode &amp;= ~FMODE_SYNC;
    }
    return sync;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="tell-instance_method">
  <h3 class='signature ro'>
    <div class='inline-block'>
      <span class='overload'>#<strong>pos</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>  <span class="extras">(<span class='readonly'>readonly</span>)</span></span>
      <span class='overload'>#<strong>tell</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#pos-instance_method" title="IO#pos (method)">#pos</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="timeout-instance_method">
  <h3 class='signature rw'>
    #<strong>timeout</strong>  &#x21d2; <code>IO</code><sup>?</sup>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get the internal timeout duration or nil if it was not set.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L837-L843'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='837' data-end='843'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 837</span></pre>
<pre class='code cpp'>

VALUE
rb_io_timeout(VALUE self)
{
    rb_io_t *fptr = rb_io_get_fptr(self);

    return fptr-&gt;timeout;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="timeout=-instance_method">
  <h3 class='signature rw'>
    <div class='inline-block'>
      <span class='overload'>#<strong>timeout=</strong>(duration)  &#x21d2; <code>IO</code>  <span class="extras">(<span class='rw'>rw</span>)</span></span>
      <span class='overload'>#<strong>timeout=</strong>(nil)  &#x21d2; <code>nil</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets the internal timeout to the specified duration or nil. The timeout applies to all blocking operations where possible.</p>

<p>When the operation performs longer than the timeout set, <a href="IO/TimeoutError.html" title="IO::TimeoutError (class)"><code>::IO::TimeoutError</code></a> is raised.</p>

<p>This affects the following methods (but is not limited to): <a href="#gets-instance_method" title="IO#gets (method)">#gets</a>, <a href="#puts-instance_method" title="IO#puts (method)">#puts</a>, <a href="#read-instance_method" title="IO#read (method)">#read</a>, <a href="#write-instance_method" title="IO#write (method)">#write</a>, <a href="#wait_readable-instance_method" title="IO#wait_readable (method)">#wait_readable</a> and <a href="#wait_writable-instance_method" title="IO#wait_writable (method)">#wait_writable</a>. This also affects blocking socket operations like <code>Socket#accept</code> and <code>Socket#connect</code>.</p>

<p>Some operations like <code>File#open</code> and <a href="#close-instance_method" title="IO#close (method)">#close</a> are not affected by the timeout. A timeout during a write operation may leave the <code>IO</code> in an inconsistent state, e.g. data was partially written. Generally speaking, a timeout is a last ditch effort to prevent an application from hanging on slow I/O operations, such as those that occur during a slowloris attack.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L866-L879'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='866' data-end='879'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 866</span></pre>
<pre class='code cpp'>

VALUE
rb_io_set_timeout(VALUE self, VALUE timeout)
{
    // Validate it:
    if (RTEST(timeout)) {
        rb_time_interval(timeout);
    }

    rb_io_t *fptr = rb_io_get_fptr(self);

    fptr-&gt;timeout = timeout;

    return self;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="tty?-instance_method">
  <h3 class='signature ro'>
    #<strong>tty?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>    <span class='aliases'>Also known as: <span class='names'>#isatty</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if the stream is associated with a terminal device (tty), <code>false</code> otherwise:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_isatty'><a href="#isatty-instance_method" title="IO#isatty (method)">isatty</a></span>    <span class='comment'>#=&gt; false
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>
<span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/dev/tty</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_isatty'><a href="#isatty-instance_method" title="IO#isatty (method)">isatty</a></span> <span class='comment'>#=&gt; true
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L5222-L5229'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5222' data-end='5229'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 5222</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_isatty(VALUE io)
{
    rb_io_t *fptr;

    GetOpenFile(io, fptr);
    return RBOOL(isatty(fptr-&gt;fd) != 0);
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="<<-instance_method">
  <h3 class='signature  first'>
    #<strong>&lt;&lt;</strong>(object)  &#x21d2; <code>self</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes the given <code>object</code> to <code>self</code>, which must be opened for writing (see <code>Access Modes</code>); returns <code>self</code>; if <code>object</code> is not a string, it is converted via method <code>to_s</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$stdout</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Hello</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>World!</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
<span class='gvar'>$stdout</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&lt;&lt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bar'>bar</span> <span class='op'>&lt;&lt;</span> <span class='int'>2</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Hello</span><span class='comma'>,</span> <span class='id identifier rubyid_World!'>World!</span>
<span class='id identifier rubyid_foobar2'>foobar2</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L2316-L2321'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2316' data-end='2321'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2316</span></pre>
<pre class='code cpp'>

VALUE
rb_io_addstr(VALUE io, VALUE str)
{
    rb_io_write(io, str);
    return io;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="advise-instance_method">
  <h3 class='signature '>
    #<strong>advise</strong>(advice, offset = 0, len = 0)  &#x21d2; <code>nil</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Invokes Posix system call <a href="https://linux.die.net/man/2/posix_fadvise" target="_parent" title="posix_fadvise(2)">posix_fadvise(2)</a>, which announces an intention to access data from the current file in a particular manner.</p>

<p>The arguments and results are platform-dependent.</p>

<p>The relevant data is specified by:</p>
<ul><li>
<p><code>offset</code>: The offset of the first byte of data.</p>
</li><li>
<p><code>len</code>: The number of bytes to be accessed; if <code>len</code> is zero, or is larger than the number of bytes remaining, all remaining bytes will be accessed.</p>
</li></ul>

<p>Argument <code>advice</code> is one of the following symbols:</p>
<ul><li>
<p><code>:normal</code>: The application has no advice to give about its access pattern for the specified data. If no advice is given for an open file, this is the default assumption.</p>
</li><li>
<p><code>:sequential</code>: The application expects to access the specified data sequentially (with lower offsets read before higher ones).</p>
</li><li>
<p><code>:random</code>: The specified data will be accessed in random order.</p>
</li><li>
<p><code>:noreuse</code>: The specified data will be accessed only once.</p>
</li><li>
<p><code>:willneed</code>: The specified data will be accessed in the near future.</p>
</li><li>
<p><code>:dontneed</code>: The specified data will not be accessed in the near future.</p>
</li></ul>

<p>Not implemented on all platforms.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L10851-L10873'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='10851' data-end='10873'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 10851</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_advise(int argc, VALUE *argv, VALUE io)
{
    VALUE advice, offset, len;
    rb_off_t off, l;
    rb_io_t *fptr;

    rb_scan_args(argc, argv, &quot;12&quot;, &amp;advice, &amp;offset, &amp;len);
    advice_arg_check(advice);

    io = GetWriteIO(io);
    GetOpenFile(io, fptr);

    off = NIL_P(offset) ? 0 : NUM2OFFT(offset);
    l   = NIL_P(len)    ? 0 : NUM2OFFT(len);

#ifdef HAVE_POSIX_FADVISE
    return do_io_advise(fptr, advice, off, l);
#else
    ((void)off, (void)l);	/* Ignore all hint */
    return Qnil;
#endif
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="close-instance_method">
  <h3 class='signature '>
    #<strong>close</strong>  &#x21d2; <code>nil</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Closes the stream for both reading and writing if open for either or both; returns <code>nil</code>. See <code>Open and Closed Streams</code>.</p>

<p>If the stream is open for writing, flushes any buffered writes to the operating system before closing.</p>

<p>If the stream was opened by <a href="#popen-class_method" title="IO.popen (method)">.popen</a>, sets global variable <code>$?</code> (child exit status).</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_popen'><a href="#popen-class_method" title="IO.popen (method)">popen</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ruby</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r+</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span><span class='op'>|</span>
  <span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_closed?'><a href="#closed%3F-instance_method" title="IO#closed? (method)">closed?</a></span>
  <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_close'>close</span>
  <span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='gvar'>$?</span>
  <span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_closed?'><a href="#closed%3F-instance_method" title="IO#closed? (method)">closed?</a></span>
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>false</span>
<span class='id identifier rubyid_pid'><a href="#pid-instance_method" title="IO#pid (method)">pid</a></span> <span class='int'>13760</span> <span class='id identifier rubyid_exit'>exit</span> <span class='int'>0</span>
<span class='kw'>true</span></code></pre>

<p>Related: <a href="#close_read-instance_method" title="IO#close_read (method)">#close_read</a>, <a href="#close_write-instance_method" title="IO#close_write (method)">#close_write</a>, <a href="#closed%3F-instance_method" title="IO#closed? (method)">#closed?</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L5727-L5736'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5727' data-end='5736'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 5727</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_close_m(VALUE io)
{
    rb_io_t *fptr = rb_io_get_fptr(io);
    if (fptr-&gt;fd &lt; 0) {
        return Qnil;
    }
    rb_io_close(io);
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="close_read-instance_method">
  <h3 class='signature '>
    #<strong>close_read</strong>  &#x21d2; <code>nil</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Closes the stream for reading if open for reading; returns <code>nil</code>. See <code>Open and Closed Streams</code>.</p>

<p>If the stream was opened by <a href="#popen-class_method" title="IO.popen (method)">.popen</a> and is also closed for writing, sets global variable <code>$?</code> (child exit status).</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_popen'><a href="#popen-class_method" title="IO.popen (method)">popen</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ruby</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r+</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span><span class='op'>|</span>
  <span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_closed?'><a href="#closed%3F-instance_method" title="IO#closed? (method)">closed?</a></span>
  <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_close_write'><a href="#close_write-instance_method" title="IO#close_write (method)">close_write</a></span>
  <span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_closed?'><a href="#closed%3F-instance_method" title="IO#closed? (method)">closed?</a></span>
  <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_close_read'>close_read</span>
  <span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='gvar'>$?</span>
  <span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_closed?'><a href="#closed%3F-instance_method" title="IO#closed? (method)">closed?</a></span>
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>false</span>
<span class='kw'>false</span>
<span class='id identifier rubyid_pid'><a href="#pid-instance_method" title="IO#pid (method)">pid</a></span> <span class='int'>14748</span> <span class='id identifier rubyid_exit'>exit</span> <span class='int'>0</span>
<span class='kw'>true</span></code></pre>

<p>Related: <a href="#close-instance_method" title="IO#close (method)">#close</a>, <a href="#close_write-instance_method" title="IO#close_write (method)">#close_write</a>, <a href="#closed%3F-instance_method" title="IO#closed? (method)">#closed?</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L5843-L5882'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5843' data-end='5882'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 5843</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_close_read(VALUE io)
{
    rb_io_t *fptr;
    VALUE write_io;

    fptr = rb_io_get_fptr(rb_io_taint_check(io));
    if (fptr-&gt;fd &lt; 0) return Qnil;
    if (is_socket(fptr-&gt;fd, fptr-&gt;pathv)) {
#ifndef SHUT_RD
# define SHUT_RD 0
#endif
        if (shutdown(fptr-&gt;fd, SHUT_RD) &lt; 0)
            rb_sys_fail_path(fptr-&gt;pathv);
        fptr-&gt;mode &amp;= ~FMODE_READABLE;
        if (!(fptr-&gt;mode &amp; FMODE_WRITABLE))
            return rb_io_close(io);
        return Qnil;
    }

    write_io = GetWriteIO(io);
    if (io != write_io) {
        rb_io_t *wfptr;
        wfptr = rb_io_get_fptr(rb_io_taint_check(write_io));
        wfptr-&gt;pid = fptr-&gt;pid;
        fptr-&gt;pid = 0;
        RFILE(io)-&gt;fptr = wfptr;
        /* bind to write_io temporarily to get rid of memory/fd leak */
        fptr-&gt;tied_io_for_writing = 0;
        RFILE(write_io)-&gt;fptr = fptr;
        rb_io_fptr_cleanup(fptr, FALSE);
        /* should not finalize fptr because another thread may be reading it */
        return Qnil;
    }

    if ((fptr-&gt;mode &amp; (FMODE_DUPLEX|FMODE_WRITABLE)) == FMODE_WRITABLE) {
        rb_raise(rb_eIOError, &quot;closing non-duplex IO for reading&quot;);
    }
    return rb_io_close(io);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="close_write-instance_method">
  <h3 class='signature '>
    #<strong>close_write</strong>  &#x21d2; <code>nil</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Closes the stream for writing if open for writing; returns <code>nil</code>. See <code>Open and Closed Streams</code>.</p>

<p>Flushes any buffered writes to the operating system before closing.</p>

<p>If the stream was opened by <a href="#popen-class_method" title="IO.popen (method)">.popen</a> and is also closed for reading, sets global variable <code>$?</code> (child exit status).</p>

<pre class="code ruby"><code class="ruby"><span class='const'>IO</span>.<span class='id identifier rubyid_popen'><a href="#popen-class_method" title="IO.popen (method)">popen</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ruby</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r+</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span><span class='op'>|</span>
  <span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_closed?'><a href="#closed%3F-instance_method" title="IO#closed? (method)">closed?</a></span>
  <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_close_read'><a href="#close_read-instance_method" title="IO#close_read (method)">close_read</a></span>
  <span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_closed?'><a href="#closed%3F-instance_method" title="IO#closed? (method)">closed?</a></span>
  <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_close_write'>close_write</span>
  <span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='gvar'>$?</span>
  <span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_closed?'><a href="#closed%3F-instance_method" title="IO#closed? (method)">closed?</a></span>
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>false</span>
<span class='kw'>false</span>
<span class='id identifier rubyid_pid'><a href="#pid-instance_method" title="IO#pid (method)">pid</a></span> <span class='int'>15044</span> <span class='id identifier rubyid_exit'>exit</span> <span class='int'>0</span>
<span class='kw'>true</span></code></pre>

<p>Related: <a href="#close-instance_method" title="IO#close (method)">#close</a>, <a href="#close_read-instance_method" title="IO#close_read (method)">#close_read</a>, <a href="#closed%3F-instance_method" title="IO#closed? (method)">#closed?</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L5916-L5947'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5916' data-end='5947'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 5916</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_close_write(VALUE io)
{
    rb_io_t *fptr;
    VALUE write_io;

    write_io = GetWriteIO(io);
    fptr = rb_io_get_fptr(rb_io_taint_check(write_io));
    if (fptr-&gt;fd &lt; 0) return Qnil;
    if (is_socket(fptr-&gt;fd, fptr-&gt;pathv)) {
#ifndef SHUT_WR
# define SHUT_WR 1
#endif
        if (shutdown(fptr-&gt;fd, SHUT_WR) &lt; 0)
            rb_sys_fail_path(fptr-&gt;pathv);
        fptr-&gt;mode &amp;= ~FMODE_WRITABLE;
        if (!(fptr-&gt;mode &amp; FMODE_READABLE))
            return rb_io_close(write_io);
        return Qnil;
    }

    if ((fptr-&gt;mode &amp; (FMODE_DUPLEX|FMODE_READABLE)) == FMODE_READABLE) {
        rb_raise(rb_eIOError, &quot;closing non-duplex IO for writing&quot;);
    }

    if (io != write_io) {
        fptr = rb_io_get_fptr(rb_io_taint_check(io));
        fptr-&gt;tied_io_for_writing = 0;
    }
    rb_io_close(write_io);
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="each-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>each_line</strong>(sep = $/, chomp: false) {|line| ... } &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>each_line</strong>(limit, chomp: false) {|line| ... } &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>each_line</strong>(sep, limit, chomp: false) {|line| ... } &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>each_line</strong>  &#x21d2; <a href="Enumerator.html" title="Enumerator (class)">Enumerator</a> </span>
    </div>
    <span class='aliases'>Also known as: <span class='names'>#each_line</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Calls the block with each remaining line read from the stream; returns <code>self</code>. Does nothing if already at end-of-stream; See <code>Line IO</code>.</p>

<p>With no arguments given, reads lines as determined by line separator <code>$/</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_each_line'><a href="#each_line-instance_method" title="IO#each_line (method)">each_line</a></span> {<span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_line'>line</span> }
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_each_line'><a href="#each_line-instance_method" title="IO#each_line (method)">each_line</a></span> {<span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_fail'>fail</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Cannot happen</span><span class='tstring_end'>&#39;</span></span> }
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>First line\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Second line\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Fourth line\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Fifth line\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>With only string argument <code>sep</code> given, reads lines as determined by line separator <code>sep</code>; see <code>Line Separator</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_each_line'><a href="#each_line-instance_method" title="IO#each_line (method)">each_line</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>li</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_line'>line</span> }
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>First li</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ne\nSecond li</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ne\n\nFourth li</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ne\nFifth li</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ne\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>The two special values for <code>sep</code> are honored:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># Get all into one string.
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_each_line'><a href="#each_line-instance_method" title="IO#each_line (method)">each_line</a></span>(<span class='kw'>nil</span>) {<span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_line'>line</span> }
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>First line\nSecond line\n\nFourth line\nFifth line\n</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_rewind'><a href="#rewind-instance_method" title="IO#rewind (method)">rewind</a></span>
<span class='comment'># Get paragraphs (up to two line separators).
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_each_line'><a href="#each_line-instance_method" title="IO#each_line (method)">each_line</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_line'>line</span> }</code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>First line\nSecond line\n\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Fourth line\nFifth line\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>With only integer argument <code>limit</code> given, limits the number of bytes in each line; see <code>Line Limit</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_each_line'><a href="#each_line-instance_method" title="IO#each_line (method)">each_line</a></span>(<span class='int'>8</span>) {<span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_line'>line</span> }
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>First li</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ne\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Second l</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ine\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Fourth l</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ine\n</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Fifth li</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ne\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>With arguments <code>sep</code> and <code>limit</code> given, combines the two behaviors:</p>
<ul><li>
<p>Calls with the next line as determined by line separator <code>sep</code>.</p>
</li><li>
<p>But returns no more bytes than are allowed by the limit.</p>
</li></ul>

<p>Optional keyword argument <code>chomp</code> specifies whether line separators are to be omitted:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_each_line'><a href="#each_line-instance_method" title="IO#each_line (method)">each_line</a></span>(<span class='label'>chomp:</span> <span class='kw'>true</span>) {<span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_line'>line</span> }
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>First line</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Second line</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Fourth line</span><span class='tstring_end'>&quot;</span></span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Fifth line</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>Returns an <a href="Enumerator.html" title="Enumerator (class)"><code>::Enumerator</code></a> if no block is given.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L4599-L4613'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4599' data-end='4613'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4599</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_each_line(int argc, VALUE *argv, VALUE io)
{
    VALUE str;
    struct getline_arg args;

    RETURN_ENUMERATOR(io, argc, argv);
    prepare_getline_args(argc, argv, &amp;args, io);
    if (args.limit == 0)
        rb_raise(rb_eArgError, &quot;invalid limit: 0 for each_line&quot;);
    while (!NIL_P(str = rb_io_getline_1(args.rs, args.limit, args.chomp, io))) {
        rb_yield(str);
    }
    return io;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="each_byte-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>each_byte</strong> {|byte| ... } &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>each_byte</strong>  &#x21d2; <a href="Enumerator.html" title="Enumerator (class)">Enumerator</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Calls the given block with each byte (0..255) in the stream; returns <code>self</code>. See <code>Byte IO</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.rus</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> []
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_each_byte'>each_byte</span> {<span class='op'>|</span><span class='id identifier rubyid_b'>b</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_b'>b</span> }
<span class='id identifier rubyid_a'>a</span> <span class='comment'># =&gt; [209, 130, 208, 181, 209, 129, 209, 130]
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Returns an <a href="Enumerator.html" title="Enumerator (class)"><code>::Enumerator</code></a> if no block is given.</p>

<p>Related: <a href="#each_char-instance_method" title="IO#each_char (method)">#each_char</a>, <a href="#each_codepoint-instance_method" title="IO#each_codepoint (method)">#each_codepoint</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L4635-L4654'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4635' data-end='4654'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4635</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_each_byte(VALUE io)
{
    rb_io_t *fptr;

    RETURN_ENUMERATOR(io, 0, 0);
    GetOpenFile(io, fptr);

    do {
        while (fptr-&gt;rbuf.len &gt; 0) {
            char *p = fptr-&gt;rbuf.ptr + fptr-&gt;rbuf.off++;
            fptr-&gt;rbuf.len--;
            rb_yield(INT2FIX(*p &amp; 0xff));
            rb_io_check_byte_readable(fptr);
            errno = 0;
        }
        READ_CHECK(fptr);
    } while (io_fillbuf(fptr) &gt;= 0);
    return io;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="each_char-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>each_char</strong> {|c| ... } &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>each_char</strong>  &#x21d2; <a href="Enumerator.html" title="Enumerator (class)">Enumerator</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Calls the given block with each character in the stream; returns <code>self</code>. See <code>Character IO</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.rus</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> []
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_each_char'>each_char</span> {<span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_c'>c</span>.<span class='id identifier rubyid_ord'>ord</span> }
<span class='id identifier rubyid_a'>a</span> <span class='comment'># =&gt; [1090, 1077, 1089, 1090]
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Returns an <a href="Enumerator.html" title="Enumerator (class)"><code>::Enumerator</code></a> if no block is given.</p>

<p>Related: <a href="#each_byte-instance_method" title="IO#each_byte (method)">#each_byte</a>, <a href="#each_codepoint-instance_method" title="IO#each_codepoint (method)">#each_codepoint</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L4783-L4800'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4783' data-end='4800'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4783</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_each_char(VALUE io)
{
    rb_io_t *fptr;
    rb_encoding *enc;
    VALUE c;

    RETURN_ENUMERATOR(io, 0, 0);
    GetOpenFile(io, fptr);
    rb_io_check_char_readable(fptr);

    enc = io_input_encoding(fptr);
    READ_CHECK(fptr);
    while (!NIL_P(c = io_getc(fptr, enc))) {
        rb_yield(c);
    }
    return io;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="each_codepoint-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>each_codepoint</strong> {|c| ... } &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>each_codepoint</strong>  &#x21d2; <a href="Enumerator.html" title="Enumerator (class)">Enumerator</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Calls the given block with each codepoint in the stream; returns <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.rus</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> []
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_each_codepoint'>each_codepoint</span> {<span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_c'>c</span> }
<span class='id identifier rubyid_a'>a</span> <span class='comment'># =&gt; [1090, 1077, 1089, 1090]
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Returns an <a href="Enumerator.html" title="Enumerator (class)"><code>::Enumerator</code></a> if no block is given.</p>

<p>Related: <a href="#each_byte-instance_method" title="IO#each_byte (method)">#each_byte</a>, <a href="#each_char-instance_method" title="IO#each_char (method)">#each_char</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L4821-L4923'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4821' data-end='4923'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4821</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_each_codepoint(VALUE io)
{
    rb_io_t *fptr;
    rb_encoding *enc;
    unsigned int c;
    int r, n;

    RETURN_ENUMERATOR(io, 0, 0);
    GetOpenFile(io, fptr);
    rb_io_check_char_readable(fptr);

    READ_CHECK(fptr);
    if (NEED_READCONV(fptr)) {
        SET_BINARY_MODE(fptr);
        r = 1;		/* no invalid char yet */
        for (;;) {
            make_readconv(fptr, 0);
            for (;;) {
                if (fptr-&gt;cbuf.len) {
                    if (fptr-&gt;encs.enc)
                        r = rb_enc_precise_mbclen(fptr-&gt;cbuf.ptr+fptr-&gt;cbuf.off,
                                                  fptr-&gt;cbuf.ptrfptr-&gt;cbuf.offfptr-&gt;cbuf.len,
                                                  fptr-&gt;encs.enc);
                    else
                        r = ONIGENC_CONSTRUCT_MBCLEN_CHARFOUND(1);
                    if (!MBCLEN_NEEDMORE_P(r))
                        break;
                    if (fptr-&gt;cbuf.len == fptr-&gt;cbuf.capa) {
                        rb_raise(rb_eIOError, &quot;too long character&quot;);
                    }
                }
                if (more_char(fptr) == MORE_CHAR_FINISHED) {
                    clear_readconv(fptr);
                    if (!MBCLEN_CHARFOUND_P(r)) {
                        enc = fptr-&gt;encs.enc;
                        goto invalid;
                    }
                    return io;
                }
            }
            if (MBCLEN_INVALID_P(r)) {
                enc = fptr-&gt;encs.enc;
                goto invalid;
            }
            n = MBCLEN_CHARFOUND_LEN(r);
            if (fptr-&gt;encs.enc) {
                c = rb_enc_codepoint(fptr-&gt;cbuf.ptr+fptr-&gt;cbuf.off,
                                     fptr-&gt;cbuf.ptrfptr-&gt;cbuf.offfptr-&gt;cbuf.len,
                                     fptr-&gt;encs.enc);
            }
            else {
                c = (unsigned char)fptr-&gt;cbuf.ptr[fptr-&gt;cbuf.off];
            }
            fptr-&gt;cbuf.off += n;
            fptr-&gt;cbuf.len -= n;
            rb_yield(UINT2NUM(c));
            rb_io_check_byte_readable(fptr);
        }
    }
    NEED_NEWLINE_DECORATOR_ON_READ_CHECK(fptr);
    enc = io_input_encoding(fptr);
    while (io_fillbuf(fptr) &gt;= 0) {
        r = rb_enc_precise_mbclen(fptr-&gt;rbuf.ptr+fptr-&gt;rbuf.off,
                                  fptr-&gt;rbuf.ptrfptr-&gt;rbuf.offfptr-&gt;rbuf.len, enc);
        if (MBCLEN_CHARFOUND_P(r) &amp;&amp;
            (n = MBCLEN_CHARFOUND_LEN(r)) &lt;= fptr-&gt;rbuf.len) {
            c = rb_enc_codepoint(fptr-&gt;rbuf.ptr+fptr-&gt;rbuf.off,
                                 fptr-&gt;rbuf.ptrfptr-&gt;rbuf.offfptr-&gt;rbuf.len, enc);
            fptr-&gt;rbuf.off += n;
            fptr-&gt;rbuf.len -= n;
            rb_yield(UINT2NUM(c));
        }
        else if (MBCLEN_INVALID_P(r)) {
            goto invalid;
        }
        else if (MBCLEN_NEEDMORE_P(r)) {
            char cbuf[8], *p = cbuf;
            int more = MBCLEN_NEEDMORE_LEN(r);
            if (more &gt; numberof(cbuf)) goto invalid;
            more += n = fptr-&gt;rbuf.len;
            if (more &gt; numberof(cbuf)) goto invalid;
            while ((n = (int)read_buffered_data(p, more, fptr)) &gt; 0 &amp;&amp;
                   (p += n, (more -= n) &gt; 0)) {
                if (io_fillbuf(fptr) &lt; 0) goto invalid;
                if ((n = fptr-&gt;rbuf.len) &gt; more) n = more;
            }
            r = rb_enc_precise_mbclen(cbuf, p, enc);
            if (!MBCLEN_CHARFOUND_P(r)) goto invalid;
            c = rb_enc_codepoint(cbuf, p, enc);
            rb_yield(UINT2NUM(c));
        }
        else {
            continue;
        }
        rb_io_check_byte_readable(fptr);
    }
    return io;

  invalid:
    rb_raise(rb_eArgError, &quot;invalid byte sequence in %s&quot;, rb_enc_name(enc));
    UNREACHABLE_RETURN(Qundef);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="each_line-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>each_line</strong>(sep = $/, chomp: false) {|line| ... } &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>each_line</strong>(limit, chomp: false) {|line| ... } &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>each_line</strong>(sep, limit, chomp: false) {|line| ... } &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>each_line</strong>  &#x21d2; <a href="Enumerator.html" title="Enumerator (class)">Enumerator</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#each-instance_method" title="IO#each (method)">#each</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="external_encoding-instance_method">
  <h3 class='signature '>
    #<strong>external_encoding</strong>  &#x21d2; <a href="Encoding.html" title="Encoding (class)">Encoding</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the <a href="Encoding.html" title="Encoding (class)"><code>::Encoding</code></a> object that represents the encoding of the stream, or <code>nil</code> if the stream is in write mode and no encoding is specified.</p>

<p>See <code>Encodings</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L13356-L13370'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='13356' data-end='13370'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 13356</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_external_encoding(VALUE io)
{
    rb_io_t *fptr = RFILE(rb_io_taint_check(io))-&gt;fptr;

    if (fptr-&gt;encs.enc2) {
        return rb_enc_from_encoding(fptr-&gt;encs.enc2);
    }
    if (fptr-&gt;mode &amp; FMODE_WRITABLE) {
        if (fptr-&gt;encs.enc)
            return rb_enc_from_encoding(fptr-&gt;encs.enc);
        return Qnil;
    }
    return rb_enc_from_encoding(io_read_encoding(fptr));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fcntl-instance_method">
  <h3 class='signature '>
    #<strong>fcntl</strong>(integer_cmd, argument)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Invokes Posix system call <a href="https://linux.die.net/man/2/fcntl" target="_parent" title="fcntl(2)">fcntl(2)</a>, which provides a mechanism for issuing low-level commands to control or query a file-oriented I/O stream. Arguments and results are platform dependent.</p>

<p>If <code>argument</code> is a number, its value is passed directly; if it is a string, it is interpreted as a binary sequence of bytes. (Array#pack might be a useful way to build this string.)</p>

<p>Not implemented on all platforms.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L11459-L11466'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11459' data-end='11466'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 11459</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_fcntl(int argc, VALUE *argv, VALUE io)
{
    VALUE req, arg;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;req, &amp;arg);
    return rb_fcntl(io, req, arg);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fdatasync-instance_method">
  <h3 class='signature '>
    #<strong>fdatasync</strong>  &#x21d2; <code>0</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Immediately writes to disk all data buffered in the stream, via the operating system’s: <code>fdatasync(2)</code>, if supported, otherwise via <code>fsync(2)</code>, if supported; otherwise raises an exception.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L2816-L2832'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2816' data-end='2832'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2816</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_fdatasync(VALUE io)
{
    rb_io_t *fptr;

    io = GetWriteIO(io);
    GetOpenFile(io, fptr);

    if (io_fflush(fptr) &lt; 0)
        rb_sys_fail_on_write(fptr);

    if ((int)rb_thread_io_blocking_region(nogvl_fdatasync, fptr, fptr-&gt;fd) == 0)
        return INT2FIX(0);

    /* fall back */
    return rb_io_fsync(io);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fileno-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>to_i</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a> </span>
      <span class='overload'>#<strong>fileno</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#to_i-instance_method" title="IO#to_i (method)">#to_i</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="flush-instance_method">
  <h3 class='signature '>
    #<strong>flush</strong>  &#x21d2; <code>self</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Flushes data buffered in <code>self</code> to the operating system (but does not necessarily flush data buffered in the operating system):</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$stdout</span>.<span class='id identifier rubyid_print'><a href="#print-instance_method" title="IO#print (method)">print</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>no newline</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># Not necessarily flushed.
</span><span class='gvar'>$stdout</span>.<span class='id identifier rubyid_flush'>flush</span>              <span class='comment'># Flushed.</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L2372-L2376'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2372' data-end='2376'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2372</span></pre>
<pre class='code cpp'>

VALUE
rb_io_flush(VALUE io)
{
    return rb_io_flush_raw(io, 1);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fsync-instance_method">
  <h3 class='signature '>
    #<strong>fsync</strong>  &#x21d2; <code>0</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Immediately writes to disk all data buffered in the stream, via the operating system’s <code>fsync(2)</code>.</p>

<p>Note this difference:</p>
<ul><li>
<p><a href="#sync=-instance_method" title="IO#sync= (method)">#sync=</a>: Ensures that data is flushed from the stream’s internal buffers, but does not guarantee that the operating system actually writes the data to disk.</p>
</li><li>
<p><code>fsync</code>: Ensures both that data is flushed from internal buffers, and that data is written to disk.</p>
</li></ul>

<p>Raises an exception if the operating system does not support <code>fsync(2)</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L2767-L2780'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2767' data-end='2780'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2767</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_fsync(VALUE io)
{
    rb_io_t *fptr;

    io = GetWriteIO(io);
    GetOpenFile(io, fptr);

    if (io_fflush(fptr) &lt; 0)
        rb_sys_fail_on_write(fptr);
    if ((int)rb_thread_io_blocking_region(nogvl_fsync, fptr, fptr-&gt;fd) &lt; 0)
        rb_sys_fail_path(fptr-&gt;pathv);
    return INT2FIX(0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="getbyte-instance_method">
  <h3 class='signature '>
    #<strong>getbyte</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads and returns the next byte (in range 0..255) from the stream; returns <code>nil</code> if already at end-of-stream. See <code>Byte IO</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_getbyte'>getbyte</span> <span class='comment'># =&gt; 70
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>
<span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.rus</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_getbyte'>getbyte</span> <span class='comment'># =&gt; 209
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Related: <a href="#readbyte-instance_method" title="IO#readbyte (method)">#readbyte</a> (may raise <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a>).</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L5006-L5030'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5006' data-end='5030'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 5006</span></pre>
<pre class='code cpp'>

VALUE
rb_io_getbyte(VALUE io)
{
    rb_io_t *fptr;
    int c;

    GetOpenFile(io, fptr);
    rb_io_check_byte_readable(fptr);
    READ_CHECK(fptr);
    VALUE r_stdout = rb_ractor_stdout();
    if (fptr-&gt;fd == 0 &amp;&amp; (fptr-&gt;mode &amp; FMODE_TTY) &amp;&amp; RB_TYPE_P(r_stdout, T_FILE)) {
        rb_io_t *ofp;
        GetOpenFile(r_stdout, ofp);
        if (ofp-&gt;mode &amp; FMODE_TTY) {
            rb_io_flush(r_stdout);
        }
    }
    if (io_fillbuf(fptr) &lt; 0) {
        return Qnil;
    }
    fptr-&gt;rbuf.off++;
    fptr-&gt;rbuf.len--;
    c = (unsigned char)fptr-&gt;rbuf.ptr[fptr-&gt;rbuf.off-1];
    return INT2FIX(c &amp; 0xff);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="getc-instance_method">
  <h3 class='signature '>
    #<strong>getc</strong>  &#x21d2; <code>character</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads and returns the next 1-character string from the stream; returns <code>nil</code> if already at end-of-stream. See <code>Character IO</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_getc'>getc</span>     <span class='comment'># =&gt; &quot;F&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>
<span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.rus</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_getc'>getc</span>.<span class='id identifier rubyid_ord'>ord</span> <span class='comment'># =&gt; 1090
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Related:  <a href="#readchar-instance_method" title="IO#readchar (method)">#readchar</a> (may raise <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a>).</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L4944-L4956'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4944' data-end='4956'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4944</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_getc(VALUE io)
{
    rb_io_t *fptr;
    rb_encoding *enc;

    GetOpenFile(io, fptr);
    rb_io_check_char_readable(fptr);

    enc = io_input_encoding(fptr);
    READ_CHECK(fptr);
    return io_getc(fptr, enc);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="gets-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>gets</strong>(sep = $/, chomp: false)  &#x21d2; <a href="String.html" title="String (class)">String</a><sup>?</sup> </span>
      <span class='overload'>#<strong>gets</strong>(limit, chomp: false)  &#x21d2; <a href="String.html" title="String (class)">String</a><sup>?</sup> </span>
      <span class='overload'>#<strong>gets</strong>(sep, limit, chomp: false)  &#x21d2; <a href="String.html" title="String (class)">String</a><sup>?</sup> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads and returns a line from the stream; assigns the return value to <code>$_</code>. See <code>Line IO</code>.</p>

<p>With no arguments given, returns the next line as determined by line separator <code>$/</code>, or <code>nil</code> if none:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span> <span class='comment'># =&gt; &quot;First line\n&quot;
</span><span class='gvar'>$_</span>     <span class='comment'># =&gt; &quot;First line\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span> <span class='comment'># =&gt; &quot;\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span> <span class='comment'># =&gt; &quot;Fourth line\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span> <span class='comment'># =&gt; &quot;Fifth line\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span> <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>With only string argument <code>sep</code> given, returns the next line as determined by line separator <code>sep</code>, or <code>nil</code> if none; see <code>Line Separator</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>l</span><span class='tstring_end'>&#39;</span></span>)   <span class='comment'># =&gt; &quot;First l&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>li</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; &quot;ine\nSecond li&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lin</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;ne\n\nFourth lin&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>        <span class='comment'># =&gt; &quot;e\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>The two special values for <code>sep</code> are honored:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># Get all.
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='kw'>nil</span>) <span class='comment'># =&gt; &quot;First line\nSecond line\n\nFourth line\nFifth line\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_rewind'><a href="#rewind-instance_method" title="IO#rewind (method)">rewind</a></span>
<span class='comment'># Get paragraph (up to two line separators).
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)  <span class='comment'># =&gt; &quot;First line\nSecond line\n\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>With only integer argument <code>limit</code> given, limits the number of bytes in the line; see <code>Line Limit</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># No more than one line.
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='int'>10</span>) } <span class='comment'># =&gt; &quot;First line&quot;
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='int'>11</span>) } <span class='comment'># =&gt; &quot;First line\n&quot;
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='int'>12</span>) } <span class='comment'># =&gt; &quot;First line\n&quot;</span></code></pre>

<p>With arguments <code>sep</code> and <code>limit</code> given, combines the two behaviors:</p>
<ul><li>
<p>Returns the next line as determined by line separator <code>sep</code>, or <code>nil</code> if none.</p>
</li><li>
<p>But returns no more bytes than are allowed by the limit.</p>
</li></ul>

<p>Optional keyword argument <code>chomp</code> specifies whether line separators are to be omitted:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># Chomp the lines.
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='label'>chomp:</span> <span class='kw'>true</span>) <span class='comment'># =&gt; &quot;First line&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='label'>chomp:</span> <span class='kw'>true</span>) <span class='comment'># =&gt; &quot;Second line&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='label'>chomp:</span> <span class='kw'>true</span>) <span class='comment'># =&gt; &quot;&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='label'>chomp:</span> <span class='kw'>true</span>) <span class='comment'># =&gt; &quot;Fourth line&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='label'>chomp:</span> <span class='kw'>true</span>) <span class='comment'># =&gt; &quot;Fifth line&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'>gets</span>(<span class='label'>chomp:</span> <span class='kw'>true</span>) <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L4321-L4330'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4321' data-end='4330'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4321</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_gets_m(int argc, VALUE *argv, VALUE io)
{
    VALUE str;

    str = rb_io_getline(argc, argv, io);
    rb_lastline_set(str);

    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="initialize_copy-instance_method">
  <h3 class='signature nodoc'>
    #<strong>initialize_copy</strong>(io)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L8485-L8526'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8485' data-end='8526'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 8485</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_init_copy(VALUE dest, VALUE io)
{
    rb_io_t *fptr, *orig;
    int fd;
    VALUE write_io;
    rb_off_t pos;

    io = rb_io_get_io(io);
    if (!OBJ_INIT_COPY(dest, io)) return dest;
    GetOpenFile(io, orig);
    MakeOpenFile(dest, fptr);

    rb_io_flush(io);

    /* copy rb_io_t structure */
    fptr-&gt;mode = orig-&gt;mode &amp; ~FMODE_EXTERNAL;
    fptr-&gt;encs = orig-&gt;encs;
    fptr-&gt;pid = orig-&gt;pid;
    fptr-&gt;lineno = orig-&gt;lineno;
    fptr-&gt;timeout = orig-&gt;timeout;
    if (!NIL_P(orig-&gt;pathv)) fptr-&gt;pathv = orig-&gt;pathv;
    fptr_copy_finalizer(fptr, orig);

    fd = ruby_dup(orig-&gt;fd);
    fptr-&gt;fd = fd;
    pos = io_tell(orig);
    if (0 &lt;= pos)
        io_seek(fptr, pos, SEEK_SET);
    if (fptr-&gt;mode &amp; FMODE_BINMODE) {
        rb_io_binmode(dest);
    }

    write_io = GetWriteIO(io);
    if (io != write_io) {
        write_io = rb_obj_dup(write_io);
        fptr-&gt;tied_io_for_writing = write_io;
        rb_ivar_set(dest, rb_intern(&quot;@tied_io_for_writing&quot;), write_io);
    }

    return dest;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inspect-instance_method">
  <h3 class='signature '>
    #<strong>inspect</strong>  &#x21d2; <a href="String.html" title="String (class)">String</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a string representation of <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_inspect'>inspect</span> <span class='comment'># =&gt; &quot;#&lt;File:t.txt&gt;&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L2959-L2986'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2959' data-end='2986'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2959</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_inspect(VALUE obj)
{
    rb_io_t *fptr;
    VALUE result;
    static const char closed[] = &quot; (closed)&quot;;

    fptr = RFILE(obj)-&gt;fptr;
    if (!fptr) return rb_any_to_s(obj);
    result = rb_str_new_cstr(&quot;#&lt;&quot;);
    rb_str_append(result, rb_class_name(CLASS_OF(obj)));
    rb_str_cat2(result, &quot;:&quot;);
    if (NIL_P(fptr-&gt;pathv)) {
        if (fptr-&gt;fd &lt; 0) {
            rb_str_cat(result, closed+1, strlen(closed)-1);
        }
        else {
            rb_str_catf(result, &quot;fd %d&quot;, fptr-&gt;fd);
        }
    }
    else {
        rb_str_append(result, fptr-&gt;pathv);
        if (fptr-&gt;fd &lt; 0) {
            rb_str_cat(result, closed, strlen(closed));
        }
    }
    return rb_str_cat2(result, &quot;&gt;&quot;);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="internal_encoding-instance_method">
  <h3 class='signature '>
    #<strong>internal_encoding</strong>  &#x21d2; <a href="Encoding.html" title="Encoding (class)">Encoding</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the <a href="Encoding.html" title="Encoding (class)"><code>::Encoding</code></a> object that represents the encoding of the internal string, if conversion is specified, or <code>nil</code> otherwise.</p>

<p>See <code>Encodings</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L13384-L13391'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='13384' data-end='13391'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 13384</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_internal_encoding(VALUE io)
{
    rb_io_t *fptr = RFILE(rb_io_taint_check(io))-&gt;fptr;

    if (!fptr-&gt;encs.enc2) return Qnil;
    return rb_enc_from_encoding(io_read_encoding(fptr));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ioctl-instance_method">
  <h3 class='signature '>
    #<strong>ioctl</strong>(integer_cmd, argument)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Invokes Posix system call <a href="https://linux.die.net/man/2/ioctl" target="_parent" title="ioctl(2)">ioctl(2)</a>, which issues a low-level command to an I/O device.</p>

<p>Issues a low-level command to an I/O device. The arguments and returned value are platform-dependent. The effect of the call is platform-dependent.</p>

<p>If argument <code>argument</code> is an integer, it is passed directly; if it is a string, it is interpreted as a binary sequence of bytes.</p>

<p>Not implemented on all platforms.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L11371-L11378'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='11371' data-end='11378'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 11371</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_ioctl(int argc, VALUE *argv, VALUE io)
{
    VALUE req, arg;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;req, &amp;arg);
    return rb_ioctl(io, req, arg);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="path-instance_method">
  <h3 class='signature '>
    #<strong>path</strong>  &#x21d2; <a href="String.html" title="String (class)">String</a><sup>?</sup>     <span class='aliases'>Also known as: <span class='names'>#to_path</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the path associated with the <code>IO</code>, or <code>nil</code> if there is no path associated with the <code>IO</code>. It is not guaranteed that the path exists on the filesystem.</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$stdin</span>.<span class='id identifier rubyid_path'>path</span> <span class='comment'># =&gt; &quot;&lt;STDIN&gt;&quot;
</span>
<span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>) {<span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_path'>path</span>} <span class='comment'># =&gt; &quot;testfile&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L2936-L2945'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2936' data-end='2945'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2936</span></pre>
<pre class='code cpp'>

VALUE
rb_io_path(VALUE io)
{
    rb_io_t *fptr = RFILE(io)-&gt;fptr;

    if (!fptr)
        return Qnil;

    return rb_obj_dup(fptr-&gt;pathv);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pid-instance_method">
  <h3 class='signature '>
    #<strong>pid</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the process ID of a child process associated with the stream, which will have been set by <code>IO#popen</code>, or <code>nil</code> if the stream was not created by <code>IO#popen</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_popen'><a href="#popen-class_method" title="IO.popen (method)">popen</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>if</span> <span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>
  <span class='gvar'>$stderr</span>.<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>In parent, child pid is </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>.<span class='id identifier rubyid_pid'>pid</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>else</span>
  <span class='gvar'>$stderr</span>.<span class='id identifier rubyid_puts'><a href="#puts-instance_method" title="IO#puts (method)">puts</a></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>In child, pid is </span><span class='embexpr_beg'>#{</span><span class='gvar'>$$</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>In</span> <span class='id identifier rubyid_child'>child</span><span class='comma'>,</span> <span class='id identifier rubyid_pid'>pid</span> <span class='id identifier rubyid_is'>is</span> <span class='int'>26209</span>
<span class='const'>In</span> <span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span> <span class='id identifier rubyid_pid'>pid</span> <span class='id identifier rubyid_is'>is</span> <span class='int'>26209</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L2912-L2921'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2912' data-end='2921'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2912</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_pid(VALUE io)
{
    rb_io_t *fptr;

    GetOpenFile(io, fptr);
    if (!fptr-&gt;pid)
        return Qnil;
    return PIDT2NUM(fptr-&gt;pid);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pread-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>pread</strong>(maxlen, offset)  &#x21d2; <a href="String.html" title="String (class)">String</a> </span>
      <span class='overload'>#<strong>pread</strong>(maxlen, offset, out_string)  &#x21d2; <a href="String.html" title="String (class)">String</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Behaves like <a href="#readpartial-instance_method" title="IO#readpartial (method)">#readpartial</a>, except that it:</p>
<ul><li>
<p>Reads at the given <code>offset</code> (in bytes).</p>
</li><li>
<p>Disregards, and does not modify, the stream’s position (see <code>Position</code>).</p>
</li><li>
<p>Bypasses any user space buffering in the stream.</p>
</li></ul>

<p>Because this method does not disturb the stream’s state (its position, in particular), <code>pread</code> allows multiple threads and processes to use the same IO object for reading at various offsets.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span> <span class='comment'># =&gt; &quot;First line\nSecond line\n\nFourth line\nFifth line\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="IO#pos (method)">pos</a></span>  <span class='comment'># =&gt; 52
</span><span class='comment'># Read 12 bytes at offset 0.
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_pread'>pread</span>(<span class='int'>12</span><span class='comma'>,</span> <span class='int'>0</span>) <span class='comment'># =&gt; &quot;First line\n&quot;
</span><span class='comment'># Read 9 bytes at offset 8.
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_pread'>pread</span>(<span class='int'>9</span><span class='comma'>,</span> <span class='int'>8</span>)  <span class='comment'># =&gt; &quot;ne\nSecon&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Not available on some platforms.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L6152-L6187'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='6152' data-end='6187'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 6152</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_pread(int argc, VALUE *argv, VALUE io)
{
    VALUE len, offset, str;
    rb_io_t *fptr;
    ssize_t n;
    struct prdwr_internal_arg arg = {.io = io};
    int shrinkable;

    rb_scan_args(argc, argv, &quot;21&quot;, &amp;len, &amp;offset, &amp;str);
    arg.count = NUM2SIZET(len);
    arg.offset = NUM2OFFT(offset);

    shrinkable = io_setstrbuf(&amp;str, (long)arg.count);
    if (arg.count == 0) return str;
    arg.buf = RSTRING_PTR(str);

    GetOpenFile(io, fptr);
    rb_io_check_byte_readable(fptr);

    arg.fd = fptr-&gt;fd;
    rb_io_check_closed(fptr);

    rb_str_locktmp(str);
    n = (ssize_t)rb_ensure(pread_internal_call, (VALUE)&amp;arg, rb_str_unlocktmp, str);

    if (n &lt; 0) {
        rb_sys_fail_path(fptr-&gt;pathv);
    }
    io_set_read_length(str, n, shrinkable);
    if (n == 0 &amp;&amp; arg.count &gt; 0) {
        rb_eof_error();
    }

    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="print-instance_method">
  <h3 class='signature '>
    #<strong>print</strong>(*objects)  &#x21d2; <code>nil</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes the given objects to the stream; returns <code>nil</code>. Appends the output record separator <code>$OUTPUT_RECORD_SEPARATOR</code> (<code>$\</code>), if it is not <code>nil</code>. See <code>Line IO</code>.</p>

<p>With argument <code>objects</code> given, for each object:</p>
<ul><li>
<p>Converts via its method <code>to_s</code> if not a string.</p>
</li><li>
<p>Writes to the stream.</p>
</li><li>
<p>If not the last object, writes the output field separator <code>$OUTPUT_FIELD_SEPARATOR</code> (<code>$,</code>) if it is not <code>nil</code>.</p>
</li></ul>

<p>With default separators:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w+</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_objects'>objects</span> <span class='op'>=</span> [<span class='int'>0</span><span class='comma'>,</span> <span class='float'>0.0</span><span class='comma'>,</span> <span class='const'><a href="Rational.html" title="Rational (class)">Rational</a></span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span>)<span class='comma'>,</span> <span class='const'><a href="Complex.html" title="Complex (class)">Complex</a></span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span>)<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_zero'>zero</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>zero</span><span class='tstring_end'>&#39;</span></span>]
<span class='id identifier rubyid_p'>p</span> <span class='gvar'>$OUTPUT_RECORD_SEPARATOR</span>
<span class='id identifier rubyid_p'>p</span> <span class='gvar'>$OUTPUT_FIELD_SEPARATOR</span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_print'>print</span>(<span class='op'>*</span><span class='id identifier rubyid_objects'>objects</span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_rewind'><a href="#rewind-instance_method" title="IO#rewind (method)">rewind</a></span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>nil</span>
<span class='kw'>nil</span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>00.00/10+0izerozero</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>With specified separators:</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$\</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
<span class='gvar'>$,</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_rewind'><a href="#rewind-instance_method" title="IO#rewind (method)">rewind</a></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_print'>print</span>(<span class='op'>*</span><span class='id identifier rubyid_objects'>objects</span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_rewind'><a href="#rewind-instance_method" title="IO#rewind (method)">rewind</a></span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0,0.0,0/1,0+0i,zero,zero\n</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>With no argument given, writes the content of <code>$_</code> (which is usually the most recent user input):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w+</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span> <span class='comment'># Sets $_ to the most recent user input.
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_print'>print</span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L8665-L8691'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8665' data-end='8691'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 8665</span></pre>
<pre class='code cpp'>

VALUE
rb_io_print(int argc, const VALUE *argv, VALUE out)
{
    int i;
    VALUE line;

    /* if no argument given, print `$_&#39; */
    if (argc == 0) {
        argc = 1;
        line = rb_lastline_get();
        argv = &amp;line;
    }
    if (argc &gt; 1 &amp;&amp; !NIL_P(rb_output_fs)) {
        rb_category_warn(RB_WARN_CATEGORY_DEPRECATED, &quot;$, is set to non-nil value&quot;);
    }
    for (i=0; i&lt;argc; i++) {
        if (!NIL_P(rb_output_fs) &amp;&amp; i&gt;0) {
            rb_io_write(out, rb_output_fs);
        }
        rb_io_write(out, argv[i]);
    }
    if (argc &gt; 0 &amp;&amp; !NIL_P(rb_output_rs)) {
        rb_io_write(out, rb_output_rs);
    }

    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="printf-instance_method">
  <h3 class='signature '>
    #<strong>printf</strong>(format_string, *objects)  &#x21d2; <code>nil</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Formats and writes <code>objects</code> to the stream.</p>

<p>For details on <code>format_string</code>, see <code>Format Specifications</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L8539-L8544'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8539' data-end='8544'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 8539</span></pre>
<pre class='code cpp'>

VALUE
rb_io_printf(int argc, const VALUE *argv, VALUE out)
{
    rb_io_write(out, rb_f_sprintf(argc, argv));
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="putc-instance_method">
  <h3 class='signature '>
    #<strong>putc</strong>(object)  &#x21d2; <a href="Object.html" title="Object (class)">Object</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes a character to the stream. See <code>Character IO</code>.</p>

<p>If <code>object</code> is numeric, converts to integer if necessary, then writes the character whose code is the least significant byte; if <code>object</code> is a string, writes the first character:</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$stdout</span>.<span class='id identifier rubyid_putc'>putc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A</span><span class='tstring_end'>&quot;</span></span>
<span class='gvar'>$stdout</span>.<span class='id identifier rubyid_putc'>putc</span> <span class='int'>65</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>AA</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L8770-L8783'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8770' data-end='8783'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 8770</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_putc(VALUE io, VALUE ch)
{
    VALUE str;
    if (RB_TYPE_P(ch, T_STRING)) {
        str = rb_str_substr(ch, 0, 1);
    }
    else {
        char c = NUM2CHR(ch);
        str = rb_str_new(&amp;c, 1);
    }
    rb_io_write(io, str);
    return ch;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="puts-instance_method">
  <h3 class='signature '>
    #<strong>puts</strong>(*objects)  &#x21d2; <code>nil</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes the given <code>objects</code> to the stream, which must be open for writing; returns <code>nil</code>.\ Writes a newline after each that does not already end with a newline sequence. If called without arguments, writes a newline. See <code>Line IO</code>.</p>

<p>Note that each added newline is the character <code>&quot;\n&quot;&lt;//tt&gt;, not the output record separator (&lt;tt&gt;$\</code>).</p>

<p>Treatment for each object:</p>
<ul><li>
<p>String: writes the string.</p>
</li><li>
<p>Neither string nor array: writes <code>object.to_s</code>.</p>
</li><li>
<p>Array: writes each element of the array; arrays may be nested.</p>
</li></ul>

<p>To keep these examples brief, we define this helper method:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_show'>show</span>(<span class='op'>*</span><span class='id identifier rubyid_objects'>objects</span>)
  <span class='comment'># Puts objects to file.
</span>  <span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w+</span><span class='tstring_end'>&#39;</span></span>)
  <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_puts'>puts</span>(<span class='id identifier rubyid_objects'>objects</span>)
  <span class='comment'># Return file content.
</span>  <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_rewind'><a href="#rewind-instance_method" title="IO#rewind (method)">rewind</a></span>
  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>
  <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>
<span class='kw'>end</span>

<span class='comment'># Strings without newlines.
</span><span class='id identifier rubyid_show'>show</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&#39;</span></span>)     <span class='comment'># =&gt; &quot;foo\nbar\nbaz\n&quot;
</span><span class='comment'># Strings, some with newlines.
</span><span class='id identifier rubyid_show'>show</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>baz\n</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; &quot;foo\nbar\nbaz\n&quot;
</span>
<span class='comment'># Neither strings nor arrays:
</span><span class='id identifier rubyid_show'>show</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='float'>0.0</span><span class='comma'>,</span> <span class='const'><a href="Rational.html" title="Rational (class)">Rational</a></span>(<span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span>)<span class='comma'>,</span> <span class='const'><a href="Complex.html" title="Complex (class)">Complex</a></span>(<span class='int'>9</span><span class='comma'>,</span> <span class='int'>0</span>)<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_zero'>zero</span>)
<span class='comment'># =&gt; &quot;0\n0.0\n0/1\n9+0i\nzero\n&quot;
</span>
<span class='comment'># Array of strings.
</span><span class='id identifier rubyid_show'>show</span>([<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&#39;</span></span>]) <span class='comment'># =&gt; &quot;foo\nbar\nbaz\n&quot;
</span><span class='comment'># Nested arrays.
</span><span class='id identifier rubyid_show'>show</span>([[[<span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span>]<span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span>]<span class='comma'>,</span> <span class='int'>4</span><span class='comma'>,</span> <span class='int'>5</span>])  <span class='comment'># =&gt; &quot;0\n1\n2\n3\n4\n5\n&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L8897-L8935'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8897' data-end='8935'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 8897</span></pre>
<pre class='code cpp'>

VALUE
rb_io_puts(int argc, const VALUE *argv, VALUE out)
{
    VALUE line, args[2];

    /* if no argument given, print newline. */
    if (argc == 0) {
        rb_io_write(out, rb_default_rs);
        return Qnil;
    }
    for (int i = 0; i &lt; argc; i++) {
        // Convert the argument to a string:
        if (RB_TYPE_P(argv[i], T_STRING)) {
            line = argv[i];
        }
        else if (rb_exec_recursive(io_puts_ary, argv[i], out)) {
            continue;
        }
        else {
            line = rb_obj_as_string(argv[i]);
        }

        // Write the line:
        int n = 0;
        if (RSTRING_LEN(line) == 0) {
            args[n++] = rb_default_rs;
        }
        else {
            args[n++] = line;
            if (!rb_str_end_with_asciichar(line, &#39;\n&#39;)) {
                args[n++] = rb_default_rs;
            }
        }

        rb_io_writev(out, n, args);
    }

    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pwrite-instance_method">
  <h3 class='signature '>
    #<strong>pwrite</strong>(object, offset)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Behaves like <a href="#write-instance_method" title="IO#write (method)">#write</a>, except that it:</p>
<ul><li>
<p>Writes at the given <code>offset</code> (in bytes).</p>
</li><li>
<p>Disregards, and does not modify, the stream’s position (see <code>Position</code>).</p>
</li><li>
<p>Bypasses any user space buffering in the stream.</p>
</li></ul>

<p>Because this method does not disturb the stream’s state (its position, in particular), <code>pwrite</code> allows multiple threads and processes to use the same IO object for writing at various offsets.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w+</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># Write 6 bytes at offset 3.
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_pwrite'>pwrite</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ABCDEF</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>3</span>) <span class='comment'># =&gt; 6
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_rewind'><a href="#rewind-instance_method" title="IO#rewind (method)">rewind</a></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span> <span class='comment'># =&gt; &quot;\u0000\u0000\u0000ABCDEF&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Not available on some platforms.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L6232-L6259'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='6232' data-end='6259'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 6232</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_pwrite(VALUE io, VALUE str, VALUE offset)
{
    rb_io_t *fptr;
    ssize_t n;
    struct prdwr_internal_arg arg = {.io = io};
    VALUE tmp;

    if (!RB_TYPE_P(str, T_STRING))
        str = rb_obj_as_string(str);

    arg.offset = NUM2OFFT(offset);

    io = GetWriteIO(io);
    GetOpenFile(io, fptr);
    rb_io_check_writable(fptr);
    arg.fd = fptr-&gt;fd;

    tmp = rb_str_tmp_frozen_acquire(str);
    arg.buf = RSTRING_PTR(tmp);
    arg.count = (size_t)RSTRING_LEN(tmp);

    n = (ssize_t)rb_thread_io_blocking_call(internal_pwrite_func, &amp;arg, fptr-&gt;fd, RB_WAITFD_OUT);
    if (n &lt; 0) rb_sys_fail_path(fptr-&gt;pathv);
    rb_str_tmp_frozen_release(str, tmp);

    return SSIZET2NUM(n);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="read-instance_method">
  <h3 class='signature '>
    #<strong>read</strong>(maxlen = nil, out_string = nil)  &#x21d2; <a href="String.html" title="String (class)">String</a>, ...   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads bytes from the stream; the stream must be opened for reading (see <code>Access Modes</code>):</p>
<ul><li>
<p>If <code>maxlen</code> is <code>nil</code>, reads all bytes using the stream’s data mode.</p>
</li><li>
<p>Otherwise reads up to <code>maxlen</code> bytes in binary mode.</p>
</li></ul>

<p>Returns a string (either a new string or the given <code>out_string</code>) containing the bytes read. The encoding of the string depends on both <code>maxLen</code> and <code>out_string</code>:</p>
<ul><li>
<p><code>maxlen</code> is <code>nil</code>: uses internal encoding of <code>self</code> (regardless of whether <code>out_string</code> was given).</p>
</li><li>
<p><code>maxlen</code> not <code>nil</code>:</p>
<ul><li>
<p><code>out_string</code> given: encoding of <code>out_string</code> not modified.</p>
</li><li>
<p><code>out_string</code> not given: ASCII-8BIT is used.</p>
</li></ul>
</li></ul>

<p><strong>Without Argument <code>out_string</code></strong></p>

<p>When argument <code>out_string</code> is omitted, the returned value is a new string:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'>read</span>
<span class='comment'># =&gt; &quot;First line\nSecond line\n\nFourth line\nFifth line\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_rewind'><a href="#rewind-instance_method" title="IO#rewind (method)">rewind</a></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'>read</span>(<span class='int'>30</span>) <span class='comment'># =&gt; &quot;First line\r\nSecond line\r\n\r\nFou&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'>read</span>(<span class='int'>30</span>) <span class='comment'># =&gt; &quot;rth line\r\nFifth line\r\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'>read</span>(<span class='int'>30</span>) <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>If <code>maxlen</code> is zero, returns an empty string.</p>

<p><strong> With Argument <code>out_string</code></strong></p>

<p>When argument <code>out_string</code> is given, the returned value is <code>out_string</code>, whose content is replaced:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>      <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'>read</span>(<span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span>) <span class='comment'># =&gt; &quot;First line\nSecond line\n\nFourth line\nFifth line\n&quot;
</span><span class='id identifier rubyid_s'>s</span>              <span class='comment'># =&gt; &quot;First line\nSecond line\n\nFourth line\nFifth line\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_rewind'><a href="#rewind-instance_method" title="IO#rewind (method)">rewind</a></span>
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'>read</span>(<span class='int'>30</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span>)  <span class='comment'># =&gt; &quot;First line\r\nSecond line\r\n\r\nFou&quot;
</span><span class='id identifier rubyid_s'>s</span>              <span class='comment'># =&gt; &quot;First line\r\nSecond line\r\n\r\nFou&quot;
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'>read</span>(<span class='int'>30</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span>)  <span class='comment'># =&gt; &quot;rth line\r\nFifth line\r\n&quot;
</span><span class='id identifier rubyid_s'>s</span>              <span class='comment'># =&gt; &quot;rth line\r\nFifth line\r\n&quot;
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bat</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'>read</span>(<span class='int'>30</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span>)  <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_s'>s</span>              <span class='comment'># =&gt; &quot;&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Note that this method behaves like the fread() function in C. This means it retries to invoke read(2) system calls to read data with the specified maxlen (or until EOF).</p>

<p>This behavior is preserved even if the stream is in non-blocking mode. (This method is non-blocking-flag insensitive as other methods.)</p>

<p>If you need the behavior like a single read(2) system call, consider <a href="#readpartial-instance_method" title="IO#readpartial (method)">#readpartial</a>, <a href="#read_nonblock-instance_method" title="IO#read_nonblock (method)">#read_nonblock</a>, and <a href="#sysread-instance_method" title="IO#sysread (method)">#sysread</a>.</p>

<p>Related: <a href="#write-instance_method" title="IO#write (method)">#write</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L3767-L3813'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3767' data-end='3813'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 3767</span></pre>
<pre class='code cpp'>

static VALUE
io_read(int argc, VALUE *argv, VALUE io)
{
    rb_io_t *fptr;
    long n, len;
    VALUE length, str;
    int shrinkable;
#if RUBY_CRLF_ENVIRONMENT
    int previous_mode;
#endif

    rb_scan_args(argc, argv, &quot;02&quot;, &amp;length, &amp;str);

    if (NIL_P(length)) {
        GetOpenFile(io, fptr);
        rb_io_check_char_readable(fptr);
        return read_all(fptr, remain_size(fptr), str);
    }
    len = NUM2LONG(length);
    if (len &lt; 0) {
        rb_raise(rb_eArgError, &quot;negative length %ld given&quot;, len);
    }

    shrinkable = io_setstrbuf(&amp;str,len);

    GetOpenFile(io, fptr);
    rb_io_check_byte_readable(fptr);
    if (len == 0) {
        io_set_read_length(str, 0, shrinkable);
        return str;
    }

    READ_CHECK(fptr);
#if RUBY_CRLF_ENVIRONMENT
    previous_mode = set_binary_mode_with_seek_cur(fptr);
#endif
    n = io_fread(str, 0, len, fptr);
    io_set_read_length(str, n, shrinkable);
#if RUBY_CRLF_ENVIRONMENT
    if (previous_mode == O_TEXT) {
        setmode(fptr-&gt;fd, O_TEXT);
    }
#endif
    if (n == 0) return Qnil;

    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="read_nonblock-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>read_nonblock</strong>(maxlen [, options])  &#x21d2; <a href="String.html" title="String (class)">String</a> </span>
      <span class='overload'>#<strong>read_nonblock</strong>(maxlen, outbuf [, options])  &#x21d2; <code>outbuf</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads at most <em>maxlen</em> bytes from <em>ios</em> using the read(2) system call after O_NONBLOCK is set for the underlying file descriptor.</p>

<p>If the optional <em>outbuf</em> argument is present, it must reference a <a href="String.html" title="String (class)"><code>::String</code></a>, which will receive the data. The <em>outbuf</em> will contain only the received data after the method call even if it is not empty at the beginning.</p>

<p>read_nonblock just calls the read(2) system call. It causes all errors the read(2) system call causes: <code>Errno::EWOULDBLOCK</code>, <code>Errno::EINTR</code>, etc. The caller should care such errors.</p>

<p>If the exception is <code>Errno::EWOULDBLOCK</code> or <code>Errno::EAGAIN</code>, it is extended by <a href="IO/WaitReadable.html" title="IO::WaitReadable (module)"><code>::IO::WaitReadable</code></a>. So <a href="IO/WaitReadable.html" title="IO::WaitReadable (module)"><code>::IO::WaitReadable</code></a> can be used to rescue the exceptions for retrying read_nonblock.</p>

<p>read_nonblock causes <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a> on EOF.</p>

<p>On some platforms, such as Windows, non-blocking mode is not supported on <code>IO</code> objects other than sockets. In such cases, <code>Errno::EBADF</code> will be raised.</p>

<p>If the read byte buffer is not empty, read_nonblock reads from the buffer like readpartial. In this case, the read(2) system call is not called.</p>

<p>When read_nonblock raises an exception kind of <a href="IO/WaitReadable.html" title="IO::WaitReadable (module)"><code>::IO::WaitReadable</code></a>, read_nonblock should not be called until io is readable for avoiding busy loop. This can be done as follows.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># emulates blocking read (readpartial).
</span><span class='kw'>begin</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_read_nonblock'>read_nonblock</span>(<span class='id identifier rubyid_maxlen'>maxlen</span>)
<span class='kw'>rescue</span> <span class='const'>IO</span><span class='op'>::</span><span class='const'><a href="IO/WaitReadable.html" title="IO::WaitReadable (module)">WaitReadable</a></span>
  <span class='const'>IO</span>.<span class='id identifier rubyid_select'><a href="#select-class_method" title="IO.select (method)">select</a></span>([<span class='id identifier rubyid_io'>io</span>])
  <span class='kw'>retry</span>
<span class='kw'>end</span></code></pre>

<p>Although <code>read_nonblock</code> doesn’t raise <a href="IO/WaitWritable.html" title="IO::WaitWritable (module)"><code>::IO::WaitWritable</code></a>. <code>OpenSSL::Buffering#read_nonblock</code> can raise <a href="IO/WaitWritable.html" title="IO::WaitWritable (module)"><code>::IO::WaitWritable</code></a>. If IO and SSL should be used polymorphically, <a href="IO/WaitWritable.html" title="IO::WaitWritable (module)"><code>::IO::WaitWritable</code></a> should be rescued too. See the document of <code>OpenSSL::Buffering#read_nonblock</code> for sample code.</p>

<p>Note that this method is identical to readpartial except the non-blocking flag is set.</p>

<p>By specifying a keyword argument <em>exception</em> to <code>false</code>, you can indicate that read_nonblock should not raise an <a href="IO/WaitReadable.html" title="IO::WaitReadable (module)"><code>::IO::WaitReadable</code></a> exception, but return the symbol <code>:wait_readable</code> instead. At EOF, it will return nil instead of raising <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.rb#L62-L64'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='62' data-end='64'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.rb', line 62</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_read_nonblock'>read_nonblock</span>(<span class='id identifier rubyid_len'>len</span><span class='comma'>,</span> <span class='id identifier rubyid_buf'>buf</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>exception:</span> <span class='kw'>true</span>)
  <span class='const'>Primitive</span>.<span class='id identifier rubyid_io_read_nonblock'>io_read_nonblock</span>(<span class='id identifier rubyid_len'>len</span><span class='comma'>,</span> <span class='id identifier rubyid_buf'>buf</span><span class='comma'>,</span> <span class='id identifier rubyid_exception'>exception</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="readbyte-instance_method">
  <h3 class='signature '>
    #<strong>readbyte</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads and returns the next byte (in range 0..255) from the stream; raises <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a> if already at end-of-stream. See <code>Byte IO</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readbyte'>readbyte</span> <span class='comment'># =&gt; 70
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>
<span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.rus</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readbyte'>readbyte</span> <span class='comment'># =&gt; 209
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Related: <a href="#getbyte-instance_method" title="IO#getbyte (method)">#getbyte</a> (will not raise <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a>).</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L5051-L5060'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5051' data-end='5060'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 5051</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_readbyte(VALUE io)
{
    VALUE c = rb_io_getbyte(io);

    if (NIL_P(c)) {
        rb_eof_error();
    }
    return c;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="readchar-instance_method">
  <h3 class='signature '>
    #<strong>readchar</strong>  &#x21d2; <a href="String.html" title="String (class)">String</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads and returns the next 1-character string from the stream; raises <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a> if already at end-of-stream. See <code>Character IO</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readchar'>readchar</span>     <span class='comment'># =&gt; &quot;F&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>
<span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.rus</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readchar'>readchar</span>.<span class='id identifier rubyid_ord'>ord</span> <span class='comment'># =&gt; 1090
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Related:  <a href="#getc-instance_method" title="IO#getc (method)">#getc</a> (will not raise <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a>).</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L4977-L4986'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4977' data-end='4986'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4977</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_readchar(VALUE io)
{
    VALUE c = rb_io_getc(io);

    if (NIL_P(c)) {
        rb_eof_error();
    }
    return c;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="readline-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>readline</strong>(sep = $/, chomp: false)  &#x21d2; <a href="String.html" title="String (class)">String</a> </span>
      <span class='overload'>#<strong>readline</strong>(limit, chomp: false)  &#x21d2; <a href="String.html" title="String (class)">String</a> </span>
      <span class='overload'>#<strong>readline</strong>(sep, limit, chomp: false)  &#x21d2; <a href="String.html" title="String (class)">String</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads a line as with <a href="#gets-instance_method" title="IO#gets (method)">#gets</a>, but raises <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a> if already at end-of-stream.</p>

<p>Optional keyword argument <code>chomp</code> specifies whether line separators are to be omitted.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.rb#L133-L135'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='133' data-end='135'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.rb', line 133</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_readline'>readline</span>(<span class='id identifier rubyid_sep'>sep</span> <span class='op'>=</span> <span class='gvar'>$/</span><span class='comma'>,</span> <span class='id identifier rubyid_limit'>limit</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>chomp:</span> <span class='kw'>false</span>)
  <span class='const'>Primitive</span>.<span class='id identifier rubyid_io_readline'>io_readline</span>(<span class='id identifier rubyid_sep'>sep</span><span class='comma'>,</span> <span class='id identifier rubyid_limit'>limit</span><span class='comma'>,</span> <span class='id identifier rubyid_chomp'>chomp</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="readlines-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>readlines</strong>(sep = $/, chomp: false)  &#x21d2; <a href="Array.html" title="Array (class)">Array</a> </span>
      <span class='overload'>#<strong>readlines</strong>(limit, chomp: false)  &#x21d2; <a href="Array.html" title="Array (class)">Array</a> </span>
      <span class='overload'>#<strong>readlines</strong>(sep, limit, chomp: false)  &#x21d2; <a href="Array.html" title="Array (class)">Array</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads and returns all remaining line from the stream; does not modify <code>$_</code>. See <code>Line IO</code>.</p>

<p>With no arguments given, returns lines as determined by line separator <code>$/</code>, or <code>nil</code> if none:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readlines'>readlines</span>
<span class='comment'># =&gt; [&quot;First line\n&quot;, &quot;Second line\n&quot;, &quot;\n&quot;, &quot;Fourth line\n&quot;, &quot;Fifth line\n&quot;]
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readlines'>readlines</span> <span class='comment'># =&gt; []
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>With only string argument <code>sep</code> given, returns lines as determined by line separator <code>sep</code>, or <code>nil</code> if none; see <code>Line Separator</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readlines'>readlines</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>li</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># =&gt; [&quot;First li&quot;, &quot;ne\nSecond li&quot;, &quot;ne\n\nFourth li&quot;, &quot;ne\nFifth li&quot;, &quot;ne\n&quot;]
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>The two special values for <code>sep</code> are honored:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># Get all into one string.
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readlines'>readlines</span>(<span class='kw'>nil</span>)
<span class='comment'># =&gt; [&quot;First line\nSecond line\n\nFourth line\nFifth line\n&quot;]
</span><span class='comment'># Get paragraphs (up to two line separators).
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_rewind'><a href="#rewind-instance_method" title="IO#rewind (method)">rewind</a></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readlines'>readlines</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'># =&gt; [&quot;First line\nSecond line\n\n&quot;, &quot;Fourth line\nFifth line\n&quot;]
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>With only integer argument <code>limit</code> given, limits the number of bytes in each line; see <code>Line Limit</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readlines'>readlines</span>(<span class='int'>8</span>)
<span class='comment'># =&gt; [&quot;First li&quot;, &quot;ne\n&quot;, &quot;Second l&quot;, &quot;ine\n&quot;, &quot;\n&quot;, &quot;Fourth l&quot;, &quot;ine\n&quot;, &quot;Fifth li&quot;, &quot;ne\n&quot;]
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>With arguments <code>sep</code> and <code>limit</code> given, combines the two behaviors:</p>
<ul><li>
<p>Returns lines as determined by line separator <code>sep</code>.</p>
</li><li>
<p>But returns no more bytes in a line than are allowed by the limit.</p>
</li></ul>

<p>Optional keyword argument <code>chomp</code> specifies whether line separators are to be omitted:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readlines'>readlines</span>(<span class='label'>chomp:</span> <span class='kw'>true</span>)
<span class='comment'># =&gt; [&quot;First line&quot;, &quot;Second line&quot;, &quot;&quot;, &quot;Fourth line&quot;, &quot;Fifth line&quot;]
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L4468-L4475'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4468' data-end='4475'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 4468</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_readlines(int argc, VALUE *argv, VALUE io)
{
    struct getline_arg args;

    prepare_getline_args(argc, argv, &amp;args, io);
    return io_readlines(&amp;args, io);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="readpartial-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>readpartial</strong>(maxlen)  &#x21d2; <a href="String.html" title="String (class)">String</a> </span>
      <span class='overload'>#<strong>readpartial</strong>(maxlen, out_string)  &#x21d2; <code>out_string</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads up to <code>maxlen</code> bytes from the stream; returns a string (either a new string or the given <code>out_string</code>). Its encoding is:</p>
<ul><li>
<p>The unchanged encoding of <code>out_string</code>, if <code>out_string</code> is given.</p>
</li><li>
<p>ASCII-8BIT, otherwise.</p>
</li><li>
<p>Contains <code>maxlen</code> bytes from the stream, if available.</p>
</li><li>
<p>Otherwise contains all available bytes, if any available.</p>
</li><li>
<p>Otherwise is an empty string.</p>
</li></ul>

<p>With the single non-negative integer argument <code>maxlen</code> given, returns a new string:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readpartial'>readpartial</span>(<span class='int'>20</span>) <span class='comment'># =&gt; &quot;First line\nSecond l&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readpartial'>readpartial</span>(<span class='int'>20</span>) <span class='comment'># =&gt; &quot;ine\n\nFourth line\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readpartial'>readpartial</span>(<span class='int'>20</span>) <span class='comment'># =&gt; &quot;Fifth line\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readpartial'>readpartial</span>(<span class='int'>20</span>) <span class='comment'># Raises EOFError.
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>With both argument <code>maxlen</code> and string argument <code>out_string</code> given, returns modified <code>out_string</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readpartial'>readpartial</span>(<span class='int'>20</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span>) <span class='comment'># =&gt; &quot;First line\nSecond l&quot;
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_readpartial'>readpartial</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span>)  <span class='comment'># =&gt; &quot;&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>This method is useful for a stream such as a pipe, a socket, or a tty. It blocks only when no data is immediately available. This means that it blocks only when <em>all</em> of the following are true:</p>
<ul><li>
<p>The byte buffer in the stream is empty.</p>
</li><li>
<p>The content of the stream is empty.</p>
</li><li>
<p>The stream is not at EOF.</p>
</li></ul>

<p>When blocked, the method waits for either more data or EOF on the stream:</p>
<ul><li>
<p>If more data is read, the method returns the data.</p>
</li><li>
<p>If EOF is reached, the method raises <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a>.</p>
</li></ul>

<p>When not blocked, the method responds immediately:</p>
<ul><li>
<p>Returns data from the buffer if there is any.</p>
</li><li>
<p>Otherwise returns data from the stream if there is any.</p>
</li><li>
<p>Otherwise raises <a href="EOFError.html" title="EOFError (class)"><code>::EOFError</code></a> if the stream has reached EOF.</p>
</li></ul>

<p>Note that this method is similar to sysread. The differences are:</p>
<ul><li>
<p>If the byte buffer is not empty, read from the byte buffer instead of “sysread for buffered IO (IOError)”.</p>
</li><li>
<p>It doesn’t cause <code>Errno::EWOULDBLOCK</code> and <code>Errno::EINTR</code>.  When readpartial meets EWOULDBLOCK and EINTR by read system call, readpartial retries the system call.</p>
</li></ul>

<p>The latter means that readpartial is non-blocking-flag insensitive. It blocks on the situation <a href="#sysread-instance_method" title="IO#sysread (method)">#sysread</a> causes <code>Errno::EWOULDBLOCK</code> as if the fd is blocking mode.</p>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'>#                        # Returned      Buffer Content    Pipe Content
</span><span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_w'>w</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>           <span class='comment'>#
</span><span class='id identifier rubyid_w'>w</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>               <span class='comment'>#               &quot;&quot;                &quot;abc&quot;.
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_readpartial'>readpartial</span>(<span class='int'>4096</span>)      <span class='comment'># =&gt; &quot;abc&quot;      &quot;&quot;                &quot;&quot;
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_readpartial'>readpartial</span>(<span class='int'>4096</span>)      <span class='comment'># (Blocks because buffer and pipe are empty.)
</span>
<span class='comment'>#                        # Returned      Buffer Content    Pipe Content
</span><span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_w'>w</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>           <span class='comment'>#
</span><span class='id identifier rubyid_w'>w</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>               <span class='comment'>#               &quot;&quot;                &quot;abc&quot;
</span><span class='id identifier rubyid_w'>w</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>                  <span class='comment'>#               &quot;&quot;                &quot;abc&quot; EOF
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_readpartial'>readpartial</span>(<span class='int'>4096</span>)      <span class='comment'># =&gt; &quot;abc&quot;      &quot;&quot;                 EOF
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_readpartial'>readpartial</span>(<span class='int'>4096</span>)      <span class='comment'># raises EOFError
</span>
<span class='comment'>#                        # Returned      Buffer Content    Pipe Content
</span><span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_w'>w</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>           <span class='comment'>#
</span><span class='id identifier rubyid_w'>w</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>abc\ndef\n</span><span class='tstring_end'>&quot;</span></span>        <span class='comment'>#               &quot;&quot;                &quot;abc\ndef\n&quot;
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>                   <span class='comment'># =&gt; &quot;abc\n&quot;    &quot;def\n&quot;           &quot;&quot;
</span><span class='id identifier rubyid_w'>w</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ghi\n</span><span class='tstring_end'>&quot;</span></span>             <span class='comment'>#               &quot;def\n&quot;           &quot;ghi\n&quot;
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_readpartial'>readpartial</span>(<span class='int'>4096</span>)      <span class='comment'># =&gt; &quot;def\n&quot;    &quot;&quot;                &quot;ghi\n&quot;
</span><span class='id identifier rubyid_r'>r</span>.<span class='id identifier rubyid_readpartial'>readpartial</span>(<span class='int'>4096</span>)      <span class='comment'># =&gt; &quot;ghi\n&quot;    &quot;&quot;                &quot;&quot;</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L3583-L3592'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3583' data-end='3592'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 3583</span></pre>
<pre class='code cpp'>

static VALUE
io_readpartial(int argc, VALUE *argv, VALUE io)
{
    VALUE ret;

    ret = io_getpartial(argc, argv, io, Qnil, 0);
    if (NIL_P(ret))
        rb_eof_error();
    return ret;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="reopen-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>reopen</strong>(other_io)  &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>reopen</strong>(path, mode = &#39;r&#39;, **opts)  &#x21d2; <code>self</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reassociates the stream with another stream, which may be of a different class. This method may be used to redirect an existing stream to a new destination.</p>

<p>With argument <code>other_io</code> given, reassociates with that stream:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Redirect $stdin from a file.
</span><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='gvar'>$stdin</span>.<span class='id identifier rubyid_reopen'>reopen</span>(<span class='id identifier rubyid_f'>f</span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>

<span class='comment'># Redirect $stdout to a file.
</span><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span>)
<span class='gvar'>$stdout</span>.<span class='id identifier rubyid_reopen'>reopen</span>(<span class='id identifier rubyid_f'>f</span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>With argument <a href="#path-instance_method" title="IO#path (method)">#path</a> given, reassociates with a new stream to that file path:</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$stdin</span>.<span class='id identifier rubyid_reopen'>reopen</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='gvar'>$stdout</span>.<span class='id identifier rubyid_reopen'>reopen</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span>)</code></pre>

<p>Optional keyword arguments <code>opts</code> specify:</p>
<ul><li>
<p><code>Open Options</code>.</p>
</li><li>
<p><code>{Encoding</code> options}.</p>
</li></ul>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L8396-L8482'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='8396' data-end='8482'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 8396</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_reopen(int argc, VALUE *argv, VALUE file)
{
    VALUE fname, nmode, opt;
    int oflags;
    rb_io_t *fptr;

    if (rb_scan_args(argc, argv, &quot;11:&quot;, &amp;fname, &amp;nmode, &amp;opt) == 1) {
        VALUE tmp = rb_io_check_io(fname);
        if (!NIL_P(tmp)) {
            return io_reopen(file, tmp);
        }
    }

    FilePathValue(fname);
    rb_io_taint_check(file);
    fptr = RFILE(file)-&gt;fptr;
    if (!fptr) {
        fptr = RFILE(file)-&gt;fptr = ZALLOC(rb_io_t);
    }

    if (!NIL_P(nmode) || !NIL_P(opt)) {
        int fmode;
        struct rb_io_encoding convconfig;

        rb_io_extract_modeenc(&amp;nmode, 0, opt, &amp;oflags, &amp;fmode, &amp;convconfig);
        if (RUBY_IO_EXTERNAL_P(fptr) &amp;&amp;
            ((fptr-&gt;mode &amp; FMODE_READWRITE) &amp; (fmode &amp; FMODE_READWRITE)) !=
            (fptr-&gt;mode &amp; FMODE_READWRITE)) {
            rb_raise(rb_eArgError,
                     &quot;%s can&#39;t change access mode from \&quot;%s\&quot; to \&quot;%s\&quot;&quot;,
                     PREP_STDIO_NAME(fptr), rb_io_fmode_modestr(fptr-&gt;mode),
                     rb_io_fmode_modestr(fmode));
        }
        fptr-&gt;mode = fmode;
        fptr-&gt;encs = convconfig;
    }
    else {
        oflags = rb_io_fmode_oflags(fptr-&gt;mode);
    }

    fptr-&gt;pathv = fname;
    if (fptr-&gt;fd &lt; 0) {
        fptr-&gt;fd = rb_sysopen(fptr-&gt;pathv, oflags, 0666);
        fptr-&gt;stdio_file = 0;
        return file;
    }

    if (fptr-&gt;mode &amp; FMODE_WRITABLE) {
        if (io_fflush(fptr) &lt; 0)
            rb_sys_fail_on_write(fptr);
    }
    fptr-&gt;rbuf.off = fptr-&gt;rbuf.len = 0;

    if (fptr-&gt;stdio_file) {
        int e = rb_freopen(rb_str_encode_ospath(fptr-&gt;pathv),
                           rb_io_oflags_modestr(oflags),
                           fptr-&gt;stdio_file);
        if (e) rb_syserr_fail_path(e, fptr-&gt;pathv);
        fptr-&gt;fd = fileno(fptr-&gt;stdio_file);
        rb_fd_fix_cloexec(fptr-&gt;fd);
#ifdef USE_SETVBUF
        if (setvbuf(fptr-&gt;stdio_file, NULL, _IOFBF, 0) != 0)
            rb_warn(&quot;setvbuf() can&#39;t be honoured for %&quot;PRIsVALUE, fptr-&gt;pathv);
#endif
        if (fptr-&gt;stdio_file == stderr) {
            if (setvbuf(fptr-&gt;stdio_file, NULL, _IONBF, BUFSIZ) != 0)
                rb_warn(&quot;setvbuf() can&#39;t be honoured for %&quot;PRIsVALUE, fptr-&gt;pathv);
        }
        else if (fptr-&gt;stdio_file == stdout &amp;&amp; isatty(fptr-&gt;fd)) {
            if (setvbuf(fptr-&gt;stdio_file, NULL, _IOLBF, BUFSIZ) != 0)
                rb_warn(&quot;setvbuf() can&#39;t be honoured for %&quot;PRIsVALUE, fptr-&gt;pathv);
        }
    }
    else {
        int tmpfd = rb_sysopen(fptr-&gt;pathv, oflags, 0666);
        int err = 0;
        if (rb_cloexec_dup2(tmpfd, fptr-&gt;fd) &lt; 0)
            err = errno;
        (void)close(tmpfd);
        if (err) {
            rb_syserr_fail_path(err, fptr-&gt;pathv);
        }
    }

    return file;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="rewind-instance_method">
  <h3 class='signature '>
    #<strong>rewind</strong>  &#x21d2; <code>0</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Repositions the stream to its beginning, setting both the position and the line number to zero; see <code>Position</code> and <code>Line Number</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>     <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="IO#lineno (method)">lineno</a></span>   <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_gets'><a href="#gets-instance_method" title="IO#gets (method)">gets</a></span>     <span class='comment'># =&gt; &quot;First line\n&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>     <span class='comment'># =&gt; 12
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="IO#lineno (method)">lineno</a></span>   <span class='comment'># =&gt; 1
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_rewind'>rewind</span>   <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>     <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_lineno'><a href="#lineno-instance_method" title="IO#lineno (method)">lineno</a></span>   <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Note that this method cannot be used with streams such as pipes, ttys, and sockets.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L2558-L2574'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2558' data-end='2574'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2558</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_rewind(VALUE io)
{
    rb_io_t *fptr;

    GetOpenFile(io, fptr);
    if (io_seek(fptr, 0L, 0) &lt; 0 &amp;&amp; errno) rb_sys_fail_path(fptr-&gt;pathv);
    if (io == ARGF.current_file) {
        ARGF.lineno -= fptr-&gt;lineno;
    }
    fptr-&gt;lineno = 0;
    if (fptr-&gt;readconv) {
        clear_readconv(fptr);
    }

    return INT2FIX(0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="seek-instance_method">
  <h3 class='signature '>
    #<strong>seek</strong>(offset, whence = IO::SEEK_SET)  &#x21d2; <code>0</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Seeks to the position given by integer <code>offset</code> (see <code>Position</code>) and constant <code>whence</code>, which is one of:</p>
<ul><li>
<p><code>:CUR</code> or <a href="#SEEK_CUR-constant" title="IO::SEEK_CUR (constant)">SEEK_CUR</a>: Repositions the stream to its current position plus the given <code>offset</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>            <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_seek'>seek</span>(<span class='int'>20</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='const'>CUR</span>)  <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>            <span class='comment'># =&gt; 20
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_seek'>seek</span>(<span class='op'>-</span><span class='int'>10</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='const'>CUR</span>) <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>            <span class='comment'># =&gt; 10
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>
</li><li>
<p><code>:END</code> or <a href="#SEEK_END-constant" title="IO::SEEK_END (constant)">SEEK_END</a>: Repositions the stream to its end plus the given <code>offset</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>            <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_seek'>seek</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='kw'>END</span>)   <span class='comment'># =&gt; 0  # Repositions to stream end.
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>            <span class='comment'># =&gt; 52
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_seek'>seek</span>(<span class='op'>-</span><span class='int'>20</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='kw'>END</span>) <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>            <span class='comment'># =&gt; 32
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_seek'>seek</span>(<span class='op'>-</span><span class='int'>40</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='kw'>END</span>) <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>            <span class='comment'># =&gt; 12
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>
</li><li>
<p><code>:SET</code> or <code>IO:SEEK_SET</code>: Repositions the stream to the given <code>offset</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>            <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_seek'>seek</span>(<span class='int'>20</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='const'>SET</span>) <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>           <span class='comment'># =&gt; 20
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_seek'>seek</span>(<span class='int'>40</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='const'>SET</span>) <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_tell'><a href="#tell-instance_method" title="IO#tell (method)">tell</a></span>           <span class='comment'># =&gt; 40
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>
</li></ul>

<p>Related: <a href="#pos=-instance_method" title="IO#pos= (method)">#pos=</a>, <a href="#tell-instance_method" title="IO#tell (method)">#tell</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L2488-L2499'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2488' data-end='2499'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2488</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_seek_m(int argc, VALUE *argv, VALUE io)
{
    VALUE offset, ptrname;
    int whence = SEEK_SET;

    if (rb_scan_args(argc, argv, &quot;11&quot;, &amp;offset, &amp;ptrname) == 2) {
        whence = interpret_seek_whence(ptrname);
    }

    return rb_io_seek(io, offset, whence);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="set_encoding-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>set_encoding</strong>(ext_enc)  &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>set_encoding</strong>(ext_enc, int_enc, **enc_opts)  &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>set_encoding</strong>(&#39;ext_enc:int_enc&#39;, **enc_opts)  &#x21d2; <code>self</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>See <code>Encodings</code>.</p>

<p>Argument <code>ext_enc</code>, if given, must be an <a href="Encoding.html" title="Encoding (class)"><code>::Encoding</code></a> object or a <a href="String.html" title="String (class)"><code>::String</code></a> with the encoding name; it is assigned as the encoding for the stream.</p>

<p>Argument <code>int_enc</code>, if given, must be an <a href="Encoding.html" title="Encoding (class)"><code>::Encoding</code></a> object or a <a href="String.html" title="String (class)"><code>::String</code></a> with the encoding name; it is assigned as the encoding for the internal string.</p>

<p>Argument <code>&#39;ext_enc:int_enc&#39;</code>, if given, is a string containing two colon-separated encoding names; corresponding <a href="Encoding.html" title="Encoding (class)"><code>::Encoding</code></a> objects are assigned as the external and internal encodings for the stream.</p>

<p>If the external encoding of a string is binary/ASCII-8BIT, the internal encoding of the string is set to nil, since no transcoding is needed.</p>

<p>Optional keyword arguments <code>enc_opts</code> specify <code>{Encoding</code> options}.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L13423-L13437'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='13423' data-end='13437'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 13423</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_set_encoding(int argc, VALUE *argv, VALUE io)
{
    rb_io_t *fptr;
    VALUE v1, v2, opt;

    if (!RB_TYPE_P(io, T_FILE)) {
        return forward(io, id_set_encoding, argc, argv);
    }

    argc = rb_scan_args(argc, argv, &quot;11:&quot;, &amp;v1, &amp;v2, &amp;opt);
    GetOpenFile(io, fptr);
    io_encoding_set(fptr, v1, v2, opt);
    return io;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="set_encoding_by_bom-instance_method">
  <h3 class='signature '>
    #<strong>set_encoding_by_bom</strong>  &#x21d2; <a href="Encoding.html" title="Encoding (class)">Encoding</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>If the stream begins with a BOM (<a href="https://en.wikipedia.org/wiki/Byte_order_mark" target="_parent" title="byte order marker">byte order marker</a>), consumes the BOM and sets the external encoding accordingly; returns the result encoding if found, or <code>nil</code> otherwise:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_write'><a href="#write-class_method" title="IO.write (method)">write</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u{FEFF}abc</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_io'>io</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rb</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_set_encoding_by_bom'>set_encoding_by_bom</span> <span class='comment'># =&gt; #&lt;Encoding:UTF-8&gt;
</span><span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span>

<span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_write'><a href="#write-class_method" title="IO.write (method)">write</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_io'>io</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rb</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_set_encoding_by_bom'>set_encoding_by_bom</span> <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>Raises an exception if the stream is not binmode or its encoding has already been set.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L9505-L9523'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9505' data-end='9523'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 9505</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_set_encoding_by_bom(VALUE io)
{
    rb_io_t *fptr;

    GetOpenFile(io, fptr);
    if (!(fptr-&gt;mode &amp; FMODE_BINMODE)) {
        rb_raise(rb_eArgError, &quot;ASCII incompatible encoding needs binmode&quot;);
    }
    if (fptr-&gt;encs.enc2) {
        rb_raise(rb_eArgError, &quot;encoding conversion is set&quot;);
    }
    else if (fptr-&gt;encs.enc &amp;&amp; fptr-&gt;encs.enc != rb_ascii8bit_encoding()) {
        rb_raise(rb_eArgError, &quot;encoding is set to %s already&quot;,
                 rb_enc_name(fptr-&gt;encs.enc));
    }
    if (!io_set_encoding_by_bom(io)) return Qnil;
    return rb_enc_from_encoding(fptr-&gt;encs.enc);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="stat-instance_method">
  <h3 class='signature '>
    #<strong>stat</strong>  &#x21d2; stat   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns status information for <em>ios</em> as an object of type <a href="File/Stat.html" title="File::Stat (class)"><code>::File::Stat</code></a>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>testfile</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_stat'>stat</span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%o</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_mode'>mode</span>   <span class='comment'>#=&gt; &quot;100644&quot;
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_blksize'>blksize</span>       <span class='comment'>#=&gt; 4096
</span><span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_atime'>atime</span>         <span class='comment'>#=&gt; Wed Apr 09 08:53:54 CDT 2003</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/file.c#L1356-L1367'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1356' data-end='1367'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'file.c', line 1356</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_stat(VALUE obj)
{
    rb_io_t *fptr;
    struct stat st;

    GetOpenFile(obj, fptr);
    if (fstat(fptr-&gt;fd, &amp;st) == -1) {
        rb_sys_fail_path(fptr-&gt;pathv);
    }
    return rb_stat_new(&amp;st);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sysread-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>sysread</strong>(maxlen)  &#x21d2; <a href="String.html" title="String (class)">String</a> </span>
      <span class='overload'>#<strong>sysread</strong>(maxlen, out_string)  &#x21d2; <a href="String.html" title="String (class)">String</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Behaves like <a href="#readpartial-instance_method" title="IO#readpartial (method)">#readpartial</a>, except that it uses low-level system functions.</p>

<p>This method should not be used with other stream-reader methods.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L6044-L6089'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='6044' data-end='6089'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 6044</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_sysread(int argc, VALUE *argv, VALUE io)
{
    VALUE len, str;
    rb_io_t *fptr;
    long n, ilen;
    struct io_internal_read_struct iis;
    int shrinkable;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;len, &amp;str);
    ilen = NUM2LONG(len);

    shrinkable = io_setstrbuf(&amp;str, ilen);
    if (ilen == 0) return str;

    GetOpenFile(io, fptr);
    rb_io_check_byte_readable(fptr);

    if (READ_DATA_BUFFERED(fptr)) {
        rb_raise(rb_eIOError, &quot;sysread for buffered IO&quot;);
    }

    rb_io_check_closed(fptr);

    io_setstrbuf(&amp;str, ilen);
    iis.th = rb_thread_current();
    iis.fptr = fptr;
    iis.nonblock = 0;
    iis.fd = fptr-&gt;fd;
    iis.buf = RSTRING_PTR(str);
    iis.capa = ilen;
    iis.timeout = NULL;
    n = io_read_memory_locktmp(str, &amp;iis);

    if (n &lt; 0) {
        rb_sys_fail_path(fptr-&gt;pathv);
    }

    io_set_read_length(str, n, shrinkable);

    if (n == 0 &amp;&amp; ilen &gt; 0) {
        rb_eof_error();
    }

    return str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="sysseek-instance_method">
  <h3 class='signature '>
    #<strong>sysseek</strong>(offset, whence = IO::SEEK_SET)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Behaves like <a href="#seek-instance_method" title="IO#seek (method)">#seek</a>, except that it:</p>
<ul><li>
<p>Uses low-level system functions.</p>
</li><li>
<p>Returns the new position.</p>
</li></ul>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L5960-L5985'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5960' data-end='5985'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 5960</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_sysseek(int argc, VALUE *argv, VALUE io)
{
    VALUE offset, ptrname;
    int whence = SEEK_SET;
    rb_io_t *fptr;
    rb_off_t pos;

    if (rb_scan_args(argc, argv, &quot;11&quot;, &amp;offset, &amp;ptrname) == 2) {
        whence = interpret_seek_whence(ptrname);
    }
    pos = NUM2OFFT(offset);
    GetOpenFile(io, fptr);
    if ((fptr-&gt;mode &amp; FMODE_READABLE) &amp;&amp;
        (READ_DATA_BUFFERED(fptr) || READ_CHAR_PENDING(fptr))) {
        rb_raise(rb_eIOError, &quot;sysseek for buffered IO&quot;);
    }
    if ((fptr-&gt;mode &amp; FMODE_WRITABLE) &amp;&amp; fptr-&gt;wbuf.len) {
        rb_warn(&quot;sysseek for buffered IO&quot;);
    }
    errno = 0;
    pos = lseek(fptr-&gt;fd, pos, whence);
    if (pos &lt; 0 &amp;&amp; errno) rb_sys_fail_path(fptr-&gt;pathv);

    return OFFT2NUM(pos);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="syswrite-instance_method">
  <h3 class='signature '>
    #<strong>syswrite</strong>(object)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes the given <code>object</code> to self, which must be opened for writing (see Modes); returns the number bytes written. If <code>object</code> is not a string is converted via method to_s:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_new'><a href="File.html#new-class_method" title="File.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_syswrite'>syswrite</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; 3
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_syswrite'>syswrite</span>(<span class='int'>30</span>)    <span class='comment'># =&gt; 2
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_syswrite'>syswrite</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_foo'>foo</span>)  <span class='comment'># =&gt; 3
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>This methods should not be used with other stream-writer methods.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L6005-L6031'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='6005' data-end='6031'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 6005</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_syswrite(VALUE io, VALUE str)
{
    VALUE tmp;
    rb_io_t *fptr;
    long n, len;
    const char *ptr;

    if (!RB_TYPE_P(str, T_STRING))
        str = rb_obj_as_string(str);

    io = GetWriteIO(io);
    GetOpenFile(io, fptr);
    rb_io_check_writable(fptr);

    if (fptr-&gt;wbuf.len) {
        rb_warn(&quot;syswrite for buffered IO&quot;);
    }

    tmp = rb_str_tmp_frozen_acquire(str);
    RSTRING_GETMEM(tmp, ptr, len);
    n = rb_io_write_memory(fptr, ptr, len);
    if (n &lt; 0) rb_sys_fail_path(fptr-&gt;pathv);
    rb_str_tmp_frozen_release(str, tmp);

    return LONG2FIX(n);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_i-instance_method">
  <h3 class='signature '>
    #<strong>to_i</strong>  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>     <span class='aliases'>Also known as: <span class='names'>#fileno</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the integer file descriptor for the stream:</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$stdin</span>.<span class='id identifier rubyid_fileno'><a href="#fileno-instance_method" title="IO#fileno (method)">fileno</a></span>             <span class='comment'># =&gt; 0
</span><span class='gvar'>$stdout</span>.<span class='id identifier rubyid_fileno'><a href="#fileno-instance_method" title="IO#fileno (method)">fileno</a></span>            <span class='comment'># =&gt; 1
</span><span class='gvar'>$stderr</span>.<span class='id identifier rubyid_fileno'><a href="#fileno-instance_method" title="IO#fileno (method)">fileno</a></span>            <span class='comment'># =&gt; 2
</span><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.txt</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_fileno'><a href="#fileno-instance_method" title="IO#fileno (method)">fileno</a></span> <span class='comment'># =&gt; 10
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L2851-L2860'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2851' data-end='2860'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2851</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_fileno(VALUE io)
{
    rb_io_t *fptr = RFILE(io)-&gt;fptr;
    int fd;

    rb_io_check_closed(fptr);
    fd = fptr-&gt;fd;
    return INT2FIX(fd);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_io-instance_method">
  <h3 class='signature '>
    #<strong>to_io</strong>  &#x21d2; <code>self</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>self</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L2996-L3000'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2996' data-end='3000'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2996</span></pre>
<pre class='code cpp'>

static VALUE
rb_io_to_io(VALUE io)
{
    return io;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_path-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>path</strong>  &#x21d2; <a href="String.html" title="String (class)">String</a><sup>?</sup> </span>
      <span class='overload'>#<strong>to_path</strong>  &#x21d2; <a href="String.html" title="String (class)">String</a><sup>?</sup> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#path-instance_method" title="IO#path (method)">#path</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="ungetbyte-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>ungetbyte</strong>(integer)  &#x21d2; <code>nil</code> </span>
      <span class='overload'>#<strong>ungetbyte</strong>(string)  &#x21d2; <code>nil</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Pushes back (“unshifts”) the given data onto the stream’s buffer, placing the data so that it is next to be read; returns <code>nil</code>. See <code>Byte IO</code>.</p>

<p>Note that:</p>
<ul><li>
<p>Calling the method has no effect with unbuffered reads (such as <a href="#sysread-instance_method" title="IO#sysread (method)">#sysread</a>).</p>
</li><li>
<p>Calling <a href="#rewind-instance_method" title="IO#rewind (method)">#rewind</a> on the stream discards the pushed-back data.</p>
</li></ul>

<p>When argument <code>integer</code> is given, uses only its low-order byte:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_write'><a href="#write-class_method" title="IO.write (method)">write</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>012</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_ungetbyte'>ungetbyte</span>(<span class='int'>0x41</span>)   <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>              <span class='comment'># =&gt; &quot;A012&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_rewind'><a href="#rewind-instance_method" title="IO#rewind (method)">rewind</a></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_ungetbyte'>ungetbyte</span>(<span class='int'>0x4243</span>) <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>              <span class='comment'># =&gt; &quot;C012&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>When argument <code>string</code> is given, uses all bytes:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_write'><a href="#write-class_method" title="IO.write (method)">write</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>012</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_ungetbyte'>ungetbyte</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>A</span><span class='tstring_end'>&#39;</span></span>)    <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>              <span class='comment'># =&gt; &quot;A012&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_rewind'><a href="#rewind-instance_method" title="IO#rewind (method)">rewind</a></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_ungetbyte'>ungetbyte</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BCDE</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>              <span class='comment'># =&gt; &quot;BCDE012&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L5100-L5121'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5100' data-end='5121'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 5100</span></pre>
<pre class='code cpp'>

VALUE
rb_io_ungetbyte(VALUE io, VALUE b)
{
    rb_io_t *fptr;

    GetOpenFile(io, fptr);
    rb_io_check_byte_readable(fptr);
    switch (TYPE(b)) {
      case T_NIL:
        return Qnil;
      case T_FIXNUM:
      case T_BIGNUM: ;
        VALUE v = rb_int_modulo(b, INT2FIX(256));
        unsigned char c = NUM2INT(v) &amp; 0xFF;
        b = rb_str_new((const char *)&amp;c, 1);
        break;
      default:
        SafeStringValue(b);
    }
    io_ungetbyte(b, fptr);
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ungetc-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>ungetc</strong>(integer)  &#x21d2; <code>nil</code> </span>
      <span class='overload'>#<strong>ungetc</strong>(string)  &#x21d2; <code>nil</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Pushes back (“unshifts”) the given data onto the stream’s buffer, placing the data so that it is next to be read; returns <code>nil</code>. See <code>Character IO</code>.</p>

<p>Note that:</p>
<ul><li>
<p>Calling the method has no effect with unbuffered reads (such as <a href="#sysread-instance_method" title="IO#sysread (method)">#sysread</a>).</p>
</li><li>
<p>Calling <a href="#rewind-instance_method" title="IO#rewind (method)">#rewind</a> on the stream discards the pushed-back data.</p>
</li></ul>

<p>When argument <code>integer</code> is given, interprets the integer as a character:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_write'><a href="#write-class_method" title="IO.write (method)">write</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>012</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_ungetc'>ungetc</span>(<span class='int'>0x41</span>)     <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>             <span class='comment'># =&gt; &quot;A012&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_rewind'><a href="#rewind-instance_method" title="IO#rewind (method)">rewind</a></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_ungetc'>ungetc</span>(<span class='int'>0x0442</span>)   <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_getc'><a href="#getc-instance_method" title="IO#getc (method)">getc</a></span>.<span class='id identifier rubyid_ord'>ord</span>         <span class='comment'># =&gt; 1090
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

<p>When argument <code>string</code> is given, uses all characters:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_write'><a href="#write-class_method" title="IO.write (method)">write</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>012</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span> <span class='op'>=</span> <span class='const'><a href="File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>t.tmp</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_ungetc'>ungetc</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>A</span><span class='tstring_end'>&#39;</span></span>)      <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_read'><a href="#read-class_method" title="IO.read (method)">read</a></span>      <span class='comment'># =&gt; &quot;A012&quot;
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_rewind'><a href="#rewind-instance_method" title="IO#rewind (method)">rewind</a></span>
<span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_ungetc'>ungetc</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\u0442\u0435\u0441\u0442</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_getc'><a href="#getc-instance_method" title="IO#getc (method)">getc</a></span>.<span class='id identifier rubyid_ord'>ord</span>      <span class='comment'># =&gt; 1090
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_getc'><a href="#getc-instance_method" title="IO#getc (method)">getc</a></span>.<span class='id identifier rubyid_ord'>ord</span>      <span class='comment'># =&gt; 1077
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_getc'><a href="#getc-instance_method" title="IO#getc (method)">getc</a></span>.<span class='id identifier rubyid_ord'>ord</span>      <span class='comment'># =&gt; 1089
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_getc'><a href="#getc-instance_method" title="IO#getc (method)">getc</a></span>.<span class='id identifier rubyid_ord'>ord</span>      <span class='comment'># =&gt; 1090
</span><span class='id identifier rubyid_f'>f</span>.<span class='id identifier rubyid_close'><a href="#close-instance_method" title="IO#close (method)">close</a></span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L5164-L5206'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='5164' data-end='5206'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 5164</span></pre>
<pre class='code cpp'>

VALUE
rb_io_ungetc(VALUE io, VALUE c)
{
    rb_io_t *fptr;
    long len;

    GetOpenFile(io, fptr);
    rb_io_check_char_readable(fptr);
    if (FIXNUM_P(c)) {
        c = rb_enc_uint_chr(FIX2UINT(c), io_read_encoding(fptr));
    }
    else if (RB_BIGNUM_TYPE_P(c)) {
        c = rb_enc_uint_chr(NUM2UINT(c), io_read_encoding(fptr));
    }
    else {
        SafeStringValue(c);
    }
    if (NEED_READCONV(fptr)) {
        SET_BINARY_MODE(fptr);
        len = RSTRING_LEN(c);
#if SIZEOF_LONG &gt; SIZEOF_INT
        if (len &gt; INT_MAX)
            rb_raise(rb_eIOError, &quot;ungetc failed&quot;);
#endif
        make_readconv(fptr, (int)len);
        if (fptr-&gt;cbuf.capa - fptr-&gt;cbuf.len &lt; len)
            rb_raise(rb_eIOError, &quot;ungetc failed&quot;);
        if (fptr-&gt;cbuf.off &lt; len) {
            MEMMOVE(fptr-&gt;cbuf.ptr+fptr-&gt;cbuf.capa-fptr-&gt;cbuf.len,
                    fptr-&gt;cbuf.ptr+fptr-&gt;cbuf.off,
                    char, fptr-&gt;cbuf.len);
            fptr-&gt;cbuf.off = fptr-&gt;cbuf.capa-fptr-&gt;cbuf.len;
        }
        fptr-&gt;cbuf.off -= (int)len;
        fptr-&gt;cbuf.len += (int)len;
        MEMMOVE(fptr-&gt;cbuf.ptr+fptr-&gt;cbuf.off, RSTRING_PTR(c), char, len);
    }
    else {
        NEED_NEWLINE_DECORATOR_ON_READ_CHECK(fptr);
        io_ungetbyte(c, fptr);
    }
    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="wait-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>wait</strong>(events, timeout)  &#x21d2; <code>event</code> <code>mask</code>, ... </span>
      <span class='overload'>#<strong>wait</strong>(timeout = nil, mode = :read)  &#x21d2; <code>self</code>, ... </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Waits until the <code>IO</code> becomes ready for the specified events and returns the subset of events that become ready, or a falsy value when times out.</p>

<p>The events can be a bit mask of <a href="#READABLE-constant" title="IO::READABLE (constant)">READABLE</a>, <a href="#WRITABLE-constant" title="IO::WRITABLE (constant)">WRITABLE</a> or <a href="#PRIORITY-constant" title="IO::PRIORITY (constant)">PRIORITY</a>.</p>

<p>Returns an event mask (truthy value) immediately when buffered data is available.</p>

<p>Optional parameter <code>mode</code> is one of <code>:read</code>, <code>:write</code>, or <code>:read_write</code>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L9816-L9869'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9816' data-end='9869'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 9816</span></pre>
<pre class='code cpp'>

static VALUE
io_wait(int argc, VALUE *argv, VALUE io)
{
    VALUE timeout = Qundef;
    enum rb_io_event events = 0;
    int return_io = 0;

    // The documented signature for this method is actually incorrect.
    // A single timeout is allowed in any position, and multiple symbols can be given.
    // Whether this is intentional or not, I don&#39;t know, and as such I consider this to
    // be a legacy/slow path.
    if (argc != 2 || (RB_SYMBOL_P(argv[0]) || RB_SYMBOL_P(argv[1]))) {
        // We&#39;d prefer to return the actual mask, but this form would return the io itself:
        return_io = 1;

        // Slow/messy path:
        for (int i = 0; i &lt; argc; i += 1) {
            if (RB_SYMBOL_P(argv[i])) {
                events |= wait_mode_sym(argv[i]);
            }
            else if (UNDEF_P(timeout)) {
                rb_time_interval(timeout = argv[i]);
            }
            else {
                rb_raise(rb_eArgError, &quot;timeout given more than once&quot;);
            }
        }

        if (UNDEF_P(timeout)) timeout = Qnil;

        if (events == 0) {
            events = RUBY_IO_READABLE;
        }
    }
    else /* argc == 2 and neither are symbols */ {
        // This is the fast path:
        events = io_event_from_value(argv[0]);
        timeout = argv[1];
    }

    if (events &amp; RUBY_IO_READABLE) {
        rb_io_t *fptr = NULL;
        RB_IO_POINTER(io, fptr);

        if (rb_io_read_pending(fptr)) {
            // This was the original behaviour:
            if (return_io) return Qtrue;
            // New behaviour always returns an event mask:
            else return RB_INT2NUM(RUBY_IO_READABLE);
        }
    }

    return io_wait_event(io, events, timeout, return_io);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="wait_priority-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>wait_priority</strong>  &#x21d2; <code>truthy</code>, <code>falsy</code> </span>
      <span class='overload'>#<strong>wait_priority</strong>(timeout)  &#x21d2; <code>truthy</code>, <code>falsy</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Waits until <code>IO</code> is priority and returns a truthy value or a falsy value when times out. Priority data is sent and received using the <code>Socket::MSG_OOB</code> flag and is typically limited to streams.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L9739-L9753'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9739' data-end='9753'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 9739</span></pre>
<pre class='code cpp'>

static VALUE
io_wait_priority(int argc, VALUE *argv, VALUE io)
{
    rb_io_t *fptr = NULL;

    RB_IO_POINTER(io, fptr);
    rb_io_check_readable(fptr);

    if (rb_io_read_pending(fptr)) return Qtrue;

    rb_check_arity(argc, 0, 1);
    VALUE timeout = argc == 1 ? argv[0] : Qnil;

    return io_wait_event(io, RUBY_IO_PRIORITY, timeout, 1);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="wait_readable-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>wait_readable</strong>  &#x21d2; <code>truthy</code>, <code>falsy</code> </span>
      <span class='overload'>#<strong>wait_readable</strong>(timeout)  &#x21d2; <code>truthy</code>, <code>falsy</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Waits until <code>IO</code> is readable and returns a truthy value, or a falsy value when times out.  Returns a truthy value immediately when buffered data is available.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L9692-L9706'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9692' data-end='9706'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 9692</span></pre>
<pre class='code cpp'>

static VALUE
io_wait_readable(int argc, VALUE *argv, VALUE io)
{
    rb_io_t *fptr;

    RB_IO_POINTER(io, fptr);
    rb_io_check_readable(fptr);

    if (rb_io_read_pending(fptr)) return Qtrue;

    rb_check_arity(argc, 0, 1);
    VALUE timeout = (argc == 1 ? argv[0] : Qnil);

    return io_wait_event(io, RUBY_IO_READABLE, timeout, 1);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="wait_writable-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>wait_writable</strong>  &#x21d2; <code>truthy</code>, <code>falsy</code> </span>
      <span class='overload'>#<strong>wait_writable</strong>(timeout)  &#x21d2; <code>truthy</code>, <code>falsy</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Waits until <code>IO</code> is writable and returns a truthy value or a falsy value when times out.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L9716-L9728'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9716' data-end='9728'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 9716</span></pre>
<pre class='code cpp'>

static VALUE
io_wait_writable(int argc, VALUE *argv, VALUE io)
{
    rb_io_t *fptr;

    RB_IO_POINTER(io, fptr);
    rb_io_check_writable(fptr);

    rb_check_arity(argc, 0, 1);
    VALUE timeout = (argc == 1 ? argv[0] : Qnil);

    return io_wait_event(io, RUBY_IO_WRITABLE, timeout, 1);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="write-instance_method">
  <h3 class='signature '>
    #<strong>write</strong>(*objects)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes each of the given <code>objects</code> to <code>self</code>, which must be opened for writing (see <code>Access Modes</code>); returns the total number bytes written; each of <code>objects</code> that is not a string is converted via method <code>to_s</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$stdout</span>.<span class='id identifier rubyid_write'>write</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Hello</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>World!</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; 14
</span><span class='gvar'>$stdout</span>.<span class='id identifier rubyid_write'>write</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bar'>bar</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>)          <span class='comment'># =&gt; 8</span></code></pre>

<p>Output:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Hello</span><span class='comma'>,</span> <span class='id identifier rubyid_World!'>World!</span>
<span class='id identifier rubyid_foobar2'>foobar2</span></code></pre>

<p>Related: <a href="#read-instance_method" title="IO#read (method)">#read</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.c#L2256-L2266'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2256' data-end='2266'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.c', line 2256</span></pre>
<pre class='code cpp'>

static VALUE
io_write_m(int argc, VALUE *argv, VALUE io)
{
    if (argc != 1) {
        return io_writev(argc, argv, io);
    }
    else {
        VALUE str = argv[0];
        return io_write(io, str, 0);
    }
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="write_nonblock-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>write_nonblock</strong>(string)  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a> </span>
      <span class='overload'>#<strong>write_nonblock</strong>(string [, options])  &#x21d2; <a href="Integer.html" title="Integer (class)">Integer</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes the given string to <em>ios</em> using the write(2) system call after O_NONBLOCK is set for the underlying file descriptor.</p>

<p>It returns the number of bytes written.</p>

<p>write_nonblock just calls the write(2) system call. It causes all errors the write(2) system call causes: <code>Errno::EWOULDBLOCK</code>, <code>Errno::EINTR</code>, etc. The result may also be smaller than string.length (partial write). The caller should care such errors and partial write.</p>

<p>If the exception is <code>Errno::EWOULDBLOCK</code> or <code>Errno::EAGAIN</code>, it is extended by <a href="IO/WaitWritable.html" title="IO::WaitWritable (module)"><code>::IO::WaitWritable</code></a>. So <a href="IO/WaitWritable.html" title="IO::WaitWritable (module)"><code>::IO::WaitWritable</code></a> can be used to rescue the exceptions for retrying write_nonblock.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Creates a pipe.
</span><span class='id identifier rubyid_r'>r</span><span class='comma'>,</span> <span class='id identifier rubyid_w'>w</span> <span class='op'>=</span> <span class='const'>IO</span>.<span class='id identifier rubyid_pipe'><a href="#pipe-class_method" title="IO.pipe (method)">pipe</a></span>

<span class='comment'># write_nonblock writes only 65536 bytes and return 65536.
</span><span class='comment'># (The pipe size is 65536 bytes on this environment.)
</span><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span> <span class='op'>*</span> <span class='int'>100000</span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_w'>w</span>.<span class='id identifier rubyid_write_nonblock'>write_nonblock</span>(<span class='id identifier rubyid_s'>s</span>)     <span class='comment'>#=&gt; 65536
</span>
<span class='comment'># write_nonblock cannot write a byte and raise EWOULDBLOCK (EAGAIN).
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_w'>w</span>.<span class='id identifier rubyid_write_nonblock'>write_nonblock</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span>)   <span class='comment'># Resource temporarily unavailable (Errno::EAGAIN)</span></code></pre>

<p>If the write buffer is not empty, it is flushed at first.</p>

<p>When write_nonblock raises an exception kind of <a href="IO/WaitWritable.html" title="IO::WaitWritable (module)"><code>::IO::WaitWritable</code></a>, write_nonblock should not be called until io is writable for avoiding busy loop. This can be done as follows.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>begin</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_io'>io</span>.<span class='id identifier rubyid_write_nonblock'>write_nonblock</span>(<span class='id identifier rubyid_string'>string</span>)
<span class='kw'>rescue</span> <span class='const'>IO</span><span class='op'>::</span><span class='const'><a href="IO/WaitWritable.html" title="IO::WaitWritable (module)">WaitWritable</a></span><span class='comma'>,</span> <span class='const'><a href="Errno.html" title="Errno (module)">Errno</a></span><span class='op'>::</span><span class='const'>EINTR</span>
  <span class='const'>IO</span>.<span class='id identifier rubyid_select'><a href="#select-class_method" title="IO.select (method)">select</a></span>(<span class='kw'>nil</span><span class='comma'>,</span> [<span class='id identifier rubyid_io'>io</span>])
  <span class='kw'>retry</span>
<span class='kw'>end</span></code></pre>

<p>Note that this doesn’t guarantee to write all data in string. The length written is reported as result and it should be checked later.</p>

<p>On some platforms such as Windows, write_nonblock is not supported according to the kind of the <code>IO</code> object. In such cases, write_nonblock raises <code>Errno::EBADF</code>.</p>

<p>By specifying a keyword argument <em>exception</em> to <code>false</code>, you can indicate that write_nonblock should not raise an <a href="IO/WaitWritable.html" title="IO::WaitWritable (module)"><code>::IO::WaitWritable</code></a> exception, but return the symbol <code>:wait_writable</code> instead.</p>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v3_3_1/io.rb#L120-L122'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='120' data-end='122'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'io.rb', line 120</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_write_nonblock'>write_nonblock</span>(<span class='id identifier rubyid_buf'>buf</span><span class='comma'>,</span> <span class='label'>exception:</span> <span class='kw'>true</span>)
  <span class='const'>Primitive</span>.<span class='id identifier rubyid_io_write_nonblock'>io_write_nonblock</span>(<span class='id identifier rubyid_buf'>buf</span><span class='comma'>,</span> <span class='id identifier rubyid_exception'>exception</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>