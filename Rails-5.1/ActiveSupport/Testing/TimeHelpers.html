<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: ActiveSupport::Testing::TimeHelpers &mdash; Rails-5.1.0</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "ActiveSupport::Testing::TimeHelpers",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../../index.html'>Home</a> &raquo; 
          <a href='../../index.html'>Rails-5.1.0</a> &raquo; 
          <a href='../../_index.html'>Index (T)</a> &raquo; 
          <a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a> &raquo; 
          <a href="../Testing.html" title="ActiveSupport::Testing (module)">Testing</a> &raquo; 
          <span class='title'>TimeHelpers</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='module'>

<h1>Module: ActiveSupport::Testing::TimeHelpers</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>
  <tr>
    <td class='box_1'>Included in:</td>
    <td>
      <div class='box_max'>
        <a href="../TestCase.html" title="ActiveSupport::TestCase (class)">ActiveSupport::TestCase</a>
      </div>
    </td>
  </tr>
  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_max'>
<a href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/testing/time_helpers.rb#L50'>activesupport/lib/active_support/testing/time_helpers.rb</a></div>  </td>
  </tr>
</table>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Contains helpers that help you test passage of time.</p>


  </div>
</div>
<div class="tags">
  
</div>




<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#simple_stubs-instance_method" title="#simple_stubs (instance method)">#<strong>simple_stubs</strong>  </a>
      </span>
      <span class='note title private'>private</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#travel-instance_method" title="#travel (instance method)">#<strong>travel</strong>(duration, &amp;block)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Changes current time to the time in the future or in the past by a given
time difference by stubbing <code>Time.now</code>, <code>Date.today</code>, and <code>DateTime.now</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#travel_back-instance_method" title="#travel_back (instance method)">#<strong>travel_back</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the current time back to its original state, by removing the stubs
added by <code>travel</code> and <code>travel_to</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#travel_to-instance_method" title="#travel_to (instance method)">#<strong>travel_to</strong>(date_or_time)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Changes current time to the given time by stubbing <code>Time.now</code>,
<code>Date.today</code>, and <code>DateTime.now</code> to return the time or date passed into
this method.</p>
</div>
      </span>
    </li>
  </ul>


<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="simple_stubs-instance_method">
  <h3 class='signature first'>
  #<strong>simple_stubs</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/testing/time_helpers.rb#L164'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


164
165
166</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/testing/time_helpers.rb', line 164</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_simple_stubs'>simple_stubs</span>
  <span class='ivar'>@simple_stubs</span> <span class='op'>||=</span> <span class='const'><a href="SimpleStubs.html" title="ActiveSupport::Testing::SimpleStubs (class)">SimpleStubs</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="SimpleStubs.html#new-class_method" title="ActiveSupport::Testing::SimpleStubs.new (method)">new</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="travel-instance_method">
  <h3 class='signature'>
  #<strong>travel</strong>(duration, &amp;block)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Changes current time to the time in the future or in the past by a given
time difference by stubbing <code>Time.now</code>, <code>Date.today</code>, and <code>DateTime.now</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span><span class='period'>.</span><span class='id identifier rubyid_current'><a href="../../Time.html#current-class_method" title="Time.current (method)">current</a></span>     <span class='comment'># =&gt; Sat, 09 Nov 2013 15:34:49 EST -05:00
</span><span class='id identifier rubyid_travel'>travel</span> <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span>
<span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span><span class='period'>.</span><span class='id identifier rubyid_current'><a href="../../Time.html#current-class_method" title="Time.current (method)">current</a></span>     <span class='comment'># =&gt; Sun, 10 Nov 2013 15:34:49 EST -05:00
</span><span class='const'><a href="../../Date.html" title="Date (class)">Date</a></span><span class='period'>.</span><span class='id identifier rubyid_current'><a href="../../Date.html#current-class_method" title="Date.current (method)">current</a></span>     <span class='comment'># =&gt; Sun, 10 Nov 2013
</span><span class='const'><a href="../../DateTime.html" title="DateTime (class)">DateTime</a></span><span class='period'>.</span><span class='id identifier rubyid_current'><a href="../../DateTime.html#current-class_method" title="DateTime.current (method)">current</a></span> <span class='comment'># =&gt; Sun, 10 Nov 2013 15:34:49 -0500
</span></code></pre>

<p>This method also accepts a block, which will return the current time back
to its original state at the end of the block:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span><span class='period'>.</span><span class='id identifier rubyid_current'><a href="../../Time.html#current-class_method" title="Time.current (method)">current</a></span> <span class='comment'># =&gt; Sat, 09 Nov 2013 15:34:49 EST -05:00
</span><span class='id identifier rubyid_travel'>travel</span> <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span> <span class='kw'>do</span>
  <span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span><span class='period'>.</span><span class='id identifier rubyid_created_at'>created_at</span> <span class='comment'># =&gt; Sun, 10 Nov 2013 15:34:49 EST -05:00
</span><span class='kw'>end</span>
<span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span><span class='period'>.</span><span class='id identifier rubyid_current'><a href="../../Time.html#current-class_method" title="Time.current (method)">current</a></span> <span class='comment'># =&gt; Sat, 09 Nov 2013 15:34:49 EST -05:00
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/testing/time_helpers.rb#L68'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


68
69
70</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/testing/time_helpers.rb', line 68</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_travel'>travel</span><span class='lparen'>(</span><span class='id identifier rubyid_duration'>duration</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_travel_to'>travel_to</span> <span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span> <span class='op'>+</span> <span class='id identifier rubyid_duration'>duration</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="travel_back-instance_method">
  <h3 class='signature'>
  #<strong>travel_back</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the current time back to its original state, by removing the stubs
added by <code>travel</code> and <code>travel_to</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span><span class='period'>.</span><span class='id identifier rubyid_current'><a href="../../Time.html#current-class_method" title="Time.current (method)">current</a></span> <span class='comment'># =&gt; Sat, 09 Nov 2013 15:34:49 EST -05:00
</span><span class='id identifier rubyid_travel_to'>travel_to</span> <span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span><span class='period'>.</span><span class='id identifier rubyid_zone'><a href="../../Time.html#zone-class_method" title="Time.zone (method)">zone</a></span><span class='period'>.</span><span class='id identifier rubyid_local'>local</span><span class='lparen'>(</span><span class='int'>2004</span><span class='comma'>,</span> <span class='int'>11</span><span class='comma'>,</span> <span class='int'>24</span><span class='comma'>,</span> <span class='int'>01</span><span class='comma'>,</span> <span class='int'>04</span><span class='comma'>,</span> <span class='int'>44</span><span class='rparen'>)</span>
<span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span><span class='period'>.</span><span class='id identifier rubyid_current'><a href="../../Time.html#current-class_method" title="Time.current (method)">current</a></span> <span class='comment'># =&gt; Wed, 24 Nov 2004 01:04:44 EST -05:00
</span><span class='id identifier rubyid_travel_back'>travel_back</span>
<span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span><span class='period'>.</span><span class='id identifier rubyid_current'><a href="../../Time.html#current-class_method" title="Time.current (method)">current</a></span> <span class='comment'># =&gt; Sat, 09 Nov 2013 15:34:49 EST -05:00
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/testing/time_helpers.rb#L158'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


158
159
160</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/testing/time_helpers.rb', line 158</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_travel_back'>travel_back</span>
  <span class='id identifier rubyid_simple_stubs'>simple_stubs</span><span class='period'>.</span><span class='id identifier rubyid_unstub_all!'>unstub_all!</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="travel_to-instance_method">
  <h3 class='signature'>
  #<strong>travel_to</strong>(date_or_time)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Changes current time to the given time by stubbing <code>Time.now</code>,
<code>Date.today</code>, and <code>DateTime.now</code> to return the time or date passed into
this method.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span><span class='period'>.</span><span class='id identifier rubyid_current'><a href="../../Time.html#current-class_method" title="Time.current (method)">current</a></span>     <span class='comment'># =&gt; Sat, 09 Nov 2013 15:34:49 EST -05:00
</span><span class='id identifier rubyid_travel_to'>travel_to</span> <span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span><span class='period'>.</span><span class='id identifier rubyid_zone'><a href="../../Time.html#zone-class_method" title="Time.zone (method)">zone</a></span><span class='period'>.</span><span class='id identifier rubyid_local'>local</span><span class='lparen'>(</span><span class='int'>2004</span><span class='comma'>,</span> <span class='int'>11</span><span class='comma'>,</span> <span class='int'>24</span><span class='comma'>,</span> <span class='int'>01</span><span class='comma'>,</span> <span class='int'>04</span><span class='comma'>,</span> <span class='int'>44</span><span class='rparen'>)</span>
<span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span><span class='period'>.</span><span class='id identifier rubyid_current'><a href="../../Time.html#current-class_method" title="Time.current (method)">current</a></span>     <span class='comment'># =&gt; Wed, 24 Nov 2004 01:04:44 EST -05:00
</span><span class='const'><a href="../../Date.html" title="Date (class)">Date</a></span><span class='period'>.</span><span class='id identifier rubyid_current'><a href="../../Date.html#current-class_method" title="Date.current (method)">current</a></span>     <span class='comment'># =&gt; Wed, 24 Nov 2004
</span><span class='const'><a href="../../DateTime.html" title="DateTime (class)">DateTime</a></span><span class='period'>.</span><span class='id identifier rubyid_current'><a href="../../DateTime.html#current-class_method" title="DateTime.current (method)">current</a></span> <span class='comment'># =&gt; Wed, 24 Nov 2004 01:04:44 -0500
</span></code></pre>

<p>Dates are taken as their timestamp at the beginning of the day in the
application time zone. <code>Time.current</code> returns said timestamp,
and <code>Time.now</code> its equivalent in the system time zone.
Similarly, <code>Date.current</code> returns a date equal to the argument,
and <code>Date.today</code> the date according to <code>Time.now</code>,
which may be different. (Note that you rarely want to deal with
<code>Time.now</code>, or <code>Date.today</code>, in order to honor the
application time zone please always use <code>Time.current</code> and
<code>Date.current</code>.)</p>

<p>Note that the usec for the time passed will be set to 0 to prevent rounding
errors with external services, like MySQL (which will round instead of
floor, leading to off-by-one-second errors).</p>

<p>This method also accepts a block, which will return the current time back
to its original state at the end of the block:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span><span class='period'>.</span><span class='id identifier rubyid_current'><a href="../../Time.html#current-class_method" title="Time.current (method)">current</a></span> <span class='comment'># =&gt; Sat, 09 Nov 2013 15:34:49 EST -05:00
</span><span class='id identifier rubyid_travel_to'>travel_to</span> <span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span><span class='period'>.</span><span class='id identifier rubyid_zone'><a href="../../Time.html#zone-class_method" title="Time.zone (method)">zone</a></span><span class='period'>.</span><span class='id identifier rubyid_local'>local</span><span class='lparen'>(</span><span class='int'>2004</span><span class='comma'>,</span> <span class='int'>11</span><span class='comma'>,</span> <span class='int'>24</span><span class='comma'>,</span> <span class='int'>01</span><span class='comma'>,</span> <span class='int'>04</span><span class='comma'>,</span> <span class='int'>44</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span><span class='period'>.</span><span class='id identifier rubyid_current'><a href="../../Time.html#current-class_method" title="Time.current (method)">current</a></span> <span class='comment'># =&gt; Wed, 24 Nov 2004 01:04:44 EST -05:00
</span><span class='kw'>end</span>
<span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span><span class='period'>.</span><span class='id identifier rubyid_current'><a href="../../Time.html#current-class_method" title="Time.current (method)">current</a></span> <span class='comment'># =&gt; Sat, 09 Nov 2013 15:34:49 EST -05:00
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/testing/time_helpers.rb#L102'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/testing/time_helpers.rb', line 102</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_travel_to'>travel_to</span><span class='lparen'>(</span><span class='id identifier rubyid_date_or_time'>date_or_time</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_simple_stubs'>simple_stubs</span><span class='period'>.</span><span class='id identifier rubyid_stubbing'>stubbing</span><span class='lparen'>(</span><span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_now'>now</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_travel_to_nested_block_call'>travel_to_nested_block_call</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;-MSG</span><span class='period'>.</span><span class='id identifier rubyid_strip_heredoc'>strip_heredoc</span>
<span class='tstring_content'>
Calling `travel_to` with a block, when we have previously already made a call to `travel_to`, can lead to confusing time stubbing.

Instead of:

   travel_to 2.days.from_now do
     # 2 days from today
     travel_to 3.days.from_now do
       # 5 days from today
     end
   end

preferred way to achieve above is:

   travel 2.days do
     # 2 days from today
   end

   travel 5.days do
     # 5 days from today
   end

</span><span class='heredoc_end'>    MSG
</span>    <span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid_travel_to_nested_block_call'>travel_to_nested_block_call</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_date_or_time'>date_or_time</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><a href="../../Date.html" title="Date (class)">Date</a></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_date_or_time'>date_or_time</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><a href="../../DateTime.html" title="DateTime (class)">DateTime</a></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_now'>now</span> <span class='op'>=</span> <span class='id identifier rubyid_date_or_time'>date_or_time</span><span class='period'>.</span><span class='id identifier rubyid_midnight'>midnight</span><span class='period'>.</span><span class='id identifier rubyid_to_time'>to_time</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_now'>now</span> <span class='op'>=</span> <span class='id identifier rubyid_date_or_time'>date_or_time</span><span class='period'>.</span><span class='id identifier rubyid_to_time'>to_time</span><span class='period'>.</span><span class='id identifier rubyid_change'>change</span><span class='lparen'>(</span><span class='label'>usec:</span> <span class='int'>0</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_simple_stubs'>simple_stubs</span><span class='period'>.</span><span class='id identifier rubyid_stub_object'>stub_object</span><span class='lparen'>(</span><span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_now'>now</span><span class='comma'>,</span> <span class='id identifier rubyid_now'>now</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_simple_stubs'>simple_stubs</span><span class='period'>.</span><span class='id identifier rubyid_stub_object'>stub_object</span><span class='lparen'>(</span><span class='const'><a href="../../Date.html" title="Date (class)">Date</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_today'>today</span><span class='comma'>,</span> <span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_simple_stubs'>simple_stubs</span><span class='period'>.</span><span class='id identifier rubyid_stub_object'>stub_object</span><span class='lparen'>(</span><span class='const'><a href="../../DateTime.html" title="DateTime (class)">DateTime</a></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_now'>now</span><span class='comma'>,</span> <span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_datetime'>to_datetime</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='kw'>begin</span>
      <span class='kw'>yield</span>
    <span class='kw'>ensure</span>
      <span class='id identifier rubyid_travel_back'>travel_back</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.5 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>