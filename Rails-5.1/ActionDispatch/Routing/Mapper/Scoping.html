<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: ActionDispatch::Routing::Mapper::Scoping &mdash; Rails-5.1.0</title>

<link rel='stylesheet'  type='text/css' href='../../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "ActionDispatch::Routing::Mapper::Scoping",
    relpath = '../../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../../../index.html'>Home</a> &raquo; 
          <a href='../../../index.html'>Rails-5.1.0</a> &raquo; 
          <a href='../../../_index.html'>Index (S)</a> &raquo; 
          <a href="../../../ActionDispatch.html" title="ActionDispatch (module)">ActionDispatch</a> &raquo; 
          <a href="../../Routing.html" title="ActionDispatch::Routing (module)">Routing</a> &raquo; 
          <a href="../Mapper.html" title="ActionDispatch::Routing::Mapper (class)">Mapper</a> &raquo; 
          <span class='title'>Scoping</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../../../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='module'>

<h1>Module: ActionDispatch::Routing::Mapper::Scoping</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>
  <tr>
    <td class='box_1'>Included in:</td>
    <td>
      <div class='box_max'>
        <a href="../Mapper.html" title="ActionDispatch::Routing::Mapper (class)">ActionDispatch::Routing::Mapper</a>
      </div>
    </td>
  </tr>
  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_max'>
<a href='https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#L782'>actionpack/lib/action_dispatch/routing/mapper.rb</a></div>  </td>
  </tr>
</table>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>You may wish to organize groups of controllers under a namespace. Most
commonly, you might group a number of administrative controllers under an
<code>admin</code> namespace. You would place these controllers under the
<code>app/controllers/admin</code> directory, and you can group them
together in your router:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_namespace'>namespace</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>admin</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_resources'>resources</span> <span class='symbeg'>:</span><span class='id identifier rubyid_posts'>posts</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_comments'>comments</span>
<span class='kw'>end</span>
</code></pre>

<p>This will create a number of routes for each of the posts and comments
controller. For <code>Admin::PostsController</code>, Rails will create:</p>

<pre class="code ruby"><code class="ruby">GET       /admin/posts
GET       /admin/posts/new
POST      /admin/posts
GET       /admin/posts/1
GET       /admin/posts/1/edit
PATCH/PUT /admin/posts/1
DELETE    /admin/posts/1</code></pre>

<p>If you want to route /posts (without the prefix /admin) to
<code>Admin::PostsController</code>, you could use</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scope'>scope</span> <span class='label'>module:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>admin</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_resources'>resources</span> <span class='symbeg'>:</span><span class='id identifier rubyid_posts'>posts</span>
<span class='kw'>end</span>
</code></pre>

<p>or, for a single case</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_resources'>resources</span> <span class='symbeg'>:</span><span class='id identifier rubyid_posts'>posts</span><span class='comma'>,</span> <span class='label'>module:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>admin</span><span class='tstring_end'>&quot;</span></span>
</code></pre>

<p>If you want to route /admin/posts to <code>PostsController</code> (without
the <code>Admin::</code> module prefix), you could use</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scope'>scope</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/admin</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_resources'>resources</span> <span class='symbeg'>:</span><span class='id identifier rubyid_posts'>posts</span>
<span class='kw'>end</span>
</code></pre>

<p>or, for a single case</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_resources'>resources</span> <span class='symbeg'>:</span><span class='id identifier rubyid_posts'>posts</span><span class='comma'>,</span> <span class='label'>path:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/admin/posts</span><span class='tstring_end'>&quot;</span></span>
</code></pre>

<p>In each of these cases, the named routes remain the same as if you did not
use scope. In the last case, the following paths map to
<code>PostsController</code>:</p>

<pre class="code ruby"><code class="ruby">GET       /admin/posts
GET       /admin/posts/new
POST      /admin/posts
GET       /admin/posts/1
GET       /admin/posts/1/edit
PATCH/PUT /admin/posts/1
DELETE    /admin/posts/1</code></pre>


  </div>
</div>
<div class="tags">
  
</div>
<h2 id='t2_cnst'>Constant Summary<small><a href="#" class="summary_toggle">collapse</a></small></h2>

  <dl class="constants summary full">
    <dt id='POISON-constant'>
      POISON =
    </dt>
    <dd>
            <pre class='code ruby'><span class='const'><a href="../../../Object.html" title="Object (class)">Object</a></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span></pre>
    </dd>
  </dl>





<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#constraints-instance_method" title="#constraints (instance method)">#<strong>constraints</strong>(constraints = {})  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<h5 id="label-Parameter+Restriction">Parameter Restriction</h5>

<p>Allows you to constrain the nested routes based on a set of rules.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#controller-instance_method" title="#controller (instance method)">#<strong>controller</strong>(controller)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Scopes routes to a specific controller</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#defaults-instance_method" title="#defaults (instance method)">#<strong>defaults</strong>(defaults = {})  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Allows you to set default parameters for a route, such as this:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_defaults'>defaults</span> <span class='label'>id:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>home</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_match'>match</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>scoped_pages/(:id)</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>to:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pages#show</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
</code></pre>

<p>Using this, the <code>:id</code> parameter here will default to
&#39;home&#39;.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#merge_action_scope-instance_method" title="#merge_action_scope (instance method)">#<strong>merge_action_scope</strong>(parent, child)  </a>
      </span>
      <span class='note title private'>private</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#merge_as_scope-instance_method" title="#merge_as_scope (instance method)">#<strong>merge_as_scope</strong>(parent, child)  </a>
      </span>
      <span class='note title private'>private</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#merge_blocks_scope-instance_method" title="#merge_blocks_scope (instance method)">#<strong>merge_blocks_scope</strong>(parent, child)  </a>
      </span>
      <span class='note title private'>private</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#merge_constraints_scope-instance_method" title="#merge_constraints_scope (instance method)">#<strong>merge_constraints_scope</strong>(parent, child)  </a>
      </span>
      <span class='note title private'>private</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#merge_controller_scope-instance_method" title="#merge_controller_scope (instance method)">#<strong>merge_controller_scope</strong>(parent, child)  </a>
      </span>
      <span class='note title private'>private</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#merge_defaults_scope-instance_method" title="#merge_defaults_scope (instance method)">#<strong>merge_defaults_scope</strong>(parent, child)  </a>
      </span>
      <span class='note title private'>private</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#merge_format_scope-instance_method" title="#merge_format_scope (instance method)">#<strong>merge_format_scope</strong>(parent, child)  </a>
      </span>
      <span class='note title private'>private</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#merge_module_scope-instance_method" title="#merge_module_scope (instance method)">#<strong>merge_module_scope</strong>(parent, child)  </a>
      </span>
      <span class='note title private'>private</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#merge_options_scope-instance_method" title="#merge_options_scope (instance method)">#<strong>merge_options_scope</strong>(parent, child)  </a>
      </span>
      <span class='note title private'>private</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#merge_path_names_scope-instance_method" title="#merge_path_names_scope (instance method)">#<strong>merge_path_names_scope</strong>(parent, child)  </a>
      </span>
      <span class='note title private'>private</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#merge_path_scope-instance_method" title="#merge_path_scope (instance method)">#<strong>merge_path_scope</strong>(parent, child)  </a>
      </span>
      <span class='note title private'>private</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#merge_shallow_path_scope-instance_method" title="#merge_shallow_path_scope (instance method)">#<strong>merge_shallow_path_scope</strong>(parent, child)  </a>
      </span>
      <span class='note title private'>private</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#merge_shallow_prefix_scope-instance_method" title="#merge_shallow_prefix_scope (instance method)">#<strong>merge_shallow_prefix_scope</strong>(parent, child)  </a>
      </span>
      <span class='note title private'>private</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#merge_shallow_scope-instance_method" title="#merge_shallow_scope (instance method)">#<strong>merge_shallow_scope</strong>(parent, child)  </a>
      </span>
      <span class='note title private'>private</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#merge_to_scope-instance_method" title="#merge_to_scope (instance method)">#<strong>merge_to_scope</strong>(parent, child)  </a>
      </span>
      <span class='note title private'>private</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#merge_via_scope-instance_method" title="#merge_via_scope (instance method)">#<strong>merge_via_scope</strong>(parent, child)  </a>
      </span>
      <span class='note title private'>private</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#namespace-instance_method" title="#namespace (instance method)">#<strong>namespace</strong>(path, options = {})  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Scopes routes to a specific namespace.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#scope-instance_method" title="#scope (instance method)">#<strong>scope</strong>(*args)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Scopes a set of routes to the given default options.</p>
</div>
      </span>
    </li>
  </ul>


<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="constraints-instance_method">
  <h3 class='signature first'>
  #<strong>constraints</strong>(constraints = {})  
</h3>
<div class="docstring">
  <div class="discussion">
    
<h5 id="label-Parameter+Restriction">Parameter Restriction</h5>

<p>Allows you to constrain the nested routes based on a set of rules. For
instance, in order to change the routes to allow for a dot character in the
<code>id</code> parameter:</p>

<pre class="code ruby"><code class="ruby">constraints(id: /\d&lt;code&gt;\.\d&lt;/code&gt;/) do
  resources :posts
end</code></pre>

<p>Now routes such as <code>/posts/1</code> will no longer be valid, but
<code>/posts/1.1</code> will be. The <code>id</code> parameter must match
the constraint passed in for this example.</p>

<p>You may use this to also restrict other parameters:</p>

<pre class="code ruby"><code class="ruby">resources :posts do
  constraints(post_id: /\d&lt;code&gt;\.\d&lt;/code&gt;/) do
    resources :comments
  end
end</code></pre>

<h5 id="label-Restricting+based+on+IP">Restricting based on IP</h5>

<p>Routes can also be constrained to an IP or a certain range of IP addresses:</p>

<pre class="code ruby"><code class="ruby">constraints(ip: /192\.168\.\d&lt;code&gt;\.\d&lt;/code&gt;/) do
  resources :posts
end</code></pre>

<p>Any user connecting from the 192.168.* range will be able to see this
resource, where as any user connecting outside of this range will be told
there is no such route.</p>

<h5 id="label-Dynamic+request+matching">Dynamic request matching</h5>

<p>Requests to routes can be constrained based on specific criteria:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_constraints'>constraints</span><span class='lparen'>(</span><span class='tlambda'>-&gt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='rparen'>)</span> <span class='tlambeg'>{</span> <span class='id identifier rubyid_req'>req</span><span class='period'>.</span><span class='id identifier rubyid_env'>env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HTTP_USER_AGENT</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>iPhone</span><span class='regexp_end'>/</span></span> <span class='rbrace'>}</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_resources'>resources</span> <span class='symbeg'>:</span><span class='id identifier rubyid_iphones'>iphones</span>
<span class='kw'>end</span>
</code></pre>

<p>You are able to move this logic out into a class if it is too complex for
routes. This class must have a <code>matches?</code> method defined on it
which either returns <code>true</code> if the user should be given access
to that route, or <code>false</code> if the user should not.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Iphone</span>
  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_matches?'>matches?</span><span class='lparen'>(</span><span class='id identifier rubyid_request'>request</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_env'>env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HTTP_USER_AGENT</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>iPhone</span><span class='regexp_end'>/</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>An expected place for this code would be <code>lib/constraints</code>.</p>

<p>This class is then used like this:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_constraints'>constraints</span><span class='lparen'>(</span><span class='const'>Iphone</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_resources'>resources</span> <span class='symbeg'>:</span><span class='id identifier rubyid_iphones'>iphones</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#L987'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


987
988
989</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 987</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_constraints'>constraints</span><span class='lparen'>(</span><span class='id identifier rubyid_constraints'>constraints</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_scope'>scope</span><span class='lparen'>(</span><span class='label'>constraints:</span> <span class='id identifier rubyid_constraints'>constraints</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='kw'>yield</span> <span class='rbrace'>}</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="controller-instance_method">
  <h3 class='signature'>
  #<strong>controller</strong>(controller)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Scopes routes to a specific controller</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_controller'>controller</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>food</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_match'>match</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bacon</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>action:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bacon'>bacon</span><span class='comma'>,</span> <span class='label'>via:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_get'>get</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#L872'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


872
873
874
875
876
877</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 872</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_controller'>controller</span><span class='lparen'>(</span><span class='id identifier rubyid_controller'>controller</span><span class='rparen'>)</span>
  <span class='ivar'>@scope</span> <span class='op'>=</span> <span class='ivar'>@scope</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>controller:</span> <span class='id identifier rubyid_controller'>controller</span><span class='rparen'>)</span>
  <span class='kw'>yield</span>
<span class='kw'>ensure</span>
  <span class='ivar'>@scope</span> <span class='op'>=</span> <span class='ivar'>@scope</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="defaults-instance_method">
  <h3 class='signature'>
  #<strong>defaults</strong>(defaults = {})  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Allows you to set default parameters for a route, such as this:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_defaults'>defaults</span> <span class='label'>id:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>home</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_match'>match</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>scoped_pages/(:id)</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>to:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pages#show</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
</code></pre>

<p>Using this, the <code>:id</code> parameter here will default to
&#39;home&#39;.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#L996'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


996
997
998
999
1000
1001</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 996</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_defaults'>defaults</span><span class='lparen'>(</span><span class='id identifier rubyid_defaults'>defaults</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@scope</span> <span class='op'>=</span> <span class='ivar'>@scope</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>defaults:</span> <span class='id identifier rubyid_merge_defaults_scope'>merge_defaults_scope</span><span class='lparen'>(</span><span class='ivar'>@scope</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_defaults'>defaults</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_defaults'>defaults</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>yield</span>
<span class='kw'>ensure</span>
  <span class='ivar'>@scope</span> <span class='op'>=</span> <span class='ivar'>@scope</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="merge_action_scope-instance_method">
  <h3 class='signature'>
  #<strong>merge_action_scope</strong>(parent, child)   <span class="extras">(<span class='priv'>private</span>)</span>
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#L1028'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1028
1029
1030</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1028</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_merge_action_scope'>merge_action_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='id identifier rubyid_child'>child</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="merge_as_scope-instance_method">
  <h3 class='signature'>
  #<strong>merge_as_scope</strong>(parent, child)   <span class="extras">(<span class='priv'>private</span>)</span>
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#L1012'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1012
1013
1014</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1012</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_merge_as_scope'>merge_as_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='id identifier rubyid_parent'>parent</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_parent'>parent</span><span class='embexpr_end'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_child'>child</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='id identifier rubyid_child'>child</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="merge_blocks_scope-instance_method">
  <h3 class='signature'>
  #<strong>merge_blocks_scope</strong>(parent, child)   <span class="extras">(<span class='priv'>private</span>)</span>
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#L1052'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1052
1053
1054
1055
1056</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1052</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_merge_blocks_scope'>merge_blocks_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='id identifier rubyid_merged'>merged</span> <span class='op'>=</span> <span class='id identifier rubyid_parent'>parent</span> <span class='op'>?</span> <span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span> <span class='op'>:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_merged'>merged</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_child'>child</span> <span class='kw'>if</span> <span class='id identifier rubyid_child'>child</span>
  <span class='id identifier rubyid_merged'>merged</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="merge_constraints_scope-instance_method">
  <h3 class='signature'>
  #<strong>merge_constraints_scope</strong>(parent, child)   <span class="extras">(<span class='priv'>private</span>)</span>
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#L1044'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1044
1045
1046</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1044</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_merge_constraints_scope'>merge_constraints_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='id identifier rubyid_merge_options_scope'>merge_options_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="merge_controller_scope-instance_method">
  <h3 class='signature'>
  #<strong>merge_controller_scope</strong>(parent, child)   <span class="extras">(<span class='priv'>private</span>)</span>
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#L1024'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1024
1025
1026</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1024</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_merge_controller_scope'>merge_controller_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='id identifier rubyid_child'>child</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="merge_defaults_scope-instance_method">
  <h3 class='signature'>
  #<strong>merge_defaults_scope</strong>(parent, child)   <span class="extras">(<span class='priv'>private</span>)</span>
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#L1048'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1048
1049
1050</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1048</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_merge_defaults_scope'>merge_defaults_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='id identifier rubyid_merge_options_scope'>merge_options_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="merge_format_scope-instance_method">
  <h3 class='signature'>
  #<strong>merge_format_scope</strong>(parent, child)   <span class="extras">(<span class='priv'>private</span>)</span>
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#L1036'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1036
1037
1038</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1036</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_merge_format_scope'>merge_format_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='id identifier rubyid_child'>child</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="merge_module_scope-instance_method">
  <h3 class='signature'>
  #<strong>merge_module_scope</strong>(parent, child)   <span class="extras">(<span class='priv'>private</span>)</span>
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#L1020'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1020
1021
1022</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1020</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_merge_module_scope'>merge_module_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='id identifier rubyid_parent'>parent</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_parent'>parent</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_child'>child</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='id identifier rubyid_child'>child</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="merge_options_scope-instance_method">
  <h3 class='signature'>
  #<strong>merge_options_scope</strong>(parent, child)   <span class="extras">(<span class='priv'>private</span>)</span>
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#L1058'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1058
1059
1060</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1058</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_merge_options_scope'>merge_options_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='lparen'>(</span><span class='id identifier rubyid_parent'>parent</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_child'>child</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="merge_path_names_scope-instance_method">
  <h3 class='signature'>
  #<strong>merge_path_names_scope</strong>(parent, child)   <span class="extras">(<span class='priv'>private</span>)</span>
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#L1040'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1040
1041
1042</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1040</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_merge_path_names_scope'>merge_path_names_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='id identifier rubyid_merge_options_scope'>merge_options_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="merge_path_scope-instance_method">
  <h3 class='signature'>
  #<strong>merge_path_scope</strong>(parent, child)   <span class="extras">(<span class='priv'>private</span>)</span>
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#L1004'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1004
1005
1006</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1004</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_merge_path_scope'>merge_path_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='const'><a href="../Mapper.html" title="ActionDispatch::Routing::Mapper (class)">Mapper</a></span><span class='period'>.</span><span class='id identifier rubyid_normalize_path'><a href="../Mapper.html#normalize_path-class_method" title="ActionDispatch::Routing::Mapper.normalize_path (method)">normalize_path</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_parent'>parent</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_child'>child</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="merge_shallow_path_scope-instance_method">
  <h3 class='signature'>
  #<strong>merge_shallow_path_scope</strong>(parent, child)   <span class="extras">(<span class='priv'>private</span>)</span>
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#L1008'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1008
1009
1010</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1008</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_merge_shallow_path_scope'>merge_shallow_path_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='const'><a href="../Mapper.html" title="ActionDispatch::Routing::Mapper (class)">Mapper</a></span><span class='period'>.</span><span class='id identifier rubyid_normalize_path'><a href="../Mapper.html#normalize_path-class_method" title="ActionDispatch::Routing::Mapper.normalize_path (method)">normalize_path</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_parent'>parent</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_child'>child</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="merge_shallow_prefix_scope-instance_method">
  <h3 class='signature'>
  #<strong>merge_shallow_prefix_scope</strong>(parent, child)   <span class="extras">(<span class='priv'>private</span>)</span>
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#L1016'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1016
1017
1018</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1016</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_merge_shallow_prefix_scope'>merge_shallow_prefix_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='id identifier rubyid_parent'>parent</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_parent'>parent</span><span class='embexpr_end'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_child'>child</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='id identifier rubyid_child'>child</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="merge_shallow_scope-instance_method">
  <h3 class='signature'>
  #<strong>merge_shallow_scope</strong>(parent, child)   <span class="extras">(<span class='priv'>private</span>)</span>
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#L1062'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1062
1063
1064</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1062</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_merge_shallow_scope'>merge_shallow_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='id identifier rubyid_child'>child</span> <span class='op'>?</span> <span class='kw'>true</span> <span class='op'>:</span> <span class='kw'>false</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="merge_to_scope-instance_method">
  <h3 class='signature'>
  #<strong>merge_to_scope</strong>(parent, child)   <span class="extras">(<span class='priv'>private</span>)</span>
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#L1066'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1066
1067
1068</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1066</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_merge_to_scope'>merge_to_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_child'>child</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="merge_via_scope-instance_method">
  <h3 class='signature'>
  #<strong>merge_via_scope</strong>(parent, child)   <span class="extras">(<span class='priv'>private</span>)</span>
</h3>
  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#L1032'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1032
1033
1034</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1032</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_merge_via_scope'>merge_via_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_child'>child</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='id identifier rubyid_child'>child</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="namespace-instance_method">
  <h3 class='signature'>
  #<strong>namespace</strong>(path, options = {})  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Scopes routes to a specific namespace. For example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_namespace'>namespace</span> <span class='symbeg'>:</span><span class='id identifier rubyid_admin'>admin</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_resources'>resources</span> <span class='symbeg'>:</span><span class='id identifier rubyid_posts'>posts</span>
<span class='kw'>end</span>
</code></pre>

<p>This generates the following routes:</p>

<pre class="code ruby"><code class="ruby">    admin_posts GET       /admin/posts(.:format)          admin/posts#index
    admin_posts POST      /admin/posts(.:format)          admin/posts#create
 new_admin_post GET       /admin/posts/new(.:format)      admin/posts#new
edit_admin_post GET       /admin/posts/:id/edit(.:format) admin/posts#edit
     admin_post GET       /admin/posts/:id(.:format)      admin/posts#show
     admin_post PATCH/PUT /admin/posts/:id(.:format)      admin/posts#update
     admin_post DELETE    /admin/posts/:id(.:format)      admin/posts#destroy</code></pre>

<h5 id="label-Options">Options</h5>

<p>The <code>:path</code>, <code>:as</code>, <code>:module</code>,
<code>:shallow_path</code> and <code>:shallow_prefix</code> options all
default to the name of the namespace.</p>

<p>For options, see <code>Base#match</code>. For <code>:shallow_path</code>
option, see <code>Resources#resources</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># accessible through /sekret/posts rather than /admin/posts
</span><span class='id identifier rubyid_namespace'>namespace</span> <span class='symbeg'>:</span><span class='id identifier rubyid_admin'>admin</span><span class='comma'>,</span> <span class='label'>path:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sekret</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_resources'>resources</span> <span class='symbeg'>:</span><span class='id identifier rubyid_posts'>posts</span>
<span class='kw'>end</span>

<span class='comment'># maps to &lt;tt&gt;Sekret::PostsController&lt;/tt&gt; rather than &lt;tt&gt;Admin::PostsController&lt;/tt&gt;
</span><span class='id identifier rubyid_namespace'>namespace</span> <span class='symbeg'>:</span><span class='id identifier rubyid_admin'>admin</span><span class='comma'>,</span> <span class='label'>module:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sekret</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_resources'>resources</span> <span class='symbeg'>:</span><span class='id identifier rubyid_posts'>posts</span>
<span class='kw'>end</span>

<span class='comment'># generates &lt;code&gt;sekret_posts_path&lt;/code&gt; rather than &lt;code&gt;admin_posts_path&lt;/code&gt;
</span><span class='id identifier rubyid_namespace'>namespace</span> <span class='symbeg'>:</span><span class='id identifier rubyid_admin'>admin</span><span class='comma'>,</span> <span class='label'>as:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sekret</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_resources'>resources</span> <span class='symbeg'>:</span><span class='id identifier rubyid_posts'>posts</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#L917'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


917
918
919
920
921
922
923
924
925
926
927
928
929
930</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 917</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_namespace'>namespace</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>

  <span class='id identifier rubyid_defaults'>defaults</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>module:</span>         <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span>
    <span class='label'>as:</span>             <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_as'>as</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='label'>shallow_path:</span>   <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='label'>shallow_prefix:</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_as'>as</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
  <span class='rbrace'>}</span>

  <span class='id identifier rubyid_path_scope'>path_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_path'>path</span> <span class='rbrace'>}</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_scope'>scope</span><span class='lparen'>(</span><span class='id identifier rubyid_defaults'>defaults</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='kw'>yield</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="scope-instance_method">
  <h3 class='signature'>
  #<strong>scope</strong>(*args)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Scopes a set of routes to the given default options.</p>

<p>Take the following route definition as an example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scope'>scope</span> <span class='label'>path:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:account_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>as:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>account</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_resources'>resources</span> <span class='symbeg'>:</span><span class='id identifier rubyid_projects'>projects</span>
<span class='kw'>end</span>
</code></pre>

<p>This generates helpers such as <code>account_projects_path</code>, just
like <code>resources</code> does. The difference here being that the routes
generated are like /:account_id/projects, rather than
/accounts/:account_id/projects.</p>

<h5 id="label-Options">Options</h5>

<p>Takes same options as <code>Base#match</code> and
<code>Resources#resources</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># route /posts (without the prefix /admin) to &lt;tt&gt;Admin::PostsController&lt;/tt&gt;
</span><span class='id identifier rubyid_scope'>scope</span> <span class='label'>module:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>admin</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_resources'>resources</span> <span class='symbeg'>:</span><span class='id identifier rubyid_posts'>posts</span>
<span class='kw'>end</span>

<span class='comment'># prefix the posts resource&#39;s requests with &#39;/admin&#39;
</span><span class='id identifier rubyid_scope'>scope</span> <span class='label'>path:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/admin</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_resources'>resources</span> <span class='symbeg'>:</span><span class='id identifier rubyid_posts'>posts</span>
<span class='kw'>end</span>

<span class='comment'># prefix the routing helper name: &lt;code&gt;sekret_posts_path&lt;/code&gt; instead of &lt;code&gt;posts_path&lt;/code&gt;
</span><span class='id identifier rubyid_scope'>scope</span> <span class='label'>as:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sekret</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_resources'>resources</span> <span class='symbeg'>:</span><span class='id identifier rubyid_posts'>posts</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#L813'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


813
814
815
816
817
818
819
820
821
822
823
824
825
826
827
828
829
830
831
832
833
834
835
836
837
838
839
840
841
842
843
844
845
846
847
848
849
850
851
852
853
854
855
856
857
858
859
860
861
862
863</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 813</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_scope'>scope</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_extract_options!'>extract_options!</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
  <span class='id identifier rubyid_scope'>scope</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_path'>path</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_constraints'>constraints</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_nested_scope?'>nested_scope?</span>
    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_shallow_path'>shallow_path</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_path'>path</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_shallow_prefix'>shallow_prefix</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_as'>as</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_as'>as</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_constraints'>constraints</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><a href="../../../Hash.html" title="Hash (class)">Hash</a></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_defaults'>defaults</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_constraints'>constraints</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
      <span class='const'><a href="../Mapper.html#URL_OPTIONS-constant" title="ActionDispatch::Routing::Mapper::URL_OPTIONS (constant)">URL_OPTIONS</a></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_k'>k</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><a href="../../../String.html" title="String (class)">String</a></span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><a href="../../../Integer.html" title="Integer (class)">Integer</a></span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_defaults'>defaults</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_defaults'>defaults</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_defaults'>defaults</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_block'>block</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_constraints'>constraints</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_constraints'>constraints</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_only'>only</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_except'>except</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_scope'>scope</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_action_options'>action_options</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>only:</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_only'>only</span><span class='rparen'>)</span><span class='comma'>,</span>
                               <span class='label'>except:</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_except'>except</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_anchor'>anchor</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>anchor is ignored unless passed to `match`</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='ivar'>@scope</span><span class='period'>.</span><span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_option'>option</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_option'>option</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_blocks'>blocks</span>
      <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_block'>block</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_option'>option</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_options'>options</span>
      <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_option'>option</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='const'><a href="#POISON-constant" title="ActionDispatch::Routing::Mapper::Scoping::POISON (constant)">POISON</a></span> <span class='rbrace'>}</span>
    <span class='kw'>end</span>

    <span class='kw'>unless</span> <span class='const'><a href="#POISON-constant" title="ActionDispatch::Routing::Mapper::Scoping::POISON (constant)">POISON</a></span> <span class='op'>==</span> <span class='id identifier rubyid_value'>value</span>
      <span class='id identifier rubyid_scope'>scope</span><span class='lbracket'>[</span><span class='id identifier rubyid_option'>option</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>merge_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_option'>option</span><span class='embexpr_end'>}</span><span class='tstring_content'>_scope</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='ivar'>@scope</span><span class='lbracket'>[</span><span class='id identifier rubyid_option'>option</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='ivar'>@scope</span> <span class='op'>=</span> <span class='ivar'>@scope</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_scope'>scope</span>
  <span class='kw'>yield</span>
  <span class='kw'>self</span>
<span class='kw'>ensure</span>
  <span class='ivar'>@scope</span> <span class='op'>=</span> <span class='ivar'>@scope</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.5 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>