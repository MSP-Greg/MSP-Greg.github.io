<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Nokogiri::XML::Builder &mdash; Nokogiri main</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Nokogiri::XML::Builder",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Nokogiri main</a> &raquo; 
      <a href='../../_index.html#alpha_B'>Index (B)</a> &raquo; 
        <a href="../../Nokogiri.html" title="Nokogiri (module)">Nokogiri</a> &raquo; 
        <a href="../XML.html" title="Nokogiri::XML (module)">XML</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Builder&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: Nokogiri::XML::Builder</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a class='nodoc' href="Builder/NodeBuilder.html" title="Nokogiri::XML::Builder::NodeBuilder (class)"><code>NodeBuilder</code></a>      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Subclasses:</div>
        <div class='box_22'>
          <a href="../HTML4/Builder.html" title="Nokogiri::HTML4::Builder (class)">HTML4::Builder</a>, <a href="../HTML5/Builder.html" title="Nokogiri::HTML5::Builder (class)">HTML5::Builder</a>, <a href="../HTML/Builder.html" title="Nokogiri::HTML::Builder (class)">HTML::Builder</a>
        </div>
      </td>
    </tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="../ClassResolver.html" title="Nokogiri::ClassResolver (module)"><code>::Nokogiri::ClassResolver</code></a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="../../Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/sparklemotion/nokogiri/blob/main/lib/nokogiri/xml/builder.rb#L264'>lib/nokogiri/xml/builder.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p><a href="../../Nokogiri.html" title="Nokogiri (module)"><code>::Nokogiri</code></a> builder can be used for building <a href="../XML.html" title="Nokogiri::XML (module)"><code>::Nokogiri::XML</code></a> and <a href="../HTML.html" title="Nokogiri::HTML (module)"><code>::Nokogiri::HTML</code></a> documents.</p>

<h3 id="label-Synopsis-3A">Synopsis:</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_builder'>builder</span> <span class='op'>=</span> <span class='const'><a href="../../Nokogiri.html" title="Nokogiri (module)">Nokogiri</a></span><span class='op'>::</span><span class='const'><a href="../XML.html" title="Nokogiri::XML (module)">XML</a></span><span class='op'>::</span><span class='const'>Builder</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Nokogiri::XML::Builder.new (method)">new</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_xml'>xml</span><span class='op'>|</span>
  <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_root'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span> {
    <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_products'>products</span> {
      <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_widget'>widget</span> {
        <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_id_'>id_</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>10</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_name'>name</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Awesome widget</span><span class='tstring_end'>&quot;</span></span>
      }
    }
  }
<span class='kw'>end</span>
<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_builder'>builder</span>.<span class='id identifier rubyid_to_xml'><a href="#to_xml-instance_method" title="Nokogiri::XML::Builder#to_xml (method)">to_xml</a></span></code></pre>

<p>Will output:</p>

<pre class="code xml"><code class="xml">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;root&gt;
  &lt;products&gt;
    &lt;widget&gt;
      &lt;id&gt;10&lt;/id&gt;
      &lt;name&gt;Awesome widget&lt;/name&gt;
    &lt;/widget&gt;
  &lt;/products&gt;
&lt;/root&gt;
</code></pre>

<h4 id="label-Builder+scope">Builder scope</h4>

<p>The builder allows two forms.  When the builder is supplied with a block that has a parameter, the outside scope is maintained.  This means you can access variables that are outside your builder.  If you don’t need outside scope, you can use the builder without the “xml” prefix like this:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_builder'>builder</span> <span class='op'>=</span> <span class='const'><a href="../../Nokogiri.html" title="Nokogiri (module)">Nokogiri</a></span><span class='op'>::</span><span class='const'><a href="../XML.html" title="Nokogiri::XML (module)">XML</a></span><span class='op'>::</span><span class='const'>Builder</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Nokogiri::XML::Builder.new (method)">new</a></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_root'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span> {
    <span class='id identifier rubyid_products'>products</span> {
      <span class='id identifier rubyid_widget'>widget</span> {
        <span class='id identifier rubyid_id_'>id_</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>10</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_name'>name</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Awesome widget</span><span class='tstring_end'>&quot;</span></span>
      }
    }
  }
<span class='kw'>end</span></code></pre>

<h3 id="label-Special+Tags">Special Tags</h3>

<p>The builder works by taking advantage of method_missing.  Unfortunately some methods are defined in ruby that are difficult or dangerous to remove.  You may want to create tags with the name “type”, “class”, and “id” for example.  In that case, you can use an underscore to disambiguate your tag name from the method call.</p>

<p>Here is an example of using the underscore to disambiguate tag names from ruby methods:</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@objects</span> <span class='op'>=</span> [<span class='const'><a href="../../Object.html" title="Object (class)">Object</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Nokogiri::XML::Builder.new (method)">new</a></span><span class='comma'>,</span> <span class='const'><a href="../../Object.html" title="Object (class)">Object</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Nokogiri::XML::Builder.new (method)">new</a></span><span class='comma'>,</span> <span class='const'><a href="../../Object.html" title="Object (class)">Object</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Nokogiri::XML::Builder.new (method)">new</a></span>]

<span class='id identifier rubyid_builder'>builder</span> <span class='op'>=</span> <span class='const'><a href="../../Nokogiri.html" title="Nokogiri (module)">Nokogiri</a></span><span class='op'>::</span><span class='const'><a href="../XML.html" title="Nokogiri::XML (module)">XML</a></span><span class='op'>::</span><span class='const'>Builder</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Nokogiri::XML::Builder.new (method)">new</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_xml'>xml</span><span class='op'>|</span>
  <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_root'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span> {
    <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_objects'>objects</span> {
      <span class='ivar'>@objects</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_o'>o</span><span class='op'>|</span>
        <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_object'>object</span> {
          <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_type_'>type_</span>   <span class='id identifier rubyid_o'>o</span>.<span class='id identifier rubyid_type'>type</span>
          <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_class_'>class_</span>  <span class='id identifier rubyid_o'>o</span>.<span class='id identifier rubyid_class'>class</span>.<span class='id identifier rubyid_name'>name</span>
          <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_id_'>id_</span>     <span class='id identifier rubyid_o'>o</span>.<span class='id identifier rubyid_id'>id</span>
        }
      <span class='kw'>end</span>
    }
  }
<span class='kw'>end</span>
<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_builder'>builder</span>.<span class='id identifier rubyid_to_xml'><a href="#to_xml-instance_method" title="Nokogiri::XML::Builder#to_xml (method)">to_xml</a></span></code></pre>

<p>The underscore may be used with any tag name, and the last underscore will just be removed.  This code will output the following <a href="../XML.html" title="Nokogiri::XML (module)"><code>::Nokogiri::XML</code></a>:</p>

<pre class="code xml"><code class="xml">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;root&gt;
  &lt;objects&gt;
    &lt;object&gt;
      &lt;type&gt;Object&lt;/type&gt;
      &lt;class&gt;Object&lt;/class&gt;
      &lt;id&gt;48390&lt;/id&gt;
    &lt;/object&gt;
    &lt;object&gt;
      &lt;type&gt;Object&lt;/type&gt;
      &lt;class&gt;Object&lt;/class&gt;
      &lt;id&gt;48380&lt;/id&gt;
    &lt;/object&gt;
    &lt;object&gt;
      &lt;type&gt;Object&lt;/type&gt;
      &lt;class&gt;Object&lt;/class&gt;
      &lt;id&gt;48370&lt;/id&gt;
    &lt;/object&gt;
  &lt;/objects&gt;
&lt;/root&gt;
</code></pre>

<h3 id="label-Tag+Attributes">Tag Attributes</h3>

<p>Tag attributes may be supplied as method arguments.  Here is our previous example, but using attributes rather than tags:</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@objects</span> <span class='op'>=</span> [<span class='const'><a href="../../Object.html" title="Object (class)">Object</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Nokogiri::XML::Builder.new (method)">new</a></span><span class='comma'>,</span> <span class='const'><a href="../../Object.html" title="Object (class)">Object</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Nokogiri::XML::Builder.new (method)">new</a></span><span class='comma'>,</span> <span class='const'><a href="../../Object.html" title="Object (class)">Object</a></span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Nokogiri::XML::Builder.new (method)">new</a></span>]

<span class='id identifier rubyid_builder'>builder</span> <span class='op'>=</span> <span class='const'><a href="../../Nokogiri.html" title="Nokogiri (module)">Nokogiri</a></span><span class='op'>::</span><span class='const'><a href="../XML.html" title="Nokogiri::XML (module)">XML</a></span><span class='op'>::</span><span class='const'>Builder</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Nokogiri::XML::Builder.new (method)">new</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_xml'>xml</span><span class='op'>|</span>
  <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_root'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span> {
    <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_objects'>objects</span> {
      <span class='ivar'>@objects</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_o'>o</span><span class='op'>|</span>
        <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_object'>object</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_type'>type</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_o'>o</span>.<span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='kw'>class</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_o'>o</span>.<span class='id identifier rubyid_class'>class</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_id'>id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_o'>o</span>.<span class='id identifier rubyid_id'>id</span>)
      <span class='kw'>end</span>
    }
  }
<span class='kw'>end</span>
<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_builder'>builder</span>.<span class='id identifier rubyid_to_xml'><a href="#to_xml-instance_method" title="Nokogiri::XML::Builder#to_xml (method)">to_xml</a></span></code></pre>

<h4 id="label-Tag+Attribute+Short+Cuts">Tag Attribute Short Cuts</h4>

<p>A couple attribute short cuts are available when building tags.  The short cuts are available by special method calls when building a tag.</p>

<p>This example builds an “object” tag with the class attribute “classy” and the id of “thing”:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_builder'>builder</span> <span class='op'>=</span> <span class='const'><a href="../../Nokogiri.html" title="Nokogiri (module)">Nokogiri</a></span><span class='op'>::</span><span class='const'><a href="../XML.html" title="Nokogiri::XML (module)">XML</a></span><span class='op'>::</span><span class='const'>Builder</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Nokogiri::XML::Builder.new (method)">new</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_xml'>xml</span><span class='op'>|</span>
  <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_root'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span> {
    <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_objects'>objects</span> {
      <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_object'>object</span>.<span class='id identifier rubyid_classy'>classy</span>.<span class='id identifier rubyid_thing!'>thing!</span>
    }
  }
<span class='kw'>end</span>
<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_builder'>builder</span>.<span class='id identifier rubyid_to_xml'><a href="#to_xml-instance_method" title="Nokogiri::XML::Builder#to_xml (method)">to_xml</a></span></code></pre>

<p>Which will output:</p>

<pre class="code xml"><code class="xml">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;root&gt;
  &lt;objects&gt;
    &lt;object class=&quot;classy&quot; id=&quot;thing&quot;/&gt;
  &lt;/objects&gt;
&lt;/root&gt;
</code></pre>

<p>All other options are still supported with this syntax, including blocks and extra tag attributes.</p>

<h3 id="label-Namespaces">Namespaces</h3>

<p>Namespaces are added similarly to attributes.  <code>Builder</code> assumes that when an attribute starts with “xmlns”, it is meant to be a namespace:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_builder'>builder</span> <span class='op'>=</span> <span class='const'><a href="../../Nokogiri.html" title="Nokogiri (module)">Nokogiri</a></span><span class='op'>::</span><span class='const'><a href="../XML.html" title="Nokogiri::XML (module)">XML</a></span><span class='op'>::</span><span class='const'>Builder</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Nokogiri::XML::Builder.new (method)">new</a></span> { <span class='op'>|</span><span class='id identifier rubyid_xml'>xml</span><span class='op'>|</span>
  <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_root'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xmlns</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>default</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xmlns:foo</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_tenderlove'>tenderlove</span>
  <span class='kw'>end</span>
}
<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_builder'>builder</span>.<span class='id identifier rubyid_to_xml'><a href="#to_xml-instance_method" title="Nokogiri::XML::Builder#to_xml (method)">to_xml</a></span></code></pre>

<p>Will output <a href="../XML.html" title="Nokogiri::XML (module)"><code>::Nokogiri::XML</code></a> like this:</p>

<pre class="code xml"><code class="xml">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;root xmlns:foo=&quot;bar&quot; xmlns=&quot;default&quot;&gt;
  &lt;tenderlove/&gt;
&lt;/root&gt;
</code></pre>

<h4 id="label-Referencing+declared+namespaces">Referencing declared namespaces</h4>

<p>Tags that reference non-default namespaces (i.e. a tag “foo:bar”) can be built by using the <a href="#[]-instance_method" title="Nokogiri::XML::Builder#[] (method)">#[]</a> method.</p>

<p>For example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_builder'>builder</span> <span class='op'>=</span> <span class='const'><a href="../../Nokogiri.html" title="Nokogiri (module)">Nokogiri</a></span><span class='op'>::</span><span class='const'><a href="../XML.html" title="Nokogiri::XML (module)">XML</a></span><span class='op'>::</span><span class='const'>Builder</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Nokogiri::XML::Builder.new (method)">new</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_xml'>xml</span><span class='op'>|</span>
  <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_root'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xmlns:foo</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>) {
    <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_objects'>objects</span> {
      <span class='id identifier rubyid_xml'>xml</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>].<span class='id identifier rubyid_object'>object</span>.<span class='id identifier rubyid_classy'>classy</span>.<span class='id identifier rubyid_thing!'>thing!</span>
    }
  }
<span class='kw'>end</span>
<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_builder'>builder</span>.<span class='id identifier rubyid_to_xml'><a href="#to_xml-instance_method" title="Nokogiri::XML::Builder#to_xml (method)">to_xml</a></span></code></pre>

<p>Will output this <a href="../XML.html" title="Nokogiri::XML (module)"><code>::Nokogiri::XML</code></a>:</p>

<pre class="code xml"><code class="xml">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;root xmlns:foo=&quot;bar&quot;&gt;
  &lt;objects&gt;
    &lt;foo:object class=&quot;classy&quot; id=&quot;thing&quot;/&gt;
  &lt;/objects&gt;
&lt;/root&gt;
</code></pre>

<p>Note the “foo:object” tag.</p>

<h4 id="label-Namespace+inheritance">Namespace inheritance</h4>

<p>In the <code>Builder</code> context, children will inherit their parent’s namespace. This is the same behavior as if the underlying <a href="Document.html" title="Nokogiri::XML::Document (class)"><code>Document</code></a> set <code>namespace_inheritance</code> to <code>true</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'><a href="../../Nokogiri.html" title="Nokogiri (module)">Nokogiri</a></span><span class='op'>::</span><span class='const'><a href="../XML.html" title="Nokogiri::XML (module)">XML</a></span><span class='op'>::</span><span class='const'>Builder</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Nokogiri::XML::Builder.new (method)">new</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_xml'>xml</span><span class='op'>|</span>
  <span class='id identifier rubyid_xml'>xml</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>soapenv</span><span class='tstring_end'>&quot;</span></span>].<span class='const'>Envelope</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>xmlns:soapenv</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://schemas.xmlsoap.org/soap/envelope/</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_xml'>xml</span>.<span class='const'>Header</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
<span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_doc'><a href="#doc-instance_method" title="Nokogiri::XML::Builder#doc (method)">doc</a></span>.<span class='id identifier rubyid_to_xml'><a href="#to_xml-instance_method" title="Nokogiri::XML::Builder#to_xml (method)">to_xml</a></span>
<span class='comment'># =&gt; &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
</span><span class='comment'>#    &lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;
</span><span class='comment'>#      &lt;soapenv:Header/&gt;
</span><span class='comment'>#    &lt;/soapenv:Envelope&gt;</span></code></pre>

<p>Users may turn this behavior off by passing a keyword argument <code>namespace_inheritance:false</code> to the initializer:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'><a href="../../Nokogiri.html" title="Nokogiri (module)">Nokogiri</a></span><span class='op'>::</span><span class='const'><a href="../XML.html" title="Nokogiri::XML (module)">XML</a></span><span class='op'>::</span><span class='const'>Builder</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Nokogiri::XML::Builder.new (method)">new</a></span>(<span class='label'>namespace_inheritance:</span> <span class='kw'>false</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_xml'>xml</span><span class='op'>|</span>
  <span class='id identifier rubyid_xml'>xml</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>soapenv</span><span class='tstring_end'>&quot;</span></span>].<span class='const'>Envelope</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>xmlns:soapenv</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://schemas.xmlsoap.org/soap/envelope/</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>do</span>
    <span class='id identifier rubyid_xml'>xml</span>.<span class='const'>Header</span>
    <span class='id identifier rubyid_xml'>xml</span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>soapenv</span><span class='tstring_end'>&quot;</span></span>].<span class='const'>Body</span> <span class='comment'># users may explicitly opt into the namespace
</span>  <span class='kw'>end</span>
<span class='kw'>end</span>
<span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_doc'><a href="#doc-instance_method" title="Nokogiri::XML::Builder#doc (method)">doc</a></span>.<span class='id identifier rubyid_to_xml'><a href="#to_xml-instance_method" title="Nokogiri::XML::Builder#to_xml (method)">to_xml</a></span>
<span class='comment'># =&gt; &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
</span><span class='comment'>#    &lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;
</span><span class='comment'>#      &lt;Header/&gt;
</span><span class='comment'>#      &lt;soapenv:Body/&gt;
</span><span class='comment'>#    &lt;/soapenv:Envelope&gt;</span></code></pre>

<p>For more information on namespace inheritance, please see <a href="Document.html#namespace_inheritance-instance_method" title="Nokogiri::XML::Document#namespace_inheritance (method)">Document#namespace_inheritance</a></p>

<h3 id="label-Document+Types">Document Types</h3>

<p>To create a document type (DTD), use the <a href="#doc-instance_method" title="Nokogiri::XML::Builder#doc (method)">#doc</a> method to get the current context document.  Then call <a href="Node.html#create_internal_subset-instance_method" title="Nokogiri::XML::Node#create_internal_subset (method)">Node#create_internal_subset</a> to create the <a href="DTD.html" title="Nokogiri::XML::DTD (class)"><code>DTD</code></a> node.</p>

<p>For example, this Ruby:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_builder'>builder</span> <span class='op'>=</span> <span class='const'><a href="../../Nokogiri.html" title="Nokogiri (module)">Nokogiri</a></span><span class='op'>::</span><span class='const'><a href="../XML.html" title="Nokogiri::XML (module)">XML</a></span><span class='op'>::</span><span class='const'>Builder</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="Nokogiri::XML::Builder.new (method)">new</a></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_xml'>xml</span><span class='op'>|</span>
  <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_doc'><a href="#doc-instance_method" title="Nokogiri::XML::Builder#doc (method)">doc</a></span>.<span class='id identifier rubyid_create_internal_subset'>create_internal_subset</span>(
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>html</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-//W3C//DTD HTML 4.01 Transitional//EN</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://www.w3.org/TR/html4/loose.dtd</span><span class='tstring_end'>&quot;</span></span>
  )
  <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_root'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span> <span class='kw'>do</span>
    <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_foo'>foo</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_builder'>builder</span>.<span class='id identifier rubyid_to_xml'><a href="#to_xml-instance_method" title="Nokogiri::XML::Builder#to_xml (method)">to_xml</a></span></code></pre>

<p>Will output this xml:</p>

<pre class="code xml"><code class="xml">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;
&lt;root&gt;
  &lt;foo/&gt;
&lt;/root&gt;
</code></pre>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='DEFAULT_DOCUMENT_OPTIONS-constant' class='summary_signature'>DEFAULT_DOCUMENT_OPTIONS =</span>
    <br/>
    <a class='repo' href='https://github.com/sparklemotion/nokogiri/blob/main/lib/nokogiri/xml/builder.rb#L267-L267'># File 'lib/nokogiri/xml/builder.rb', line 267</a>    <pre class='code ruby'>{ <span class='label'>namespace_inheritance:</span> <span class='kw'>true</span> }</pre>
  </li>
</ul>
  <h3 class='inherited'><a href="../ClassResolver.html" title="Nokogiri::ClassResolver (module)"><code>::Nokogiri::ClassResolver</code></a> - Included</h3>
  <p  class='inherited'>
    <a href="../ClassResolver.html#VALID_NAMESPACES-constant" title="Nokogiri::ClassResolver::VALID_NAMESPACES (constant)">VALID_NAMESPACES</a>
  </p>
</div>

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(options = {}, root = nil, &amp;block)  &#x21d2; Builder </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Create a new <code>Builder</code> object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#with-class_method" title=".with (class method)">.<strong>with</strong>(root, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Create a builder with an existing root object.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#context-instance_method" title="#context (instance method)">#<strong>context</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>A context object for use when the block has no arguments.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#doc-instance_method" title="#doc (instance method)">#<strong>doc</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>The current <a href="Document.html" title="Nokogiri::XML::Document (class)"><code>Document</code></a> object being built.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#parent-instance_method" title="#parent (instance method)">#<strong>parent</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>The parent of the current node being built.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw nodoc'>
      <a href="#arity-instance_method" title="#arity (instance method)">#<strong>arity</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#<<-instance_method" title="#&lt;&lt; (instance method)">#<strong>&lt;&lt;</strong>(string)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Append the given raw <a href="../XML.html" title="Nokogiri::XML (module)"><code>::Nokogiri::XML</code></a> <code>string</code> to the document.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#[]-instance_method" title="#[] (instance method)">#<strong>[]</strong>(ns_prefix)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Build a tag that is associated with namespace <code>ns</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#cdata-instance_method" title="#cdata (instance method)">#<strong>cdata</strong>(string)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Create a <a href="CDATA.html" title="Nokogiri::XML::CDATA (class)"><code>CDATA</code></a> Node with content of <code>string</code></p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#comment-instance_method" title="#comment (instance method)">#<strong>comment</strong>(string)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Create a <a href="Comment.html" title="Nokogiri::XML::Comment (class)"><code>Comment</code></a> Node with content of <code>string</code></p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#text-instance_method" title="#text (instance method)">#<strong>text</strong>(string)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Create a <a href="Text.html" title="Nokogiri::XML::Text (class)"><code>Text</code></a> Node with content of <code>string</code></p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_xml-instance_method" title="#to_xml (instance method)">#<strong>to_xml</strong>(*args)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Convert this <code>Builder</code> object to <a href="../XML.html" title="Nokogiri::XML (module)"><code>::Nokogiri::XML</code></a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#bind_ns-instance_method" title="#bind_ns (instance method)">#<strong>bind_ns</strong>(node)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#insert-instance_method" title="#insert (instance method)">#<strong>insert</strong>(node, &amp;block)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Insert <code>node</code> as a child of the current <a href="Node.html" title="Nokogiri::XML::Node (class)"><code>Node</code></a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#method_missing-instance_method" title="#method_missing (instance method)">#<strong>method_missing</strong>(method, *args, &amp;block)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>

<h3 class='inherited'><a href="../ClassResolver.html" title="Nokogiri::ClassResolver (module)"><code>::Nokogiri::ClassResolver</code></a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="../ClassResolver.html#related_class-instance_method" title="Nokogiri::ClassResolver#related_class (method)">#related_class</a></td>
      <td><div class='inline'><p>Find a class constant within the.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(options = {}, root = nil, &amp;block)  &#x21d2; <code>Builder</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Create a new <code>Builder</code> object.  <code>options</code> are sent to the top level <a href="Document.html" title="Nokogiri::XML::Document (class)"><code>Document</code></a> that is being built.</p>

<p>Building a document with a particular encoding for example:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../../Nokogiri.html" title="Nokogiri (module)">Nokogiri</a></span><span class='op'>::</span><span class='const'><a href="../XML.html" title="Nokogiri::XML (module)">XML</a></span><span class='op'>::</span><span class='const'>Builder</span>.<span class='id identifier rubyid_new'>new</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_encoding'>encoding</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_xml'>xml</span><span class='op'>|</span>
  <span class='comment'>#...
</span><span class='kw'>end</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sparklemotion/nokogiri/blob/main/lib/nokogiri/xml/builder.rb#L307-L335'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='307' data-end='335'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/nokogiri/xml/builder.rb', line 307</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>(<span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> {}<span class='comma'>,</span> <span class='id identifier rubyid_root'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_root'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span>
    <span class='ivar'>@doc</span> <span class='op'>=</span> <span class='id identifier rubyid_root'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span>.<span class='id identifier rubyid_document'>document</span>
    <span class='ivar'>@parent</span> <span class='op'>=</span> <span class='id identifier rubyid_root'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span>
  <span class='kw'>else</span>
    <span class='ivar'>@parent</span> <span class='op'>=</span> <span class='ivar'>@doc</span> <span class='op'>=</span> <span class='id identifier rubyid_related_class'>related_class</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Document</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_new'>new</span>
  <span class='kw'>end</span>

  <span class='ivar'>@context</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@arity</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@ns_prefix</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='const'><a href="#DEFAULT_DOCUMENT_OPTIONS-constant" title="Nokogiri::XML::Builder::DEFAULT_DOCUMENT_OPTIONS (constant)">DEFAULT_DOCUMENT_OPTIONS</a></span>.<span class='id identifier rubyid_merge'>merge</span>(<span class='id identifier rubyid_options'>options</span>)
  <span class='id identifier rubyid_options'>options</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
    <span class='ivar'>@doc</span>.<span class='id identifier rubyid_send'>send</span>(<span class='symbeg'>:&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_k'>k</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span>)
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_block'>block</span>

  <span class='ivar'>@arity</span> <span class='op'>=</span> <span class='id identifier rubyid_block'>block</span>.<span class='id identifier rubyid_arity'><a href="#arity-instance_method" title="Nokogiri::XML::Builder#arity (method)">arity</a></span>
  <span class='kw'>if</span> <span class='ivar'>@arity</span> <span class='op'>&lt;=</span> <span class='int'>0</span>
    <span class='ivar'>@context</span> <span class='op'>=</span> <span class='id identifier rubyid_eval'>eval</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>self</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span>.<span class='id identifier rubyid_binding'>binding</span>)
    <span class='id identifier rubyid_instance_eval'>instance_eval</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>else</span>
    <span class='kw'>yield</span> <span class='kw'>self</span>
  <span class='kw'>end</span>

  <span class='ivar'>@parent</span> <span class='op'>=</span> <span class='ivar'>@doc</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 id='method_missing_details' class='y_details'>Dynamic Method Handling</h2>
  <p class='notice this'>
    This class handles dynamic methods through the <tt>method_missing</tt> method
</p>
<section class='method_details first' id="method_missing-instance_method">
  <h3 class='signature nodoc first'>
    #<strong>method_missing</strong>(method, *args, &amp;block)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sparklemotion/nokogiri/blob/main/lib/nokogiri/xml/builder.rb#L382-L390'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='382' data-end='390'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/nokogiri/xml/builder.rb', line 382</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_method_missing'>method_missing</span>(<span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>) <span class='comment'># :nodoc:
</span>  <span class='kw'>if</span> <span class='ivar'>@context</span><span class='op'>&amp;.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span>(<span class='id identifier rubyid_method'>method</span>)
    <span class='ivar'>@context</span>.<span class='id identifier rubyid_send'>send</span>(<span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>else</span>
    <span class='id identifier rubyid_node'>node</span> <span class='op'>=</span> <span class='ivar'>@doc</span>.<span class='id identifier rubyid_create_element'>create_element</span>(<span class='id identifier rubyid_method'>method</span>.<span class='id identifier rubyid_to_s'>to_s</span>.<span class='id identifier rubyid_sub'>sub</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[_!]$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>)<span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
    <span class='id identifier rubyid_bind_ns'><a href="#bind_ns-instance_method" title="Nokogiri::XML::Builder#bind_ns (method)">bind_ns</a></span>(<span class='id identifier rubyid_node'>node</span>)
    <span class='id identifier rubyid_insert'><a href="#insert-instance_method" title="Nokogiri::XML::Builder#insert (method)">insert</a></span>(<span class='id identifier rubyid_node'>node</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="with-class_method">
  <h3 class='signature  first'>
    .<strong>with</strong>(root, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Create a builder with an existing root object.  This is for use when you have an existing document that you would like to augment with builder methods.  The builder context created will start with the given <a href="../../top-level-namespace.html" title="Top Level Namespace (root)"><code>::</code></a> node.</p>

<p>For example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_doc'><a href="#doc-instance_method" title="Nokogiri::XML::Builder#doc (method)">doc</a></span> <span class='op'>=</span> <span class='const'><a href="../../Nokogiri.html" title="Nokogiri (module)">Nokogiri</a></span><span class='op'>::</span><span class='const'><a href="../XML.html" title="Nokogiri::XML (module)">XML</a></span>(<span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>somedoc.xml</span><span class='tstring_end'>&#39;</span></span>))
<span class='const'><a href="../../Nokogiri.html" title="Nokogiri (module)">Nokogiri</a></span><span class='op'>::</span><span class='const'><a href="../XML.html" title="Nokogiri::XML (module)">XML</a></span><span class='op'>::</span><span class='const'>Builder</span>.<span class='id identifier rubyid_with'>with</span>(<span class='id identifier rubyid_doc'><a href="#doc-instance_method" title="Nokogiri::XML::Builder#doc (method)">doc</a></span>.<span class='id identifier rubyid_at_css'>at_css</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>some_tag</span><span class='tstring_end'>&#39;</span></span>)) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_xml'>xml</span><span class='op'>|</span>
  <span class='comment'># ... Use normal builder methods here ...
</span>  <span class='id identifier rubyid_xml'>xml</span>.<span class='id identifier rubyid_awesome'>awesome</span> <span class='comment'># add the &quot;awesome&quot; tag below &quot;some_tag&quot;
</span><span class='kw'>end</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sparklemotion/nokogiri/blob/main/lib/nokogiri/xml/builder.rb#L294-L296'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='294' data-end='296'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/nokogiri/xml/builder.rb', line 294</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_with'>with</span>(<span class='id identifier rubyid_root'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_new'><a href="#new-class_method" title="Nokogiri::XML::Builder.new (method)">new</a></span>({}<span class='comma'>,</span> <span class='id identifier rubyid_root'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="arity-instance_method">
  <h3 class='signature rw  nodoc first'>
    #<strong>arity</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sparklemotion/nokogiri/blob/main/lib/nokogiri/xml/builder.rb#L278-L278'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='278' data-end='278'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/nokogiri/xml/builder.rb', line 278</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_arity'>arity</span> <span class='comment'># :nodoc:</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="context-instance_method">
  <h3 class='signature rw'>
    #<strong>context</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>A context object for use when the block has no arguments</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sparklemotion/nokogiri/blob/main/lib/nokogiri/xml/builder.rb#L276-L276'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='276' data-end='276'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/nokogiri/xml/builder.rb', line 276</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_context'>context</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="doc-instance_method">
  <h3 class='signature rw'>
    #<strong>doc</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The current <a href="Document.html" title="Nokogiri::XML::Document (class)"><code>Document</code></a> object being built</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sparklemotion/nokogiri/blob/main/lib/nokogiri/xml/builder.rb#L270-L270'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='270' data-end='270'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/nokogiri/xml/builder.rb', line 270</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_doc'>doc</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parent-instance_method">
  <h3 class='signature rw'>
    #<strong>parent</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The parent of the current node being built</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sparklemotion/nokogiri/blob/main/lib/nokogiri/xml/builder.rb#L273-L273'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='273' data-end='273'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/nokogiri/xml/builder.rb', line 273</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_parent'>parent</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="<<-instance_method">
  <h3 class='signature  first'>
    #<strong>&lt;&lt;</strong>(string)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Append the given raw <a href="../XML.html" title="Nokogiri::XML (module)"><code>::Nokogiri::XML</code></a> <code>string</code> to the document</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sparklemotion/nokogiri/blob/main/lib/nokogiri/xml/builder.rb#L378-L380'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='378' data-end='380'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/nokogiri/xml/builder.rb', line 378</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='op'>&lt;&lt;</span>(<span class='id identifier rubyid_string'>string</span>)
  <span class='ivar'>@doc</span>.<span class='id identifier rubyid_fragment'><a href="../XML.html#fragment-class_method" title="Nokogiri::XML.fragment (method)">fragment</a></span>(<span class='id identifier rubyid_string'>string</span>).<span class='id identifier rubyid_children'>children</span>.<span class='id identifier rubyid_each'>each</span> { <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_insert'><a href="#insert-instance_method" title="Nokogiri::XML::Builder#insert (method)">insert</a></span>(<span class='id identifier rubyid_x'>x</span>) }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="[]-instance_method">
  <h3 class='signature '>
    #<strong>[]</strong>(ns_prefix)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Build a tag that is associated with namespace <code>ns</code>.  Raises an ArgumentError if <code>ns</code> has not been defined higher in the tree.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sparklemotion/nokogiri/blob/main/lib/nokogiri/xml/builder.rb#L358-L361'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='358' data-end='361'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/nokogiri/xml/builder.rb', line 358</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='op'>[]</span>(<span class='id identifier rubyid_ns_prefix'>ns_prefix</span>)
  <span class='ivar'>@ns_prefix</span> <span class='op'>=</span> <span class='id identifier rubyid_ns_prefix'>ns_prefix</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='kw'>self</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="bind_ns-instance_method">
  <h3 class='signature priv'>
    #<strong>bind_ns</strong>(node)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
  </li>
</ul>

</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sparklemotion/nokogiri/blob/main/lib/nokogiri/xml/builder.rb#L394-L411'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='394' data-end='411'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/nokogiri/xml/builder.rb', line 394</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_bind_ns'>bind_ns</span>(<span class='id identifier rubyid_node'>node</span>)
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='ivar'>@ns_prefix</span>.<span class='id identifier rubyid_nil?'>nil?</span>

  <span class='id identifier rubyid_ancestors'>ancestors</span> <span class='op'>=</span> [<span class='id identifier rubyid_node'>node</span><span class='comma'>,</span> <span class='id identifier rubyid_parent'><a href="#parent-instance_method" title="Nokogiri::XML::Builder#parent (method)">parent</a></span><span class='comma'>,</span> <span class='id identifier rubyid_parent'><a href="#parent-instance_method" title="Nokogiri::XML::Builder#parent (method)">parent</a></span>.<span class='id identifier rubyid_ancestors'>ancestors</span>].<span class='id identifier rubyid_flatten'>flatten</span>
  <span class='id identifier rubyid_ancestors'>ancestors</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_ancestor'>ancestor</span><span class='op'>|</span>
    <span class='kw'>break</span> <span class='kw'>if</span> <span class='id identifier rubyid_ancestor'>ancestor</span>.<span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_ancestor'>ancestor</span> <span class='op'>==</span> <span class='ivar'>@doc</span>

    <span class='kw'>if</span> (<span class='id identifier rubyid_ns'>ns</span> <span class='op'>=</span> <span class='id identifier rubyid_ancestor'>ancestor</span>.<span class='id identifier rubyid_namespace_definitions'>namespace_definitions</span>.<span class='id identifier rubyid_find'>find</span> { <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span>.<span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>==</span> <span class='ivar'>@ns_prefix</span> })
      <span class='ivar'>@ns_prefix</span> <span class='op'>=</span> <span class='kw'>nil</span>
      <span class='id identifier rubyid_node'>node</span>.<span class='id identifier rubyid_namespace'>namespace</span> <span class='op'>=</span> <span class='id identifier rubyid_ns'>ns</span>
      <span class='kw'>break</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='kw'>if</span> <span class='ivar'>@ns_prefix</span>.<span class='id identifier rubyid_nil?'>nil?</span>

  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Namespace prefix </span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns_prefix</span>.<span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> has not been defined</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="cdata-instance_method">
  <h3 class='signature '>
    #<strong>cdata</strong>(string)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Create a <a href="CDATA.html" title="Nokogiri::XML::CDATA (class)"><code>CDATA</code></a> Node with content of <code>string</code></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sparklemotion/nokogiri/blob/main/lib/nokogiri/xml/builder.rb#L345-L347'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='345' data-end='347'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/nokogiri/xml/builder.rb', line 345</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_cdata'>cdata</span>(<span class='id identifier rubyid_string'>string</span>)
  <span class='id identifier rubyid_insert'><a href="#insert-instance_method" title="Nokogiri::XML::Builder#insert (method)">insert</a></span>(<span class='id identifier rubyid_doc'><a href="#doc-instance_method" title="Nokogiri::XML::Builder#doc (method)">doc</a></span>.<span class='id identifier rubyid_create_cdata'>create_cdata</span>(<span class='id identifier rubyid_string'>string</span>))
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="comment-instance_method">
  <h3 class='signature '>
    #<strong>comment</strong>(string)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Create a <a href="Comment.html" title="Nokogiri::XML::Comment (class)"><code>Comment</code></a> Node with content of <code>string</code></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sparklemotion/nokogiri/blob/main/lib/nokogiri/xml/builder.rb#L351-L353'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='351' data-end='353'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/nokogiri/xml/builder.rb', line 351</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_comment'>comment</span>(<span class='id identifier rubyid_string'>string</span>)
  <span class='id identifier rubyid_insert'><a href="#insert-instance_method" title="Nokogiri::XML::Builder#insert (method)">insert</a></span>(<span class='id identifier rubyid_doc'><a href="#doc-instance_method" title="Nokogiri::XML::Builder#doc (method)">doc</a></span>.<span class='id identifier rubyid_create_comment'>create_comment</span>(<span class='id identifier rubyid_string'>string</span>))
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="insert-instance_method">
  <h3 class='signature priv'>
    #<strong>insert</strong>(node, &amp;block)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Insert <code>node</code> as a child of the current <a href="Node.html" title="Nokogiri::XML::Node (class)"><code>Node</code></a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sparklemotion/nokogiri/blob/main/lib/nokogiri/xml/builder.rb#L415-L432'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='415' data-end='432'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/nokogiri/xml/builder.rb', line 415</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_insert'>insert</span>(<span class='id identifier rubyid_node'>node</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
  <span class='id identifier rubyid_node'>node</span> <span class='op'>=</span> <span class='ivar'>@parent</span>.<span class='id identifier rubyid_add_child'>add_child</span>(<span class='id identifier rubyid_node'>node</span>)
  <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_old_parent'>old_parent</span> <span class='op'>=</span> <span class='ivar'>@parent</span>
      <span class='ivar'>@parent</span> <span class='op'>=</span> <span class='id identifier rubyid_node'>node</span>
      <span class='ivar'>@arity</span> <span class='op'>||=</span> <span class='id identifier rubyid_block'>block</span>.<span class='id identifier rubyid_arity'><a href="#arity-instance_method" title="Nokogiri::XML::Builder#arity (method)">arity</a></span>
      <span class='kw'>if</span> <span class='ivar'>@arity</span> <span class='op'>&lt;=</span> <span class='int'>0</span>
        <span class='id identifier rubyid_instance_eval'>instance_eval</span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>)
      <span class='kw'>else</span>
        <span class='kw'>yield</span>(<span class='kw'>self</span>)
      <span class='kw'>end</span>
    <span class='kw'>ensure</span>
      <span class='ivar'>@parent</span> <span class='op'>=</span> <span class='id identifier rubyid_old_parent'>old_parent</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='const'><a href="Builder/NodeBuilder.html" title="Nokogiri::XML::Builder::NodeBuilder (class)">NodeBuilder</a></span>.<span class='id identifier rubyid_new'><a href="Builder/NodeBuilder.html#new-class_method" title="Nokogiri::XML::Builder::NodeBuilder.new (method)">new</a></span>(<span class='id identifier rubyid_node'>node</span><span class='comma'>,</span> <span class='kw'>self</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="text-instance_method">
  <h3 class='signature '>
    #<strong>text</strong>(string)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Create a <a href="Text.html" title="Nokogiri::XML::Text (class)"><code>Text</code></a> Node with content of <code>string</code></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sparklemotion/nokogiri/blob/main/lib/nokogiri/xml/builder.rb#L339-L341'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='339' data-end='341'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/nokogiri/xml/builder.rb', line 339</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_text'>text</span>(<span class='id identifier rubyid_string'>string</span>)
  <span class='id identifier rubyid_insert'><a href="#insert-instance_method" title="Nokogiri::XML::Builder#insert (method)">insert</a></span>(<span class='ivar'>@doc</span>.<span class='id identifier rubyid_create_text_node'>create_text_node</span>(<span class='id identifier rubyid_string'>string</span>))
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_xml-instance_method">
  <h3 class='signature '>
    #<strong>to_xml</strong>(*args)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Convert this <code>Builder</code> object to <a href="../XML.html" title="Nokogiri::XML (module)"><code>::Nokogiri::XML</code></a></p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/sparklemotion/nokogiri/blob/main/lib/nokogiri/xml/builder.rb#L365-L374'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='365' data-end='374'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/nokogiri/xml/builder.rb', line 365</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_to_xml'>to_xml</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
  <span class='kw'>if</span> <span class='const'><a href="../../Nokogiri.html" title="Nokogiri (module)">Nokogiri</a></span>.<span class='id identifier rubyid_jruby?'><a href="../../Nokogiri.html#jruby%3F-class_method" title="Nokogiri.jruby? (method)">jruby?</a></span>
    <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span>.<span class='id identifier rubyid_first'>first</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>Hash</span>) <span class='op'>?</span> <span class='id identifier rubyid_args'>args</span>.<span class='id identifier rubyid_shift'>shift</span> <span class='op'>:</span> {}
    <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_save_with'>save_with</span>]
      <span class='id identifier rubyid_options'>options</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_save_with'>save_with</span>] <span class='op'>=</span> <span class='const'><a href="Node.html" title="Nokogiri::XML::Node (class)">Node</a></span><span class='op'>::</span><span class='const'><a href="Node/SaveOptions.html" title="Nokogiri::XML::Node::SaveOptions (class)">SaveOptions</a></span><span class='op'>::</span><span class='const'><a href="Node/SaveOptions.html#AS_BUILDER-constant" title="Nokogiri::XML::Node::SaveOptions::AS_BUILDER (constant)">AS_BUILDER</a></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_args'>args</span>.<span class='id identifier rubyid_insert'><a href="#insert-instance_method" title="Nokogiri::XML::Builder#insert (method)">insert</a></span>(<span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>)
  <span class='kw'>end</span>
  <span class='ivar'>@doc</span>.<span class='id identifier rubyid_to_xml'>to_xml</span>(<span class='op'>*</span><span class='id identifier rubyid_args'>args</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>