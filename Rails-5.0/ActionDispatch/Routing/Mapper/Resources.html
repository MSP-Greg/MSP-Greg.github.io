<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: ActionDispatch::Routing::Mapper::Resources &mdash; Rails-5.0.0</title>

<link rel='stylesheet'  type='text/css' href='../../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "ActionDispatch::Routing::Mapper::Resources",
    relpath = '../../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../../../index.html'>Home</a> &raquo; 
          <a href='../../../index.html'>Rails-5.0.0</a> &raquo; 
          <a href='../../../_index.html'>Index (R)</a> &raquo; 
        #  <a href="../../../ActionDispatch.html" title="ActionDispatch (module)">ActionDispatch</a> &raquo; 
        #  <a href="../../Routing.html" title="ActionDispatch::Routing (module)">Routing</a> &raquo; 
        #  <a href="../Mapper.html" title="ActionDispatch::Routing::Mapper (class)">Mapper</a> &raquo; 
          <span class='title'>Resources</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../../../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='module'>

<h1>Module: ActionDispatch::Routing::Mapper::Resources</h1>

<div class="box_info">


  <dl>
    <dt>Included in:</dt>
    <dd><a href="../Mapper.html" title="ActionDispatch::Routing::Mapper (class)">ActionDispatch::Routing::Mapper</a></dd>
  </dl>

  <dl>
    <dt>Defined in:</dt>
    <dd>actionpack/lib/action_dispatch/routing/mapper.rb</dd>
  </dl>
</div>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Resource routing allows you to quickly declare all of the common routes for
a given resourceful controller. Instead of declaring separate routes for
your <code>index</code>, <code>show</code>, <code>new</code>,
<code>edit</code>, <code>create</code>, <code>update</code> and
<code>destroy</code> actions, a resourceful route declares them in a single
line of code:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:photos</span>
</code></pre>

<p>Sometimes, you have a resource that clients always look up without
referencing an ID. A common example, /profile always shows the profile of
the currently logged in user. In this case, you can use a singular resource
to map /profile (rather than /profile/:id) to the show action.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_resource'>resource</span> <span class='symbol'>:profile</span>
</code></pre>

<p>It&#39;s common to have resources that are logically children of other
resources:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:magazines</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:ads</span>
<span class='kw'>end</span>
</code></pre>

<p>You may wish to organize groups of controllers under a namespace. Most
commonly, you might group a number of administrative controllers under an
<code>admin</code> namespace. You would place these controllers under the
<code>app/controllers/admin</code> directory, and you can group them
together in your router:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_namespace'>namespace</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>admin</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:posts</span><span class='comma'>,</span> <span class='symbol'>:comments</span>
<span class='kw'>end</span>
</code></pre>

<p>By default the <code>:id</code> parameter doesn&#39;t accept dots. If you
need to use dots as part of the <code>:id</code> parameter add a constraint
which overrides this restriction, e.g:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:articles</span><span class='comma'>,</span> <span class='label'>id:</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[^\/]+</span><span class='regexp_end'>/</span></span>
</code></pre>

<p>This allows any character other than a slash as part of your
<code>:id</code>.</p>


  </div>
</div>
<div class="tags">
  
</div>
<h2>Defined Under Namespace</h2>

  <p class='children'><strong class='classes'>Classes:</strong>
    <a href="Resources/Resource.html" title="ActionDispatch::Routing::Mapper::Resources::Resource (class)">Resource</a>,
    <a href="Resources/SingletonResource.html" title="ActionDispatch::Routing::Mapper::Resources::SingletonResource (class)">SingletonResource</a>
  </p>

<h2 id='t2_cnst'>Constant Summary<small><a href="#" class="summary_toggle">collapse</a></small></h2>

  <dl class="constants summary full">
    <dt id='CANONICAL_ACTIONS-constant'>
      CANONICAL_ACTIONS =
    </dt>
    <dd>
            <pre class='code'><span class='qwords_beg'>%w(</span><span class='tstring_content'>index</span><span class='words_sep'> </span><span class='tstring_content'>create</span><span class='words_sep'> </span><span class='tstring_content'>new</span><span class='words_sep'> </span><span class='tstring_content'>show</span><span class='words_sep'> </span><span class='tstring_content'>update</span><span class='words_sep'> </span><span class='tstring_content'>destroy</span><span class='words_sep'>)</span></pre>
    </dd>
    <dt id='RESOURCE_OPTIONS-constant'>
      RESOURCE_OPTIONS =
    </dt>
    <dd>
            <pre class='code'><span class='lbracket'>[</span><span class='symbol'>:as</span><span class='comma'>,</span> <span class='symbol'>:controller</span><span class='comma'>,</span> <span class='symbol'>:path</span><span class='comma'>,</span> <span class='symbol'>:only</span><span class='comma'>,</span> <span class='symbol'>:except</span><span class='comma'>,</span> <span class='symbol'>:param</span><span class='comma'>,</span> <span class='symbol'>:concerns</span><span class='rbracket'>]</span></pre>
    </dd>
    <dt id='VALID_ON_OPTIONS-constant'>
      VALID_ON_OPTIONS =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>CANONICAL_ACTIONS holds all actions that does not need a prefix or a path
appended since they fit properly in their scope level.</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='lbracket'>[</span><span class='symbol'>:new</span><span class='comma'>,</span> <span class='symbol'>:collection</span><span class='comma'>,</span> <span class='symbol'>:member</span><span class='rbracket'>]</span></pre>
    </dd>
  </dl>





<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#collection-instance_method" title="#collection (instance method)">#<strong>collection</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>To add a route to the collection:</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#get_to_from_path-instance_method" title="#get_to_from_path (instance method)">#<strong>get_to_from_path</strong>(path, to, action)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#match-instance_method" title="#match (instance method)">#<strong>match</strong>(path, *rest)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Matches a url pattern to one or more routes.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#member-instance_method" title="#member (instance method)">#<strong>member</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>To add a member route, add a member block into the resource block:</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#namespace-instance_method" title="#namespace (instance method)">#<strong>namespace</strong>(path, options = {})  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>See <a href="../Mapper.html" title="ActionDispatch::Routing::Mapper (class)">ActionDispatch::Routing::Mapper</a>::Scoping#namespace</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#nested-instance_method" title="#nested (instance method)">#<strong>nested</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#new-instance_method" title="#new (instance method)">#<strong>new</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#resource-instance_method" title="#resource (instance method)">#<strong>resource</strong>(*resources, &amp;block)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Sometimes, you have a resource that clients always look up without
referencing an ID.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#resources-instance_method" title="#resources (instance method)">#<strong>resources</strong>(*resources, &amp;block)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>In Rails, a resourceful route provides a mapping between HTTP verbs and
URLs and controller actions.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#resources_path_names-instance_method" title="#resources_path_names (instance method)">#<strong>resources_path_names</strong>(options)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#root-instance_method" title="#root (instance method)">#<strong>root</strong>(path, options = {})  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>You can specify what Rails should route “/” to with the root method:</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#shallow-instance_method" title="#shallow (instance method)">#<strong>shallow</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#shallow%3F-instance_method" title="#shallow? (instance method)">#<strong>shallow?</strong>  &#x21d2; Boolean </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#using_match_shorthand%3F-instance_method" title="#using_match_shorthand? (instance method)">#<strong>using_match_shorthand?</strong>(path)  &#x21d2; Boolean </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
  </ul>

<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="collection-instance_method">
  <h3 class='signature first'>
  #<strong>collection</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>To add a route to the collection:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:photos</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_collection'>collection</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_get'>get</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>search</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>This will enable Rails to recognize paths such as
<code>/photos/search</code> with GET, and route to the search action of
<code>PhotosController</code>. It will also create the
<code>search_photos_url</code> and <code>search_photos_path</code> route
helpers.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


1472
1473
1474
1475
1476
1477
1478
1479
1480
1481
1482</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1472</span>

<span class='kw'>def</span> <span class='id identifier rubyid_collection'>collection</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_resource_scope?'>resource_scope?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>can&#39;t use collection outside resource(s) scope</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_with_scope_level'>with_scope_level</span><span class='lparen'>(</span><span class='symbol'>:collection</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_path_scope'>path_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent_resource'>parent_resource</span><span class='period'>.</span><span class='id identifier rubyid_collection_scope'>collection_scope</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='kw'>yield</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="get_to_from_path-instance_method">
  <h3 class='signature'>
  #<strong>get_to_from_path</strong>(path, to, action)  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


1645
1646
1647
1648
1649
1650
1651
1652
1653
1654</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1645</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_to_from_path'>get_to_from_path</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_to'>to</span><span class='comma'>,</span> <span class='id identifier rubyid_action'>action</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_to'>to</span> <span class='kw'>if</span> <span class='id identifier rubyid_to'>to</span> <span class='op'>||</span> <span class='id identifier rubyid_action'>action</span>

  <span class='id identifier rubyid_path_without_format'>path_without_format</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\(\.:format\)$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_using_match_shorthand?'>using_match_shorthand?</span><span class='lparen'>(</span><span class='id identifier rubyid_path_without_format'>path_without_format</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_path_without_format'>path_without_format</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>^/</span><span class='regexp_end'>}</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>/([^/]*)$</span><span class='regexp_end'>}</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#\1</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_tr'>tr</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="match-instance_method">
  <h3 class='signature'>
  #<strong>match</strong>(path, *rest)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Matches a url pattern to one or more routes. For more information, see <a
href="rdoc-ref:Base#match">match</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_match'>match</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>path</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>controller#action</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>via:</span> <span class='id identifier rubyid_patch'>patch</span>
<span class='id identifier rubyid_match'>match</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>path</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>to:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>controller#action</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>via:</span> <span class='symbol'>:post</span>
<span class='id identifier rubyid_match'>match</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>path</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>otherpath</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>on:</span> <span class='symbol'>:member</span><span class='comma'>,</span> <span class='label'>via:</span> <span class='symbol'>:get</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


1569
1570
1571
1572
1573
1574
1575
1576
1577
1578
1579
1580
1581
1582
1583
1584
1585
1586
1587
1588
1589
1590
1591
1592
1593
1594
1595
1596
1597
1598
1599
1600
1601
1602
1603
1604
1605
1606
1607
1608
1609
1610
1611
1612
1613
1614
1615
1616
1617
1618
1619
1620
1621
1622
1623
1624
1625
1626
1627
1628
1629
1630
1631
1632
1633
1634
1635
1636
1637
1638
1639
1640
1641
1642
1643</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1569</span>

<span class='kw'>def</span> <span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_rest'>rest</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_rest'>rest</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>&amp;&amp;</span> <span class='const'>Hash</span> <span class='op'>===</span> <span class='id identifier rubyid_path'>path</span>
    <span class='id identifier rubyid_options'>options</span>  <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span>
    <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_to'>to</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid__value'>_value</span><span class='op'>|</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span> <span class='rbrace'>}</span>

    <span class='kw'>case</span> <span class='id identifier rubyid_to'>to</span>
    <span class='kw'>when</span> <span class='const'>Symbol</span>
      <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:action</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_to'>to</span>
    <span class='kw'>when</span> <span class='const'>String</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_to'>to</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>#</span><span class='regexp_end'>/</span></span>
        <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:to</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_to'>to</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:controller</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_to'>to</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:to</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_to'>to</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_paths'>paths</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_path'>path</span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_rest'>rest</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_paths'>paths</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_path'>path</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_rest'>rest</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:on</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='const'>VALID_ON_OPTIONS</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:on</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unknown scope </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_on'>on</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> given to :on</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='ivar'>@scope</span><span class='lbracket'>[</span><span class='symbol'>:to</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:to</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='ivar'>@scope</span><span class='lbracket'>[</span><span class='symbol'>:to</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='ivar'>@scope</span><span class='lbracket'>[</span><span class='symbol'>:controller</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@scope</span><span class='lbracket'>[</span><span class='symbol'>:action</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:to</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@scope</span><span class='lbracket'>[</span><span class='symbol'>:controller</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>#</span><span class='embexpr_beg'>#{</span><span class='ivar'>@scope</span><span class='lbracket'>[</span><span class='symbol'>:action</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_controller'>controller</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:controller</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='ivar'>@scope</span><span class='lbracket'>[</span><span class='symbol'>:controller</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_option_path'>option_path</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='symbol'>:path</span>
  <span class='id identifier rubyid_to'>to</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='symbol'>:to</span>
  <span class='id identifier rubyid_via'>via</span> <span class='op'>=</span> <span class='const'>Mapping</span><span class='period'>.</span><span class='id identifier rubyid_check_via'>check_via</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:via</span><span class='rparen'>)</span> <span class='lbrace'>{</span>
    <span class='ivar'>@scope</span><span class='lbracket'>[</span><span class='symbol'>:via</span><span class='rbracket'>]</span>
  <span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_formatted'>formatted</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:format</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='ivar'>@scope</span><span class='lbracket'>[</span><span class='symbol'>:format</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_anchor'>anchor</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:anchor</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='kw'>true</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_options_constraints'>options_constraints</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:constraints</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='id identifier rubyid_path_types'>path_types</span> <span class='op'>=</span> <span class='id identifier rubyid_paths'>paths</span><span class='period'>.</span><span class='id identifier rubyid_group_by'>group_by</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:class</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_path_types'>path_types</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='const'>String</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid__path'>_path</span><span class='op'>|</span>
    <span class='id identifier rubyid_route_options'>route_options</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
    <span class='kw'>if</span> <span class='id identifier rubyid__path'>_path</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_option_path'>option_path</span>
      <span class='const'>ActiveSupport</span><span class='op'>::</span><span class='const'>Deprecation</span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='heredoc_beg'>&lt;&lt;-eowarn</span>
<span class='tstring_content'>Specifying strings for both :path and the route path is deprecated. Change things like this:

  match </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid__path'>_path</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>, :path =&gt; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_option_path'>option_path</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>

to this:

  match </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_option_path'>option_path</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>, :as =&gt; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid__path'>_path</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>, :action =&gt; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>
</span><span class='heredoc_end'>      eowarn
</span>      <span class='id identifier rubyid_route_options'>route_options</span><span class='lbracket'>[</span><span class='symbol'>:action</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid__path'>_path</span>
      <span class='id identifier rubyid_route_options'>route_options</span><span class='lbracket'>[</span><span class='symbol'>:as</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid__path'>_path</span>
      <span class='id identifier rubyid__path'>_path</span> <span class='op'>=</span> <span class='id identifier rubyid_option_path'>option_path</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_to'>to</span> <span class='op'>=</span> <span class='id identifier rubyid_get_to_from_path'>get_to_from_path</span><span class='lparen'>(</span><span class='id identifier rubyid__path'>_path</span><span class='comma'>,</span> <span class='id identifier rubyid_to'>to</span><span class='comma'>,</span> <span class='id identifier rubyid_route_options'>route_options</span><span class='lbracket'>[</span><span class='symbol'>:action</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_decomposed_match'>decomposed_match</span><span class='lparen'>(</span><span class='id identifier rubyid__path'>_path</span><span class='comma'>,</span> <span class='id identifier rubyid_controller'>controller</span><span class='comma'>,</span> <span class='id identifier rubyid_route_options'>route_options</span><span class='comma'>,</span> <span class='id identifier rubyid__path'>_path</span><span class='comma'>,</span> <span class='id identifier rubyid_to'>to</span><span class='comma'>,</span> <span class='id identifier rubyid_via'>via</span><span class='comma'>,</span> <span class='id identifier rubyid_formatted'>formatted</span><span class='comma'>,</span> <span class='id identifier rubyid_anchor'>anchor</span><span class='comma'>,</span> <span class='id identifier rubyid_options_constraints'>options_constraints</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_path_types'>path_types</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='const'>Symbol</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_action'>action</span><span class='op'>|</span>
    <span class='id identifier rubyid_route_options'>route_options</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
    <span class='id identifier rubyid_decomposed_match'>decomposed_match</span><span class='lparen'>(</span><span class='id identifier rubyid_action'>action</span><span class='comma'>,</span> <span class='id identifier rubyid_controller'>controller</span><span class='comma'>,</span> <span class='id identifier rubyid_route_options'>route_options</span><span class='comma'>,</span> <span class='id identifier rubyid_option_path'>option_path</span><span class='comma'>,</span> <span class='id identifier rubyid_to'>to</span><span class='comma'>,</span> <span class='id identifier rubyid_via'>via</span><span class='comma'>,</span> <span class='id identifier rubyid_formatted'>formatted</span><span class='comma'>,</span> <span class='id identifier rubyid_anchor'>anchor</span><span class='comma'>,</span> <span class='id identifier rubyid_options_constraints'>options_constraints</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="member-instance_method">
  <h3 class='signature'>
  #<strong>member</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>To add a member route, add a member block into the resource block:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:photos</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_member'>member</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_get'>get</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>preview</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>This will recognize <code>/photos/1/preview</code> with GET, and route to
the preview action of <code>PhotosController</code>. It will also create
the <code>preview_photo_url</code> and <code>preview_photo_path</code>
helpers.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


1495
1496
1497
1498
1499
1500
1501
1502
1503
1504
1505
1506
1507
1508
1509</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1495</span>

<span class='kw'>def</span> <span class='id identifier rubyid_member'>member</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_resource_scope?'>resource_scope?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>can&#39;t use member outside resource(s) scope</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_with_scope_level'>with_scope_level</span><span class='lparen'>(</span><span class='symbol'>:member</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_shallow?'>shallow?</span>
      <span class='id identifier rubyid_shallow_scope'>shallow_scope</span> <span class='lbrace'>{</span>
        <span class='id identifier rubyid_path_scope'>path_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent_resource'>parent_resource</span><span class='period'>.</span><span class='id identifier rubyid_member_scope'>member_scope</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='kw'>yield</span> <span class='rbrace'>}</span>
      <span class='rbrace'>}</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_path_scope'>path_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent_resource'>parent_resource</span><span class='period'>.</span><span class='id identifier rubyid_member_scope'>member_scope</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='kw'>yield</span> <span class='rbrace'>}</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="namespace-instance_method">
  <h3 class='signature'>
  #<strong>namespace</strong>(path, options = {})  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>See <a href="../Mapper.html" title="ActionDispatch::Routing::Mapper (class)">ActionDispatch::Routing::Mapper</a>::Scoping#namespace</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


1544
1545
1546
1547
1548
1549
1550</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1544</span>

<span class='kw'>def</span> <span class='id identifier rubyid_namespace'>namespace</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_resource_scope?'>resource_scope?</span>
    <span class='id identifier rubyid_nested'>nested</span> <span class='lbrace'>{</span> <span class='kw'>super</span> <span class='rbrace'>}</span>
  <span class='kw'>else</span>
    <span class='kw'>super</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="nested-instance_method">
  <h3 class='signature'>
  #<strong>nested</strong>  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


1523
1524
1525
1526
1527
1528
1529
1530
1531
1532
1533
1534
1535
1536
1537
1538
1539
1540
1541</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1523</span>

<span class='kw'>def</span> <span class='id identifier rubyid_nested'>nested</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_resource_scope?'>resource_scope?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>can&#39;t use nested outside resource(s) scope</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_with_scope_level'>with_scope_level</span><span class='lparen'>(</span><span class='symbol'>:nested</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_shallow?'>shallow?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_shallow_nesting_depth'>shallow_nesting_depth</span> <span class='op'>&gt;=</span> <span class='int'>1</span>
      <span class='id identifier rubyid_shallow_scope'>shallow_scope</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_path_scope'>path_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent_resource'>parent_resource</span><span class='period'>.</span><span class='id identifier rubyid_nested_scope'>nested_scope</span><span class='rparen'>)</span> <span class='kw'>do</span>
          <span class='id identifier rubyid_scope'>scope</span><span class='lparen'>(</span><span class='id identifier rubyid_nested_options'>nested_options</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='kw'>yield</span> <span class='rbrace'>}</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_path_scope'>path_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent_resource'>parent_resource</span><span class='period'>.</span><span class='id identifier rubyid_nested_scope'>nested_scope</span><span class='rparen'>)</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_scope'>scope</span><span class='lparen'>(</span><span class='id identifier rubyid_nested_options'>nested_options</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='kw'>yield</span> <span class='rbrace'>}</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="new-instance_method">
  <h3 class='signature'>
  #<strong>new</strong>  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


1511
1512
1513
1514
1515
1516
1517
1518
1519
1520
1521</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1511</span>

<span class='kw'>def</span> <span class='id identifier rubyid_new'>new</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_resource_scope?'>resource_scope?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>can&#39;t use new outside resource(s) scope</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_with_scope_level'>with_scope_level</span><span class='lparen'>(</span><span class='symbol'>:new</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_path_scope'>path_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent_resource'>parent_resource</span><span class='period'>.</span><span class='id identifier rubyid_new_scope'>new_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_action_path'>action_path</span><span class='lparen'>(</span><span class='symbol'>:new</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='kw'>yield</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="resource-instance_method">
  <h3 class='signature'>
  #<strong>resource</strong>(*resources, &amp;block)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Sometimes, you have a resource that clients always look up without
referencing an ID. A common example, /profile always shows the profile of
the currently logged in user. In this case, you can use a singular resource
to map /profile (rather than /profile/:id) to the show action:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_resource'>resource</span> <span class='symbol'>:profile</span>
</code></pre>

<p>creates six different routes in your application, all mapping to the
<code>Profiles</code> controller (note that the controller is named after
the plural):</p>

<pre class="code ruby"><code class="ruby">GET       /profile/new
POST      /profile
GET       /profile
GET       /profile/edit
PATCH/PUT /profile
DELETE    /profile</code></pre>

<h3 id="label-Options">Options</h3>

<p>Takes same options as <code>resources</code>.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


1269
1270
1271
1272
1273
1274
1275
1276
1277
1278
1279
1280
1281
1282
1283
1284
1285
1286
1287
1288
1289
1290
1291
1292
1293
1294
1295
1296</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1269</span>

<span class='kw'>def</span> <span class='id identifier rubyid_resource'>resource</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_resources'>resources</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_resources'>resources</span><span class='period'>.</span><span class='id identifier rubyid_extract_options!'>extract_options!</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_apply_common_behavior_for'>apply_common_behavior_for</span><span class='lparen'>(</span><span class='symbol'>:resource</span><span class='comma'>,</span> <span class='id identifier rubyid_resources'>resources</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>self</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_with_scope_level'>with_scope_level</span><span class='lparen'>(</span><span class='symbol'>:resource</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_apply_action_options'>apply_action_options</span> <span class='id identifier rubyid_options'>options</span>
    <span class='id identifier rubyid_resource_scope'>resource_scope</span><span class='lparen'>(</span><span class='const'>SingletonResource</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_resources'>resources</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span><span class='comma'>,</span> <span class='id identifier rubyid_api_only?'>api_only?</span><span class='comma'>,</span> <span class='ivar'>@scope</span><span class='lbracket'>[</span><span class='symbol'>:shallow</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='kw'>yield</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>

      <span class='id identifier rubyid_concerns'>concerns</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:concerns</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:concerns</span><span class='rbracket'>]</span>

      <span class='id identifier rubyid_collection'>collection</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_post'>post</span> <span class='symbol'>:create</span>
      <span class='kw'>end</span> <span class='kw'>if</span> <span class='id identifier rubyid_parent_resource'>parent_resource</span><span class='period'>.</span><span class='id identifier rubyid_actions'>actions</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='symbol'>:create</span><span class='rparen'>)</span>

      <span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_get'>get</span> <span class='symbol'>:new</span>
      <span class='kw'>end</span> <span class='kw'>if</span> <span class='id identifier rubyid_parent_resource'>parent_resource</span><span class='period'>.</span><span class='id identifier rubyid_actions'>actions</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='symbol'>:new</span><span class='rparen'>)</span>

      <span class='id identifier rubyid_set_member_mappings_for_resource'>set_member_mappings_for_resource</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="resources-instance_method">
  <h3 class='signature'>
  #<strong>resources</strong>(*resources, &amp;block)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>In Rails, a resourceful route provides a mapping between HTTP verbs and
URLs and controller actions. By convention, each action also maps to
particular CRUD operations in a database. A single entry in the routing
file, such as</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:photos</span>
</code></pre>

<p>creates seven different routes in your application, all mapping to the
<code>Photos</code> controller:</p>

<pre class="code ruby"><code class="ruby">GET       /photos
GET       /photos/new
POST      /photos
GET       /photos/:id
GET       /photos/:id/edit
PATCH/PUT /photos/:id
DELETE    /photos/:id</code></pre>

<p>Resources can also be nested infinitely by using this block syntax:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:photos</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:comments</span>
<span class='kw'>end</span>
</code></pre>

<p>This generates the following comments routes:</p>

<pre class="code ruby"><code class="ruby">GET       /photos/:photo_id/comments
GET       /photos/:photo_id/comments/new
POST      /photos/:photo_id/comments
GET       /photos/:photo_id/comments/:id
GET       /photos/:photo_id/comments/:id/edit
PATCH/PUT /photos/:photo_id/comments/:id
DELETE    /photos/:photo_id/comments/:id</code></pre>

<h3 id="label-Options">Options</h3>

<p>Takes same options as <code>Base#match</code> as well as:</p>
<dl class="rdoc-list label-list"><dt>:path_names
<dd>
<p>Allows you to change the segment component of the <code>edit</code> and
<code>new</code> actions. Actions not specified are not changed.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:posts</span><span class='comma'>,</span> <span class='label'>path_names:</span> <span class='lbrace'>{</span> <span class='label'>new:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>brand_new</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
</code></pre>

<p>The above example will now change /posts/new to /posts/brand_new</p>
</dd><dt>:path
<dd>
<p>Allows you to change the path prefix for the resource.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:posts</span><span class='comma'>,</span> <span class='label'>path:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>postings</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>The resource and all segments will now route to /postings instead of /posts</p>
</dd><dt>:only
<dd>
<p>Only generate routes for the given actions.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:cows</span><span class='comma'>,</span> <span class='label'>only:</span> <span class='symbol'>:show</span>
<span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:cows</span><span class='comma'>,</span> <span class='label'>only:</span> <span class='lbracket'>[</span><span class='symbol'>:show</span><span class='comma'>,</span> <span class='symbol'>:index</span><span class='rbracket'>]</span>
</code></pre>
</dd><dt>:except
<dd>
<p>Generate all routes except for the given actions.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:cows</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='symbol'>:show</span>
<span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:cows</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='lbracket'>[</span><span class='symbol'>:show</span><span class='comma'>,</span> <span class='symbol'>:index</span><span class='rbracket'>]</span>
</code></pre>
</dd><dt>:shallow
<dd>
<p>Generates shallow routes for nested resource(s). When placed on a parent
resource, generates shallow routes for all nested resources.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:posts</span><span class='comma'>,</span> <span class='label'>shallow:</span> <span class='kw'>true</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:comments</span>
<span class='kw'>end</span>
</code></pre>

<p>Is the same as:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:posts</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:comments</span><span class='comma'>,</span> <span class='label'>except:</span> <span class='lbracket'>[</span><span class='symbol'>:show</span><span class='comma'>,</span> <span class='symbol'>:edit</span><span class='comma'>,</span> <span class='symbol'>:update</span><span class='comma'>,</span> <span class='symbol'>:destroy</span><span class='rbracket'>]</span>
<span class='kw'>end</span>
<span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:comments</span><span class='comma'>,</span> <span class='label'>only:</span> <span class='lbracket'>[</span><span class='symbol'>:show</span><span class='comma'>,</span> <span class='symbol'>:edit</span><span class='comma'>,</span> <span class='symbol'>:update</span><span class='comma'>,</span> <span class='symbol'>:destroy</span><span class='rbracket'>]</span>
</code></pre>

<p>This allows URLs for resources that otherwise would be deeply nested such
as a comment on a blog post like
<code>/posts/a-long-permalink/comments/1234</code> to be shortened to just
<code>/comments/1234</code>.</p>
</dd><dt>:shallow_path
<dd>
<p>Prefixes nested shallow routes with the specified path.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scope'>scope</span> <span class='label'>shallow_path:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sekret</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:posts</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:comments</span><span class='comma'>,</span> <span class='label'>shallow:</span> <span class='kw'>true</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>The <code>comments</code> resource here will have the following routes
generated for it:</p>

<pre class="code ruby"><code class="ruby">post_comments    GET       /posts/:post_id/comments(.:format)
post_comments    POST      /posts/:post_id/comments(.:format)
new_post_comment GET       /posts/:post_id/comments/new(.:format)
edit_comment     GET       /sekret/comments/:id/edit(.:format)
comment          GET       /sekret/comments/:id(.:format)
comment          PATCH/PUT /sekret/comments/:id(.:format)
comment          DELETE    /sekret/comments/:id(.:format)</code></pre>
</dd><dt>:shallow_prefix
<dd>
<p>Prefixes nested shallow route names with specified prefix.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scope'>scope</span> <span class='label'>shallow_prefix:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sekret</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:posts</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:comments</span><span class='comma'>,</span> <span class='label'>shallow:</span> <span class='kw'>true</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>The <code>comments</code> resource here will have the following routes
generated for it:</p>

<pre class="code ruby"><code class="ruby">post_comments           GET       /posts/:post_id/comments(.:format)
post_comments           POST      /posts/:post_id/comments(.:format)
new_post_comment        GET       /posts/:post_id/comments/new(.:format)
edit_sekret_comment     GET       /comments/:id/edit(.:format)
sekret_comment          GET       /comments/:id(.:format)
sekret_comment          PATCH/PUT /comments/:id(.:format)
sekret_comment          DELETE    /comments/:id(.:format)</code></pre>
</dd><dt>:format
<dd>
<p>Allows you to specify the default value for optional <code>format</code>
segment or disable it by supplying <code>false</code>.</p>
</dd></dl>

<h3 id="label-Examples">Examples</h3>

<pre class="code ruby"><code class="ruby"><span class='comment'># routes call &lt;tt&gt;Admin::PostsController&lt;/tt&gt;
</span><span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:posts</span><span class='comma'>,</span> <span class='label'>module:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>admin</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># resource actions are at /admin/posts.
</span><span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:posts</span><span class='comma'>,</span> <span class='label'>path:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>admin/posts</span><span class='tstring_end'>&quot;</span></span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


1430
1431
1432
1433
1434
1435
1436
1437
1438
1439
1440
1441
1442
1443
1444
1445
1446
1447
1448
1449
1450
1451
1452
1453
1454
1455
1456
1457
1458</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1430</span>

<span class='kw'>def</span> <span class='id identifier rubyid_resources'>resources</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_resources'>resources</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_resources'>resources</span><span class='period'>.</span><span class='id identifier rubyid_extract_options!'>extract_options!</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_apply_common_behavior_for'>apply_common_behavior_for</span><span class='lparen'>(</span><span class='symbol'>:resources</span><span class='comma'>,</span> <span class='id identifier rubyid_resources'>resources</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>self</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_with_scope_level'>with_scope_level</span><span class='lparen'>(</span><span class='symbol'>:resources</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_apply_action_options'>apply_action_options</span> <span class='id identifier rubyid_options'>options</span>
    <span class='id identifier rubyid_resource_scope'>resource_scope</span><span class='lparen'>(</span><span class='const'>Resource</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_resources'>resources</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span><span class='comma'>,</span> <span class='id identifier rubyid_api_only?'>api_only?</span><span class='comma'>,</span> <span class='ivar'>@scope</span><span class='lbracket'>[</span><span class='symbol'>:shallow</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='kw'>yield</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>

      <span class='id identifier rubyid_concerns'>concerns</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:concerns</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:concerns</span><span class='rbracket'>]</span>

      <span class='id identifier rubyid_collection'>collection</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_get'>get</span>  <span class='symbol'>:index</span> <span class='kw'>if</span> <span class='id identifier rubyid_parent_resource'>parent_resource</span><span class='period'>.</span><span class='id identifier rubyid_actions'>actions</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='symbol'>:index</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_post'>post</span> <span class='symbol'>:create</span> <span class='kw'>if</span> <span class='id identifier rubyid_parent_resource'>parent_resource</span><span class='period'>.</span><span class='id identifier rubyid_actions'>actions</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='symbol'>:create</span><span class='rparen'>)</span>
      <span class='kw'>end</span>

      <span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_get'>get</span> <span class='symbol'>:new</span>
      <span class='kw'>end</span> <span class='kw'>if</span> <span class='id identifier rubyid_parent_resource'>parent_resource</span><span class='period'>.</span><span class='id identifier rubyid_actions'>actions</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='symbol'>:new</span><span class='rparen'>)</span>

      <span class='id identifier rubyid_set_member_mappings_for_resource'>set_member_mappings_for_resource</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="resources_path_names-instance_method">
  <h3 class='signature'>
  #<strong>resources_path_names</strong>(options)  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


1244
1245
1246</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1244</span>

<span class='kw'>def</span> <span class='id identifier rubyid_resources_path_names'>resources_path_names</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='ivar'>@scope</span><span class='lbracket'>[</span><span class='symbol'>:path_names</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="root-instance_method">
  <h3 class='signature'>
  #<strong>root</strong>(path, options = {})  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>You can specify what Rails should route “/” to with the root method:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_root'>root</span> <span class='label'>to:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pages#main</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>For options, see <code>match</code>, as <code>root</code> uses it
internally.</p>

<p>You can also pass a string which will expand</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_root'>root</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pages#main</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>You should put the root route at the top of <code>config/routes.rb</code>,
because this means it will be matched first. As this is the most popular
route of most Rails applications, this is beneficial.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


1715
1716
1717
1718
1719
1720
1721
1722
1723
1724
1725
1726
1727
1728
1729
1730
1731
1732
1733</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1715</span>

<span class='kw'>def</span> <span class='id identifier rubyid_root'>root</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:to</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span> <span class='kw'>and</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>must be called with a path and/or options</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='ivar'>@scope</span><span class='period'>.</span><span class='id identifier rubyid_resources?'>resources?</span>
    <span class='id identifier rubyid_with_scope_level'>with_scope_level</span><span class='lparen'>(</span><span class='symbol'>:root</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_path_scope'>path_scope</span><span class='lparen'>(</span><span class='id identifier rubyid_parent_resource'>parent_resource</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_match_root_route'>match_root_route</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_match_root_route'>match_root_route</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="shallow-instance_method">
  <h3 class='signature'>
  #<strong>shallow</strong>  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


1552
1553
1554
1555
1556
1557</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1552</span>

<span class='kw'>def</span> <span class='id identifier rubyid_shallow'>shallow</span>
  <span class='ivar'>@scope</span> <span class='op'>=</span> <span class='ivar'>@scope</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>shallow:</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>yield</span>
<span class='kw'>ensure</span>
  <span class='ivar'>@scope</span> <span class='op'>=</span> <span class='ivar'>@scope</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="shallow?-instance_method">
  <h3 class='signature'>
  #<strong>shallow?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


1559
1560
1561</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1559</span>

<span class='kw'>def</span> <span class='id identifier rubyid_shallow?'>shallow?</span>
  <span class='op'>!</span><span class='id identifier rubyid_parent_resource'>parent_resource</span><span class='period'>.</span><span class='id identifier rubyid_singleton?'>singleton?</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@scope</span><span class='lbracket'>[</span><span class='symbol'>:shallow</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="using_match_shorthand?-instance_method">
  <h3 class='signature'>
  #<strong>using_match_shorthand?</strong>(path)  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


1656
1657
1658</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'actionpack/lib/action_dispatch/routing/mapper.rb', line 1656</span>

<span class='kw'>def</span> <span class='id identifier rubyid_using_match_shorthand?'>using_match_shorthand?</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>^/?[-\w]/[-\w/]$</span><span class='regexp_end'>}</span></span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>
<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.8.7.6 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>