<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: ActionCable::Connection::Base &mdash; Rails-5.0.0</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "ActionCable::Connection::Base",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../../index.html'>Home</a> &raquo; 
          <a href='../../index.html'>Rails-5.0.0</a> &raquo; 
          <a href='../../_index.html'>Index (B)</a> &raquo; 
          <a href="../../ActionCable.html" title="ActionCable (module)">ActionCable</a> &raquo; 
          <a href="../Connection.html" title="ActionCable::Connection (module)">Connection</a> &raquo; 
          <span class='title'>Base</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: ActionCable::Connection::Base</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>
  <tr>
    <td class='box_1'>Inherits:</td>
    <td class='box_rel'>
      <span class='inheritName'><a href="../../Object.html" title="Object (class)">Object</a></span>
      <ul class='fullTree'>
        <li><a href="../../Object.html" title="Object (class)">Object</a></li>
        <li class='next'>ActionCable::Connection::Base</li>
      </ul>
      <a href='#' class='inheritanceTree'>show all</a>
    </td>
  </tr>


  <tr>
    <td class='box_1'>Includes:</td>
    <td><a href="Authorization.html" title="ActionCable::Connection::Authorization (module)">Authorization</a>, <a href="Identification.html" title="ActionCable::Connection::Identification (module)">Identification</a>, <a href="InternalChannel.html" title="ActionCable::Connection::InternalChannel (module)">InternalChannel</a>
    </td>
  </tr>



  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_min'>
actioncable/lib/action_cable/connection/base.rb</div>  </td>
  </tr>
</table>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>For every WebSocket the Action Cable server accepts, a Connection object
will be instantiated. This instance becomes the parent of all of the
channel subscriptions that are created from there on. Incoming messages are
then routed to these channel subscriptions based on an identifier sent by
the Action Cable consumer. The Connection itself does not deal with any
specific application logic beyond authentication and authorization.</p>

<p>Here&#39;s a basic example:</p>

<pre class="code ruby"><code class="ruby">module ApplicationCable
  class Connection &lt; ActionCable::Connection::Base
    identified_by :current_user

    def connect
      self.current_user = find_verified_user
      logger.add_tags current_user.name
    end

    def disconnect
      # Any cleanup work needed when the cable connection is cut.
    end

    protected
      def find_verified_user
        if current_user = User.find_by_identity cookies.signed[:identity_id]
          current_user
        else
          reject_unauthorized_connection
        end
      end
  end
end</code></pre>

<p>First, we declare that this connection can be identified by its
current_user. This allows us to later be able to find all connections
established for that current_user (and potentially disconnect them). You
can declare as many identification indexes as you like. Declaring an
identification means that an attr_accessor is automatically set for that
key.</p>

<p>Second, we rely on the fact that the WebSocket connection is established
with the cookies from the domain being sent along. This makes it easy to
use signed cookies that were set when logging in via a web interface to
authorize the WebSocket connection.</p>

<p>Finally, we add a tag to the connection-specific logger with the name of
the current user to easily distinguish their messages in the log.</p>

<p>Pretty simple, eh?</p>


  </div>
</div>
<div class="tags">
  
</div>


<h2>Instance Attribute Summary <small><a href='#' class='summary_toggle'>collapse</a></small></h2>

  <ul class="summary">
    <li>
      <span class="summary_signature">
        <a href="#env-instance_method" title="#env (instance method)">#<strong>env</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#logger-instance_method" title="#logger (instance method)">#<strong>logger</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#protocol-instance_method" title="#protocol (instance method)">#<strong>protocol</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#server-instance_method" title="#server (instance method)">#<strong>server</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#subscriptions-instance_method" title="#subscriptions (instance method)">#<strong>subscriptions</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#worker_pool-instance_method" title="#worker_pool (instance method)">#<strong>worker_pool</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
  </ul>


<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(server, env, coder: ActiveSupport::JSON)  &#x21d2; Base </a>
      </span>
      <span class='note title constructor'>constructor</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>a new instance of Base</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#beat-instance_method" title="#beat (instance method)">#<strong>beat</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#close-instance_method" title="#close (instance method)">#<strong>close</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Close the WebSocket connection.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#process-instance_method" title="#process (instance method)">#<strong>process</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Called by the server when a new WebSocket connection is established.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#receive-instance_method" title="#receive (instance method)">#<strong>receive</strong>(websocket_message)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Decodes WebSocket messages and dispatches them to subscribed channels.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#send_async-instance_method" title="#send_async (instance method)">#<strong>send_async</strong>(method, *arguments)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Invoke a method on the connection asynchronously through the pool of thread
workers.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#statistics-instance_method" title="#statistics (instance method)">#<strong>statistics</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Return a basic hash of statistics for the connection keyed with
<code>identifier</code>, <code>started_at</code>, and
<code>subscriptions</code>.</p>
</div>
      </span>
    </li>
  </ul>



  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <a href="../../ActiveSupport/Concern.html" title="ActiveSupport::Concern (module)">ActiveSupport::Concern</a></h3>
  <p class="inherited"><a href="../../ActiveSupport/Concern.html#append_features-instance_method" title="ActiveSupport::Concern#append_features (method)">#append_features</a>, <a href="../../ActiveSupport/Concern.html#class_methods-instance_method" title="ActiveSupport::Concern#class_methods (method)">#class_methods</a>, <a href="../../ActiveSupport/Concern.html#extended-class_method" title="ActiveSupport::Concern.extended (method)">.extended</a>, <a href="../../ActiveSupport/Concern.html#included-instance_method" title="ActiveSupport::Concern#included (method)">#included</a></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <a href="Identification.html" title="ActionCable::Connection::Identification (module)">Identification</a></h3>
  <p class="inherited"><a href="Identification.html#connection_identifier-instance_method" title="ActionCable::Connection::Identification#connection_identifier (method)">#connection_identifier</a></p>
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>
  <section class='method_details first' id="new-class_method">
  <h3 class='signature first'>
  .<strong>new</strong>(server, env, coder: ActiveSupport::JSON)  &#x21d2; <tt><a href="" title="ActionCable::Connection::Base (class)">Base</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>a new instance of Base</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


54
55
56
57
58
59
60
61
62
63
64
65
66</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 54</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_server'>server</span><span class='comma'>,</span> <span class='id identifier rubyid_env'>env</span><span class='comma'>,</span> <span class='label'>coder:</span> <span class='const'>ActiveSupport</span><span class='op'>::</span><span class='const'>JSON</span><span class='rparen'>)</span>
  <span class='ivar'>@server</span><span class='comma'>,</span> <span class='ivar'>@env</span><span class='comma'>,</span> <span class='ivar'>@coder</span> <span class='op'>=</span> <span class='id identifier rubyid_server'>server</span><span class='comma'>,</span> <span class='id identifier rubyid_env'>env</span><span class='comma'>,</span> <span class='id identifier rubyid_coder'>coder</span>

  <span class='ivar'>@worker_pool</span> <span class='op'>=</span> <span class='id identifier rubyid_server'>server</span><span class='period'>.</span><span class='id identifier rubyid_worker_pool'>worker_pool</span>
  <span class='ivar'>@logger</span> <span class='op'>=</span> <span class='id identifier rubyid_new_tagged_logger'>new_tagged_logger</span>

  <span class='ivar'>@websocket</span>      <span class='op'>=</span> <span class='const'>ActionCable</span><span class='op'>::</span><span class='const'>Connection</span><span class='op'>::</span><span class='const'>WebSocket</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_env'>env</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_event_loop'>event_loop</span><span class='comma'>,</span> <span class='id identifier rubyid_server'>server</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_client_socket_class'>client_socket_class</span><span class='rparen'>)</span>
  <span class='ivar'>@subscriptions</span>  <span class='op'>=</span> <span class='const'>ActionCable</span><span class='op'>::</span><span class='const'>Connection</span><span class='op'>::</span><span class='const'>Subscriptions</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
  <span class='ivar'>@message_buffer</span> <span class='op'>=</span> <span class='const'>ActionCable</span><span class='op'>::</span><span class='const'>Connection</span><span class='op'>::</span><span class='const'>MessageBuffer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>

  <span class='ivar'>@_internal_subscriptions</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@started_at</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Attribute Details</h2>
  <section class='method_details first' id="env-instance_method">
  <h3 class='signature first'>
  #<strong>env</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


51</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 51</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:server</span><span class='comma'>,</span> <span class='symbol'>:env</span><span class='comma'>,</span> <span class='symbol'>:subscriptions</span><span class='comma'>,</span> <span class='symbol'>:logger</span><span class='comma'>,</span> <span class='symbol'>:worker_pool</span><span class='comma'>,</span> <span class='symbol'>:protocol</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="logger-instance_method">
  <h3 class='signature'>
  #<strong>logger</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


51</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 51</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:server</span><span class='comma'>,</span> <span class='symbol'>:env</span><span class='comma'>,</span> <span class='symbol'>:subscriptions</span><span class='comma'>,</span> <span class='symbol'>:logger</span><span class='comma'>,</span> <span class='symbol'>:worker_pool</span><span class='comma'>,</span> <span class='symbol'>:protocol</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="protocol-instance_method">
  <h3 class='signature'>
  #<strong>protocol</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


51</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 51</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:server</span><span class='comma'>,</span> <span class='symbol'>:env</span><span class='comma'>,</span> <span class='symbol'>:subscriptions</span><span class='comma'>,</span> <span class='symbol'>:logger</span><span class='comma'>,</span> <span class='symbol'>:worker_pool</span><span class='comma'>,</span> <span class='symbol'>:protocol</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="server-instance_method">
  <h3 class='signature'>
  #<strong>server</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


51</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 51</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:server</span><span class='comma'>,</span> <span class='symbol'>:env</span><span class='comma'>,</span> <span class='symbol'>:subscriptions</span><span class='comma'>,</span> <span class='symbol'>:logger</span><span class='comma'>,</span> <span class='symbol'>:worker_pool</span><span class='comma'>,</span> <span class='symbol'>:protocol</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="subscriptions-instance_method">
  <h3 class='signature'>
  #<strong>subscriptions</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


51</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 51</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:server</span><span class='comma'>,</span> <span class='symbol'>:env</span><span class='comma'>,</span> <span class='symbol'>:subscriptions</span><span class='comma'>,</span> <span class='symbol'>:logger</span><span class='comma'>,</span> <span class='symbol'>:worker_pool</span><span class='comma'>,</span> <span class='symbol'>:protocol</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="worker_pool-instance_method">
  <h3 class='signature'>
  #<strong>worker_pool</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


51</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 51</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:server</span><span class='comma'>,</span> <span class='symbol'>:env</span><span class='comma'>,</span> <span class='symbol'>:subscriptions</span><span class='comma'>,</span> <span class='symbol'>:logger</span><span class='comma'>,</span> <span class='symbol'>:worker_pool</span><span class='comma'>,</span> <span class='symbol'>:protocol</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="beat-instance_method">
  <h3 class='signature first'>
  #<strong>beat</strong>  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


119
120
121</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 119</span>

<span class='kw'>def</span> <span class='id identifier rubyid_beat'>beat</span>
  <span class='id identifier rubyid_transmit'>transmit</span> <span class='label'>type:</span> <span class='const'>ActionCable</span><span class='op'>::</span><span class='const'>INTERNAL</span><span class='lbracket'>[</span><span class='symbol'>:message_types</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:ping</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>message:</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="close-instance_method">
  <h3 class='signature'>
  #<strong>close</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Close the WebSocket connection.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


99
100
101</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 99</span>

<span class='kw'>def</span> <span class='id identifier rubyid_close'>close</span>
  <span class='id identifier rubyid_websocket'>websocket</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="process-instance_method">
  <h3 class='signature'>
  #<strong>process</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Called by the server when a new WebSocket connection is established. This
configures the callbacks intended for overwriting by the user. This method
should not be called directly – instead rely upon on the <code>#connect</code> (and
<code>#disconnect</code>) callbacks.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


70
71
72
73
74
75
76
77
78</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 70</span>

<span class='kw'>def</span> <span class='id identifier rubyid_process'>process</span> <span class='comment'>#:nodoc:
</span>  <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='id identifier rubyid_started_request_message'>started_request_message</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_websocket'>websocket</span><span class='period'>.</span><span class='id identifier rubyid_possible?'>possible?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_allow_request_origin?'>allow_request_origin?</span>
    <span class='id identifier rubyid_respond_to_successful_request'>respond_to_successful_request</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_respond_to_invalid_request'>respond_to_invalid_request</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="receive-instance_method">
  <h3 class='signature'>
  #<strong>receive</strong>(websocket_message)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Decodes WebSocket messages and dispatches them to subscribed channels.
WebSocket message transfer encoding is always JSON.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


82
83
84</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 82</span>

<span class='kw'>def</span> <span class='id identifier rubyid_receive'>receive</span><span class='lparen'>(</span><span class='id identifier rubyid_websocket_message'>websocket_message</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='id identifier rubyid_send_async'>send_async</span> <span class='symbol'>:dispatch_websocket_message</span><span class='comma'>,</span> <span class='id identifier rubyid_websocket_message'>websocket_message</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="send_async-instance_method">
  <h3 class='signature'>
  #<strong>send_async</strong>(method, *arguments)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Invoke a method on the connection asynchronously through the pool of thread
workers.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


104
105
106</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 104</span>

<span class='kw'>def</span> <span class='id identifier rubyid_send_async'>send_async</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_worker_pool'>worker_pool</span><span class='period'>.</span><span class='id identifier rubyid_async_invoke'>async_invoke</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="statistics-instance_method">
  <h3 class='signature'>
  #<strong>statistics</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Return a basic hash of statistics for the connection keyed with
<code>identifier</code>, <code>started_at</code>, and
<code>subscriptions</code>. This can be returned by a health check against
the connection.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


110
111
112
113
114
115
116
117</pre>
  <div class='lines_code'>
<pre class='code ruby'
<span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 110</span>

<span class='kw'>def</span> <span class='id identifier rubyid_statistics'>statistics</span>
  <span class='lbrace'>{</span>
    <span class='label'>identifier:</span> <span class='id identifier rubyid_connection_identifier'>connection_identifier</span><span class='comma'>,</span>
    <span class='label'>started_at:</span> <span class='ivar'>@started_at</span><span class='comma'>,</span>
    <span class='label'>subscriptions:</span> <span class='id identifier rubyid_subscriptions'>subscriptions</span><span class='period'>.</span><span class='id identifier rubyid_identifiers'>identifiers</span><span class='comma'>,</span>
    <span class='label'>request_id:</span> <span class='ivar'>@env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>action_dispatch.request_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.0 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>