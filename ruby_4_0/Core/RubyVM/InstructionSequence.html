<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: RubyVM::InstructionSequence &mdash; Core  Ruby-4.0.0 p0</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "RubyVM::InstructionSequence",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Ruby-4.0.0</a> &raquo; 
      <a href='../'>Core</a> &raquo; 
      <a href='../_index.html#alpha_I'>Index (I)</a> &raquo; 
        <a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>InstructionSequence&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: RubyVM::InstructionSequence</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="../Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L4502'>iseq.c</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L4497'>iseq.c</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>The InstructionSequence class represents a compiled sequence of instructions for the Virtual Machine used in MRI. Not all implementations of <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> may implement this class, and for the implementations that implement it, the methods defined and behavior of the methods can change in any version.</p>

<p>With it, you can get a handle to the instructions that make up a method or a proc, compile strings of <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> code down to VM instructions, and disassemble instruction sequences to strings for easy inspection. It is mostly useful if you want to learn how YARV works, but it also lets you control various settings for the <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> iseq compiler.</p>

<p>You can find the source for the VM instructions in <code>insns.def</code> in the <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> source.</p>

<p>The instruction sequence results will almost certainly change as <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> changes, so example output in this documentation may be different from what you see.</p>

<p>Of course, this class is MRI specific.</p>

  </div>
</div>
</div>
<h2 class='h2_sum' id='class_attribute_summary'>Class Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#compile_option-class_method" title="compile_option (class method)">.<strong>compile_option</strong>  &#x21d2; options </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a hash of default options used by the <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> iseq compiler.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#compile_option=-class_method" title="compile_option= (class method)">.<strong>compile_option=</strong>(options)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets the default values for various optimizations in the <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> iseq compiler.</p></div>
    </div>
  </li>
</ul>
</div>  <!-- class_attribute_summary -->

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#compile-class_method" title="compile (class method)">.<strong>compile</strong>(source[, file[, path[, line[, options]]]])  &#x21d2; iseq </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#new-class_method" title="RubyVM::InstructionSequence.new (method)">.new</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#compile_file-class_method" title="compile_file (class method)">.<strong>compile_file</strong>(file[, options])  &#x21d2; iseq </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Takes <code>file</code>, a <a href="../String.html" title="String (class)"><code>::String</code></a> with the location of a <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> source file, reads, parses and compiles the file, and returns <code>iseq</code>, the compiled <code>InstructionSequence</code> with source location metadata set.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#compile_file_prism-class_method" title="compile_file_prism (class method)">.<strong>compile_file_prism</strong>(file[, options])  &#x21d2; iseq </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Takes <code>file</code>, a <a href="../String.html" title="String (class)"><code>::String</code></a> with the location of a <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> source file, reads, parses and compiles the file, and returns <code>iseq</code>, the compiled <code>InstructionSequence</code> with source location metadata set.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#compile_parsey-class_method" title="compile_parsey (class method)">.<strong>compile_parsey</strong>(source[, file[, path[, line[, options]]]])  &#x21d2; iseq </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Takes <code>source</code>, which can be a string of <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> code, or an open <a href="../File.html" title="File (class)"><code>::File</code></a> object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#compile_prism-class_method" title="compile_prism (class method)">.<strong>compile_prism</strong>(source[, file[, path[, line[, options]]]])  &#x21d2; iseq </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Takes <code>source</code>, which can be a string of <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> code, or an open <a href="../File.html" title="File (class)"><code>::File</code></a> object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#disasm-class_method" title="disasm (class method)">.<strong>disasm</strong>(body)  &#x21d2; String </a>
      (also: .disassemble)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Takes <code>body</code>, a <a href="../Method.html" title="Method (class)"><code>::Method</code></a> or <a href="../Proc.html" title="Proc (class)"><code>::Proc</code></a> object, and returns a <a href="../String.html" title="String (class)"><code>::String</code></a> with the human readable instructions for <code>body</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#disassemble-class_method" title="disassemble (class method)">.<strong>disassemble</strong>(body)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#disasm-class_method" title="RubyVM::InstructionSequence.disasm (method)">.disasm</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#load_from_binary-class_method" title="load_from_binary (class method)">.<strong>load_from_binary</strong>(binary)  &#x21d2; iseq </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Load an iseq object from binary format <a href="../String.html" title="String (class)"><code>::String</code></a> object created by <a href="#to_binary-instance_method" title="RubyVM::InstructionSequence#to_binary (method)">#to_binary</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#load_from_binary_extra_data-class_method" title="load_from_binary_extra_data (class method)">.<strong>load_from_binary_extra_data</strong>(binary)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Load extra data embed into binary format <a href="../String.html" title="String (class)"><code>::String</code></a> object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title="new (class method)">.<strong>new</strong>(source[, file[, path[, line[, options]]]])  &#x21d2; iseq </a>
      (also: .compile)
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Takes <code>source</code>, which can be a string of <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> code, or an open <a href="../File.html" title="File (class)"><code>::File</code></a> object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#of-class_method" title=".of (class method)">.<strong>of</strong>(body)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the instruction sequence containing the given proc or method.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#load-class_method" title=".load (class method)">.<strong>load</strong>(*args)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#absolute_path-instance_method" title="#absolute_path (instance method)">#<strong>absolute_path</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the absolute path of this instruction sequence.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#base_label-instance_method" title="#base_label (instance method)">#<strong>base_label</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the base label of this instruction sequence.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#disasm-instance_method" title="#disasm (instance method)">#<strong>disasm</strong>  &#x21d2; String </a>
      (also: #disassemble)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the instruction sequence as a <a href="../String.html" title="String (class)"><code>::String</code></a> in human readable form.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#disassemble-instance_method" title="#disassemble (instance method)">#<strong>disassemble</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#disasm-instance_method" title="RubyVM::InstructionSequence#disasm (method)">#disasm</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#each_child-instance_method" title="#each_child (instance method)">#<strong>each_child</strong> {|child_iseq| ... } &#x21d2; iseq </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Iterate all direct child instruction sequences.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#eval-instance_method" title="#eval (instance method)">#<strong>eval</strong>  &#x21d2; Object </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Evaluates the instruction sequence and returns the result.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#first_lineno-instance_method" title="#first_lineno (instance method)">#<strong>first_lineno</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the number of the first source line where the instruction sequence was loaded from.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a human-readable string representation of this instruction sequence, including the <a href="#label-instance_method" title="RubyVM::InstructionSequence#label (method)">#label</a> and <a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">#path</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#label-instance_method" title="#label (instance method)">#<strong>label</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the label of this instruction sequence.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#path-instance_method" title="#path (instance method)">#<strong>path</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the path of this instruction sequence.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#script_lines-instance_method" title="#script_lines (instance method)">#<strong>script_lines</strong>  &#x21d2; Array<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>It returns recorded script lines if it is available.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_a-instance_method" title="#to_a (instance method)">#<strong>to_a</strong>  &#x21d2; Array </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an <a href="../Array.html" title="Array (class)"><code>::Array</code></a> with 14 elements representing the instruction sequence with the following data:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_binary-instance_method" title="#to_binary (instance method)">#<strong>to_binary</strong>(extra_data = nil)  &#x21d2; binary str </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns serialized iseq binary format data as a <a href="../String.html" title="String (class)"><code>::String</code></a> object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#trace_points-instance_method" title="#trace_points (instance method)">#<strong>trace_points</strong>  &#x21d2; Array </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Return trace points in the instruction sequence.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#marshal_dump-instance_method" title="#marshal_dump (instance method)">#<strong>marshal_dump</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#marshal_load-instance_method" title="#marshal_load (instance method)">#<strong>marshal_load</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    <div class='inline-block'>
      <span class='overload'>.<strong>compile</strong>(source[, file[, path[, line[, options]]]])  &#x21d2; <code>iseq</code> </span>
      <span class='overload'>.<strong>new</strong>(source[, file[, path[, line[, options]]]])  &#x21d2; <code>iseq</code> </span>
    </div>
    <span class='aliases'>Also known as: <span class='names'>.compile</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Takes <code>source</code>, which can be a string of <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> code, or an open <a href="../File.html" title="File (class)"><code>::File</code></a> object. that contains <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> source code.</p>

<p>Optionally takes <code>file</code>, <a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">#path</a>, and <code>line</code> which describe the file path, real path and first line number of the ruby code in <code>source</code> which are metadata attached to the returned <code>iseq</code>.</p>

<p><code>file</code> is used for <code>__FILE__</code> and exception backtrace. <a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">#path</a> is used for <code>require_relative</code> base. It is recommended these should be the same full path.</p>

<p><code>options</code>, which can be <code>true</code>, <code>false</code> or a <a href="../Hash.html" title="Hash (class)"><code>::Hash</code></a>, is used to modify the default behavior of the <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> iseq compiler.</p>

<p>For details regarding valid compile options see <a href="#compile_option=-class_method" title="RubyVM::InstructionSequence.compile_option= (method)">.compile_option=</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_compile'><a href="#compile-class_method" title="RubyVM::InstructionSequence.compile (method)">compile</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a = 1 + 2</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@&lt;compiled&gt;&gt;
</span>
<span class='id identifier rubyid_path'><a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">path</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test.rb</span><span class='tstring_end'>&quot;</span></span>
<span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_compile'><a href="#compile-class_method" title="RubyVM::InstructionSequence.compile (method)">compile</a></span>(<span class='const'><a href="../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_read'><a href="../IO.html#read-class_method" title="IO.read (method)">read</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">path</a></span>)<span class='comma'>,</span> <span class='id identifier rubyid_path'><a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">path</a></span><span class='comma'>,</span> <span class='const'><a href="../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_expand_path'><a href="../File.html#expand_path-class_method" title="File.expand_path (method)">expand_path</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">path</a></span>))
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@test.rb:1&gt;
</span>
<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='const'><a href="../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="../File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test.rb</span><span class='tstring_end'>&quot;</span></span>)
<span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_compile'><a href="#compile-class_method" title="RubyVM::InstructionSequence.compile (method)">compile</a></span>(<span class='id identifier rubyid_file'>file</span>)
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@&lt;compiled&gt;:1&gt;
</span>
<span class='id identifier rubyid_path'><a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">path</a></span> <span class='op'>=</span> <span class='const'><a href="../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_expand_path'><a href="../File.html#expand_path-class_method" title="File.expand_path (method)">expand_path</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test.rb</span><span class='tstring_end'>&quot;</span></span>)
<span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_compile'><a href="#compile-class_method" title="RubyVM::InstructionSequence.compile (method)">compile</a></span>(<span class='const'><a href="../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_read'><a href="../IO.html#read-class_method" title="IO.read (method)">read</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">path</a></span>)<span class='comma'>,</span> <span class='id identifier rubyid_path'><a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_path'><a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">path</a></span>)
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@/absolute/path/to/test.rb:1&gt;</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L1692-L1696'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1692' data-end='1696'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 1692</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_s_compile(int argc, VALUE *argv, VALUE self)
{
    return iseqw_s_compile_parser(argc, argv, self, rb_ruby_prism_p());
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Attribute Details</h2>
<section class='method_details first' id="compile_option-class_method">
  <h3 class='signature rw first'>
    .<strong>compile_option</strong>  &#x21d2; <code>options</code>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a hash of default options used by the <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> iseq compiler.</p>

<p>For details, see <a href="#compile_option=-class_method" title="RubyVM::InstructionSequence.compile_option= (method)">.compile_option=</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L1974-L1978'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1974' data-end='1978'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 1974</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_s_compile_option_get(VALUE self)
{
    return make_compile_option_value(&amp;COMPILE_OPTION_DEFAULT);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="compile_option=-class_method">
  <h3 class='signature rw'>
    .<strong>compile_option=</strong>(options)   <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets the default values for various optimizations in the <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> iseq compiler.</p>

<p>Possible values for <code>options</code> include <code>true</code>, which enables all options, <code>false</code> which disables all options, and <code>nil</code> which leaves all options unchanged.</p>

<p>You can also pass a <a href="../Hash.html" title="Hash (class)"><code>::Hash</code></a> of <code>options</code> that you want to change, any options not present in the hash will be left unchanged.</p>

<p>Possible option names (which are keys in <code>options</code>) which can be set to <code>true</code> or <code>false</code> include:</p>
<ul><li>
<p><code>:inline_const_cache</code></p>
</li><li>
<p><code>:instructions_unification</code></p>
</li><li>
<p><code>:operands_unification</code></p>
</li><li>
<p><code>:peephole_optimization</code></p>
</li><li>
<p><code>:specialized_instruction</code></p>
</li><li>
<p><code>:tailcall_optimization</code></p>
</li></ul>

<p>Additionally, <code>:debug_level</code> can be set to an integer.</p>

<p>These default options can be overwritten for a single run of the iseq compiler by passing any of the above values as the <code>options</code> parameter to <a href="#new-class_method" title="RubyVM::InstructionSequence.new (method)">.new</a>, <a href="#compile-class_method" title="RubyVM::InstructionSequence.compile (method)">.compile</a> and <a href="#compile_file-class_method" title="RubyVM::InstructionSequence.compile_file (method)">.compile_file</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L1957-L1964'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1957' data-end='1964'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 1957</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_s_compile_option_set(VALUE self, VALUE opt)
{
    rb_compile_option_t option;
    make_compile_option(&amp;option, opt);
    COMPILE_OPTION_DEFAULT = option;
    return opt;
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="compile-class_method">
  <h3 class='signature  first'>
    <div class='inline-block'>
      <span class='overload'>.<strong>compile</strong>(source[, file[, path[, line[, options]]]])  &#x21d2; <code>iseq</code> </span>
      <span class='overload'>.<strong>new</strong>(source[, file[, path[, line[, options]]]])  &#x21d2; <code>iseq</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#new-class_method" title="RubyVM::InstructionSequence.new (method)">.new</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="compile_file-class_method">
  <h3 class='signature '>
    .<strong>compile_file</strong>(file[, options])  &#x21d2; <code>iseq</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Takes <code>file</code>, a <a href="../String.html" title="String (class)"><code>::String</code></a> with the location of a <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> source file, reads, parses and compiles the file, and returns <code>iseq</code>, the compiled <code>InstructionSequence</code> with source location metadata set.</p>

<p>Optionally takes <code>options</code>, which can be <code>true</code>, <code>false</code> or a <a href="../Hash.html" title="Hash (class)"><code>::Hash</code></a>, to modify the default behavior of the <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> iseq compiler.</p>

<p>For details regarding valid compile options see <a href="#compile_option=-class_method" title="RubyVM::InstructionSequence.compile_option= (method)">.compile_option=</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># /tmp/hello.rb
</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello, world!</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># elsewhere
</span><span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_compile_file'>compile_file</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/tmp/hello.rb</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;main&gt;@/tmp/hello.rb&gt;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L1802-L1850'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1802' data-end='1850'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 1802</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_s_compile_file(int argc, VALUE *argv, VALUE self)
{
    VALUE file, opt = Qnil;
    VALUE parser, f, exc = Qnil, ret;
    rb_ast_t *ast;
    VALUE ast_value;
    rb_compile_option_t option;
    int i;

    i = rb_scan_args(argc, argv, &quot;1*:&quot;, &amp;file, NULL, &amp;opt);
    if (i &gt; 1+NIL_P(opt)) rb_error_arity(argc, 1, 2);
    switch (i) {
      case 2: opt = argv[--i];
    }
    FilePathValue(file);
    file = rb_fstring(file); /* rb_io_t-&gt;pathv gets frozen anyways */

    f = rb_file_open_str(file, &quot;r&quot;);

    rb_execution_context_t *ec = GET_EC();
    VALUE v = rb_vm_push_frame_fname(ec, file);

    parser = rb_parser_new();
    rb_parser_set_context(parser, NULL, FALSE);
    ast_value = rb_parser_load_file(parser, file);
    ast = rb_ruby_ast_data_get(ast_value);
    if (!ast-&gt;body.root) exc = GET_EC()-&gt;errinfo;

    rb_io_close(f);
    if (!ast-&gt;body.root) {
        rb_ast_dispose(ast);
        rb_exc_raise(exc);
    }

    make_compile_option(&amp;option, opt);

    ret = iseqw_new(rb_iseq_new_with_opt(ast_value, rb_fstring_lit(&quot;&lt;main&gt;&quot;),
                                         file,
                                         rb_realpath_internal(Qnil, file, 1),
                                         1, NULL, 0, ISEQ_TYPE_TOP, &amp;option,
                                         Qnil));
    rb_ast_dispose(ast);
    RB_GC_GUARD(ast_value);

    rb_vm_pop_frame(ec);
    RB_GC_GUARD(v);
    return ret;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="compile_file_prism-class_method">
  <h3 class='signature '>
    .<strong>compile_file_prism</strong>(file[, options])  &#x21d2; <code>iseq</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Takes <code>file</code>, a <a href="../String.html" title="String (class)"><code>::String</code></a> with the location of a <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> source file, reads, parses and compiles the file, and returns <code>iseq</code>, the compiled <code>InstructionSequence</code> with source location metadata set. It parses and compiles using prism.</p>

<p>Optionally takes <code>options</code>, which can be <code>true</code>, <code>false</code> or a <a href="../Hash.html" title="Hash (class)"><code>::Hash</code></a>, to modify the default behavior of the <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> iseq compiler.</p>

<p>For details regarding valid compile options see <a href="#compile_option=-class_method" title="RubyVM::InstructionSequence.compile_option= (method)">.compile_option=</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># /tmp/hello.rb
</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello, world!</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># elsewhere
</span><span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_compile_file_prism'>compile_file_prism</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/tmp/hello.rb</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;main&gt;@/tmp/hello.rb&gt;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L1873-L1925'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1873' data-end='1925'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 1873</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_s_compile_file_prism(int argc, VALUE *argv, VALUE self)
{
    VALUE file, opt = Qnil, ret;
    rb_compile_option_t option;
    int i;

    i = rb_scan_args(argc, argv, &quot;1*:&quot;, &amp;file, NULL, &amp;opt);
    if (i &gt; 1+NIL_P(opt)) rb_error_arity(argc, 1, 2);
    switch (i) {
      case 2: opt = argv[--i];
    }
    FilePathValue(file);
    file = rb_fstring(file); /* rb_io_t-&gt;pathv gets frozen anyways */

    rb_execution_context_t *ec = GET_EC();
    VALUE v = rb_vm_push_frame_fname(ec, file);

    pm_parse_result_t result = { 0 };
    result.options.line = 1;
    result.node.coverage_enabled = 1;

    VALUE script_lines;
    VALUE error = pm_load_parse_file(&amp;result, file, ruby_vm_keep_script_lines ? &amp;script_lines : NULL);

    if (error == Qnil) {
        make_compile_option(&amp;option, opt);

        int error_state;
        rb_iseq_t *iseq = pm_iseq_new_with_opt(&amp;result.node, rb_fstring_lit(&quot;&lt;main&gt;&quot;),
                                               file,
                                               rb_realpath_internal(Qnil, file, 1),
                                               1, NULL, 0, ISEQ_TYPE_TOP, &amp;option, &amp;error_state);

        pm_parse_result_free(&amp;result);

        if (error_state) {
            RUBY_ASSERT(iseq == NULL);
            rb_jump_tag(error_state);
        }

        ret = iseqw_new(iseq);
        rb_vm_pop_frame(ec);
        RB_GC_GUARD(v);
        return ret;
    }
    else {
        pm_parse_result_free(&amp;result);
        rb_vm_pop_frame(ec);
        RB_GC_GUARD(v);
        rb_exc_raise(error);
    }
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="compile_parsey-class_method">
  <h3 class='signature '>
    .<strong>compile_parsey</strong>(source[, file[, path[, line[, options]]]])  &#x21d2; <code>iseq</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Takes <code>source</code>, which can be a string of <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> code, or an open <a href="../File.html" title="File (class)"><code>::File</code></a> object. that contains <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> source code. It parses and compiles using parse.y.</p>

<p>Optionally takes <code>file</code>, <a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">#path</a>, and <code>line</code> which describe the file path, real path and first line number of the ruby code in <code>source</code> which are metadata attached to the returned <code>iseq</code>.</p>

<p><code>file</code> is used for <code>__FILE__</code> and exception backtrace. <a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">#path</a> is used for <code>require_relative</code> base. It is recommended these should be the same full path.</p>

<p><code>options</code>, which can be <code>true</code>, <code>false</code> or a <a href="../Hash.html" title="Hash (class)"><code>::Hash</code></a>, is used to modify the default behavior of the <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> iseq compiler.</p>

<p>For details regarding valid compile options see <a href="#compile_option=-class_method" title="RubyVM::InstructionSequence.compile_option= (method)">.compile_option=</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_compile_parsey'>compile_parsey</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a = 1 + 2</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@&lt;compiled&gt;&gt;
</span>
<span class='id identifier rubyid_path'><a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">path</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test.rb</span><span class='tstring_end'>&quot;</span></span>
<span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_compile_parsey'>compile_parsey</span>(<span class='const'><a href="../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_read'><a href="../IO.html#read-class_method" title="IO.read (method)">read</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">path</a></span>)<span class='comma'>,</span> <span class='id identifier rubyid_path'><a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">path</a></span><span class='comma'>,</span> <span class='const'><a href="../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_expand_path'><a href="../File.html#expand_path-class_method" title="File.expand_path (method)">expand_path</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">path</a></span>))
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@test.rb:1&gt;
</span>
<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='const'><a href="../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="../File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test.rb</span><span class='tstring_end'>&quot;</span></span>)
<span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_compile_parsey'>compile_parsey</span>(<span class='id identifier rubyid_file'>file</span>)
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@&lt;compiled&gt;:1&gt;
</span>
<span class='id identifier rubyid_path'><a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">path</a></span> <span class='op'>=</span> <span class='const'><a href="../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_expand_path'><a href="../File.html#expand_path-class_method" title="File.expand_path (method)">expand_path</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test.rb</span><span class='tstring_end'>&quot;</span></span>)
<span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_compile_parsey'>compile_parsey</span>(<span class='const'><a href="../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_read'><a href="../IO.html#read-class_method" title="IO.read (method)">read</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">path</a></span>)<span class='comma'>,</span> <span class='id identifier rubyid_path'><a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_path'><a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">path</a></span>)
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@/absolute/path/to/test.rb:1&gt;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L1734-L1738'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1734' data-end='1738'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 1734</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_s_compile_parsey(int argc, VALUE *argv, VALUE self)
{
    return iseqw_s_compile_parser(argc, argv, self, false);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="compile_prism-class_method">
  <h3 class='signature '>
    .<strong>compile_prism</strong>(source[, file[, path[, line[, options]]]])  &#x21d2; <code>iseq</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Takes <code>source</code>, which can be a string of <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> code, or an open <a href="../File.html" title="File (class)"><code>::File</code></a> object. that contains <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> source code. It parses and compiles using prism.</p>

<p>Optionally takes <code>file</code>, <a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">#path</a>, and <code>line</code> which describe the file path, real path and first line number of the ruby code in <code>source</code> which are metadata attached to the returned <code>iseq</code>.</p>

<p><code>file</code> is used for <code>__FILE__</code> and exception backtrace. <a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">#path</a> is used for <code>require_relative</code> base. It is recommended these should be the same full path.</p>

<p><code>options</code>, which can be <code>true</code>, <code>false</code> or a <a href="../Hash.html" title="Hash (class)"><code>::Hash</code></a>, is used to modify the default behavior of the <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a> iseq compiler.</p>

<p>For details regarding valid compile options see <a href="#compile_option=-class_method" title="RubyVM::InstructionSequence.compile_option= (method)">.compile_option=</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_compile_prism'>compile_prism</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a = 1 + 2</span><span class='tstring_end'>&quot;</span></span>)
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@&lt;compiled&gt;&gt;
</span>
<span class='id identifier rubyid_path'><a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">path</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test.rb</span><span class='tstring_end'>&quot;</span></span>
<span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_compile_prism'>compile_prism</span>(<span class='const'><a href="../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_read'><a href="../IO.html#read-class_method" title="IO.read (method)">read</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">path</a></span>)<span class='comma'>,</span> <span class='id identifier rubyid_path'><a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">path</a></span><span class='comma'>,</span> <span class='const'><a href="../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_expand_path'><a href="../File.html#expand_path-class_method" title="File.expand_path (method)">expand_path</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">path</a></span>))
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@test.rb:1&gt;
</span>
<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='const'><a href="../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_open'><a href="../File.html#open-class_method" title="File.open (method)">open</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test.rb</span><span class='tstring_end'>&quot;</span></span>)
<span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_compile_prism'>compile_prism</span>(<span class='id identifier rubyid_file'>file</span>)
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@&lt;compiled&gt;:1&gt;
</span>
<span class='id identifier rubyid_path'><a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">path</a></span> <span class='op'>=</span> <span class='const'><a href="../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_expand_path'><a href="../File.html#expand_path-class_method" title="File.expand_path (method)">expand_path</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test.rb</span><span class='tstring_end'>&quot;</span></span>)
<span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_compile_prism'>compile_prism</span>(<span class='const'><a href="../File.html" title="File (class)">File</a></span>.<span class='id identifier rubyid_read'><a href="../IO.html#read-class_method" title="IO.read (method)">read</a></span>(<span class='id identifier rubyid_path'><a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">path</a></span>)<span class='comma'>,</span> <span class='id identifier rubyid_path'><a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">path</a></span><span class='comma'>,</span> <span class='id identifier rubyid_path'><a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">path</a></span>)
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@/absolute/path/to/test.rb:1&gt;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L1776-L1780'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1776' data-end='1780'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 1776</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_s_compile_prism(int argc, VALUE *argv, VALUE self)
{
    return iseqw_s_compile_parser(argc, argv, self, true);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="disasm-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>disasm</strong>(body)  &#x21d2; <a href="../String.html" title="String (class)">String</a> </span>
      <span class='overload'>.<strong>disassemble</strong>(body)  &#x21d2; <a href="../String.html" title="String (class)">String</a> </span>
    </div>
    <span class='aliases'>Also known as: <span class='names'>.disassemble</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Takes <code>body</code>, a <a href="../Method.html" title="Method (class)"><code>::Method</code></a> or <a href="../Proc.html" title="Proc (class)"><code>::Proc</code></a> object, and returns a <a href="../String.html" title="String (class)"><code>::String</code></a> with the human readable instructions for <code>body</code>.</p>

<p>For a <a href="../Method.html" title="Method (class)"><code>::Method</code></a> object:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># /tmp/method.rb
</span><span class='kw'>def</span> <span class='id identifier rubyid_hello'>hello</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello, world</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>

<span class='id identifier rubyid_puts'>puts</span> <span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_disasm'>disasm</span>(<span class='id identifier rubyid_method'>method</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_hello'>hello</span>))</code></pre>

<p>Produces:</p>

<pre class="code ruby"><code class="ruby"><span class='op'>==</span> <span class='id identifier rubyid_disasm'>disasm</span><span class='op'>:</span> <span class='op'>&lt;</span><span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span><span class='symbeg'>:</span><span class='id identifier rubyid_hello'>hello</span><span class='ivar'>@</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>tmp</span><span class='regexp_end'>/method</span></span>.<span class='id identifier rubyid_rb'>rb</span><span class='op'>&gt;=</span><span class='op'>===</span><span class='op'>===</span><span class='op'>===</span><span class='op'>==</span>
<span class='int'>0000</span> <span class='id identifier rubyid_trace'>trace</span>            <span class='int'>8</span>                                               (   <span class='int'>1</span>)
<span class='int'>0002</span> <span class='id identifier rubyid_trace'>trace</span>            <span class='int'>1</span>                                               (   <span class='int'>2</span>)
<span class='int'>0004</span> <span class='id identifier rubyid_putself'>putself</span>
<span class='int'>0005</span> <span class='id identifier rubyid_putstring'>putstring</span>        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello, world</span><span class='tstring_end'>&quot;</span></span>
<span class='int'>0007</span> <span class='id identifier rubyid_send'>send</span>             <span class='symbeg'>:</span><span class='id identifier rubyid_puts'>puts</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='int'>8</span><span class='comma'>,</span> <span class='op'>&lt;</span><span class='id identifier rubyid_ic'>ic</span><span class='symbeg'>:</span><span class='int'>0</span><span class='op'>&gt;</span>
<span class='int'>0013</span> <span class='id identifier rubyid_trace'>trace</span>            <span class='int'>16</span>                                              (   <span class='int'>3</span>)
<span class='int'>0015</span> <span class='id identifier rubyid_leave'>leave</span>                                                            (   <span class='int'>2</span>)</code></pre>

<p>For a <a href="../Proc.html" title="Proc (class)"><code>::Proc</code></a> object:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># /tmp/proc.rb
</span><span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='id identifier rubyid_proc'>proc</span> { <span class='id identifier rubyid_num'>num</span> <span class='op'>=</span> <span class='int'>1</span> <span class='op'>+</span> <span class='int'>2</span> }
<span class='id identifier rubyid_puts'>puts</span> <span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_disasm'>disasm</span>(<span class='id identifier rubyid_p'>p</span>)</code></pre>

<p>Produces:</p>

<pre class="code ruby"><code class="ruby"><span class='op'>==</span> <span class='id identifier rubyid_disasm'>disasm</span><span class='op'>:</span> <span class='op'>&lt;</span><span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span><span class='symbeg'>:</span><span class='id identifier rubyid_block'>block</span> <span class='kw'>in</span> <span class='op'>&lt;</span><span class='id identifier rubyid_main'>main</span><span class='op'>&gt;</span><span class='ivar'>@</span><span class='op'>/</span><span class='id identifier rubyid_tmp'>tmp</span><span class='op'>/</span><span class='id identifier rubyid_proc'>proc</span>.<span class='id identifier rubyid_rb'>rb</span><span class='op'>&gt;=</span><span class='op'>==</span>
<span class='op'>==</span> <span class='id identifier rubyid_catch'>catch</span> <span class='id identifier rubyid_table'>table</span>
<span class='op'>|</span> <span class='id identifier rubyid_catch'>catch</span> <span class='label'>type:</span> <span class='kw'>redo</span>   <span class='id identifier rubyid_st'>st</span><span class='op'>:</span> <span class='int'>0000</span> <span class='id identifier rubyid_ed'>ed</span><span class='op'>:</span> <span class='int'>0012</span> <span class='id identifier rubyid_sp'>sp</span><span class='op'>:</span> <span class='int'>0000</span> <span class='id identifier rubyid_cont'>cont</span><span class='op'>:</span> <span class='int'>0000</span>
<span class='op'>|</span> <span class='id identifier rubyid_catch'>catch</span> <span class='label'>type:</span> <span class='kw'>next</span>   <span class='id identifier rubyid_st'>st</span><span class='op'>:</span> <span class='int'>0000</span> <span class='id identifier rubyid_ed'>ed</span><span class='op'>:</span> <span class='int'>0012</span> <span class='id identifier rubyid_sp'>sp</span><span class='op'>:</span> <span class='int'>0000</span> <span class='id identifier rubyid_cont'>cont</span><span class='op'>:</span> <span class='int'>0012</span>
<span class='op'>|</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span><span class='op'>-</span>
<span class='id identifier rubyid_local'>local</span> <span class='id identifier rubyid_table'>table</span> (<span class='label'>size:</span> <span class='int'>2</span><span class='comma'>,</span> <span class='label'>argc:</span> <span class='int'>0</span> [<span class='label'>opts:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>rest:</span> <span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='label'>post:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>block:</span> <span class='op'>-</span><span class='int'>1</span>] <span class='id identifier rubyid_s1'>s1</span>)
[ <span class='int'>2</span>] <span class='id identifier rubyid_num'>num</span>
<span class='int'>0000</span> <span class='id identifier rubyid_trace'>trace</span>            <span class='int'>1</span>                                               (   <span class='int'>1</span>)
<span class='int'>0002</span> <span class='id identifier rubyid_putobject'>putobject</span>        <span class='int'>1</span>
<span class='int'>0004</span> <span class='id identifier rubyid_putobject'>putobject</span>        <span class='int'>2</span>
<span class='int'>0006</span> <span class='id identifier rubyid_opt_plus'>opt_plus</span>         <span class='op'>&lt;</span><span class='id identifier rubyid_ic'>ic</span><span class='symbeg'>:</span><span class='int'>1</span><span class='op'>&gt;</span>
<span class='int'>0008</span> <span class='id identifier rubyid_dup'>dup</span>
<span class='int'>0009</span> <span class='id identifier rubyid_setlocal'>setlocal</span>         <span class='id identifier rubyid_num'>num</span><span class='comma'>,</span> <span class='int'>0</span>
<span class='int'>0012</span> <span class='id identifier rubyid_leave'>leave</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L3253-L3258'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3253' data-end='3258'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 3253</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_s_disasm(VALUE klass, VALUE body)
{
    VALUE iseqw = iseqw_s_of(klass, body);
    return NIL_P(iseqw) ? Qnil : rb_iseq_disasm(iseqw_check(iseqw));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="disassemble-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>disasm</strong>(body)  &#x21d2; <a href="../String.html" title="String (class)">String</a> </span>
      <span class='overload'>.<strong>disassemble</strong>(body)  &#x21d2; <a href="../String.html" title="String (class)">String</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#disasm-class_method" title="RubyVM::InstructionSequence.disasm (method)">.disasm</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="load-class_method">
  <h3 class='signature nodoc'>
    .<strong>load</strong>(*args)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L1321-L1327'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1321' data-end='1327'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 1321</span></pre>
<pre class='code cpp'>

static VALUE
iseq_s_load(int argc, VALUE *argv, VALUE self)
{
    VALUE data, opt=Qnil;
    rb_scan_args(argc, argv, &quot;11&quot;, &amp;data, &amp;opt);
    return iseq_load(data, NULL, opt);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load_from_binary-class_method">
  <h3 class='signature '>
    .<strong>load_from_binary</strong>(binary)  &#x21d2; <code>iseq</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Load an iseq object from binary format <a href="../String.html" title="String (class)"><code>::String</code></a> object created by <a href="#to_binary-instance_method" title="RubyVM::InstructionSequence#to_binary (method)">#to_binary</a>.</p>

<p>This loader does not have a verifier, so that loading broken/modified binary causes critical problem.</p>

<p>You should not load binary data provided by others. You should use binary data translated by yourself.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L4301-L4305'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4301' data-end='4305'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 4301</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_s_load_from_binary(VALUE self, VALUE str)
{
    return iseqw_new(rb_iseq_ibf_load(str));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load_from_binary_extra_data-class_method">
  <h3 class='signature '>
    .<strong>load_from_binary_extra_data</strong>(binary)  &#x21d2; <a href="../String.html" title="String (class)">String</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Load extra data embed into binary format <a href="../String.html" title="String (class)"><code>::String</code></a> object.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L4313-L4317'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4313' data-end='4317'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 4313</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_s_load_from_binary_extra_data(VALUE self, VALUE str)
{
    return rb_iseq_ibf_load_extra_data(str);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="of-class_method">
  <h3 class='signature '>
    .<strong>of</strong>(body)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the instruction sequence containing the given proc or method.</p>

<p>For example, using irb:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># a proc
</span><span class='op'>&gt;</span> <span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='id identifier rubyid_proc'>proc</span> { <span class='id identifier rubyid_num'>num</span> <span class='op'>=</span> <span class='int'>1</span> <span class='op'>+</span> <span class='int'>2</span> }
<span class='op'>&gt;</span> <span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_of'>of</span>(<span class='id identifier rubyid_p'>p</span>)
<span class='op'>&gt;</span> <span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:block in irb_binding@(irb)&gt;
</span>
<span class='comment'># for a method
</span><span class='op'>&gt;</span> <span class='kw'>def</span> <span class='id identifier rubyid_foo'>foo</span>(<span class='id identifier rubyid_bar'>bar</span>)<span class='semicolon'>;</span> <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_bar'>bar</span><span class='semicolon'>;</span> <span class='kw'>end</span>
<span class='op'>&gt;</span> <span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_of'>of</span>(<span class='id identifier rubyid_method'>method</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_foo'>foo</span>))
<span class='op'>&gt;</span> <span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:foo@(irb)&gt;</span></code></pre>

<p>Using <a href="#compile_file-class_method" title="RubyVM::InstructionSequence.compile_file (method)">.compile_file</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># /tmp/iseq_of.rb
</span><span class='kw'>def</span> <span class='id identifier rubyid_hello'>hello</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello, world</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>

<span class='gvar'>$a_global_proc</span> <span class='op'>=</span> <span class='id identifier rubyid_proc'>proc</span> { <span class='id identifier rubyid_str'>str</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span> }

<span class='comment'># in irb
</span><span class='op'>&gt;</span> <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/tmp/iseq_of.rb</span><span class='tstring_end'>&#39;</span></span>

<span class='comment'># first the method hello
</span><span class='op'>&gt;</span> <span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_of'>of</span>(<span class='id identifier rubyid_method'>method</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_hello'>hello</span>))
<span class='op'>&gt;</span> <span class='comment'>#=&gt; #&lt;RubyVM::InstructionSequence:0x007fb73d7cb1d0&gt;
</span>
<span class='comment'># then the global proc
</span><span class='op'>&gt;</span> <span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_of'>of</span>(<span class='gvar'>$a_global_proc</span>)
<span class='op'>&gt;</span> <span class='comment'>#=&gt; #&lt;RubyVM::InstructionSequence:0x007fb73d7caf78&gt;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L3176-L3199'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3176' data-end='3199'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 3176</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_s_of(VALUE klass, VALUE body)
{
    const rb_iseq_t *iseq = NULL;

    if (rb_frame_info_p(body)) {
        iseq = rb_get_iseq_from_frame_info(body);
    }
    else if (rb_obj_is_proc(body)) {
        iseq = vm_proc_iseq(body);

        if (!rb_obj_is_iseq((VALUE)iseq)) {
            iseq = NULL;
        }
    }
    else if (rb_obj_is_method(body)) {
        iseq = rb_method_iseq(body);
    }
    else if (rb_typeddata_is_instance_of(body, &amp;iseqw_data_type)) {
        return body;
    }

    return iseq ? iseqw_new(iseq) : Qnil;
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="absolute_path-instance_method">
  <h3 class='signature  first'>
    #<strong>absolute_path</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the absolute path of this instruction sequence.</p>

<p><code>nil</code> if the iseq was evaluated from a string.</p>

<p>For example, using <a href="#compile_file-class_method" title="RubyVM::InstructionSequence.compile_file (method)">.compile_file</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># /tmp/method.rb
</span><span class='kw'>def</span> <span class='id identifier rubyid_hello'>hello</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello, world</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>

<span class='comment'># in irb
</span><span class='op'>&gt;</span> <span class='id identifier rubyid_iseq'>iseq</span> <span class='op'>=</span> <span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_compile_file'><a href="#compile_file-class_method" title="RubyVM::InstructionSequence.compile_file (method)">compile_file</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/tmp/method.rb</span><span class='tstring_end'>&#39;</span></span>)
<span class='op'>&gt;</span> <span class='id identifier rubyid_iseq'>iseq</span>.<span class='id identifier rubyid_absolute_path'>absolute_path</span> <span class='comment'>#=&gt; /tmp/method.rb</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L2088-L2092'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2088' data-end='2092'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 2088</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_absolute_path(VALUE self)
{
    return rb_iseq_realpath(iseqw_check(self));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="base_label-instance_method">
  <h3 class='signature '>
    #<strong>base_label</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the base label of this instruction sequence.</p>

<p>For example, using irb:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_iseq'>iseq</span> <span class='op'>=</span> <span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_compile'><a href="#compile-class_method" title="RubyVM::InstructionSequence.compile (method)">compile</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>num = 1 + 2</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@&lt;compiled&gt;&gt;
</span><span class='id identifier rubyid_iseq'>iseq</span>.<span class='id identifier rubyid_base_label'>base_label</span>
<span class='comment'>#=&gt; &quot;&lt;compiled&gt;&quot;</span></code></pre>

<p>Using <a href="#compile_file-class_method" title="RubyVM::InstructionSequence.compile_file (method)">.compile_file</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># /tmp/method.rb
</span><span class='kw'>def</span> <span class='id identifier rubyid_hello'>hello</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello, world</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>

<span class='comment'># in irb
</span><span class='op'>&gt;</span> <span class='id identifier rubyid_iseq'>iseq</span> <span class='op'>=</span> <span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_compile_file'><a href="#compile_file-class_method" title="RubyVM::InstructionSequence.compile_file (method)">compile_file</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/tmp/method.rb</span><span class='tstring_end'>&#39;</span></span>)
<span class='op'>&gt;</span> <span class='id identifier rubyid_iseq'>iseq</span>.<span class='id identifier rubyid_base_label'>base_label</span> <span class='comment'>#=&gt; &lt;main&gt;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L2143-L2147'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2143' data-end='2147'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 2143</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_base_label(VALUE self)
{
    return rb_iseq_base_label(iseqw_check(self));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="disasm-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>disasm</strong>  &#x21d2; <a href="../String.html" title="String (class)">String</a> </span>
      <span class='overload'>#<strong>disassemble</strong>  &#x21d2; <a href="../String.html" title="String (class)">String</a> </span>
    </div>
    <span class='aliases'>Also known as: <span class='names'>#disassemble</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the instruction sequence as a <a href="../String.html" title="String (class)"><code>::String</code></a> in human readable form.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_puts'>puts</span> <span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_compile'><a href="#compile-class_method" title="RubyVM::InstructionSequence.compile (method)">compile</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1 + 2</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_disasm'>disasm</span></code></pre>

<p>Produces:</p>

<pre class="code ruby"><code class="ruby"><span class='op'>==</span> <span class='id identifier rubyid_disasm'>disasm</span><span class='op'>:</span> <span class='op'>&lt;</span><span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span><span class='symbeg'>:</span><span class='op'>&lt;</span><span class='id identifier rubyid_compiled'>compiled</span><span class='op'>&gt;</span><span class='ivar'>@</span><span class='op'>&lt;</span><span class='id identifier rubyid_compiled'>compiled</span><span class='op'>&gt;&gt;=</span><span class='op'>===</span><span class='op'>===</span><span class='op'>===</span>
<span class='int'>0000</span> <span class='id identifier rubyid_trace'>trace</span>            <span class='int'>1</span>                                               (   <span class='int'>1</span>)
<span class='int'>0002</span> <span class='id identifier rubyid_putobject'>putobject</span>        <span class='int'>1</span>
<span class='int'>0004</span> <span class='id identifier rubyid_putobject'>putobject</span>        <span class='int'>2</span>
<span class='int'>0006</span> <span class='id identifier rubyid_opt_plus'>opt_plus</span>         <span class='op'>&lt;</span><span class='id identifier rubyid_ic'>ic</span><span class='symbeg'>:</span><span class='int'>1</span><span class='op'>&gt;</span>
<span class='int'>0008</span> <span class='id identifier rubyid_leave'>leave</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L3024-L3028'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3024' data-end='3028'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 3024</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_disasm(VALUE self)
{
    return rb_iseq_disasm(iseqw_check(self));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="disassemble-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>disasm</strong>  &#x21d2; <a href="../String.html" title="String (class)">String</a> </span>
      <span class='overload'>#<strong>disassemble</strong>  &#x21d2; <a href="../String.html" title="String (class)">String</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#disasm-instance_method" title="RubyVM::InstructionSequence#disasm (method)">#disasm</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="each_child-instance_method">
  <h3 class='signature '>
    #<strong>each_child</strong> {|child_iseq| ... } &#x21d2; <code>iseq</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Iterate all direct child instruction sequences. Iteration order is implementation/version defined so that people should not rely on the order.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L3094-L3100'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3094' data-end='3100'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 3094</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_each_child(VALUE self)
{
    const rb_iseq_t *iseq = iseqw_check(self);
    iseq_iterate_children(iseq, yield_each_children, NULL);
    return self;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="eval-instance_method">
  <h3 class='signature '>
    #<strong>eval</strong>  &#x21d2; <a href="../Object.html" title="Object (class)">Object</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Evaluates the instruction sequence and returns the result.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_compile'><a href="#compile-class_method" title="RubyVM::InstructionSequence.compile (method)">compile</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1 + 2</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_eval'>eval</span> <span class='comment'>#=&gt; 3</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L2011-L2019'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2011' data-end='2019'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 2011</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_eval(VALUE self)
{
    const rb_iseq_t *iseq = iseqw_check(self);
    if (0 == ISEQ_BODY(iseq)-&gt;iseq_size) {
        rb_raise(rb_eTypeError, &quot;attempt to evaluate dummy InstructionSequence&quot;);
    }
    return rb_iseq_eval(iseq, rb_current_box());
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="first_lineno-instance_method">
  <h3 class='signature '>
    #<strong>first_lineno</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the number of the first source line where the instruction sequence was loaded from.</p>

<p>For example, using irb:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_iseq'>iseq</span> <span class='op'>=</span> <span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_compile'><a href="#compile-class_method" title="RubyVM::InstructionSequence.compile (method)">compile</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>num = 1 + 2</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@&lt;compiled&gt;&gt;
</span><span class='id identifier rubyid_iseq'>iseq</span>.<span class='id identifier rubyid_first_lineno'>first_lineno</span>
<span class='comment'>#=&gt; 1</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L2159-L2163'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2159' data-end='2163'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 2159</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_first_lineno(VALUE self)
{
    return rb_iseq_first_lineno(iseqw_check(self));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inspect-instance_method">
  <h3 class='signature '>
    #<strong>inspect</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a human-readable string representation of this instruction sequence, including the <a href="#label-instance_method" title="RubyVM::InstructionSequence#label (method)">#label</a> and <a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">#path</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L2025-L2041'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2025' data-end='2041'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 2025</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_inspect(VALUE self)
{
    const rb_iseq_t *iseq = iseqw_check(self);
    const struct rb_iseq_constant_body *const body = ISEQ_BODY(iseq);
    VALUE klass = rb_class_name(rb_obj_class(self));

    if (!body-&gt;location.label) {
        return rb_sprintf(&quot;#&lt;%&quot;PRIsVALUE&quot;: uninitialized&gt;&quot;, klass);
    }
    else {
        return rb_sprintf(&quot;&lt;%&quot;PRIsVALUE&quot;:%&quot;PRIsVALUE&quot;@%&quot;PRIsVALUE&quot;:%d&gt;&quot;,
                          klass,
                          body-&gt;location.label, rb_iseq_path(iseq),
                          FIX2INT(rb_iseq_first_lineno(iseq)));
    }
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="label-instance_method">
  <h3 class='signature '>
    #<strong>label</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the label of this instruction sequence.</p>

<p><code>&lt;main&gt;</code> if its at the top level, <code>&lt;compiled&gt;</code> if it was evaluated from a string.</p>

<p>For example, using irb:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_iseq'>iseq</span> <span class='op'>=</span> <span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_compile'><a href="#compile-class_method" title="RubyVM::InstructionSequence.compile (method)">compile</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>num = 1 + 2</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@&lt;compiled&gt;&gt;
</span><span class='id identifier rubyid_iseq'>iseq</span>.<span class='id identifier rubyid_label'>label</span>
<span class='comment'>#=&gt; &quot;&lt;compiled&gt;&quot;</span></code></pre>

<p>Using <a href="#compile_file-class_method" title="RubyVM::InstructionSequence.compile_file (method)">.compile_file</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># /tmp/method.rb
</span><span class='kw'>def</span> <span class='id identifier rubyid_hello'>hello</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello, world</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>

<span class='comment'># in irb
</span><span class='op'>&gt;</span> <span class='id identifier rubyid_iseq'>iseq</span> <span class='op'>=</span> <span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_compile_file'><a href="#compile_file-class_method" title="RubyVM::InstructionSequence.compile_file (method)">compile_file</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/tmp/method.rb</span><span class='tstring_end'>&#39;</span></span>)
<span class='op'>&gt;</span> <span class='id identifier rubyid_iseq'>iseq</span>.<span class='id identifier rubyid_label'>label</span> <span class='comment'>#=&gt; &lt;main&gt;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L2117-L2121'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2117' data-end='2121'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 2117</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_label(VALUE self)
{
    return rb_iseq_label(iseqw_check(self));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="marshal_dump-instance_method">
  <h3 class='signature priv'>
    #<strong>marshal_dump</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[ <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L4524'>GitHub</a> ]</span>

</section>

<section class='method_details' id="marshal_load-instance_method">
  <h3 class='signature priv'>
    #<strong>marshal_load</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[ <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L4525'>GitHub</a> ]</span>

</section>

<section class='method_details' id="path-instance_method">
  <h3 class='signature '>
    #<strong>path</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the path of this instruction sequence.</p>

<p><code>&lt;compiled&gt;</code> if the iseq was evaluated from a string.</p>

<p>For example, using irb:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_iseq'>iseq</span> <span class='op'>=</span> <span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_compile'><a href="#compile-class_method" title="RubyVM::InstructionSequence.compile (method)">compile</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>num = 1 + 2</span><span class='tstring_end'>&#39;</span></span>)
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@&lt;compiled&gt;&gt;
</span><span class='id identifier rubyid_iseq'>iseq</span>.<span class='id identifier rubyid_path'>path</span>
<span class='comment'>#=&gt; &quot;&lt;compiled&gt;&quot;</span></code></pre>

<p>Using <a href="#compile_file-class_method" title="RubyVM::InstructionSequence.compile_file (method)">.compile_file</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># /tmp/method.rb
</span><span class='kw'>def</span> <span class='id identifier rubyid_hello'>hello</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello, world</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>

<span class='comment'># in irb
</span><span class='op'>&gt;</span> <span class='id identifier rubyid_iseq'>iseq</span> <span class='op'>=</span> <span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span>.<span class='id identifier rubyid_compile_file'><a href="#compile_file-class_method" title="RubyVM::InstructionSequence.compile_file (method)">compile_file</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/tmp/method.rb</span><span class='tstring_end'>&#39;</span></span>)
<span class='op'>&gt;</span> <span class='id identifier rubyid_iseq'>iseq</span>.<span class='id identifier rubyid_path'>path</span> <span class='comment'>#=&gt; /tmp/method.rb</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L2066-L2070'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2066' data-end='2070'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 2066</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_path(VALUE self)
{
    return rb_iseq_path(iseqw_check(self));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="script_lines-instance_method">
  <h3 class='signature '>
    #<strong>script_lines</strong>  &#x21d2; <a href="../Array.html" title="Array (class)">Array</a><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>It returns recorded script lines if it is available. The script lines are not limited to the iseq range, but are entire lines of the source file.</p>

<p>Note that this is an API for ruby internal use, debugging, and research. Do not use this for any other purpose. The compatibility is not guaranteed.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L4467-L4472'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4467' data-end='4472'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 4467</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_script_lines(VALUE self)
{
    const rb_iseq_t *iseq = iseqw_check(self);
    return ISEQ_BODY(iseq)-&gt;variable.script_lines;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_a-instance_method">
  <h3 class='signature '>
    #<strong>to_a</strong>  &#x21d2; <a href="../Array.html" title="Array (class)">Array</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an <a href="../Array.html" title="Array (class)"><code>::Array</code></a> with 14 elements representing the instruction sequence with the following data:</p>
<dl class="rdoc-list label-list"><dt>magic</dt>
<dd>
<p>A string identifying the data format. <strong>Always <code>YARVInstructionSequence/SimpleDataFormat</code>.</strong></p>
</dd><dt>major_version</dt>
<dd>
<p>The major version of the instruction sequence.</p>
</dd><dt>minor_version</dt>
<dd>
<p>The minor version of the instruction sequence.</p>
</dd><dt>format_type</dt>
<dd>
<p>A number identifying the data format. <strong>Always 1</strong>.</p>
</dd><dt>misc</dt>
<dd>
<p>A hash containing:</p>
<dl class="rdoc-list label-list"><dt><code>:arg_size</code></dt>
<dd>
<p>the total number of arguments taken by the method or the block (0 if <em>iseq</em> doesnt represent a method or block)</p>
</dd><dt><code>:local_size</code></dt>
<dd>
<p>the number of local variables + 1</p>
</dd><dt><code>:stack_max</code></dt>
<dd>
<p>used in calculating the stack depth at which a SystemStackError is thrown.</p>
</dd></dl>
</dd><dt>#label</dt>
<dd>
<p>The name of the context (block, method, class, module, etc.) that this instruction sequence belongs to.</p>

<p><code>&lt;main&gt;</code> if its at the top level, <code>&lt;compiled&gt;</code> if it was evaluated from a string.</p>
</dd><dt>#path</dt>
<dd>
<p>The relative path to the Ruby file where the instruction sequence was loaded from.</p>

<p><code>&lt;compiled&gt;</code> if the iseq was evaluated from a string.</p>
</dd><dt>#absolute_path</dt>
<dd>
<p>The absolute path to the Ruby file where the instruction sequence was loaded from.</p>

<p><code>nil</code> if the iseq was evaluated from a string.</p>
</dd><dt>#first_lineno</dt>
<dd>
<p>The number of the first source line where the instruction sequence was loaded from.</p>
</dd><dt>type</dt>
<dd>
<p>The type of the instruction sequence.</p>

<p>Valid values are <code>:top</code>, <code>:method</code>, <code>:block</code>, <code>:class</code>, <code>:rescue</code>, <code>:ensure</code>, <code>:eval</code>, <code>:main</code>, and <code>plain</code>.</p>
</dd><dt>locals</dt>
<dd>
<p>An array containing the names of all arguments and local variables as symbols.</p>
</dd><dt>params</dt>
<dd>
<p>An Hash object containing parameter information.</p>

<p>More info about these values can be found in <code>vm_core.h</code>.</p>
</dd><dt>catch_table</dt>
<dd>
<p>A list of exceptions and control flow operators (rescue, next, redo, break, etc.).</p>
</dd><dt>bytecode</dt>
<dd>
<p>An array of arrays containing the instruction names and operands that make up the body of the instruction sequence.</p>
</dd></dl>

<p>Note that this format is MRI specific and version dependent.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L2248-L2253'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2248' data-end='2253'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 2248</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_to_a(VALUE self)
{
    const rb_iseq_t *iseq = iseqw_check(self);
    return iseq_data_to_ary(iseq);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_binary-instance_method">
  <h3 class='signature '>
    #<strong>to_binary</strong>(extra_data = nil)  &#x21d2; <code>binary</code> <code>str</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns serialized iseq binary format data as a <a href="../String.html" title="String (class)"><code>::String</code></a> object. A corresponding iseq object is created by <a href="#load_from_binary-class_method" title="RubyVM::InstructionSequence.load_from_binary (method)">.load_from_binary</a>() method.</p>

<p><a href="../String.html" title="String (class)"><code>::String</code></a> extra_data will be saved with binary data. You can access this data with <a href="#load_from_binary_extra_data-class_method" title="RubyVM::InstructionSequence.load_from_binary_extra_data (method)">.load_from_binary_extra_data</a>(binary).</p>

<p>Note that the translated binary data is not portable. You can not move this binary data to another machine. You can not use the binary data which is created by another version/another architecture of <a href="../Ruby.html" title="Ruby (module)"><code>::Ruby</code></a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L4281-L4286'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='4281' data-end='4286'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 4281</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_to_binary(int argc, VALUE *argv, VALUE self)
{
    VALUE opt = !rb_check_arity(argc, 0, 1) ? Qnil : argv[0];
    return rb_iseq_ibf_dump(iseqw_check(self), opt);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="trace_points-instance_method">
  <h3 class='signature '>
    #<strong>trace_points</strong>  &#x21d2; <a href="../Array.html" title="Array (class)">Array</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Return trace points in the instruction sequence. Return an array of [line, event_symbol] pair.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/iseq.c#L3124-L3139'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='3124' data-end='3139'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 3124</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_trace_points(VALUE self)
{
    const rb_iseq_t *iseq = iseqw_check(self);
    const struct rb_iseq_constant_body *const body = ISEQ_BODY(iseq);
    unsigned int i;
    VALUE ary = rb_ary_new();

    for (i=0; i&lt;body-&gt;insns_info.size; i++) {
        const struct iseq_insn_info_entry *entry = &amp;body-&gt;insns_info.body[i];
        if (entry-&gt;events) {
            push_event_info(iseq, entry-&gt;events, entry-&gt;line_no, ary);
        }
    }
    return ary;
}
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>