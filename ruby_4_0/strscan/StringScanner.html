<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: StringScanner &mdash; strscan  Ruby-4.0.0 p0</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "StringScanner",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../.'>Ruby-4.0.0</a> &raquo; 
      <a href='.'>strscan</a> &raquo; 
      <a href='_index.html#alpha_S'>Index (S)</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>StringScanner&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: StringScanner</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Exceptions:</div>
      <div class='box_11'>
          <a href="StringScanner/Error.html" title="StringScanner::Error (class)"><code>Error</code></a>      </div>
    </td></tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L2226'>ext/strscan/strscan.c</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L2212'>ext/strscan/strscan.c</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/lib/strscan/strscan.rb#L3'>ext/strscan/lib/strscan/strscan.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    <p>\Class <code>StringScanner</code> supports processing a stored string as a stream;
this code creates a new <code>StringScanner</code> object with string <code>&#39;foobarbaz&#39;</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>strscan</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobarbaz</span><span class='tstring_end'>&#39;</span></span>)</code></pre>

<h2>About the Examples</h2>

<p>All examples here assume that <code>StringScanner</code> has been required:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>strscan</span><span class='tstring_end'>&#39;</span></span></code></pre>

<p>Some examples here assume that these constants are defined:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>MULTILINE_TEXT</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;~EOT</span>
<span class='tstring_content'>Go placidly amid the noise and haste,
and remember what peace there may be in silence.
</span><span class='heredoc_end'>EOT
</span>
<span class='const'>HIRAGANA_TEXT</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>こんにちは</span><span class='tstring_end'>&#39;</span></span>

<span class='const'>ENGLISH_TEXT</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Hello</span><span class='tstring_end'>&#39;</span></span></code></pre>

<p>Some examples here assume that certain helper methods are defined:</p>

<ul>
<li><code>put_situation(scanner)</code>:
Displays the values of the scanner&#39;s
methods #pos, #charpos, #rest, and #rest_size.</li>
<li><code>put_match_values(scanner)</code>:
Displays the scanner&#39;s <a href="StringScanner.html#match-values">match values</a>.</li>
<li><code>match_values_cleared?(scanner)</code>:
Returns whether the scanner&#39;s <a href="StringScanner.html#match-values">match values</a> are cleared.</li>
</ul>

<p>See examples at <a href="file.helper_methods.html">helper methods</a>.</p>

<h2>The <code>StringScanner</code> \Object</h2>

<p>This code creates a <code>StringScanner</code> object
(we&#39;ll call it simply a <em>scanner</em>),
and shows some of its basic properties:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobarbaz</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_string'><a href="#string-instance_method" title="StringScanner#string (method)">string</a></span> <span class='comment'># =&gt; &quot;foobarbaz&quot;
</span><span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'># Situation:
</span><span class='comment'>#   pos:       0
</span><span class='comment'>#   charpos:   0
</span><span class='comment'>#   rest:      &quot;foobarbaz&quot;
</span><span class='comment'>#   rest_size: 9</span></code></pre>

<p>The scanner has:</p>

<ul>
<li><p>A <i>stored string</i>, which is:</p>

<ul>
<li>Initially set by StringScanner.new(string) to the given <code>string</code>
(<code>&#39;foobarbaz&#39;</code> in the example above).</li>
<li>Modifiable by methods #string=(new_string) and #concat(more_string).</li>
<li>Returned by method #string.</li>
</ul>

<p>More at <a href="StringScanner.html#stored-string">Stored String</a> below.</p></li>
<li><p>A <em>position</em>;
a zero-based index into the bytes of the stored string (<em>not</em> into its characters):</p>

<ul>
<li>Initially set by StringScanner.new to <code>0</code>.</li>
<li>Returned by method #pos.</li>
<li>Modifiable explicitly by methods #reset, #terminate, and #pos=(new_pos).</li>
<li>Modifiable implicitly (various traversing methods, among others).</li>
</ul>

<p>More at <a href="StringScanner.html#byte-position-position-">Byte Position</a> below.</p></li>
<li><p>A <i>target substring</i>,
which is a trailing substring of the stored string;
it extends from the current position to the end of the stored string:</p>

<ul>
<li>Initially set by StringScanner.new(string) to the given <code>string</code>
(<code>&#39;foobarbaz&#39;</code> in the example above).</li>
<li>Returned by method #rest.</li>
<li>Modified by any modification to either the stored string or the position.</li>
</ul>

<p><b>Most importantly</b>:
the searching and traversing methods operate on the target substring,
which may be (and often is) less than the entire stored string.</p>

<p>More at <a href="StringScanner.html#target-substring">Target Substring</a> below.</p></li>
</ul>

<h2>Stored \String</h2>

<p>The <i>stored string</i> is the string stored in the <code>StringScanner</code> object.</p>

<p>Each of these methods sets, modifies, or returns the stored string:</p>

<table><thead>
<tr>
<th>Method</th>
<th>Effect</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#new-class_method" title="StringScanner.new (method)">.new</a>(string)</td>
<td>Creates a new scanner for the given string.</td>
</tr>
<tr>
<td><a href="#string=-instance_method" title="StringScanner#string= (method)">#string=</a>(new_string)</td>
<td>Replaces the existing stored string.</td>
</tr>
<tr>
<td><a href="#concat-instance_method" title="StringScanner#concat (method)">#concat</a>(more_string)</td>
<td>Appends a string to the existing stored string.</td>
</tr>
<tr>
<td><a href="#string-instance_method" title="StringScanner#string (method)">#string</a></td>
<td>Returns the stored string.</td>
</tr>
</tbody></table>

<h2>Positions</h2>

<p>A <code>StringScanner</code> object maintains a zero-based <i>byte position</i>
and a zero-based <i>character position</i>.</p>

<p>Each of these methods explicitly sets positions:</p>

<table><thead>
<tr>
<th>Method</th>
<th>Effect</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#reset-instance_method" title="StringScanner#reset (method)">#reset</a></td>
<td>Sets both positions to zero (beginning of stored string).</td>
</tr>
<tr>
<td><a href="#terminate-instance_method" title="StringScanner#terminate (method)">#terminate</a></td>
<td>Sets both positions to the end of the stored string.</td>
</tr>
<tr>
<td><a href="#pos=-instance_method" title="StringScanner#pos= (method)">#pos=</a>(new_byte_position)</td>
<td>Sets byte position; adjusts character position.</td>
</tr>
</tbody></table>

<h3>Byte Position (Position)</h3>

<p>The byte position (or simply <em>position</em>)
is a zero-based index into the bytes in the scanner&#39;s stored string;
for a new <code>StringScanner</code> object, the byte position is zero.</p>

<p>When the byte position is:</p>

<ul>
<li>Zero (at the beginning), the target substring is the entire stored string.</li>
<li>Equal to the size of the stored string (at the end),
the target substring is the empty string <code>&#39;&#39;</code>.</li>
</ul>

<p>To get or set the byte position:</p>

<ul>
<li><a href="#pos-instance_method" title="StringScanner#pos (method)">#pos</a>: returns the byte position.</li>
<li><a href="#pos=-instance_method" title="StringScanner#pos= (method)">#pos=</a>(new_pos): sets the byte position.</li>
</ul>

<p>Many methods use the byte position as the basis for finding matches;
many others set, increment, or decrement the byte position:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobar</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan'><a href="#scan-instance_method" title="StringScanner#scan (method)">scan</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; &quot;foo&quot; # Match found.
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span>         <span class='comment'># =&gt; 3     # Byte position incremented.
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan'><a href="#scan-instance_method" title="StringScanner#scan (method)">scan</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; nil   # Match not found.
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='comment'># =&gt; 3             # Byte position not changed.</span></code></pre>

<p>Some methods implicitly modify the byte position;
see:</p>

<ul>
<li><a href="StringScanner.html#setting-the-target-substring">Setting the Target Substring</a>.</li>
<li><a href="StringScanner.html#traversing-the-target-substring">Traversing the Target Substring</a>.</li>
</ul>

<p>The values of these methods are derived directly from the values of <a href="#pos-instance_method" title="StringScanner#pos (method)">#pos</a> and <a href="#string-instance_method" title="StringScanner#string (method)">#string</a>:</p>

<ul>
<li><a href="#charpos-instance_method" title="StringScanner#charpos (method)">#charpos</a>: the <a href="StringScanner.html#character-position">character position</a>.</li>
<li><a href="#rest-instance_method" title="StringScanner#rest (method)">#rest</a>: the <a href="StringScanner.html#target-substring">target substring</a>.</li>
<li><a href="#rest_size-instance_method" title="StringScanner#rest_size (method)">#rest_size</a>: <code>rest.size</code>.</li>
</ul>

<h3>Character Position</h3>

<p>The character position is a zero-based index into the <em>characters</em>
in the stored string;
for a new <code>StringScanner</code> object, the character position is zero.</p>

<p>\Method <a href="#charpos-instance_method" title="StringScanner#charpos (method)">#charpos</a> returns the character position;
its value may not be reset explicitly.</p>

<p>Some methods change (increment or reset) the character position;
see:</p>

<ul>
<li><a href="StringScanner.html#setting-the-target-substring">Setting the Target Substring</a>.</li>
<li><a href="StringScanner.html#traversing-the-target-substring">Traversing the Target Substring</a>.</li>
</ul>

<p>Example (string includes multi-byte characters):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='const'>ENGLISH_TEXT</span>) <span class='comment'># Five 1-byte characters.
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_concat'><a href="#concat-instance_method" title="StringScanner#concat (method)">concat</a></span>(<span class='const'>HIRAGANA_TEXT</span>)             <span class='comment'># Five 3-byte characters
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_string'><a href="#string-instance_method" title="StringScanner#string (method)">string</a></span> <span class='comment'># =&gt; &quot;Helloこんにちは&quot;       # Twenty bytes in all.
</span><span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'># Situation:
</span><span class='comment'>#   pos:       0
</span><span class='comment'>#   charpos:   0
</span><span class='comment'>#   rest:      &quot;Helloこんにちは&quot;
</span><span class='comment'>#   rest_size: 20
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan'><a href="#scan-instance_method" title="StringScanner#scan (method)">scan</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>Hello</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; &quot;Hello&quot; # Five 1-byte characters.
</span><span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'># Situation:
</span><span class='comment'>#   pos:       5
</span><span class='comment'>#   charpos:   5
</span><span class='comment'>#   rest:      &quot;こんにちは&quot;
</span><span class='comment'>#   rest_size: 15
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_getch'><a href="#getch-instance_method" title="StringScanner#getch (method)">getch</a></span>         <span class='comment'># =&gt; &quot;こ&quot;    # One 3-byte character.
</span><span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'># Situation:
</span><span class='comment'>#   pos:       8
</span><span class='comment'>#   charpos:   6
</span><span class='comment'>#   rest:      &quot;んにちは&quot;
</span><span class='comment'>#   rest_size: 12</span></code></pre>

<h2>Target Substring</h2>

<p>The target substring is the part of the <a href="StringScanner.html#stored-string">stored string</a>
that extends from the current <a href="StringScanner.html#byte-position-position-">byte position</a> to the end of the stored string;
it is always either:</p>

<ul>
<li>The entire stored string (byte position is zero).</li>
<li>A trailing substring of the stored string (byte position positive).</li>
</ul>

<p>The target substring is returned by method <a href="#rest-instance_method" title="StringScanner#rest (method)">#rest</a>,
and its size is returned by method <a href="#rest_size-instance_method" title="StringScanner#rest_size (method)">#rest_size</a>.</p>

<p>Examples:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobarbaz</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'># Situation:
</span><span class='comment'>#   pos:       0
</span><span class='comment'>#   charpos:   0
</span><span class='comment'>#   rest:      &quot;foobarbaz&quot;
</span><span class='comment'>#   rest_size: 9
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>3</span>
<span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'># Situation:
</span><span class='comment'>#   pos:       3
</span><span class='comment'>#   charpos:   3
</span><span class='comment'>#   rest:      &quot;barbaz&quot;
</span><span class='comment'>#   rest_size: 6
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>9</span>
<span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'># Situation:
</span><span class='comment'>#   pos:       9
</span><span class='comment'>#   charpos:   9
</span><span class='comment'>#   rest:      &quot;&quot;
</span><span class='comment'>#   rest_size: 0</span></code></pre>

<h3>Setting the Target Substring</h3>

<p>The target substring is set whenever:</p>

<ul>
<li>The <a href="StringScanner.html#stored-string">stored string</a> is set (position reset to zero; target substring set to stored string).</li>
<li>The <a href="StringScanner.html#byte-position-position-">byte position</a> is set (target substring adjusted accordingly).</li>
</ul>

<h3>Querying the Target Substring</h3>

<p>This table summarizes (details and examples at the links):</p>

<table><thead>
<tr>
<th>Method</th>
<th>Returns</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#rest-instance_method" title="StringScanner#rest (method)">#rest</a></td>
<td>Target substring.</td>
</tr>
<tr>
<td><a href="#rest_size-instance_method" title="StringScanner#rest_size (method)">#rest_size</a></td>
<td>Size (bytes) of target substring.</td>
</tr>
</tbody></table>

<h3>Searching the Target Substring</h3>

<p>A <em>search</em> method examines the target substring,
but does not advance the <a href="StringScanner.html#positions">positions</a>
or (by implication) shorten the target substring.</p>

<p>This table summarizes (details and examples at the links):</p>

<table><thead>
<tr>
<th>Method</th>
<th>Returns</th>
<th>Sets Match Values?</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#check-instance_method" title="StringScanner#check (method)">#check</a>(pattern)</td>
<td>Matched leading substring or <code>nil</code>.</td>
<td>Yes.</td>
</tr>
<tr>
<td><a href="#check_until-instance_method" title="StringScanner#check_until (method)">#check_until</a>(pattern)</td>
<td>Matched substring (anywhere) or <code>nil</code>.</td>
<td>Yes.</td>
</tr>
<tr>
<td><a href="#exist%3F-instance_method" title="StringScanner#exist? (method)">#exist?</a>(pattern)</td>
<td>Matched substring (anywhere) end index.</td>
<td>Yes.</td>
</tr>
<tr>
<td><a href="#match%3F-instance_method" title="StringScanner#match? (method)">#match?</a>(pattern)</td>
<td>Size of matched leading substring or <code>nil</code>.</td>
<td>Yes.</td>
</tr>
<tr>
<td><a href="#peek-instance_method" title="StringScanner#peek (method)">#peek</a>(size)</td>
<td>Leading substring of given length (bytes).</td>
<td>No.</td>
</tr>
<tr>
<td><a href="#peek_byte-instance_method" title="StringScanner#peek_byte (method)">#peek_byte</a></td>
<td>Integer leading byte or <code>nil</code>.</td>
<td>No.</td>
</tr>
<tr>
<td><a href="#rest-instance_method" title="StringScanner#rest (method)">#rest</a></td>
<td>Target substring (from byte position to end).</td>
<td>No.</td>
</tr>
</tbody></table>

<h3>Traversing the Target Substring</h3>

<p>A <em>traversal</em> method examines the target substring,
and, if successful:</p>

<ul>
<li>Advances the <a href="StringScanner.html#positions">positions</a>.</li>
<li>Shortens the target substring.</li>
</ul>

<p>This table summarizes (details and examples at links):</p>

<table><thead>
<tr>
<th>Method</th>
<th>Returns</th>
<th>Sets Match Values?</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#get_byte-instance_method" title="StringScanner#get_byte (method)">#get_byte</a></td>
<td>Leading byte or <code>nil</code>.</td>
<td>No.</td>
</tr>
<tr>
<td><a href="#getch-instance_method" title="StringScanner#getch (method)">#getch</a></td>
<td>Leading character or <code>nil</code>.</td>
<td>No.</td>
</tr>
<tr>
<td><a href="#scan-instance_method" title="StringScanner#scan (method)">#scan</a>(pattern)</td>
<td>Matched leading substring or <code>nil</code>.</td>
<td>Yes.</td>
</tr>
<tr>
<td><a href="#scan_byte-instance_method" title="StringScanner#scan_byte (method)">#scan_byte</a></td>
<td>Integer leading byte or <code>nil</code>.</td>
<td>No.</td>
</tr>
<tr>
<td><a href="#scan_until-instance_method" title="StringScanner#scan_until (method)">#scan_until</a>(pattern)</td>
<td>Matched substring (anywhere) or <code>nil</code>.</td>
<td>Yes.</td>
</tr>
<tr>
<td><a href="#skip-instance_method" title="StringScanner#skip (method)">#skip</a>(pattern)</td>
<td>Matched leading substring size or <code>nil</code>.</td>
<td>Yes.</td>
</tr>
<tr>
<td><a href="#skip_until-instance_method" title="StringScanner#skip_until (method)">#skip_until</a>(pattern)</td>
<td>Position delta to end-of-matched-substring or <code>nil</code>.</td>
<td>Yes.</td>
</tr>
<tr>
<td><a href="#unscan-instance_method" title="StringScanner#unscan (method)">#unscan</a></td>
<td><code>self</code>.</td>
<td>No.</td>
</tr>
</tbody></table>

<h2>Querying the Scanner</h2>

<p>Each of these methods queries the scanner object
without modifying it (details and examples at links)</p>

<table><thead>
<tr>
<th>Method</th>
<th>Returns</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#beginning_of_line%3F-instance_method" title="StringScanner#beginning_of_line? (method)">#beginning_of_line?</a></td>
<td><code>true</code> or <code>false</code>.</td>
</tr>
<tr>
<td><a href="#charpos-instance_method" title="StringScanner#charpos (method)">#charpos</a></td>
<td>Character position.</td>
</tr>
<tr>
<td><a href="#eos%3F-instance_method" title="StringScanner#eos? (method)">#eos?</a></td>
<td><code>true</code> or <code>false</code>.</td>
</tr>
<tr>
<td><a href="#fixed_anchor%3F-instance_method" title="StringScanner#fixed_anchor? (method)">#fixed_anchor?</a></td>
<td><code>true</code> or <code>false</code>.</td>
</tr>
<tr>
<td><a href="#inspect-instance_method" title="StringScanner#inspect (method)">#inspect</a></td>
<td>String representation of <code>self</code>.</td>
</tr>
<tr>
<td><a href="#pos-instance_method" title="StringScanner#pos (method)">#pos</a></td>
<td>Byte position.</td>
</tr>
<tr>
<td><a href="#rest-instance_method" title="StringScanner#rest (method)">#rest</a></td>
<td>Target substring.</td>
</tr>
<tr>
<td><a href="#rest_size-instance_method" title="StringScanner#rest_size (method)">#rest_size</a></td>
<td>Size of target substring.</td>
</tr>
<tr>
<td><a href="#string-instance_method" title="StringScanner#string (method)">#string</a></td>
<td>Stored string.</td>
</tr>
</tbody></table>

<h2>Matching</h2>

<p><code>StringScanner</code> implements pattern matching via Ruby class <a href="../Core/Regexp.html">Regexp</a>,
and its matching behaviors are the same as Ruby&#39;s
except for the <a href="StringScanner.html#fixed-anchor-property">fixed-anchor property</a>.</p>

<h3>Matcher Methods</h3>

<p>Each <i>matcher method</i> takes a single argument <code>pattern</code>,
and attempts to find a matching substring in the <a href="StringScanner.html#target-substring">target substring</a>.</p>

<table><thead>
<tr>
<th>Method</th>
<th>Pattern Type</th>
<th>Matches Target Substring</th>
<th>Success Return</th>
<th>May Update Positions?</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#check-instance_method" title="StringScanner#check (method)">#check</a></td>
<td>Regexp or String.</td>
<td>At beginning.</td>
<td>Matched substring.</td>
<td>No.</td>
</tr>
<tr>
<td><a href="#check_until-instance_method" title="StringScanner#check_until (method)">#check_until</a></td>
<td>Regexp or String.</td>
<td>Anywhere.</td>
<td>Substring.</td>
<td>No.</td>
</tr>
<tr>
<td><a href="#match%3F-instance_method" title="StringScanner#match? (method)">#match?</a></td>
<td>Regexp or String.</td>
<td>At beginning.</td>
<td>Match size.</td>
<td>No.</td>
</tr>
<tr>
<td><a href="#exist%3F-instance_method" title="StringScanner#exist? (method)">#exist?</a></td>
<td>Regexp or String.</td>
<td>Anywhere.</td>
<td>Substring size.</td>
<td>No.</td>
</tr>
<tr>
<td><a href="#scan-instance_method" title="StringScanner#scan (method)">#scan</a></td>
<td>Regexp or String.</td>
<td>At beginning.</td>
<td>Matched substring.</td>
<td>Yes.</td>
</tr>
<tr>
<td><a href="#scan_until-instance_method" title="StringScanner#scan_until (method)">#scan_until</a></td>
<td>Regexp or String.</td>
<td>Anywhere.</td>
<td>Substring.</td>
<td>Yes.</td>
</tr>
<tr>
<td><a href="#skip-instance_method" title="StringScanner#skip (method)">#skip</a></td>
<td>Regexp or String.</td>
<td>At beginning.</td>
<td>Match size.</td>
<td>Yes.</td>
</tr>
<tr>
<td><a href="#skip_until-instance_method" title="StringScanner#skip_until (method)">#skip_until</a></td>
<td>Regexp or String.</td>
<td>Anywhere.</td>
<td>Substring size.</td>
<td>Yes.</td>
</tr>
</tbody></table>

<p><br></p>

<p>Which matcher you choose will depend on:</p>

<ul>
<li><p>Where you want to find a match:</p>

<ul>
<li>Only at the beginning of the target substring:
#check, #match?, #scan, #skip.</li>
<li>Anywhere in the target substring:
#check_until, #exist?, #scan_until, #skip_until.</li>
</ul></li>
<li><p>Whether you want to:</p>

<ul>
<li>Traverse, by advancing the positions:
#scan, #scan_until, #skip, #skip_until.</li>
<li>Keep the positions unchanged:
#check, #check_until, #match?, #exist?.</li>
</ul></li>
<li><p>What you want for the return value:</p>

<ul>
<li>The matched substring: #check, #scan.</li>
<li>The substring: #check_until, #scan_until.</li>
<li>The match size: #match?, #skip.</li>
<li>The substring size: #exist?, #skip_until.</li>
</ul></li>
</ul>

<h3>Match Values</h3>

<p>The <i>match values</i> in a <code>StringScanner</code> object
generally contain the results of the most recent attempted match.</p>

<p>Each match value may be thought of as:</p>

<ul>
<li><em>Clear</em>: Initially, or after an unsuccessful match attempt:
usually, <code>false</code>, <code>nil</code>, or <code>{}</code>.</li>
<li><em>Set</em>: After a successful match attempt:
<code>true</code>, string, array, or hash.</li>
</ul>

<p>Each of these methods clears match values:</p>

<ul>
<li><a href="#new-class_method" title="StringScanner.new (method)">.new</a>(string).</li>
<li><a href="#reset-instance_method" title="StringScanner#reset (method)">#reset</a>.</li>
<li><a href="#terminate-instance_method" title="StringScanner#terminate (method)">#terminate</a>.</li>
</ul>

<p>Each of these methods attempts a match based on a pattern,
and either sets match values (if successful) or clears them (if not);</p>

<ul>
<li><a href="#check-instance_method" title="StringScanner#check (method)">#check</a>(pattern)</li>
<li><a href="#check_until-instance_method" title="StringScanner#check_until (method)">#check_until</a>(pattern)</li>
<li><a href="#exist%3F-instance_method" title="StringScanner#exist? (method)">#exist?</a>(pattern)</li>
<li><a href="#match%3F-instance_method" title="StringScanner#match? (method)">#match?</a>(pattern)</li>
<li><a href="#scan-instance_method" title="StringScanner#scan (method)">#scan</a>(pattern)</li>
<li><a href="#scan_until-instance_method" title="StringScanner#scan_until (method)">#scan_until</a>(pattern)</li>
<li><a href="#skip-instance_method" title="StringScanner#skip (method)">#skip</a>(pattern)</li>
<li><a href="#skip_until-instance_method" title="StringScanner#skip_until (method)">#skip_until</a>(pattern)</li>
</ul>

<h4>Basic Match Values</h4>

<p>Basic match values are those not related to captures.</p>

<p>Each of these methods returns a basic match value:</p>

<table><thead>
<tr>
<th>Method</th>
<th>Return After Match</th>
<th>Return After No Match</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#matched%3F-instance_method" title="StringScanner#matched? (method)">#matched?</a></td>
<td><code>true</code>.</td>
<td><code>false</code>.</td>
</tr>
<tr>
<td><a href="#matched_size-instance_method" title="StringScanner#matched_size (method)">#matched_size</a></td>
<td>Size of matched substring.</td>
<td><code>nil</code>.</td>
</tr>
<tr>
<td><a href="#matched-instance_method" title="StringScanner#matched (method)">#matched</a></td>
<td>Matched substring.</td>
<td><code>nil</code>.</td>
</tr>
<tr>
<td><a href="#pre_match-instance_method" title="StringScanner#pre_match (method)">#pre_match</a></td>
<td>Substring preceding matched substring.</td>
<td><code>nil</code>.</td>
</tr>
<tr>
<td><a href="#post_match-instance_method" title="StringScanner#post_match (method)">#post_match</a></td>
<td>Substring following matched substring.</td>
<td><code>nil</code>.</td>
</tr>
</tbody></table>

<p><br></p>

<p>See examples below.</p>

<h4>Captured Match Values</h4>

<p>Captured match values are those related to <a href="../Core/Regexp.html#label-Groups-and-Captures">captures</a>.</p>

<p>Each of these methods returns a captured match value:</p>

<table><thead>
<tr>
<th>Method</th>
<th>Return After Match</th>
<th>Return After No Match</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#size-instance_method" title="StringScanner#size (method)">#size</a></td>
<td>Count of captured substrings.</td>
<td><code>nil</code>.</td>
</tr>
<tr>
<td><a href="#[]-instance_method" title="StringScanner#[] (method)">#[]</a>(n)</td>
<td><tt>n</tt>th captured substring.</td>
<td><code>nil</code>.</td>
</tr>
<tr>
<td><a href="#captures-instance_method" title="StringScanner#captures (method)">#captures</a></td>
<td>Array of all captured substrings.</td>
<td><code>nil</code>.</td>
</tr>
<tr>
<td><a href="#values_at-instance_method" title="StringScanner#values_at (method)">#values_at</a>(*n)</td>
<td>Array of specified captured substrings.</td>
<td><code>nil</code>.</td>
</tr>
<tr>
<td><a href="#named_captures-instance_method" title="StringScanner#named_captures (method)">#named_captures</a></td>
<td>Hash of named captures.</td>
<td><tt>{}</tt>.</td>
</tr>
</tbody></table>

<p><br></p>

<p>See examples below.</p>

<h4>Match Values Examples</h4>

<p>Successful basic match attempt (no captures):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobarbaz</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_exist?'><a href="#exist%3F-instance_method" title="StringScanner#exist? (method)">exist?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>bar</span><span class='regexp_end'>/</span></span>)
<span class='id identifier rubyid_put_match_values'>put_match_values</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'># Basic match values:
</span><span class='comment'>#   matched?:       true
</span><span class='comment'>#   matched_size:   3
</span><span class='comment'>#   pre_match:      &quot;foo&quot;
</span><span class='comment'>#   matched  :      &quot;bar&quot;
</span><span class='comment'>#   post_match:     &quot;baz&quot;
</span><span class='comment'># Captured match values:
</span><span class='comment'>#   size:           1
</span><span class='comment'>#   captures:       []
</span><span class='comment'>#   named_captures: {}
</span><span class='comment'>#   values_at:      [&quot;bar&quot;, nil]
</span><span class='comment'>#   []:
</span><span class='comment'>#     [0]:          &quot;bar&quot;
</span><span class='comment'>#     [1]:          nil</span></code></pre>

<p>Failed basic match attempt (no captures);</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobarbaz</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_exist?'><a href="#exist%3F-instance_method" title="StringScanner#exist? (method)">exist?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>nope</span><span class='regexp_end'>/</span></span>)
<span class='id identifier rubyid_match_values_cleared?'>match_values_cleared?</span>(<span class='id identifier rubyid_scanner'>scanner</span>) <span class='comment'># =&gt; true</span></code></pre>

<p>Successful unnamed capture match attempt:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobarbazbatbam</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_exist?'><a href="#exist%3F-instance_method" title="StringScanner#exist? (method)">exist?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(foo)bar(baz)bat(bam)</span><span class='regexp_end'>/</span></span>)
<span class='id identifier rubyid_put_match_values'>put_match_values</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'># Basic match values:
</span><span class='comment'>#   matched?:       true
</span><span class='comment'>#   matched_size:   15
</span><span class='comment'>#   pre_match:      &quot;&quot;
</span><span class='comment'>#   matched  :      &quot;foobarbazbatbam&quot;
</span><span class='comment'>#   post_match:     &quot;&quot;
</span><span class='comment'># Captured match values:
</span><span class='comment'>#   size:           4
</span><span class='comment'>#   captures:       [&quot;foo&quot;, &quot;baz&quot;, &quot;bam&quot;]
</span><span class='comment'>#   named_captures: {}
</span><span class='comment'>#   values_at:      [&quot;foobarbazbatbam&quot;, &quot;foo&quot;, &quot;baz&quot;, &quot;bam&quot;, nil]
</span><span class='comment'>#   []:
</span><span class='comment'>#     [0]:          &quot;foobarbazbatbam&quot;
</span><span class='comment'>#     [1]:          &quot;foo&quot;
</span><span class='comment'>#     [2]:          &quot;baz&quot;
</span><span class='comment'>#     [3]:          &quot;bam&quot;
</span><span class='comment'>#     [4]:          nil</span></code></pre>

<p>Successful named capture match attempt;
same as unnamed above, except for <a href="#named_captures-instance_method" title="StringScanner#named_captures (method)">#named_captures</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobarbazbatbam</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_exist?'><a href="#exist%3F-instance_method" title="StringScanner#exist? (method)">exist?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;x&gt;foo)bar(?&lt;y&gt;baz)bat(?&lt;z&gt;bam)</span><span class='regexp_end'>/</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_named_captures'><a href="#named_captures-instance_method" title="StringScanner#named_captures (method)">named_captures</a></span> <span class='comment'># =&gt; {&quot;x&quot;=&gt;&quot;foo&quot;, &quot;y&quot;=&gt;&quot;baz&quot;, &quot;z&quot;=&gt;&quot;bam&quot;}</span></code></pre>

<p>Failed unnamed capture match attempt:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>somestring</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_exist?'><a href="#exist%3F-instance_method" title="StringScanner#exist? (method)">exist?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(foo)bar(baz)bat(bam)</span><span class='regexp_end'>/</span></span>)
<span class='id identifier rubyid_match_values_cleared?'>match_values_cleared?</span>(<span class='id identifier rubyid_scanner'>scanner</span>) <span class='comment'># =&gt; true</span></code></pre>

<p>Failed named capture match attempt;
same as unnamed above, except for <a href="#named_captures-instance_method" title="StringScanner#named_captures (method)">#named_captures</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>somestring</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_exist?'><a href="#exist%3F-instance_method" title="StringScanner#exist? (method)">exist?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;x&gt;foo)bar(?&lt;y&gt;baz)bat(?&lt;z&gt;bam)</span><span class='regexp_end'>/</span></span>)
<span class='id identifier rubyid_match_values_cleared?'>match_values_cleared?</span>(<span class='id identifier rubyid_scanner'>scanner</span>) <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_named_captures'><a href="#named_captures-instance_method" title="StringScanner#named_captures (method)">named_captures</a></span> <span class='comment'># =&gt; {&quot;x&quot;=&gt;nil, &quot;y&quot;=&gt;nil, &quot;z&quot;=&gt;nil}</span></code></pre>

<h2>Fixed-Anchor Property</h2>

<p>Pattern matching in <code>StringScanner</code> is the same as in Ruby&#39;s,
except for its fixed-anchor property,
which determines the meaning of <code>&#39;\A&#39;</code>:</p>

<ul>
<li><p><code>false</code> (the default): matches the current byte position.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobar</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan'><a href="#scan-instance_method" title="StringScanner#scan (method)">scan</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A.</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; &quot;f&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan'><a href="#scan-instance_method" title="StringScanner#scan (method)">scan</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A.</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; &quot;o&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan'><a href="#scan-instance_method" title="StringScanner#scan (method)">scan</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A.</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; &quot;o&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan'><a href="#scan-instance_method" title="StringScanner#scan (method)">scan</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A.</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; &quot;b&quot;</span></code></pre></li>
<li><p><code>true</code>: matches the beginning of the target substring;
never matches unless the byte position is zero:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobar</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>fixed_anchor:</span> <span class='kw'>true</span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan'><a href="#scan-instance_method" title="StringScanner#scan (method)">scan</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A.</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; &quot;f&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan'><a href="#scan-instance_method" title="StringScanner#scan (method)">scan</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A.</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_reset'><a href="#reset-instance_method" title="StringScanner#reset (method)">reset</a></span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan'><a href="#scan-instance_method" title="StringScanner#scan (method)">scan</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A.</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; &quot;f&quot;</span></code></pre></li>
</ul>

<p>The fixed-anchor property is set when the <code>StringScanner</code> object is created,
and may not be modified
(see <a href="#new-class_method" title="StringScanner.new (method)">.new</a>);
method <a href="#fixed_anchor%3F-instance_method" title="StringScanner#fixed_anchor? (method)">#fixed_anchor?</a> returns the setting.</p>

  </div>
</div>
</div>
<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature priv'>
      <a href="#new-class_method" title="new (class method)">.<strong>new</strong>(string, fixed_anchor: false)  &#x21d2; string_scanner </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <p>Returns a new <code>StringScanner</code> object whose <a href="StringScanner.html#stored-string">stored string</a>
is the given <a href="#string-instance_method" title="StringScanner#string (method)">#string</a>;
sets the <a href="StringScanner.html#fixed-anchor-property">fixed-anchor property</a>:</p>    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#must_C_version-class_method" title=".must_C_version (class method)">.<strong>must_C_version</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- class_method_summary -->

<h2 class='h2_sum' id='instance_attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#beginning_of_line%3F-instance_method" title="#beginning_of_line? (instance method)">#<strong>beginning_of_line?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <p>Returns whether the <a href="StringScanner.html#byte-position-position-">position</a> is at the beginning of a line;
that is, at the beginning of the <a href="StringScanner.html#stored-string">stored string</a>
or immediately after a newline:</p>    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#eos%3F-instance_method" title="#eos? (instance method)">#<strong>eos?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <p>Returns whether the <a href="StringScanner.html#byte-position-position-">position</a>
is at the end of the <a href="StringScanner.html#stored-string">stored string</a>:</p>    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#fixed_anchor%3F-instance_method" title="#fixed_anchor? (instance method)">#<strong>fixed_anchor?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <p>Returns whether the <a href="StringScanner.html#fixed-anchor-property">fixed-anchor property</a> is set.</p>    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#matched-instance_method" title="#matched (instance method)">#<strong>matched</strong>  &#x21d2; matched_substring<sup>?</sup> </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <p>Returns the matched substring from the most recent <a href="StringScanner.html#matching">match</a> attempt
if it was successful,
or <code>nil</code> otherwise;
see <a href="StringScanner.html#basic-match-values">Basic Matched Values</a>:</p>    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#matched%3F-instance_method" title="#matched? (instance method)">#<strong>matched?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <p>Returns <code>true</code> of the most recent <a href="StringScanner.html#matching">match attempt</a> was successful,
<code>false</code> otherwise;
see <a href="StringScanner.html#basic-match-values">Basic Matched Values</a>:</p>    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#pointer-instance_method" title="#pointer (instance method)">#<strong>pointer</strong>  &#x21d2; byte_position </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#pos-instance_method" title="StringScanner#pos (method)">#pos</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#pointer-instance_method" title="#pos (instance method)">#<strong>pos</strong>  &#x21d2; byte_position </a>
      (also: #pointer)
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <p>Returns the integer <a href="StringScanner.html#byte-position-position-">byte position</a>,
which may be different from the <a href="StringScanner.html#character-position">character position</a>:</p>    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#pos=-instance_method" title="#pos= (instance method)">#<strong>pos=</strong>(n)  &#x21d2; n </a>
      (also: #pointer=)
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <p>Sets the <a href="StringScanner.html#byte-position-position-">byte position</a> and the <a href="StringScanner.html#positions">character position</a>;
returns <code>n</code>.</p>    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#rest-instance_method" title="#rest (instance method)">#<strong>rest</strong>  &#x21d2; target_substring </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <p>Returns the &#39;rest&#39; of the <a href="StringScanner.html#stored-string">stored string</a> (all after the current <a href="StringScanner.html#byte-position-position-">position</a>),
which is the <a href="StringScanner.html#target-substring">target substring</a>:</p>    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#string-instance_method" title="#string (instance method)">#<strong>string</strong>  &#x21d2; stored_string </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <p>Returns the <a href="StringScanner.html#stored-string">stored string</a>:</p>    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#string=-instance_method" title="#string= (instance method)">#<strong>string=</strong>(other_string)  &#x21d2; other_string </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <p>Replaces the <a href="StringScanner.html#stored-string">stored string</a> with the given <code>other_string</code>:</p>    </div>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#rest%3F-instance_method" title="#rest? (instance method)">#<strong>rest?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- instance_attribute_summary -->

<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#<<-instance_method" title="#&lt;&lt; (instance method)">#<strong>&lt;&lt;</strong>(more_string)  &#x21d2; self </a>
      (also: #concat)
    </span>
    <div class='summary_desc'>
      <p>Appends the given <code>more_string</code>
to the <a href="StringScanner.html#stored-string">stored string</a>.</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#[]-instance_method" title="#[] (instance method)">#<strong>[]</strong>(specifier)  &#x21d2; substring<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <p>Returns a captured substring or <code>nil</code>;
see <a href="StringScanner.html#captured-match-values">Captured Match Values</a>.</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#captures-instance_method" title="#captures (instance method)">#<strong>captures</strong>  &#x21d2; substring_array<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <p>Returns the array of <a href="StringScanner.html#captured-match-values">captured match values</a> at indexes <code>(1..)</code>
if the most recent match attempt succeeded, or <code>nil</code> otherwise:</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#charpos-instance_method" title="#charpos (instance method)">#<strong>charpos</strong>  &#x21d2; character_position </a>
    </span>
    <div class='summary_desc'>
      <p>Returns the <a href="StringScanner.html#character-position">character position</a> (initially zero),
which may be different from the <a href="StringScanner.html#byte-position-position-">byte position</a>
given by method <a href="#pos-instance_method" title="StringScanner#pos (method)">#pos</a>:</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#check-instance_method" title="#check (instance method)">#<strong>check</strong>(pattern)  &#x21d2; matched_substring<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <p>Attempts to <a href="StringScanner.html#matching">match</a> the given <code>pattern</code>
at the beginning of the <a href="StringScanner.html#target-substring">target substring</a>;
does not modify the <a href="StringScanner.html#positions">positions</a>.</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#check_until-instance_method" title="#check_until (instance method)">#<strong>check_until</strong>(pattern)  &#x21d2; substring<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <p>Attempts to <a href="StringScanner.html#matching">match</a> the given <code>pattern</code>
anywhere (at any <a href="StringScanner.html#byte-position-position-">position</a>)
in the <a href="StringScanner.html#target-substring">target substring</a>;
does not modify the <a href="StringScanner.html#positions">positions</a>.</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#concat-instance_method" title="#concat (instance method)">#<strong>concat</strong>(more_string)  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#<<-instance_method" title="StringScanner#&lt;&lt; (method)">#&lt;&lt;</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#exist%3F-instance_method" title="#exist? (instance method)">#<strong>exist?</strong>(pattern)  &#x21d2; byte_offset<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <p>Attempts to <a href="StringScanner.html#matching">match</a> the given <code>pattern</code>
anywhere (at any <a href="StringScanner.html#byte-position-position-">position</a>)
n the <a href="StringScanner.html#target-substring">target substring</a>;
does not modify the <a href="StringScanner.html#positions">positions</a>.</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#get_byte-instance_method" title="#get_byte (instance method)">#<strong>get_byte</strong>  &#x21d2; byte_as_character<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <p>Returns the next byte, if available:</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#getch-instance_method" title="#getch (instance method)">#<strong>getch</strong>  &#x21d2; character<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <p>Returns the next (possibly multibyte) character,
if available:</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <p>Returns a string representation of <code>self</code> that may show:</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#match%3F-instance_method" title="#match? (instance method)">#<strong>match?</strong>(pattern)  &#x21d2; updated_position<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <p>Attempts to <a href="StringScanner.html#matching">match</a> the given <code>pattern</code>
at the beginning of the <a href="StringScanner.html#target-substring">target substring</a>;
does not modify the <a href="StringScanner.html#positions">positions</a>.</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#matched_size-instance_method" title="#matched_size (instance method)">#<strong>matched_size</strong>  &#x21d2; substring_size<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <p>Returns the size (in bytes) of the matched substring
from the most recent match <a href="StringScanner.html#matching">match attempt</a> if it was successful,
or <code>nil</code> otherwise;
see <a href="StringScanner.html#basic-match-values">Basic Matched Values</a>:</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#named_captures-instance_method" title="#named_captures (instance method)">#<strong>named_captures</strong>  &#x21d2; Hash </a>
    </span>
    <div class='summary_desc'>
      <p>Returns the array of captured match values at indexes (1..)
if the most recent match attempt succeeded, or nil otherwise;
see <a href="StringScanner.html#captured-match-values">Captured Match Values</a>:</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#peek-instance_method" title="#peek (instance method)">#<strong>peek</strong>(length)  &#x21d2; substring </a>
    </span>
    <div class='summary_desc'>
      <p>Returns the substring <code>string[pos, length]</code>;
does not update <a href="StringScanner.html#match-values">match values</a> or <a href="StringScanner.html#positions">positions</a>:</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#peek_byte-instance_method" title="#peek_byte (instance method)">#<strong>peek_byte</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Peeks at the current byte and returns it as an integer.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#post_match-instance_method" title="#post_match (instance method)">#<strong>post_match</strong>  &#x21d2; substring </a>
    </span>
    <div class='summary_desc'>
      <p>Returns the substring that follows the matched substring
from the most recent match attempt if it was successful,
or <code>nil</code> otherwise;
see <a href="StringScanner.html#basic-match-values">Basic Match Values</a>:</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#pre_match-instance_method" title="#pre_match (instance method)">#<strong>pre_match</strong>  &#x21d2; substring </a>
    </span>
    <div class='summary_desc'>
      <p>Returns the substring that precedes the matched substring
from the most recent match attempt if it was successful,
or <code>nil</code> otherwise;
see <a href="StringScanner.html#basic-match-values">Basic Match Values</a>:</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#reset-instance_method" title="#reset (instance method)">#<strong>reset</strong>  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <p>Sets both <a href="StringScanner.html#byte-position-position-">byte position</a> and <a href="StringScanner.html#character-position">character position</a> to zero,
and clears <a href="StringScanner.html#match-values">match values</a>;
returns <code>self</code>:</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#rest_size-instance_method" title="#rest_size (instance method)">#<strong>rest_size</strong>  &#x21d2; Integer </a>
    </span>
    <div class='summary_desc'>
      <p>Returns the size (in bytes) of the <a href="#rest-instance_method" title="StringScanner#rest (method)">#rest</a> of the <a href="StringScanner.html#stored-string">stored string</a>:</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#scan-instance_method" title="#scan (instance method)">#<strong>scan</strong>(pattern)  &#x21d2; substring<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <p>Attempts to <a href="StringScanner.html#matching">match</a> the given <code>pattern</code>
at the beginning of the <a href="StringScanner.html#target-substring">target substring</a>.</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#scan_byte-instance_method" title="#scan_byte (instance method)">#<strong>scan_byte</strong>  &#x21d2; integer_byte </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Scans one byte and returns it as an integer.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#scan_integer-instance_method" title="#scan_integer (instance method)">#<strong>scan_integer</strong>(base: 10)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>If <code>base</code> isn’t provided or is <code>10</code>, then it is equivalent to calling <a href="#scan-instance_method" title="StringScanner#scan (method)">#scan</a> with a <code>[+-]?d+</code> pattern, and returns an Integer or nil.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#scan_until-instance_method" title="#scan_until (instance method)">#<strong>scan_until</strong>(pattern)  &#x21d2; substring<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <p>Attempts to <a href="StringScanner.html#matching">match</a> the given <code>pattern</code>
anywhere (at any <a href="StringScanner.html#byte-position-position-">position</a>) in the <a href="StringScanner.html#target-substring">target substring</a>.</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#size-instance_method" title="#size (instance method)">#<strong>size</strong>  &#x21d2; captures_count </a>
    </span>
    <div class='summary_desc'>
      <p>Returns the count of captures if the most recent match attempt succeeded, <code>nil</code> otherwise;
see <a href="StringScanner.html#captured-match-values">Captures Match Values</a>:</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#skip-instance_method" title="#skip (instance method)">#<strong>skip</strong>(pattern) match_size or nil)  </a>
    </span>
    <div class='summary_desc'>
      <p>Attempts to <a href="StringScanner.html#matching">match</a> the given <code>pattern</code>
at the beginning of the <a href="StringScanner.html#target-substring">target substring</a>;</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#skip_until-instance_method" title="#skip_until (instance method)">#<strong>skip_until</strong>(pattern)  &#x21d2; matched_substring_size<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <p>Attempts to <a href="StringScanner.html#matching">match</a> the given <code>pattern</code>
anywhere (at any <a href="StringScanner.html#byte-position-position-">position</a>) in the <a href="StringScanner.html#target-substring">target substring</a>;
does not modify the positions.</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#terminate-instance_method" title="#terminate (instance method)">#<strong>terminate</strong>  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <p>Sets the scanner to end-of-string;
returns <code>self</code>:</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#unscan-instance_method" title="#unscan (instance method)">#<strong>unscan</strong>  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <p>Sets the <a href="StringScanner.html#byte-position-position-">position</a> to its value previous to the recent successful
<a href="StringScanner.html#matching">match</a> attempt:</p>    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#values_at-instance_method" title="#values_at (instance method)">#<strong>values_at</strong>(*specifiers)  &#x21d2; array_of_captures<sup>?</sup> </a>
    </span>
    <div class='summary_desc'>
      <p>Returns an array of captured substrings, or <code>nil</code> of none.</p>    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#initialize_copy-instance_method" title="#dup (instance method)">#<strong>dup</strong>  &#x21d2; shallow_copy </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <p>Returns a shallow copy of <code>self</code>;
the <a href="StringScanner.html#stored-string">stored string</a> in the copy is the same string as in <code>self</code>.</p>    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#scan_full-instance_method" title="#scan_full (instance method)">#<strong>scan_full</strong>(re, s, f)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#search_full-instance_method" title="#search_full (instance method)">#<strong>search_full</strong>(re, s, f)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature priv nodoc'>
      <a href="#scan_base10_integer-instance_method" title="#scan_base10_integer (instance method)">#<strong>scan_base10_integer</strong>  </a>
    </span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature priv nodoc'>
      <a href="#scan_base16_integer-instance_method" title="#scan_base16_integer (instance method)">#<strong>scan_base16_integer</strong>  </a>
    </span>
    <span class='note title private'>private</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature priv first'>
    .<strong>new</strong>(string, fixed_anchor: false)  &#x21d2; <code>string_scanner</code>  <span class="extras">(<span class='priv'>private</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns a new <code>StringScanner</code> object whose <a href="StringScanner.html#stored-string">stored string</a>
is the given <a href="#string-instance_method" title="StringScanner#string (method)">#string</a>;
sets the <a href="StringScanner.html#fixed-anchor-property">fixed-anchor property</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'>new</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobarbaz</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_string'><a href="#string-instance_method" title="StringScanner#string (method)">string</a></span>        <span class='comment'># =&gt; &quot;foobarbaz&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_fixed_anchor?'><a href="#fixed_anchor%3F-instance_method" title="StringScanner#fixed_anchor? (method)">fixed_anchor?</a></span> <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'>#### Situation:
</span><span class='comment'>####   pos:       0
</span><span class='comment'>####   charpos:   0
</span><span class='comment'>####   rest:      &quot;foobarbaz&quot;
</span><span class='comment'>####   rest_size: 9</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L254-L282'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='254' data-end='282'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 254</span></pre>
<pre class='code cpp'>

static VALUE
strscan_initialize(int argc, VALUE *argv, VALUE self)
{
    struct strscanner *p;
    VALUE str, options;

    p = check_strscan(self);
    rb_scan_args(argc, argv, &quot;11&quot;, &amp;str, &amp;options);
    options = rb_check_hash_type(options);
    if (!NIL_P(options)) {
        VALUE fixed_anchor;
        ID keyword_ids[1];
        keyword_ids[0] = rb_intern(&quot;fixed_anchor&quot;);
        rb_get_kwargs(options, keyword_ids, 0, 1, &amp;fixed_anchor);
        if (fixed_anchor == Qundef) {
            p-&gt;fixed_anchor_p = false;
        }
        else {
            p-&gt;fixed_anchor_p = RTEST(fixed_anchor);
        }
    }
    else {
        p-&gt;fixed_anchor_p = false;
    }
    StringValue(str);
    RB_OBJ_WRITE(self, &amp;p-&gt;str, str);

    return self;
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="must_C_version-class_method">
  <h3 class='signature nodoc first'>
    .<strong>must_C_version</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L332-L336'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='332' data-end='336'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 332</span></pre>
<pre class='code cpp'>

static VALUE
strscan_s_mustc(VALUE self)
{
    return self;
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="beginning_of_line?-instance_method">
  <h3 class='signature ro first'>
    #<strong>beginning_of_line?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns whether the <a href="StringScanner.html#byte-position-position-">position</a> is at the beginning of a line;
that is, at the beginning of the <a href="StringScanner.html#stored-string">stored string</a>
or immediately after a newline:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='const'>MULTILINE_TEXT</span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_string'><a href="#string-instance_method" title="StringScanner#string (method)">string</a></span>
<span class='comment'># =&gt; &quot;Go placidly amid the noise and haste,\nand remember what peace there may be in silence.\n&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span>                <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_beginning_of_line?'>beginning_of_line?</span> <span class='comment'># =&gt; true
</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan_until'><a href="#scan_until-instance_method" title="StringScanner#scan_until (method)">scan_until</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>,</span><span class='regexp_end'>/</span></span>)    <span class='comment'># =&gt; &quot;Go placidly amid the noise and haste,&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_beginning_of_line?'>beginning_of_line?</span> <span class='comment'># =&gt; false
</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan'><a href="#scan-instance_method" title="StringScanner#scan (method)">scan</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\n</span><span class='regexp_end'>/</span></span>)         <span class='comment'># =&gt; &quot;\n&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_beginning_of_line?'>beginning_of_line?</span> <span class='comment'># =&gt; true
</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_terminate'><a href="#terminate-instance_method" title="StringScanner#terminate (method)">terminate</a></span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_beginning_of_line?'>beginning_of_line?</span> <span class='comment'># =&gt; true
</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_concat'><a href="#concat-instance_method" title="StringScanner#concat (method)">concat</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_terminate'><a href="#terminate-instance_method" title="StringScanner#terminate (method)">terminate</a></span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_beginning_of_line?'>beginning_of_line?</span> <span class='comment'># =&gt; false</span></code></pre>

<p><code>StringScanner#bol?</code> is an alias for <code>beginning_of_line?</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1445-L1454'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1445' data-end='1454'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1445</span></pre>
<pre class='code cpp'>

static VALUE
strscan_bol_p(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (CURPTR(p) &gt; S_PEND(p)) return Qnil;
    if (p-&gt;curr == 0) return Qtrue;
    return (*(CURPTR(p) - 1) == &#39;\n&#39;) ? Qtrue : Qfalse;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="eos?-instance_method">
  <h3 class='signature ro'>
    #<strong>eos?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns whether the <a href="StringScanner.html#byte-position-position-">position</a>
is at the end of the <a href="StringScanner.html#stored-string">stored string</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobarbaz</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_eos?'>eos?</span> <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>3</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_eos?'>eos?</span> <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_terminate'><a href="#terminate-instance_method" title="StringScanner#terminate (method)">terminate</a></span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_eos?'>eos?</span> <span class='comment'># =&gt; true</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1476-L1483'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1476' data-end='1483'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1476</span></pre>
<pre class='code cpp'>

static VALUE
strscan_eos_p(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    return EOS_P(p) ? Qtrue : Qfalse;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fixed_anchor?-instance_method">
  <h3 class='signature ro'>
    #<strong>fixed_anchor?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns whether the <a href="StringScanner.html#fixed-anchor-property">fixed-anchor property</a> is set.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L2112-L2118'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2112' data-end='2118'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 2112</span></pre>
<pre class='code cpp'>

static VALUE
strscan_fixed_anchor_p(VALUE self)
{
    struct strscanner *p;
    p = check_strscan(self);
    return p-&gt;fixed_anchor_p ? Qtrue : Qfalse;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="matched-instance_method">
  <h3 class='signature ro'>
    #<strong>matched</strong>  &#x21d2; <code>matched_substring</code><sup>?</sup>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns the matched substring from the most recent <a href="StringScanner.html#matching">match</a> attempt
if it was successful,
or <code>nil</code> otherwise;
see <a href="StringScanner.html#basic-match-values">Basic Matched Values</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobarbaz</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_matched'>matched</span>        <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>3</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="StringScanner#match? (method)">match?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>bar</span><span class='regexp_end'>/</span></span>)  <span class='comment'># =&gt; 3
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_matched'>matched</span>        <span class='comment'># =&gt; &quot;bar&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="StringScanner#match? (method)">match?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>nope</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_matched'>matched</span>        <span class='comment'># =&gt; nil</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1561-L1571'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1561' data-end='1571'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1561</span></pre>
<pre class='code cpp'>

static VALUE
strscan_matched(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (! MATCHED_P(p)) return Qnil;
    return extract_range(p,
                         adjust_register_position(p, p-&gt;regs.beg[0]),
                         adjust_register_position(p, p-&gt;regs.end[0]));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="matched?-instance_method">
  <h3 class='signature ro'>
    #<strong>matched?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns <code>true</code> of the most recent <a href="StringScanner.html#matching">match attempt</a> was successful,
<code>false</code> otherwise;
see <a href="StringScanner.html#basic-match-values">Basic Matched Values</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobarbaz</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_matched?'>matched?</span>       <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>3</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_exist?'><a href="#exist%3F-instance_method" title="StringScanner#exist? (method)">exist?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>baz</span><span class='regexp_end'>/</span></span>)  <span class='comment'># =&gt; 6
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_matched?'>matched?</span>       <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_exist?'><a href="#exist%3F-instance_method" title="StringScanner#exist? (method)">exist?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>nope</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_matched?'>matched?</span>       <span class='comment'># =&gt; false</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1529-L1536'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1529' data-end='1536'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1529</span></pre>
<pre class='code cpp'>

static VALUE
strscan_matched_p(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    return MATCHED_P(p) ? Qtrue : Qfalse;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pointer-instance_method">
  <h3 class='signature rw'>
    <div class='inline-block'>
      <span class='overload'>#<strong>pos</strong>  &#x21d2; <code>byte_position</code>  <span class="extras">(<span class='rw'>rw</span>)</span></span>
      <span class='overload'>#<strong>pointer</strong>  &#x21d2; <code>byte_position</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#pos-instance_method" title="StringScanner#pos (method)">#pos</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="pos-instance_method">
  <h3 class='signature rw'>
    #<strong>pos</strong>  &#x21d2; <code>byte_position</code>  <span class="extras">(<span class='rw'>rw</span>)</span>    <span class='aliases'>Also known as: <span class='names'>#pointer</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns the integer <a href="StringScanner.html#byte-position-position-">byte position</a>,
which may be different from the <a href="StringScanner.html#character-position">character position</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='const'>HIRAGANA_TEXT</span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_string'><a href="#string-instance_method" title="StringScanner#string (method)">string</a></span>  <span class='comment'># =&gt; &quot;こんにちは&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'>pos</span>     <span class='comment'># =&gt; 0
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_getch'><a href="#getch-instance_method" title="StringScanner#getch (method)">getch</a></span>   <span class='comment'># =&gt; &quot;こ&quot; # 3-byte character.
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_charpos'><a href="#charpos-instance_method" title="StringScanner#charpos (method)">charpos</a></span> <span class='comment'># =&gt; 1
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'>pos</span>     <span class='comment'># =&gt; 3</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L509-L516'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='509' data-end='516'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 509</span></pre>
<pre class='code cpp'>

static VALUE
strscan_get_pos(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    return LONG2NUM(p-&gt;curr);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pos=-instance_method">
  <h3 class='signature rw'>
    <div class='inline-block'>
      <span class='overload'>#<strong>pos=</strong>(n)  &#x21d2; <code>n</code>  <span class="extras">(<span class='rw'>rw</span>)</span></span>
      <span class='overload'>#<strong>pointer=</strong>(n)  &#x21d2; <code>n</code> </span>
    </div>
    <span class='aliases'>Also known as: <span class='names'>#pointer=</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Sets the <a href="StringScanner.html#byte-position-position-">byte position</a> and the <a href="StringScanner.html#positions">character position</a>;
returns <code>n</code>.</p>

<p>Does not affect <a href="StringScanner.html#match-values">match values</a>.</p>

<p>For non-negative <code>n</code>, sets the position to <code>n</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='const'>HIRAGANA_TEXT</span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_string'><a href="#string-instance_method" title="StringScanner#string (method)">string</a></span>  <span class='comment'># =&gt; &quot;こんにちは&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>3</span> <span class='comment'># =&gt; 3
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_rest'><a href="#rest-instance_method" title="StringScanner#rest (method)">rest</a></span>    <span class='comment'># =&gt; &quot;んにちは&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_charpos'><a href="#charpos-instance_method" title="StringScanner#charpos (method)">charpos</a></span> <span class='comment'># =&gt; 1</span></code></pre>

<p>For negative <code>n</code>, counts from the end of the <a href="StringScanner.html#stored-string">stored string</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>9</span> <span class='comment'># =&gt; -9
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span>      <span class='comment'># =&gt; 6
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_rest'><a href="#rest-instance_method" title="StringScanner#rest (method)">rest</a></span>     <span class='comment'># =&gt; &quot;にちは&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_charpos'><a href="#charpos-instance_method" title="StringScanner#charpos (method)">charpos</a></span>  <span class='comment'># =&gt; 2</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L538-L551'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='538' data-end='551'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 538</span></pre>
<pre class='code cpp'>

static VALUE
strscan_set_pos(VALUE self, VALUE v)
{
    struct strscanner *p;
    long i;

    GET_SCANNER(self, p);
    i = NUM2LONG(v);
    if (i &lt; 0) i += S_LEN(p);
    if (i &lt; 0) rb_raise(rb_eRangeError, &quot;index out of range&quot;);
    if (i &gt; S_LEN(p)) rb_raise(rb_eRangeError, &quot;index out of range&quot;);
    p-&gt;curr = i;
    return LONG2NUM(i);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="rest-instance_method">
  <h3 class='signature ro'>
    #<strong>rest</strong>  &#x21d2; <code>target_substring</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns the &#39;rest&#39; of the <a href="StringScanner.html#stored-string">stored string</a> (all after the current <a href="StringScanner.html#byte-position-position-">position</a>),
which is the <a href="StringScanner.html#target-substring">target substring</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobarbaz</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_rest'>rest</span> <span class='comment'># =&gt; &quot;foobarbaz&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>3</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_rest'>rest</span> <span class='comment'># =&gt; &quot;barbaz&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_terminate'><a href="#terminate-instance_method" title="StringScanner#terminate (method)">terminate</a></span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_rest'>rest</span> <span class='comment'># =&gt; &quot;&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1949-L1959'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1949' data-end='1959'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1949</span></pre>
<pre class='code cpp'>

static VALUE
strscan_rest(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (EOS_P(p)) {
        return str_new(p, &quot;&quot;, 0);
    }
    return extract_range(p, p-&gt;curr, S_LEN(p));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="rest?-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>rest?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1498-L1505'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1498' data-end='1505'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1498</span></pre>
<pre class='code cpp'>

static VALUE
strscan_rest_p(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    return EOS_P(p) ? Qfalse : Qtrue;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="string-instance_method">
  <h3 class='signature rw'>
    #<strong>string</strong>  &#x21d2; <code>stored_string</code>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns the <a href="StringScanner.html#stored-string">stored string</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobar</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_string'>string</span> <span class='comment'># =&gt; &quot;foobar&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_concat'><a href="#concat-instance_method" title="StringScanner#concat (method)">concat</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_string'>string</span> <span class='comment'># =&gt; &quot;foobarbaz&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L408-L415'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='408' data-end='415'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 408</span></pre>
<pre class='code cpp'>

static VALUE
strscan_get_string(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    return p-&gt;str;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="string=-instance_method">
  <h3 class='signature rw'>
    #<strong>string=</strong>(other_string)  &#x21d2; <code>other_string</code>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Replaces the <a href="StringScanner.html#stored-string">stored string</a> with the given <code>other_string</code>:</p>

<ul>
<li>Sets both <a href="StringScanner.html#positions">positions</a> to zero.</li>
<li>Clears <a href="StringScanner.html#match-values">match values</a>.</li>
<li>Returns <code>other_string</code>.</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobar</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan'><a href="#scan-instance_method" title="StringScanner#scan (method)">scan</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/</span></span>)
<span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'>#### Situation:
</span><span class='comment'>####   pos:       3
</span><span class='comment'>####   charpos:   3
</span><span class='comment'>####   rest:      &quot;bar&quot;
</span><span class='comment'>####   rest_size: 3
</span><span class='id identifier rubyid_match_values_cleared?'>match_values_cleared?</span>(<span class='id identifier rubyid_scanner'>scanner</span>) <span class='comment'># =&gt; false
</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_string'><a href="#string-instance_method" title="StringScanner#string (method)">string</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>baz</span><span class='tstring_end'>&#39;</span></span>         <span class='comment'># =&gt; &quot;baz&quot;
</span><span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'>#### Situation:
</span><span class='comment'>####   pos:       0
</span><span class='comment'>####   charpos:   0
</span><span class='comment'>####   rest:      &quot;baz&quot;
</span><span class='comment'>####   rest_size: 3
</span><span class='id identifier rubyid_match_values_cleared?'>match_values_cleared?</span>(<span class='id identifier rubyid_scanner'>scanner</span>) <span class='comment'># =&gt; true</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L452-L462'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='452' data-end='462'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 452</span></pre>
<pre class='code cpp'>

static VALUE
strscan_set_string(VALUE self, VALUE str)
{
    struct strscanner *p = check_strscan(self);

    StringValue(str);
    RB_OBJ_WRITE(self, &amp;p-&gt;str, str);
    p-&gt;curr = 0;
    CLEAR_MATCH_STATUS(p);
    return str;
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="<<-instance_method">
  <h3 class='signature  first'>
    #<strong>&lt;&lt;</strong>(more_string)  &#x21d2; <code>self</code>     <span class='aliases'>Also known as: <span class='names'>#concat</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    <ul>
<li>Appends the given <code>more_string</code>
to the <a href="StringScanner.html#stored-string">stored string</a>.</li>
<li>Returns <code>self</code>.</li>
<li>Does not affect the <a href="StringScanner.html#positions">positions</a>
or <a href="StringScanner.html#match-values">match values</a>.</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_string'><a href="#string-instance_method" title="StringScanner#string (method)">string</a></span>           <span class='comment'># =&gt; &quot;foo&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_terminate'><a href="#terminate-instance_method" title="StringScanner#terminate (method)">terminate</a></span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_concat'><a href="#concat-instance_method" title="StringScanner#concat (method)">concat</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>barbaz</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; #&lt;StringScanner 3/9 &quot;foo&quot; @ &quot;barba...&quot;&gt;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_string'><a href="#string-instance_method" title="StringScanner#string (method)">string</a></span>           <span class='comment'># =&gt; &quot;foobarbaz&quot;
</span><span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'>#### Situation:
</span><span class='comment'>####   pos:       3
</span><span class='comment'>####   charpos:   3
</span><span class='comment'>####   rest:      &quot;barbaz&quot;
</span><span class='comment'>####   rest_size: 6</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L493-L502'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='493' data-end='502'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 493</span></pre>
<pre class='code cpp'>

static VALUE
strscan_concat(VALUE self, VALUE str)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    StringValue(str);
    rb_str_append(p-&gt;str, str);
    return self;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="[]-instance_method">
  <h3 class='signature '>
    #<strong>[]</strong>(specifier)  &#x21d2; <code>substring</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns a captured substring or <code>nil</code>;
see <a href="StringScanner.html#captured-match-values">Captured Match Values</a>.</p>

<p>When there are captures:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Fri Dec 12 1975 14:39</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan'><a href="#scan-instance_method" title="StringScanner#scan (method)">scan</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;wday&gt;\w+) (?&lt;month&gt;\w+) (?&lt;day&gt;\d+) </span><span class='regexp_end'>/</span></span>)</code></pre>

<ul>
<li><p><code>specifier</code> zero: returns the entire matched substring:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span>[<span class='int'>0</span>]         <span class='comment'># =&gt; &quot;Fri Dec 12 &quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pre_match'><a href="#pre_match-instance_method" title="StringScanner#pre_match (method)">pre_match</a></span>  <span class='comment'># =&gt; &quot;&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_post_match'><a href="#post_match-instance_method" title="StringScanner#post_match (method)">post_match</a></span> <span class='comment'># =&gt; &quot;1975 14:39&quot;</span></code></pre></li>
<li><p><code>specifier</code> positive integer. returns the <code>n</code>th capture, or <code>nil</code> if out of range:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span>[<span class='int'>1</span>] <span class='comment'># =&gt; &quot;Fri&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>[<span class='int'>2</span>] <span class='comment'># =&gt; &quot;Dec&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>[<span class='int'>3</span>] <span class='comment'># =&gt; &quot;12&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>[<span class='int'>4</span>] <span class='comment'># =&gt; nil</span></code></pre></li>
<li><p><code>specifier</code> negative integer. counts backward from the last subgroup:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span>[<span class='op'>-</span><span class='int'>1</span>] <span class='comment'># =&gt; &quot;12&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>[<span class='op'>-</span><span class='int'>4</span>] <span class='comment'># =&gt; &quot;Fri Dec 12 &quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>[<span class='op'>-</span><span class='int'>5</span>] <span class='comment'># =&gt; nil</span></code></pre></li>
<li><p><code>specifier</code> symbol or string. returns the named subgroup, or <code>nil</code> if no such:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_wday'>wday</span>]  <span class='comment'># =&gt; &quot;Fri&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>[<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>wday</span><span class='tstring_end'>&#39;</span></span>] <span class='comment'># =&gt; &quot;Fri&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_month'>month</span>] <span class='comment'># =&gt; &quot;Dec&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_day'>day</span>]   <span class='comment'># =&gt; &quot;12&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_nope'>nope</span>]  <span class='comment'># =&gt; nil</span></code></pre></li>
</ul>

<p>When there are no captures, only <code>[0]</code> returns non-<code>nil</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobarbaz</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_exist?'><a href="#exist%3F-instance_method" title="StringScanner#exist? (method)">exist?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>bar</span><span class='regexp_end'>/</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>[<span class='int'>0</span>] <span class='comment'># =&gt; &quot;bar&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>[<span class='int'>1</span>] <span class='comment'># =&gt; nil</span></code></pre>

<p>For a failed match, even <code>[0]</code> returns <code>nil</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan'><a href="#scan-instance_method" title="StringScanner#scan (method)">scan</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>nope</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_scanner'>scanner</span>[<span class='int'>0</span>]           <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_scanner'>scanner</span>[<span class='int'>1</span>]           <span class='comment'># =&gt; nil</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1695-L1726'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1695' data-end='1726'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1695</span></pre>
<pre class='code cpp'>

static VALUE
strscan_aref(VALUE self, VALUE idx)
{
    const char *name;
    struct strscanner *p;
    long i;

    GET_SCANNER(self, p);
    if (! MATCHED_P(p))        return Qnil;

    switch (TYPE(idx)) {
        case T_SYMBOL:
            idx = rb_sym2str(idx);
            /* fall through */
        case T_STRING:
            RSTRING_GETMEM(idx, name, i);
            i = name_to_backref_number(&amp;(p-&gt;regs), p-&gt;regex, name, name + i, rb_enc_get(idx));
            break;
        default:
            i = NUM2LONG(idx);
    }

    if (i &lt; 0)
        i += p-&gt;regs.num_regs;
    if (i &lt; 0)                 return Qnil;
    if (i &gt;= p-&gt;regs.num_regs) return Qnil;
    if (p-&gt;regs.beg[i] == -1)  return Qnil;

    return extract_range(p,
                         adjust_register_position(p, p-&gt;regs.beg[i]),
                         adjust_register_position(p, p-&gt;regs.end[i]));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="captures-instance_method">
  <h3 class='signature '>
    #<strong>captures</strong>  &#x21d2; <code>substring_array</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns the array of <a href="StringScanner.html#captured-match-values">captured match values</a> at indexes <code>(1..)</code>
if the most recent match attempt succeeded, or <code>nil</code> otherwise:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Fri Dec 12 1975 14:39</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_captures'>captures</span>         <span class='comment'># =&gt; nil
</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_exist?'><a href="#exist%3F-instance_method" title="StringScanner#exist? (method)">exist?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;wday&gt;\w+) (?&lt;month&gt;\w+) (?&lt;day&gt;\d+) </span><span class='regexp_end'>/</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_captures'>captures</span>         <span class='comment'># =&gt; [&quot;Fri&quot;, &quot;Dec&quot;, &quot;12&quot;]
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_values_at'><a href="#values_at-instance_method" title="StringScanner#values_at (method)">values_at</a></span>(<span class='op'>*</span><span class='int'>0</span><span class='op'>..</span><span class='int'>4</span>) <span class='comment'># =&gt; [&quot;Fri Dec 12 &quot;, &quot;Fri&quot;, &quot;Dec&quot;, &quot;12&quot;, nil]
</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_exist?'><a href="#exist%3F-instance_method" title="StringScanner#exist? (method)">exist?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>Fri</span><span class='regexp_end'>/</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_captures'>captures</span>         <span class='comment'># =&gt; []
</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan'><a href="#scan-instance_method" title="StringScanner#scan (method)">scan</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>nope</span><span class='regexp_end'>/</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_captures'>captures</span>         <span class='comment'># =&gt; nil</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1788-L1813'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1788' data-end='1813'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1788</span></pre>
<pre class='code cpp'>

static VALUE
strscan_captures(VALUE self)
{
    struct strscanner *p;
    int   i, num_regs;
    VALUE new_ary;

    GET_SCANNER(self, p);
    if (! MATCHED_P(p))        return Qnil;

    num_regs = p-&gt;regs.num_regs;
    new_ary  = rb_ary_new2(num_regs);

    for (i = 1; i &lt; num_regs; i++) {
        VALUE str;
        if (p-&gt;regs.beg[i] == -1)
            str = Qnil;
        else
            str = extract_range(p,
                                adjust_register_position(p, p-&gt;regs.beg[i]),
                                adjust_register_position(p, p-&gt;regs.end[i]));
        rb_ary_push(new_ary, str);
    }

    return new_ary;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="charpos-instance_method">
  <h3 class='signature '>
    #<strong>charpos</strong>  &#x21d2; <code>character_position</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns the <a href="StringScanner.html#character-position">character position</a> (initially zero),
which may be different from the <a href="StringScanner.html#byte-position-position-">byte position</a>
given by method <a href="#pos-instance_method" title="StringScanner#pos (method)">#pos</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='const'>HIRAGANA_TEXT</span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_string'><a href="#string-instance_method" title="StringScanner#string (method)">string</a></span> <span class='comment'># =&gt; &quot;こんにちは&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_getch'><a href="#getch-instance_method" title="StringScanner#getch (method)">getch</a></span>  <span class='comment'># =&gt; &quot;こ&quot; # 3-byte character.
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_getch'><a href="#getch-instance_method" title="StringScanner#getch (method)">getch</a></span>  <span class='comment'># =&gt; &quot;ん&quot; # 3-byte character.
</span><span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'># Situation:
</span><span class='comment'>#   pos:       6
</span><span class='comment'>#   charpos:   2
</span><span class='comment'>#   rest:      &quot;にちは&quot;
</span><span class='comment'>#   rest_size: 9</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L523-L531'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='523' data-end='531'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 523</span></pre>
<pre class='code cpp'>

static VALUE
strscan_get_charpos(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);

    return LONG2NUM(rb_enc_strlen(S_PBEG(p), CURPTR(p), rb_enc_get(p-&gt;str)));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="check-instance_method">
  <h3 class='signature '>
    #<strong>check</strong>(pattern)  &#x21d2; <code>matched_substring</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Attempts to <a href="StringScanner.html#matching">match</a> the given <code>pattern</code>
at the beginning of the <a href="StringScanner.html#target-substring">target substring</a>;
does not modify the <a href="StringScanner.html#positions">positions</a>.</p>

<p>If the match succeeds:</p>

<ul>
<li>Returns the matched substring.</li>
<li>Sets all <a href="StringScanner.html#match-values">match values</a>.</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobarbaz</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>3</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_check'>check</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span>) <span class='comment'># =&gt; &quot;bar&quot;
</span><span class='id identifier rubyid_put_match_values'>put_match_values</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'>#### Basic match values:
</span><span class='comment'>####   matched?:       true
</span><span class='comment'>####   matched_size:   3
</span><span class='comment'>####   pre_match:      &quot;foo&quot;
</span><span class='comment'>####   matched  :      &quot;bar&quot;
</span><span class='comment'>####   post_match:     &quot;baz&quot;
</span><span class='comment'>#### Captured match values:
</span><span class='comment'>####   size:           1
</span><span class='comment'>####   captures:       []
</span><span class='comment'>####   named_captures: {}
</span><span class='comment'>####   values_at:      [&quot;bar&quot;, nil]
</span><span class='comment'>####   []:
</span><span class='comment'>####     [0]:          &quot;bar&quot;
</span><span class='comment'>####     [1]:          nil
</span><span class='comment'>#### =&gt; 0..1
</span><span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'>#### Situation:
</span><span class='comment'>####   pos:       3
</span><span class='comment'>####   charpos:   3
</span><span class='comment'>####   rest:      &quot;barbaz&quot;
</span><span class='comment'>####   rest_size: 6</span></code></pre>

<p>If the match fails:</p>

<ul>
<li>Returns <code>nil</code>.</li>
<li>Clears all <a href="StringScanner.html#match-values">match values</a>.</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_check'>check</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>nope</span><span class='regexp_end'>/</span></span>)          <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_match_values_cleared?'>match_values_cleared?</span>(<span class='id identifier rubyid_scanner'>scanner</span>) <span class='comment'># =&gt; true</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L896-L900'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='896' data-end='900'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 896</span></pre>
<pre class='code cpp'>

static VALUE
strscan_check(VALUE self, VALUE re)
{
    return strscan_do_scan(self, re, 0, 1, 1);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="check_until-instance_method">
  <h3 class='signature '>
    #<strong>check_until</strong>(pattern)  &#x21d2; <code>substring</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Attempts to <a href="StringScanner.html#matching">match</a> the given <code>pattern</code>
anywhere (at any <a href="StringScanner.html#byte-position-position-">position</a>)
in the <a href="StringScanner.html#target-substring">target substring</a>;
does not modify the <a href="StringScanner.html#positions">positions</a>.</p>

<p>If the match succeeds:</p>

<ul>
<li>Sets all <a href="StringScanner.html#match-values">match values</a>.</li>
<li>Returns the matched substring,
which extends from the current <a href="StringScanner.html#byte-position-position-">position</a>
to the end of the matched substring.</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobarbazbatbam</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>6</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_check_until'>check_until</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>bat</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; &quot;bazbat&quot;
</span><span class='id identifier rubyid_put_match_values'>put_match_values</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'>#### Basic match values:
</span><span class='comment'>####   matched?:       true
</span><span class='comment'>####   matched_size:   3
</span><span class='comment'>####   pre_match:      &quot;foobarbaz&quot;
</span><span class='comment'>####   matched  :      &quot;bat&quot;
</span><span class='comment'>####   post_match:     &quot;bam&quot;
</span><span class='comment'>#### Captured match values:
</span><span class='comment'>####   size:           1
</span><span class='comment'>####   captures:       []
</span><span class='comment'>####   named_captures: {}
</span><span class='comment'>####   values_at:      [&quot;bat&quot;, nil]
</span><span class='comment'>####   []:
</span><span class='comment'>####     [0]:          &quot;bat&quot;
</span><span class='comment'>####     [1]:          nil
</span><span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'>#### Situation:
</span><span class='comment'>####   pos:       6
</span><span class='comment'>####   charpos:   6
</span><span class='comment'>####   rest:      &quot;bazbatbam&quot;
</span><span class='comment'>####   rest_size: 9</span></code></pre>

<p>If the match fails:</p>

<ul>
<li>Clears all <a href="StringScanner.html#match-values">match values</a>.</li>
<li>Returns <code>nil</code>.</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_check_until'>check_until</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>nope</span><span class='regexp_end'>/</span></span>)    <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_match_values_cleared?'>match_values_cleared?</span>(<span class='id identifier rubyid_scanner'>scanner</span>) <span class='comment'># =&gt; true</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1069-L1073'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1069' data-end='1073'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1069</span></pre>
<pre class='code cpp'>

static VALUE
strscan_check_until(VALUE self, VALUE re)
{
    return strscan_do_scan(self, re, 0, 1, 0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="concat-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>&lt;&lt;</strong>(more_string)  &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>concat</strong>(more_string)  &#x21d2; <code>self</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#<<-instance_method" title="StringScanner#&lt;&lt; (method)">#&lt;&lt;</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>

</section>

<section class='method_details' id="exist?-instance_method">
  <h3 class='signature '>
    #<strong>exist?</strong>(pattern)  &#x21d2; <code>byte_offset</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Attempts to <a href="StringScanner.html#matching">match</a> the given <code>pattern</code>
anywhere (at any <a href="StringScanner.html#byte-position-position-">position</a>)
n the <a href="StringScanner.html#target-substring">target substring</a>;
does not modify the <a href="StringScanner.html#positions">positions</a>.</p>

<p>If the match succeeds:</p>

<ul>
<li>Returns a byte offset:
the distance in bytes between the current <a href="StringScanner.html#byte-position-position-">position</a>
and the end of the matched substring.</li>
<li>Sets all <a href="StringScanner.html#match-values">match values</a>.</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobarbazbatbam</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>6</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_exist?'>exist?</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>bat</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; 6
</span><span class='id identifier rubyid_put_match_values'>put_match_values</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'>#### Basic match values:
</span><span class='comment'>####   matched?:       true
</span><span class='comment'>####   matched_size:   3
</span><span class='comment'>####   pre_match:      &quot;foobarbaz&quot;
</span><span class='comment'>####   matched  :      &quot;bat&quot;
</span><span class='comment'>####   post_match:     &quot;bam&quot;
</span><span class='comment'>#### Captured match values:
</span><span class='comment'>####   size:           1
</span><span class='comment'>####   captures:       []
</span><span class='comment'>####   named_captures: {}
</span><span class='comment'>####   values_at:      [&quot;bat&quot;, nil]
</span><span class='comment'>####   []:
</span><span class='comment'>####     [0]:          &quot;bat&quot;
</span><span class='comment'>####     [1]:          nil
</span><span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'>#### Situation:
</span><span class='comment'>####   pos:       6
</span><span class='comment'>####   charpos:   6
</span><span class='comment'>####   rest:      &quot;bazbatbam&quot;
</span><span class='comment'>####   rest_size: 9</span></code></pre>

<p>If the match fails:</p>

<ul>
<li>Returns <code>nil</code>.</li>
<li>Clears all <a href="StringScanner.html#match-values">match values</a>.</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_exist?'>exist?</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>nope</span><span class='regexp_end'>/</span></span>)         <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_match_values_cleared?'>match_values_cleared?</span>(<span class='id identifier rubyid_scanner'>scanner</span>) <span class='comment'># =&gt; true</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L995-L999'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='995' data-end='999'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 995</span></pre>
<pre class='code cpp'>

static VALUE
strscan_exist_p(VALUE self, VALUE re)
{
    return strscan_do_scan(self, re, 0, 0, 0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="get_byte-instance_method">
  <h3 class='signature '>
    #<strong>get_byte</strong>  &#x21d2; <code>byte_as_character</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns the next byte, if available:</p>

<ul>
<li><p>If the <a href="StringScanner.html#byte-position-position-">position</a>
is not at the end of the <a href="StringScanner.html#stored-string">stored string</a>:</p>

<ul>
<li>Returns the next byte.</li>
<li>Increments the <a href="StringScanner.html#byte-position-position-">byte position</a>.</li>
<li>Adjusts the <a href="StringScanner.html#character-position">character position</a>.</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='const'>HIRAGANA_TEXT</span>)
<span class='comment'># =&gt; #&lt;StringScanner 0/15 @ &quot;\xE3\x81\x93\xE3\x82...&quot;&gt;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_string'><a href="#string-instance_method" title="StringScanner#string (method)">string</a></span>                                   <span class='comment'># =&gt; &quot;こんにちは&quot;
</span>[<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_get_byte'>get_byte</span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_charpos'><a href="#charpos-instance_method" title="StringScanner#charpos (method)">charpos</a></span>] <span class='comment'># =&gt; [&quot;\xE3&quot;, 1, 1]
</span>[<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_get_byte'>get_byte</span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_charpos'><a href="#charpos-instance_method" title="StringScanner#charpos (method)">charpos</a></span>] <span class='comment'># =&gt; [&quot;\x81&quot;, 2, 2]
</span>[<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_get_byte'>get_byte</span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_charpos'><a href="#charpos-instance_method" title="StringScanner#charpos (method)">charpos</a></span>] <span class='comment'># =&gt; [&quot;\x93&quot;, 3, 1]
</span>[<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_get_byte'>get_byte</span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_charpos'><a href="#charpos-instance_method" title="StringScanner#charpos (method)">charpos</a></span>] <span class='comment'># =&gt; [&quot;\xE3&quot;, 4, 2]
</span>[<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_get_byte'>get_byte</span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_charpos'><a href="#charpos-instance_method" title="StringScanner#charpos (method)">charpos</a></span>] <span class='comment'># =&gt; [&quot;\x82&quot;, 5, 3]
</span>[<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_get_byte'>get_byte</span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_charpos'><a href="#charpos-instance_method" title="StringScanner#charpos (method)">charpos</a></span>] <span class='comment'># =&gt; [&quot;\x93&quot;, 6, 2]</span></code></pre></li>
<li><p>Otherwise, returns <code>nil</code>, and does not change the positions.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_terminate'><a href="#terminate-instance_method" title="StringScanner#terminate (method)">terminate</a></span>
[<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_get_byte'>get_byte</span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_charpos'><a href="#charpos-instance_method" title="StringScanner#charpos (method)">charpos</a></span>] <span class='comment'># =&gt; [nil, 15, 5]</span></code></pre></li>
</ul>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1190-L1207'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1190' data-end='1207'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1190</span></pre>
<pre class='code cpp'>

static VALUE
strscan_get_byte(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    CLEAR_MATCH_STATUS(p);
    if (EOS_P(p))
        return Qnil;

    p-&gt;prev = p-&gt;curr;
    p-&gt;curr++;
    MATCHED(p);
    adjust_registers_to_matched(p);
    return extract_range(p,
                         adjust_register_position(p, p-&gt;regs.beg[0]),
                         adjust_register_position(p, p-&gt;regs.end[0]));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="getch-instance_method">
  <h3 class='signature '>
    #<strong>getch</strong>  &#x21d2; <code>character</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns the next (possibly multibyte) character,
if available:</p>

<ul>
<li><p>If the <a href="StringScanner.html#byte-position-position-">position</a>
is at the beginning of a character:</p>

<ul>
<li>Returns the character.</li>
<li>Increments the <a href="StringScanner.html#character-position">character position</a> by 1.</li>
<li>Increments the <a href="StringScanner.html#byte-position-position-">byte position</a>
by the size (in bytes) of the character.</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='const'>HIRAGANA_TEXT</span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_string'><a href="#string-instance_method" title="StringScanner#string (method)">string</a></span>                                <span class='comment'># =&gt; &quot;こんにちは&quot;
</span>[<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_getch'>getch</span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_charpos'><a href="#charpos-instance_method" title="StringScanner#charpos (method)">charpos</a></span>] <span class='comment'># =&gt; [&quot;こ&quot;, 3, 1]
</span>[<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_getch'>getch</span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_charpos'><a href="#charpos-instance_method" title="StringScanner#charpos (method)">charpos</a></span>] <span class='comment'># =&gt; [&quot;ん&quot;, 6, 2]
</span>[<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_getch'>getch</span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_charpos'><a href="#charpos-instance_method" title="StringScanner#charpos (method)">charpos</a></span>] <span class='comment'># =&gt; [&quot;に&quot;, 9, 3]
</span>[<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_getch'>getch</span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_charpos'><a href="#charpos-instance_method" title="StringScanner#charpos (method)">charpos</a></span>] <span class='comment'># =&gt; [&quot;ち&quot;, 12, 4]
</span>[<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_getch'>getch</span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_charpos'><a href="#charpos-instance_method" title="StringScanner#charpos (method)">charpos</a></span>] <span class='comment'># =&gt; [&quot;は&quot;, 15, 5]
</span>[<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_getch'>getch</span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_charpos'><a href="#charpos-instance_method" title="StringScanner#charpos (method)">charpos</a></span>] <span class='comment'># =&gt; [nil, 15, 5]</span></code></pre></li>
<li><p>If the <a href="StringScanner.html#byte-position-position-">position</a> is within a multi-byte character
(that is, not at its beginning),
behaves like #get_byte (returns a 1-byte character):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>1</span>
[<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_getch'>getch</span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_charpos'><a href="#charpos-instance_method" title="StringScanner#charpos (method)">charpos</a></span>] <span class='comment'># =&gt; [&quot;\x81&quot;, 2, 2]
</span>[<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_getch'>getch</span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_charpos'><a href="#charpos-instance_method" title="StringScanner#charpos (method)">charpos</a></span>] <span class='comment'># =&gt; [&quot;\x93&quot;, 3, 1]
</span>[<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_getch'>getch</span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_charpos'><a href="#charpos-instance_method" title="StringScanner#charpos (method)">charpos</a></span>] <span class='comment'># =&gt; [&quot;ん&quot;, 6, 2]</span></code></pre></li>
<li><p>If the <a href="StringScanner.html#byte-position-position-">position</a> is at the end of the <a href="StringScanner.html#stored-string">stored string</a>,
returns <code>nil</code> and does not modify the positions:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_terminate'><a href="#terminate-instance_method" title="StringScanner#terminate (method)">terminate</a></span>
[<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_getch'>getch</span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span><span class='comma'>,</span> <span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_charpos'><a href="#charpos-instance_method" title="StringScanner#charpos (method)">charpos</a></span>] <span class='comment'># =&gt; [nil, 15, 5]</span></code></pre></li>
</ul>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1117-L1137'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1117' data-end='1137'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1117</span></pre>
<pre class='code cpp'>

static VALUE
strscan_getch(VALUE self)
{
    struct strscanner *p;
    long len;

    GET_SCANNER(self, p);
    CLEAR_MATCH_STATUS(p);
    if (EOS_P(p))
        return Qnil;

    len = rb_enc_mbclen(CURPTR(p), S_PEND(p), rb_enc_get(p-&gt;str));
    len = minl(len, S_RESTLEN(p));
    p-&gt;prev = p-&gt;curr;
    p-&gt;curr += len;
    MATCHED(p);
    adjust_registers_to_matched(p);
    return extract_range(p,
                         adjust_register_position(p, p-&gt;regs.beg[0]),
                         adjust_register_position(p, p-&gt;regs.end[0]));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="initialize_copy-instance_method">
  <h3 class='signature priv'>
    #<strong>dup</strong>  &#x21d2; <code>shallow_copy</code>  <span class="extras">(<span class='priv'>private</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns a shallow copy of <code>self</code>;
the <a href="StringScanner.html#stored-string">stored string</a> in the copy is the same string as in <code>self</code>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L300-L318'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='300' data-end='318'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 300</span></pre>
<pre class='code cpp'>

static VALUE
strscan_init_copy(VALUE vself, VALUE vorig)
{
    struct strscanner *self, *orig;

    self = check_strscan(vself);
    orig = check_strscan(vorig);
    if (self != orig) {
	self-&gt;flags = orig-&gt;flags;
	RB_OBJ_WRITE(vself, &amp;self-&gt;str, orig-&gt;str);
	self-&gt;prev = orig-&gt;prev;
	self-&gt;curr = orig-&gt;curr;
	if (rb_reg_region_copy(&amp;self-&gt;regs, &amp;orig-&gt;regs))
	    rb_memerror();
	RB_GC_GUARD(vorig);
    }

    return vself;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inspect-instance_method">
  <h3 class='signature '>
    #<strong>inspect</strong>  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns a string representation of <code>self</code> that may show:</p>

<ol>
<li>The current <a href="StringScanner.html#byte-position-position-">position</a>.</li>
<li>The size (in bytes) of the <a href="StringScanner.html#stored-string">stored string</a>.</li>
<li>The substring preceding the current position.</li>
<li>The substring following the current position (which is also the <a href="StringScanner.html#target-substring">target substring</a>).</li>
</ol>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Fri Dec 12 1975 14:39</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>11</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_inspect'>inspect</span> <span class='comment'># =&gt; &quot;#&lt;StringScanner 11/21 \&quot;...c 12 \&quot; @ \&quot;1975 ...\&quot;&gt;&quot;</span></code></pre>

<p>If at beginning-of-string, item 4 above (following substring) is omitted:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_reset'><a href="#reset-instance_method" title="StringScanner#reset (method)">reset</a></span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_inspect'>inspect</span> <span class='comment'># =&gt; &quot;#&lt;StringScanner 0/21 @ \&quot;Fri D...\&quot;&gt;&quot;</span></code></pre>

<p>If at end-of-string, all items above are omitted:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_terminate'><a href="#terminate-instance_method" title="StringScanner#terminate (method)">terminate</a></span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_inspect'>inspect</span> <span class='comment'># =&gt; &quot;#&lt;StringScanner fin&gt;&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L2034-L2064'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2034' data-end='2064'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 2034</span></pre>
<pre class='code cpp'>

static VALUE
strscan_inspect(VALUE self)
{
    struct strscanner *p;
    VALUE a, b;

    p = check_strscan(self);
    if (NIL_P(p-&gt;str)) {
	a = rb_sprintf(&quot;#&lt;%&quot;PRIsVALUE&quot; (uninitialized)&gt;&quot;, rb_obj_class(self));
	return a;
    }
    if (EOS_P(p)) {
	a = rb_sprintf(&quot;#&lt;%&quot;PRIsVALUE&quot; fin&gt;&quot;, rb_obj_class(self));
	return a;
    }
    if (p-&gt;curr == 0) {
	b = inspect2(p);
	a = rb_sprintf(&quot;#&lt;%&quot;PRIsVALUE&quot; %ld/%ld @ %&quot;PRIsVALUE&quot;&gt;&quot;,
		       rb_obj_class(self),
		       p-&gt;curr, S_LEN(p),
		       b);
	return a;
    }
    a = inspect1(p);
    b = inspect2(p);
    a = rb_sprintf(&quot;#&lt;%&quot;PRIsVALUE&quot; %ld/%ld %&quot;PRIsVALUE&quot; @ %&quot;PRIsVALUE&quot;&gt;&quot;,
		   rb_obj_class(self),
		   p-&gt;curr, S_LEN(p),
		   a, b);
    return a;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="match?-instance_method">
  <h3 class='signature '>
    #<strong>match?</strong>(pattern)  &#x21d2; <code>updated_position</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Attempts to <a href="StringScanner.html#matching">match</a> the given <code>pattern</code>
at the beginning of the <a href="StringScanner.html#target-substring">target substring</a>;
does not modify the <a href="StringScanner.html#positions">positions</a>.</p>

<p>If the match succeeds:</p>

<ul>
<li>Sets <a href="StringScanner.html#match-values">match values</a>.</li>
<li>Returns the size in bytes of the matched substring.</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobarbaz</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>3</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>bar</span><span class='regexp_end'>/</span></span>) <span class='op'>=&gt;</span> <span class='int'>3</span>
<span class='id identifier rubyid_put_match_values'>put_match_values</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'>#### Basic match values:
</span><span class='comment'>####   matched?:       true
</span><span class='comment'>####   matched_size:   3
</span><span class='comment'>####   pre_match:      &quot;foo&quot;
</span><span class='comment'>####   matched  :      &quot;bar&quot;
</span><span class='comment'>####   post_match:     &quot;baz&quot;
</span><span class='comment'>#### Captured match values:
</span><span class='comment'>####   size:           1
</span><span class='comment'>####   captures:       []
</span><span class='comment'>####   named_captures: {}
</span><span class='comment'>####   values_at:      [&quot;bar&quot;, nil]
</span><span class='comment'>####   []:
</span><span class='comment'>####     [0]:          &quot;bar&quot;
</span><span class='comment'>####     [1]:          nil
</span><span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'>#### Situation:
</span><span class='comment'>####   pos:       3
</span><span class='comment'>####   charpos:   3
</span><span class='comment'>####   rest:      &quot;barbaz&quot;
</span><span class='comment'>####   rest_size: 6</span></code></pre>

<p>If the match fails:</p>

<ul>
<li>Clears match values.</li>
<li>Returns <code>nil</code>.</li>
<li>Does not increment positions.</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_match?'>match?</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>nope</span><span class='regexp_end'>/</span></span>)         <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_match_values_cleared?'>match_values_cleared?</span>(<span class='id identifier rubyid_scanner'>scanner</span>) <span class='comment'># =&gt; true</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L824-L828'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='824' data-end='828'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 824</span></pre>
<pre class='code cpp'>

static VALUE
strscan_match_p(VALUE self, VALUE re)
{
    return strscan_do_scan(self, re, 0, 0, 1);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="matched_size-instance_method">
  <h3 class='signature '>
    #<strong>matched_size</strong>  &#x21d2; <code>substring_size</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns the size (in bytes) of the matched substring
from the most recent match <a href="StringScanner.html#matching">match attempt</a> if it was successful,
or <code>nil</code> otherwise;
see <a href="StringScanner.html#basic-match-values">Basic Matched Values</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobarbaz</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_matched_size'>matched_size</span>   <span class='comment'># =&gt; nil
</span>
<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>3</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_exist?'><a href="#exist%3F-instance_method" title="StringScanner#exist? (method)">exist?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>baz</span><span class='regexp_end'>/</span></span>)  <span class='comment'># =&gt; 9
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_matched_size'>matched_size</span>   <span class='comment'># =&gt; 3
</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_exist?'><a href="#exist%3F-instance_method" title="StringScanner#exist? (method)">exist?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>nope</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_matched_size'>matched_size</span>   <span class='comment'># =&gt; nil</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1598-L1606'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1598' data-end='1606'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1598</span></pre>
<pre class='code cpp'>

static VALUE
strscan_matched_size(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (! MATCHED_P(p)) return Qnil;
    return LONG2NUM(p-&gt;regs.end[0] - p-&gt;regs.beg[0]);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="named_captures-instance_method">
  <h3 class='signature '>
    #<strong>named_captures</strong>  &#x21d2; <code>Hash</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns the array of captured match values at indexes (1..)
if the most recent match attempt succeeded, or nil otherwise;
see <a href="StringScanner.html#captured-match-values">Captured Match Values</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Fri Dec 12 1975 14:39</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_named_captures'>named_captures</span> <span class='comment'># =&gt; {}
</span>
<span class='id identifier rubyid_pattern'>pattern</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;wday&gt;\w+) (?&lt;month&gt;\w+) (?&lt;day&gt;\d+) </span><span class='regexp_end'>/</span></span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="StringScanner#match? (method)">match?</a></span>(<span class='id identifier rubyid_pattern'>pattern</span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_named_captures'>named_captures</span> <span class='comment'># =&gt; {&quot;wday&quot;=&gt;&quot;Fri&quot;, &quot;month&quot;=&gt;&quot;Dec&quot;, &quot;day&quot;=&gt;&quot;12&quot;}
</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_string'><a href="#string-instance_method" title="StringScanner#string (method)">string</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nope</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="StringScanner#match? (method)">match?</a></span>(<span class='id identifier rubyid_pattern'>pattern</span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_named_captures'>named_captures</span> <span class='comment'># =&gt; {&quot;wday&quot;=&gt;nil, &quot;month&quot;=&gt;nil, &quot;day&quot;=&gt;nil}
</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="StringScanner#match? (method)">match?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>nosuch</span><span class='regexp_end'>/</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_named_captures'>named_captures</span> <span class='comment'># =&gt; {}</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L2176-L2189'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='2176' data-end='2189'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 2176</span></pre>
<pre class='code cpp'>

static VALUE
strscan_named_captures(VALUE self)
{
    struct strscanner *p;
    named_captures_data data;
    GET_SCANNER(self, p);
    data.self = self;
    data.captures = rb_hash_new();
    if (!RB_NIL_P(p-&gt;regex)) {
        onig_foreach_name(RREGEXP_PTR(p-&gt;regex), named_captures_iter, &amp;data);
    }

    return data.captures;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="peek-instance_method">
  <h3 class='signature '>
    #<strong>peek</strong>(length)  &#x21d2; <code>substring</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns the substring <code>string[pos, length]</code>;
does not update <a href="StringScanner.html#match-values">match values</a> or <a href="StringScanner.html#positions">positions</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobarbaz</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>3</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_peek'>peek</span>(<span class='int'>3</span>)   <span class='comment'># =&gt; &quot;bar&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_terminate'><a href="#terminate-instance_method" title="StringScanner#terminate (method)">terminate</a></span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_peek'>peek</span>(<span class='int'>3</span>)   <span class='comment'># =&gt; &quot;&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1228-L1242'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1228' data-end='1242'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1228</span></pre>
<pre class='code cpp'>

static VALUE
strscan_peek(VALUE self, VALUE vlen)
{
    struct strscanner *p;
    long len;

    GET_SCANNER(self, p);

    len = NUM2LONG(vlen);
    if (EOS_P(p))
        return str_new(p, &quot;&quot;, 0);

    len = minl(len, S_RESTLEN(p));
    return extract_beg_len(p, p-&gt;curr, len);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="peek_byte-instance_method">
  <h3 class='signature '>
    #<strong>peek_byte</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Peeks at the current byte and returns it as an integer.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ab</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_s'>s</span>.<span class='id identifier rubyid_peek_byte'>peek_byte</span>         <span class='comment'># =&gt; 97</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1173-L1183'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1173' data-end='1183'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1173</span></pre>
<pre class='code cpp'>

static VALUE
strscan_peek_byte(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (EOS_P(p))
        return Qnil;

    return INT2FIX((unsigned char)*CURPTR(p));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="post_match-instance_method">
  <h3 class='signature '>
    #<strong>post_match</strong>  &#x21d2; <code>substring</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns the substring that follows the matched substring
from the most recent match attempt if it was successful,
or <code>nil</code> otherwise;
see <a href="StringScanner.html#basic-match-values">Basic Match Values</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobarbaz</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_post_match'>post_match</span>     <span class='comment'># =&gt; nil
</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>3</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="StringScanner#match? (method)">match?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>bar</span><span class='regexp_end'>/</span></span>)  <span class='comment'># =&gt; 3
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_post_match'>post_match</span>     <span class='comment'># =&gt; &quot;baz&quot;
</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="StringScanner#match? (method)">match?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>nope</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_post_match'>post_match</span>     <span class='comment'># =&gt; nil</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1917-L1927'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1917' data-end='1927'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1917</span></pre>
<pre class='code cpp'>

static VALUE
strscan_post_match(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (! MATCHED_P(p)) return Qnil;
    return extract_range(p,
                         adjust_register_position(p, p-&gt;regs.end[0]),
                         S_LEN(p));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pre_match-instance_method">
  <h3 class='signature '>
    #<strong>pre_match</strong>  &#x21d2; <code>substring</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns the substring that precedes the matched substring
from the most recent match attempt if it was successful,
or <code>nil</code> otherwise;
see <a href="StringScanner.html#basic-match-values">Basic Match Values</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobarbaz</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pre_match'>pre_match</span>      <span class='comment'># =&gt; nil
</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>3</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_exist?'><a href="#exist%3F-instance_method" title="StringScanner#exist? (method)">exist?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>baz</span><span class='regexp_end'>/</span></span>)  <span class='comment'># =&gt; 6
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pre_match'>pre_match</span>      <span class='comment'># =&gt; &quot;foobar&quot; # Substring of entire string, not just target string.
</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_exist?'><a href="#exist%3F-instance_method" title="StringScanner#exist? (method)">exist?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>nope</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pre_match'>pre_match</span>      <span class='comment'># =&gt; nil</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1880-L1890'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1880' data-end='1890'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1880</span></pre>
<pre class='code cpp'>

static VALUE
strscan_pre_match(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (! MATCHED_P(p)) return Qnil;
    return extract_range(p,
                         0,
                         adjust_register_position(p, p-&gt;regs.beg[0]));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="reset-instance_method">
  <h3 class='signature '>
    #<strong>reset</strong>  &#x21d2; <code>self</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Sets both <a href="StringScanner.html#byte-position-position-">byte position</a> and <a href="StringScanner.html#character-position">character position</a> to zero,
and clears <a href="StringScanner.html#match-values">match values</a>;
returns <code>self</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobarbaz</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_exist?'><a href="#exist%3F-instance_method" title="StringScanner#exist? (method)">exist?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>bar</span><span class='regexp_end'>/</span></span>)          <span class='comment'># =&gt; 6
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_reset'>reset</span>                  <span class='comment'># =&gt; #&lt;StringScanner 0/9 @ &quot;fooba...&quot;&gt;
</span><span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'>#### Situation:
</span><span class='comment'>####   pos:       0
</span><span class='comment'>####   charpos:   0
</span><span class='comment'>####   rest:      &quot;foobarbaz&quot;
</span><span class='comment'>####   rest_size: 9
</span><span class='comment'>#### =&gt; nil
</span><span class='id identifier rubyid_match_values_cleared?'>match_values_cleared?</span>(<span class='id identifier rubyid_scanner'>scanner</span>) <span class='comment'># =&gt; true</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L364-L373'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='364' data-end='373'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 364</span></pre>
<pre class='code cpp'>

static VALUE
strscan_reset(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    p-&gt;curr = 0;
    CLEAR_MATCH_STATUS(p);
    return self;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="rest_size-instance_method">
  <h3 class='signature '>
    #<strong>rest_size</strong>  &#x21d2; <code>Integer</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns the size (in bytes) of the <a href="#rest-instance_method" title="StringScanner#rest (method)">#rest</a> of the <a href="StringScanner.html#stored-string">stored string</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobarbaz</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_rest'><a href="#rest-instance_method" title="StringScanner#rest (method)">rest</a></span>      <span class='comment'># =&gt; &quot;foobarbaz&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_rest_size'>rest_size</span> <span class='comment'># =&gt; 9
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>3</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_rest'><a href="#rest-instance_method" title="StringScanner#rest (method)">rest</a></span>      <span class='comment'># =&gt; &quot;barbaz&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_rest_size'>rest_size</span> <span class='comment'># =&gt; 6
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_terminate'><a href="#terminate-instance_method" title="StringScanner#terminate (method)">terminate</a></span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_rest'><a href="#rest-instance_method" title="StringScanner#rest (method)">rest</a></span>      <span class='comment'># =&gt; &quot;&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_rest_size'>rest_size</span> <span class='comment'># =&gt; 0</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1983-L1995'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1983' data-end='1995'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1983</span></pre>
<pre class='code cpp'>

static VALUE
strscan_rest_size(VALUE self)
{
    struct strscanner *p;
    long i;

    GET_SCANNER(self, p);
    if (EOS_P(p)) {
        return INT2FIX(0);
    }
    i = S_RESTLEN(p);
    return INT2FIX(i);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="scan-instance_method">
  <h3 class='signature '>
    #<strong>scan</strong>(pattern)  &#x21d2; <code>substring</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Attempts to <a href="StringScanner.html#matching">match</a> the given <code>pattern</code>
at the beginning of the <a href="StringScanner.html#target-substring">target substring</a>.</p>

<p>If the match succeeds:</p>

<ul>
<li>Returns the matched substring.</li>
<li>Increments the <a href="StringScanner.html#byte-position-position-">byte position</a> by <tt>substring.bytesize</tt>,
and may increment the <a href="StringScanner.html#character-position">character position</a>.</li>
<li>Sets <a href="StringScanner.html#match-values">match values</a>.</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='const'>HIRAGANA_TEXT</span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_string'><a href="#string-instance_method" title="StringScanner#string (method)">string</a></span>     <span class='comment'># =&gt; &quot;こんにちは&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>6</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan'>scan</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>に</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; &quot;に&quot;
</span><span class='id identifier rubyid_put_match_values'>put_match_values</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'># Basic match values:
</span><span class='comment'>#   matched?:       true
</span><span class='comment'>#   matched_size:   3
</span><span class='comment'>#   pre_match:      &quot;こん&quot;
</span><span class='comment'>#   matched  :      &quot;に&quot;
</span><span class='comment'>#   post_match:     &quot;ちは&quot;
</span><span class='comment'># Captured match values:
</span><span class='comment'>#   size:           1
</span><span class='comment'>#   captures:       []
</span><span class='comment'>#   named_captures: {}
</span><span class='comment'>#   values_at:      [&quot;に&quot;, nil]
</span><span class='comment'>#   []:
</span><span class='comment'>#     [0]:          &quot;に&quot;
</span><span class='comment'>#     [1]:          nil
</span><span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'># Situation:
</span><span class='comment'>#   pos:       9
</span><span class='comment'>#   charpos:   3
</span><span class='comment'>#   rest:      &quot;ちは&quot;
</span><span class='comment'>#   rest_size: 6</span></code></pre>

<p>If the match fails:</p>

<ul>
<li>Returns <code>nil</code>.</li>
<li>Does not increment byte and character positions.</li>
<li>Clears match values.</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan'>scan</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>nope</span><span class='regexp_end'>/</span></span>)           <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_match_values_cleared?'>match_values_cleared?</span>(<span class='id identifier rubyid_scanner'>scanner</span>) <span class='comment'># =&gt; true</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L762-L766'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='762' data-end='766'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 762</span></pre>
<pre class='code cpp'>

static VALUE
strscan_scan(VALUE self, VALUE re)
{
    return strscan_do_scan(self, re, 1, 1, 1);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="scan_base10_integer-instance_method">
  <h3 class='signature priv  nodoc'>
    #<strong>scan_base10_integer</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1282-L1317'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1282' data-end='1317'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1282</span></pre>
<pre class='code cpp'>

static VALUE
strscan_scan_base10_integer(VALUE self)
{
    char *ptr;
    long len = 0, remaining_len;
    struct strscanner *p;

    GET_SCANNER(self, p);
    CLEAR_MATCH_STATUS(p);

    strscan_must_ascii_compat(p-&gt;str);

    ptr = CURPTR(p);

    remaining_len = S_RESTLEN(p);

    if (remaining_len &lt;= 0) {
        return Qnil;
    }

    if (ptr[len] == &#39;-&#39; || ptr[len] == &#39;+&#39;) {
        len++;
    }

    if (!rb_isdigit(ptr[len])) {
        return Qnil;
    }

    p-&gt;prev = p-&gt;curr;

    while (len &lt; remaining_len &amp;&amp; rb_isdigit(ptr[len])) {
        len++;
    }

    return strscan_parse_integer(p, 10, len);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="scan_base16_integer-instance_method">
  <h3 class='signature priv  nodoc'>
    #<strong>scan_base16_integer</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1320-L1359'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1320' data-end='1359'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1320</span></pre>
<pre class='code cpp'>

static VALUE
strscan_scan_base16_integer(VALUE self)
{
    char *ptr;
    long len = 0, remaining_len;
    struct strscanner *p;

    GET_SCANNER(self, p);
    CLEAR_MATCH_STATUS(p);

    strscan_must_ascii_compat(p-&gt;str);

    ptr = CURPTR(p);

    remaining_len = S_RESTLEN(p);

    if (remaining_len &lt;= 0) {
        return Qnil;
    }

    if (ptr[len] == &#39;-&#39; || ptr[len] == &#39;+&#39;) {
        len++;
    }

    if ((remaining_len &gt;= (len + 3)) &amp;&amp; ptr[len] == &#39;0&#39; &amp;&amp; ptr[len + 1] == &#39;x&#39; &amp;&amp; rb_isxdigit(ptr[len + 2])) {
        len += 2;
    }

    if (len &gt;= remaining_len || !rb_isxdigit(ptr[len])) {
        return Qnil;
    }

    p-&gt;prev = p-&gt;curr;

    while (len &lt; remaining_len &amp;&amp; rb_isxdigit(ptr[len])) {
        len++;
    }

    return strscan_parse_integer(p, 16, len);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="scan_byte-instance_method">
  <h3 class='signature '>
    #<strong>scan_byte</strong>  &#x21d2; <code>integer_byte</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Scans one byte and returns it as an integer. This method is not multibyte character sensitive. See also: <a href="#getch-instance_method" title="StringScanner#getch (method)">#getch</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1148-L1165'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1148' data-end='1165'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1148</span></pre>
<pre class='code cpp'>

static VALUE
strscan_scan_byte(VALUE self)
{
    struct strscanner *p;
    VALUE byte;

    GET_SCANNER(self, p);
    CLEAR_MATCH_STATUS(p);
    if (EOS_P(p))
        return Qnil;

    byte = INT2FIX((unsigned char)*CURPTR(p));
    p-&gt;prev = p-&gt;curr;
    p-&gt;curr++;
    MATCHED(p);
    adjust_registers_to_matched(p);
    return byte;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="scan_full-instance_method">
  <h3 class='signature nodoc'>
    #<strong>scan_full</strong>(re, s, f)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L921-L925'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='921' data-end='925'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 921</span></pre>
<pre class='code cpp'>

static VALUE
strscan_scan_full(VALUE self, VALUE re, VALUE s, VALUE f)
{
    return strscan_do_scan(self, re, RTEST(s), RTEST(f), 1);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="scan_integer-instance_method">
  <h3 class='signature '>
    #<strong>scan_integer</strong>(base: 10)    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>If <code>base</code> isn’t provided or is <code>10</code>, then it is equivalent to calling <a href="#scan-instance_method" title="StringScanner#scan (method)">#scan</a> with a <code>[+-]?d+</code> pattern, and returns an Integer or nil.</p>

<p>If <code>base</code> is <code>16</code>, then it is equivalent to calling <a href="#scan-instance_method" title="StringScanner#scan (method)">#scan</a> with a <code>[+-]?(0x)?[0-9a-fA-F]+</code> pattern, and returns an Integer or nil.</p>

<p>The scanned string must be encoded with an ASCII compatible encoding, otherwise <code>Encoding::CompatibilityError</code> will be raised.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/lib/strscan/strscan.rb#L15-L24'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='15' data-end='24'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/lib/strscan/strscan.rb', line 15</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_scan_integer'>scan_integer</span>(<span class='label'>base:</span> <span class='int'>10</span>)
  <span class='kw'>case</span> <span class='id identifier rubyid_base'>base</span>
  <span class='kw'>when</span> <span class='int'>10</span>
    <span class='id identifier rubyid_scan_base10_integer'><a href="#scan_base10_integer-instance_method" title="StringScanner#scan_base10_integer (method)">scan_base10_integer</a></span>
  <span class='kw'>when</span> <span class='int'>16</span>
    <span class='id identifier rubyid_scan_base16_integer'><a href="#scan_base16_integer-instance_method" title="StringScanner#scan_base16_integer (method)">scan_base16_integer</a></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unsupported integer base: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_base'>base</span>.<span class='id identifier rubyid_inspect'><a href="#inspect-instance_method" title="StringScanner#inspect (method)">inspect</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>, expected 10 or 16</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="scan_until-instance_method">
  <h3 class='signature '>
    #<strong>scan_until</strong>(pattern)  &#x21d2; <code>substring</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Attempts to <a href="StringScanner.html#matching">match</a> the given <code>pattern</code>
anywhere (at any <a href="StringScanner.html#byte-position-position-">position</a>) in the <a href="StringScanner.html#target-substring">target substring</a>.</p>

<p>If the match attempt succeeds:</p>

<ul>
<li>Sets <a href="StringScanner.html#match-values">match values</a>.</li>
<li>Sets the <a href="StringScanner.html#byte-position-position-">byte position</a> to the end of the matched substring;
may adjust the <a href="StringScanner.html#character-position">character position</a>.</li>
<li>Returns the matched substring.</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='const'>HIRAGANA_TEXT</span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_string'><a href="#string-instance_method" title="StringScanner#string (method)">string</a></span>           <span class='comment'># =&gt; &quot;こんにちは&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>6</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan_until'>scan_until</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>ち</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; &quot;にち&quot;
</span><span class='id identifier rubyid_put_match_values'>put_match_values</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'># Basic match values:
</span><span class='comment'>#   matched?:       true
</span><span class='comment'>#   matched_size:   3
</span><span class='comment'>#   pre_match:      &quot;こんに&quot;
</span><span class='comment'>#   matched  :      &quot;ち&quot;
</span><span class='comment'>#   post_match:     &quot;は&quot;
</span><span class='comment'># Captured match values:
</span><span class='comment'>#   size:           1
</span><span class='comment'>#   captures:       []
</span><span class='comment'>#   named_captures: {}
</span><span class='comment'>#   values_at:      [&quot;ち&quot;, nil]
</span><span class='comment'>#   []:
</span><span class='comment'>#     [0]:          &quot;ち&quot;
</span><span class='comment'>#     [1]:          nil
</span><span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'># Situation:
</span><span class='comment'>#   pos:       12
</span><span class='comment'>#   charpos:   4
</span><span class='comment'>#   rest:      &quot;は&quot;
</span><span class='comment'>#   rest_size: 3</span></code></pre>

<p>If the match attempt fails:</p>

<ul>
<li>Clears match data.</li>
<li>Returns <code>nil</code>.</li>
<li>Does not update positions.</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan_until'>scan_until</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>nope</span><span class='regexp_end'>/</span></span>)     <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_match_values_cleared?'>match_values_cleared?</span>(<span class='id identifier rubyid_scanner'>scanner</span>) <span class='comment'># =&gt; true</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L932-L936'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='932' data-end='936'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 932</span></pre>
<pre class='code cpp'>

static VALUE
strscan_scan_until(VALUE self, VALUE re)
{
    return strscan_do_scan(self, re, 1, 1, 0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="search_full-instance_method">
  <h3 class='signature nodoc'>
    #<strong>search_full</strong>(re, s, f)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1094-L1098'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1094' data-end='1098'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1094</span></pre>
<pre class='code cpp'>

static VALUE
strscan_search_full(VALUE self, VALUE re, VALUE s, VALUE f)
{
    return strscan_do_scan(self, re, RTEST(s), RTEST(f), 0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="size-instance_method">
  <h3 class='signature '>
    #<strong>size</strong>  &#x21d2; <code>captures_count</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns the count of captures if the most recent match attempt succeeded, <code>nil</code> otherwise;
see <a href="StringScanner.html#captured-match-values">Captures Match Values</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Fri Dec 12 1975 14:39</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_size'>size</span>                        <span class='comment'># =&gt; nil
</span>
<span class='id identifier rubyid_pattern'>pattern</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;wday&gt;\w+) (?&lt;month&gt;\w+) (?&lt;day&gt;\d+) </span><span class='regexp_end'>/</span></span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="StringScanner#match? (method)">match?</a></span>(<span class='id identifier rubyid_pattern'>pattern</span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_values_at'><a href="#values_at-instance_method" title="StringScanner#values_at (method)">values_at</a></span>(<span class='op'>*</span><span class='int'>0</span><span class='op'>..</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_size'>size</span>) <span class='comment'># =&gt; [&quot;Fri Dec 12 &quot;, &quot;Fri&quot;, &quot;Dec&quot;, &quot;12&quot;, nil]
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_size'>size</span>                        <span class='comment'># =&gt; 4
</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="StringScanner#match? (method)">match?</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>nope</span><span class='regexp_end'>/</span></span>)              <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_size'>size</span>                        <span class='comment'># =&gt; nil</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1752-L1760'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1752' data-end='1760'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1752</span></pre>
<pre class='code cpp'>

static VALUE
strscan_size(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (! MATCHED_P(p))        return Qnil;
    return INT2FIX(p-&gt;regs.num_regs);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="skip-instance_method">
  <h3 class='signature '>
    #<strong>skip</strong>(pattern) match_size or nil)    </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Attempts to <a href="StringScanner.html#matching">match</a> the given <code>pattern</code>
at the beginning of the <a href="StringScanner.html#target-substring">target substring</a>;</p>

<p>If the match succeeds:</p>

<ul>
<li>Increments the <a href="StringScanner.html#byte-position-position-">byte position</a> by substring.bytesize,
and may increment the <a href="StringScanner.html#character-position">character position</a>.</li>
<li>Sets <a href="StringScanner.html#match-values">match values</a>.</li>
<li>Returns the size (bytes) of the matched substring.</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='const'>HIRAGANA_TEXT</span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_string'><a href="#string-instance_method" title="StringScanner#string (method)">string</a></span>                  <span class='comment'># =&gt; &quot;こんにちは&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>6</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_skip'>skip</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>に</span><span class='regexp_end'>/</span></span>)              <span class='comment'># =&gt; 3
</span><span class='id identifier rubyid_put_match_values'>put_match_values</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'># Basic match values:
</span><span class='comment'>#   matched?:       true
</span><span class='comment'>#   matched_size:   3
</span><span class='comment'>#   pre_match:      &quot;こん&quot;
</span><span class='comment'>#   matched  :      &quot;に&quot;
</span><span class='comment'>#   post_match:     &quot;ちは&quot;
</span><span class='comment'># Captured match values:
</span><span class='comment'>#   size:           1
</span><span class='comment'>#   captures:       []
</span><span class='comment'>#   named_captures: {}
</span><span class='comment'>#   values_at:      [&quot;に&quot;, nil]
</span><span class='comment'>#   []:
</span><span class='comment'>#     [0]:          &quot;に&quot;
</span><span class='comment'>#     [1]:          nil
</span><span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'># Situation:
</span><span class='comment'>#   pos:       9
</span><span class='comment'>#   charpos:   3
</span><span class='comment'>#   rest:      &quot;ちは&quot;
</span><span class='comment'>#   rest_size: 6
</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_skip'>skip</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>nope</span><span class='regexp_end'>/</span></span>)            <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_match_values_cleared?'>match_values_cleared?</span>(<span class='id identifier rubyid_scanner'>scanner</span>)  <span class='comment'># =&gt; true</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L835-L839'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='835' data-end='839'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 835</span></pre>
<pre class='code cpp'>

static VALUE
strscan_skip(VALUE self, VALUE re)
{
    return strscan_do_scan(self, re, 1, 0, 1);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="skip_until-instance_method">
  <h3 class='signature '>
    #<strong>skip_until</strong>(pattern)  &#x21d2; <code>matched_substring_size</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Attempts to <a href="StringScanner.html#matching">match</a> the given <code>pattern</code>
anywhere (at any <a href="StringScanner.html#byte-position-position-">position</a>) in the <a href="StringScanner.html#target-substring">target substring</a>;
does not modify the positions.</p>

<p>If the match attempt succeeds:</p>

<ul>
<li>Sets <a href="StringScanner.html#match-values">match values</a>.</li>
<li>Returns the size of the matched substring.</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='const'>HIRAGANA_TEXT</span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_string'><a href="#string-instance_method" title="StringScanner#string (method)">string</a></span>           <span class='comment'># =&gt; &quot;こんにちは&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_pos'><a href="#pos-instance_method" title="StringScanner#pos (method)">pos</a></span> <span class='op'>=</span> <span class='int'>6</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_skip_until'>skip_until</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>ち</span><span class='regexp_end'>/</span></span>) <span class='comment'># =&gt; 6
</span><span class='id identifier rubyid_put_match_values'>put_match_values</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'># Basic match values:
</span><span class='comment'>#   matched?:       true
</span><span class='comment'>#   matched_size:   3
</span><span class='comment'>#   pre_match:      &quot;こんに&quot;
</span><span class='comment'>#   matched  :      &quot;ち&quot;
</span><span class='comment'>#   post_match:     &quot;は&quot;
</span><span class='comment'># Captured match values:
</span><span class='comment'>#   size:           1
</span><span class='comment'>#   captures:       []
</span><span class='comment'>#   named_captures: {}
</span><span class='comment'>#   values_at:      [&quot;ち&quot;, nil]
</span><span class='comment'>#   []:
</span><span class='comment'>#     [0]:          &quot;ち&quot;
</span><span class='comment'>#     [1]:          nil
</span><span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'># Situation:
</span><span class='comment'>#   pos:       12
</span><span class='comment'>#   charpos:   4
</span><span class='comment'>#   rest:      &quot;は&quot;
</span><span class='comment'>#   rest_size: 3</span></code></pre>

<p>If the match attempt fails:</p>

<ul>
<li>Clears match values.</li>
<li>Returns <code>nil</code>.</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_skip_until'>skip_until</span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>nope</span><span class='regexp_end'>/</span></span>)     <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_match_values_cleared?'>match_values_cleared?</span>(<span class='id identifier rubyid_scanner'>scanner</span>) <span class='comment'># =&gt; true</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1006-L1010'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1006' data-end='1010'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1006</span></pre>
<pre class='code cpp'>

static VALUE
strscan_skip_until(VALUE self, VALUE re)
{
    return strscan_do_scan(self, re, 1, 0, 0);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="terminate-instance_method">
  <h3 class='signature '>
    #<strong>terminate</strong>  &#x21d2; <code>self</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Sets the scanner to end-of-string;
returns <code>self</code>:</p>

<ul>
<li>Sets both <a href="StringScanner.html#positions">positions</a> to end-of-stream.</li>
<li>Clears <a href="StringScanner.html#match-values">match values</a>.</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='const'>HIRAGANA_TEXT</span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_string'><a href="#string-instance_method" title="StringScanner#string (method)">string</a></span>                 <span class='comment'># =&gt; &quot;こんにちは&quot;
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan_until'><a href="#scan_until-instance_method" title="StringScanner#scan_until (method)">scan_until</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>に</span><span class='regexp_end'>/</span></span>)
<span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'># Situation:
</span><span class='comment'>#   pos:       9
</span><span class='comment'>#   charpos:   3
</span><span class='comment'>#   rest:      &quot;ちは&quot;
</span><span class='comment'>#   rest_size: 6
</span><span class='id identifier rubyid_match_values_cleared?'>match_values_cleared?</span>(<span class='id identifier rubyid_scanner'>scanner</span>) <span class='comment'># =&gt; false
</span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_terminate'>terminate</span>              <span class='comment'># =&gt; #&lt;StringScanner fin&gt;
</span><span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'># Situation:
</span><span class='comment'>#   pos:       15
</span><span class='comment'>#   charpos:   5
</span><span class='comment'>#   rest:      &quot;&quot;
</span><span class='comment'>#   rest_size: 0
</span><span class='id identifier rubyid_match_values_cleared?'>match_values_cleared?</span>(<span class='id identifier rubyid_scanner'>scanner</span>) <span class='comment'># =&gt; true</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L380-L389'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='380' data-end='389'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 380</span></pre>
<pre class='code cpp'>

static VALUE
strscan_terminate(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    p-&gt;curr = S_LEN(p);
    CLEAR_MATCH_STATUS(p);
    return self;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="unscan-instance_method">
  <h3 class='signature '>
    #<strong>unscan</strong>  &#x21d2; <code>self</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Sets the <a href="StringScanner.html#byte-position-position-">position</a> to its value previous to the recent successful
<a href="StringScanner.html#matching">match</a> attempt:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foobarbaz</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan'><a href="#scan-instance_method" title="StringScanner#scan (method)">scan</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>foo</span><span class='regexp_end'>/</span></span>)
<span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'>#### Situation:
</span><span class='comment'>####   pos:       3
</span><span class='comment'>####   charpos:   3
</span><span class='comment'>####   rest:      &quot;barbaz&quot;
</span><span class='comment'>####   rest_size: 6
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_unscan'>unscan</span>
<span class='comment'>#### =&gt; #&lt;StringScanner 0/9 @ &quot;fooba...&quot;&gt;
</span><span class='id identifier rubyid_put_situation'>put_situation</span>(<span class='id identifier rubyid_scanner'>scanner</span>)
<span class='comment'>#### Situation:
</span><span class='comment'>####   pos:       0
</span><span class='comment'>####   charpos:   0
</span><span class='comment'>####   rest:      &quot;foobarbaz&quot;
</span><span class='comment'>####   rest_size: 9</span></code></pre>

<p>Raises an exception if match values are clear:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_scan'><a href="#scan-instance_method" title="StringScanner#scan (method)">scan</a></span>(<span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>nope</span><span class='regexp_end'>/</span></span>)           <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_match_values_cleared?'>match_values_cleared?</span>(<span class='id identifier rubyid_scanner'>scanner</span>) <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_unscan'>unscan</span>                 <span class='comment'># Raises StringScanner::Error.</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1399-L1410'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1399' data-end='1410'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1399</span></pre>
<pre class='code cpp'>

static VALUE
strscan_unscan(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (! MATCHED_P(p))
        rb_raise(ScanError, &quot;unscan failed: previous match record not exist&quot;);
    p-&gt;curr = p-&gt;prev;
    CLEAR_MATCH_STATUS(p);
    return self;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="values_at-instance_method">
  <h3 class='signature '>
    #<strong>values_at</strong>(*specifiers)  &#x21d2; <code>array_of_captures</code><sup>?</sup>   </h3>
<div class='docstring'>
  <div class='discussion'>
    <p>Returns an array of captured substrings, or <code>nil</code> of none.</p>

<p>For each <code>specifier</code>, the returned substring is <code>[specifier]</code>;
see <a href="#[]-instance_method" title="StringScanner#[] (method)">#[]</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_scanner'>scanner</span> <span class='op'>=</span> <span class='const'>StringScanner</span>.<span class='id identifier rubyid_new'><a href="#new-class_method" title="StringScanner.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Fri Dec 12 1975 14:39</span><span class='tstring_end'>&#39;</span></span>)
<span class='id identifier rubyid_pattern'>pattern</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?&lt;wday&gt;\w+) (?&lt;month&gt;\w+) (?&lt;day&gt;\d+) </span><span class='regexp_end'>/</span></span>
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_match?'><a href="#match%3F-instance_method" title="StringScanner#match? (method)">match?</a></span>(<span class='id identifier rubyid_pattern'>pattern</span>)
<span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_values_at'>values_at</span>(<span class='op'>*</span><span class='int'>0</span><span class='op'>..</span><span class='int'>3</span>)               <span class='comment'># =&gt; [&quot;Fri Dec 12 &quot;, &quot;Fri&quot;, &quot;Dec&quot;, &quot;12&quot;]
</span><span class='id identifier rubyid_scanner'>scanner</span>.<span class='id identifier rubyid_values_at'>values_at</span>(<span class='op'>*</span><span class='qsymbols'><span class='qsymbols_beg'>%i[</span><span class='tstring_content'>wday</span><span class='words_sep'> </span><span class='tstring_content'>month</span><span class='words_sep'> </span><span class='tstring_content'>day</span><span class='tstring_end'>]</span></span>) <span class='comment'># =&gt; [&quot;Fri&quot;, &quot;Dec&quot;, &quot;12&quot;]</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.0/ext/strscan/strscan.c#L1837-L1853'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='1837' data-end='1853'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/strscan/strscan.c', line 1837</span></pre>
<pre class='code cpp'>

static VALUE
strscan_values_at(int argc, VALUE *argv, VALUE self)
{
    struct strscanner *p;
    long i;
    VALUE new_ary;

    GET_SCANNER(self, p);
    if (! MATCHED_P(p))        return Qnil;

    new_ary = rb_ary_new2(argc);
    for (i = 0; i&lt;argc; i++) {
        rb_ary_push(new_ary, strscan_aref(self, argv[i]));
    }

    return new_ary;
}
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>