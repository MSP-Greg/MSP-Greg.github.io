<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: Psych &mdash; psych  Ruby-4.0.1 p0</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Psych",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../.'>Ruby-4.0.1</a> &raquo; 
      <a href='.'>psych</a> &raquo; 
      <a href='_index.html#alpha_P'>Index (P)</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>Psych&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: Psych</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="Psych/Handlers.html" title="Psych::Handlers (module)"><code>Handlers</code></a>,
        <a href="Psych/JSON.html" title="Psych::JSON (module)"><code>JSON</code></a>,
        <a href="Psych/Nodes.html" title="Psych::Nodes (module)"><code>Nodes</code></a>,
        <a href="Psych/Streaming.html" title="Psych::Streaming (module)"><code>Streaming</code></a>,
        <a href="Psych/Visitors.html" title="Psych::Visitors (module)"><code>Visitors</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a href="Psych/ClassLoader.html" title="Psych::ClassLoader (class)"><code>ClassLoader</code></a>,
        <a href="Psych/Coder.html" title="Psych::Coder (class)"><code>Coder</code></a>,
        <a class='nodoc' href="Psych/Config.html" title="Psych::Config (class)"><code>Config</code></a>,
        <a href="Psych/Emitter.html" title="Psych::Emitter (class)"><code>Emitter</code></a>,
        <a href="Psych/Handler.html" title="Psych::Handler (class)"><code>Handler</code></a>,
        <a href="Psych/Omap.html" title="Psych::Omap (class)"><code>Omap</code></a>,
        <a href="Psych/Parser.html" title="Psych::Parser (class)"><code>Parser</code></a>,
        <a href="Psych/ScalarScanner.html" title="Psych::ScalarScanner (class)"><code>ScalarScanner</code></a>,
        <a href="Psych/Set.html" title="Psych::Set (class)"><code>Set</code></a>,
        <a href="Psych/Stream.html" title="Psych::Stream (class)"><code>Stream</code></a>,
        <a href="Psych/TreeBuilder.html" title="Psych::TreeBuilder (class)"><code>TreeBuilder</code></a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Exceptions:</div>
      <div class='box_11'>
          <a href="Psych/AliasesNotEnabled.html" title="Psych::AliasesNotEnabled (class)"><code>AliasesNotEnabled</code></a>,
        <a href="Psych/AnchorNotDefined.html" title="Psych::AnchorNotDefined (class)"><code>AnchorNotDefined</code></a>,
        <a href="Psych/BadAlias.html" title="Psych::BadAlias (class)"><code>BadAlias</code></a>,
        <a href="Psych/DisallowedClass.html" title="Psych::DisallowedClass (class)"><code>DisallowedClass</code></a>,
        <a href="Psych/Exception.html" title="Psych::Exception (class)"><code>Exception</code></a>,
        <a href="Psych/SyntaxError.html" title="Psych::SyntaxError (class)"><code>SyntaxError</code></a>      </div>
    </td></tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L235'>ext/psych/lib/psych.rb</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/psych.c#L28'>ext/psych/psych.c</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/psych_emitter.c#L560'>ext/psych/psych_emitter.c</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/psych_parser.c#L527'>ext/psych/psych_parser.c</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/psych_to_ruby.c#L33'>ext/psych/psych_to_ruby.c</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/psych_yaml_tree.c#L7'>ext/psych/psych_yaml_tree.c</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/class_loader.rb#L5'>ext/psych/lib/psych/class_loader.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/coder.rb#L2'>ext/psych/lib/psych/coder.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/exception.rb#L2'>ext/psych/lib/psych/exception.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/handler.rb#L2'>ext/psych/lib/psych/handler.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/nodes.rb#L10'>ext/psych/lib/psych/nodes.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/omap.rb#L2'>ext/psych/lib/psych/omap.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/parser.rb#L2'>ext/psych/lib/psych/parser.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/scalar_scanner.rb#L3'>ext/psych/lib/psych/scalar_scanner.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/set.rb#L2'>ext/psych/lib/psych/set.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/stream.rb#L2'>ext/psych/lib/psych/stream.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/streaming.rb#L2'>ext/psych/lib/psych/streaming.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/syntax_error.rb#L4'>ext/psych/lib/psych/syntax_error.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/tree_builder.rb#L4'>ext/psych/lib/psych/tree_builder.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/versions.rb#L3'>ext/psych/lib/psych/versions.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/handlers/document_stream.rb#L4'>ext/psych/lib/psych/handlers/document_stream.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/handlers/recorder.rb#L4'>ext/psych/lib/psych/handlers/recorder.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/json/ruby_events.rb#L2'>ext/psych/lib/psych/json/ruby_events.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/json/stream.rb#L5'>ext/psych/lib/psych/json/stream.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/json/tree_builder.rb#L4'>ext/psych/lib/psych/json/tree_builder.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/json/yaml_events.rb#L2'>ext/psych/lib/psych/json/yaml_events.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/nodes/alias.rb#L2'>ext/psych/lib/psych/nodes/alias.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/nodes/document.rb#L2'>ext/psych/lib/psych/nodes/document.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/nodes/mapping.rb#L2'>ext/psych/lib/psych/nodes/mapping.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/nodes/node.rb#L5'>ext/psych/lib/psych/nodes/node.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/nodes/scalar.rb#L2'>ext/psych/lib/psych/nodes/scalar.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/nodes/sequence.rb#L2'>ext/psych/lib/psych/nodes/sequence.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/nodes/stream.rb#L2'>ext/psych/lib/psych/nodes/stream.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/visitors/depth_first.rb#L2'>ext/psych/lib/psych/visitors/depth_first.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/visitors/emitter.rb#L2'>ext/psych/lib/psych/visitors/emitter.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/visitors/json_tree.rb#L4'>ext/psych/lib/psych/visitors/json_tree.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/visitors/to_ruby.rb#L10'>ext/psych/lib/psych/visitors/to_ruby.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/visitors/visitor.rb#L2'>ext/psych/lib/psych/visitors/visitor.rb</a>,<br/> <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/visitors/yaml_tree.rb#L6'>ext/psych/lib/psych/visitors/yaml_tree.rb</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p><code>Psych</code> is a YAML parser and emitter. <code>Psych</code> leverages libyaml [Home page: <a href="https://pyyaml.org/wiki/LibYAML">pyyaml.org/wiki/LibYAML</a>] or [git repo: <a href="https://github.com/yaml/libyaml">github.com/yaml/libyaml</a>] for its YAML parsing and emitting capabilities. In addition to wrapping libyaml, <code>Psych</code> also knows how to serialize and de-serialize most Ruby objects to and from the YAML format.</p>

<h3 id="label-I+NEED+TO+PARSE+OR+EMIT+YAML+RIGHT+NOW-21">I NEED TO PARSE OR EMIT YAML RIGHT NOW!</h3>

<pre class="code ruby"><code class="ruby"><span class='comment'># Parse some YAML
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_load'><a href="#load-class_method" title="Psych.load (method)">load</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- foo</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; &quot;foo&quot;
</span>
<span class='comment'># Emit some YAML
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_dump'><a href="#dump-class_method" title="Psych.dump (method)">dump</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span>)     <span class='comment'># =&gt; &quot;--- foo\n...\n&quot;
</span>{ <span class='symbeg'>:</span><span class='id identifier rubyid_a'>a</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span>}.<span class='id identifier rubyid_to_yaml'>to_yaml</span>  <span class='comment'># =&gt; &quot;---\n:a: b\n&quot;</span></code></pre>

<p>Got more time on your hands?  Keep on reading!</p>

<h4 id="label-YAML+Parsing">YAML Parsing</h4>

<p><code>Psych</code> provides a range of interfaces for parsing a YAML document ranging from low level to high level, depending on your parsing needs.  At the lowest level, is an event based parser.  Mid level is access to the raw YAML AST, and at the highest level is the ability to unmarshal YAML to Ruby objects.</p>

<h4 id="label-YAML+Emitting">YAML Emitting</h4>

<p><code>Psych</code> provides a range of interfaces ranging from low to high level for producing YAML documents.  Very similar to the YAML parsing interfaces, <code>Psych</code> provides at the lowest level, an event based system, mid-level is building a YAML AST, and the highest level is converting a Ruby object straight to a YAML document.</p>

<h4 id="label-High-level+API">High-level API</h4>

<h5 id="label-Parsing">Parsing</h5>

<p>The high level YAML parser provided by <code>Psych</code> simply takes YAML as input and returns a Ruby data structure.  For information on using the high level parser see <a href="#load-class_method" title="Psych.load (method)">.load</a></p>

<h6 id="label-Reading+from+a+string">Reading from a string</h6>

<pre class="code ruby"><code class="ruby"><span class='const'>Psych</span>.<span class='id identifier rubyid_safe_load'><a href="#safe_load-class_method" title="Psych.safe_load (method)">safe_load</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- a</span><span class='tstring_end'>&quot;</span></span>)             <span class='comment'># =&gt; &#39;a&#39;
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_safe_load'><a href="#safe_load-class_method" title="Psych.safe_load (method)">safe_load</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>---\n - a\n - b</span><span class='tstring_end'>&quot;</span></span>)   <span class='comment'># =&gt; [&#39;a&#39;, &#39;b&#39;]
</span><span class='comment'># From a trusted string:
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_load'><a href="#load-class_method" title="Psych.load (method)">load</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- !ruby/range\nbegin: 0\nend: 42\nexcl: false\n</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; 0..42</span></code></pre>

<h6 id="label-Reading+from+a+file">Reading from a file</h6>

<pre class="code ruby"><code class="ruby"><span class='const'>Psych</span>.<span class='id identifier rubyid_safe_load_file'><a href="#safe_load_file-class_method" title="Psych.safe_load_file (method)">safe_load_file</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>data.yml</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>permitted_classes:</span> [<span class='const'>Date</span>])
<span class='const'>Psych</span>.<span class='id identifier rubyid_load_file'><a href="#load_file-class_method" title="Psych.load_file (method)">load_file</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>trusted_database.yml</span><span class='tstring_end'>&quot;</span></span>)</code></pre>

<h6 id="label-Exception+handling">Exception handling</h6>

<pre class="code ruby"><code class="ruby"><span class='kw'>begin</span>
  <span class='comment'># The second argument changes only the exception contents
</span>  <span class='const'>Psych</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="Psych.parse (method)">parse</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- `</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file.txt</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>rescue</span> <span class='const'>Psych</span><span class='op'>::</span><span class='const'><a href="Psych/SyntaxError.html" title="Psych::SyntaxError (class)">SyntaxError</a></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ex'>ex</span>
  <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_file'>file</span>    <span class='comment'># =&gt; &#39;file.txt&#39;
</span>  <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_message'>message</span> <span class='comment'># =&gt; &quot;(file.txt): found character that cannot start any token&quot;
</span><span class='kw'>end</span></code></pre>

<h5 id="label-Emitting">Emitting</h5>

<p>The high level emitter has the easiest interface.  <code>Psych</code> simply takes a Ruby data structure and converts it to a YAML document.  See <a href="#dump-class_method" title="Psych.dump (method)">.dump</a> for more information on dumping a Ruby data structure.</p>

<h6 id="label-Writing+to+a+string">Writing to a string</h6>

<pre class="code ruby"><code class="ruby"><span class='comment'># Dump an array, get back a YAML string
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_dump'><a href="#dump-class_method" title="Psych.dump (method)">dump</a></span>([<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span>])  <span class='comment'># =&gt; &quot;---\n- a\n- b\n&quot;
</span>
<span class='comment'># Dump an array to an IO object
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_dump'><a href="#dump-class_method" title="Psych.dump (method)">dump</a></span>([<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span>]<span class='comma'>,</span> <span class='const'>StringIO</span>.<span class='id identifier rubyid_new'>new</span>)  <span class='comment'># =&gt; #&lt;StringIO:0x000001009d0890&gt;
</span>
<span class='comment'># Dump an array with indentation set
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_dump'><a href="#dump-class_method" title="Psych.dump (method)">dump</a></span>([<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span>]]<span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_indentation'>indentation</span> <span class='op'>=&gt;</span> <span class='int'>3</span>) <span class='comment'># =&gt; &quot;---\n- a\n-  - b\n&quot;
</span>
<span class='comment'># Dump an array to an IO with indentation set
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_dump'><a href="#dump-class_method" title="Psych.dump (method)">dump</a></span>([<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span>]]<span class='comma'>,</span> <span class='const'>StringIO</span>.<span class='id identifier rubyid_new'>new</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_indentation'>indentation</span> <span class='op'>=&gt;</span> <span class='int'>3</span>)</code></pre>

<h6 id="label-Writing+to+a+file">Writing to a file</h6>

<p>Currently there is no direct API for dumping Ruby structure to file:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>File</span>.<span class='id identifier rubyid_open'>open</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>database.yml</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
  <span class='id identifier rubyid_file'>file</span>.<span class='id identifier rubyid_write'>write</span>(<span class='const'>Psych</span>.<span class='id identifier rubyid_dump'><a href="#dump-class_method" title="Psych.dump (method)">dump</a></span>([<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span>]))
<span class='kw'>end</span></code></pre>

<h4 id="label-Mid-level+API">Mid-level API</h4>

<h5 id="label-Parsing">Parsing</h5>

<p><code>Psych</code> provides access to an AST produced from parsing a YAML document.  This tree is built using the <a href="Psych/Parser.html" title="Psych::Parser (class)"><code>Parser</code></a> and <a href="Psych/TreeBuilder.html" title="Psych::TreeBuilder (class)"><code>TreeBuilder</code></a>.  The AST can be examined and manipulated freely.  Please see <a href="#parse_stream-class_method" title="Psych.parse_stream (method)">.parse_stream</a>, <a href="Psych/Nodes.html" title="Psych::Nodes (module)"><code>Nodes</code></a>, and <a href="Psych/Nodes/Node.html" title="Psych::Nodes::Node (class)"><code>::Psych::Nodes::Node</code></a> for more information on dealing with YAML syntax trees.</p>

<h6 id="label-Reading+from+a+string">Reading from a string</h6>

<pre class="code ruby"><code class="ruby"><span class='comment'># Returns Psych::Nodes::Stream
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_parse_stream'><a href="#parse_stream-class_method" title="Psych.parse_stream (method)">parse_stream</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>---\n - a\n - b</span><span class='tstring_end'>&quot;</span></span>)

<span class='comment'># Returns Psych::Nodes::Document
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="Psych.parse (method)">parse</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>---\n - a\n - b</span><span class='tstring_end'>&quot;</span></span>)</code></pre>

<h6 id="label-Reading+from+a+file">Reading from a file</h6>

<pre class="code ruby"><code class="ruby"><span class='comment'># Returns Psych::Nodes::Stream
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_parse_stream'><a href="#parse_stream-class_method" title="Psych.parse_stream (method)">parse_stream</a></span>(<span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>database.yml</span><span class='tstring_end'>&#39;</span></span>))

<span class='comment'># Returns Psych::Nodes::Document
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_parse_file'><a href="#parse_file-class_method" title="Psych.parse_file (method)">parse_file</a></span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>database.yml</span><span class='tstring_end'>&#39;</span></span>)</code></pre>

<h6 id="label-Exception+handling">Exception handling</h6>

<pre class="code ruby"><code class="ruby"><span class='kw'>begin</span>
  <span class='comment'># The second argument changes only the exception contents
</span>  <span class='const'>Psych</span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="Psych.parse (method)">parse</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- `</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file.txt</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>rescue</span> <span class='const'>Psych</span><span class='op'>::</span><span class='const'><a href="Psych/SyntaxError.html" title="Psych::SyntaxError (class)">SyntaxError</a></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ex'>ex</span>
  <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_file'>file</span>    <span class='comment'># =&gt; &#39;file.txt&#39;
</span>  <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_message'>message</span> <span class='comment'># =&gt; &quot;(file.txt): found character that cannot start any token&quot;
</span><span class='kw'>end</span></code></pre>

<h5 id="label-Emitting">Emitting</h5>

<p>At the mid level is building an AST.  This AST is exactly the same as the AST used when parsing a YAML document.  Users can build an AST by hand and the AST knows how to emit itself as a YAML document.  See <a href="Psych/Nodes.html" title="Psych::Nodes (module)"><code>Nodes</code></a>, <a href="Psych/Nodes/Node.html" title="Psych::Nodes::Node (class)"><code>::Psych::Nodes::Node</code></a>, and <a href="Psych/TreeBuilder.html" title="Psych::TreeBuilder (class)"><code>TreeBuilder</code></a> for more information on building a YAML AST.</p>

<h6 id="label-Writing+to+a+string">Writing to a string</h6>

<pre class="code ruby"><code class="ruby"><span class='comment'># We need Psych::Nodes::Stream (not Psych::Nodes::Document)
</span><span class='id identifier rubyid_stream'>stream</span> <span class='op'>=</span> <span class='const'>Psych</span>.<span class='id identifier rubyid_parse_stream'><a href="#parse_stream-class_method" title="Psych.parse_stream (method)">parse_stream</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>---\n - a\n - b</span><span class='tstring_end'>&quot;</span></span>)

<span class='id identifier rubyid_stream'>stream</span>.<span class='id identifier rubyid_to_yaml'>to_yaml</span> <span class='comment'># =&gt; &quot;---\n- a\n- b\n&quot;</span></code></pre>

<h6 id="label-Writing+to+a+file">Writing to a file</h6>

<pre class="code ruby"><code class="ruby"><span class='comment'># We need Psych::Nodes::Stream (not Psych::Nodes::Document)
</span><span class='id identifier rubyid_stream'>stream</span> <span class='op'>=</span> <span class='const'>Psych</span>.<span class='id identifier rubyid_parse_stream'><a href="#parse_stream-class_method" title="Psych.parse_stream (method)">parse_stream</a></span>(<span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>database.yml</span><span class='tstring_end'>&#39;</span></span>))

<span class='const'>File</span>.<span class='id identifier rubyid_open'>open</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>database.yml</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
  <span class='id identifier rubyid_file'>file</span>.<span class='id identifier rubyid_write'>write</span>(<span class='id identifier rubyid_stream'>stream</span>.<span class='id identifier rubyid_to_yaml'>to_yaml</span>)
<span class='kw'>end</span></code></pre>

<h4 id="label-Low-level+API">Low-level API</h4>

<h5 id="label-Parsing">Parsing</h5>

<p>The lowest level parser should be used when the YAML input is already known, and the developer does not want to pay the price of building an AST or automatic detection and conversion to Ruby objects.  See <a href="Psych/Parser.html" title="Psych::Parser (class)"><code>Parser</code></a> for more information on using the event based parser.</p>

<h6 id="label-Reading+to+-7BPsych-3A-3ANodes-3A-3AStream-7D+structure">Reading to <a href="Psych/Nodes/Stream.html" title="Psych::Nodes::Stream (class)"><code>::Psych::Nodes::Stream</code></a> structure</h6>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_parser'><a href="#parser-class_method" title="Psych.parser (method)">parser</a></span> <span class='op'>=</span> <span class='const'>Psych</span><span class='op'>::</span><span class='const'><a href="Psych/Parser.html" title="Psych::Parser (class)">Parser</a></span>.<span class='id identifier rubyid_new'><a href="Psych/Parser.html#new-class_method" title="Psych::Parser.new (method)">new</a></span>(<span class='const'><a href="Psych/TreeBuilder.html" title="Psych::TreeBuilder (class)">TreeBuilder</a></span>.<span class='id identifier rubyid_new'><a href="Psych/TreeBuilder.html#new-class_method" title="Psych::TreeBuilder.new (method)">new</a></span>) <span class='comment'># =&gt; #&lt;Psych::Parser&gt;
</span><span class='id identifier rubyid_parser'><a href="#parser-class_method" title="Psych.parser (method)">parser</a></span> <span class='op'>=</span> <span class='const'>Psych</span>.<span class='id identifier rubyid_parser'><a href="#parser-class_method" title="Psych.parser (method)">parser</a></span>                       <span class='comment'># it&#39;s an alias for the above
</span>
<span class='id identifier rubyid_parser'><a href="#parser-class_method" title="Psych.parser (method)">parser</a></span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="Psych.parse (method)">parse</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>---\n - a\n - b</span><span class='tstring_end'>&quot;</span></span>)             <span class='comment'># =&gt; #&lt;Psych::Parser&gt;
</span><span class='id identifier rubyid_parser'><a href="#parser-class_method" title="Psych.parser (method)">parser</a></span>.<span class='id identifier rubyid_handler'>handler</span>                              <span class='comment'># =&gt; #&lt;Psych::TreeBuilder&gt;
</span><span class='id identifier rubyid_parser'><a href="#parser-class_method" title="Psych.parser (method)">parser</a></span>.<span class='id identifier rubyid_handler'>handler</span>.<span class='id identifier rubyid_root'><a href="top-level-namespace.html" title="Top Level Namespace (root)">root</a></span>                         <span class='comment'># =&gt; #&lt;Psych::Nodes::Stream&gt;</span></code></pre>

<h6 id="label-Receiving+an+events+stream">Receiving an events stream</h6>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_recorder'>recorder</span> <span class='op'>=</span> <span class='const'>Psych</span><span class='op'>::</span><span class='const'><a href="Psych/Handlers.html" title="Psych::Handlers (module)">Handlers</a></span><span class='op'>::</span><span class='const'><a href="Psych/Handlers/Recorder.html" title="Psych::Handlers::Recorder (class)">Recorder</a></span>.<span class='id identifier rubyid_new'><a href="Psych/Handlers/Recorder.html#new-class_method" title="Psych::Handlers::Recorder.new (method)">new</a></span>
<span class='id identifier rubyid_parser'><a href="#parser-class_method" title="Psych.parser (method)">parser</a></span> <span class='op'>=</span> <span class='const'>Psych</span><span class='op'>::</span><span class='const'><a href="Psych/Parser.html" title="Psych::Parser (class)">Parser</a></span>.<span class='id identifier rubyid_new'><a href="Psych/Parser.html#new-class_method" title="Psych::Parser.new (method)">new</a></span>(<span class='id identifier rubyid_recorder'>recorder</span>)

<span class='id identifier rubyid_parser'><a href="#parser-class_method" title="Psych.parser (method)">parser</a></span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="Psych.parse (method)">parse</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>---\n - a\n - b</span><span class='tstring_end'>&quot;</span></span>)
<span class='id identifier rubyid_recorder'>recorder</span>.<span class='id identifier rubyid_events'>events</span> <span class='comment'># =&gt; [list of [event, args] lists]
</span>                <span class='comment'># event is one of: Psych::Handler::EVENTS
</span>                <span class='comment'># args are the arguments passed to the event</span></code></pre>

<h5 id="label-Emitting">Emitting</h5>

<p>The lowest level emitter is an event based system.  Events are sent to a <a href="Psych/Emitter.html" title="Psych::Emitter (class)"><code>Emitter</code></a> object.  That object knows how to convert the events to a YAML document.  This interface should be used when document format is known in advance or speed is a concern.  See <a href="Psych/Emitter.html" title="Psych::Emitter (class)"><code>Emitter</code></a> for more information.</p>

<h6 id="label-Writing+to+a+Ruby+structure">Writing to a Ruby structure</h6>

<pre class="code ruby"><code class="ruby"><span class='const'>Psych</span>.<span class='id identifier rubyid_parser'><a href="#parser-class_method" title="Psych.parser (method)">parser</a></span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="Psych.parse (method)">parse</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- a</span><span class='tstring_end'>&quot;</span></span>)       <span class='comment'># =&gt; #&lt;Psych::Parser&gt;
</span>
<span class='id identifier rubyid_parser'><a href="#parser-class_method" title="Psych.parser (method)">parser</a></span>.<span class='id identifier rubyid_handler'>handler</span>.<span class='id identifier rubyid_first'>first</span>              <span class='comment'># =&gt; #&lt;Psych::Nodes::Stream&gt;
</span><span class='id identifier rubyid_parser'><a href="#parser-class_method" title="Psych.parser (method)">parser</a></span>.<span class='id identifier rubyid_handler'>handler</span>.<span class='id identifier rubyid_first'>first</span>.<span class='id identifier rubyid_to_ruby'>to_ruby</span>      <span class='comment'># =&gt; [&quot;a&quot;]
</span>
<span class='id identifier rubyid_parser'><a href="#parser-class_method" title="Psych.parser (method)">parser</a></span>.<span class='id identifier rubyid_handler'>handler</span>.<span class='id identifier rubyid_root'><a href="top-level-namespace.html" title="Top Level Namespace (root)">root</a></span>.<span class='id identifier rubyid_first'>first</span>         <span class='comment'># =&gt; #&lt;Psych::Nodes::Document&gt;
</span><span class='id identifier rubyid_parser'><a href="#parser-class_method" title="Psych.parser (method)">parser</a></span>.<span class='id identifier rubyid_handler'>handler</span>.<span class='id identifier rubyid_root'><a href="top-level-namespace.html" title="Top Level Namespace (root)">root</a></span>.<span class='id identifier rubyid_first'>first</span>.<span class='id identifier rubyid_to_ruby'>to_ruby</span> <span class='comment'># =&gt; &quot;a&quot;
</span>
<span class='comment'># You can instantiate an Emitter manually
</span><span class='const'>Psych</span><span class='op'>::</span><span class='const'><a href="Psych/Visitors.html" title="Psych::Visitors (module)">Visitors</a></span><span class='op'>::</span><span class='const'><a href="Psych/Visitors/ToRuby.html" title="Psych::Visitors::ToRuby (class)">ToRuby</a></span>.<span class='id identifier rubyid_new'><a href="Psych/Visitors/ToRuby.html#new-class_method" title="Psych::Visitors::ToRuby.new (method)">new</a></span>.<span class='id identifier rubyid_accept'><a href="Psych/Visitors/ToRuby.html#accept-instance_method" title="Psych::Visitors::ToRuby#accept (method)">accept</a></span>(<span class='id identifier rubyid_parser'><a href="#parser-class_method" title="Psych.parser (method)">parser</a></span>.<span class='id identifier rubyid_handler'>handler</span>.<span class='id identifier rubyid_root'><a href="top-level-namespace.html" title="Top Level Namespace (root)">root</a></span>.<span class='id identifier rubyid_first'>first</span>)
<span class='comment'># =&gt; &quot;a&quot;</span></code></pre>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='DEFAULT_SNAKEYAML_VERSION-constant' class='summary_signature'>DEFAULT_SNAKEYAML_VERSION =</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/versions.rb#L8-L8'># File 'ext/psych/lib/psych/versions.rb', line 8</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2.10</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_freeze'>freeze</span></pre>
  </li>
  <li>
    <span id='LIBYAML_VERSION-constant' class='summary_signature'>LIBYAML_VERSION =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The version of libyaml <code>Psych</code> is using</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L237-L237'># File 'ext/psych/lib/psych.rb', line 237</a>    <pre class='code ruby'><span class='const'>Psych</span>.<span class='id identifier rubyid_libyaml_version'><a href="#libyaml_version-class_method" title="Psych.libyaml_version (method)">libyaml_version</a></span>.<span class='id identifier rubyid_join'>join</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_freeze'>freeze</span></pre>
  </li>
  <li>
    <span id='VERSION-constant' class='summary_signature'>VERSION =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The version of <code>Psych</code> you are using</p>

  </div>
</div>
    <a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych/versions.rb#L5-L5'># File 'ext/psych/lib/psych/versions.rb', line 5</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>5.3.1</span><span class='tstring_end'>&#39;</span></span></pre>
  </li>
</ul>
</div>

<h2 class='h2_sum' id='class_attribute_summary'>Class Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw nodoc'>
      <a href="#domain_types-class_method" title=".domain_types (class method)">.<strong>domain_types</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature rw nodoc'>
      <a href="#domain_types=-class_method" title=".domain_types= (class method)">.<strong>domain_types=</strong>(value)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature rw nodoc'>
      <a href="#dump_tags-class_method" title=".dump_tags (class method)">.<strong>dump_tags</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature rw nodoc'>
      <a href="#dump_tags=-class_method" title=".dump_tags= (class method)">.<strong>dump_tags=</strong>(value)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature rw nodoc'>
      <a href="#load_tags-class_method" title=".load_tags (class method)">.<strong>load_tags</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature rw nodoc'>
      <a href="#load_tags=-class_method" title=".load_tags= (class method)">.<strong>load_tags=</strong>(value)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- class_attribute_summary -->

<h2 class='h2_sum' id='class_method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#dump-class_method" title="dump (class method)">.<strong>dump</strong>(o)  &#x21d2; string of yaml </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Dump Ruby object <code>o</code> to a YAML string.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#dump_stream-class_method" title=".dump_stream (class method)">.<strong>dump_stream</strong>(*objects)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Dump a list of objects as separate documents to a document stream.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#libyaml_version-class_method" title="libyaml_version (class method)">.<strong>libyaml_version</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the version of libyaml being used.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#load-class_method" title=".load (class method)">.<strong>load</strong>(yaml, permitted_classes: [Symbol], permitted_symbols: [], aliases: false, filename: nil, fallback: nil, symbolize_names: false, freeze: false, strict_integer: false, parse_symbols: true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Load <code>yaml</code> in to a Ruby data structure.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#load_file-class_method" title=".load_file (class method)">.<strong>load_file</strong>(filename, **kwargs)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Loads the document contained in <code>filename</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#load_stream-class_method" title=".load_stream (class method)">.<strong>load_stream</strong>(yaml, filename: nil, fallback: [], **kwargs)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Load multiple documents given in <code>yaml</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse-class_method" title=".parse (class method)">.<strong>parse</strong>(yaml, filename: nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Parse a YAML string in <code>yaml</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse_file-class_method" title=".parse_file (class method)">.<strong>parse_file</strong>(filename, fallback: false)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Parse a file at <code>filename</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parse_stream-class_method" title=".parse_stream (class method)">.<strong>parse_stream</strong>(yaml, filename: nil, &amp;block)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Parse a YAML string in <code>yaml</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#parser-class_method" title=".parser (class method)">.<strong>parser</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a default parser.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#safe_dump-class_method" title="safe_dump (class method)">.<strong>safe_dump</strong>(o)  &#x21d2; string of yaml </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Safely dump Ruby object <code>o</code> to a YAML string.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#safe_load-class_method" title=".safe_load (class method)">.<strong>safe_load</strong>(yaml, permitted_classes: [], permitted_symbols: [], aliases: false, filename: nil, fallback: nil, symbolize_names: false, freeze: false, strict_integer: false, parse_symbols: true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Safely load the yaml string in <code>yaml</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#safe_load_file-class_method" title=".safe_load_file (class method)">.<strong>safe_load_file</strong>(filename, **kwargs)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Safely loads the document contained in <code>filename</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#safe_load_stream-class_method" title=".safe_load_stream (class method)">.<strong>safe_load_stream</strong>(yaml, filename: nil, permitted_classes: [], aliases: false)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Load multiple documents given in <code>yaml</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_json-class_method" title=".to_json (class method)">.<strong>to_json</strong>(object)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Dump Ruby <code>object</code> to a <a href="Psych/JSON.html" title="Psych::JSON (module)"><code>JSON</code></a> string.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#unsafe_load-class_method" title=".unsafe_load (class method)">.<strong>unsafe_load</strong>(yaml, filename: nil, fallback: false, symbolize_names: false, freeze: false, strict_integer: false, parse_symbols: true)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Load <code>yaml</code> in to a Ruby data structure.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#unsafe_load_file-class_method" title=".unsafe_load_file (class method)">.<strong>unsafe_load_file</strong>(filename, **kwargs)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Load the document contained in <code>filename</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#add_builtin_type-class_method" title=".add_builtin_type (class method)">.<strong>add_builtin_type</strong>(type_tag, &amp;block)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#add_domain_type-class_method" title=".add_domain_type (class method)">.<strong>add_domain_type</strong>(domain, type_tag, &amp;block)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#add_tag-class_method" title=".add_tag (class method)">.<strong>add_tag</strong>(tag, klass)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#config-class_method" title=".config (class method)">.<strong>config</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#remove_type-class_method" title=".remove_type (class method)">.<strong>remove_type</strong>(type_tag)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>  <!-- class_method_summary -->
<h2 class='y_details'>Class Attribute Details</h2>
<section class='method_details first' id="domain_types-class_method">
  <h3 class='signature rw  nodoc first'>
    .<strong>domain_types</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L767-L769'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='767' data-end='769'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 767</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_domain_types'>domain_types</span>
  <span class='id identifier rubyid_config'><a href="#config-class_method" title="Psych.config (method)">config</a></span>.<span class='id identifier rubyid_domain_types'>domain_types</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="domain_types=-class_method">
  <h3 class='signature rw  nodoc'>
    .<strong>domain_types=</strong>(value)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L779-L781'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='779' data-end='781'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 779</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_domain_types='>domain_types=</span>(<span class='id identifier rubyid_value'>value</span>)
  <span class='id identifier rubyid_config'><a href="#config-class_method" title="Psych.config (method)">config</a></span>.<span class='id identifier rubyid_domain_types'><a href="#domain_types-class_method" title="Psych.domain_types (method)">domain_types</a></span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dump_tags-class_method">
  <h3 class='signature rw  nodoc'>
    .<strong>dump_tags</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L763-L765'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='763' data-end='765'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 763</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_dump_tags'>dump_tags</span>
  <span class='id identifier rubyid_config'><a href="#config-class_method" title="Psych.config (method)">config</a></span>.<span class='id identifier rubyid_dump_tags'>dump_tags</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dump_tags=-class_method">
  <h3 class='signature rw  nodoc'>
    .<strong>dump_tags=</strong>(value)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L775-L777'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='775' data-end='777'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 775</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_dump_tags='>dump_tags=</span>(<span class='id identifier rubyid_value'>value</span>)
  <span class='id identifier rubyid_config'><a href="#config-class_method" title="Psych.config (method)">config</a></span>.<span class='id identifier rubyid_dump_tags'><a href="#dump_tags-class_method" title="Psych.dump_tags (method)">dump_tags</a></span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load_tags-class_method">
  <h3 class='signature rw  nodoc'>
    .<strong>load_tags</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L759-L761'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='759' data-end='761'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 759</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_load_tags'>load_tags</span>
  <span class='id identifier rubyid_config'><a href="#config-class_method" title="Psych.config (method)">config</a></span>.<span class='id identifier rubyid_load_tags'>load_tags</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load_tags=-class_method">
  <h3 class='signature rw  nodoc'>
    .<strong>load_tags=</strong>(value)   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L771-L773'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='771' data-end='773'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 771</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_load_tags='>load_tags=</span>(<span class='id identifier rubyid_value'>value</span>)
  <span class='id identifier rubyid_config'><a href="#config-class_method" title="Psych.config (method)">config</a></span>.<span class='id identifier rubyid_load_tags'><a href="#load_tags-class_method" title="Psych.load_tags (method)">load_tags</a></span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="add_builtin_type-class_method">
  <h3 class='signature nodoc first'>
    .<strong>add_builtin_type</strong>(type_tag, &amp;block)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L729-L733'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='729' data-end='733'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 729</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_add_builtin_type'>add_builtin_type</span> <span class='id identifier rubyid_type_tag'>type_tag</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_domain'>domain</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>yaml.org,2002</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tag</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_domain'>domain</span><span class='comma'>,</span> <span class='id identifier rubyid_type_tag'>type_tag</span>].<span class='id identifier rubyid_join'>join</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_domain_types'><a href="#domain_types-class_method" title="Psych.domain_types (method)">domain_types</a></span>[<span class='id identifier rubyid_key'>key</span>] <span class='op'>=</span> [<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="add_domain_type-class_method">
  <h3 class='signature nodoc'>
    .<strong>add_domain_type</strong>(domain, type_tag, &amp;block)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L723-L727'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='723' data-end='727'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 723</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_add_domain_type'>add_domain_type</span> <span class='id identifier rubyid_domain'>domain</span><span class='comma'>,</span> <span class='id identifier rubyid_type_tag'>type_tag</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tag</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_domain'>domain</span><span class='comma'>,</span> <span class='id identifier rubyid_type_tag'>type_tag</span>].<span class='id identifier rubyid_join'>join</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_domain_types'><a href="#domain_types-class_method" title="Psych.domain_types (method)">domain_types</a></span>[<span class='id identifier rubyid_key'>key</span>] <span class='op'>=</span> [<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span>]
  <span class='id identifier rubyid_domain_types'><a href="#domain_types-class_method" title="Psych.domain_types (method)">domain_types</a></span>[<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>tag:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_type_tag'>type_tag</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>] <span class='op'>=</span> [<span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="add_tag-class_method">
  <h3 class='signature nodoc'>
    .<strong>add_tag</strong>(tag, klass)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L739-L742'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='739' data-end='742'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 739</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_add_tag'>add_tag</span> <span class='id identifier rubyid_tag'>tag</span><span class='comma'>,</span> <span class='id identifier rubyid_klass'>klass</span>
  <span class='id identifier rubyid_load_tags'><a href="#load_tags-class_method" title="Psych.load_tags (method)">load_tags</a></span>[<span class='id identifier rubyid_tag'>tag</span>] <span class='op'>=</span> <span class='id identifier rubyid_klass'>klass</span>.<span class='id identifier rubyid_name'>name</span>
  <span class='id identifier rubyid_dump_tags'><a href="#dump_tags-class_method" title="Psych.dump_tags (method)">dump_tags</a></span>[<span class='id identifier rubyid_klass'>klass</span>] <span class='op'>=</span> <span class='id identifier rubyid_tag'>tag</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="config-class_method">
  <h3 class='signature nodoc'>
    .<strong>config</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L755-L757'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='755' data-end='757'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 755</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_config'>config</span>
  <span class='const'>Ractor</span>.<span class='id identifier rubyid_current'>current</span>[<span class='symbeg'>:</span><span class='const'><a href="Psych/Config.html" title="Psych::Config (class)">PsychConfig</a></span>] <span class='op'>||=</span> <span class='const'><a href="Psych/Config.html" title="Psych::Config (class)">Config</a></span>.<span class='id identifier rubyid_new'>new</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dump-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>dump</strong>(o)  &#x21d2; <code>string</code> <code>of</code> <code>yaml</code> </span>
      <span class='overload'>.<strong>dump</strong>(o, options)  &#x21d2; <code>string</code> <code>of</code> <code>yaml</code> </span>
      <span class='overload'>.<strong>dump</strong>(o, io)  &#x21d2; <code>io</code> <code>object</code> <code>passed</code> <code>in</code> </span>
      <span class='overload'>.<strong>dump</strong>(o, io, options)  &#x21d2; <code>io</code> <code>object</code> <code>passed</code> <code>in</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Dump Ruby object <code>o</code> to a YAML string.  Optional <code>options</code> may be passed in to control the output format.  If an IO object is passed in, the YAML will be dumped to that IO object.</p>

<p>Currently supported options are:</p>
<dl class="rdoc-list label-list"><dt><code>:indentation</code></dt>
<dd>
<p>Number of space characters used to indent. Acceptable value should be in <code>0..9</code> range, otherwise option is ignored.</p>

<p>Default: <code>2</code>.</p>
</dd><dt><code>:line_width</code></dt>
<dd>
<p>Max character to wrap line at. For unlimited line width use <code>-1</code>.</p>

<p>Default: <code>0</code> (meaning wrap at 81).</p>
</dd><dt><code>:canonical</code></dt>
<dd>
<p>Write canonical YAML form (very verbose, yet strictly formal).</p>

<p>Default: <code>false</code>.</p>
</dd><dt><code>:header</code></dt>
<dd>
<p>Write <code>%YAML [version]</code> at the beginning of document.</p>

<p>Default: <code>false</code>.</p>
</dd><dt><code>:stringify_names</code></dt>
<dd>
<p>Dump symbol keys in Hash objects as string.</p>

<p>Default: <code>false</code>.</p>
</dd></dl>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Dump an array, get back a YAML string
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_dump'>dump</span>([<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span>])  <span class='comment'># =&gt; &quot;---\n- a\n- b\n&quot;
</span>
<span class='comment'># Dump an array to an IO object
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_dump'>dump</span>([<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span>]<span class='comma'>,</span> <span class='const'>StringIO</span>.<span class='id identifier rubyid_new'>new</span>)  <span class='comment'># =&gt; #&lt;StringIO:0x000001009d0890&gt;
</span>
<span class='comment'># Dump an array with indentation set
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_dump'>dump</span>([<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span>]]<span class='comma'>,</span> <span class='label'>indentation:</span> <span class='int'>3</span>) <span class='comment'># =&gt; &quot;---\n- a\n-  - b\n&quot;
</span>
<span class='comment'># Dump an array to an IO with indentation set
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_dump'>dump</span>([<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span>]]<span class='comma'>,</span> <span class='const'>StringIO</span>.<span class='id identifier rubyid_new'>new</span><span class='comma'>,</span> <span class='label'>indentation:</span> <span class='int'>3</span>)

<span class='comment'># Dump hash with symbol keys as string
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_dump'>dump</span>({<span class='label'>a:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span>}<span class='comma'>,</span> <span class='label'>stringify_names:</span> <span class='kw'>true</span>) <span class='comment'># =&gt; &quot;---\na: b\n&quot;</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L515-L524'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='515' data-end='524'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 515</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_dump'>dump</span> <span class='id identifier rubyid_o'>o</span><span class='comma'>,</span> <span class='id identifier rubyid_io'>io</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> {}
  <span class='kw'>if</span> <span class='const'>Hash</span> <span class='op'>===</span> <span class='id identifier rubyid_io'>io</span>
    <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_io'>io</span>
    <span class='id identifier rubyid_io'>io</span>      <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_visitor'>visitor</span> <span class='op'>=</span> <span class='const'>Psych</span><span class='op'>::</span><span class='const'><a href="Psych/Visitors.html" title="Psych::Visitors (module)">Visitors</a></span><span class='op'>::</span><span class='const'><a href="Psych/Visitors/YAMLTree.html" title="Psych::Visitors::YAMLTree (class)">YAMLTree</a></span>.<span class='id identifier rubyid_create'><a href="Psych/Visitors/YAMLTree.html#create-class_method" title="Psych::Visitors::YAMLTree.create (method)">create</a></span> <span class='id identifier rubyid_options'>options</span>
  <span class='id identifier rubyid_visitor'>visitor</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_o'>o</span>
  <span class='id identifier rubyid_visitor'>visitor</span>.<span class='id identifier rubyid_tree'>tree</span>.<span class='id identifier rubyid_yaml'>yaml</span> <span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="dump_stream-class_method">
  <h3 class='signature '>
    .<strong>dump_stream</strong>(*objects)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Dump a list of objects as separate documents to a document stream.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Psych</span>.<span class='id identifier rubyid_dump_stream'>dump_stream</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo\n  </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> {}) <span class='comment'># =&gt; &quot;--- ! \&quot;foo\\n  \&quot;\n--- {}\n&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L613-L619'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='613' data-end='619'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 613</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_dump_stream'>dump_stream</span> <span class='op'>*</span><span class='id identifier rubyid_objects'>objects</span>
  <span class='id identifier rubyid_visitor'>visitor</span> <span class='op'>=</span> <span class='const'>Psych</span><span class='op'>::</span><span class='const'><a href="Psych/Visitors.html" title="Psych::Visitors (module)">Visitors</a></span><span class='op'>::</span><span class='const'><a href="Psych/Visitors/YAMLTree.html" title="Psych::Visitors::YAMLTree (class)">YAMLTree</a></span>.<span class='id identifier rubyid_create'><a href="Psych/Visitors/YAMLTree.html#create-class_method" title="Psych::Visitors::YAMLTree.create (method)">create</a></span>({})
  <span class='id identifier rubyid_objects'>objects</span>.<span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_o'>o</span><span class='op'>|</span>
    <span class='id identifier rubyid_visitor'>visitor</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_o'>o</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_visitor'>visitor</span>.<span class='id identifier rubyid_tree'>tree</span>.<span class='id identifier rubyid_yaml'>yaml</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="libyaml_version-class_method">
  <h3 class='signature '>
    .<strong>libyaml_version</strong>    </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the version of libyaml being used</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/psych.c#L7-L19'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='7' data-end='19'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/psych.c', line 7</span></pre>
<pre class='code cpp'>

static VALUE libyaml_version(VALUE module)
{
    int major, minor, patch;
    VALUE list[3];

    yaml_get_version(&amp;major, &amp;minor, &amp;patch);

    list[0] = INT2NUM(major);
    list[1] = INT2NUM(minor);
    list[2] = INT2NUM(patch);

    return rb_ary_new4((long)3, list);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load-class_method">
  <h3 class='signature '>
    .<strong>load</strong>(yaml, permitted_classes: [Symbol], permitted_symbols: [], aliases: false, filename: nil, fallback: nil, symbolize_names: false, freeze: false, strict_integer: false, parse_symbols: true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Load <code>yaml</code> in to a Ruby data structure.  If multiple documents are provided, the object contained in the first document will be returned. <code>filename</code> will be used in the exception message if any exception is raised while parsing.  If <code>yaml</code> is empty, it returns the specified <code>fallback</code> return value, which defaults to <code>nil</code>.</p>

<p>Raises a <a href="Psych/SyntaxError.html" title="Psych::SyntaxError (class)"><code>::Psych::SyntaxError</code></a> when a YAML syntax error is detected.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Psych</span>.<span class='id identifier rubyid_load'>load</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- a</span><span class='tstring_end'>&quot;</span></span>)             <span class='comment'># =&gt; &#39;a&#39;
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_load'>load</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>---\n - a\n - b</span><span class='tstring_end'>&quot;</span></span>)   <span class='comment'># =&gt; [&#39;a&#39;, &#39;b&#39;]
</span>
<span class='kw'>begin</span>
  <span class='const'>Psych</span>.<span class='id identifier rubyid_load'>load</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- `</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>filename:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file.txt</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>rescue</span> <span class='const'>Psych</span><span class='op'>::</span><span class='const'><a href="Psych/SyntaxError.html" title="Psych::SyntaxError (class)">SyntaxError</a></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ex'>ex</span>
  <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_file'>file</span>    <span class='comment'># =&gt; &#39;file.txt&#39;
</span>  <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_message'>message</span> <span class='comment'># =&gt; &quot;(file.txt): found character that cannot start any token&quot;
</span><span class='kw'>end</span></code></pre>

<p>When the optional <code>symbolize_names</code> keyword argument is set to a true value, returns symbols for keys in Hash objects (default: strings).</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Psych</span>.<span class='id identifier rubyid_load'>load</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>---\n foo: bar</span><span class='tstring_end'>&quot;</span></span>)                         <span class='comment'># =&gt; {&quot;foo&quot;=&gt;&quot;bar&quot;}
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_load'>load</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>---\n foo: bar</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>symbolize_names:</span> <span class='kw'>true</span>)  <span class='comment'># =&gt; {:foo=&gt;&quot;bar&quot;}</span></code></pre>

<p>Raises a TypeError when <code>yaml</code> parameter is NilClass.  This method is similar to <a href="#safe_load-class_method" title="Psych.safe_load (method)">.safe_load</a> except that <code>Symbol</code> objects are allowed by default.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L369-L379'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='369' data-end='379'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 369</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_load'>load</span> <span class='id identifier rubyid_yaml'>yaml</span><span class='comma'>,</span> <span class='label'>permitted_classes:</span> [<span class='const'>Symbol</span>]<span class='comma'>,</span> <span class='label'>permitted_symbols:</span> []<span class='comma'>,</span> <span class='label'>aliases:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>filename:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>fallback:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>symbolize_names:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>freeze:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>strict_integer:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>parse_symbols:</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_safe_load'><a href="#safe_load-class_method" title="Psych.safe_load (method)">safe_load</a></span> <span class='id identifier rubyid_yaml'>yaml</span><span class='comma'>,</span> <span class='label'>permitted_classes:</span> <span class='id identifier rubyid_permitted_classes'>permitted_classes</span><span class='comma'>,</span>
                  <span class='label'>permitted_symbols:</span> <span class='id identifier rubyid_permitted_symbols'>permitted_symbols</span><span class='comma'>,</span>
                  <span class='label'>aliases:</span> <span class='id identifier rubyid_aliases'>aliases</span><span class='comma'>,</span>
                  <span class='label'>filename:</span> <span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span>
                  <span class='label'>fallback:</span> <span class='id identifier rubyid_fallback'>fallback</span><span class='comma'>,</span>
                  <span class='label'>symbolize_names:</span> <span class='id identifier rubyid_symbolize_names'>symbolize_names</span><span class='comma'>,</span>
                  <span class='label'>freeze:</span> <span class='id identifier rubyid_freeze'>freeze</span><span class='comma'>,</span>
                  <span class='label'>strict_integer:</span> <span class='id identifier rubyid_strict_integer'>strict_integer</span><span class='comma'>,</span>
                  <span class='label'>parse_symbols:</span> <span class='id identifier rubyid_parse_symbols'>parse_symbols</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load_file-class_method">
  <h3 class='signature '>
    .<strong>load_file</strong>(filename, **kwargs)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Loads the document contained in <code>filename</code>.  Returns the yaml contained in <code>filename</code> as a Ruby object, or if the file is empty, it returns the specified <code>fallback</code> return value, which defaults to <code>nil</code>. See load for options.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L716-L720'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='716' data-end='720'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 716</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_load_file'>load_file</span> <span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_kwargs'>kwargs</span>
  <span class='const'>File</span>.<span class='id identifier rubyid_open'>open</span>(<span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r:bom|utf-8</span><span class='tstring_end'>&#39;</span></span>) { <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
    <span class='kw'>self</span>.<span class='id identifier rubyid_load'><a href="#load-class_method" title="Psych.load (method)">load</a></span> <span class='id identifier rubyid_f'>f</span><span class='comma'>,</span> <span class='label'>filename:</span> <span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_kwargs'>kwargs</span>
  }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load_stream-class_method">
  <h3 class='signature '>
    .<strong>load_stream</strong>(yaml, filename: nil, fallback: [], **kwargs)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Load multiple documents given in <code>yaml</code>.  Returns the parsed documents as a list.  If a block is given, each document will be converted to Ruby and passed to the block during parsing</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Psych</span>.<span class='id identifier rubyid_load_stream'>load_stream</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- foo\n...\n--- bar\n...</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; [&#39;foo&#39;, &#39;bar&#39;]
</span>
<span class='id identifier rubyid_list'>list</span> <span class='op'>=</span> []
<span class='const'>Psych</span>.<span class='id identifier rubyid_load_stream'>load_stream</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- foo\n...\n--- bar\n...</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_ruby'>ruby</span><span class='op'>|</span>
  <span class='id identifier rubyid_list'>list</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_ruby'>ruby</span>
<span class='kw'>end</span>
<span class='id identifier rubyid_list'>list</span> <span class='comment'># =&gt; [&#39;foo&#39;, &#39;bar&#39;]</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L644-L655'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='644' data-end='655'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 644</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_load_stream'>load_stream</span> <span class='id identifier rubyid_yaml'>yaml</span><span class='comma'>,</span> <span class='label'>filename:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>fallback:</span> []<span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_kwargs'>kwargs</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
             <span class='id identifier rubyid_parse_stream'><a href="#parse_stream-class_method" title="Psych.parse_stream (method)">parse_stream</a></span>(<span class='id identifier rubyid_yaml'>yaml</span><span class='comma'>,</span> <span class='label'>filename:</span> <span class='id identifier rubyid_filename'>filename</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_node'>node</span><span class='op'>|</span>
               <span class='kw'>yield</span> <span class='id identifier rubyid_node'>node</span>.<span class='id identifier rubyid_to_ruby'>to_ruby</span>(<span class='op'>**</span><span class='id identifier rubyid_kwargs'>kwargs</span>)
             <span class='kw'>end</span>
           <span class='kw'>else</span>
             <span class='id identifier rubyid_parse_stream'><a href="#parse_stream-class_method" title="Psych.parse_stream (method)">parse_stream</a></span>(<span class='id identifier rubyid_yaml'>yaml</span><span class='comma'>,</span> <span class='label'>filename:</span> <span class='id identifier rubyid_filename'>filename</span>).<span class='id identifier rubyid_children'>children</span>.<span class='id identifier rubyid_map'>map</span> { <span class='op'>|</span><span class='id identifier rubyid_node'>node</span><span class='op'>|</span> <span class='id identifier rubyid_node'>node</span>.<span class='id identifier rubyid_to_ruby'>to_ruby</span>(<span class='op'>**</span><span class='id identifier rubyid_kwargs'>kwargs</span>) }
           <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_fallback'>fallback</span> <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_is_a?'>is_a?</span>(<span class='const'>Array</span>) <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse-class_method">
  <h3 class='signature '>
    .<strong>parse</strong>(yaml, filename: nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Parse a YAML string in <code>yaml</code>.  Returns the <a href="Psych/Nodes/Document.html" title="Psych::Nodes::Document (class)"><code>::Psych::Nodes::Document</code></a>. <code>filename</code> is used in the exception message if a <a href="Psych/SyntaxError.html" title="Psych::SyntaxError (class)"><code>::Psych::SyntaxError</code></a> is raised.</p>

<p>Raises a <a href="Psych/SyntaxError.html" title="Psych::SyntaxError (class)"><code>::Psych::SyntaxError</code></a> when a YAML syntax error is detected.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Psych</span>.<span class='id identifier rubyid_parse'>parse</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>---\n - a\n - b</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; #&lt;Psych::Nodes::Document:0x00&gt;
</span>
<span class='kw'>begin</span>
  <span class='const'>Psych</span>.<span class='id identifier rubyid_parse'>parse</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- `</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>filename:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file.txt</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>rescue</span> <span class='const'>Psych</span><span class='op'>::</span><span class='const'><a href="Psych/SyntaxError.html" title="Psych::SyntaxError (class)">SyntaxError</a></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ex'>ex</span>
  <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_file'>file</span>    <span class='comment'># =&gt; &#39;file.txt&#39;
</span>  <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_message'>message</span> <span class='comment'># =&gt; &quot;(file.txt): found character that cannot start any token&quot;
</span><span class='kw'>end</span></code></pre>

<p>See <a href="Psych/Nodes.html" title="Psych::Nodes (module)"><code>::Psych::Nodes</code></a> for more information about YAML AST.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L400-L406'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='400' data-end='406'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 400</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_parse'>parse</span> <span class='id identifier rubyid_yaml'>yaml</span><span class='comma'>,</span> <span class='label'>filename:</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_parse_stream'><a href="#parse_stream-class_method" title="Psych.parse_stream (method)">parse_stream</a></span>(<span class='id identifier rubyid_yaml'>yaml</span><span class='comma'>,</span> <span class='label'>filename:</span> <span class='id identifier rubyid_filename'>filename</span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_node'>node</span><span class='op'>|</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_node'>node</span>
  <span class='kw'>end</span>

  <span class='kw'>false</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_file-class_method">
  <h3 class='signature '>
    .<strong>parse_file</strong>(filename, fallback: false)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Parse a file at <code>filename</code>. Returns the <a href="Psych/Nodes/Document.html" title="Psych::Nodes::Document (class)"><code>::Psych::Nodes::Document</code></a>.</p>

<p>Raises a <a href="Psych/SyntaxError.html" title="Psych::SyntaxError (class)"><code>::Psych::SyntaxError</code></a> when a YAML syntax error is detected.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L412-L417'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='412' data-end='417'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 412</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_parse_file'>parse_file</span> <span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='label'>fallback:</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'>File</span>.<span class='id identifier rubyid_open'>open</span> <span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r:bom|utf-8</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
    <span class='id identifier rubyid_parse'><a href="#parse-class_method" title="Psych.parse (method)">parse</a></span> <span class='id identifier rubyid_f'>f</span><span class='comma'>,</span> <span class='label'>filename:</span> <span class='id identifier rubyid_filename'>filename</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>||</span> <span class='id identifier rubyid_fallback'>fallback</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parse_stream-class_method">
  <h3 class='signature '>
    .<strong>parse_stream</strong>(yaml, filename: nil, &amp;block)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Parse a YAML string in <code>yaml</code>.  Returns the <a href="Psych/Nodes/Stream.html" title="Psych::Nodes::Stream (class)"><code>::Psych::Nodes::Stream</code></a>. This method can handle multiple YAML documents contained in <code>yaml</code>. <code>filename</code> is used in the exception message if a <a href="Psych/SyntaxError.html" title="Psych::SyntaxError (class)"><code>::Psych::SyntaxError</code></a> is raised.</p>

<p>If a block is given, a <a href="Psych/Nodes/Document.html" title="Psych::Nodes::Document (class)"><code>::Psych::Nodes::Document</code></a> node will be yielded to the block as its being parsed.</p>

<p>Raises a <a href="Psych/SyntaxError.html" title="Psych::SyntaxError (class)"><code>::Psych::SyntaxError</code></a> when a YAML syntax error is detected.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Psych</span>.<span class='id identifier rubyid_parse_stream'>parse_stream</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>---\n - a\n - b</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; #&lt;Psych::Nodes::Stream:0x00&gt;
</span>
<span class='const'>Psych</span>.<span class='id identifier rubyid_parse_stream'>parse_stream</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- a\n--- b</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_node'>node</span><span class='op'>|</span>
  <span class='id identifier rubyid_node'>node</span> <span class='comment'># =&gt; #&lt;Psych::Nodes::Document:0x00&gt;
</span><span class='kw'>end</span>

<span class='kw'>begin</span>
  <span class='const'>Psych</span>.<span class='id identifier rubyid_parse_stream'>parse_stream</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- `</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>filename:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file.txt</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>rescue</span> <span class='const'>Psych</span><span class='op'>::</span><span class='const'><a href="Psych/SyntaxError.html" title="Psych::SyntaxError (class)">SyntaxError</a></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ex'>ex</span>
  <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_file'>file</span>    <span class='comment'># =&gt; &#39;file.txt&#39;
</span>  <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_message'>message</span> <span class='comment'># =&gt; &quot;(file.txt): found character that cannot start any token&quot;
</span><span class='kw'>end</span></code></pre>

<p>Raises a TypeError when NilClass is passed.</p>

<p>See <a href="Psych/Nodes.html" title="Psych::Nodes (module)"><code>::Psych::Nodes</code></a> for more information about YAML AST.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L454-L463'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='454' data-end='463'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 454</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_parse_stream'>parse_stream</span> <span class='id identifier rubyid_yaml'>yaml</span><span class='comma'>,</span> <span class='label'>filename:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_parser'><a href="#parser-class_method" title="Psych.parser (method)">parser</a></span> <span class='op'>=</span> <span class='const'>Psych</span><span class='op'>::</span><span class='const'><a href="Psych/Parser.html" title="Psych::Parser (class)">Parser</a></span>.<span class='id identifier rubyid_new'><a href="Psych/Parser.html#new-class_method" title="Psych::Parser.new (method)">new</a></span>(<span class='const'><a href="Psych/Handlers.html" title="Psych::Handlers (module)">Handlers</a></span><span class='op'>::</span><span class='const'><a href="Psych/Handlers/DocumentStream.html" title="Psych::Handlers::DocumentStream (class)">DocumentStream</a></span>.<span class='id identifier rubyid_new'><a href="Psych/Handlers/DocumentStream.html#new-class_method" title="Psych::Handlers::DocumentStream.new (method)">new</a></span>(<span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>))
    <span class='id identifier rubyid_parser'><a href="#parser-class_method" title="Psych.parser (method)">parser</a></span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="Psych.parse (method)">parse</a></span> <span class='id identifier rubyid_yaml'>yaml</span><span class='comma'>,</span> <span class='id identifier rubyid_filename'>filename</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_parser'><a href="#parser-class_method" title="Psych.parser (method)">parser</a></span> <span class='op'>=</span> <span class='kw'>self</span>.<span class='id identifier rubyid_parser'><a href="#parser-class_method" title="Psych.parser (method)">parser</a></span>
    <span class='id identifier rubyid_parser'><a href="#parser-class_method" title="Psych.parser (method)">parser</a></span>.<span class='id identifier rubyid_parse'><a href="#parse-class_method" title="Psych.parse (method)">parse</a></span> <span class='id identifier rubyid_yaml'>yaml</span><span class='comma'>,</span> <span class='id identifier rubyid_filename'>filename</span>
    <span class='id identifier rubyid_parser'><a href="#parser-class_method" title="Psych.parser (method)">parser</a></span>.<span class='id identifier rubyid_handler'>handler</span>.<span class='id identifier rubyid_root'><a href="top-level-namespace.html" title="Top Level Namespace (root)">root</a></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="parser-class_method">
  <h3 class='signature '>
    .<strong>parser</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a default parser</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L421-L423'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='421' data-end='423'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 421</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_parser'>parser</span>
  <span class='const'>Psych</span><span class='op'>::</span><span class='const'><a href="Psych/Parser.html" title="Psych::Parser (class)">Parser</a></span>.<span class='id identifier rubyid_new'><a href="Psych/Parser.html#new-class_method" title="Psych::Parser.new (method)">new</a></span>(<span class='const'><a href="Psych/TreeBuilder.html" title="Psych::TreeBuilder (class)">TreeBuilder</a></span>.<span class='id identifier rubyid_new'><a href="Psych/TreeBuilder.html#new-class_method" title="Psych::TreeBuilder.new (method)">new</a></span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="remove_type-class_method">
  <h3 class='signature nodoc'>
    .<strong>remove_type</strong>(type_tag)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L735-L737'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='735' data-end='737'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 735</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_remove_type'>remove_type</span> <span class='id identifier rubyid_type_tag'>type_tag</span>
  <span class='id identifier rubyid_domain_types'><a href="#domain_types-class_method" title="Psych.domain_types (method)">domain_types</a></span>.<span class='id identifier rubyid_delete'>delete</span> <span class='id identifier rubyid_type_tag'>type_tag</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="safe_dump-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>safe_dump</strong>(o)  &#x21d2; <code>string</code> <code>of</code> <code>yaml</code> </span>
      <span class='overload'>.<strong>safe_dump</strong>(o, options)  &#x21d2; <code>string</code> <code>of</code> <code>yaml</code> </span>
      <span class='overload'>.<strong>safe_dump</strong>(o, io)  &#x21d2; <code>io</code> <code>object</code> <code>passed</code> <code>in</code> </span>
      <span class='overload'>.<strong>safe_dump</strong>(o, io, options)  &#x21d2; <code>io</code> <code>object</code> <code>passed</code> <code>in</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Safely dump Ruby object <code>o</code> to a YAML string. Optional <code>options</code> may be passed in to control the output format.  If an IO object is passed in, the YAML will be dumped to that IO object. By default, only the following classes are allowed to be serialized:</p>
<ul><li>
<p>TrueClass</p>
</li><li>
<p>FalseClass</p>
</li><li>
<p>NilClass</p>
</li><li>
<p>Integer</p>
</li><li>
<p>Float</p>
</li><li>
<p>String</p>
</li><li>
<p>Array</p>
</li><li>
<p>Hash</p>
</li></ul>

<p>Arbitrary classes can be allowed by adding those classes to the <code>permitted_classes</code> keyword argument.  They are additive.  For example, to allow Date serialization:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Psych</span>.<span class='id identifier rubyid_safe_dump'>safe_dump</span>(<span class='id identifier rubyid_yaml'>yaml</span><span class='comma'>,</span> <span class='label'>permitted_classes:</span> [<span class='const'>Date</span>])</code></pre>

<p>Now the Date class can be dumped in addition to the classes listed above.</p>

<p>A <a href="Psych/DisallowedClass.html" title="Psych::DisallowedClass (class)"><code>::Psych::DisallowedClass</code></a> exception will be raised if the object contains a class that isnt in the <code>permitted_classes</code> list.</p>

<p>Currently supported options are:</p>
<dl class="rdoc-list label-list"><dt><code>:indentation</code></dt>
<dd>
<p>Number of space characters used to indent. Acceptable value should be in <code>0..9</code> range, otherwise option is ignored.</p>

<p>Default: <code>2</code>.</p>
</dd><dt><code>:line_width</code></dt>
<dd>
<p>Max character to wrap line at. For unlimited line width use <code>-1</code>.</p>

<p>Default: <code>0</code> (meaning wrap at 81).</p>
</dd><dt><code>:canonical</code></dt>
<dd>
<p>Write canonical YAML form (very verbose, yet strictly formal).</p>

<p>Default: <code>false</code>.</p>
</dd><dt><code>:header</code></dt>
<dd>
<p>Write <code>%YAML [version]</code> at the beginning of document.</p>

<p>Default: <code>false</code>.</p>
</dd><dt><code>:stringify_names</code></dt>
<dd>
<p>Dump symbol keys in Hash objects as string.</p>

<p>Default: <code>false</code>.</p>
</dd></dl>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Dump an array, get back a YAML string
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_safe_dump'>safe_dump</span>([<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span>])  <span class='comment'># =&gt; &quot;---\n- a\n- b\n&quot;
</span>
<span class='comment'># Dump an array to an IO object
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_safe_dump'>safe_dump</span>([<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span>]<span class='comma'>,</span> <span class='const'>StringIO</span>.<span class='id identifier rubyid_new'>new</span>)  <span class='comment'># =&gt; #&lt;StringIO:0x000001009d0890&gt;
</span>
<span class='comment'># Dump an array with indentation set
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_safe_dump'>safe_dump</span>([<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span>]]<span class='comma'>,</span> <span class='label'>indentation:</span> <span class='int'>3</span>) <span class='comment'># =&gt; &quot;---\n- a\n-  - b\n&quot;
</span>
<span class='comment'># Dump an array to an IO with indentation set
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_safe_dump'>safe_dump</span>([<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> [<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span>]]<span class='comma'>,</span> <span class='const'>StringIO</span>.<span class='id identifier rubyid_new'>new</span><span class='comma'>,</span> <span class='label'>indentation:</span> <span class='int'>3</span>)

<span class='comment'># Dump hash with symbol keys as string
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_dump'><a href="#dump-class_method" title="Psych.dump (method)">dump</a></span>({<span class='label'>a:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>b</span><span class='tstring_end'>&quot;</span></span>}<span class='comma'>,</span> <span class='label'>stringify_names:</span> <span class='kw'>true</span>) <span class='comment'># =&gt; &quot;---\na: b\n&quot;</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L596-L605'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='596' data-end='605'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 596</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_safe_dump'>safe_dump</span> <span class='id identifier rubyid_o'>o</span><span class='comma'>,</span> <span class='id identifier rubyid_io'>io</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> {}
  <span class='kw'>if</span> <span class='const'>Hash</span> <span class='op'>===</span> <span class='id identifier rubyid_io'>io</span>
    <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_io'>io</span>
    <span class='id identifier rubyid_io'>io</span>      <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_visitor'>visitor</span> <span class='op'>=</span> <span class='const'>Psych</span><span class='op'>::</span><span class='const'><a href="Psych/Visitors.html" title="Psych::Visitors (module)">Visitors</a></span><span class='op'>::</span><span class='const'><a href="Psych/Visitors/RestrictedYAMLTree.html" title="Psych::Visitors::RestrictedYAMLTree (class)">RestrictedYAMLTree</a></span>.<span class='id identifier rubyid_create'><a href="Psych/Visitors/YAMLTree.html#create-class_method" title="Psych::Visitors::YAMLTree.create (method)">create</a></span> <span class='id identifier rubyid_options'>options</span>
  <span class='id identifier rubyid_visitor'>visitor</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_o'>o</span>
  <span class='id identifier rubyid_visitor'>visitor</span>.<span class='id identifier rubyid_tree'>tree</span>.<span class='id identifier rubyid_yaml'>yaml</span> <span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="safe_load-class_method">
  <h3 class='signature '>
    .<strong>safe_load</strong>(yaml, permitted_classes: [], permitted_symbols: [], aliases: false, filename: nil, fallback: nil, symbolize_names: false, freeze: false, strict_integer: false, parse_symbols: true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Safely load the yaml string in <code>yaml</code>.  By default, only the following classes are allowed to be deserialized:</p>
<ul><li>
<p>TrueClass</p>
</li><li>
<p>FalseClass</p>
</li><li>
<p>NilClass</p>
</li><li>
<p>Integer</p>
</li><li>
<p>Float</p>
</li><li>
<p>String</p>
</li><li>
<p>Array</p>
</li><li>
<p>Hash</p>
</li></ul>

<p>Recursive data structures are not allowed by default.  Arbitrary classes can be allowed by adding those classes to the <code>permitted_classes</code> keyword argument.  They are additive.  For example, to allow Date deserialization:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Psych</span>.<span class='id identifier rubyid_safe_load'>safe_load</span>(<span class='id identifier rubyid_yaml'>yaml</span><span class='comma'>,</span> <span class='label'>permitted_classes:</span> [<span class='const'>Date</span>])</code></pre>

<p>Now the Date class can be loaded in addition to the classes listed above.</p>

<p>Aliases can be explicitly allowed by changing the <code>aliases</code> keyword argument. For example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> []
<span class='id identifier rubyid_x'>x</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_x'>x</span>
<span class='id identifier rubyid_yaml'>yaml</span> <span class='op'>=</span> <span class='const'>Psych</span>.<span class='id identifier rubyid_dump'><a href="#dump-class_method" title="Psych.dump (method)">dump</a></span> <span class='id identifier rubyid_x'>x</span>
<span class='const'>Psych</span>.<span class='id identifier rubyid_safe_load'>safe_load</span> <span class='id identifier rubyid_yaml'>yaml</span>               <span class='comment'># =&gt; raises an exception
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_safe_load'>safe_load</span> <span class='id identifier rubyid_yaml'>yaml</span><span class='comma'>,</span> <span class='label'>aliases:</span> <span class='kw'>true</span> <span class='comment'># =&gt; loads the aliases</span></code></pre>

<p>A <a href="Psych/DisallowedClass.html" title="Psych::DisallowedClass (class)"><code>::Psych::DisallowedClass</code></a> exception will be raised if the yaml contains a class that isnt in the <code>permitted_classes</code> list.</p>

<p>A <a href="Psych/AliasesNotEnabled.html" title="Psych::AliasesNotEnabled (class)"><code>::Psych::AliasesNotEnabled</code></a> exception will be raised if the yaml contains aliases but the <code>aliases</code> keyword argument is set to false.</p>

<p><code>filename</code> will be used in the exception message if any exception is raised while parsing.</p>

<p>When the optional <code>symbolize_names</code> keyword argument is set to a true value, returns symbols for keys in Hash objects (default: strings).</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Psych</span>.<span class='id identifier rubyid_safe_load'>safe_load</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>---\n foo: bar</span><span class='tstring_end'>&quot;</span></span>)                         <span class='comment'># =&gt; {&quot;foo&quot;=&gt;&quot;bar&quot;}
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_safe_load'>safe_load</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>---\n foo: bar</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>symbolize_names:</span> <span class='kw'>true</span>)  <span class='comment'># =&gt; {:foo=&gt;&quot;bar&quot;}</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L323-L337'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='323' data-end='337'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 323</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_safe_load'>safe_load</span> <span class='id identifier rubyid_yaml'>yaml</span><span class='comma'>,</span> <span class='label'>permitted_classes:</span> []<span class='comma'>,</span> <span class='label'>permitted_symbols:</span> []<span class='comma'>,</span> <span class='label'>aliases:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>filename:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>fallback:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>symbolize_names:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>freeze:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>strict_integer:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>parse_symbols:</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_parse'><a href="#parse-class_method" title="Psych.parse (method)">parse</a></span>(<span class='id identifier rubyid_yaml'>yaml</span><span class='comma'>,</span> <span class='label'>filename:</span> <span class='id identifier rubyid_filename'>filename</span>)
  <span class='kw'>return</span> <span class='id identifier rubyid_fallback'>fallback</span> <span class='kw'>unless</span> <span class='id identifier rubyid_result'>result</span>

  <span class='id identifier rubyid_class_loader'>class_loader</span> <span class='op'>=</span> <span class='const'><a href="Psych/ClassLoader.html" title="Psych::ClassLoader (class)">ClassLoader</a></span><span class='op'>::</span><span class='const'><a href="Psych/ClassLoader/Restricted.html" title="Psych::ClassLoader::Restricted (class)">Restricted</a></span>.<span class='id identifier rubyid_new'><a href="Psych/ClassLoader/Restricted.html#new-class_method" title="Psych::ClassLoader::Restricted.new (method)">new</a></span>(<span class='id identifier rubyid_permitted_classes'>permitted_classes</span>.<span class='id identifier rubyid_map'>map</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_to_s'>to_s</span>)<span class='comma'>,</span>
                                             <span class='id identifier rubyid_permitted_symbols'>permitted_symbols</span>.<span class='id identifier rubyid_map'>map</span>(<span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_to_s'>to_s</span>))
  <span class='id identifier rubyid_scanner'>scanner</span>      <span class='op'>=</span> <span class='const'><a href="Psych/ScalarScanner.html" title="Psych::ScalarScanner (class)">ScalarScanner</a></span>.<span class='id identifier rubyid_new'><a href="Psych/ScalarScanner.html#new-class_method" title="Psych::ScalarScanner.new (method)">new</a></span> <span class='id identifier rubyid_class_loader'>class_loader</span><span class='comma'>,</span> <span class='label'>strict_integer:</span> <span class='id identifier rubyid_strict_integer'>strict_integer</span><span class='comma'>,</span> <span class='label'>parse_symbols:</span> <span class='id identifier rubyid_parse_symbols'>parse_symbols</span>
  <span class='id identifier rubyid_visitor'>visitor</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_aliases'>aliases</span>
              <span class='const'><a href="Psych/Visitors.html" title="Psych::Visitors (module)">Visitors</a></span><span class='op'>::</span><span class='const'><a href="Psych/Visitors/ToRuby.html" title="Psych::Visitors::ToRuby (class)">ToRuby</a></span>.<span class='id identifier rubyid_new'><a href="Psych/Visitors/ToRuby.html#new-class_method" title="Psych::Visitors::ToRuby.new (method)">new</a></span> <span class='id identifier rubyid_scanner'>scanner</span><span class='comma'>,</span> <span class='id identifier rubyid_class_loader'>class_loader</span><span class='comma'>,</span> <span class='label'>symbolize_names:</span> <span class='id identifier rubyid_symbolize_names'>symbolize_names</span><span class='comma'>,</span> <span class='label'>freeze:</span> <span class='id identifier rubyid_freeze'>freeze</span>
            <span class='kw'>else</span>
              <span class='const'><a href="Psych/Visitors.html" title="Psych::Visitors (module)">Visitors</a></span><span class='op'>::</span><span class='const'><a href="Psych/Visitors/NoAliasRuby.html" title="Psych::Visitors::NoAliasRuby (class)">NoAliasRuby</a></span>.<span class='id identifier rubyid_new'><a href="Psych/Visitors/ToRuby.html#new-class_method" title="Psych::Visitors::ToRuby.new (method)">new</a></span> <span class='id identifier rubyid_scanner'>scanner</span><span class='comma'>,</span> <span class='id identifier rubyid_class_loader'>class_loader</span><span class='comma'>,</span> <span class='label'>symbolize_names:</span> <span class='id identifier rubyid_symbolize_names'>symbolize_names</span><span class='comma'>,</span> <span class='label'>freeze:</span> <span class='id identifier rubyid_freeze'>freeze</span>
            <span class='kw'>end</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_visitor'>visitor</span>.<span class='id identifier rubyid_accept'>accept</span> <span class='id identifier rubyid_result'>result</span>
  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="safe_load_file-class_method">
  <h3 class='signature '>
    .<strong>safe_load_file</strong>(filename, **kwargs)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Safely loads the document contained in <code>filename</code>.  Returns the yaml contained in <code>filename</code> as a Ruby object, or if the file is empty, it returns the specified <code>fallback</code> return value, which defaults to <code>nil</code>. See safe_load for options.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L705-L709'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='705' data-end='709'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 705</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_safe_load_file'>safe_load_file</span> <span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_kwargs'>kwargs</span>
  <span class='const'>File</span>.<span class='id identifier rubyid_open'>open</span>(<span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r:bom|utf-8</span><span class='tstring_end'>&#39;</span></span>) { <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
    <span class='kw'>self</span>.<span class='id identifier rubyid_safe_load'><a href="#safe_load-class_method" title="Psych.safe_load (method)">safe_load</a></span> <span class='id identifier rubyid_f'>f</span><span class='comma'>,</span> <span class='label'>filename:</span> <span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_kwargs'>kwargs</span>
  }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="safe_load_stream-class_method">
  <h3 class='signature '>
    .<strong>safe_load_stream</strong>(yaml, filename: nil, permitted_classes: [], aliases: false)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Load multiple documents given in <code>yaml</code>. Returns the parsed documents as a list.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Psych</span>.<span class='id identifier rubyid_safe_load_stream'>safe_load_stream</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- foo\n...\n--- bar\n...</span><span class='tstring_end'>&quot;</span></span>) <span class='comment'># =&gt; [&#39;foo&#39;, &#39;bar&#39;]
</span>
<span class='id identifier rubyid_list'>list</span> <span class='op'>=</span> []
<span class='const'>Psych</span>.<span class='id identifier rubyid_safe_load_stream'>safe_load_stream</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- foo\n...\n--- bar\n...</span><span class='tstring_end'>&quot;</span></span>) <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_ruby'>ruby</span><span class='op'>|</span>
  <span class='id identifier rubyid_list'>list</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_ruby'>ruby</span>
<span class='kw'>end</span>
<span class='id identifier rubyid_list'>list</span> <span class='comment'># =&gt; [&#39;foo&#39;, &#39;bar&#39;]</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L671-L684'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='671' data-end='684'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 671</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_safe_load_stream'>safe_load_stream</span> <span class='id identifier rubyid_yaml'>yaml</span><span class='comma'>,</span> <span class='label'>filename:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>permitted_classes:</span> []<span class='comma'>,</span> <span class='label'>aliases:</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_documents'>documents</span> <span class='op'>=</span> <span class='id identifier rubyid_parse_stream'><a href="#parse_stream-class_method" title="Psych.parse_stream (method)">parse_stream</a></span>(<span class='id identifier rubyid_yaml'>yaml</span><span class='comma'>,</span> <span class='label'>filename:</span> <span class='id identifier rubyid_filename'>filename</span>).<span class='id identifier rubyid_children'>children</span>.<span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_child'>child</span><span class='op'>|</span>
    <span class='id identifier rubyid_stream'>stream</span> <span class='op'>=</span> <span class='const'>Psych</span><span class='op'>::</span><span class='const'><a href="Psych/Nodes.html" title="Psych::Nodes (module)">Nodes</a></span><span class='op'>::</span><span class='const'><a href="Psych/Nodes/Stream.html" title="Psych::Nodes::Stream (class)">Stream</a></span>.<span class='id identifier rubyid_new'><a href="Psych/Nodes/Stream.html#new-class_method" title="Psych::Nodes::Stream.new (method)">new</a></span>
    <span class='id identifier rubyid_stream'>stream</span>.<span class='id identifier rubyid_children'>children</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_child'>child</span>
    <span class='id identifier rubyid_safe_load'><a href="#safe_load-class_method" title="Psych.safe_load (method)">safe_load</a></span>(<span class='id identifier rubyid_stream'>stream</span>.<span class='id identifier rubyid_to_yaml'>to_yaml</span><span class='comma'>,</span> <span class='label'>permitted_classes:</span> <span class='id identifier rubyid_permitted_classes'>permitted_classes</span><span class='comma'>,</span> <span class='label'>aliases:</span> <span class='id identifier rubyid_aliases'>aliases</span>)
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_documents'>documents</span>.<span class='id identifier rubyid_each'>each</span> { <span class='op'>|</span><span class='id identifier rubyid_doc'>doc</span><span class='op'>|</span> <span class='kw'>yield</span> <span class='id identifier rubyid_doc'>doc</span> }
    <span class='kw'>nil</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_documents'>documents</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_json-class_method">
  <h3 class='signature '>
    .<strong>to_json</strong>(object)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Dump Ruby <code>object</code> to a <a href="Psych/JSON.html" title="Psych::JSON (module)"><code>::Psych::JSON</code></a> string.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L623-L627'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='623' data-end='627'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 623</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_to_json'>to_json</span> <span class='id identifier rubyid_object'>object</span>
  <span class='id identifier rubyid_visitor'>visitor</span> <span class='op'>=</span> <span class='const'>Psych</span><span class='op'>::</span><span class='const'><a href="Psych/Visitors.html" title="Psych::Visitors (module)">Visitors</a></span><span class='op'>::</span><span class='const'><a href="Psych/Visitors/JSONTree.html" title="Psych::Visitors::JSONTree (class)">JSONTree</a></span>.<span class='id identifier rubyid_create'><a href="Psych/Visitors/JSONTree.html#create-class_method" title="Psych::Visitors::JSONTree.create (method)">create</a></span>
  <span class='id identifier rubyid_visitor'>visitor</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_object'>object</span>
  <span class='id identifier rubyid_visitor'>visitor</span>.<span class='id identifier rubyid_tree'>tree</span>.<span class='id identifier rubyid_yaml'>yaml</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="unsafe_load-class_method">
  <h3 class='signature '>
    .<strong>unsafe_load</strong>(yaml, filename: nil, fallback: false, symbolize_names: false, freeze: false, strict_integer: false, parse_symbols: true)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Load <code>yaml</code> in to a Ruby data structure.  If multiple documents are provided, the object contained in the first document will be returned. <code>filename</code> will be used in the exception message if any exception is raised while parsing.  If <code>yaml</code> is empty, it returns the specified <code>fallback</code> return value, which defaults to <code>false</code>.</p>

<p>Raises a <a href="Psych/SyntaxError.html" title="Psych::SyntaxError (class)"><code>::Psych::SyntaxError</code></a> when a YAML syntax error is detected.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Psych</span>.<span class='id identifier rubyid_unsafe_load'>unsafe_load</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- a</span><span class='tstring_end'>&quot;</span></span>)             <span class='comment'># =&gt; &#39;a&#39;
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_unsafe_load'>unsafe_load</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>---\n - a\n - b</span><span class='tstring_end'>&quot;</span></span>)   <span class='comment'># =&gt; [&#39;a&#39;, &#39;b&#39;]
</span>
<span class='kw'>begin</span>
  <span class='const'>Psych</span>.<span class='id identifier rubyid_unsafe_load'>unsafe_load</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- `</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>filename:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file.txt</span><span class='tstring_end'>&quot;</span></span>)
<span class='kw'>rescue</span> <span class='const'>Psych</span><span class='op'>::</span><span class='const'><a href="Psych/SyntaxError.html" title="Psych::SyntaxError (class)">SyntaxError</a></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ex'>ex</span>
  <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_file'>file</span>    <span class='comment'># =&gt; &#39;file.txt&#39;
</span>  <span class='id identifier rubyid_ex'>ex</span>.<span class='id identifier rubyid_message'>message</span> <span class='comment'># =&gt; &quot;(file.txt): found character that cannot start any token&quot;
</span><span class='kw'>end</span></code></pre>

<p>When the optional <code>symbolize_names</code> keyword argument is set to a true value, returns symbols for keys in Hash objects (default: strings).</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Psych</span>.<span class='id identifier rubyid_unsafe_load'>unsafe_load</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>---\n foo: bar</span><span class='tstring_end'>&quot;</span></span>)                         <span class='comment'># =&gt; {&quot;foo&quot;=&gt;&quot;bar&quot;}
</span><span class='const'>Psych</span>.<span class='id identifier rubyid_unsafe_load'>unsafe_load</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>---\n foo: bar</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>symbolize_names:</span> <span class='kw'>true</span>)  <span class='comment'># =&gt; {:foo=&gt;&quot;bar&quot;}</span></code></pre>

<p>Raises a TypeError when <code>yaml</code> parameter is NilClass</p>

<p>NOTE: This method *should not* be used to parse untrusted documents, such as YAML documents that are supplied via user input.  Instead, please use the load method or the safe_load method.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L272-L276'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='272' data-end='276'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 272</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_unsafe_load'>unsafe_load</span> <span class='id identifier rubyid_yaml'>yaml</span><span class='comma'>,</span> <span class='label'>filename:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>fallback:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>symbolize_names:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>freeze:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>strict_integer:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>parse_symbols:</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_parse'><a href="#parse-class_method" title="Psych.parse (method)">parse</a></span>(<span class='id identifier rubyid_yaml'>yaml</span><span class='comma'>,</span> <span class='label'>filename:</span> <span class='id identifier rubyid_filename'>filename</span>)
  <span class='kw'>return</span> <span class='id identifier rubyid_fallback'>fallback</span> <span class='kw'>unless</span> <span class='id identifier rubyid_result'>result</span>
  <span class='id identifier rubyid_result'>result</span>.<span class='id identifier rubyid_to_ruby'>to_ruby</span>(<span class='label'>symbolize_names:</span> <span class='id identifier rubyid_symbolize_names'>symbolize_names</span><span class='comma'>,</span> <span class='label'>freeze:</span> <span class='id identifier rubyid_freeze'>freeze</span><span class='comma'>,</span> <span class='label'>strict_integer:</span> <span class='id identifier rubyid_strict_integer'>strict_integer</span><span class='comma'>,</span> <span class='label'>parse_symbols:</span> <span class='id identifier rubyid_parse_symbols'>parse_symbols</span>)
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="unsafe_load_file-class_method">
  <h3 class='signature '>
    .<strong>unsafe_load_file</strong>(filename, **kwargs)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Load the document contained in <code>filename</code>.  Returns the yaml contained in <code>filename</code> as a Ruby object, or if the file is empty, it returns the specified <code>fallback</code> return value, which defaults to <code>false</code>.</p>

<p>NOTE: This method *should not* be used to parse untrusted documents, such as YAML documents that are supplied via user input.  Instead, please use the safe_load_file method.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/v4.0.1/ext/psych/lib/psych.rb#L694-L698'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='694' data-end='698'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/psych/lib/psych.rb', line 694</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span>.<span class='id identifier rubyid_unsafe_load_file'>unsafe_load_file</span> <span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_kwargs'>kwargs</span>
  <span class='const'>File</span>.<span class='id identifier rubyid_open'>open</span>(<span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r:bom|utf-8</span><span class='tstring_end'>&#39;</span></span>) { <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
    <span class='kw'>self</span>.<span class='id identifier rubyid_unsafe_load'><a href="#unsafe_load-class_method" title="Psych.unsafe_load (method)">unsafe_load</a></span> <span class='id identifier rubyid_f'>f</span><span class='comma'>,</span> <span class='label'>filename:</span> <span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_kwargs'>kwargs</span>
  }
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>