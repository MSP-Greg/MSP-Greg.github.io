<!DOCTYPE html>
<html>
<head>

<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>File: Layout &mdash; Ruby-4.0.0</title>

<link rel='stylesheet'  type='text/css' href='../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "layout",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='.'>Ruby-4.0.0</a> &raquo; 
      <a href='_index.html'>Index</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>File: Layout&nbsp;&#x25B2;</a></span>
          </div>

    <a id='list_href' href="file_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='file'>

<h1 id="label-Code+Layout">Code Layout</h1>

<p>Expressions in Ruby are separated by line breaks:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> <span class='int'>1</span>
<span class='id identifier rubyid_y'>y</span> <span class='op'>=</span> <span class='int'>2</span>
<span class='id identifier rubyid_z'>z</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>+</span> <span class='id identifier rubyid_y'>y</span></code></pre>

<p>Line breaks also used as logical separators of the headers of some of control structures from their bodies:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>if</span> <span class='id identifier rubyid_z'>z</span> <span class='op'>&gt;</span> <span class='int'>3</span>       <span class='comment'># line break ends the condition and starts the body
</span>  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>more</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>

<span class='kw'>while</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>&lt;</span> <span class='int'>3</span>    <span class='comment'># line break ends the condition and starts the body
</span>  <span class='id identifier rubyid_x'>x</span> <span class='op'>+=</span> <span class='int'>1</span>
<span class='kw'>end</span></code></pre>

<p><code>;</code> can be used as an expressions separator instead of a line break:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> <span class='int'>1</span><span class='semicolon'>;</span> <span class='id identifier rubyid_y'>y</span> <span class='op'>=</span> <span class='int'>2</span><span class='semicolon'>;</span> <span class='id identifier rubyid_z'>z</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>+</span> <span class='id identifier rubyid_y'>y</span>
<span class='kw'>if</span> <span class='id identifier rubyid_z'>z</span> <span class='op'>&gt;</span> <span class='int'>3</span><span class='semicolon'>;</span> <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>more</span><span class='tstring_end'>&quot;</span></span><span class='semicolon'>;</span> <span class='kw'>end</span></code></pre>

<p>Traditionally, expressions separated by <code>;</code> is used only in short scripts and experiments.</p>

<p>In some control structures, there is an optional keyword that can be used instead of a line break to separate their elements:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># if, elsif, until and case ... when: &#39;then&#39; is an optional separator:
</span>
<span class='kw'>if</span> <span class='id identifier rubyid_z'>z</span> <span class='op'>&gt;</span> <span class='int'>3</span> <span class='kw'>then</span> <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>more</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>end</span>

<span class='kw'>case</span> <span class='id identifier rubyid_x'>x</span>
<span class='kw'>when</span> <span class='const'>Numeric</span> <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>number</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>when</span> <span class='const'>String</span> <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>string</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>else</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>object</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>

<span class='comment'># while and until: &#39;do&#39; is an optional separator
</span><span class='kw'>while</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>&lt;</span> <span class='int'>3</span> <span class='kw'>do</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>+=</span><span class='int'>1</span> <span class='kw'>end</span></code></pre>

<p>Also, line breaks can be skipped in some places where it doesn’t create any ambiguity. Note in the example above: no line break needed before <code>end</code>, just as no line break needed after <code>else</code>.</p>

<h2 id="label-Breaking+expressions+in+lines">Breaking expressions in lines</h2>

<p>One expression might be split into several lines when each line can be unambiguously identified as “incomplete” without the next one.</p>

<p>These works:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_x'>x</span> <span class='op'>=</span>         <span class='comment'># incomplete without something after =
</span>    <span class='int'>1</span> <span class='op'>+</span>     <span class='comment'># incomplete without something after +
</span>    <span class='int'>2</span>

<span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test.txt</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>         <span class='comment'># incomplete without something after ,
</span>          <span class='label'>enconding:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>utf-8</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>These would not:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># unintended interpretation:
</span><span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> <span class='int'>1</span>     <span class='comment'># already complete expression
</span>    <span class='op'>+</span> <span class='int'>2</span>   <span class='comment'># interpreted as a separate +2
</span>
<span class='comment'># syntax error:
</span><span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test.txt</span><span class='tstring_end'>&quot;</span></span>           <span class='comment'># already complete expression
</span>          <span class='comma'>,</span> <span class='id identifier rubyid_encoding'>encoding</span><span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>utf-8</span><span class='tstring_end'>&quot;</span></span>  <span class='comment'># attempt to parse as a new expression, SyntaxError</span></code></pre>

<p>The exceptions to the rule are lines starting with <code>.</code> (“leading dot” style of method calls) or logical operators <code>&amp;&amp;</code>/<code>||</code> and <code>and</code>/<code>or</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># OK, interpreted as a chain of calls
</span><span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>test.txt</span><span class='tstring_end'>&#39;</span></span>)
    .<span class='id identifier rubyid_strip'>strip</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>)
    .<span class='id identifier rubyid_split'>split</span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\t</span><span class='tstring_end'>&quot;</span></span>)
    .<span class='id identifier rubyid_sort'>sort</span>

<span class='comment'># OK, interpreted as a chain of logical operators:
</span><span class='const'>File</span>.<span class='id identifier rubyid_empty?'>empty?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>test.txt</span><span class='tstring_end'>&#39;</span></span>)
  <span class='op'>|</span><span class='op'>|</span> <span class='const'>File</span>.<span class='id identifier rubyid_size'>size</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>test.txt</span><span class='tstring_end'>&#39;</span></span>) <span class='op'>&lt;</span> <span class='int'>10</span>
  <span class='op'>|</span><span class='op'>|</span> <span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>test.txt</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_strip'>strip</span>.<span class='id identifier rubyid_empty?'>empty?</span></code></pre>

<p>If the expressions is broken into multiple lines in any of the ways described above, comments between separate lines are allowed:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_sum'>sum</span> <span class='op'>=</span> <span class='id identifier rubyid_base_salary'>base_salary</span> <span class='op'>+</span>
      <span class='comment'># see &quot;yearly bonuses section&quot;
</span>      <span class='id identifier rubyid_yearly_bonus'>yearly_bonus</span>(<span class='id identifier rubyid_year'>year</span>) <span class='op'>+</span>
      <span class='comment'># per-employee coefficient is described
</span>      <span class='comment'># in another module
</span>      <span class='id identifier rubyid_personal_coeff'>personal_coeff</span>(<span class='id identifier rubyid_employee'>employee</span>)

<span class='comment'># We want to short-circuit on empty files
</span><span class='const'>File</span>.<span class='id identifier rubyid_empty?'>empty?</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>test.txt</span><span class='tstring_end'>&#39;</span></span>)
  <span class='comment'># Or almost empty ones
</span>  <span class='op'>|</span><span class='op'>|</span> <span class='const'>File</span>.<span class='id identifier rubyid_size'>size</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>test.txt</span><span class='tstring_end'>&#39;</span></span>) <span class='op'>&lt;</span> <span class='int'>10</span>
  <span class='comment'># Otherwise we check if it is full of spaces
</span>  <span class='op'>|</span><span class='op'>|</span> <span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>test.txt</span><span class='tstring_end'>&#39;</span></span>).<span class='id identifier rubyid_strip'>strip</span>.<span class='id identifier rubyid_empty?'>empty?</span></code></pre>

<p>Finally, the code can explicitly tell Ruby that the expression is continued on the next line with <code>\</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Unusual, but works
</span><span class='const'>File</span>.<span class='id identifier rubyid_read'>read</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>test.txt</span><span class='tstring_end'>&quot;</span></span> \
          <span class='comma'>,</span> <span class='label'>encoding:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>utf-8</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># More regular usage (joins the strings on parsing instead
</span><span class='comment'># of concatenating them in runtime, as + would do):
</span><span class='const'>TEXT</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>One pretty long line</span><span class='tstring_end'>&quot;</span></span> \
       <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>one more long line</span><span class='tstring_end'>&quot;</span></span> \
       <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>one other line of the text</span><span class='tstring_end'>&quot;</span></span></code></pre>

<p>The <code>\</code> works as a parse time line break escape, so with it, comments can not be inserted between the lines:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>TEXT</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>line 1</span><span class='tstring_end'>&quot;</span></span> \
       <span class='comment'># here would be line 2:
</span>       <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>line 2</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># This is interpreted as if there was no line break where \ is,
</span><span class='comment'># i.e. the same as
</span><span class='const'>TEXT</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>line 1</span><span class='tstring_end'>&quot;</span></span> <span class='comment'># here would be line 2:
</span>       <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>line 2</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_puts'>puts</span> <span class='const'>TEXT</span> <span class='comment'>#=&gt; &quot;line 1&quot;</span></code></pre>

<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>