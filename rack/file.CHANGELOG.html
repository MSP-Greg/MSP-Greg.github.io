<!DOCTYPE html>
<html>
<head>

<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>File: CHANGELOG &mdash; Rack main</title>

<link rel='stylesheet'  type='text/css' href='../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "CHANGELOG",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='.'>Rack main</a> &raquo; 
      <a href='_index.html'>Index</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>File: CHANGELOG&nbsp;&#x25B2;</a></span>
          </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='file'>
<h1>Changelog</h1>

<p>All notable changes to this project will be documented in this file. For info on how to format all future additions to this file please reference <a href="https://keepachangelog.com/en/1.0.0/">Keep A Changelog</a>.</p>

<h2>Unreleased</h2>

<h3>SPEC Changes</h3>

<ul>
<li><code>rack.input</code> is now optional. (<a href="https://github.com/rack/rack/pull/1997">#1997</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li><code>Rack::Utils.escape_html</code> is now delegated to <code>CGI.escapeHTML</code>. <code>&#39;</code> is escaped to <code>#39;</code> instead of <code>#x27;</code>. (decimal vs hexadecimal) (<a href="https://github.com/rack/rack/pull/2099">#2099</a>, <a href="https://github.com/JunichiIto">@JunichiIto</a>)</li>
</ul>

<h3>Changed</h3>

<ul>
<li><code>rack.input</code> is now optional, and if missing, will raise an error. Use this to fail on multipart parsing a request without an input body. (<a href="https://github.com/rack/rack/pull/2018">#2018</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li>Introduce <code>module Rack::BadRequest</code> which is included in multipart and query parser errors. (<a href="https://github.com/rack/rack/pull/2019">#2019</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li>MIME type for JavaScript files (<code>.js</code>) changed from <code>application/javascript</code> to <code>text/javascript</code> (<a href="https://github.com/rack/rack/commit/1bd0f1597d8f4a90d47115f3e156a8ce7870c9c8"><code>1bd0f15</code></a>)</li>
<li>Add <code>.mjs</code> MIME type (<a href="https://github.com/rack/rack/pull/2057">#2057</a>, [@axilleas])</li>
<li>Update MIME types associated to <code>.ttf</code>, <code>.woff</code>, <code>.woff2</code> and <code>.otf</code> extensions to use mondern <code>font/*</code> types. (<a href="https://github.com/rack/rack/pull/2065">#2065</a>, <a href="https://github.com/davidstosik" title="David Stosik">@davidstosik</a>)</li>
<li><code>set_cookie_header</code> utility now supports the <code>partitioned</code> cookie attribute. This is required by Chrome in some embedded contexts. (<a href="https://github.com/rack/rack/pull/2131">#2131</a>, [@flavio-b])</li>
<li>Remove non-standard status codes 306, 509, &amp; 510 and update descriptions for 413, 422, &amp; 451. (<a href="https://github.com/rack/rack/pull/2137">#2137</a>, [@wtn])</li>
<li>Add fallback lookup and deprecation warning for obsolete status symbols. (<a href="https://github.com/rack/rack/pull/2137">#2137</a>, [@wtn])</li>
<li>In <a href="Rack/Files.html" title="Rack::Files (class)"><code>Files</code></a>, ignore the <code>Range</code> header if served file is 0 bytes. (<a href="https://github.com/rack/rack/pull/2159">#2159</a>, [@zarqman])</li>
</ul>

<h2>[3.0.10] - 2024-03-21</h2>

<ul>
<li>Backport #2104 to 3-0-stable: Return empty when parsing a multi-part POST with only one end delimiter. (<a href="https://github.com/rack/rack/pull/2164">#2164</a>, <a href="https://github.com/JoeDupuis">@JoeDupuis</a>)</li>
</ul>

<h2>[3.0.9.1] - 2024-02-21</h2>

<h3>Security</h3>

<ul>
<li><a href="https://github.com/advisories/GHSA-54rr-7fvw-6x8f">CVE-2024-26146</a> Fixed ReDoS in Accept header parsing</li>
<li><a href="https://github.com/advisories/GHSA-22f2-v57c-j9cx">CVE-2024-25126</a> Fixed ReDoS in Content Type header parsing</li>
<li><a href="https://github.com/advisories/GHSA-xj5v-6v4g-jfw6">CVE-2024-26141</a> Reject Range headers which are too large</li>
</ul>

<h2>[3.0.9] - 2024-01-31</h2>

<ul>
<li>Fix incorrect content-length header that was emitted when <a href="Rack/Response.html#write-instance_method" title="Rack::Response#write (method)">Rack::Response#write</a> was used in some situations. (<a href="https://github.com/rack/rack/pull/2150">#2150</a>, <a href="https://github.com/mattbrictson">@mattbrictson</a>)</li>
</ul>

<h2>[3.0.8] - 2023-06-14</h2>

<ul>
<li>Fix some unused variable verbose warnings. (<a href="https://github.com/rack/rack/pull/2084">#2084</a>, <a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>, <a href="https://github.com/skipkayhil">@skipkayhil</a>)</li>
</ul>

<h2>[3.0.7] - 2023-03-16</h2>

<ul>
<li>Make query parameters without <code>=</code> have <code>nil</code> values. (<a href="https://github.com/rack/rack/pull/2059">#2059</a>, <a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
</ul>

<h2>[3.0.6.1] - 2023-03-13</h2>

<h3>Security</h3>

<ul>
<li>[CVE-2023-27539] Avoid ReDoS in header parsing</li>
</ul>

<h2>[3.0.6] - 2023-03-13</h2>

<ul>
<li>Add <code>QueryParser#missing_value</code> for handling missing values + tests. (<a href="https://github.com/rack/rack/pull/2052">#2052</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
</ul>

<h2>[3.0.5] - 2023-03-13</h2>

<ul>
<li>Split form/query parsing into two steps. (<a href="https://github.com/rack/rack/pull/2038">#2038</a>, <a href="https://github.com/matthewd">@matthewd</a>)</li>
</ul>

<h2>[3.0.4.2] - 2023-03-02</h2>

<h3>Security</h3>

<ul>
<li>[CVE-2023-27530] Introduce multipart_total_part_limit to limit total parts</li>
</ul>

<h2>[3.0.4.1] - 2023-01-17</h2>

<h3>Security</h3>

<ul>
<li>[CVE-2022-44571] Fix ReDoS vulnerability in multipart parser</li>
<li>[CVE-2022-44570] Fix ReDoS in <a href="Rack/Utils.html" title="Rack::Utils (module)"><code>Utils</code></a>.get_byte_ranges</li>
<li>[CVE-2022-44572] Forbid control characters in attributes (also ReDoS)</li>
</ul>

<h2>[3.0.4] - 2023-01-17</h2>

<ul>
<li><code>Rack::Request#POST</code> should consistently raise errors. Cache errors that occur when invoking <code>Rack::Request#POST</code> so they can be raised again later. (<a href="https://github.com/rack/rack/pull/2010">#2010</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li>Fix <a href="Rack/Lint.html" title="Rack::Lint (class)"><code>Lint</code></a> error message for <code>HTTP_CONTENT_TYPE</code> and <code>HTTP_CONTENT_LENGTH</code>. (<a href="https://github.com/rack/rack/pull/2007">#2007</a>, <a href="https://github.com/byroot">@byroot</a>)</li>
<li>Extend <a href="Rack/MethodOverride.html" title="Rack::MethodOverride (class)"><code>MethodOverride</code></a> to handle <a href="Rack/QueryParser/ParamsTooDeepError.html" title="Rack::QueryParser::ParamsTooDeepError (class)"><code>QueryParser::ParamsTooDeepError</code></a> error. (<a href="https://github.com/rack/rack/pull/2006">#2006</a>, <a href="https://github.com/byroot">@byroot</a>)</li>
</ul>

<h2>[3.0.3] - 2022-12-27</h2>

<h3>Fixed</h3>

<ul>
<li><a href="Rack/URLMap.html" title="Rack::URLMap (class)"><code>URLMap</code></a> uses non-deprecated form of <code>Regexp.new</code>. (<a href="https://github.com/rack/rack/pull/1998">#1998</a>, <a href="https://github.com/weizheheng">@weizheheng</a>)</li>
</ul>

<h2>[3.0.2] -2022-12-05</h2>

<h3>Fixed</h3>

<ul>
<li><a href="Rack/Utils.html#build_nested_query-class_method" title="Rack::Utils.build_nested_query (method)">Rack::Utils.build_nested_query</a> URL-encodes nested field names including the square brackets.</li>
<li>Allow <a href="Rack/Response.html" title="Rack::Response (class)"><code>Response</code></a> to pass through streaming bodies. (<a href="https://github.com/rack/rack/pull/1993">#1993</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
</ul>

<h2>[3.0.1] - 2022-11-18</h2>

<h3>Fixed</h3>

<ul>
<li><a href="Rack/MethodOverride.html" title="Rack::MethodOverride (class)"><code>MethodOverride</code></a> does not look for an override if a request does not include form/parseable data.</li>
<li><a href="Rack/Lint/Wrapper.html" title="Rack::Lint::Wrapper (class)"><code>Lint::Wrapper</code></a> correctly handles <code>respond_to?</code> with <code>to_ary</code>, <code>each</code>, <code>call</code> and <code>to_path</code>, forwarding to the body. (<a href="https://github.com/rack/rack/pull/1981">#1981</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
</ul>

<h2>[3.0.0] - 2022-09-06</h2>

<ul>
<li>No changes</li>
</ul>

<h2>[3.0.0.rc1] - 2022-09-04</h2>

<h3>SPEC Changes</h3>

<ul>
<li>Stream argument must implement <code>&lt;&lt;</code> <a href="https://github.com/rack/rack/pull/1959">https://github.com/rack/rack/pull/1959</a></li>
<li><code>close</code> may be called on <code>rack.input</code> <a href="https://github.com/rack/rack/pull/1956">https://github.com/rack/rack/pull/1956</a></li>
<li><code>rack.response_finished</code> may be used for executing code after the response has been finished <a href="https://github.com/rack/rack/pull/1952">https://github.com/rack/rack/pull/1952</a></li>
</ul>

<h2>[3.0.0.beta1] - 2022-08-08</h2>

<h3>Security</h3>

<ul>
<li>Do not use semicolon as GET parameter separator. (<a href="https://github.com/rack/rack/pull/1733">#1733</a>, <a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
</ul>

<h3>SPEC Changes</h3>

<ul>
<li>Response array must now be non-frozen.</li>
<li>Response <code>status</code> must now be an integer greater than or equal to 100.</li>
<li>Response <code>headers</code> must now be an unfrozen hash.</li>
<li>Response header keys can no longer include uppercase characters.</li>
<li>Response header values can be an <code>Array</code> to handle multiple values (and no longer supports <code>\n</code> encoded headers).</li>
<li>Response body can now respond to <code>#call</code> (streaming body) instead of <code>#each</code> (enumerable body), for the equivalent of response hijacking in previous versions.</li>
<li>Middleware must no longer call <code>#each</code> on the body, but they can call <code>#to_ary</code> on the body if it responds to <code>#to_ary</code>.</li>
<li><code>rack.input</code> is no longer required to be rewindable.</li>
<li><code>rack.multithread</code>/<code>rack.multiprocess</code>/<code>rack.run_once</code>/<code>rack.version</code> are no longer required environment keys.</li>
<li><a href="Rack.html#SERVER_PROTOCOL-constant" title="Rack::SERVER_PROTOCOL (constant)">Rack::SERVER_PROTOCOL</a> is now a required environment key, matching the HTTP protocol used in the request.</li>
<li><code>rack.hijack?</code> (partial hijack) and <code>rack.hijack</code> (full hijack) are now independently optional.</li>
<li><code>rack.hijack_io</code> has been removed completely.</li>
<li><code>rack.response_finished</code> is an optional environment key which contains an array of callable objects that must accept <code>#call(env, status, headers, error)</code> and are invoked after the response is finished (either successfully or unsuccessfully).</li>
<li>It is okay to call <code>#close</code> on <code>rack.input</code> to indicate that you no longer need or care about the input.</li>
<li>The stream argument supplied to the streaming body and hijack must support <code>#&lt;&lt;</code> for writing output.</li>
</ul>

<h3>Removed</h3>

<ul>
<li>Remove <code>rack.multithread</code>/<code>rack.multiprocess</code>/<code>rack.run_once</code>. These variables generally come too late to be useful. (<a href="https://github.com/rack/rack/pull/1720">#1720</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>, <a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>))</li>
<li>Remove deprecated Rack::Request::SCHEME_WHITELIST. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>Remove internal cookie deletion using pattern matching, there are very few practical cases where it would be useful and browsers handle it correctly without us doing anything special. (<a href="https://github.com/rack/rack/pull/1844">#1844</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li>Remove <code>rack.version</code> as it comes too late to be useful. (<a href="https://github.com/rack/rack/pull/1938">#1938</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li>Extract <code>rackup</code> command, <code>Rack::Server</code>, <code>Rack::Handler</code>, <code>Rack::Lobster</code> and related code into a separate gem. (<a href="https://github.com/rack/rack/pull/1937">#1937</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
</ul>

<h3>Added</h3>

<ul>
<li><a href="Rack/Headers.html" title="Rack::Headers (class)"><code>Headers</code></a> added to support lower-case header keys. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><a href="Rack/Utils.html#set_cookie_header-instance_method" title="Rack::Utils#set_cookie_header (method)">Rack::Utils#set_cookie_header</a> now supports <code>escape_key: false</code> to avoid key escaping.  (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><a href="Rack/RewindableInput.html" title="Rack::RewindableInput (class)"><code>RewindableInput</code></a> supports size. (<a href="https://github.com/ahorek">@ahorek</a>)</li>
<li><a href="Rack/RewindableInput/Middleware.html" title="Rack::RewindableInput::Middleware (class)"><code>RewindableInput::Middleware</code></a> added for making <code>rack.input</code> rewindable. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>The RFC 7239 Forwarded header is now supported and considered by default when looking for information on forwarding, falling back to the X-Forwarded-* headers. <a href="Rack/Request.html#forwarded_priority-class_method" title="Rack::Request.forwarded_priority (method)">Rack::Request.forwarded_priority</a> accessor has been added for configuring the priority of which header to check.  (<a href="https://github.com/rack/rack/issues/1423">#1423</a>, <a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>Allow response headers to contain array of values. (<a href="https://github.com/rack/rack/issues/1598">#1598</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li>Support callable body for explicit streaming support and clarify streaming response body behaviour. (<a href="https://github.com/rack/rack/pull/1745">#1745</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>, <a href="https://github.com/rack/rack/pull/1748">#1748</a>, <a href="https://github.com/wjordan" title="Will Jordan">@wjordan</a>)</li>
<li>Allow <a href="Rack/Builder.html#run-instance_method" title="Rack::Builder#run (method)">Rack::Builder#run</a> to take a block instead of an argument. (<a href="https://github.com/rack/rack/pull/1942">#1942</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li>Add <code>rack.response_finished</code> to <a href="Rack/Lint.html" title="Rack::Lint (class)"><code>Lint</code></a>. (<a href="https://github.com/rack/rack/pull/1802">#1802</a>, <a href="https://github.com/BlakeWilliams" title="Blake Williams">@BlakeWilliams</a>, <a href="https://github.com/rack/rack/pull/1952">#1952</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li>The stream argument must implement <code>#&lt;&lt;</code>. (<a href="https://github.com/rack/rack/pull/1959">#1959</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
</ul>

<h3>Changed</h3>

<ul>
<li>BREAKING CHANGE: Require <code>status</code> to be an Integer. (<a href="https://github.com/rack/rack/pull/1662">#1662</a>, <a href="https://github.com/olleolleolle">@olleolleolle</a>)</li>
<li>BREAKING CHANGE: Query parsing now treats parameters without <code>=</code> as having the empty string value instead of nil value, to conform to the URL spec. (<a href="https://github.com/rack/rack/issues/1696">#1696</a>, <a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>Relax validations around <code>Rack::Request#host</code> and <code>Rack::Request#hostname</code>. (<a href="https://github.com/rack/rack/issues/1606">#1606</a>, <a href="https://github.com/pvande">@pvande</a>)</li>
<li>Removed antiquated handlers: FCGI, LSWS, SCGI, Thin. (<a href="https://github.com/rack/rack/pull/1658">#1658</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li>Removed options from <a href="Rack/Builder.html#parse_file-class_method" title="Rack::Builder.parse_file (method)">Rack::Builder.parse_file</a> and <a href="Rack/Builder.html#load_file-class_method" title="Rack::Builder.load_file (method)">Rack::Builder.load_file</a>. (<a href="https://github.com/rack/rack/pull/1663">#1663</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li><code>Rack::HTTP_VERSION</code> has been removed and the <code>HTTP_VERSION</code> env setting is no longer set in the CGI and Webrick handlers. (<a href="https://github.com/rack/rack/issues/970">#970</a>, <a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><code>Rack::Request#[]</code> and <code>#[]=</code> now warn even in non-verbose mode. (<a href="https://github.com/rack/rack/issues/1277">#1277</a>, <a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>Decrease default allowed parameter recursion level from 100 to 32. (<a href="https://github.com/rack/rack/issues/1640">#1640</a>, <a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>Attempting to parse a multipart response with an empty body now raises Rack::Multipart::EmptyContentError. (<a href="https://github.com/rack/rack/issues/1603">#1603</a>, <a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><a href="Rack/Utils.html#secure_compare-class_method" title="Rack::Utils.secure_compare (method)">Rack::Utils.secure_compare</a> uses OpenSSL&#39;s faster implementation if available. (<a href="https://github.com/rack/rack/pull/1711">#1711</a>, <a href="https://github.com/bdewater">@bdewater</a>)</li>
<li><code>Rack::Request#POST</code> now caches an empty hash if input content type is not parseable. (<a href="https://github.com/rack/rack/pull/749">#749</a>, <a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>BREAKING CHANGE: Updated <code>trusted_proxy?</code> to match full 127.0.0.0/8 network. (<a href="https://github.com/rack/rack/pull/1781">#1781</a>, <a href="https://github.com/snbloch">@snbloch</a>)</li>
<li>Explicitly deprecate <code>Rack::File</code> which was an alias for <a href="Rack/Files.html" title="Rack::Files (class)"><code>Files</code></a>. (<a href="https://github.com/rack/rack/pull/1720">#1811</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>).</li>
<li>Moved <code>Rack::Session</code> into <a href="https://github.com/rack/rack-session">separate gem</a>. (<a href="https://github.com/rack/rack/pull/1805">#1805</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li><code>rackup -D</code> option to daemonizes no longer changes the working directory to the root. (<a href="https://github.com/rack/rack/pull/1813">#1813</a>, <a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>The <code>x-forwarded-proto</code> header is now considered before the <code>x-forwarded-scheme</code> header for determining the forwarded protocol. <a href="Rack/Request.html#x_forwarded_proto_priority-class_method" title="Rack::Request.x_forwarded_proto_priority (method)">Rack::Request.x_forwarded_proto_priority</a> accessor has been added for configuring the priority of which header to check.  (<a href="https://github.com/rack/rack/issues/1809">#1809</a>, <a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><code>Rack::Request.forwarded_authority</code> (and methods that call it, such as <code>host</code>) now returns the last authority in the forwarded header, instead of the first, as earlier forwarded authorities can be forged by clients. This restores the <a href="Rack.html" title="Rack (module)"><code>Rack</code></a> 2.1 behavior. (<a href="https://github.com/rack/rack/issues/1809">#1829</a>, <a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>Use lower case cookie attributes when creating cookies, and fold cookie attributes to lower case when reading cookies (specifically impacting <code>secure</code> and <code>httponly</code> attributes). (<a href="https://github.com/rack/rack/pull/1849">#1849</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li>The response array must now be mutable (non-frozen) so middleware can modify it without allocating a new Array,therefore reducing object allocations. (<a href="https://github.com/rack/rack/pull/1887">#1887</a>, <a href="https://github.com/rack/rack/pull/1927">#1927</a>, <a href="https://github.com/amatsuda" title="Akira Matsuda">@amatsuda</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li><code>rack.hijack?</code> (partial hijack) and <code>rack.hijack</code> (full hijack) are now independently optional. <code>rack.hijack_io</code> is no longer required/specified. (<a href="https://github.com/rack/rack/pull/1939">#1939</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li>Allow calling close on <code>rack.input</code>. (<a href="https://github.com/rack/rack/pull/1956">#1956</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
</ul>

<h3>Fixed</h3>

<ul>
<li>Make Rack::MockResponse handle non-hash headers. (<a href="https://github.com/rack/rack/issues/1629">#1629</a>, <a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>TempfileReaper now deletes temp files if application raises an exception. (<a href="https://github.com/rack/rack/issues/1679">#1679</a>, <a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>Handle cookies with values that end in &#39;=&#39; (<a href="https://github.com/rack/rack/pull/1645">#1645</a>, <a href="https://github.com/lukaso">@lukaso</a>)</li>
<li>Make <a href="Rack/NullLogger.html" title="Rack::NullLogger (class)"><code>NullLogger</code></a> respond to <code>#fatal!</code> <a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>Fix multipart filename generation for filenames that contain spaces. Encode spaces as &quot;%20&quot; instead of &quot;+&quot; which will be decoded properly by the multipart parser. (<a href="https://github.com/rack/rack/pull/1645">#1736</a>, <a href="https://github.com/muirdm">@muirdm</a>)</li>
<li><code>Rack::Request#scheme</code> returns <code>ws</code> or <code>wss</code> when one of the <code>X-Forwarded-Scheme</code> / <code>X-Forwarded-Proto</code> headers is set to <code>ws</code> or <code>wss</code>, respectively. (<a href="https://github.com/rack/rack/issues/1730">#1730</a>, <a href="https://github.com/erwanst">@erwanst</a>)</li>
</ul>

<h2>[2.2.4] - 2022-06-30</h2>

<ul>
<li>Better support for lower case headers in <a href="Rack/ETag.html" title="Rack::ETag (class)"><code>ETag</code></a> middleware. (<a href="https://github.com/rack/rack/pull/1919">#1919</a>, <a href="https://github.com/ioquatix">@ioquatix</a>)</li>
<li>Use custom exception on params too deep error. (<a href="https://github.com/rack/rack/pull/1838">#1838</a>, <a href="https://github.com/simi">@simi</a>)</li>
</ul>

<h2>[2.2.3.1] - 2022-05-27</h2>

<h3>Security</h3>

<ul>
<li>[CVE-2022-30123] Fix shell escaping issue in Common Logger</li>
<li>[CVE-2022-30122] Restrict parsing of broken MIME attachments</li>
</ul>

<h2>[2.2.3] - 2020-06-15</h2>

<h3>Security</h3>

<ul>
<li>[<a href="https://nvd.nist.gov/vuln/detail/CVE-2020-8184">CVE-2020-8184</a>] Do not allow percent-encoded cookie name to override existing cookie names. BREAKING CHANGE: Accessing cookie names that require URL encoding with decoded name no longer works. (<a href="https://github.com/fletchto99">@fletchto99</a>)</li>
</ul>

<h2>[2.2.2] - 2020-02-11</h2>

<h3>Fixed</h3>

<ul>
<li>Fix incorrect <code>Rack::Request#host</code> value. (<a href="https://github.com/rack/rack/pull/1591">#1591</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li>Revert <code>Rack::Handler::Thin</code> implementation. (<a href="https://github.com/rack/rack/pull/1583">#1583</a>, <a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>Double assignment is still needed to prevent an &quot;unused variable&quot; warning. (<a href="https://github.com/rack/rack/pull/1589">#1589</a>, <a href="https://github.com/kamipo">@kamipo</a>)</li>
<li>Fix to handle same_site option for session pool. (<a href="https://github.com/rack/rack/pull/1587">#1587</a>, <a href="https://github.com/kamipo">@kamipo</a>)</li>
</ul>

<h2>[2.2.1] - 2020-02-09</h2>

<h3>Fixed</h3>

<ul>
<li>Rework <code>Rack::Request#ip</code> to handle empty <code>forwarded_for</code>. (<a href="https://github.com/rack/rack/pull/1577">#1577</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
</ul>

<h2>[2.2.0] - 2020-02-08</h2>

<h3>SPEC Changes</h3>

<ul>
<li><code>rack.session</code> request environment entry must respond to <code>to_hash</code> and return unfrozen Hash. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>Request environment cannot be frozen. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>CGI values in the request environment with non-ASCII characters must use ASCII-8BIT encoding. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>Improve SPEC/lint relating to SERVER_NAME, SERVER_PORT and HTTP_HOST. (<a href="https://github.com/rack/rack/pull/1561">#1561</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
</ul>

<h3>Added</h3>

<ul>
<li><code>rackup</code> supports multiple <code>-r</code> options and will require all arguments. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><code>Server</code> supports an array of paths to require for the <code>:require</code> option. (<a href="https://github.com/khotta">@khotta</a>)</li>
<li><a href="Rack/Files.html" title="Rack::Files (class)"><code>Files</code></a> supports multipart range requests. (<a href="https://github.com/fatkodima">@fatkodima</a>)</li>
<li><a href="Rack/Multipart/UploadedFile.html" title="Rack::Multipart::UploadedFile (class)"><code>Multipart::UploadedFile</code></a> supports an IO-like object instead of using the filesystem, using <code>:filename</code> and <code>:io</code> options. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><a href="Rack/Multipart/UploadedFile.html" title="Rack::Multipart::UploadedFile (class)"><code>Multipart::UploadedFile</code></a> supports keyword arguments <code>:path</code>, <code>:content_type</code>, and <code>:binary</code> in addition to positional arguments. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><a href="Rack/Static.html" title="Rack::Static (class)"><code>Static</code></a> supports a <code>:cascade</code> option for calling the app if there is no matching file. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><code>Session::Abstract::SessionHash#dig</code>. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><a href="Rack/Response.html#[]-class_method" title="Rack::Response.[] (method)">Rack::Response.[]</a> and <a href="Rack/MockResponse.html#[]-class_method" title="Rack::MockResponse.[] (method)">Rack::MockResponse.[]</a> for creating instances using status, headers, and body. (<a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li>Convenient cache and content type methods for <a href="Rack/Response.html" title="Rack::Response (class)"><code>Response</code></a>. (<a href="https://github.com/rack/rack/pull/1555">#1555</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
</ul>

<h3>Changed</h3>

<ul>
<li><a href="Rack/Request.html#params-instance_method" title="Rack::Request#params (method)">Rack::Request#params</a> no longer rescues EOFError. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><a href="Rack/Directory.html" title="Rack::Directory (class)"><code>Directory</code></a> uses a streaming approach, significantly improving time to first byte for large directories. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><a href="Rack/Directory.html" title="Rack::Directory (class)"><code>Directory</code></a> no longer includes a Parent directory link in the root directory index. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><a href="Rack/QueryParser.html#parse_nested_query-instance_method" title="Rack::QueryParser#parse_nested_query (method)">Rack::QueryParser#parse_nested_query</a> uses original backtrace when reraising exception with new class. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><a href="Rack/ConditionalGet.html" title="Rack::ConditionalGet (class)"><code>ConditionalGet</code></a> follows RFC 7232 precedence if both If-None-Match and If-Modified-Since headers are provided. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><code>.ru</code> files supports the <code>frozen-string-literal</code> magic comment. (<a href="https://github.com/eregon">@eregon</a>)</li>
<li>Rely on autoload to load constants instead of requiring internal files, make sure to require &#39;rack&#39; and not just &#39;rack/...&#39;. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>BREAKING CHANGE: <code>Etag</code> will continue sending ETag even if the response should not be cached. Streaming no longer works without a workaround, see <a href="https://github.com/rack/rack/issues/1619#issuecomment-848460528">#1619</a>. (<a href="https://github.com/henm">@henm</a>)</li>
<li><code>Request#host_with_port</code> no longer includes a colon for a missing or empty port. (<a href="https://github.com/AlexWayfer">@AlexWayfer</a>)</li>
<li>All handlers uses keywords arguments instead of an options hash argument. (<a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li><a href="Rack/Files.html" title="Rack::Files (class)"><code>Files</code></a> handling of range requests no longer return a body that supports <code>to_path</code>, to ensure range requests are handled correctly. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><a href="Rack/Multipart/Generator.html" title="Rack::Multipart::Generator (class)"><code>Multipart::Generator</code></a> only includes <code>Content-Length</code> for files with paths, and <code>Content-Disposition</code> <code>filename</code> if the <code>UploadedFile</code> instance has one. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><code>Request#ssl?</code> is true for the <code>wss</code> scheme (secure websockets). (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><code>Rack::HeaderHash</code> is memoized by default. (<a href="https://github.com/rack/rack/pull/1549">#1549</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li><a href="Rack/Directory.html" title="Rack::Directory (class)"><code>Directory</code></a> allow directory traversal inside root directory. (<a href="https://github.com/rack/rack/pull/1417">#1417</a>, <a href="https://github.com/ThomasSevestre">@ThomasSevestre</a>)</li>
<li>Sort encodings by server preference. (<a href="https://github.com/rack/rack/pull/1184">#1184</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>, <a href="https://github.com/wjordan">@wjordan</a>)</li>
<li>Rework host/hostname/authority implementation in <a href="Rack/Request.html" title="Rack::Request (class)"><code>Request</code></a>. <code>#host</code> and <code>#host_with_port</code> have been changed to correctly return IPv6 addresses formatted with square brackets, as defined by <a href="https://tools.ietf.org/html/rfc3986#section-3.2.2">RFC3986</a>. (<a href="https://github.com/rack/rack/pull/1561">#1561</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li><a href="Rack/Builder.html" title="Rack::Builder (class)"><code>Builder</code></a> parsing options on first <code>#\</code> line is deprecated. (<a href="https://github.com/rack/rack/pull/1574">#1574</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
</ul>

<h3>Removed</h3>

<ul>
<li><code>Directory#path</code> as it was not used and always returned nil. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><code>BodyProxy#each</code> as it was only needed to work around a bug in Ruby &lt;1.9.3. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><code>URLMap::INFINITY</code> and <code>URLMap::NEGATIVE_INFINITY</code>, in favor of <code>Float::INFINITY</code>. (<a href="https://github.com/ch1c0t">@ch1c0t</a>)</li>
<li>Deprecation of <code>Rack::File</code>. It will be deprecated again in rack 2.2 or 3.0. (<a href="https://github.com/rafaelfranca">@rafaelfranca</a>)</li>
<li>Support for Ruby 2.2 as it is well past EOL. (<a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li>Remove <code>Rack::Files#response_body</code> as the implementation was broken. (<a href="https://github.com/rack/rack/pull/1153">#1153</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li>Remove <code>SERVER_ADDR</code> which was never part of the original SPEC. (<a href="https://github.com/rack/rack/pull/1573">#1573</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
</ul>

<h3>Fixed</h3>

<ul>
<li><a href="Rack/Directory.html" title="Rack::Directory (class)"><code>Directory</code></a> correctly handles root paths containing glob metacharacters. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><a href="Rack/Cascade.html" title="Rack::Cascade (class)"><code>Cascade</code></a> uses a new response object for each call if initialized with no apps. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><a href="Rack/BodyProxy.html" title="Rack::BodyProxy (class)"><code>BodyProxy</code></a> correctly delegates keyword arguments to the body object on Ruby 2.7+. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><code>BodyProxy#method</code> correctly handles methods delegated to the body object. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><code>Request#host</code> and <code>Request#host_with_port</code> handle IPv6 addresses correctly. (<a href="https://github.com/AlexWayfer">@AlexWayfer</a>)</li>
<li><a href="Rack/Lint.html" title="Rack::Lint (class)"><code>Lint</code></a> checks when response hijacking that <code>rack.hijack</code> is called with a valid object. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><a href="Rack/Response.html#write-instance_method" title="Rack::Response#write (method)">Rack::Response#write</a> correctly updates <code>Content-Length</code> if initialized with a body. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><a href="Rack/CommonLogger.html" title="Rack::CommonLogger (class)"><code>CommonLogger</code></a> includes <a href="Rack.html#SCRIPT_NAME-constant" title="Rack::SCRIPT_NAME (constant)">Rack::SCRIPT_NAME</a> when logging. (<a href="https://github.com/Erol">@Erol</a>)</li>
<li><a href="Rack/Utils.html#parse_nested_query-class_method" title="Rack::Utils.parse_nested_query (method)">Rack::Utils.parse_nested_query</a> correctly handles empty queries, using an empty instance of the params class instead of a hash. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><a href="Rack/Directory.html" title="Rack::Directory (class)"><code>Directory</code></a> correctly escapes paths in links. (<a href="https://github.com/yous">@yous</a>)</li>
<li><code>Request#delete_cookie</code> and related <a href="Rack/Utils.html" title="Rack::Utils (module)"><code>Utils</code></a> methods handle <code>:domain</code> and <code>:path</code> options in same call. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><code>Request#delete_cookie</code> and related <a href="Rack/Utils.html" title="Rack::Utils (module)"><code>Utils</code></a> methods do an exact match on <code>:domain</code> and <code>:path</code> options. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><a href="Rack/Static.html" title="Rack::Static (class)"><code>Static</code></a> no longer adds headers when a gzipped file request has a 304 response. (<a href="https://github.com/chooh">@chooh</a>)</li>
<li><a href="Rack/ContentLength.html" title="Rack::ContentLength (class)"><code>ContentLength</code></a> sets <code>Content-Length</code> response header even for bodies not responding to <code>to_ary</code>. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>Thin handler supports options passed directly to <code>Thin::Controllers::Controller</code>. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>WEBrick handler no longer ignores <code>:BindAddress</code> option. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><a href="Rack/ShowExceptions.html" title="Rack::ShowExceptions (class)"><code>ShowExceptions</code></a> handles invalid POST data. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>Basic authentication requires a password, even if the password is empty. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li><a href="Rack/Lint.html" title="Rack::Lint (class)"><code>Lint</code></a> checks response is array with 3 elements, per SPEC. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>Support for using <code>:SSLEnable</code> option when using WEBrick handler. (Gregor Melhorn)</li>
<li>Close response body after buffering it when buffering. (<a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li>Only accept <code>;</code> as delimiter when parsing cookies. (<a href="https://github.com/mrageh">@mrageh</a>)</li>
<li><code>Utils::HeaderHash#clear</code> clears the name mapping as well. (<a href="https://github.com/raxoft">@raxoft</a>)</li>
<li>Support for passing <code>nil</code> <a href="Rack/Files.html#new-class_method" title="Rack::Files.new (method)">Rack::Files.new</a>, which notably fixes Rails&#39; current <code>ActiveStorage::FileServer</code> implementation. (<a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
</ul>

<h3>Documentation</h3>

<ul>
<li>CHANGELOG updates. (<a href="https://github.com/aupajo">@aupajo</a>)</li>
<li>Added <a href="file.CONTRIBUTING.html">CONTRIBUTING</a>. (<a href="https://github.com/dblock">@dblock</a>)</li>
</ul>

<h2>[2.0.9] - 2020-02-08</h2>

<ul>
<li>Handle case where session id key is requested but missing (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>Restore support for code relying on <code>SessionId#to_s</code>. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>Add support for <code>SameSite=None</code> cookie value. (<a href="https://github.com/hennikul">@hennikul</a>)</li>
</ul>

<h2>[2.1.2] - 2020-01-27</h2>

<ul>
<li>Fix multipart parser for some files to prevent denial of service (<a href="https://github.com/aiomaster">@aiomaster</a>)</li>
<li>Fix <a href="Rack/Builder.html#use-instance_method" title="Rack::Builder#use (method)">Rack::Builder#use</a> with keyword arguments (<a href="https://github.com/kamipo">@kamipo</a>)</li>
<li>Skip deflating in <a href="Rack/Deflater.html" title="Rack::Deflater (class)"><code>Deflater</code></a> if Content-Length is 0 (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>Remove <code>SessionHash#transform_keys</code>, no longer needed (<a href="https://github.com/pavel">@pavel</a>)</li>
<li>Add to_hash to wrap Hash and Session classes (<a href="https://github.com/oleh-demyanyuk">@oleh-demyanyuk</a>)</li>
<li>Handle case where session id key is requested but missing (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
</ul>

<h2>[2.1.1] - 2020-01-12</h2>

<ul>
<li>Remove <code>Rack::Chunked</code> from <code>Rack::Server</code> default middleware. (<a href="https://github.com/rack/rack/pull/1475">#1475</a>, <a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li>Restore support for code relying on <code>SessionId#to_s</code>. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
</ul>

<h2>[2.1.0] - 2020-01-10</h2>

<h3>Added</h3>

<ul>
<li>Add support for <code>SameSite=None</code> cookie value. (<a href="https://github.com/hennikul">@hennikul</a>)</li>
<li>Add trailer headers. (<a href="https://github.com/eileencodes">@eileencodes</a>)</li>
<li>Add MIME Types for video streaming. (<a href="https://github.com/styd">@styd</a>)</li>
<li>Add MIME Type for WASM. (<a href="https://github.com/buildrtech">@buildrtech</a>)</li>
<li>Add <code>Early Hints(103)</code> to status codes. (<a href="https://github.com/egtra">@egtra</a>)</li>
<li>Add <code>Too Early(425)</code> to status codes. (<a href="(https://github.com/y-yagi)">@y-yagi</a>)</li>
<li>Add <code>Bandwidth Limit Exceeded(509)</code> to status codes. (<a href="https://github.com/CJKinni">@CJKinni</a>)</li>
<li>Add method for custom <code>ip_filter</code>. (<a href="https://github.com/svcastaneda">@svcastaneda</a>)</li>
<li>Add boot-time profiling capabilities to <code>rackup</code>. (<a href="https://github.com/tenderlove">@tenderlove</a>)</li>
<li>Add multi mapping support for <code>X-Accel-Mappings</code> header. (<a href="https://github.com/yoshuki">@yoshuki</a>)</li>
<li>Add <code>sync: false</code> option to <a href="Rack/Deflater.html" title="Rack::Deflater (class)"><code>Deflater</code></a>. (Eric Wong)</li>
<li>Add <a href="Rack/Builder.html#freeze_app-instance_method" title="Rack::Builder#freeze_app (method)">Rack::Builder#freeze_app</a> to freeze application and all middleware instances. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
<li>Add API to extract cookies from <a href="Rack/MockResponse.html" title="Rack::MockResponse (class)"><code>MockResponse</code></a>. (<a href="https://github.com/petercline">@petercline</a>)</li>
</ul>

<h3>Changed</h3>

<ul>
<li>Don&#39;t propagate nil values from middleware. (<a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li>Lazily initialize the response body and only buffer it if required. (<a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li>Fix deflater zlib buffer errors on empty body part. (<a href="https://github.com/felixbuenemann">@felixbuenemann</a>)</li>
<li>Set <code>X-Accel-Redirect</code> to percent-encoded path. (<a href="https://github.com/diskkid">@diskkid</a>)</li>
<li>Remove unnecessary buffer growing when parsing multipart. (<a href="https://github.com/tainoe">@tainoe</a>)</li>
<li>Expand the root path in <a href="Rack/Static.html" title="Rack::Static (class)"><code>Static</code></a> upon initialization. (<a href="https://github.com/rosenfeld">@rosenfeld</a>)</li>
<li>Make <a href="Rack/ShowExceptions.html" title="Rack::ShowExceptions (class)"><code>ShowExceptions</code></a> work with binary data. (<a href="https://github.com/axyjo">@axyjo</a>)</li>
<li>Use buffer string when parsing multipart requests. (<a href="https://github.com/janko-m">@janko-m</a>)</li>
<li>Support optional UTF-8 Byte Order Mark (BOM) in config.ru. (<a href="https://github.com/mikegee">@mikegee</a>)</li>
<li>Handle <code>X-Forwarded-For</code> with optional port. (<a href="https://github.com/dpritchett">@dpritchett</a>)</li>
<li>Use <code>Time#httpdate</code> format for Expires, as proposed by RFC 7231. (<a href="https://github.com/nanaya">@nanaya</a>)</li>
<li>Make <a href="Rack/Utils.html#status_code-class_method" title="Rack::Utils.status_code (method)">Rack::Utils.status_code</a> raise an error when the status symbol is invalid instead of <code>500</code>. (<a href="https://github.com/adambutler">@adambutler</a>)</li>
<li>Rename <code>Request::SCHEME_WHITELIST</code> to <a href="Rack/Request.html#ALLOWED_SCHEMES-constant" title="Rack::Request::ALLOWED_SCHEMES (constant)">Rack::Request::ALLOWED_SCHEMES</a>.</li>
<li>Make <code>Multipart::Parser.get_filename</code> accept files with <code>+</code> in their name. (<a href="https://github.com/lucaskanashiro">@lucaskanashiro</a>)</li>
<li>Add Falcon to the default handler fallbacks. (<a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li>Update codebase to avoid string mutations in preparation for <code>frozen_string_literals</code>. (<a href="https://github.com/pat">@pat</a>)</li>
<li>Change <code>MockRequest#env_for</code> to rely on the input optionally responding to <code>#size</code> instead of <code>#length</code>. (<a href="https://github.com/janko">@janko</a>)</li>
<li>Rename <code>Rack::File</code> -&gt; <a href="Rack/Files.html" title="Rack::Files (class)"><code>Files</code></a> and add deprecation notice. (<a href="https://github.com/postmodern">@postmodern</a>)</li>
<li>Prefer Base64 “strict encoding” for Base64 cookies. (<a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
</ul>

<h3>Removed</h3>

<ul>
<li>BREAKING CHANGE: Remove <code>to_ary</code> from Response (<a href="https://github.com/tenderlove">@tenderlove</a>)</li>
<li>Deprecate <code>Rack::Session::Memcache</code> in favor of <code>Rack::Session::Dalli</code> from dalli gem (<a href="https://github.com/fatkodima">@fatkodima</a>)</li>
</ul>

<h3>Fixed</h3>

<ul>
<li>Eliminate warnings for Ruby 2.7. (<a href="https://github.com/osamtimizer%5D">@osamtimizer</a>)</li>
</ul>

<h3>Documentation</h3>

<ul>
<li>Update broken example in <code>Session::Abstract::ID</code> documentation. (<a href="https://github.com/tonytonyjan">tonytonyjan</a>)</li>
<li>Add Padrino to the list of frameworks implementing <a href="Rack.html" title="Rack (module)"><code>Rack</code></a>. (<a href="https://github.com/wikimatze">@wikimatze</a>)</li>
<li>Remove Mongrel from the suggested server options in the help output. (<a href="https://github.com/tricknotes">@tricknotes</a>)</li>
<li>Replace <code>HISTORY.md</code> and <code>NEWS.md</code> with <code>CHANGELOG.md</code>. (<a href="https://github.com/twitnithegirl">@twitnithegirl</a>)</li>
<li>CHANGELOG updates. (<a href="https://github.com/Drenmi">@drenmi</a>, <a href="https://github.com/p8">@p8</a>)</li>
</ul>

<h2>[2.0.8] - 2019-12-08</h2>

<h3>Security</h3>

<ul>
<li>[<a href="https://nvd.nist.gov/vuln/detail/CVE-2019-16782">CVE-2019-16782</a>] Prevent timing attacks targeted at session ID lookup. BREAKING CHANGE: Session ID is now a SessionId instance instead of a String. (<a href="https://github.com/tenderlove">@tenderlove</a>, <a href="https://github.com/rafaelfranca">@rafaelfranca</a>)</li>
</ul>

<h2>[1.6.12] - 2019-12-08</h2>

<h3>Security</h3>

<ul>
<li>[<a href="https://nvd.nist.gov/vuln/detail/CVE-2019-16782">CVE-2019-16782</a>] Prevent timing attacks targeted at session ID lookup. BREAKING CHANGE: Session ID is now a SessionId instance instead of a String. (<a href="https://github.com/tenderlove">@tenderlove</a>, <a href="https://github.com/rafaelfranca">@rafaelfranca</a>)</li>
</ul>

<h2>[2.0.7] - 2019-04-02</h2>

<h3>Fixed</h3>

<ul>
<li>Remove calls to <code>#eof?</code> on <a href="Rack.html" title="Rack (module)"><code>Rack</code></a> input in <a href="Rack/Multipart/Parser.html" title="Rack::Multipart::Parser (class)"><code>Multipart::Parser</code></a>, as this breaks the specification. (<a href="https://github.com/matthewd">@matthewd</a>)</li>
<li>Preserve forwarded IP addresses for trusted proxy chains. (<a href="https://github.com/SamSaffron">@SamSaffron</a>)</li>
</ul>

<h2>[2.0.6] - 2018-11-05</h2>

<h3>Fixed</h3>

<ul>
<li>[<a href="https://nvd.nist.gov/vuln/detail/CVE-2018-16470">CVE-2018-16470</a>] Reduce buffer size of <a href="Rack/Multipart/Parser.html" title="Rack::Multipart::Parser (class)"><code>Multipart::Parser</code></a> to avoid pathological parsing. (<a href="https://github.com/tenderlove">@tenderlove</a>)</li>
<li>Fix a call to a non-existing method <code>#accepts_html</code> in the <a href="Rack/ShowExceptions.html" title="Rack::ShowExceptions (class)"><code>ShowExceptions</code></a> middleware. (<a href="https://github.com/tomelm">@tomelm</a>)</li>
<li>[<a href="https://nvd.nist.gov/vuln/detail/CVE-2018-16471">CVE-2018-16471</a>] Whitelist HTTP and HTTPS schemes in <code>Request#scheme</code> to prevent a possible XSS attack. (<a href="https://github.com/PatrickTulskie">@PatrickTulskie</a>)</li>
</ul>

<h2>[2.0.5] - 2018-04-23</h2>

<h3>Fixed</h3>

<ul>
<li>Record errors originating from invalid UTF8 in <a href="Rack/MethodOverride.html" title="Rack::MethodOverride (class)"><code>MethodOverride</code></a> middleware instead of breaking. (<a href="https://github.com/mclark">@mclark</a>)</li>
</ul>

<h2>[2.0.4] - 2018-01-31</h2>

<h3>Changed</h3>

<ul>
<li>Ensure the <a href="Rack/Lock.html" title="Rack::Lock (class)"><code>Lock</code></a> middleware passes the original <code>env</code> object. (<a href="https://github.com/lugray">@lugray</a>)</li>
<li>Improve performance of <a href="Rack/Multipart/Parser.html" title="Rack::Multipart::Parser (class)"><code>Multipart::Parser</code></a> when uploading large files. (<a href="https://github.com/tompng">@tompng</a>)</li>
<li>Increase buffer size in <a href="Rack/Multipart/Parser.html" title="Rack::Multipart::Parser (class)"><code>Multipart::Parser</code></a> for better performance. (<a href="https://github.com/jkowens">@jkowens</a>)</li>
<li>Reduce memory usage of <a href="Rack/Multipart/Parser.html" title="Rack::Multipart::Parser (class)"><code>Multipart::Parser</code></a> when uploading large files. (<a href="https://github.com/tompng">@tompng</a>)</li>
<li>Replace ConcurrentRuby dependency with native <code>Queue</code>. (<a href="https://github.com/devmchakan">@devmchakan</a>)</li>
</ul>

<h3>Fixed</h3>

<ul>
<li>Require the correct digest algorithm in the <a href="Rack/ETag.html" title="Rack::ETag (class)"><code>ETag</code></a> middleware. (<a href="https://github.com/matthewd">@matthewd</a>)</li>
</ul>

<h3>Documentation</h3>

<ul>
<li>Update homepage links to use SSL. (<a href="https://github.com/hugoabonizio">@hugoabonizio</a>)</li>
</ul>

<h2>[2.0.3] - 2017-05-15</h2>

<h3>Changed</h3>

<ul>
<li>Ensure <code>env</code> values are ASCII 8-bit encoded. (<a href="https://github.com/eileencodes">@eileencodes</a>)</li>
</ul>

<h3>Fixed</h3>

<ul>
<li>Prevent exceptions when a class with mixins inherits from <code>Session::Abstract::ID</code>. (<a href="https://github.com/jnraine">@jnraine</a>)</li>
</ul>

<h2>[2.0.2] - 2017-05-08</h2>

<h3>Added</h3>

<ul>
<li>Allow <code>Session::Abstract::SessionHash#fetch</code> to accept a block with a default value. (<a href="https://github.com/yannvanhalewyn">@yannvanhalewyn</a>)</li>
<li>Add <a href="Rack/Builder.html#freeze_app-instance_method" title="Rack::Builder#freeze_app (method)">Rack::Builder#freeze_app</a> to freeze application and all middleware. (<a href="https://github.com/jeremyevans" title="Jeremy Evans">@jeremyevans</a>)</li>
</ul>

<h3>Changed</h3>

<ul>
<li>Freeze default session options to avoid accidental mutation. (<a href="https://github.com/kirs">@kirs</a>)</li>
<li>Detect partial hijack without hash headers. (<a href="https://github.com/devmchakan">@devmchakan</a>)</li>
<li>Update tests to use MiniTest 6 matchers. (<a href="https://github.com/tonytonyjan">@tonytonyjan</a>)</li>
<li>Allow 205 Reset Content responses to set a Content-Length, as RFC 7231 proposes setting this to 0. (<a href="https://github.com/devmchakan">@devmchakan</a>)</li>
</ul>

<h3>Fixed</h3>

<ul>
<li>Handle <code>NULL</code> bytes in multipart filenames. (<a href="https://github.com/casperisfine">@casperisfine</a>)</li>
<li>Remove warnings due to miscapitalized global. (<a href="https://github.com/ioquatix" title="Samuel Williams">@ioquatix</a>)</li>
<li>Prevent exceptions caused by a race condition on multi-threaded servers. (<a href="https://github.com/sophiedeziel">@sophiedeziel</a>)</li>
<li>Add RDoc as an explicit dependency for <code>doc</code> group. (<a href="https://github.com/tonytonyjan">@tonytonyjan</a>)</li>
<li>Record errors originating from <a href="Rack/Multipart/Parser.html" title="Rack::Multipart::Parser (class)"><code>Multipart::Parser</code></a> in the <a href="Rack/MethodOverride.html" title="Rack::MethodOverride (class)"><code>MethodOverride</code></a> middleware instead of letting them bubble up. (<a href="https://github.com/carlzulauf">@carlzulauf</a>)</li>
<li>Remove remaining use of removed <code>Utils#bytesize</code> method from the <code>File</code> middleware. (<a href="https://github.com/brauliomartinezlm">@brauliomartinezlm</a>)</li>
</ul>

<h3>Removed</h3>

<ul>
<li>Remove <code>deflate</code> encoding support to reduce caching overhead. (<a href="https://github.com/devmchakan">@devmchakan</a>)</li>
</ul>

<h3>Documentation</h3>

<ul>
<li>Update broken example in <a href="Rack/Deflater.html" title="Rack::Deflater (class)"><code>Deflater</code></a> documentation. (<a href="https://github.com/mwpastore">@mwpastore</a>)</li>
</ul>

<h2>[2.0.1] - 2016-06-30</h2>

<h3>Changed</h3>

<ul>
<li>Remove JSON as an explicit dependency. (<a href="https://github.com/mperham">@mperham</a>)</li>
</ul>

<h1>History/News Archive</h1>

<p>Items below this line are from the previously maintained HISTORY.md and NEWS.md files.</p>

<h2>[2.0.0.rc1] 2016-05-06</h2>

<ul>
<li>Rack::Session::Abstract::ID is deprecated. Please change to use Rack::Session::Abstract::Persisted</li>
</ul>

<h2>[2.0.0.alpha] 2015-12-04</h2>

<ul>
<li>First-party &quot;SameSite&quot; cookies. Browsers omit SameSite cookies from third-party requests, closing the door on many CSRF attacks.</li>
<li>Pass <code>same_site: true</code> (or <code>:strict</code>) to enable: response.set_cookie &#39;foo&#39;, value: &#39;bar&#39;, same_site: true or <code>same_site: :lax</code> to use Lax enforcement: response.set_cookie &#39;foo&#39;, value: &#39;bar&#39;, same_site: <code>:lax</code></li>
<li>Based on version 7 of the Same-site Cookies internet draft:
<a href="https://tools.ietf.org/html/draft-west-first-party-cookies-07">https://tools.ietf.org/html/draft-west-first-party-cookies-07</a></li>
<li>Thanks to Ben Toews (@mastahyeti) and Bob Long (@bobjflong) for updating to drafts 5 and 7.</li>
<li>Add <a href="Rack/Events.html" title="Rack::Events (class)"><code>Events</code></a> middleware for adding event based middleware: middleware that does not care about the response body, but only cares about doing work at particular points in the request / response lifecycle.</li>
<li>Add <code>Rack::Request#authority</code> to calculate the authority under which the response is being made (this will be handy for h2 pushes).</li>
<li>Add <a href="Rack/Response/Helpers.html#cache_control-instance_method" title="Rack::Response::Helpers#cache_control (method)">Rack::Response::Helpers#cache_control</a> and <code>cache_control=</code>. Use this for setting cache control headers on your response objects.</li>
<li>Add <a href="Rack/Response/Helpers.html#etag-instance_method" title="Rack::Response::Helpers#etag (method)">Rack::Response::Helpers#etag</a> and <code>etag=</code>.  Use this for setting etag values on the response.</li>
<li>Introduce <a href="Rack/Response/Helpers.html#add_header-instance_method" title="Rack::Response::Helpers#add_header (method)">Rack::Response::Helpers#add_header</a> to add a value to a multi-valued response header. Implemented in terms of other <code>Response#*_header</code> methods, so it&#39;s available to any response-like class that includes the <code>Helpers</code> module.</li>
<li>Add <code>Rack::Request#add_header</code> to match.</li>
<li><code>Rack::Session::Abstract::ID</code> IS DEPRECATED.  Please switch to <code>Rack::Session::Abstract::Persisted</code>. <code>Rack::Session::Abstract::Persisted</code> uses a request object rather than the <code>env</code> hash.</li>
<li>Pull <code>ENV</code> access inside the request object in to a module.  This will help with legacy Request objects that are ENV based but don&#39;t want to inherit from <a href="Rack/Request.html" title="Rack::Request (class)"><code>Request</code></a></li>
<li>Move most methods on the <a href="Rack/Request.html" title="Rack::Request (class)"><code>Request</code></a> to a module <a href="Rack/Request/Helpers.html" title="Rack::Request::Helpers (module)"><code>Request::Helpers</code></a> and use public API to get values from the request object.  This enables users to mix <a href="Rack/Request/Helpers.html" title="Rack::Request::Helpers (module)"><code>Request::Helpers</code></a> in to their own objects so they can implement <code>(get|set|fetch|each)_header</code> as they see fit (for example a proxy object).</li>
<li>Files and directories with + in the name are served correctly. Rather than unescaping paths like a form, we unescape with a URI parser using <a href="Rack/Utils.html#unescape_path-class_method" title="Rack::Utils.unescape_path (method)">Rack::Utils.unescape_path</a>. Fixes #265</li>
<li>Tempfiles are automatically closed in the case that there were too
many posted.</li>
<li>Added methods for manipulating response headers that don&#39;t assume
they&#39;re stored as a Hash. Response-like classes may include the
Rack::Response::Helpers module if they define these methods:

<ul>
<li>Rack::Response#has_header?</li>
<li>Rack::Response#get_header</li>
<li>Rack::Response#set_header</li>
<li>Rack::Response#delete_header</li>
</ul></li>
<li>Introduce Util.get_byte_ranges that will parse the value of the HTTP_RANGE string passed to it without depending on the <code>env</code> hash. <code>byte_ranges</code> is deprecated in favor of this method.</li>
<li>Change Session internals to use Request objects for looking up session information. This allows us to only allocate one request object when dealing with session objects (rather than doing it every time we need to manipulate cookies, etc).</li>
<li>Add <code>Rack::Request#initialize_copy</code> so that the env is duped when the request gets duped.</li>
<li>Added methods for manipulating request specific data.  This includes
data set as CGI parameters, and just any arbitrary data the user wants
to associate with a particular request.  New methods:

<ul>
<li>Rack::Request#has_header?</li>
<li>Rack::Request#get_header</li>
<li>Rack::Request#fetch_header</li>
<li>Rack::Request#each_header</li>
<li>Rack::Request#set_header</li>
<li>Rack::Request#delete_header</li>
</ul></li>
<li>lib/rack/utils.rb: add a method for constructing &quot;delete&quot; cookie
headers.  This allows us to construct cookie headers without depending
on the side effects of mutating a hash.</li>
<li>Prevent extremely deep parameters from being parsed. CVE-2015-3225</li>
</ul>

<h2>[1.6.1] 2015-05-06</h2>

<ul>
<li>Fix CVE-2014-9490, denial of service attack in OkJson</li>
<li>Use a monotonic time for Rack::Runtime, if available</li>
<li>RACK_MULTIPART_LIMIT changed to RACK_MULTIPART_PART_LIMIT (RACK_MULTIPART_LIMIT is deprecated and will be removed in 1.7.0)</li>
</ul>

<h2>[1.5.3] 2015-05-06</h2>

<ul>
<li>Fix CVE-2014-9490, denial of service attack in OkJson</li>
<li>Backport bug fixes to 1.5 series</li>
</ul>

<h2>[1.6.0] 2014-01-18</h2>

<ul>
<li>Response#unauthorized? helper</li>
<li>Deflater now accepts an options hash to control compression on a per-request level</li>
<li>Builder#warmup method for app preloading</li>
<li>Request#accept_language method to extract HTTP_ACCEPT_LANGUAGE</li>
<li>Add quiet mode of rack server, rackup --quiet</li>
<li>Update HTTP Status Codes to RFC 7231</li>
<li>Less strict header name validation according to RFC 2616</li>
<li>SPEC updated to specify headers conform to RFC7230 specification</li>
<li>Etag correctly marks etags as weak</li>
<li>Request#port supports multiple x-http-forwarded-proto values</li>
<li>Utils#multipart_part_limit configures the maximum number of parts a request can contain</li>
<li>Default host to localhost when in development mode</li>
<li>Various bugfixes and performance improvements</li>
</ul>

<h2>[1.5.2] 2013-02-07</h2>

<ul>
<li>Fix CVE-2013-0263, timing attack against Rack::Session::Cookie</li>
<li>Fix CVE-2013-0262, symlink path traversal in Rack::File</li>
<li>Add various methods to Session for enhanced Rails compatibility</li>
<li>Request#trusted_proxy? now only matches whole strings</li>
<li>Add JSON cookie coder, to be default in Rack 1.6+ due to security concerns</li>
<li>URLMap host matching in environments that don&#39;t set the Host header fixed</li>
<li>Fix a race condition that could result in overwritten pidfiles</li>
<li>Various documentation additions</li>
</ul>

<h2>[1.4.5] 2013-02-07</h2>

<ul>
<li>Fix CVE-2013-0263, timing attack against Rack::Session::Cookie</li>
<li>Fix CVE-2013-0262, symlink path traversal in Rack::File</li>
</ul>

<h2>[1.1.6, 1.2.8, 1.3.10] 2013-02-07</h2>

<ul>
<li>Fix CVE-2013-0263, timing attack against Rack::Session::Cookie</li>
</ul>

<h2>[1.5.1] 2013-01-28</h2>

<ul>
<li>Rack::Lint check_hijack now conforms to other parts of SPEC</li>
<li>Added hash-like methods to Abstract::ID::SessionHash for compatibility</li>
<li>Various documentation corrections</li>
</ul>

<h2>[1.5.0] 2013-01-21</h2>

<ul>
<li>Introduced hijack SPEC, for before-response and after-response hijacking</li>
<li>SessionHash is no longer a Hash subclass</li>
<li>Rack::File cache_control parameter is removed, in place of headers options</li>
<li>Rack::Auth::AbstractRequest#scheme now yields strings, not symbols</li>
<li>Rack::Utils cookie functions now format expires in RFC 2822 format</li>
<li>Rack::File now has a default mime type</li>
<li>rackup -b &#39;run Rack::Files.new(&quot;.&quot;)&#39;, option provides command line configs</li>
<li>Rack::Deflater will no longer double encode bodies</li>
<li>Rack::Mime#match? provides convenience for Accept header matching</li>
<li>Rack::Utils#q_values provides splitting for Accept headers</li>
<li>Rack::Utils#best_q_match provides a helper for Accept headers</li>
<li>Rack::Handler.pick provides convenience for finding available servers</li>
<li>Puma added to the list of default servers (preferred over Webrick)</li>
<li>Various middleware now correctly close body when replacing it</li>
<li>Rack::Request#params is no longer persistent with only GET params</li>
<li>Rack::Request#update_param and #delete_param provide persistent operations</li>
<li>Rack::Request#trusted_proxy? now returns true for local unix sockets</li>
<li>Rack::Response no longer forces Content-Types</li>
<li>Rack::Sendfile provides local mapping configuration options</li>
<li>Rack::Utils#rfc2109 provides old netscape style time output</li>
<li>Updated HTTP status codes</li>
<li>Ruby 1.8.6 likely no longer passes tests, and is no longer fully supported</li>
</ul>

<h2>[1.4.4, 1.3.9, 1.2.7, 1.1.5] 2013-01-13</h2>

<ul>
<li>[SEC] Rack::Auth::AbstractRequest no longer symbolizes arbitrary strings</li>
<li>Fixed erroneous test case in the 1.3.x series</li>
</ul>

<h2>[1.4.3] 2013-01-07</h2>

<ul>
<li>Security: Prevent unbounded reads in large multipart boundaries</li>
</ul>

<h2>[1.3.8] 2013-01-07</h2>

<ul>
<li>Security: Prevent unbounded reads in large multipart boundaries</li>
</ul>

<h2>[1.4.2] 2013-01-06</h2>

<ul>
<li>Add warnings when users do not provide a session secret</li>
<li>Fix parsing performance for unquoted filenames</li>
<li>Updated URI backports</li>
<li>Fix URI backport version matching, and silence constant warnings</li>
<li>Correct parameter parsing with empty values</li>
<li>Correct rackup &#39;-I&#39; flag, to allow multiple uses</li>
<li>Correct rackup pidfile handling</li>
<li>Report rackup line numbers correctly</li>
<li>Fix request loops caused by non-stale nonces with time limits</li>
<li>Fix reloader on Windows</li>
<li>Prevent infinite recursions from Response#to_ary</li>
<li>Various middleware better conforms to the body close specification</li>
<li>Updated language for the body close specification</li>
<li>Additional notes regarding ECMA escape compatibility issues</li>
<li>Fix the parsing of multiple ranges in range headers</li>
<li>Prevent errors from empty parameter keys</li>
<li>Added PATCH verb to Rack::Request</li>
<li>Various documentation updates</li>
<li>Fix session merge semantics (fixes rack-test)</li>
<li>Rack::Static :index can now handle multiple directories</li>
<li>All tests now utilize Rack::Lint (special thanks to Lars Gierth)</li>
<li>Rack::File cache_control parameter is now deprecated, and removed by 1.5</li>
<li>Correct Rack::Directory script name escaping</li>
<li>Rack::Static supports header rules for sophisticated configurations</li>
<li>Multipart parsing now works without a Content-Length header</li>
<li>New logos courtesy of Zachary Scott!</li>
<li>Rack::BodyProxy now explicitly defines #each, useful for C extensions</li>
<li>Cookies that are not URI escaped no longer cause exceptions</li>
</ul>

<h2>[1.3.7] 2013-01-06</h2>

<ul>
<li>Add warnings when users do not provide a session secret</li>
<li>Fix parsing performance for unquoted filenames</li>
<li>Updated URI backports</li>
<li>Fix URI backport version matching, and silence constant warnings</li>
<li>Correct parameter parsing with empty values</li>
<li>Correct rackup &#39;-I&#39; flag, to allow multiple uses</li>
<li>Correct rackup pidfile handling</li>
<li>Report rackup line numbers correctly</li>
<li>Fix request loops caused by non-stale nonces with time limits</li>
<li>Fix reloader on Windows</li>
<li>Prevent infinite recursions from Response#to_ary</li>
<li>Various middleware better conforms to the body close specification</li>
<li>Updated language for the body close specification</li>
<li>Additional notes regarding ECMA escape compatibility issues</li>
<li>Fix the parsing of multiple ranges in range headers</li>
</ul>

<h2>[1.2.6] 2013-01-06</h2>

<ul>
<li>Add warnings when users do not provide a session secret</li>
<li>Fix parsing performance for unquoted filenames</li>
</ul>

<h2>[1.1.4] 2013-01-06</h2>

<ul>
<li>Add warnings when users do not provide a session secret</li>
</ul>

<h2>[1.4.1] 2012-01-22</h2>

<ul>
<li>Alter the keyspace limit calculations to reduce issues with nested params</li>
<li>Add a workaround for multipart parsing where files contain unescaped &quot;%&quot;</li>
<li>Added Rack::Response::Helpers#method_not_allowed? (code 405)</li>
<li>Rack::File now returns 404 for illegal directory traversals</li>
<li>Rack::File now returns 405 for illegal methods (non HEAD/GET)</li>
<li>Rack::Cascade now catches 405 by default, as well as 404</li>
<li>Cookies missing &#39;--&#39; no longer cause an exception to be raised</li>
<li>Various style changes and documentation spelling errors</li>
<li>Rack::BodyProxy always ensures to execute its block</li>
<li>Additional test coverage around cookies and secrets</li>
<li>Rack::Session::Cookie can now be supplied either secret or old_secret</li>
<li>Tests are no longer dependent on set order</li>
<li>Rack::Static no longer defaults to serving index files</li>
<li>Rack.release was fixed</li>
</ul>

<h2>[1.4.0] 2011-12-28</h2>

<ul>
<li>Ruby 1.8.6 support has officially been dropped. Not all tests pass.</li>
<li>Raise sane error messages for broken config.ru</li>
<li>Allow combining run and map in a config.ru</li>
<li>Rack::ContentType will not set Content-Type for responses without a body</li>
<li>Status code 205 does not send a response body</li>
<li>Rack::Response::Helpers will not rely on instance variables</li>
<li>Rack::Utils.build_query no longer outputs &#39;=&#39; for nil query values</li>
<li>Various mime types added</li>
<li>Rack::MockRequest now supports HEAD</li>
<li>Rack::Directory now supports files that contain RFC3986 reserved chars</li>
<li>Rack::File now only supports GET and HEAD requests</li>
<li>Rack::Server#start now passes the block to Rack::Handler::<h>#run</li>
<li>Rack::Static now supports an index option</li>
<li>Added the Teapot status code</li>
<li>rackup now defaults to Thin instead of Mongrel (if installed)</li>
<li>Support added for HTTP_X_FORWARDED_SCHEME</li>
<li>Numerous bug fixes, including many fixes for new and alternate rubies</li>
</ul>

<h2>[1.1.3] 2011-12-28</h2>

<ul>
<li>Security fix. <a href="http://www.ocert.org/advisories/ocert-2011-003.html">http://www.ocert.org/advisories/ocert-2011-003.html</a>
Further information here: <a href="http://jruby.org/2011/12/27/jruby-1-6-5-1">http://jruby.org/2011/12/27/jruby-1-6-5-1</a></li>
</ul>

<h2>[1.3.5] 2011-10-17</h2>

<ul>
<li>Fix annoying warnings caused by the backport in 1.3.4</li>
</ul>

<h2>[1.3.4] 2011-10-01</h2>

<ul>
<li>Backport security fix from 1.9.3, also fixes some roundtrip issues in URI</li>
<li>Small documentation update</li>
<li>Fix an issue where BodyProxy could cause an infinite recursion</li>
<li>Add some supporting files for travis-ci</li>
</ul>

<h2>[1.2.4] 2011-09-16</h2>

<ul>
<li>Fix a bug with MRI regex engine to prevent XSS by malformed unicode</li>
</ul>

<h2>[1.3.3] 2011-09-16</h2>

<ul>
<li>Fix bug with broken query parameters in Rack::ShowExceptions</li>
<li>Rack::Request#cookies no longer swallows exceptions on broken input</li>
<li>Prevents XSS attacks enabled by bug in Ruby 1.8&#39;s regexp engine</li>
<li>Rack::ConditionalGet handles broken If-Modified-Since helpers</li>
</ul>

<h2>[1.3.2] 2011-07-16</h2>

<ul>
<li>Fix for Rails and rack-test, Rack::Utils#escape calls to_s</li>
</ul>

<h2>[1.3.1] 2011-07-13</h2>

<ul>
<li>Fix 1.9.1 support</li>
<li>Fix JRuby support</li>
<li>Properly handle $KCODE in Rack::Utils.escape</li>
<li>Make method_missing/respond_to behavior consistent for Rack::Lock,
Rack::Auth::Digest::Request and Rack::Multipart::UploadedFile</li>
<li>Reenable passing rack.session to session middleware</li>
<li>Rack::CommonLogger handles streaming responses correctly</li>
<li>Rack::MockResponse calls close on the body object</li>
<li>Fix a DOS vector from MRI stdlib backport</li>
</ul>

<h2>[1.2.3] 2011-05-22</h2>

<ul>
<li>Pulled in relevant bug fixes from 1.3</li>
<li>Fixed 1.8.6 support</li>
</ul>

<h2>[1.3.0] 2011-05-22</h2>

<ul>
<li>Various performance optimizations</li>
<li>Various multipart fixes</li>
<li>Various multipart refactors</li>
<li>Infinite loop fix for multipart</li>
<li>Test coverage for Rack::Server returns</li>
<li>Allow files with &#39;..&#39;, but not path components that are &#39;..&#39;</li>
<li>rackup accepts handler-specific options on the command line</li>
<li>Request#params no longer merges POST into GET (but returns the same)</li>
<li>Use URI.encode_www_form_component instead. Use core methods for escaping.</li>
<li>Allow multi-line comments in the config file</li>
<li>Bug L#94 reported by Nikolai Lugovoi, query parameter unescaping.</li>
<li>Rack::Response now deletes Content-Length when appropriate</li>
<li>Rack::Deflater now supports streaming</li>
<li>Improved Rack::Handler loading and searching</li>
<li>Support for the PATCH verb</li>
<li>env[&#39;rack.session.options&#39;] now contains session options</li>
<li>Cookies respect renew</li>
<li>Session middleware uses SecureRandom.hex</li>
</ul>

<h2>[1.2.2, 1.1.2] 2011-03-13</h2>

<ul>
<li>Security fix in Rack::Auth::Digest::MD5: when authenticator
returned nil, permission was granted on empty password.</li>
</ul>

<h2>[1.2.1] 2010-06-15</h2>

<ul>
<li>Make CGI handler rewindable</li>
<li>Rename spec/ to test/ to not conflict with SPEC on lesser
operating systems</li>
</ul>

<h2>[1.2.0] 2010-06-13</h2>

<ul>
<li>Removed Camping adapter: Camping 2.0 supports Rack as-is</li>
<li>Removed parsing of quoted values</li>
<li>Add Request.trace? and Request.options?</li>
<li>Add mime-type for .webm and .htc</li>
<li>Fix HTTP_X_FORWARDED_FOR</li>
<li>Various multipart fixes</li>
<li>Switch test suite to bacon</li>
</ul>

<h2>[1.1.0] 2010-01-03</h2>

<ul>
<li>Moved Auth::OpenID to rack-contrib.</li>
<li>SPEC change that relaxes Lint slightly to allow subclasses of the
required types</li>
<li>SPEC change to document rack.input binary mode in greater detail</li>
<li>SPEC define optional rack.logger specification</li>
<li>File servers support X-Cascade header</li>
<li>Imported Config middleware</li>
<li>Imported ETag middleware</li>
<li>Imported Runtime middleware</li>
<li>Imported Sendfile middleware</li>
<li>New Logger and NullLogger middlewares</li>
<li>Added mime type for .ogv and .manifest.</li>
<li>Don&#39;t squeeze PATH_INFO slashes</li>
<li>Use Content-Type to determine POST params parsing</li>
<li>Update Rack::Utils::HTTP_STATUS_CODES hash</li>
<li>Add status code lookup utility</li>
<li>Response should call #to_i on the status</li>
<li>Add Request#user_agent</li>
<li>Request#host knows about forwarded host</li>
<li>Return an empty string for Request#host if HTTP_HOST and
SERVER_NAME are both missing</li>
<li>Allow MockRequest to accept hash params</li>
<li>Optimizations to HeaderHash</li>
<li>Refactored rackup into Rack::Server</li>
<li>Added Utils.build_nested_query to complement Utils.parse_nested_query</li>
<li>Added Utils::Multipart.build_multipart to complement
Utils::Multipart.parse_multipart</li>
<li>Extracted set and delete cookie helpers into Utils so they can be
used outside Response</li>
<li>Extract parse_query and parse_multipart in Request so subclasses
can change their behavior</li>
<li>Enforce binary encoding in RewindableInput</li>
<li>Set correct external_encoding for handlers that don&#39;t use RewindableInput</li>
</ul>

<h2>[1.0.1] 2009-10-18</h2>

<ul>
<li>Bump remainder of rack.versions.</li>
<li>Support the pure Ruby FCGI implementation.</li>
<li>Fix for form names containing &quot;=&quot;: split first then unescape components</li>
<li>Fixes the handling of the filename parameter with semicolons in names.</li>
<li>Add anchor to nested params parsing regexp to prevent stack overflows</li>
<li>Use more compatible gzip write api instead of &quot;&lt;&lt;&quot;.</li>
<li>Make sure that Reloader doesn&#39;t break when executed via ruby -e</li>
<li>Make sure WEBrick respects the :Host option</li>
<li>Many Ruby 1.9 fixes.</li>
</ul>

<h2>[1.0.0] 2009-04-25</h2>

<ul>
<li>SPEC change: Rack::VERSION has been pushed to [1,0].</li>
<li>SPEC change: header values must be Strings now, split on &quot;\n&quot;.</li>
<li>SPEC change: Content-Length can be missing, in this case chunked transfer
encoding is used.</li>
<li>SPEC change: rack.input must be rewindable and support reading into
a buffer, wrap with Rack::RewindableInput if it isn&#39;t.</li>
<li>SPEC change: rack.session is now specified.</li>
<li>SPEC change: Bodies can now additionally respond to #to_path with
a filename to be served.</li>
<li>NOTE: String bodies break in 1.9, use an Array consisting of a
single String instead.</li>
<li>New middleware Rack::Lock.</li>
<li>New middleware Rack::ContentType.</li>
<li>Rack::Reloader has been rewritten.</li>
<li>Major update to Rack::Auth::OpenID.</li>
<li>Support for nested parameter parsing in Rack::Response.</li>
<li>Support for redirects in Rack::Response.</li>
<li>HttpOnly cookie support in Rack::Response.</li>
<li>The Rakefile has been rewritten.</li>
<li>Many bugfixes and small improvements.</li>
</ul>

<h2>[0.9.1] 2009-01-09</h2>

<ul>
<li>Fix directory traversal exploits in Rack::File and Rack::Directory.</li>
</ul>

<h2>[0.9] 2009-01-06</h2>

<ul>
<li>Rack is now managed by the Rack Core Team.</li>
<li>Rack::Lint is stricter and follows the HTTP RFCs more closely.</li>
<li>Added ConditionalGet middleware.</li>
<li>Added ContentLength middleware.</li>
<li>Added Deflater middleware.</li>
<li>Added Head middleware.</li>
<li>Added MethodOverride middleware.</li>
<li>Rack::Mime now provides popular MIME-types and their extension.</li>
<li>Mongrel Header now streams.</li>
<li>Added Thin handler.</li>
<li>Official support for swiftiplied Mongrel.</li>
<li>Secure cookies.</li>
<li>Made HeaderHash case-preserving.</li>
<li>Many bugfixes and small improvements.</li>
</ul>

<h2>[0.4] 2008-08-21</h2>

<ul>
<li>New middleware, Rack::Deflater, by Christoffer Sawicki.</li>
<li>OpenID authentication now needs ruby-openid 2.</li>
<li>New Memcache sessions, by blink.</li>
<li>Explicit EventedMongrel handler, by Joshua Peek <a href="mailto:josh@joshpeek.com">josh@joshpeek.com</a></li>
<li>Rack::Reloader is not loaded in rackup development mode.</li>
<li>rackup can daemonize with -D.</li>
<li>Many bugfixes, especially for pool sessions, URLMap, thread safety
and tempfile handling.</li>
<li>Improved tests.</li>
<li>Rack moved to Git.</li>
</ul>

<h2>[0.3] 2008-02-26</h2>

<ul>
<li>LiteSpeed handler, by Adrian Madrid.</li>
<li>SCGI handler, by Jeremy Evans.</li>
<li>Pool sessions, by blink.</li>
<li>OpenID authentication, by blink.</li>
<li>:Port and :File options for opening FastCGI sockets, by blink.</li>
<li>Last-Modified HTTP header for Rack::File, by blink.</li>
<li>Rack::Builder#use now accepts blocks, by Corey Jewett.
(See example/protectedlobster.ru)</li>
<li>HTTP status 201 can contain a Content-Type and a body now.</li>
<li>Many bugfixes, especially related to Cookie handling.</li>
</ul>

<h2>[0.2] 2007-05-16</h2>

<ul>
<li>HTTP Basic authentication.</li>
<li>Cookie Sessions.</li>
<li>Static file handler.</li>
<li>Improved Rack::Request.</li>
<li>Improved Rack::Response.</li>
<li>Added Rack::ShowStatus, for better default error messages.</li>
<li>Bug fixes in the Camping adapter.</li>
<li>Removed Rails adapter, was too alpha.</li>
</ul>

<h2>[0.1] 2007-03-03</h2>

<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>