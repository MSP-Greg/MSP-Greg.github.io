<!DOCTYPE html>
<html>
<head>

<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>File: Templates Architecture &mdash; YARD main</title>

<link rel='stylesheet'  type='text/css' href='../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "Templates",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='.'>YARD main</a> &raquo; 
      <a href='_index.html'>Index</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>File: Templates Architecture&nbsp;&#x25B2;</a></span>
          </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='file'>
<h1>Templates Architecture</h1>

<p>Templates are the main component in the output rendering process of <a href="YARD.html" title="YARD (module)"><code>YARD</code></a>,
which is invoked when conventional HTML/text output needs to be rendered
for a set of code objects.</p>

<h2>Design Goals</h2>

<p>The general design attempts to be as abstracted from actual content and templates
as possible. Unlike RDoc which uses one file to describe the entire template,
<a href="YARD.html" title="YARD (module)"><code>YARD</code></a> splits up the rendering of code objects into small components, allowing
template modification for smaller subsets of a full template without having to
duplicate the entire template itself. This is necessary because of YARD&#39;s support
for plugins. <a href="YARD.html" title="YARD (module)"><code>YARD</code></a> is designed for extensibility by external plugins, and because
of this, no one plugin can be responsible for the entire template because no
one plugin knows about the other plugins being used. For instance, if an RSpec
plugin was added to support and document specifications in class templates,
this information would need to be transparently added to the template to work
in conjunction with any other plugin that performed similar template modifications.
The design goals can be summarized as follows:</p>

<ol>
<li>Output should be able to be rendered for any arbitrary format with little
 modification to YARD&#39;s source code. The addition of extra templates should
 be sufficient.</li>
<li>The output rendered for an object should independently rendered data
 from arbitrary sources. These independent components are called &quot;sections&quot;.</li>
<li>Sections should be able to be inserted into any object without affecting
 any existing sections in the document. This allows for easy modification
 of templates by plugins.</li>
</ol>

<h2>Templates</h2>

<p>Template modules are the objects used to orchestrate the design goals listed
above. Specifically, they organize the sections and render the template contents
depending on the format.</p>

<h2>Engine</h2>

<p>The Engine class orchestrates the creation and rendering of Template modules and
handles serialization or specific rendering scenarios (like HTML). To create
a template, use the <a href="YARD/Templates/Engine.html#template-class_method" title="YARD::Templates::Engine.template (method)">template</a> method. The two most
common methods used to initiate output are the <a href="YARD/Templates/Engine.html#render-class_method" title="YARD::Templates::Engine.render (method)">render</a>
and <a href="YARD/Templates/Engine.html#generate-class_method" title="YARD::Templates::Engine.generate (method)">generate</a> methods which generate and
optionally serialize output to a file. The latter, <code>#generate</code>, is used
specially to generate HTML documentation and copy over assets that may be
needed. For instance, an object may be rendered with:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="YARD.html" title="YARD (module)">YARD</a></span><span class='op'>::</span><span class='const'><a href="YARD/Templates.html" title="YARD::Templates (module)">Templates</a></span><span class='op'>::</span><span class='const'><a href="YARD/Templates/Engine.html" title="YARD::Templates::Engine (module)">Engine</a></span>.<span class='id identifier rubyid_render'><a href="YARD/Templates/Engine.html#render-class_method" title="YARD::Templates::Engine.render (method)">render</a></span>(<span class='symbeg'>:</span><span class='id identifier rubyid_object'>object</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_myobject'>myobject</span>)</code></pre>

<p>A set of objects may be rendered into HTML documentation by using:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># all_objects is an array of module and class objects
</span><span class='comment'># options includes a :serializer key to copy output to the file system
</span><span class='const'><a href="YARD.html" title="YARD (module)">YARD</a></span><span class='op'>::</span><span class='const'><a href="YARD/Templates.html" title="YARD::Templates (module)">Templates</a></span><span class='op'>::</span><span class='const'><a href="YARD/Templates/Engine.html" title="YARD::Templates::Engine (module)">Engine</a></span>.<span class='id identifier rubyid_generate'><a href="YARD/Templates/Engine.html#generate-class_method" title="YARD::Templates::Engine.generate (method)">generate</a></span>(<span class='id identifier rubyid_all_objects'>all_objects</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>)</code></pre>

<p>Note that these methods should not be called directly. The <a href="YARD/CodeObjects/Base.html" title="YARD::CodeObjects::Base (class)"><code>::YARD::CodeObjects::Base</code></a>
class has a <a href="YARD/CodeObjects/Base.html#format-instance_method" title="YARD::CodeObjects::Base#format (method)">#format</a> helper method to render an
object. For instance, the above render example is equivalent to the simple
call <code>myobject.format</code>. The <code>generate</code> method is a special kind of render
and is called from the <a href="YARD/CLI/Yardoc.html" title="YARD::CLI::Yardoc (class)"><code>::YARD::CLI::Yardoc</code></a> command line utility.</p>

<h2>Template Options</h2>

<p>A template keeps state when it is rendering output. This state is kept in
an options hash which is initially passed to it during instantiation. Some
default options set the template style (<code>:template</code>), the output format (<code>:format</code>),
and the serializer to use (<code>:serializer</code>). This options hash is modifiable
from all methods seen above. For example, initializing a template to output as
HTML instead of text can be done as follows:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_myobject'>myobject</span>.<span class='id identifier rubyid_format'>format</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_format'>format</span> <span class='op'>=&gt;</span> <span class='symbeg'>:</span><span class='id identifier rubyid_html'>html</span>)</code></pre>

<h2>Serializer</h2>

<p>This class abstracts the logic involved in deciding how to serialize data to
the expected endpoint. For instance, there is both a <a href="YARD/Serializers/StdoutSerializer.html" title="YARD::Serializers::StdoutSerializer (class)">StdoutSerializer</a>
and <a href="YARD/Serializers/FileSystemSerializer.html" title="YARD::Serializers::FileSystemSerializer (class)">FileSystemSerializer</a> class for
outputting to console or to a file respectively. When endpoints with locations
are used (like files or URLs), the serializer implements the <a href="YARD/Serializers/Base.html#serialized_path-instance_method" title="YARD::Serializers::Base#serialized_path (method)">#serialized_path</a>
method. This allows the translation from a code object to its path at the endpoint,
which enables inter-document linking.</p>

<p>Rendered objects are automatically serialized using the object if present,
otherwise the rendered object is returned as a string to its parent. Nested
Templates automatically set the serializer to nil so that they return
as a <a href="String.html" title="String (class)"><code>String</code></a> to their parent.</p>

<h2>Creating a Template</h2>

<p>Templates are represented by a directory inside the <a href="YARD/Templates/Engine.html#template_paths-class_method" title="YARD::Templates::Engine.template_paths (method)">YARD::Templates::Engine.template_paths</a>
on disk. A standard template directory looks like the following tree:</p>

<pre class="code ruby"><code class="ruby">(<span class='const'>Assuming</span> <span class='id identifier rubyid_templates'>templates</span><span class='op'>/</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_a'>a</span> <span class='id identifier rubyid_template'>template</span> <span class='id identifier rubyid_path'>path</span>)
<span class='id identifier rubyid_templates'>templates</span>
<span class='backtick'>`</span><span class='tstring_content'>-- default
    |-- class
    |   |-- dot
    |   |   |-- setup.rb
    |   |   </span><span class='tstring_end'>`</span></span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_superklass'>superklass</span>.<span class='id identifier rubyid_erb'>erb</span>
    <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_html'>html</span>
    <span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_constructor_details'>constructor_details</span>.<span class='id identifier rubyid_erb'>erb</span>
    <span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_setup'>setup</span>.<span class='id identifier rubyid_rb'>rb</span>
    <span class='op'>|</span>   <span class='op'>|</span>   <span class='backtick'>`</span><span class='tstring_content'>-- subclasses.erb
    |   |-- setup.rb
    |   </span><span class='tstring_end'>`</span></span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_text'>text</span>
    <span class='op'>|</span>       <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_setup'>setup</span>.<span class='id identifier rubyid_rb'>rb</span>
    <span class='op'>|</span>       <span class='backtick'>`</span><span class='tstring_content'>-- subclasses.erb
    |-- docstring
    |   |-- html
    |   |   |-- abstract.erb
    |   |   |-- deprecated.erb
    |   |   |-- index.erb
    |   |   </span><span class='tstring_end'>`</span></span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_text'>text</span>.<span class='id identifier rubyid_erb'>erb</span>
    <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_setup'>setup</span>.<span class='id identifier rubyid_rb'>rb</span>
    <span class='op'>|</span>   <span class='backtick'>`</span><span class='tstring_content'>-- text
    |       |-- abstract.erb
    |       |-- deprecated.erb
    |       |-- index.erb
    |       </span><span class='tstring_end'>`</span></span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_text'>text</span>.<span class='id identifier rubyid_erb'>erb</span></code></pre>

<p>The path <code>default</code> refers to the template style (:template key in options hash)
and the directories at the next level (such as <code>class</code>) refer to template
<code>:type</code> (options hash key) for a template. The next directory refers to the
output format being used defined by the <code>:format</code> template option.</p>

<p>As we saw in the above example, the format option can be set to <code>:html</code>, which
would use the <code>html/</code> directory instead of <code>text/</code>. Finally, the individual .erb
files are the sections that make up the template.</p>

<p>Note that the subdirectory <code>html/</code> is also its own &quot;template&quot; that inherits
from the parent directory. We will see more on this later.</p>

<h2>setup.rb</h2>

<p>Every template should have at least one <code>setup.rb</code> file that defines the
<a href="YARD/Templates/Template.html#init-instance_method" title="YARD::Templates::Template#init (method)">#init</a> method to set the
<a href="YARD/Templates/Template.html#sections-instance_method" title="YARD::Templates::Template#sections (method)">#sections</a> used by the template. If
a setup.rb is not defined in the template itself, there should be a template
that is inherited (via parent directory or explicitly) that sets the sections
on a newly created template.</p>

<p>A standard setup.rb file looks like:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_init'>init</span>
  <span class='id identifier rubyid_sections'>sections</span> <span class='symbeg'>:</span><span class='id identifier rubyid_section1'>section1</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_section2'>section2</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_section3'>section3</span>
<span class='kw'>end</span></code></pre>

<h2>Sections</h2>

<p>Sections are smaller components that correlate to template
fragments. Practically speaking, a section can either be a template fragment
(a conventional .erb file or other supported templating language), a method
(which returns a <a href="String.html" title="String (class)"><code>String</code></a>) or another <a href="YARD/Templates/Template.html" title="YARD::Templates::Template (module)"><code>::YARD::Templates::Template</code></a> (which in turn has its own
list of sections).</p>

<h2>Nested Sections</h2>

<p>Sections often require the ability to encapsulate a set of sub-sections in markup
(HTML, for instance). Rather than use heavier Template subclass objects, a more
lightweight solution is to nest a set of sub-sections as a list that follows
a section, for example:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_init'>init</span>
  <span class='id identifier rubyid_sections'>sections</span> <span class='symbeg'>:</span><span class='id identifier rubyid_header'>header</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_section_a'>section_a</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_section_b'>section_b</span>]
<span class='kw'>end</span></code></pre>

<p>The above example nests <code>section_a</code> and <code>section_b</code> within the <code>header</code> section.
Practically speaking, these sections can be placed in the result by <code>yield</code>ing
to them. A sample header.erb template might contain:</p>

<pre class="code xml"><code class="xml">&lt;h2&gt;Header&lt;/h2&gt;
&lt;div id=&quot;contents&quot;&gt;
  &lt;%= yieldall %&gt;
&lt;/div&gt;
</code></pre>

<p>This template code would place the output of <code>section_a</code> and <code>section_b</code> within
the above div element. Using <code>yieldall</code>, we can also change the object that is being
rendered. For example, we may want to yield the first method of the class.
We can do this like so:</p>

<pre class="code xml"><code class="xml">&lt;h2&gt;First method&lt;/h2&gt;
&lt;%= yieldall :object =&gt; object.meths.first %&gt;
</code></pre>

<p>This would run the nested sections for the method object instead of the class.</p>

<p>Note that <code>yieldall</code> yields to all subsections, whereas <code>yield</code> will yield
to each individually (in order) until there are no more left to yield to.
In the vast majority of cases, you&#39;d want to use <code>yieldall</code>, since <code>yield</code>
makes it hard for users to override your template.</p>

<h2>Inheriting Templates</h2>

<p>Parent directory templates are automatically inherited (or mixed in, to be
more accurate) by the current template. This means that the &#39;default/class/html&#39;
template automatically inherits from &#39;default/class&#39;. This also means that anything
defined in &#39;default/class/setup.rb&#39; can be overridden by &#39;default/class/html/setup.rb&#39;.</p>

<p>Since the Template module is a module, and not a class, they can be mixed in
explicitly (via include/extend) from other templates, which allows templates
to share erb files or helper logic. The &#39;default/class&#39; template explicitly
mixes in the &#39;default/module&#39; template, since it uses much of the same sections.
This is done with the helper <a href="YARD/Templates/Template/ClassMethods.html#T-instance_method" title="YARD::Templates::Template::ClassMethods#T (method)">T</a> method, which
is simply a shorthand for <a href="YARD/Templates/Engine.html#template-class_method" title="YARD::Templates::Engine.template (method)">Engine.template</a>.
It can then override (using standard inheritance) the sections from the module
template and insert sections pertaining to classes. This is one of the design
goals described above.</p>

<p>For instance, the first line in <code>default/class/html/setup.rb</code> is:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_include'>include</span> <span class='const'>T</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>default/module/html</span><span class='tstring_end'>&#39;</span></span>)</code></pre>

<p>This includes the &#39;default/module/html&#39;, which means it also includes &#39;default/module&#39;
by extension. This allows class to make use of any of module&#39;s erb files.</p>

<h2>Inserting and Traversing Sections</h2>

<p>The ability to insert sections was mentioned above. The class template, for
instance, will modify the #init method to insert class specific sections:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_init'>init</span>
  <span class='kw'>super</span>
  <span class='id identifier rubyid_sections'>sections</span>.<span class='id identifier rubyid_place'>place</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_subclasses'>subclasses</span>).<span class='id identifier rubyid_before'>before</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_children'>children</span>)
  <span class='id identifier rubyid_sections'>sections</span>.<span class='id identifier rubyid_delete'>delete</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_children'>children</span>)
  <span class='id identifier rubyid_sections'>sections</span>.<span class='id identifier rubyid_place'>place</span>([<span class='symbeg'>:</span><span class='id identifier rubyid_constructor_details'>constructor_details</span><span class='comma'>,</span> [<span class='const'>T</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>method_details</span><span class='tstring_end'>&#39;</span></span>)]]).<span class='id identifier rubyid_before'>before</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_methodmissing'>methodmissing</span>)
<span class='kw'>end</span></code></pre>

<p>Observe how sections has been modified after the super method was called (the
super method would have been defined in <code>default/module/setup.rb</code>). The
<code>sections</code> object is of the <a href="YARD/Templates/Section.html" title="YARD::Templates::Section (class)"><code>::YARD::Templates::Section</code></a> class and allows sections to be inserted
before or after another section using <a href="Array.html#place-instance_method" title="Array#place (method)">Array#place</a> by it&#39;s given name rather
than index. This allows the overriding of templates in a way that does not
depend on where the section is located (since it may have been overridden by
another module).</p>

<p>You can also use <code>sections[:name]</code> to find the first child section named <code>:name</code>.
For instance, with the following sections declaration:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_sections'>sections</span> <span class='symbeg'>:</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_b'>b</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_c'>c</span><span class='comma'>,</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_d'>d</span>]]</code></pre>

<p>You can get to the <code>:d</code> section with:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_sections'>sections</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_a'>a</span>][<span class='symbeg'>:</span><span class='id identifier rubyid_c'>c</span>][<span class='symbeg'>:</span><span class='id identifier rubyid_d'>d</span>]</code></pre>

<p>You can use this to insert a section inside a nested set without using indexed
access. The following command would result in <code>[:a, [:b, &lt;code&gt;:c&lt;/code&gt;, [:d, :e]]]</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_sections'>sections</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_a'>a</span>][<span class='symbeg'>:</span><span class='id identifier rubyid_c'>c</span>].<span class='id identifier rubyid_place'>place</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_e'>e</span>).<span class='id identifier rubyid_after'>after</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_d'>d</span>)</code></pre>

<p>There are also two methods, <a href="Insertion.html#before_any-instance_method" title="Insertion#before_any (method)">Insertion#before_any</a> and <a href="Insertion.html#after_any-instance_method" title="Insertion#after_any (method)">Insertion#after_any</a>,
which allow you to insert sections before or after the first matching section name
recursively. The above example could simply be rewritten as:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_sections'>sections</span>.<span class='id identifier rubyid_place'>place</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_e'>e</span>).<span class='id identifier rubyid_after_any'>after_any</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_d'>d</span>)</code></pre>

<h2>Overriding Templates by Registering a Template Path</h2>

<p>Inheriting templates explicitly is useful when creating a customized template
that wants to take advantage of code re-use. However, most users who want
to customize <a href="YARD.html" title="YARD (module)"><code>YARD</code></a> templates will want to override existing behaviour without
creating a template from scratch.</p>

<p><a href="YARD.html" title="YARD (module)"><code>YARD</code></a> solves this problem by allowing other template paths to be registered.
Because template modules are represented by a relative path such as &#39;default/class&#39;,
they can be found within any of the registered template paths. A new template
path is registered as:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="YARD.html" title="YARD (module)">YARD</a></span><span class='op'>::</span><span class='const'><a href="YARD/Templates.html" title="YARD::Templates (module)">Templates</a></span><span class='op'>::</span><span class='const'><a href="YARD/Templates/Engine.html" title="YARD::Templates::Engine (module)">Engine</a></span>.<span class='id identifier rubyid_register_template_path'><a href="YARD/Templates/Engine.html#register_template_path-class_method" title="YARD::Templates::Engine.register_template_path (method)">register_template_path</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/path/to/mytemplates</span><span class='tstring_end'>&#39;</span></span></code></pre>

<p>At this point, any time the &#39;default/class&#39; template is loaded, the template
will first be looked for inside the newly registered template path. If found,
it will be used as the template module, with the modules from the other
template paths implicitly mixed in.</p>

<p>Therefore, by using the same directory structure as a builtin <a href="YARD.html" title="YARD (module)"><code>YARD</code></a> template,
a user can customize or override individual templates as if the old ones were
inherited. A real world example would further modify the &#39;default/class&#39; template
seen above by creating such a path in our &#39;/path/to/mytemplates&#39; custom template
path:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>path</span><span class='regexp_end'>/to</span></span><span class='op'>/</span><span class='id identifier rubyid_mytemplates'>mytemplates</span><span class='op'>/</span><span class='op'>:</span>
<span class='op'>|</span><span class='op'>-</span><span class='op'>-</span><span class='id identifier rubyid_default'>default</span>
<span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='kw'>class</span>
<span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_html'>html</span>
<span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_customsection'>customsection</span>.<span class='id identifier rubyid_erb'>erb</span>
<span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_setup'>setup</span>.<span class='id identifier rubyid_rb'>rb</span></code></pre>

<p>The <code>setup.rb</code> file would look like:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_init'>init</span>
  <span class='kw'>super</span>
  <span class='id identifier rubyid_sections'>sections</span>.<span class='id identifier rubyid_push'>push</span> <span class='symbeg'>:</span><span class='id identifier rubyid_customsection'>customsection</span>
<span class='kw'>end</span></code></pre>

<p>Now, when a class object is formatted as HTML, our customsection.erb will be
appended to the rendered data.</p>

<h3>Overriding Stylesheets and Javascripts</h3>

<p>Template authors can override existing stylesheets and javascripts by creating
a file with the same name as existing files within the <code>fulldoc</code> template. The
documentation output will utilize the new replacement file.</p>

<p>YARD&#39;s <code>fulldoc</code> template defines three stylesheets:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>yard</span><span class='regexp_end'>/templates</span></span><span class='op'>/</span><span class='id identifier rubyid_default'>default</span><span class='op'>/</span><span class='op'>:</span>
<span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_fulldoc'>fulldoc</span>
<span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_html'>html</span>
<span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_css'>css</span>
<span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_common'>common</span>.<span class='id identifier rubyid_css'>css</span>
<span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_full_list'>full_list</span>.<span class='id identifier rubyid_css'>css</span>
<span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_style'>style</span>.<span class='id identifier rubyid_css'>css</span></code></pre>

<p>The <code>style.css</code> is the primary stylesheet for the HTML output.</p>

<p>The <code>full_list.css</code> is an additional stylesheet loaded specifically for the
search field menus (i.e. class list, method list, and file list).</p>

<p>The <code>common.css</code> is an empty css file that an template author can easily override
to provide custom styles for their plugin. However, if a user installs multiple
plugins that utilize this same file to deliver styles, it is possible that they
will be overridden.</p>

<p>YARD&#39;s <code>fulldoc</code> template defines three javascript files:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>yard</span><span class='regexp_end'>/templates</span></span><span class='op'>/</span><span class='id identifier rubyid_default'>default</span><span class='op'>/</span><span class='op'>:</span>
<span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_fulldoc'>fulldoc</span>
<span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_html'>html</span>
<span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_js'>js</span>
<span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_app'>app</span>.<span class='id identifier rubyid_js'>js</span>
<span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_full_list'>full_list</span>.<span class='id identifier rubyid_js'>js</span>
<span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_jquery'>jquery</span>.<span class='id identifier rubyid_js'>js</span></code></pre>

<p>The <code>app.js</code> is the primary javascript file for the HTML output.</p>

<p>The <code>full_list.js</code> defines additional javascript loaded specifically for the
search field menus (i.e. class list, method list, and file list).</p>

<p>The <code>jquery.js</code> is copy of the jquery javascript library.</p>

<h3>Adding a Custom Stylesheet or Javascript</h3>

<p>To load additional stylesheets and javascripts with every page (except the search
field menus) generated from the base <code>layout</code> template:</p>

<ol>
<li><p>Define your own custom stylesheet and/or javascript file
 (default/ is the default template name inside of the /template root directory):</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>template</span><span class='regexp_end'>/default</span></span><span class='op'>/</span><span class='op'>:</span>
<span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_fulldoc'>fulldoc</span>
<span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_html'>html</span>
<span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_css'>css</span>
<span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_custom'>custom</span>.<span class='id identifier rubyid_css'>css</span>
<span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_js'>js</span>
<span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_custom'>custom</span>.<span class='id identifier rubyid_js'>js</span></code></pre></li>
<li><p>Create a <code>setup.rb</code> in the <code>layout</code> template directory and override the methods
 <code>stylesheets</code> and <code>javascripts</code>. The path to the template would be:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>template</span><span class='regexp_end'>/default</span></span><span class='op'>/</span><span class='op'>:</span>
<span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_layout'>layout</span>
<span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_html'>html</span>
<span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_setup'>setup</span>.<span class='id identifier rubyid_rb'>rb</span></code></pre>

<p>And the code would look like:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_stylesheets'>stylesheets</span>
  <span class='comment'># Load the existing stylesheets while appending the custom one
</span>  <span class='kw'>super</span> <span class='op'>+</span> <span class='qwords'><span class='qwords_beg'>%w(</span><span class='tstring_content'>css/custom.css</span><span class='tstring_end'>)</span></span>
<span class='kw'>end</span>

<span class='kw'>def</span> <span class='id identifier rubyid_javascripts'>javascripts</span>
  <span class='comment'># Load the existing javascripts while appending the custom one
</span>  <span class='kw'>super</span> <span class='op'>+</span> <span class='qwords'><span class='qwords_beg'>%w(</span><span class='tstring_content'>js/custom.js</span><span class='tstring_end'>)</span></span>
<span class='kw'>end</span></code></pre></li>
</ol>

<p>To load additional stylesheets and javascripts for the search menus loaded from
the <code>fulldoc</code> template:</p>

<ol>
<li><p>Define your own custom stylesheet and/or javascript file.</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>path</span><span class='regexp_end'>/to</span></span><span class='op'>/</span><span class='id identifier rubyid_mytemplates'>mytemplates</span><span class='op'>/</span><span class='op'>:</span>
<span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_fulldoc'>fulldoc</span>
<span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_html'>html</span>
<span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_css'>css</span>
<span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_custom_full_menu'>custom_full_menu</span>.<span class='id identifier rubyid_css'>css</span>
<span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_js'>js</span>
<span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_custom_full_menu'>custom_full_menu</span>.<span class='id identifier rubyid_js'>js</span></code></pre></li>
<li><p>Override the methods <code>stylesheets_full_list</code> and <code>javascripts_full_list</code>
 in the <code>setup.rb</code> file inside fulldoc/html.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_stylesheets_full_list'>stylesheets_full_list</span>
  <span class='comment'># Load the existing stylesheets while appending the custom one
</span>  <span class='kw'>super</span> <span class='op'>+</span> <span class='qwords'><span class='qwords_beg'>%w(</span><span class='tstring_content'>css/custom.css</span><span class='tstring_end'>)</span></span>
<span class='kw'>end</span>

<span class='kw'>def</span> <span class='id identifier rubyid_javascripts_full_list'>javascripts_full_list</span>
  <span class='comment'># Load the existing javascripts while appending the custom one
</span>  <span class='kw'>super</span> <span class='op'>+</span> <span class='qwords'><span class='qwords_beg'>%w(</span><span class='tstring_content'>js/custom.js</span><span class='tstring_end'>)</span></span>
<span class='kw'>end</span></code></pre></li>
</ol>

<h3>Overriding Search Menus</h3>

<p>By default YARD&#39;s <code>fulldoc</code> template generates three search fields:</p>

<ul>
<li>Class List</li>
<li>Method List</li>
<li>File List</li>
</ul>

<p>Their contents are rendered in methods within the <code>fulldoc</code> template:</p>

<ul>
<li><code>generate_class_list</code></li>
<li><code>generate_method_list</code></li>
<li><code>generate_file_list</code></li>
</ul>

<p>To override these lists you will need to:</p>

<ol>
<li><p>Create a <code>setup.rb</code> in the <code>fulldoc</code> template directory and override the
 particular method.</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>path</span><span class='regexp_end'>/to</span></span><span class='op'>/</span><span class='id identifier rubyid_mytemplates'>mytemplates</span><span class='op'>/</span><span class='op'>:</span>
<span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_fulldoc'>fulldoc</span>
<span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_html'>html</span>
<span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_setup'>setup</span>.<span class='id identifier rubyid_rb'>rb</span>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_method_list'>generate_method_list</span>
  <span class='ivar'>@items</span> <span class='op'>=</span> <span class='id identifier rubyid_prune_method_listing'>prune_method_listing</span>(<span class='const'>Registry</span>.<span class='id identifier rubyid_all'>all</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_method'>method</span>)<span class='comma'>,</span> <span class='kw'>false</span>)
  <span class='ivar'>@items</span> <span class='op'>=</span> <span class='ivar'>@items</span>.<span class='id identifier rubyid_reject'>reject</span> {<span class='op'>|</span><span class='id identifier rubyid_m'>m</span><span class='op'>|</span> <span class='id identifier rubyid_m'>m</span>.<span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>=$</span><span class='regexp_end'>/</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_m'>m</span>.<span class='id identifier rubyid_is_attribute?'>is_attribute?</span> }

  <span class='comment'># Here we changed the functionality to reverse the order of displayed methods
</span>  <span class='ivar'>@items</span> <span class='op'>=</span> <span class='ivar'>@items</span>.<span class='id identifier rubyid_sort_by'>sort_by</span> {<span class='op'>|</span><span class='id identifier rubyid_m'>m</span><span class='op'>|</span> <span class='id identifier rubyid_m'>m</span>.<span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_to_s'>to_s</span> }.<span class='id identifier rubyid_reverse'>reverse</span>
  <span class='ivar'>@list_title</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Method List</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@list_type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>methods</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_asset'>asset</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>method_list.html</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_erb'>erb</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_full_list'>full_list</span>))
<span class='kw'>end</span></code></pre></li>
</ol>

<h3>Adding Additional Search Menus</h3>

<p>By default YARD&#39;s <code>fulldoc</code> template generates three search fields:</p>

<ul>
<li>Class List</li>
<li>Method List</li>
<li>File List</li>
</ul>

<p>These are defined in the <code>layout</code> template method <code>menu_lists</code> and pulled into
the <code>fulldoc</code> template through a similarly named method.</p>

<p>To load an additional menu item:</p>

<ol>
<li><p>Create a <code>setup.rb</code> in the <code>layout</code> template directory and override the methods
<code>menu_lists</code>. The <code>type</code> informs the search field the name of the file.
The <code>title</code> is the name that appears above the section when viewed in frames.
The <code>search_title</code> is the name that appears in the search field tab on the page.</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>path</span><span class='regexp_end'>/to</span></span><span class='op'>/</span><span class='id identifier rubyid_mytemplates'>mytemplates</span><span class='op'>/</span><span class='op'>:</span>
<span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_layout'>layout</span>
<span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_html'>html</span>
<span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_setup'>setup</span>.<span class='id identifier rubyid_rb'>rb</span>

<span class='kw'>def</span> <span class='id identifier rubyid_menu_lists'>menu_lists</span>
  <span class='comment'># Load the existing menus
</span>  <span class='kw'>super</span> <span class='op'>+</span> [ { <span class='symbeg'>:</span><span class='id identifier rubyid_type'>type</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>feature</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_title'>title</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Features</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_search_title'>search_title</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Feature List</span><span class='tstring_end'>&#39;</span></span> } ]
<span class='kw'>end</span></code></pre></li>
<li><p>Create a <code>setup.rb</code> in the <code>fulldoc</code> template directory and create a method
 to generate a menu for the specified <code>type</code>.
 The method <code>generate_assets</code> will look for a function with a signature prefixed
 with <code>generate</code>, the type value specified, and the suffix <code>list</code>. Within that
 method you can configure and load the specific objects you wish to display.</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>path</span><span class='regexp_end'>/to</span></span><span class='op'>/</span><span class='id identifier rubyid_mytemplates'>mytemplates</span><span class='op'>/</span><span class='op'>:</span>
<span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_fulldoc'>fulldoc</span>
<span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_html'>html</span>
<span class='op'>|</span>   <span class='op'>|</span>   <span class='op'>|</span><span class='op'>-</span><span class='op'>-</span> <span class='id identifier rubyid_setup'>setup</span>.<span class='id identifier rubyid_rb'>rb</span>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_feature_list'>generate_feature_list</span>

  <span class='comment'># load all the features from the Registry
</span>  <span class='ivar'>@items</span> <span class='op'>=</span> <span class='const'>Registry</span>.<span class='id identifier rubyid_all'>all</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_feature'>feature</span>)
  <span class='ivar'>@list_title</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Feature List</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@list_type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>feature</span><span class='tstring_end'>&quot;</span></span>

  <span class='comment'># optional: the specified stylesheet class
</span>  <span class='comment'># when not specified it will default to the value of @list_type
</span>  <span class='ivar'>@list_class</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>class</span><span class='tstring_end'>&quot;</span></span>

  <span class='comment'># Generate the full list html file with named feature_list.html
</span>  <span class='comment'># @note this file must be match the name of the type
</span>  <span class='id identifier rubyid_asset'>asset</span>(<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>feature_list.html</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_erb'>erb</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_full_list'>full_list</span>))
<span class='kw'>end</span></code></pre></li>
</ol>

<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>