<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: ActiveRecord::ConnectionAdapters::ColumnDumper &mdash; Rails 4.2.11.3</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "ActiveRecord::ConnectionAdapters::ColumnDumper",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='../../'>Rails 4.2.11.3</a> &raquo; 
      <a href='../../_index.html#alpha_C'>Index (C)</a> &raquo; 
        <a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a> &raquo; 
        <a href="../ConnectionAdapters.html" title="ActiveRecord::ConnectionAdapters (module)">ConnectionAdapters</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>ColumnDumper&nbsp;&#x25B2;</a></span>
    </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: ActiveRecord::ConnectionAdapters::ColumnDumper</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Included In:</div>
      <div class='box_11'>
        <a href="AbstractAdapter.html" title="ActiveRecord::ConnectionAdapters::AbstractAdapter (class)">AbstractAdapter</a>,
          <a href="AbstractMysqlAdapter.html" title="ActiveRecord::ConnectionAdapters::AbstractMysqlAdapter (class)">AbstractMysqlAdapter</a>,
          <a href="Mysql2Adapter.html" title="ActiveRecord::ConnectionAdapters::Mysql2Adapter (class)">Mysql2Adapter</a>,
          <a href="MysqlAdapter.html" title="ActiveRecord::ConnectionAdapters::MysqlAdapter (class)">MysqlAdapter</a>,
          <a href="PostgreSQLAdapter.html" title="ActiveRecord::ConnectionAdapters::PostgreSQLAdapter (class)">PostgreSQLAdapter</a>,
          <a href="SQLite3Adapter.html" title="ActiveRecord::ConnectionAdapters::SQLite3Adapter (class)">SQLite3Adapter</a>
      </div>
    </td></tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/v4.2.11.3/activerecord/lib/active_record/connection_adapters/abstract/schema_dumper.rb#L8'>activerecord/lib/active_record/connection_adapters/abstract/schema_dumper.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>The goal of this module is to move Adapter specific column definitions to the Adapter instead of having it in the schema dumper itself. This code represents the normal case. We can then redefine how certain data types may be handled in the schema dumper on the Adapter level by over-writing this code inside the database specific adapters</p>

  </div>
</div>
</div>
<h2 class='h2_sum' id='instance_method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#column_spec-instance_method" title="#column_spec (instance method)">#<strong>column_spec</strong>(column, types)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#migration_keys-instance_method" title="#migration_keys (instance method)">#<strong>migration_keys</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Lists the valid migration options.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#prepare_column_options-instance_method" title="#prepare_column_options (instance method)">#<strong>prepare_column_options</strong>(column, types)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>This can be overridden on a Adapter level basis to support other extended datatypes (Example: Adding an array option in the <a href="PostgreSQLAdapter.html" title="ActiveRecord::ConnectionAdapters::PostgreSQLAdapter (class)">PostgreSQLAdapter</a>).</p></div>
    </div>
  </li>
</ul>
</div>  <!-- instance_method_summary -->
<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="column_spec-instance_method">
  <h3 class='signature  first'>
    #<strong>column_spec</strong>(column, types)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/v4.2.11.3/activerecord/lib/active_record/connection_adapters/abstract/schema_dumper.rb#L9-L13'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='9' data-end='13'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/connection_adapters/abstract/schema_dumper.rb', line 9</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_column_spec'>column_spec</span>(<span class='id identifier rubyid_column'>column</span><span class='comma'>,</span> <span class='id identifier rubyid_types'>types</span>)
  <span class='id identifier rubyid_spec'>spec</span> <span class='op'>=</span> <span class='id identifier rubyid_prepare_column_options'><a href="#prepare_column_options-instance_method" title="ActiveRecord::ConnectionAdapters::ColumnDumper#prepare_column_options (method)">prepare_column_options</a></span>(<span class='id identifier rubyid_column'>column</span><span class='comma'>,</span> <span class='id identifier rubyid_types'>types</span>)
  (<span class='id identifier rubyid_spec'>spec</span>.<span class='id identifier rubyid_keys'>keys</span> <span class='op'>-</span> [<span class='symbeg'>:</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_type'>type</span>]).<span class='id identifier rubyid_each'>each</span>{ <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span> <span class='id identifier rubyid_spec'>spec</span>[<span class='id identifier rubyid_k'>k</span>].<span class='id identifier rubyid_insert'>insert</span>(<span class='int'>0</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_k'>k</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='tstring_end'>&quot;</span></span>)}
  <span class='id identifier rubyid_spec'>spec</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="migration_keys-instance_method">
  <h3 class='signature '>
    #<strong>migration_keys</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Lists the valid migration options</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/v4.2.11.3/activerecord/lib/active_record/connection_adapters/abstract/schema_dumper.rb#L36-L38'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='36' data-end='38'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/connection_adapters/abstract/schema_dumper.rb', line 36</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_migration_keys'>migration_keys</span>
  [<span class='symbeg'>:</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_limit'>limit</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_precision'>precision</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_scale'>scale</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_default'>default</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_null'>null</span>]
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="prepare_column_options-instance_method">
  <h3 class='signature '>
    #<strong>prepare_column_options</strong>(column, types)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>This can be overridden on a Adapter level basis to support other extended datatypes (Example: Adding an array option in the <a href="PostgreSQLAdapter.html" title="ActiveRecord::ConnectionAdapters::PostgreSQLAdapter (class)">PostgreSQLAdapter</a>)</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/v4.2.11.3/activerecord/lib/active_record/connection_adapters/abstract/schema_dumper.rb#L18-L33'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num' data-start='18' data-end='33'></pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/connection_adapters/abstract/schema_dumper.rb', line 18</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_prepare_column_options'>prepare_column_options</span>(<span class='id identifier rubyid_column'>column</span><span class='comma'>,</span> <span class='id identifier rubyid_types'>types</span>)
  <span class='id identifier rubyid_spec'>spec</span> <span class='op'>=</span> {}
  <span class='id identifier rubyid_spec'>spec</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_name'>name</span>]      <span class='op'>=</span> <span class='id identifier rubyid_column'>column</span>.<span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_inspect'>inspect</span>
  <span class='id identifier rubyid_spec'>spec</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_type'>type</span>]      <span class='op'>=</span> <span class='id identifier rubyid_column'>column</span>.<span class='id identifier rubyid_type'>type</span>.<span class='id identifier rubyid_to_s'>to_s</span>
  <span class='id identifier rubyid_spec'>spec</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_null'>null</span>]      <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>false</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_column'>column</span>.<span class='id identifier rubyid_null'>null</span>

  <span class='id identifier rubyid_limit'>limit</span> <span class='op'>=</span> <span class='id identifier rubyid_column'>column</span>.<span class='id identifier rubyid_limit'>limit</span> <span class='op'>||</span> <span class='id identifier rubyid_types'>types</span>[<span class='id identifier rubyid_column'>column</span>.<span class='id identifier rubyid_type'>type</span>][<span class='symbeg'>:</span><span class='id identifier rubyid_limit'>limit</span>]
  <span class='id identifier rubyid_spec'>spec</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_limit'>limit</span>]     <span class='op'>=</span> <span class='id identifier rubyid_limit'>limit</span>.<span class='id identifier rubyid_inspect'>inspect</span> <span class='kw'>if</span> <span class='id identifier rubyid_limit'>limit</span>
  <span class='id identifier rubyid_spec'>spec</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_precision'>precision</span>] <span class='op'>=</span> <span class='id identifier rubyid_column'>column</span>.<span class='id identifier rubyid_precision'>precision</span>.<span class='id identifier rubyid_inspect'>inspect</span> <span class='kw'>if</span> <span class='id identifier rubyid_column'>column</span>.<span class='id identifier rubyid_precision'>precision</span>
  <span class='id identifier rubyid_spec'>spec</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_scale'>scale</span>]     <span class='op'>=</span> <span class='id identifier rubyid_column'>column</span>.<span class='id identifier rubyid_scale'>scale</span>.<span class='id identifier rubyid_inspect'>inspect</span> <span class='kw'>if</span> <span class='id identifier rubyid_column'>column</span>.<span class='id identifier rubyid_scale'>scale</span>

  <span class='id identifier rubyid_default'>default</span> <span class='op'>=</span> <span class='id identifier rubyid_schema_default'>schema_default</span>(<span class='id identifier rubyid_column'>column</span>) <span class='kw'>if</span> <span class='id identifier rubyid_column'>column</span>.<span class='id identifier rubyid_has_default?'>has_default?</span>
  <span class='id identifier rubyid_spec'>spec</span>[<span class='symbeg'>:</span><span class='id identifier rubyid_default'>default</span>]   <span class='op'>=</span> <span class='id identifier rubyid_default'>default</span> <span class='kw'>unless</span> <span class='id identifier rubyid_default'>default</span>.<span class='id identifier rubyid_nil?'>nil?</span>

  <span class='id identifier rubyid_spec'>spec</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>