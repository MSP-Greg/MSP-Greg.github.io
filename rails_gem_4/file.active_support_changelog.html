<!DOCTYPE html>
<html>
<head>

<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>File: Active Support CHANGELOG &mdash; Rails 4.2.11.3</title>

<link rel='stylesheet'  type='text/css' href='../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "active_support_CHANGELOG",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a id='home_no_xhr' href='/'>Home</a> &raquo; 
      <a href='.'>Rails 4.2.11.3</a> &raquo; 
      <a href='_index.html'>Index</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>File: Active Support CHANGELOG&nbsp;&#x25B2;</a></span>
          </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='file'>
<h2>Rails 4.2.11.3 (May 15, 2020)</h2>
<ul>
<li>No changes.</li>
</ul>
<h2>Rails 4.2.11.2 (May 15, 2020)</h2>
<ul>
<li>No changes.</li>
</ul>
<h2>Rails 4.2.11.1 (March 11, 2019)</h2>
<ul>
<li>No changes.</li>
</ul>
<h2>Rails 4.2.11 (November 27, 2018)</h2>
<ul>
<li>No changes.</li>
</ul>
<h2>Rails 4.2.10 (September 27, 2017)</h2>
<ul>
<li>No changes.</li>
</ul>
<h2>Rails 4.2.9 (June 26, 2017)</h2>
<ul>
<li>
<p>Fixed bug in <code>DateAndTime::Compatibility#to_time</code> that caused it to
raise <code>RuntimeError: can't modify frozen Time</code> when called on any frozen <a href="Time.html" title="Time (class)">Time</a>.
Properly pass through the frozen <a href="Time.html" title="Time (class)">Time</a> or <a href="ActiveSupport/TimeWithZone.html" title="ActiveSupport::TimeWithZone (class)">::ActiveSupport::TimeWithZone</a> object
when calling <code>#to_time</code>.</p>
<p><em>Kevin McPhillips</em> &amp; <em>Andrew White</em></p>
</li>
<li>
<p>Restore the return type of <a href="DateTime.html#utc-instance_method" title="DateTime#utc (method)">DateTime#utc</a></p>
<p>In Rails 5.0 the return type of <a href="DateTime.html#utc-instance_method" title="DateTime#utc (method)">DateTime#utc</a> was changed to <a href="Time.html" title="Time (class)">Time</a> to be
consistent with the new <a href="DateTime.html#localtime-instance_method" title="DateTime#localtime (method)">DateTime#localtime</a> method. When these changes were
backported in #27553 this inadvertently changed the return type in a patcn
release. Since <a href="DateTime.html#localtime-instance_method" title="DateTime#localtime (method)">DateTime#localtime</a> was new in Rails 4.2.8 it's okay to
restore the return type of <a href="DateTime.html#utc-instance_method" title="DateTime#utc (method)">DateTime#utc</a> but keep <a href="DateTime.html#localtime-instance_method" title="DateTime#localtime (method)">DateTime#localtime</a> as
returning <a href="Time.html" title="Time (class)">Time</a> without breaking backwards compatibility.</p>
<p><em>Andrew White</em></p>
</li>
<li>
<p>In Core Extensions, make <code>MarshalWithAutoloading#load</code> pass through the second, optional
argument for <code>Marshal#load( source [, proc] )</code>. This way we don't have to do
<code>Marshal.method(:load).super_method.call(sourse, proc)</code> just to be able to pass a proc.</p>
<p><em>Jeff Latz</em></p>
</li>
<li>
<p>Cache <a href="ActiveSupport/TimeWithZone.html#to_datetime-instance_method" title="ActiveSupport::TimeWithZone#to_datetime (method)">ActiveSupport::TimeWithZone#to_datetime</a> before freezing.</p>
<p><em>Adam Rice</em></p>
</li>
<li>
<p><code>AS::Testing::TimeHelpers#travel_to</code> now changes <code>DateTime.now</code> as well as
<code>Time.now</code> and <code>Date.today</code>.</p>
<p><em>Yuki Nishijima</em></p>
</li>
</ul>
<h2>Rails 4.2.8 (February 21, 2017)</h2>
<ul>
<li>
<p>Make <code>getlocal</code> and <code>getutc</code> always return instances of <a href="Time.html" title="Time (class)">Time</a> for
<a href="ActiveSupport/TimeWithZone.html" title="ActiveSupport::TimeWithZone (class)">::ActiveSupport::TimeWithZone</a> and <a href="DateTime.html" title="DateTime (class)">DateTime</a>. This eliminates a possible
stack level too deep error in <code>to_time</code> where <a href="ActiveSupport/TimeWithZone.html" title="ActiveSupport::TimeWithZone (class)">::ActiveSupport::TimeWithZone</a>
was wrapping a <a href="DateTime.html" title="DateTime (class)">DateTime</a> instance. As a consequence of this the internal
time value in <a href="ActiveSupport/TimeWithZone.html" title="ActiveSupport::TimeWithZone (class)">::ActiveSupport::TimeWithZone</a> is now always an instance of
<a href="Time.html" title="Time (class)">Time</a> in the UTC timezone, whether that's as the UTC time directly or
a representation of the local time in the timezone. There should be no
consequences of this internal change and if there are it's a bug due to
leaky abstractions.</p>
<p><em>Andrew White</em></p>
</li>
<li>
<p>Add <a href="DateTime.html#subsec-instance_method" title="DateTime#subsec (method)">DateTime#subsec</a> to return the fraction of a second as a <code>Rational</code>.</p>
<p><em>Andrew White</em></p>
</li>
<li>
<p>Add additional aliases for <a href="DateTime.html#utc-instance_method" title="DateTime#utc (method)">DateTime#utc</a> to mirror the ones on
<a href="ActiveSupport/TimeWithZone.html" title="ActiveSupport::TimeWithZone (class)">::ActiveSupport::TimeWithZone</a> and <a href="Time.html" title="Time (class)">Time</a>.</p>
<p><em>Andrew White</em></p>
</li>
<li>
<p>Add <a href="DateTime.html#localtime-instance_method" title="DateTime#localtime (method)">DateTime#localtime</a> to return an instance of <a href="Time.html" title="Time (class)">Time</a> in the system's
local timezone. Also aliased to <code>getlocal</code>.</p>
<p><em>Andrew White</em>, <em>Yuichiro Kaneko</em></p>
</li>
<li>
<p>Add <a href="Time.html#sec_fraction-instance_method" title="Time#sec_fraction (method)">Time#sec_fraction</a> to return the fraction of a second as a <code>Rational</code>.</p>
<p><em>Andrew White</em></p>
</li>
<li>
<p>Add <a href="ActiveSupport.html#to_time_preserves_timezone-class_method" title="ActiveSupport.to_time_preserves_timezone (method)">ActiveSupport.to_time_preserves_timezone</a> config option to control
how <code>to_time</code> handles timezones. In Ruby 2.4+ the behavior will change
from converting to the local system timezone, to preserving the timezone
of the receiver. This config option defaults to false so that apps made
with earlier versions of Rails are not affected when upgrading, e.g:</p>
<pre class="code ruby"><code class="ruby">&gt;&gt; ENV[&#39;TZ&#39;] = &#39;US/Eastern&#39;

&gt;&gt; &quot;2016-04-23T10:23:12.000Z&quot;.to_time
#=&gt; &quot;2016-04-23T06:23:12.000-04:00&quot;

&gt;&gt; ActiveSupport.to_time_preserves_timezone = true

&gt;&gt; &quot;2016-04-23T10:23:12.000Z&quot;.to_time
#=&gt; &quot;2016-04-23T10:23:12.000Z&quot;</code></pre>
<p>Fixes #24617.</p>
<p><em>Andrew White</em></p>
</li>
<li>
<p>Add <code>init_with</code> to <a href="ActiveSupport/TimeWithZone.html" title="ActiveSupport::TimeWithZone (class)">::ActiveSupport::TimeWithZone</a> and <a href="ActiveSupport/TimeZone.html" title="ActiveSupport::TimeZone (class)">::ActiveSupport::TimeZone</a></p>
<p>It is helpful to be able to run apps concurrently written in successive
versions of Rails to aid migration, e.g. run Rails 4.2 and 5.0 variants
of your application at the same time to carry out A/B testing.</p>
<p>To do this serialization formats need to be cross compatible and the
change in 3aa26cf didn't meet this criteria because the Psych loader
checks for the existence of <code>init_with</code> before setting the instance
variables and the wrapping behavior of <a href="ActiveSupport/TimeWithZone.html" title="ActiveSupport::TimeWithZone (class)">::ActiveSupport::TimeWithZone</a>
tries to see if the <a href="Time.html" title="Time (class)">Time</a> instance responds to <code>init_with</code> before the
<code>@time</code> variable is set.</p>
<p>To fix this we backported just the <code>init_with</code> behavior from the change
in 3aa26cf. If the revived instance is then written out to YAML again
it will revert to the default Rails 4.2 behavior of converting it to
a UTC timestamp string.</p>
<p>Fixes #26296.</p>
<p><em>Andrew White</em></p>
</li>
<li>
<p>Fix <a href="ActiveSupport/TimeWithZone.html#in-instance_method" title="ActiveSupport::TimeWithZone#in (method)">ActiveSupport::TimeWithZone#in</a> across DST boundaries.</p>
<p>Previously calls to <code>in</code> were being sent to the non-DST aware
method <a href="Time.html#since-instance_method" title="Time#since (method)">Time#since</a> via <code>method_missing</code>. It is now aliased to
the DST aware <a href="ActiveSupport/TimeWithZone.html#since-instance_method" title="ActiveSupport::TimeWithZone#since (method)">ActiveSupport::TimeWithZone#since</a> which handles
transitions across DST boundaries, e.g:</p>
<pre class="code ruby"><code class="ruby"><span class='const'><a href="Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_zone'><a href="Time.html#zone-class_method" title="Time.zone (method)">zone</a></span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>US/Eastern</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='const'><a href="Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_zone'><a href="Time.html#zone-class_method" title="Time.zone (method)">zone</a></span>.<span class='id identifier rubyid_local'>local</span>(<span class='int'>2016</span><span class='comma'>,</span><span class='int'>11</span><span class='comma'>,</span><span class='int'>6</span><span class='comma'>,</span><span class='int'>1</span>)
<span class='comment'># =&gt; Sun, 06 Nov 2016 01:00:00 EDT -05:00
</span>
<span class='id identifier rubyid_t'>t</span>.<span class='id identifier rubyid_in'>in</span>(<span class='int'>1</span>.<span class='id identifier rubyid_hour'>hour</span>)
<span class='comment'># =&gt; Sun, 06 Nov 2016 01:00:00 EST -05:00</span></code></pre>
<p>Fixes #26580.</p>
<p><em>Thomas Balthazar</em></p>
</li>
</ul>
<h2>Rails 4.2.7 (July 12, 2016)</h2>
<ul>
<li>
<p>Fixed <a href="ActiveSupport/Logger.html#broadcast-class_method" title="ActiveSupport::Logger.broadcast (method)">ActiveSupport::Logger.broadcast</a> so that calls to <code>#silence</code> now
properly delegate to all loggers. Silencing now properly suppresses logging
to both the log and the console.</p>
<p><em>Kevin McPhillips</em></p>
</li>
<li>
<p>Backported <a href="ActiveSupport/LoggerThreadSafeLevel.html" title="ActiveSupport::LoggerThreadSafeLevel (module)">::ActiveSupport::LoggerThreadSafeLevel</a>. Assigning the
<code>Rails.logger.level</code> is now thread safe.</p>
<p><em>Kevin McPhillips</em></p>
</li>
<li>
<p>Fixed a problem with <a href="ActiveSupport/SafeBuffer.html" title="ActiveSupport::SafeBuffer (class)">::ActiveSupport::SafeBuffer</a>.titleize calling capitalize
on nil.</p>
<p><em>Brian McManus</em></p>
</li>
<li>
<p><a href="Time.html" title="Time (class)">Time</a> zones: Ensure that the UTC offset reflects DST changes that occurred
since the app started. Removes UTC offset caching, reducing performance,
but this is still relatively quick and isn't in any hot paths.</p>
<p><em>Alexey Shein</em></p>
</li>
<li>
<p>Prevent <code>Marshal.load</code> from looping infinitely when trying to autoload a constant
which resolves to a different name.</p>
<p><em>Olek Janiszewski</em></p>
</li>
</ul>
<h2>Rails 4.2.6 (March 07, 2016)</h2>
<ul>
<li>No changes.</li>
</ul>
<h2>Rails 4.2.5.2 (February 26, 2016)</h2>
<ul>
<li>No changes.</li>
</ul>
<h2>Rails 4.2.5.1 (January 25, 2015)</h2>
<ul>
<li>No changes.</li>
</ul>
<h2>Rails 4.2.5 (November 12, 2015)</h2>
<ul>
<li>
<p>Fix <code>TimeWithZone#eql?</code> to properly handle <code>TimeWithZone</code> created from <a href="DateTime.html" title="DateTime (class)">DateTime</a>:
twz = DateTime.now.in_time_zone
twz.eql?(twz.dup) =&gt; true</p>
<p>Fixes #14178.</p>
<p><em>Roque Pinel</em></p>
</li>
<li>
<p>Handle invalid UTF-8 characters in <code>MessageVerifier.verify</code>.</p>
<p><em>Roque Pinel</em>, <em>Grey Baker</em></p>
</li>
</ul>
<h2>Rails 4.2.4 (August 24, 2015)</h2>
<ul>
<li>
<p>Fix a <code>SystemStackError</code> when encoding an <a href="Enumerable.html" title="Enumerable (module)">Enumerable</a> with <code>json</code> gem and
with the Active Support JSON encoder loaded.</p>
<p>Fixes #20775.</p>
<p><em>Sammy Larbi</em>, <em>Prathamesh Sonpatki</em></p>
</li>
<li>
<p>Fix not calling <code>#default</code> on <code>HashWithIndifferentAcess#to_hash</code> when only
<code>default_proc</code> is set, which could raise.</p>
<p><em>Simon Eskildsen</em></p>
</li>
<li>
<p>Fix setting <code>default_proc</code> on <code>HashWithIndifferentAccess#dup</code></p>
<p><em>Simon Eskildsen</em></p>
</li>
</ul>
<h2>Rails 4.2.3 (June 25, 2015)</h2>
<ul>
<li>
<p>Fix a range of values for parameters of the Time#change</p>
<p><em>Nikolay Kondratyev</em></p>
</li>
<li>
<p>Add some missing <code>require 'active_support/deprecation'</code></p>
<p><em>Akira Matsuda</em></p>
</li>
</ul>
<h2>Rails 4.2.2 (June 16, 2015)</h2>
<ul>
<li>
<p>Fix XSS vulnerability in <a href="ActiveSupport/JSON.html#encode-class_method" title="ActiveSupport::JSON.encode (method)">ActiveSupport::JSON.encode</a> method.</p>
<p>CVE-2015-3226.</p>
<p><em>Rafael Mendonça França</em></p>
</li>
<li>
<p>Fix denial of service vulnerability in the XML processing.</p>
<p>CVE-2015-3227.</p>
<p><em>Aaron Patterson</em></p>
</li>
</ul>
<h2>Rails 4.2.1 (March 19, 2015)</h2>
<ul>
<li>
<p>Fixed a problem where String#truncate_words would get stuck with a complex
string.</p>
<p><em>Henrik Nygren</em></p>
</li>
<li>
<p>Fixed a roundtrip problem with AS::SafeBuffer where primitive-like strings
will be dumped as primitives:</p>
<p>Before:</p>
<pre class="code ruby"><code class="ruby"><span class='const'>YAML</span>.<span class='id identifier rubyid_load'>load</span> <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/SafeBuffer.html" title="ActiveSupport::SafeBuffer (class)">SafeBuffer</a></span>.<span class='id identifier rubyid_new'><a href="ActiveSupport/SafeBuffer.html#new-class_method" title="ActiveSupport::SafeBuffer.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_to_yaml'>to_yaml</span>  <span class='comment'># =&gt; &quot;Hello&quot;
</span><span class='const'>YAML</span>.<span class='id identifier rubyid_load'>load</span> <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/SafeBuffer.html" title="ActiveSupport::SafeBuffer (class)">SafeBuffer</a></span>.<span class='id identifier rubyid_new'><a href="ActiveSupport/SafeBuffer.html#new-class_method" title="ActiveSupport::SafeBuffer.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>true</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_to_yaml'>to_yaml</span>   <span class='comment'># =&gt; true
</span><span class='const'>YAML</span>.<span class='id identifier rubyid_load'>load</span> <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/SafeBuffer.html" title="ActiveSupport::SafeBuffer (class)">SafeBuffer</a></span>.<span class='id identifier rubyid_new'><a href="ActiveSupport/SafeBuffer.html#new-class_method" title="ActiveSupport::SafeBuffer.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>false</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_to_yaml'>to_yaml</span>  <span class='comment'># =&gt; false
</span><span class='const'>YAML</span>.<span class='id identifier rubyid_load'>load</span> <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/SafeBuffer.html" title="ActiveSupport::SafeBuffer (class)">SafeBuffer</a></span>.<span class='id identifier rubyid_new'><a href="ActiveSupport/SafeBuffer.html#new-class_method" title="ActiveSupport::SafeBuffer.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_to_yaml'>to_yaml</span>      <span class='comment'># =&gt; 1
</span><span class='const'>YAML</span>.<span class='id identifier rubyid_load'>load</span> <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/SafeBuffer.html" title="ActiveSupport::SafeBuffer (class)">SafeBuffer</a></span>.<span class='id identifier rubyid_new'><a href="ActiveSupport/SafeBuffer.html#new-class_method" title="ActiveSupport::SafeBuffer.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.1</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_to_yaml'>to_yaml</span>    <span class='comment'># =&gt; 1.1</span></code></pre>
<p>After:</p>
<pre class="code ruby"><code class="ruby"><span class='const'>YAML</span>.<span class='id identifier rubyid_load'>load</span> <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/SafeBuffer.html" title="ActiveSupport::SafeBuffer (class)">SafeBuffer</a></span>.<span class='id identifier rubyid_new'><a href="ActiveSupport/SafeBuffer.html#new-class_method" title="ActiveSupport::SafeBuffer.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_to_yaml'>to_yaml</span>  <span class='comment'># =&gt; &quot;Hello&quot;
</span><span class='const'>YAML</span>.<span class='id identifier rubyid_load'>load</span> <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/SafeBuffer.html" title="ActiveSupport::SafeBuffer (class)">SafeBuffer</a></span>.<span class='id identifier rubyid_new'><a href="ActiveSupport/SafeBuffer.html#new-class_method" title="ActiveSupport::SafeBuffer.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>true</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_to_yaml'>to_yaml</span>   <span class='comment'># =&gt; &quot;true&quot;
</span><span class='const'>YAML</span>.<span class='id identifier rubyid_load'>load</span> <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/SafeBuffer.html" title="ActiveSupport::SafeBuffer (class)">SafeBuffer</a></span>.<span class='id identifier rubyid_new'><a href="ActiveSupport/SafeBuffer.html#new-class_method" title="ActiveSupport::SafeBuffer.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>false</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_to_yaml'>to_yaml</span>  <span class='comment'># =&gt; &quot;false&quot;
</span><span class='const'>YAML</span>.<span class='id identifier rubyid_load'>load</span> <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/SafeBuffer.html" title="ActiveSupport::SafeBuffer (class)">SafeBuffer</a></span>.<span class='id identifier rubyid_new'><a href="ActiveSupport/SafeBuffer.html#new-class_method" title="ActiveSupport::SafeBuffer.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_to_yaml'>to_yaml</span>      <span class='comment'># =&gt; &quot;1&quot;
</span><span class='const'>YAML</span>.<span class='id identifier rubyid_load'>load</span> <span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/SafeBuffer.html" title="ActiveSupport::SafeBuffer (class)">SafeBuffer</a></span>.<span class='id identifier rubyid_new'><a href="ActiveSupport/SafeBuffer.html#new-class_method" title="ActiveSupport::SafeBuffer.new (method)">new</a></span>(<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.1</span><span class='tstring_end'>&quot;</span></span>).<span class='id identifier rubyid_to_yaml'>to_yaml</span>    <span class='comment'># =&gt; &quot;1.1&quot;</span></code></pre>
<p><em>Godfrey Chan</em></p>
</li>
<li>
<p>Replace fixed <code>:en</code> with <code>I18n.default_locale</code> in <code>Duration#inspect</code>.</p>
<p><em>Dominik Masur</em></p>
</li>
<li>
<p>Add missing time zone definitions for Russian Federation and sync them
with <code>zone.tab</code> file from tzdata version 2014j (latest).</p>
<p><em>Andrey Novikov</em></p>
</li>
</ul>
<h2>Rails 4.2.0 (December 20, 2014)</h2>
<ul>
<li>
<p>The decorated <code>load</code> and <code>require</code> methods are now kept private.</p>
<p>Fixes #17553.</p>
<p><em>Xavier Noria</em></p>
</li>
<li>
<p><a href="String.html#remove-instance_method" title="String#remove (method)">String#remove</a> and <a href="String.html#remove!-instance_method" title="String#remove! (method)">String#remove!</a> accept multiple arguments.</p>
<p><em>Pavel Pravosud</em></p>
</li>
<li>
<p><code>TimeWithZone#strftime</code> now delegates every directive to <code>Time#strftime</code> except for '%Z',
it also now correctly handles escaped '%' characters placed just before time zone related directives.</p>
<p><em>Pablo Herrero</em></p>
</li>
<li>
<p>Corrected <code>Inflector#underscore</code> handling of multiple successive acroynms.</p>
<p><em>James Le Cuirot</em></p>
</li>
<li>
<p>Delegation now works with ruby reserved words passed to <code>:to</code> option.</p>
<p>Fixes #16956.</p>
<p><em>Agis Anastasopoulos</em></p>
</li>
<li>
<p>Added method <code>#eql?</code> to <a href="ActiveSupport/Duration.html" title="ActiveSupport::Duration (class)">::ActiveSupport::Duration</a>, in addition to <code>#==</code>.</p>
<p>Currently, the following returns <code>false</code>, contrary to expectation:</p>
<pre class="code ruby"><code class="ruby"><span class='int'>1</span>.<span class='id identifier rubyid_minute'>minute</span>.<span class='id identifier rubyid_eql?'>eql?</span>(<span class='int'>1</span>.<span class='id identifier rubyid_minute'>minute</span>)</code></pre>
<p>Adding method <code>#eql?</code> will make this behave like expected. Method <code>#eql?</code> is
just a bit stricter than <code>#==</code>, as it checks whether the argument is also a duration. Their
parts may be different though.</p>
<pre class="code ruby"><code class="ruby"><span class='int'>1</span>.<span class='id identifier rubyid_minute'>minute</span>.<span class='id identifier rubyid_eql?'>eql?</span>(<span class='int'>60</span>.<span class='id identifier rubyid_seconds'>seconds</span>)  <span class='comment'># =&gt; true
</span><span class='int'>1</span>.<span class='id identifier rubyid_minute'>minute</span>.<span class='id identifier rubyid_eql?'>eql?</span>(<span class='int'>60</span>)          <span class='comment'># =&gt; false</span></code></pre>
<p><em>Joost Lubach</em></p>
</li>
<li>
<p><a href="Time.html#change-instance_method" title="Time#change (method)">Time#change</a> can now change nanoseconds (<code>:nsec</code>) as a higher-precision
alternative to microseconds (<code>:usec</code>).</p>
<p><em>Agis Anastasooulos</em></p>
</li>
<li>
<p><code>MessageVerifier.new</code> raises an appropriate exception if the secret is <code>nil</code>.
This prevents <code>MessageVerifier#generate</code> from raising a cryptic error later on.</p>
<p><em>Kostiantyn Kahanskyi</em></p>
</li>
<li>
<p>Introduced new configuration option <code>active_support.test_order</code> for
specifying the order in which test cases are executed. This option currently defaults
to <code>:sorted</code> but will be changed to <code>:random</code> in Rails 5.0.</p>
<p><em>Akira Matsuda</em>, <em>Godfrey Chan</em></p>
</li>
<li>
<p>Fixed a bug in <code>Inflector#underscore</code> where acroynms in nested constant names
are incorrectly parsed as camelCase.</p>
<p>Fixes #8015.</p>
<p><em>Fred Wu</em>, <em>Matthew Draper</em></p>
</li>
<li>
<p>Make <a href="Time.html#change-instance_method" title="Time#change (method)">Time#change</a> throw an exception if the <code>:usec</code> option is out of range and
the time has an offset other than UTC or local.</p>
<p><em>Agis Anastasopoulos</em></p>
</li>
<li>
<p><a href="Method.html" title="Method (class)">Method</a> objects now report themselves as not <code>duplicable?</code>. This allows
hashes and arrays containing <a href="Method.html" title="Method (class)">Method</a> objects to be <code>deep_dup</code>ed.</p>
<p><em>Peter Jaros</em></p>
</li>
<li>
<p><code>determine_constant_from_test_name</code> does no longer shadow <a href="NameError.html" title="NameError (class)">NameError</a>s
which happens during constant autoloading.</p>
<p>Fixes #9933.</p>
<p><em>Guo Xiang Tan</em></p>
</li>
<li>
<p>Added instance_eval version to Object#try and Object#try!, so you can do this:</p>
<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_person'>person</span>.<span class='id identifier rubyid_try'>try</span> { <span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_first'>first</span> }</code></pre>
<p>instead of:</p>
<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_person'>person</span>.<span class='id identifier rubyid_try'>try</span> { <span class='op'>|</span><span class='id identifier rubyid_person'>person</span><span class='op'>|</span> <span class='id identifier rubyid_person'>person</span>.<span class='id identifier rubyid_name'>name</span>.<span class='id identifier rubyid_first'>first</span> }</code></pre>
<p><em>DHH</em>, <em>Ari Pollak</em></p>
</li>
<li>
<p>Fix the <a href="ActiveSupport/Duration.html#instance_of%3F-instance_method" title="ActiveSupport::Duration#instance_of? (method)">ActiveSupport::Duration#instance_of?</a> method to return the right
value with the class itself since it was previously delegated to the
internal value.</p>
<p><em>Robin Dupret</em></p>
</li>
<li>
<p>Fix rounding errors with <code>#travel_to</code> by resetting the usec on any passed time to zero, so we only travel
with per-second precision, not anything deeper than that.</p>
<p><em>DHH</em></p>
</li>
<li>
<p>Fix DateTime comparison with <code>DateTime::Infinity</code> object.</p>
<p><em>Rafael Mendonça França</em></p>
</li>
<li>
<p>Added Object#itself which returns the object itself. Useful when dealing with a chaining scenario, like Active Record scopes:</p>
<pre class="code ruby"><code class="ruby"><span class='const'>Event</span>.<span class='id identifier rubyid_public_send'>public_send</span>(<span class='id identifier rubyid_state'>state</span>.<span class='id identifier rubyid_presence_in'>presence_in</span>([ <span class='symbeg'>:</span><span class='id identifier rubyid_trashed'>trashed</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_drafted'>drafted</span> ]) <span class='op'>||</span> <span class='symbeg'>:</span><span class='id identifier rubyid_itself'>itself</span>).<span class='id identifier rubyid_order'>order</span>(<span class='symbeg'>:</span><span class='id identifier rubyid_created_at'>created_at</span>)</code></pre>
<p><em>DHH</em></p>
</li>
<li>
<p><a href="Object.html#with_options-instance_method" title="Object#with_options (method)">Object#with_options</a> executes block in merging option context when
explicit receiver in not passed.</p>
<p><em>Pavel Pravosud</em></p>
</li>
<li>
<p>Fixed a compatibility issue with the <code>Oj</code> gem when cherry-picking the file
<code>active_support/core_ext/object/json</code> without requiring <code>active_support/json</code>.</p>
<p>Fixes #16131.</p>
<p><em>Godfrey Chan</em></p>
</li>
<li>
<p>Make <a href="Hash.html#with_indifferent_access-instance_method" title="Hash#with_indifferent_access (method)">Hash#with_indifferent_access</a> copy the default proc too.</p>
<p><em>arthurnn</em>, <em>Xanders</em></p>
</li>
<li>
<p>Add <a href="String.html#truncate_words-instance_method" title="String#truncate_words (method)">String#truncate_words</a> to truncate a string by a number of words.</p>
<p><em>Mohamed Osama</em></p>
</li>
<li>
<p>Deprecate <code>capture</code> and <code>quietly</code>.</p>
<p>These methods are not thread safe and may cause issues when used in threaded environments.
To avoid problems we are deprecating them.</p>
<p><em>Tom Meier</em></p>
</li>
<li>
<p><a href="DateTime.html#to_f-instance_method" title="DateTime#to_f (method)">DateTime#to_f</a> now preserves the fractional seconds instead of always
rounding to <code>.0</code>.</p>
<p>Fixes #15994.</p>
<p><em>John Paul Ashenfelter</em></p>
</li>
<li>
<p>Add <a href="Hash.html#transform_values-instance_method" title="Hash#transform_values (method)">Hash#transform_values</a> to simplify a common pattern where the values of a
hash must change, but the keys are left the same.</p>
<p><em>Sean Griffin</em></p>
</li>
<li>
<p>Always instrument <a href="ActiveSupport/Cache.html" title="ActiveSupport::Cache (module)">::ActiveSupport::Cache</a>.</p>
<p>Since <a href="ActiveSupport/Notifications.html" title="ActiveSupport::Notifications (module)">::ActiveSupport::Notifications</a> only instruments items when there
are attached subscribers, we don't need to disable instrumentation.</p>
<p><em>Peter Wagenet</em></p>
</li>
<li>
<p>Make the <code>apply_inflections</code> method case-insensitive when checking
whether a word is uncountable or not.</p>
<p><em>Robin Dupret</em></p>
</li>
<li>
<p>Make Dependencies pass a name to <a href="NameError.html" title="NameError (class)">NameError</a> error.</p>
<p><em>arthurnn</em></p>
</li>
<li>
<p>Fixed <a href="ActiveSupport/Cache/FileStore.html" title="ActiveSupport::Cache::FileStore (class)">::ActiveSupport::Cache::FileStore</a> exploding with long paths.</p>
<p><em>Adam Panzer</em>, <em>Michael Grosser</em></p>
</li>
<li>
<p>Fixed <a href="ActiveSupport/TimeWithZone.html#--instance_method" title="ActiveSupport::TimeWithZone#- (method)">ActiveSupport::TimeWithZone#-</a> so precision is not unnecessarily lost
when working with objects with a nanosecond component.</p>
<p><a href="ActiveSupport/TimeWithZone.html#--instance_method" title="ActiveSupport::TimeWithZone#- (method)">ActiveSupport::TimeWithZone#-</a> should return the same result as if we were
using <a href="Time.html#--instance_method" title="Time#- (method)">Time#-</a>:</p>
<pre class="code ruby"><code class="ruby"><span class='const'><a href="Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_now'>now</span>.<span class='id identifier rubyid_end_of_day'>end_of_day</span> <span class='op'>-</span> <span class='const'><a href="Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_now'>now</span>.<span class='id identifier rubyid_beginning_of_day'>beginning_of_day</span> <span class='comment'># =&gt; 86399.999999999</span></code></pre>
<p>Before:</p>
<pre class="code ruby"><code class="ruby"><span class='const'><a href="Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_zone'><a href="Time.html#zone-class_method" title="Time.zone (method)">zone</a></span>.<span class='id identifier rubyid_now'>now</span>.<span class='id identifier rubyid_end_of_day'>end_of_day</span>.<span class='id identifier rubyid_nsec'>nsec</span> <span class='comment'># =&gt; 999999999
</span><span class='const'><a href="Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_zone'><a href="Time.html#zone-class_method" title="Time.zone (method)">zone</a></span>.<span class='id identifier rubyid_now'>now</span>.<span class='id identifier rubyid_end_of_day'>end_of_day</span> <span class='op'>-</span> <span class='const'><a href="Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_zone'><a href="Time.html#zone-class_method" title="Time.zone (method)">zone</a></span>.<span class='id identifier rubyid_now'>now</span>.<span class='id identifier rubyid_beginning_of_day'>beginning_of_day</span> <span class='comment'># =&gt; 86400.0</span></code></pre>
<p>After:</p>
<pre class="code ruby"><code class="ruby"><span class='const'><a href="Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_zone'><a href="Time.html#zone-class_method" title="Time.zone (method)">zone</a></span>.<span class='id identifier rubyid_now'>now</span>.<span class='id identifier rubyid_end_of_day'>end_of_day</span> <span class='op'>-</span> <span class='const'><a href="Time.html" title="Time (class)">Time</a></span>.<span class='id identifier rubyid_zone'><a href="Time.html#zone-class_method" title="Time.zone (method)">zone</a></span>.<span class='id identifier rubyid_now'>now</span>.<span class='id identifier rubyid_beginning_of_day'>beginning_of_day</span>
<span class='comment'># =&gt; 86399.999999999</span></code></pre>
<p><em>Gordon Chan</em></p>
</li>
<li>
<p>Fixed precision error in NumberHelper when using Rationals.</p>
<p>Before:</p>
<pre class="code ruby"><code class="ruby"><span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/NumberHelper.html" title="ActiveSupport::NumberHelper (module)">NumberHelper</a></span>.<span class='id identifier rubyid_number_to_rounded'><a href="ActiveSupport/NumberHelper.html#number_to_rounded-instance_method" title="ActiveSupport::NumberHelper#number_to_rounded (method)">number_to_rounded</a></span> <span class='const'>Rational</span>(<span class='int'>1000</span><span class='comma'>,</span> <span class='int'>3</span>)<span class='comma'>,</span> <span class='label'>precision:</span> <span class='int'>2</span>
<span class='comment'># =&gt; &quot;330.00&quot;</span></code></pre>
<p>After:</p>
<pre class="code ruby"><code class="ruby"><span class='const'><a href="ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="ActiveSupport/NumberHelper.html" title="ActiveSupport::NumberHelper (module)">NumberHelper</a></span>.<span class='id identifier rubyid_number_to_rounded'><a href="ActiveSupport/NumberHelper.html#number_to_rounded-instance_method" title="ActiveSupport::NumberHelper#number_to_rounded (method)">number_to_rounded</a></span> <span class='const'>Rational</span>(<span class='int'>1000</span><span class='comma'>,</span> <span class='int'>3</span>)<span class='comma'>,</span> <span class='label'>precision:</span> <span class='int'>2</span>
<span class='comment'># =&gt; &quot;333.33&quot;</span></code></pre>
<p>See #15379.</p>
<p><em>Juanjo Bazán</em></p>
</li>
<li>
<p>Removed deprecated <code>Numeric#ago</code> and friends</p>
<p>Replacements:</p>
<pre class="code ruby"><code class="ruby">5.ago   =&gt; 5.seconds.ago
5.until =&gt; 5.seconds.until
5.since =&gt; 5.seconds.since
5.from_now =&gt; 5.seconds.from_now</code></pre>
<p>See #12389 for the history and rationale behind this.</p>
<p><em>Godfrey Chan</em></p>
</li>
<li>
<p><a href="DateTime.html" title="DateTime (class)">DateTime</a> <code>advance</code> now supports partial days.</p>
<p>Before:</p>
<pre class="code ruby"><code class="ruby"><span class='const'><a href="DateTime.html" title="DateTime (class)">DateTime</a></span>.<span class='id identifier rubyid_now'>now</span>.<span class='id identifier rubyid_advance'>advance</span>(<span class='label'>days:</span> <span class='int'>1</span><span class='comma'>,</span> <span class='label'>hours:</span> <span class='int'>12</span>)</code></pre>
<p>After:</p>
<pre class="code ruby"><code class="ruby"><span class='const'><a href="DateTime.html" title="DateTime (class)">DateTime</a></span>.<span class='id identifier rubyid_now'>now</span>.<span class='id identifier rubyid_advance'>advance</span>(<span class='label'>days:</span> <span class='float'>1.5</span>)</code></pre>
<p>Fixes #12005.</p>
<p><em>Shay Davidson</em></p>
</li>
<li>
<p><a href="Hash.html#deep_transform_keys-instance_method" title="Hash#deep_transform_keys (method)">Hash#deep_transform_keys</a> and <a href="Hash.html#deep_transform_keys!-instance_method" title="Hash#deep_transform_keys! (method)">Hash#deep_transform_keys!</a> now transform hashes
in nested arrays.  This change also applies to <a href="Hash.html#deep_stringify_keys-instance_method" title="Hash#deep_stringify_keys (method)">Hash#deep_stringify_keys</a>,
<a href="Hash.html#deep_stringify_keys!-instance_method" title="Hash#deep_stringify_keys! (method)">Hash#deep_stringify_keys!</a>, <a href="Hash.html#deep_symbolize_keys-instance_method" title="Hash#deep_symbolize_keys (method)">Hash#deep_symbolize_keys</a> and
<a href="Hash.html#deep_symbolize_keys!-instance_method" title="Hash#deep_symbolize_keys! (method)">Hash#deep_symbolize_keys!</a>.</p>
<p><em>OZAWA Sakuro</em></p>
</li>
<li>
<p>Fixed confusing <code>DelegationError</code> in <a href="Module.html#delegate-instance_method" title="Module#delegate (method)">Module#delegate</a>.</p>
<p>See #15186.</p>
<p><em>Vladimir Yarotsky</em></p>
</li>
<li>
<p>Fixed <a href="ActiveSupport/Subscriber.html" title="ActiveSupport::Subscriber (class)">::ActiveSupport::Subscriber</a> so that no duplicate subscriber is created
when a subscriber method is redefined.</p>
<p><em>Dennis Schön</em></p>
</li>
<li>
<p>Remove deprecated string based terminators for <a href="ActiveSupport/Callbacks.html" title="ActiveSupport::Callbacks (module)">::ActiveSupport::Callbacks</a>.</p>
<p><em>Eileen M. Uchitelle</em></p>
</li>
<li>
<p>Fixed an issue when using
<a href="ActiveSupport/NumberHelper/NumberToDelimitedConverter.html" title="ActiveSupport::NumberHelper::NumberToDelimitedConverter (class)">::ActiveSupport::NumberHelper::NumberToDelimitedConverter</a> to
convert a value that is an <a href="ActiveSupport/SafeBuffer.html" title="ActiveSupport::SafeBuffer (class)">::ActiveSupport::SafeBuffer</a> introduced
in 2da9d67.</p>
<p>See #15064.</p>
<p><em>Mark J. Titorenko</em></p>
</li>
<li>
<p><code>TimeZone#parse</code> defaults the day of the month to '1' if any other date
components are specified. This is more consistent with the behavior of
<code>Time#parse</code>.</p>
<p><em>Ulysse Carion</em></p>
</li>
<li>
<p><code>humanize</code> strips leading underscores, if any.</p>
<p>Before:</p>
<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_id</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_humanize'>humanize</span> <span class='comment'># =&gt; &quot;&quot;</span></code></pre>
<p>After:</p>
<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_id</span><span class='tstring_end'>&#39;</span></span>.<span class='id identifier rubyid_humanize'>humanize</span> <span class='comment'># =&gt; &quot;Id&quot;</span></code></pre>
<p><em>Xavier Noria</em></p>
</li>
<li>
<p>Fixed backward compatibility issues introduced in 326e652.</p>
<p>Empty Hash or Array should not be present in serialization result.</p>
<pre class="code ruby"><code class="ruby">{<span class='label'>a:</span> []}.<span class='id identifier rubyid_to_query'>to_query</span> <span class='comment'># =&gt; &quot;&quot;
</span>{<span class='label'>a:</span> {}}.<span class='id identifier rubyid_to_query'>to_query</span> <span class='comment'># =&gt; &quot;&quot;</span></code></pre>
<p>For more info see #14948.</p>
<p><em>Bogdan Gusiev</em></p>
</li>
<li>
<p>Add <code>Digest::UUID::uuid_v3</code> and <code>Digest::UUID::uuid_v5</code> to support stable
UUID fixtures on PostgreSQL.</p>
<p><em>Roderick van Domburg</em></p>
</li>
<li>
<p>Fixed <a href="ActiveSupport/Duration.html#eql%3F-instance_method" title="ActiveSupport::Duration#eql? (method)">ActiveSupport::Duration#eql?</a> so that <code>1.second.eql?(1.second)</code> is
true.</p>
<p>This fixes the current situation of:</p>
<pre class="code ruby"><code class="ruby"><span class='int'>1</span>.<span class='id identifier rubyid_second'>second</span>.<span class='id identifier rubyid_eql?'>eql?</span>(<span class='int'>1</span>.<span class='id identifier rubyid_second'>second</span>) <span class='comment'># =&gt; false</span></code></pre>
<p><code>eql?</code> also requires that the other object is an <a href="ActiveSupport/Duration.html" title="ActiveSupport::Duration (class)">::ActiveSupport::Duration</a>.
This requirement makes <a href="ActiveSupport/Duration.html" title="ActiveSupport::Duration (class)">::ActiveSupport::Duration</a>'s behavior consistent with
the behavior of Ruby's numeric types:</p>
<pre class="code ruby"><code class="ruby"><span class='int'>1</span>.<span class='id identifier rubyid_eql?'>eql?</span>(<span class='float'>1.0</span>) <span class='comment'># =&gt; false
</span><span class='float'>1.0</span>.<span class='id identifier rubyid_eql?'>eql?</span>(<span class='int'>1</span>) <span class='comment'># =&gt; false
</span>
<span class='int'>1</span>.<span class='id identifier rubyid_second'>second</span>.<span class='id identifier rubyid_eql?'>eql?</span>(<span class='int'>1</span>) <span class='comment'># =&gt; false (was true)
</span><span class='int'>1</span>.<span class='id identifier rubyid_eql?'>eql?</span>(<span class='int'>1</span>.<span class='id identifier rubyid_second'>second</span>) <span class='comment'># =&gt; false
</span>
{ <span class='int'>1</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='float'>1.0</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span> }
<span class='comment'># =&gt; { 1 =&gt; &quot;foo&quot;, 1.0 =&gt; &quot;bar&quot; }
</span>
{ <span class='int'>1</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>1</span>.<span class='id identifier rubyid_second'>second</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span> }
<span class='comment'># now =&gt; { 1 =&gt; &quot;foo&quot;, 1.second =&gt; &quot;bar&quot; }
</span><span class='comment'># was =&gt; { 1 =&gt; &quot;bar&quot; }</span></code></pre>
<p>And though the behavior of these hasn't changed, for reference:</p>
<pre class="code ruby"><code class="ruby"><span class='int'>1</span> <span class='op'>==</span> <span class='float'>1.0</span> <span class='comment'># =&gt; true
</span><span class='float'>1.0</span> <span class='op'>==</span> <span class='int'>1</span> <span class='comment'># =&gt; true
</span>
<span class='int'>1</span> <span class='op'>==</span> <span class='int'>1</span>.<span class='id identifier rubyid_second'>second</span> <span class='comment'># =&gt; true
</span><span class='int'>1</span>.<span class='id identifier rubyid_second'>second</span> <span class='op'>==</span> <span class='int'>1</span> <span class='comment'># =&gt; true</span></code></pre>
<p><em>Emily Dobervich</em></p>
</li>
<li>
<p><a href="ActiveSupport/SafeBuffer.html#prepend-instance_method" title="ActiveSupport::SafeBuffer#prepend (method)">ActiveSupport::SafeBuffer#prepend</a> acts like <code>String#prepend</code> and modifies
instance in-place, returning self. <a href="ActiveSupport/SafeBuffer.html#prepend!-instance_method" title="ActiveSupport::SafeBuffer#prepend! (method)">ActiveSupport::SafeBuffer#prepend!</a> is
deprecated.</p>
<p><em>Pavel Pravosud</em></p>
</li>
<li>
<p><a href="#HashWithIndifferentAccess-constant" title="HashWithIndifferentAccess (constant)">HashWithIndifferentAccess</a> better respects <code>#to_hash</code> on objects it
receives. In particular, <code>.new</code>, <code>#update</code>, <code>#merge</code>, and <code>#replace</code> accept
objects which respond to <code>#to_hash</code>, even if those objects are not hashes
directly.</p>
<p><em>Peter Jaros</em></p>
</li>
<li>
<p>Deprecate <a href="Class.html#superclass_delegating_accessor-instance_method" title="Class#superclass_delegating_accessor (method)">Class#superclass_delegating_accessor</a>, use <a href="Class.html#class_attribute-instance_method" title="Class#class_attribute (method)">Class#class_attribute</a> instead.</p>
<p><em>Akshay Vishnoi</em></p>
</li>
<li>
<p>Ensure classes which <code>include Enumerable</code> get <code>#to_json</code> in addition to
<code>#as_json</code>.</p>
<p><em>Sammy Larbi</em></p>
</li>
<li>
<p>Change the signature of <code>fetch_multi</code> to return a hash rather than an
array. This makes it consistent with the output of <code>read_multi</code>.</p>
<p><em>Parker Selbert</em></p>
</li>
<li>
<p>Introduce <code>Concern#class_methods</code> as a sleek alternative to clunky
<code>module ClassMethods</code>. Add <a href="Kernel.html#concern-instance_method" title="Kernel#concern (method)">Kernel#concern</a> to define at the toplevel
without chunky <code>module Foo; extend ActiveSupport::Concern</code> boilerplate.</p>
<pre class="code ruby"><code class="ruby"><span class='comment'># app/models/concerns/authentication.rb
</span><span class='id identifier rubyid_concern'>concern</span> <span class='symbeg'>:</span><span class='const'>Authentication</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_included'>included</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_after_create'>after_create</span> <span class='symbeg'>:</span><span class='id identifier rubyid_generate_private_key'>generate_private_key</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_class_methods'>class_methods</span> <span class='kw'>do</span>
    <span class='kw'>def</span> <span class='id identifier rubyid_authenticate'>authenticate</span>(<span class='id identifier rubyid_credentials'>credentials</span>)
      <span class='comment'># ...
</span>    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_generate_private_key'>generate_private_key</span>
    <span class='comment'># ...
</span>  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='comment'># app/models/user.rb
</span><span class='kw'>class</span> <span class='const'>User</span> <span class='op'>&lt;</span> <span class='const'><a href="ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="ActiveRecord/Base.html" title="ActiveRecord::Base (class)">Base</a></span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>Authentication</span>
<span class='kw'>end</span></code></pre>
<p><em>Jeremy Kemper</em></p>
</li>
</ul>
<p>Please check <a href="https://github.com/rails/rails/blob/4-1-stable/activesupport/CHANGELOG.md" target="_parent" title="4-1-stable">4-1-stable</a> for previous changes.</p>

<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>