<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: ERB &mdash; erb Ruby-2.4.0 d2016-07-07</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../css/common.css' />

<script type='text/javascript'>
  var pathId = "ERB",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../index.html'>Home</a> &raquo; 
          <a href='../index.html'>Ruby-2.4.0</a> &raquo; 
          <a href='index.html'>erb</a> &raquo; 
          <a href='_index.html'>Index (E)</a> &raquo; 
          <span class='title'>ERB</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: ERB</h1>

<div class="box_info">
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class='inheritName'>Object</span>
        <ul class='fullTree'>
          <li>Object</li>
            <li class='next'>ERB</li>
        </ul>
        <a href='#' class='inheritanceTree'>show all</a>
    </dd>
  </dl>



  <dl>
    <dt>Defined in:</dt>
    <dd>erb.rb</dd>
  </dl>
</div>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<h2 id="label-ERB+--+Ruby+Templating">ERB – Ruby Templating</h2>

<h3 id="label-Introduction">Introduction</h3>

<p>ERB provides an easy to use but powerful templating system for Ruby.  Using
ERB, actual Ruby code can be added to any plain text document for the
purposes of generating document information details and/or flow control.</p>

<p>A very simple example is this:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>erb</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> <span class='int'>42</span>
<span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='const'>ERB</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='heredoc_beg'>&lt;&lt;-EOF</span>
<span class='tstring_content'>  The value of x is: &lt;%= x %&gt;
</span><span class='heredoc_end'>EOF
</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_result'>result</span><span class='lparen'>(</span><span class='id identifier rubyid_binding'>binding</span><span class='rparen'>)</span>
</code></pre>

<p><em>Prints:</em> The value of x is: 42</p>

<p>More complex examples are given below.</p>

<h3 id="label-Recognized+Tags">Recognized Tags</h3>

<p>ERB recognizes certain tags in the provided template and converts them
based on the rules below:</p>

<pre class="code ruby"><code class="ruby">&lt;% Ruby code -- inline with output %&gt;
&lt;%= Ruby expression -- replace with result %&gt;
&lt;%# comment -- ignored -- useful in testing %&gt;
% a line of Ruby code -- treated as &lt;% line %&gt; (optional -- see ERB.new)
%% replaced with % if first thing on a line and % processing is used
&lt;%% or %%&gt; -- replace with &lt;% or %&gt; respectively</code></pre>

<p>All other text is passed through ERB filtering unchanged.</p>

<h3 id="label-Options">Options</h3>

<p>There are several settings you can change when you use ERB:</p>
<ul><li>
<p>the nature of the tags that are recognized;</p>
</li><li>
<p>the value of <code>$SAFE</code> under which the template is run;</p>
</li><li>
<p>the binding used to resolve local variables in the template.</p>
</li></ul>

<p>See the <a href="#new-class_method" title="ERB.new (method)">ERB.new</a> and <a href="#result-instance_method" title="ERB#result (method)">#result</a> methods for more detail.</p>

<h3 id="label-Character+encodings">Character encodings</h3>

<p>ERB (or Ruby code generated by ERB) returns a string in the same character
encoding as the input string.  When the input string has a magic comment,
however, it returns a string in the encoding specified by the magic
comment.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># -*- coding: utf-8 -*-
</span><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>erb</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='const'>ERB</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='heredoc_beg'>&lt;&lt;EOF</span>
<span class='tstring_content'>&lt;%#-*- coding: Big5 -*-%&gt;
  \_\_ENCODING\_\_ is &lt;%= \_\_ENCODING\_\_ %&gt;.
</span><span class='heredoc_end'>EOF
</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_result'>result</span>
</code></pre>

<p><em>Prints:</em> _<em>ENCODING</em>_ is Big5.</p>

<h3 id="label-Examples">Examples</h3>

<h4 id="label-Plain+Text">Plain Text</h4>

<p>ERB is useful for any generic templating situation.  Note that in this
example, we use the convenient “% at start of line” tag, and we quote the
template literally with <code>%q{...}</code> to avoid trouble with the
backslash.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>erb</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># Create template.
</span><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>%q{</span><span class='tstring_content'>
  From:  James Edward Gray II &lt;james@grayproductions.net&gt;
  To:  &lt;%= to %&gt;
  Subject:  Addressing Needs

  &lt;%= to[/\w+/] %&gt;:

  Just wanted to send a quick note assuring that your needs are being
  addressed.

  I want you to know that my team will keep working on the issues,
  especially:

  &lt;%# ignore numerous minor requests -- focus on priorities %&gt;
  % priorities.each do |priority|
    * &lt;%= priority %&gt;
  % end

  Thanks for your patience.

  James Edward Gray II
</span><span class='tstring_end'>}</span></span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^  </span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

<span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='const'>ERB</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_template'>template</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%&lt;&gt;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># Set up template data.
</span><span class='id identifier rubyid_to'>to</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Community Spokesman &lt;spokesman@ruby_community.org&gt;</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_priorities'>priorities</span> <span class='op'>=</span> <span class='lbracket'>[</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Run Ruby Quiz</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
               <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Document Modules</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
               <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Answer Questions on Ruby Talk</span><span class='tstring_end'>&quot;</span></span> <span class='rbracket'>]</span>

<span class='comment'># Produce result.
</span><span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='id identifier rubyid_message'>message</span><span class='period'>.</span><span class='id identifier rubyid_result'>result</span>
<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_email'>email</span>
</code></pre>

<p><em>Generates:</em></p>

<pre class="code ruby"><code class="ruby">From:  James Edward Gray II &lt;james@grayproductions.net&gt;
To:  Community Spokesman &lt;spokesman@ruby_community.org&gt;
Subject:  Addressing Needs

Community:

Just wanted to send a quick note assuring that your needs are being addressed.

I want you to know that my team will keep working on the issues, especially:

    * Run Ruby Quiz
    * Document Modules
    * Answer Questions on Ruby Talk

Thanks for your patience.

James Edward Gray II</code></pre>

<h4 id="label-Ruby+in+HTML">Ruby in HTML</h4>

<p>ERB is often used in <code>.rhtml</code> files (HTML with embedded Ruby). 
Notice the need in this example to provide a special binding when the
template is run, so that the instance variables in the Product object can
be resolved.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>erb</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># Build template data class.
</span><span class='kw'>class</span> <span class='const'>Product</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span> <span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_desc'>desc</span><span class='comma'>,</span> <span class='id identifier rubyid_cost'>cost</span> <span class='rparen'>)</span>
    <span class='ivar'>@code</span> <span class='op'>=</span> <span class='id identifier rubyid_code'>code</span>
    <span class='ivar'>@name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
    <span class='ivar'>@desc</span> <span class='op'>=</span> <span class='id identifier rubyid_desc'>desc</span>
    <span class='ivar'>@cost</span> <span class='op'>=</span> <span class='id identifier rubyid_cost'>cost</span>

    <span class='ivar'>@features</span> <span class='op'>=</span> <span class='lbracket'>[</span> <span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_add_feature'>add_feature</span><span class='lparen'>(</span> <span class='id identifier rubyid_feature'>feature</span> <span class='rparen'>)</span>
    <span class='ivar'>@features</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_feature'>feature</span>
  <span class='kw'>end</span>

  <span class='comment'># Support templating of member data.
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_get_binding'>get_binding</span>
    <span class='id identifier rubyid_binding'>binding</span>
  <span class='kw'>end</span>

  <span class='comment'># ...
</span><span class='kw'>end</span>

<span class='comment'># Create template.
</span><span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>%{</span><span class='tstring_content'>
  &lt;html&gt;
    &lt;head&gt;&lt;title&gt;Ruby Toys -- &lt;%= @name %&gt;&lt;/title&gt;&lt;/head&gt;
    &lt;body&gt;

      &lt;h1&gt;&lt;%= @name %&gt; (&lt;%= @code %&gt;)&lt;/h1&gt;
      &lt;p&gt;&lt;%= @desc %&gt;&lt;/p&gt;

      &lt;ul&gt;
        &lt;% @features.each do |f| %&gt;
          &lt;li&gt;&lt;b&gt;&lt;%= f %&gt;&lt;/b&gt;&lt;/li&gt;
        &lt;% end %&gt;
      &lt;/ul&gt;

      &lt;p&gt;
        &lt;% if @cost &lt; 10 %&gt;
          &lt;b&gt;Only &lt;%= @cost %&gt;!!!&lt;/b&gt;
        &lt;% else %&gt;
           Call for a price, today!
        &lt;% end %&gt;
      &lt;/p&gt;

    &lt;/body&gt;
  &lt;/html&gt;
</span><span class='tstring_end'>}</span></span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^  </span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

<span class='id identifier rubyid_rhtml'>rhtml</span> <span class='op'>=</span> <span class='const'>ERB</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_template'>template</span><span class='rparen'>)</span>

<span class='comment'># Set up template data.
</span><span class='id identifier rubyid_toy'>toy</span> <span class='op'>=</span> <span class='const'>Product</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TZ-1002</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Rubysapien</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Geek&#39;s Best Friend!  Responds to Ruby commands...</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                   <span class='float'>999.95</span> <span class='rparen'>)</span>
<span class='id identifier rubyid_toy'>toy</span><span class='period'>.</span><span class='id identifier rubyid_add_feature'>add_feature</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Listens for verbal commands in the Ruby language!</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_toy'>toy</span><span class='period'>.</span><span class='id identifier rubyid_add_feature'>add_feature</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ignores Perl, Java, and all C variants.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_toy'>toy</span><span class='period'>.</span><span class='id identifier rubyid_add_feature'>add_feature</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Karate-Chop Action!!!</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_toy'>toy</span><span class='period'>.</span><span class='id identifier rubyid_add_feature'>add_feature</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Matz signature on left leg.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_toy'>toy</span><span class='period'>.</span><span class='id identifier rubyid_add_feature'>add_feature</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Gem studded eyes... Rubies, of course!</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># Produce result.
</span><span class='id identifier rubyid_rhtml'>rhtml</span><span class='period'>.</span><span class='id identifier rubyid_run'>run</span><span class='lparen'>(</span><span class='id identifier rubyid_toy'>toy</span><span class='period'>.</span><span class='id identifier rubyid_get_binding'>get_binding</span><span class='rparen'>)</span>
</code></pre>

<p><em>Generates (some blank lines removed):</em></p>

<pre class="code ruby"><code class="ruby">&lt;html&gt;
  &lt;head&gt;&lt;title&gt;Ruby Toys -- Rubysapien&lt;/title&gt;&lt;/head&gt;
  &lt;body&gt;

    &lt;h1&gt;Rubysapien (TZ-1002)&lt;/h1&gt;
    &lt;p&gt;Geek&#39;s Best Friend!  Responds to Ruby commands...&lt;/p&gt;

    &lt;ul&gt;
        &lt;li&gt;&lt;b&gt;Listens for verbal commands in the Ruby language!&lt;/b&gt;&lt;/li&gt;
        &lt;li&gt;&lt;b&gt;Ignores Perl, Java, and all C variants.&lt;/b&gt;&lt;/li&gt;
        &lt;li&gt;&lt;b&gt;Karate-Chop Action!!!&lt;/b&gt;&lt;/li&gt;
        &lt;li&gt;&lt;b&gt;Matz signature on left leg.&lt;/b&gt;&lt;/li&gt;
        &lt;li&gt;&lt;b&gt;Gem studded eyes... Rubies, of course!&lt;/b&gt;&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;
         Call for a price, today!
    &lt;/p&gt;

  &lt;/body&gt;
&lt;/html&gt;</code></pre>

<h3 id="label-Notes">Notes</h3>

<p>There are a variety of templating solutions available in various Ruby
projects:</p>
<ul><li>
<p>ERB&#39;s big brother, eRuby, works the same but is written in C for speed;</p>
</li><li>
<p>Amrita (smart at producing HTML/XML);</p>
</li><li>
<p>cs/Template (written in C for speed);</p>
</li><li>
<p>RDoc, distributed with Ruby, uses its own template engine, which can be
reused elsewhere;</p>
</li><li>
<p>and others; search <a href="https://rubygems.org/">RubyGems.org</a> or <a
href="https://www.ruby-toolbox.com/">The Ruby Toolbox</a>.</p>
</li></ul>

<p>Rails, the web application framework, uses ERB to create views.</p>


  </div>
</div>
<div class="tags">
  
</div>
<h2>Defined Under Namespace</h2>

  <p class='children'><strong class='modules'>Modules:</strong>
    <a href="ERB/DefMethod.html" title="ERB::DefMethod (module)">DefMethod</a>,
    <a href="ERB/Util.html" title="ERB::Util (module)">Util</a>
  </p>
  <p class='children'><strong class='classes'>Classes:</strong>
    <a href="ERB/Compiler.html" title="ERB::Compiler (class)">Compiler</a>
  </p>

<h2 id='t2_cnst'>Constant Summary<small><a href="#" class="summary_toggle">collapse</a></small></h2>

  <dl class="constants summary full">
    <dt id='Revision-constant'>
      Revision =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>#&#39;</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code'><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$Date::                           $</span><span class='tstring_end'>&#39;</span></span></pre>
    </dd>
  </dl>



<h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>

  <ul class="summary">
    <li>
      <span class="summary_signature">
        <a href="#encoding-instance_method" title="#encoding (instance method)">#<strong>encoding</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>The encoding to eval</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#filename-instance_method" title="#filename (instance method)">#<strong>filename</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>The optional <em>filename</em> argument passed to <code>Kernel.eval</code> when the
ERB code is run</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#lineno-instance_method" title="#lineno (instance method)">#<strong>lineno</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>The optional <em>lineno</em> argument passed to <code>Kernel.eval</code> when the ERB
code is run</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#src-instance_method" title="#src (instance method)">#<strong>src</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>The Ruby code generated by ERB</p>
</div>
      </span>
    </li>
  </ul>


<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(str, safe_level = nil, trim_mode = nil, eoutvar = &#39;_erbout&#39;)  &#x21d2; ERB </a>
      </span>
      <span class='note title constructor'>constructor</span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Constructs a new ERB object with the template specified in <em>str</em>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#version-class_method" title=".version (class method)">.<strong>version</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Returns revision information for the erb.rb module.</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#def_class-instance_method" title="#def_class (instance method)">#<strong>def_class</strong>(superklass = Object, methodname = &#39;result&#39;)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Define unnamed class which has <em>methodname</em> as instance method, and
return it.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#def_method-instance_method" title="#def_method (instance method)">#<strong>def_method</strong>(mod, methodname, fname = &#39;(ERB)&#39;)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Define <em>methodname</em> as instance method of <em>mod</em> from compiled
Ruby source.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#def_module-instance_method" title="#def_module (instance method)">#<strong>def_module</strong>(methodname = &#39;erb&#39;)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Create unnamed module, define <em>methodname</em> as instance method of it,
and return it.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#location%3D-instance_method" title="#location= (instance method)">#<strong>location=</strong>(filename, lineno)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#make_compiler-instance_method" title="#make_compiler (instance method)">#<strong>make_compiler</strong>(trim_mode)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Creates a new compiler for ERB.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#new_toplevel-instance_method" title="#new_toplevel (instance method)">#<strong>new_toplevel</strong>  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Returns a new binding each time <strong>near</strong> TOPLEVEL_BINDING for
runs that do not specify a binding.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#result-instance_method" title="#result (instance method)">#<strong>result</strong>(b = new_toplevel)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Executes the generated ERB code to produce a completed template, returning
the results of that code.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#run-instance_method" title="#run (instance method)">#<strong>run</strong>(b = new_toplevel)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Generate results and print them.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#set_eoutvar-instance_method" title="#set_eoutvar (instance method)">#<strong>set_eoutvar</strong>(compiler, eoutvar = &#39;_erbout&#39;)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Can be used to set <em>eoutvar</em> as described in <a href="#new-class_method" title="ERB.new (method)">ERB.new</a>.</p>
</div>
      </span>
    </li>
  </ul>

<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>
  <section class='method_details first' id="new-class_method">
  <h3 class='signature first'>
  .<strong>new</strong>(str, safe_level = nil, trim_mode = nil, eoutvar = &#39;_erbout&#39;)  &#x21d2; <tt><a href="" title="ERB (class)">ERB</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Constructs a new ERB object with the template specified in <em>str</em>.</p>

<p>An ERB object works by building a chunk of Ruby code that will output the
completed template when run. If <em>safe_level</em> is set to a non-nil
value, ERB code will be run in a separate thread with
<strong>$SAFE</strong> set to the provided level.</p>

<p>If <em>trim_mode</em> is passed a String containing one or more of the
following modifiers, ERB will adjust its code generation as listed:</p>

<pre class="code ruby"><code class="ruby">%  enables Ruby code processing for lines beginning with %
&lt;&gt; omit newline for lines starting with &lt;% and ending in %&gt;
&gt;  omit newline for lines ending in %&gt;
-  omit blank lines ending in -%&gt;</code></pre>

<p><em>eoutvar</em> can be used to set the name of the variable ERB will build
up its output in.  This is useful when you need to run multiple ERB
templates through the same binding and/or when you want to control where
output ends up.  Pass the name of the variable to be used inside a String.</p>

<h3 id="label-Example">Example</h3>

<pre class="code ruby"><code class="ruby">require &quot;erb&quot;

# build data class
class Listings
  PRODUCT = { :name =&gt; &quot;Chicken Fried Steak&quot;,
              :desc =&gt; &quot;A well messages pattie, breaded and fried.&quot;,
              :cost =&gt; 9.95 }

  attr_reader :product, :price

  def initialize( product = &quot;&quot;, price = &quot;&quot; )
    @product = product
    @price = price
  end

  def build
    b = binding
    # create and run templates, filling member data variables
    ERB.new(&lt;&lt;-&#39;END_PRODUCT&#39;.gsub(/^\s+/, &quot;&quot;), 0, &quot;&quot;, &quot;@product&quot;).result b
      &lt;%= PRODUCT[:name] %&gt;
      &lt;%= PRODUCT[:desc] %&gt;
    END_PRODUCT
    ERB.new(&lt;&lt;-&#39;END_PRICE&#39;.gsub(/^\s+/, &quot;&quot;), 0, &quot;&quot;, &quot;@price&quot;).result b
      &lt;%= PRODUCT[:name] %&gt; -- &lt;%= PRODUCT[:cost] %&gt;
      &lt;%= PRODUCT[:desc] %&gt;
    END_PRICE
  end
end

# setup template data
listings = {Listings.new}
listings.build

puts listings.product + &quot;\n&quot; + listings.price</code></pre>

<p><em>Generates</em></p>

<pre class="code ruby"><code class="ruby">Chicken Fried Steak
A well messages pattie, breaded and fried.

Chicken Fried Steak -- 9.95
A well messages pattie, breaded and fried.</code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


827
828
829
830
831
832
833
834</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'erb.rb', line 827</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='comma'>,</span> <span class='id identifier rubyid_safe_level'>safe_level</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_trim_mode'>trim_mode</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_eoutvar'>eoutvar</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_erbout</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='ivar'>@safe_level</span> <span class='op'>=</span> <span class='id identifier rubyid_safe_level'>safe_level</span>
  <span class='id identifier rubyid_compiler'>compiler</span> <span class='op'>=</span> <span class='id identifier rubyid_make_compiler'>make_compiler</span><span class='lparen'>(</span><span class='id identifier rubyid_trim_mode'>trim_mode</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_set_eoutvar'>set_eoutvar</span><span class='lparen'>(</span><span class='id identifier rubyid_compiler'>compiler</span><span class='comma'>,</span> <span class='id identifier rubyid_eoutvar'>eoutvar</span><span class='rparen'>)</span>
  <span class='ivar'>@src</span><span class='comma'>,</span> <span class='ivar'>@encoding</span><span class='comma'>,</span> <span class='ivar'>@frozen_string</span> <span class='op'>=</span> <span class='op'>*</span><span class='id identifier rubyid_compiler'>compiler</span><span class='period'>.</span><span class='id identifier rubyid_compile'>compile</span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='rparen'>)</span>
  <span class='ivar'>@filename</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@lineno</span> <span class='op'>=</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section><h2 class='y_details'>Instance Attribute Details</h2>
  <section class='method_details first' id="encoding-instance_method">
  <h3 class='signature first'>
  #<strong>encoding</strong>   <span class="extras">(readonly)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The encoding to eval</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


847</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'erb.rb', line 847</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:encoding</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="filename-instance_method">
  <h3 class='signature'>
  #<strong>filename</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The optional <em>filename</em> argument passed to <code>Kernel.eval</code> when the
ERB code is run</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


851</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'erb.rb', line 851</span>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbol'>:filename</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="lineno-instance_method">
  <h3 class='signature'>
  #<strong>lineno</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The optional <em>lineno</em> argument passed to <code>Kernel.eval</code> when the ERB
code is run</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


855</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'erb.rb', line 855</span>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbol'>:lineno</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="src-instance_method">
  <h3 class='signature'>
  #<strong>src</strong>   <span class="extras">(readonly)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The Ruby code generated by ERB</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


844</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'erb.rb', line 844</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:src</span></pre>
  </div>
</div>
</section><h2 class='y_details'>Class Method Details</h2>
  <section class='method_details first' id="version-class_method">
  <h3 class='signature first'>
  .<strong>version</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns revision information for the erb.rb module.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


265
266
267</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'erb.rb', line 265</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_version'>version</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>erb.rb [2.1.0 </span><span class='embexpr_beg'>#{</span><span class='const'>ERB</span><span class='op'>::</span><span class='const'>Revision</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>]</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section><h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="def_class-instance_method">
  <h3 class='signature first'>
  #<strong>def_class</strong>(superklass = Object, methodname = &#39;result&#39;)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Define unnamed class which has <em>methodname</em> as instance method, and
return it.</p>

<p>example:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>MyClass_</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_arg1'>arg1</span><span class='comma'>,</span> <span class='id identifier rubyid_arg2'>arg2</span><span class='rparen'>)</span>
    <span class='ivar'>@arg1</span> <span class='op'>=</span> <span class='id identifier rubyid_arg1'>arg1</span><span class='semicolon'>;</span>  <span class='ivar'>@arg2</span> <span class='op'>=</span> <span class='id identifier rubyid_arg2'>arg2</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
<span class='id identifier rubyid_filename'>filename</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>example.rhtml</span><span class='tstring_end'>&#39;</span></span>  <span class='comment'># @arg1 and @arg2 are used in example.rhtml
</span><span class='id identifier rubyid_erb'>erb</span> <span class='op'>=</span> <span class='const'>ERB</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='id identifier rubyid_erb'>erb</span><span class='period'>.</span><span class='id identifier rubyid_filename'>filename</span> <span class='op'>=</span> <span class='id identifier rubyid_filename'>filename</span>
<span class='const'>MyClass</span> <span class='op'>=</span> <span class='id identifier rubyid_erb'>erb</span><span class='period'>.</span><span class='id identifier rubyid_def_class'>def_class</span><span class='lparen'>(</span><span class='const'>MyClass_</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>render()</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_print'>print</span> <span class='const'>MyClass</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>123</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_render'>render</span><span class='lparen'>(</span><span class='rparen'>)</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


950
951
952
953
954</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'erb.rb', line 950</span>

<span class='kw'>def</span> <span class='id identifier rubyid_def_class'>def_class</span><span class='lparen'>(</span><span class='id identifier rubyid_superklass'>superklass</span><span class='op'>=</span><span class='const'>Object</span><span class='comma'>,</span> <span class='id identifier rubyid_methodname'>methodname</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>result</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cls'>cls</span> <span class='op'>=</span> <span class='const'>Class</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_superklass'>superklass</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_def_method'>def_method</span><span class='lparen'>(</span><span class='id identifier rubyid_cls'>cls</span><span class='comma'>,</span> <span class='id identifier rubyid_methodname'>methodname</span><span class='comma'>,</span> <span class='ivar'>@filename</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(ERB)</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cls'>cls</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="def_method-instance_method">
  <h3 class='signature'>
  #<strong>def_method</strong>(mod, methodname, fname = &#39;(ERB)&#39;)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Define <em>methodname</em> as instance method of <em>mod</em> from compiled
Ruby source.</p>

<p>example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_filename'>filename</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>example.rhtml</span><span class='tstring_end'>&#39;</span></span>   <span class='comment'># &#39;arg1&#39; and &#39;arg2&#39; are used in example.rhtml
</span><span class='id identifier rubyid_erb'>erb</span> <span class='op'>=</span> <span class='const'>ERB</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='id identifier rubyid_erb'>erb</span><span class='period'>.</span><span class='id identifier rubyid_def_method'>def_method</span><span class='lparen'>(</span><span class='const'>MyClass</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>render(arg1, arg2)</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_filename'>filename</span><span class='rparen'>)</span>
<span class='id identifier rubyid_print'>print</span> <span class='const'>MyClass</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='period'>.</span><span class='id identifier rubyid_render'>render</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>123</span><span class='rparen'>)</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


914
915
916
917
918
919</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'erb.rb', line 914</span>

<span class='kw'>def</span> <span class='id identifier rubyid_def_method'>def_method</span><span class='lparen'>(</span><span class='id identifier rubyid_mod'>mod</span><span class='comma'>,</span> <span class='id identifier rubyid_methodname'>methodname</span><span class='comma'>,</span> <span class='id identifier rubyid_fname'>fname</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(ERB)</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_src'>src</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_src'>src</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^(?!#|$)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>def </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_methodname'>methodname</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nend\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_mod'>mod</span><span class='period'>.</span><span class='id identifier rubyid_module_eval'>module_eval</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_eval'>eval</span><span class='lparen'>(</span><span class='id identifier rubyid_src'>src</span><span class='comma'>,</span> <span class='id identifier rubyid_binding'>binding</span><span class='comma'>,</span> <span class='id identifier rubyid_fname'>fname</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="def_module-instance_method">
  <h3 class='signature'>
  #<strong>def_module</strong>(methodname = &#39;erb&#39;)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Create unnamed module, define <em>methodname</em> as instance method of it,
and return it.</p>

<p>example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_filename'>filename</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>example.rhtml</span><span class='tstring_end'>&#39;</span></span>   <span class='comment'># &#39;arg1&#39; and &#39;arg2&#39; are used in example.rhtml
</span><span class='id identifier rubyid_erb'>erb</span> <span class='op'>=</span> <span class='const'>ERB</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='id identifier rubyid_erb'>erb</span><span class='period'>.</span><span class='id identifier rubyid_filename'>filename</span> <span class='op'>=</span> <span class='id identifier rubyid_filename'>filename</span>
<span class='const'>MyModule</span> <span class='op'>=</span> <span class='id identifier rubyid_erb'>erb</span><span class='period'>.</span><span class='id identifier rubyid_def_module'>def_module</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>render(arg1, arg2)</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>class</span> <span class='const'>MyClass</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>MyModule</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


931
932
933
934
935</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'erb.rb', line 931</span>

<span class='kw'>def</span> <span class='id identifier rubyid_def_module'>def_module</span><span class='lparen'>(</span><span class='id identifier rubyid_methodname'>methodname</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>erb</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_mod'>mod</span> <span class='op'>=</span> <span class='const'>Module</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_def_method'>def_method</span><span class='lparen'>(</span><span class='id identifier rubyid_mod'>mod</span><span class='comma'>,</span> <span class='id identifier rubyid_methodname'>methodname</span><span class='comma'>,</span> <span class='ivar'>@filename</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(ERB)</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_mod'>mod</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="location=-instance_method">
  <h3 class='signature'>
  #<strong>location=</strong>(filename, lineno)  
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


857
858
859
860</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'erb.rb', line 857</span>

<span class='kw'>def</span> <span class='id identifier rubyid_location='>location=</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='id identifier rubyid_lineno'>lineno</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='ivar'>@filename</span> <span class='op'>=</span> <span class='id identifier rubyid_filename'>filename</span>
  <span class='ivar'>@lineno</span> <span class='op'>=</span> <span class='id identifier rubyid_lineno'>lineno</span> <span class='kw'>if</span> <span class='id identifier rubyid_lineno'>lineno</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="make_compiler-instance_method">
  <h3 class='signature'>
  #<strong>make_compiler</strong>(trim_mode)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates a new compiler for ERB.  See <a href="ERB/Compiler.html" title="ERB::Compiler (class)">Compiler</a>.new for details</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


839
840
841</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'erb.rb', line 839</span>

<span class='kw'>def</span> <span class='id identifier rubyid_make_compiler'>make_compiler</span><span class='lparen'>(</span><span class='id identifier rubyid_trim_mode'>trim_mode</span><span class='rparen'>)</span>
  <span class='const'>ERB</span><span class='op'>::</span><span class='const'>Compiler</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_trim_mode'>trim_mode</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="new_toplevel-instance_method">
  <h3 class='signature'>
  #<strong>new_toplevel</strong>   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns a new binding each time <strong>near</strong> TOPLEVEL_BINDING for
runs that do not specify a binding.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


902
903
904</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'erb.rb', line 902</span>

<span class='kw'>def</span> <span class='id identifier rubyid_new_toplevel'>new_toplevel</span>
  <span class='const'>TOPLEVEL_BINDING</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="result-instance_method">
  <h3 class='signature'>
  #<strong>result</strong>(b = new_toplevel)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Executes the generated ERB code to produce a completed template, returning
the results of that code.  (See <a href="#new-class_method" title="ERB.new (method)">new</a> for details on how this process
can be affected by <em>safe_level</em>.)</p>

<p><em>b</em> accepts a Binding object which is used to set the context of
code evaluation.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


887
888
889
890
891
892
893
894
895
896</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'erb.rb', line 887</span>

<span class='kw'>def</span> <span class='id identifier rubyid_result'>result</span><span class='lparen'>(</span><span class='id identifier rubyid_b'>b</span><span class='op'>=</span><span class='id identifier rubyid_new_toplevel'>new_toplevel</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='ivar'>@safe_level</span>
    <span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span>
      <span class='gvar'>$SAFE</span> <span class='op'>=</span> <span class='ivar'>@safe_level</span>
      <span class='id identifier rubyid_eval'>eval</span><span class='lparen'>(</span><span class='ivar'>@src</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='ivar'>@filename</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(erb)</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='ivar'>@lineno</span><span class='rparen'>)</span>
    <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_eval'>eval</span><span class='lparen'>(</span><span class='ivar'>@src</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='ivar'>@filename</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(erb)</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='ivar'>@lineno</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="run-instance_method">
  <h3 class='signature'>
  #<strong>run</strong>(b = new_toplevel)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Generate results and print them. (see <a href="#result-instance_method" title="ERB#result (method)">#result</a>)</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


875
876
877</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'erb.rb', line 875</span>

<span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span><span class='lparen'>(</span><span class='id identifier rubyid_b'>b</span><span class='op'>=</span><span class='id identifier rubyid_new_toplevel'>new_toplevel</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_print'>print</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_result'>result</span><span class='lparen'>(</span><span class='id identifier rubyid_b'>b</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="set_eoutvar-instance_method">
  <h3 class='signature'>
  #<strong>set_eoutvar</strong>(compiler, eoutvar = &#39;_erbout&#39;)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Can be used to set <em>eoutvar</em> as described in <a href="#new-class_method" title="ERB.new (method)">new</a>.  It&#39;s
probably easier to just use the constructor though, since calling this
method requires the setup of an ERB <em>compiler</em> object.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


867
868
869
870
871
872</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'erb.rb', line 867</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_eoutvar'>set_eoutvar</span><span class='lparen'>(</span><span class='id identifier rubyid_compiler'>compiler</span><span class='comma'>,</span> <span class='id identifier rubyid_eoutvar'>eoutvar</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_erbout</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_compiler'>compiler</span><span class='period'>.</span><span class='id identifier rubyid_put_cmd'>put_cmd</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_eoutvar'>eoutvar</span><span class='embexpr_end'>}</span><span class='tstring_content'>.concat</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_compiler'>compiler</span><span class='period'>.</span><span class='id identifier rubyid_insert_cmd'>insert_cmd</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_eoutvar'>eoutvar</span><span class='embexpr_end'>}</span><span class='tstring_content'>.concat</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_compiler'>compiler</span><span class='period'>.</span><span class='id identifier rubyid_pre_cmd'>pre_cmd</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_eoutvar'>eoutvar</span><span class='embexpr_end'>}</span><span class='tstring_content'> = String.new</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_compiler'>compiler</span><span class='period'>.</span><span class='id identifier rubyid_post_cmd'>post_cmd</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_eoutvar'>eoutvar</span><span class='embexpr_end'>}</span><span class='tstring_content'>.force_encoding(__ENCODING__)</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>
<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.8.7.6 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>