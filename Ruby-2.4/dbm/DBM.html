<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: DBM &mdash; dbm Ruby-2.4.0 d2016-08-08</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../css/common.css' />

<script type='text/javascript'>
  var pathId = "DBM",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../index.html'>Home</a> &raquo; 
          <a href='../index.html'>Ruby-2.4.0</a> &raquo; 
          <a href='index.html'>dbm</a> &raquo; 
          <a href='_index.html'>Index (D)</a> &raquo; 
          <span class='title'>DBM</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: DBM</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>
  <tr>
    <td class='box_1'>Inherits:</td>
    <td class='box_rel'>
      <span class='inheritName'>Object</span>
      <ul class='fullTree'>
        <li>Object</li>
        <li class='next'>DBM</li>
      </ul>
      <a href='#' class='inheritanceTree'>show all</a>
    </td>
  </tr>
  <tr>
    <td class='box_1'>Includes:</td>
    <td>
      <div class='box_max'>
        Enumerable
      </div>
    </td>
  </tr>
  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_max'>
<a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L247'>ext/dbm/dbm.c</a></div>  </td>
  </tr>
</table>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<h4 id="label-Introduction">Introduction</h4>

<p>The DBM class provides a wrapper to a Unix-style <code>dbm</code>[<a
href="http://en.wikipedia.org/wiki/Dbm">en.wikipedia.org/wiki/Dbm</a>] or
Database Manager library.</p>

<p>Dbm databases do not have tables or columns; they are simple key-value data
stores, like a Ruby Hash except not resident in RAM. Keys and values must
be strings.</p>

<p>The exact library used depends on how Ruby was compiled. It could be any of
the following:</p>
<ul><li>
<p>The original ndbm library is released in 4.3BSD.</p>
</li></ul>

<pre class="code ruby"><code class="ruby">It is based on dbm library in Unix Version 7 but has different API to
support multiple databases in a process.</code></pre>
<ul><li>
<p><code>Berkeley</code>[<a
href="http://en.wikipedia.org/wiki/Berkeley_DB">en.wikipedia.org/wiki/Berkeley_DB</a>]
versions</p>
</li></ul>

<pre class="code ruby"><code class="ruby">1 thru 5, also known as BDB and Sleepycat DB, now owned by Oracle
Corporation.</code></pre>
<ul><li>
<p>Berkeley DB 1.x, still found in 4.4BSD derivatives (FreeBSD, OpenBSD, etc).</p>
</li><li>
<p><code>gdbm</code>[<a
href="http://www.gnu.org/software/gdbm">www.gnu.org/software/gdbm</a>/],
the GNU implementation of dbm.</p>
</li><li>
<p><code>qdbm</code>[<a
href="http://fallabs.com/qdbm/index.html">fallabs.com/qdbm/index.html</a>],
another open source</p>
</li></ul>

<pre class="code ruby"><code class="ruby">reimplementation of dbm.</code></pre>

<p>All of these dbm implementations have their own Ruby interfaces available,
which provide richer (but varying) APIs.</p>

<h4 id="label-Cautions">Cautions</h4>

<p>Before you decide to use DBM, there are some issues you should consider:</p>
<ul><li>
<p>Each implementation of dbm has its own file format. Generally, dbm</p>
</li></ul>

<pre class="code ruby"><code class="ruby">libraries will not read each other&#39;s files. This makes dbm files
a bad choice for data exchange.</code></pre>
<ul><li>
<p>Even running the same OS and the same dbm implementation, the database</p>
</li></ul>

<pre class="code ruby"><code class="ruby">file format may depend on the CPU architecture. For example, files may
not be portable between PowerPC and 386, or between 32 and 64 bit Linux.</code></pre>
<ul><li>
<p>Different versions of Berkeley DB use different file formats. A change to</p>
</li></ul>

<pre class="code ruby"><code class="ruby">the OS may therefore break DBM access to existing files.</code></pre>
<ul><li>
<p>Data size limits vary between implementations. Original Berkeley DB was</p>
</li></ul>

<pre class="code ruby"><code class="ruby">limited to 2GB of data. Dbm libraries also sometimes limit the total
size of a key/value pair, and the total size of all the keys that hash
to the same value. These limits can be as little as 512 bytes. That said,
gdbm and recent versions of Berkeley DB do away with these limits.</code></pre>

<p>Given the above cautions, DBM is not a good choice for long term storage of
important data. It is probably best used as a fast and easy alternative to
a Hash for processing large amounts of data.</p>

<h4 id="label-Example">Example</h4>

<p>require &#39;dbm&#39; db = DBM.open(&#39;rfcs&#39;, 0666, DBM::WRCREAT) <a
href="'822'">db</a> = &#39;Standard for the Format of ARPA Internet Text
Messages&#39; <a href="'1123'">db</a> = &#39;Requirements for Internet
Hosts - Application and Support&#39; <a href="'3068'">db</a> = &#39;An
Anycast Prefix for 6to4 Relay Routers&#39; puts <a href="'822'">db</a></p>


  </div>
</div>
<div class="tags">
  
</div>
<h2 id='t2_cnst'>Constant Summary<small><a href="#" class="summary_toggle">collapse</a></small></h2>

  <dl class="constants summary full">
    <dt id='NEWDB-constant'>
      NEWDB
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>Indicates that dbm_open() should open the database in read/write mode,
create it if it does not already exist, and delete all contents if it does
already exist.</p>


  </div>
</div>
<div class="tags">
  
</div>    </dd>
    <dt id='READER-constant'>
      READER
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>Indicates that dbm_open() should open the database in read-only mode</p>


  </div>
</div>
<div class="tags">
  
</div>    </dd>
    <dt id='VERSION-constant'>
      VERSION
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    <ul><li>
<p>“ndbm (4.3BSD)”</p>
</li><li>
<p>“Berkeley DB 4.8.30: (April  9, 2010)”</p>
</li><li>
<p>“Berkeley DB (unknown)” (4.4BSD, maybe)</p>
</li><li>
<p>“GDBM version 1.8.3. 10/15/2002 (built Jul  1 2011 12:32:45)”</p>
</li><li>
<p>“QDBM 1.8.78”</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
</div>    </dd>
    <dt id='WRCREAT-constant'>
      WRCREAT
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>Indicates that dbm_open() should open the database in read/write mode, and
create it if it does not already exist</p>


  </div>
</div>
<div class="tags">
  
</div>    </dd>
    <dt id='WRITER-constant'>
      WRITER
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>Indicates that dbm_open() should open the database in read/write mode</p>


  </div>
</div>
<div class="tags">
  
</div>    </dd>
  </dl>





<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#new-class_method" title="new (class method)">.<strong>new</strong>(filename[, mode[, flags]])  &#x21d2; DBM </a>
      </span>
      <span class='note title constructor'>constructor</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Open a dbm database with the specified name, which can include a directory
path.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#open-class_method" title="open (class method)">.<strong>open</strong>(filename[, mode[, flags]])  &#x21d2; DBM </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Open a dbm database and yields it if a block is given.</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#%5B%5D-instance_method" title="#[] (instance method)">#<strong>[]</strong>(key)  &#x21d2; string value<sup>?</sup> </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Return a value from the database by locating the key string provided.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#%5B%5D%3D-instance_method" title="#[]= (instance method)">#<strong>[]=</strong>(key, value)  </a>
        (also: #store)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Stores the specified string value in the database, indexed via the string
key provided.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#clear-instance_method" title="#clear (instance method)">#<strong>clear</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Deletes all data from the database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#close-instance_method" title="#close (instance method)">#<strong>close</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Closes the database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#closed%3F-instance_method" title="#closed? (instance method)">#<strong>closed?</strong>  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns true if the database is closed, false otherwise.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#delete-instance_method" title="#delete (instance method)">#<strong>delete</strong>(key)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Deletes an entry from the database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#delete_if-instance_method" title="#delete_if (instance method)">#<strong>delete_if</strong> {|key, value| ... } &#x21d2; self </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#reject%21-instance_method" title="DBM#reject! (method)">#reject!</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#each_pair-instance_method" title="#each_pair (instance method)">#<strong>each_pair</strong> {|key, value| ... } &#x21d2; self </a>
        (also: #each_pair)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Calls the block once for each [key, value] pair in the database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#each_key-instance_method" title="#each_key (instance method)">#<strong>each_key</strong> {|key| ... } &#x21d2; self </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Calls the block once for each key string in the database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#each_pair-instance_method" title="#each_pair (instance method)">#<strong>each_pair</strong> {|key, value| ... } &#x21d2; self </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#each-instance_method" title="DBM#each (method)">#each</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#each_value-instance_method" title="#each_value (instance method)">#<strong>each_value</strong> {|value| ... } &#x21d2; self </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Calls the block once for each value string in the database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#empty%3F-instance_method" title="#empty? (instance method)">#<strong>empty?</strong>  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns true if the database is empty, false otherwise.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#fetch-instance_method" title="#fetch (instance method)">#<strong>fetch</strong>(key[, ifnone])  &#x21d2; value </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Return a value from the database by locating the key string provided.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#has_key%3F-instance_method" title="#has_key? (instance method)">#<strong>has_key?</strong>(key)  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#key%3F-instance_method" title="DBM#key? (method)">#key?</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#has_value%3F-instance_method" title="#has_value? (instance method)">#<strong>has_value?</strong>(value)  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#value%3F-instance_method" title="DBM#value? (method)">#value?</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#include%3F-instance_method" title="#include? (instance method)">#<strong>include?</strong>(key)  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#key%3F-instance_method" title="DBM#key? (method)">#key?</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#invert-instance_method" title="#invert (instance method)">#<strong>invert</strong>  &#x21d2; Hash </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns a Hash (not a DBM database) created by using each value in the
database as a key, with the corresponding key as its value.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#key-instance_method" title="#key (instance method)">#<strong>key</strong>(value)  &#x21d2; String </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the key for the specified value.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#key%3F-instance_method" title="#key? (instance method)">#<strong>key?</strong>(key)  &#x21d2; Boolean </a>
        (also: #include?, #has_key?, #member?)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns true if the database contains the specified key, false otherwise.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#keys-instance_method" title="#keys (instance method)">#<strong>keys</strong>  &#x21d2; Array </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns an array of all the string keys in the database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#length-instance_method" title="#length (instance method)">#<strong>length</strong>  &#x21d2; Integer </a>
        (also: #size)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the number of entries in the database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#member%3F-instance_method" title="#member? (instance method)">#<strong>member?</strong>(key)  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#key%3F-instance_method" title="DBM#key? (method)">#key?</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#reject-instance_method" title="#reject (instance method)">#<strong>reject</strong> {|key, value| ... } &#x21d2; Hash </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Converts the contents of the database to an in-memory Hash, then calls
<code>Hash#reject</code> with the specified code block, returning a new Hash.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#reject%21-instance_method" title="#reject! (instance method)">#<strong>reject!</strong> {|key, value| ... } &#x21d2; self </a>
        (also: #delete_if)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Deletes all entries for which the code block returns true.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#replace-instance_method" title="#replace (instance method)">#<strong>replace</strong>(obj)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Replaces the contents of the database with the contents of the specified
object.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#select-instance_method" title="#select (instance method)">#<strong>select</strong> {|key, value| ... } &#x21d2; Array </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns a new array consisting of the [key, value] pairs for which the code
block returns true.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#shift-instance_method" title="#shift (instance method)">#<strong>shift</strong>()  &#x21d2; Array, value </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Removes a [key, value] pair from the database, and returns it.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#size-instance_method" title="#size (instance method)">#<strong>size</strong>  &#x21d2; Integer </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#length-instance_method" title="DBM#length (method)">#length</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#store-instance_method" title="#store (instance method)">#<strong>store</strong>(key, value)  &#x21d2; value </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#%5B%5D%3D-instance_method" title="DBM#[]= (method)">#[]=</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#to_a-instance_method" title="#to_a (instance method)">#<strong>to_a</strong>  &#x21d2; Array </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Converts the contents of the database to an array of [key, value] arrays,
and returns it.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#to_hash-instance_method" title="#to_hash (instance method)">#<strong>to_hash</strong>  &#x21d2; Hash </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Converts the contents of the database to an in-memory Hash object, and
returns it.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#update-instance_method" title="#update (instance method)">#<strong>update</strong>(obj)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Updates the database with multiple values from the specified object.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#value%3F-instance_method" title="#value? (instance method)">#<strong>value?</strong>(value)  &#x21d2; Boolean </a>
        (also: #has_value?)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns true if the database contains the specified string value, false
otherwise.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#values-instance_method" title="#values (instance method)">#<strong>values</strong>  &#x21d2; Array </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns an array of all the string values in the database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#values_at-instance_method" title="#values_at (instance method)">#<strong>values_at</strong>(key, ...)  &#x21d2; Array </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns an array containing the values associated with the given keys.</p>
</div>
      </span>
    </li>
  </ul>



  <h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature first'>
  .<strong>new</strong>(filename[, mode[, flags]])  &#x21d2; <tt><a href="" title="DBM (class)">DBM</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Open a dbm database with the specified name, which can include a directory
path. Any file extensions needed will be supplied automatically by the dbm
library. For example, Berkeley DB appends &#39;.db&#39;, and GNU gdbm uses
two physical files with extensions &#39;.dir&#39; and &#39;.pag&#39;.</p>

<p>The mode should be an integer, as for Unix chmod.</p>

<p>Flags should be one of READER, WRITER, WRCREAT or NEWDB.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L145'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 145</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_initialize(int argc, VALUE *argv, VALUE obj)
{
    VALUE file, vmode, vflags;
    DBM *dbm;
    struct dbmdata *dbmp;
    int mode, flags = 0;

    if (rb_scan_args(argc, argv, &quot;12&quot;, &amp;file, &amp;vmode, &amp;vflags) == 1) {
	mode = 0666;		/* default value */
    }
    else if (NIL_P(vmode)) {
	mode = -1;		/* return nil if DB not exist */
    }
    else {
	mode = NUM2INT(vmode);
    }

    if (!NIL_P(vflags))
        flags = NUM2INT(vflags);

    FilePathValue(file);

    /*
     * Note:
     * gdbm 1.10 works with O_CLOEXEC.  gdbm 1.9.1 silently ignore it.
     */
#ifndef O_CLOEXEC
#   define O_CLOEXEC 0
#endif

    if (flags &amp; RUBY_DBM_RW_BIT) {
        flags &amp;= ~RUBY_DBM_RW_BIT;
        dbm = dbm_open(RSTRING_PTR(file), flags|O_CLOEXEC, mode);
    }
    else {
        dbm = 0;
        if (mode &gt;= 0) {
            dbm = dbm_open(RSTRING_PTR(file), O_RDWR|O_CREAT|O_CLOEXEC, mode);
        }
        if (!dbm) {
            dbm = dbm_open(RSTRING_PTR(file), O_RDWR|O_CLOEXEC, 0);
        }
        if (!dbm) {
            dbm = dbm_open(RSTRING_PTR(file), O_RDONLY|O_CLOEXEC, 0);
        }
    }

    if (dbm) {
    /*
     * History of dbm_pagfno() and dbm_dirfno() in ndbm and its compatibles.
     * (dbm_pagfno() and dbm_dirfno() is not standardized.)
     *
     * 1986: 4.3BSD provides ndbm.
     *       It provides dbm_pagfno() and dbm_dirfno() as macros.
     * 1991: gdbm-1.5 provides them as functions.
     *       They returns a same descriptor.
     *       (Earlier releases may have the functions too.)
     * 1991: Net/2 provides Berkeley DB.
     *       It doesn&#39;t provide dbm_pagfno() and dbm_dirfno().
     * 1992: 4.4BSD Alpha provides Berkeley DB with dbm_dirfno() as a function.
     *       dbm_pagfno() is a macro as DBM_PAGFNO_NOT_AVAILABLE.
     * 1997: Berkeley DB 2.0 is released by Sleepycat Software, Inc.
     *       It defines dbm_pagfno() and dbm_dirfno() as macros.
     * 2011: gdbm-1.9 creates a separate dir file.
     *       dbm_pagfno() and dbm_dirfno() returns different descriptors.
     */
#if defined(HAVE_DBM_PAGFNO)
        rb_fd_fix_cloexec(dbm_pagfno(dbm));
#endif
#if defined(HAVE_DBM_DIRFNO)
        rb_fd_fix_cloexec(dbm_dirfno(dbm));
#endif

#if defined(RUBYDBM_DB_HEADER) &amp;&amp; defined(HAVE_TYPE_DBC)
    /* Disable Berkeley DB error messages such as:
     * DB-&gt;put: attempt to modify a read-only database */
        ((DBC*)dbm)-&gt;dbp-&gt;set_errfile(((DBC*)dbm)-&gt;dbp, NULL);
#endif
    }

    if (!dbm) {
	if (mode == -1) return Qnil;
	rb_sys_fail_str(file);
    }

    dbmp = ALLOC(struct dbmdata);
    DATA_PTR(obj) = dbmp;
    dbmp-&gt;di_dbm = dbm;
    dbmp-&gt;di_size = -1;

    return obj;
}
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Class Method Details</h2>
  <section class='method_details first' id="open-class_method">
  <h3 class='signature first'>
  <span class='overload'>.<strong>open</strong>(filename[, mode[, flags]])  &#x21d2; <tt><a href="" title="DBM (class)">DBM</a></tt> </span>
    <span class='overload'>.<strong>open</strong>(filename[, mode[, flags]]) {|dbm| ... } </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Open a dbm database and yields it if a block is given. See also <a href="#new-class_method" title="DBM.new (method)">new</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L247'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


247
248
249
250
251
252
253
254
255
256
257
258
259
260
261</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 247</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_s_open(int argc, VALUE *argv, VALUE klass)
{
    VALUE obj = fdbm_alloc(klass);

    if (NIL_P(fdbm_initialize(argc, argv, obj))) {
	return Qnil;
    }

    if (rb_block_given_p()) {
        return rb_ensure(rb_yield, obj, fdbm_close, obj);
    }

    return obj;
}
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="[]-instance_method">
  <h3 class='signature first'>
  #<strong>[]</strong>(key)  &#x21d2; <tt>string value</tt><sup>?</sup> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Return a value from the database by locating the key string provided.  If
the key is not found, returns nil.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L298'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


298
299
300
301
302</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 298</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_aref(VALUE obj, VALUE keystr)
{
    return fdbm_fetch(obj, keystr, Qnil);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="[]=-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>store</strong>(key, value)  &#x21d2; <tt>value</tt> </span>
    <span class='overload'>#<strong>[]=</strong>(key, value)  </span>
  <span class='aliases'>Also known as: <span class='names'><span>store</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Stores the specified string value in the database, indexed via the string
key provided.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L650'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


650
651
652
653
654
655
656
657
658
659
660
661
662
663
664
665
666
667
668
669
670
671
672
673
674
675
676</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 650</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_store(VALUE obj, VALUE keystr, VALUE valstr)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;

    fdbm_modify(obj);
    keystr = rb_obj_as_string(keystr);
    valstr = rb_obj_as_string(valstr);

    key.dptr = RSTRING_PTR(keystr);
    key.dsize = RSTRING_DSIZE(keystr);

    val.dptr = RSTRING_PTR(valstr);
    val.dsize = RSTRING_DSIZE(valstr);

    GetDBM2(obj, dbmp, dbm);
    dbmp-&gt;di_size = -1;
    if (dbm_store(dbm, key, val, DBM_REPLACE)) {
	dbm_clearerr(dbm);
	if (errno == EPERM) rb_sys_fail(0);
	rb_raise(rb_eDBMError, &quot;dbm_store failed&quot;);
    }

    return valstr;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="clear-instance_method">
  <h3 class='signature'>
  #<strong>clear</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Deletes all data from the database.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L550'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 550</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_clear(VALUE obj)
{
    datum key;
    struct dbmdata *dbmp;
    DBM *dbm;

    fdbm_modify(obj);
    GetDBM2(obj, dbmp, dbm);
    dbmp-&gt;di_size = -1;
    while (key = dbm_firstkey(dbm), key.dptr) {
	if (dbm_delete(dbm, key)) {
	    rb_raise(rb_eDBMError, &quot;dbm_delete failed&quot;);
	}
    }
    dbmp-&gt;di_size = 0;

    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="close-instance_method">
  <h3 class='signature'>
  #<strong>close</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Closes the database.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L94'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


94
95
96
97
98
99
100
101
102
103
104</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 94</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_close(VALUE obj)
{
    struct dbmdata *dbmp;

    GetDBM(obj, dbmp);
    dbm_close(dbmp-&gt;di_dbm);
    dbmp-&gt;di_dbm = 0;

    return Qnil;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="closed?-instance_method">
  <h3 class='signature'>
  #<strong>closed?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns true if the database is closed, false otherwise.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L112'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


112
113
114
115
116
117
118
119
120
121
122
123
124</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 112</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_closed(VALUE obj)
{
    struct dbmdata *dbmp;

    TypedData_Get_Struct(obj, struct dbmdata, &amp;dbm_type, dbmp);
    if (dbmp == 0)
	return Qtrue;
    if (dbmp-&gt;di_dbm == 0)
	return Qtrue;

    return Qfalse;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="delete-instance_method">
  <h3 class='signature'>
  #<strong>delete</strong>(key)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Deletes an entry from the database.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L426'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 426</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_delete(VALUE obj, VALUE keystr)
{
    datum key, value;
    struct dbmdata *dbmp;
    DBM *dbm;
    VALUE valstr;
    long len;

    fdbm_modify(obj);
    ExportStringValue(keystr);
    len = RSTRING_LEN(keystr);
    if (TOO_LONG(len)) goto not_found;
    key.dptr = RSTRING_PTR(keystr);
    key.dsize = (DSIZE_TYPE)len;

    GetDBM2(obj, dbmp, dbm);

    value = dbm_fetch(dbm, key);
    if (value.dptr == 0) {
      not_found:
	if (rb_block_given_p()) return rb_yield(keystr);
	return Qnil;
    }

    /* need to save value before dbm_delete() */
    valstr = rb_tainted_str_new(value.dptr, value.dsize);

    if (dbm_delete(dbm, key)) {
	dbmp-&gt;di_size = -1;
	rb_raise(rb_eDBMError, &quot;dbm_delete failed&quot;);
    }
    else if (dbmp-&gt;di_size &gt;= 0) {
	dbmp-&gt;di_size--;
    }
    return valstr;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="delete_if-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>reject!</strong> {|key, value| ... } &#x21d2; <tt>self</tt> </span>
    <span class='overload'>#<strong>delete_if</strong> {|key, value| ... } &#x21d2; <tt>self</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#reject%21-instance_method" title="DBM#reject! (method)">#reject!</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L502'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 502</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_delete_if(VALUE obj)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;
    VALUE keystr, valstr;
    VALUE ret, ary = rb_ary_tmp_new(0);
    int status = 0;
    long i, n;

    fdbm_modify(obj);
    GetDBM2(obj, dbmp, dbm);
    n = dbmp-&gt;di_size;
    dbmp-&gt;di_size = -1;

    for (key = dbm_firstkey(dbm); key.dptr; key = dbm_nextkey(dbm)) {
	val = dbm_fetch(dbm, key);
	keystr = rb_tainted_str_new(key.dptr, key.dsize);
	OBJ_FREEZE(keystr);
	valstr = rb_tainted_str_new(val.dptr, val.dsize);
        ret = rb_protect(rb_yield, rb_assoc_new(rb_str_dup(keystr), valstr), &amp;status);
        if (status != 0) break;
	if (RTEST(ret)) rb_ary_push(ary, keystr);
	GetDBM2(obj, dbmp, dbm);
    }

    for (i = 0; i &lt; RARRAY_LEN(ary); i++) {
	keystr = RARRAY_AREF(ary, i);
	key.dptr = RSTRING_PTR(keystr);
	key.dsize = (DSIZE_TYPE)RSTRING_LEN(keystr);
	if (dbm_delete(dbm, key)) {
	    rb_raise(rb_eDBMError, &quot;dbm_delete failed&quot;);
	}
    }
    if (status) rb_jump_tag(status);
    if (n &gt; 0) dbmp-&gt;di_size = n - RARRAY_LEN(ary);
    rb_ary_clear(ary);

    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="each-instance_method">
  <h3 class='signature'>
  #<strong>each_pair</strong> {|key, value| ... } &#x21d2; <tt>self</tt> 
  <span class='aliases'>Also known as: <span class='names'><span>each_pair</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Calls the block once for each [key, value] pair in the database. Returns
self.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L786'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


786
787
788
789
790
791
792
793
794
795
796
797
798
799
800
801
802
803
804
805
806
807</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 786</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_each_pair(VALUE obj)
{
    datum key, val;
    DBM *dbm;
    struct dbmdata *dbmp;
    VALUE keystr, valstr;

    RETURN_ENUMERATOR(obj, 0, 0);

    GetDBM2(obj, dbmp, dbm);

    for (key = dbm_firstkey(dbm); key.dptr; key = dbm_nextkey(dbm)) {
	val = dbm_fetch(dbm, key);
	keystr = rb_tainted_str_new(key.dptr, key.dsize);
	valstr = rb_tainted_str_new(val.dptr, val.dsize);
	rb_yield(rb_assoc_new(keystr, valstr));
	GetDBM2(obj, dbmp, dbm);
    }

    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="each_key-instance_method">
  <h3 class='signature'>
  #<strong>each_key</strong> {|key| ... } &#x21d2; <tt>self</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Calls the block once for each key string in the database. Returns self.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L762'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


762
763
764
765
766
767
768
769
770
771
772
773
774
775
776
777</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 762</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_each_key(VALUE obj)
{
    datum key;
    struct dbmdata *dbmp;
    DBM *dbm;

    RETURN_ENUMERATOR(obj, 0, 0);

    GetDBM2(obj, dbmp, dbm);
    for (key = dbm_firstkey(dbm); key.dptr; key = dbm_nextkey(dbm)) {
	rb_yield(rb_tainted_str_new(key.dptr, key.dsize));
	GetDBM2(obj, dbmp, dbm);
    }
    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="each_pair-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>each_pair</strong> {|key, value| ... } &#x21d2; <tt>self</tt> </span>
    <span class='overload'>#<strong>each_pair</strong> {|key, value| ... } &#x21d2; <tt>self</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#each-instance_method" title="DBM#each (method)">#each</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="each_value-instance_method">
  <h3 class='signature'>
  #<strong>each_value</strong> {|value| ... } &#x21d2; <tt>self</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Calls the block once for each value string in the database. Returns self.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L738'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


738
739
740
741
742
743
744
745
746
747
748
749
750
751
752
753
754</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 738</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_each_value(VALUE obj)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;

    RETURN_ENUMERATOR(obj, 0, 0);

    GetDBM2(obj, dbmp, dbm);
    for (key = dbm_firstkey(dbm); key.dptr; key = dbm_nextkey(dbm)) {
	val = dbm_fetch(dbm, key);
	rb_yield(rb_tainted_str_new(val.dptr, val.dsize));
	GetDBM2(obj, dbmp, dbm);
    }
    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="empty?-instance_method">
  <h3 class='signature'>
  #<strong>empty?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns true if the database is empty, false otherwise.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L710'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


710
711
712
713
714
715
716
717
718
719
720
721
722
723
724
725
726
727
728
729
730</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 710</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_empty_p(VALUE obj)
{
    datum key;
    struct dbmdata *dbmp;
    DBM *dbm;

    GetDBM2(obj, dbmp, dbm);
    if (dbmp-&gt;di_size &lt; 0) {
	dbm = dbmp-&gt;di_dbm;

	for (key = dbm_firstkey(dbm); key.dptr; key = dbm_nextkey(dbm)) {
	    return Qfalse;
	}
    }
    else {
	if (dbmp-&gt;di_size)
	    return Qfalse;
    }
    return Qtrue;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="fetch-instance_method">
  <h3 class='signature'>
  #<strong>fetch</strong>(key[, ifnone])  &#x21d2; <tt>value</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Return a value from the database by locating the key string provided.  If
the key is not found, returns <code>ifnone</code>. If <code>ifnone</code>
is not given, raises IndexError.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L312'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


312
313
314
315
316
317
318
319
320
321
322
323</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 312</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_fetch_m(int argc, VALUE *argv, VALUE obj)
{
    VALUE keystr, valstr, ifnone;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;keystr, &amp;ifnone);
    valstr = fdbm_fetch(obj, keystr, ifnone);
    if (argc == 1 &amp;&amp; !rb_block_given_p() &amp;&amp; NIL_P(valstr))
	rb_raise(rb_eIndexError, &quot;key not found&quot;);

    return valstr;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="has_key?-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>include?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>has_key?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>member?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>key?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#key%3F-instance_method" title="DBM#key? (method)">#key?</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="has_value?-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>has_value?</strong>(value)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>value?</strong>(value)  &#x21d2; <tt>Boolean</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#value%3F-instance_method" title="DBM#value? (method)">#value?</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L894'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


894
895
896
897
898
899
900
901
902
903
904
905
906
907
908
909
910
911
912
913
914
915
916</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 894</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_has_value(VALUE obj, VALUE valstr)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;
    long len;

    ExportStringValue(valstr);
    len = RSTRING_LEN(valstr);
    if (TOO_LONG(len)) return Qfalse;
    val.dptr = RSTRING_PTR(valstr);
    val.dsize = (DSIZE_TYPE)len;

    GetDBM2(obj, dbmp, dbm);
    for (key = dbm_firstkey(dbm); key.dptr; key = dbm_nextkey(dbm)) {
	val = dbm_fetch(dbm, key);
	if ((DSIZE_TYPE)val.dsize == (DSIZE_TYPE)RSTRING_LEN(valstr) &amp;&amp;
	    memcmp(val.dptr, RSTRING_PTR(valstr), val.dsize) == 0)
	    return Qtrue;
    }
    return Qfalse;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="include?-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>include?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>has_key?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>member?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>key?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#key%3F-instance_method" title="DBM#key? (method)">#key?</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L866'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


866
867
868
869
870
871
872
873
874
875
876
877
878
879
880
881
882
883
884</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 866</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_has_key(VALUE obj, VALUE keystr)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;
    long len;

    ExportStringValue(keystr);
    len = RSTRING_LEN(keystr);
    if (TOO_LONG(len)) return Qfalse;
    key.dptr = RSTRING_PTR(keystr);
    key.dsize = (DSIZE_TYPE)len;

    GetDBM2(obj, dbmp, dbm);
    val = dbm_fetch(dbm, key);
    if (val.dptr) return Qtrue;
    return Qfalse;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="invert-instance_method">
  <h3 class='signature'>
  #<strong>invert</strong>  &#x21d2; <tt>Hash</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns a Hash (not a DBM database) created by using each value in the
database as a key, with the corresponding key as its value.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L577'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 577</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_invert(VALUE obj)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;
    VALUE keystr, valstr;
    VALUE hash = rb_hash_new();

    GetDBM2(obj, dbmp, dbm);
    for (key = dbm_firstkey(dbm); key.dptr; key = dbm_nextkey(dbm)) {
	val = dbm_fetch(dbm, key);
	keystr = rb_tainted_str_new(key.dptr, key.dsize);
	valstr = rb_tainted_str_new(val.dptr, val.dsize);
	rb_hash_aset(hash, valstr, keystr);
    }
    return hash;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="key-instance_method">
  <h3 class='signature'>
  #<strong>key</strong>(value)  &#x21d2; <tt>String</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the key for the specified value.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L331'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 331</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_key(VALUE obj, VALUE valstr)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;
    long len;

    ExportStringValue(valstr);
    len = RSTRING_LEN(valstr);
    if (TOO_LONG(len)) return Qnil;
    val.dptr = RSTRING_PTR(valstr);
    val.dsize = (DSIZE_TYPE)len;

    GetDBM2(obj, dbmp, dbm);
    for (key = dbm_firstkey(dbm); key.dptr; key = dbm_nextkey(dbm)) {
	val = dbm_fetch(dbm, key);
	if ((long)val.dsize == RSTRING_LEN(valstr) &amp;&amp;
	    memcmp(val.dptr, RSTRING_PTR(valstr), val.dsize) == 0) {
	    return rb_tainted_str_new(key.dptr, key.dsize);
	}
    }
    return Qnil;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="key?-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>include?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>has_key?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>member?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>key?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
  <span class='aliases'>Also known as: <span class='names'><span>include?</span>, <span>has_key?</span>, <span>member?</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns true if the database contains the specified key, false otherwise.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L866'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


866
867
868
869
870
871
872
873
874
875
876
877
878
879
880
881
882
883
884</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 866</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_has_key(VALUE obj, VALUE keystr)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;
    long len;

    ExportStringValue(keystr);
    len = RSTRING_LEN(keystr);
    if (TOO_LONG(len)) return Qfalse;
    key.dptr = RSTRING_PTR(keystr);
    key.dsize = (DSIZE_TYPE)len;

    GetDBM2(obj, dbmp, dbm);
    val = dbm_fetch(dbm, key);
    if (val.dptr) return Qtrue;
    return Qfalse;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="keys-instance_method">
  <h3 class='signature'>
  #<strong>keys</strong>  &#x21d2; <tt>Array</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns an array of all the string keys in the database.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L815'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


815
816
817
818
819
820
821
822
823
824
825
826
827
828
829
830
831</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 815</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_keys(VALUE obj)
{
    datum key;
    struct dbmdata *dbmp;
    DBM *dbm;
    VALUE ary;

    GetDBM2(obj, dbmp, dbm);

    ary = rb_ary_new();
    for (key = dbm_firstkey(dbm); key.dptr; key = dbm_nextkey(dbm)) {
	rb_ary_push(ary, rb_tainted_str_new(key.dptr, key.dsize));
    }

    return ary;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="length-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>length</strong>  &#x21d2; <tt>Integer</tt> </span>
    <span class='overload'>#<strong>size</strong>  &#x21d2; <tt>Integer</tt> </span>
  <span class='aliases'>Also known as: <span class='names'><span>size</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the number of entries in the database.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L685'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


685
686
687
688
689
690
691
692
693
694
695
696
697
698
699
700
701
702</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 685</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_length(VALUE obj)
{
    datum key;
    struct dbmdata *dbmp;
    DBM *dbm;
    int i = 0;

    GetDBM2(obj, dbmp, dbm);
    if (dbmp-&gt;di_size &gt; 0) return INT2FIX(dbmp-&gt;di_size);

    for (key = dbm_firstkey(dbm); key.dptr; key = dbm_nextkey(dbm)) {
	i++;
    }
    dbmp-&gt;di_size = i;

    return INT2FIX(i);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="member?-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>include?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>has_key?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>member?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>key?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#key%3F-instance_method" title="DBM#key? (method)">#key?</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="reject-instance_method">
  <h3 class='signature'>
  #<strong>reject</strong> {|key, value| ... } &#x21d2; <tt>Hash</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Converts the contents of the database to an in-memory Hash, then calls
<code>Hash#reject</code> with the specified code block, returning a new Hash.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L977'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


977
978
979
980
981</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 977</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_reject(VALUE obj)
{
    return rb_hash_delete_if(fdbm_to_hash(obj));
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="reject!-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>reject!</strong> {|key, value| ... } &#x21d2; <tt>self</tt> </span>
    <span class='overload'>#<strong>delete_if</strong> {|key, value| ... } &#x21d2; <tt>self</tt> </span>
  <span class='aliases'>Also known as: <span class='names'><span>delete_if</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Deletes all entries for which the code block returns true. Returns self.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L502'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 502</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_delete_if(VALUE obj)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;
    VALUE keystr, valstr;
    VALUE ret, ary = rb_ary_tmp_new(0);
    int status = 0;
    long i, n;

    fdbm_modify(obj);
    GetDBM2(obj, dbmp, dbm);
    n = dbmp-&gt;di_size;
    dbmp-&gt;di_size = -1;

    for (key = dbm_firstkey(dbm); key.dptr; key = dbm_nextkey(dbm)) {
	val = dbm_fetch(dbm, key);
	keystr = rb_tainted_str_new(key.dptr, key.dsize);
	OBJ_FREEZE(keystr);
	valstr = rb_tainted_str_new(val.dptr, val.dsize);
        ret = rb_protect(rb_yield, rb_assoc_new(rb_str_dup(keystr), valstr), &amp;status);
        if (status != 0) break;
	if (RTEST(ret)) rb_ary_push(ary, keystr);
	GetDBM2(obj, dbmp, dbm);
    }

    for (i = 0; i &lt; RARRAY_LEN(ary); i++) {
	keystr = RARRAY_AREF(ary, i);
	key.dptr = RSTRING_PTR(keystr);
	key.dsize = (DSIZE_TYPE)RSTRING_LEN(keystr);
	if (dbm_delete(dbm, key)) {
	    rb_raise(rb_eDBMError, &quot;dbm_delete failed&quot;);
	}
    }
    if (status) rb_jump_tag(status);
    if (n &gt; 0) dbmp-&gt;di_size = n - RARRAY_LEN(ary);
    rb_ary_clear(ary);

    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="replace-instance_method">
  <h3 class='signature'>
  #<strong>replace</strong>(obj)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Replaces the contents of the database with the contents of the specified
object. Takes any object which implements the each_pair method, including
Hash and DBM objects.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L634'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


634
635
636
637
638
639
640</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 634</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_replace(VALUE obj, VALUE other)
{
    fdbm_clear(obj);
    rb_block_call(other, rb_intern(&quot;each_pair&quot;), 0, 0, update_i, obj);
    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="select-instance_method">
  <h3 class='signature'>
  #<strong>select</strong> {|key, value| ... } &#x21d2; <tt>Array</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns a new array consisting of the [key, value] pairs for which the code
block returns true.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L371'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 371</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_select(VALUE obj)
{
    VALUE new = rb_ary_new();
    datum key, val;
    DBM *dbm;
    struct dbmdata *dbmp;

    GetDBM2(obj, dbmp, dbm);
    for (key = dbm_firstkey(dbm); key.dptr; key = dbm_nextkey(dbm)) {
	VALUE assoc, v;
	val = dbm_fetch(dbm, key);
	assoc = rb_assoc_new(rb_tainted_str_new(key.dptr, key.dsize),
			     rb_tainted_str_new(val.dptr, val.dsize));
	v = rb_yield(assoc);
	if (RTEST(v)) {
	    rb_ary_push(new, assoc);
	}
	GetDBM2(obj, dbmp, dbm);
    }

    return new;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="shift-instance_method">
  <h3 class='signature'>
  #<strong>shift</strong>()  &#x21d2; <tt>Array</tt>, <tt>value</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Removes a [key, value] pair from the database, and returns it. If the
database is empty, returns nil. The order in which values are
removed/returned is not guaranteed.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L472'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 472</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_shift(VALUE obj)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;
    VALUE keystr, valstr;

    fdbm_modify(obj);
    GetDBM2(obj, dbmp, dbm);
    dbmp-&gt;di_size = -1;

    key = dbm_firstkey(dbm);
    if (!key.dptr) return Qnil;
    val = dbm_fetch(dbm, key);
    keystr = rb_tainted_str_new(key.dptr, key.dsize);
    valstr = rb_tainted_str_new(val.dptr, val.dsize);
    dbm_delete(dbm, key);

    return rb_assoc_new(keystr, valstr);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="size-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>length</strong>  &#x21d2; <tt>Integer</tt> </span>
    <span class='overload'>#<strong>size</strong>  &#x21d2; <tt>Integer</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#length-instance_method" title="DBM#length (method)">#length</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="store-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>store</strong>(key, value)  &#x21d2; <tt>value</tt> </span>
    <span class='overload'>#<strong>[]=</strong>(key, value)  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#%5B%5D%3D-instance_method" title="DBM#[]= (method)">#[]=</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="to_a-instance_method">
  <h3 class='signature'>
  #<strong>to_a</strong>  &#x21d2; <tt>Array</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Converts the contents of the database to an array of [key, value] arrays,
and returns it.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L925'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


925
926
927
928
929
930
931
932
933
934
935
936
937
938
939
940
941
942</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 925</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_to_a(VALUE obj)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;
    VALUE ary;

    GetDBM2(obj, dbmp, dbm);
    ary = rb_ary_new();
    for (key = dbm_firstkey(dbm); key.dptr; key = dbm_nextkey(dbm)) {
	val = dbm_fetch(dbm, key);
	rb_ary_push(ary, rb_assoc_new(rb_tainted_str_new(key.dptr, key.dsize),
				      rb_tainted_str_new(val.dptr, val.dsize)));
    }

    return ary;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="to_hash-instance_method">
  <h3 class='signature'>
  #<strong>to_hash</strong>  &#x21d2; <tt>Hash</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Converts the contents of the database to an in-memory Hash object, and
returns it.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L951'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


951
952
953
954
955
956
957
958
959
960
961
962
963
964
965
966
967
968</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 951</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_to_hash(VALUE obj)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;
    VALUE hash;

    GetDBM2(obj, dbmp, dbm);
    hash = rb_hash_new();
    for (key = dbm_firstkey(dbm); key.dptr; key = dbm_nextkey(dbm)) {
	val = dbm_fetch(dbm, key);
	rb_hash_aset(hash, rb_tainted_str_new(key.dptr, key.dsize),
		           rb_tainted_str_new(val.dptr, val.dsize));
    }

    return hash;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="update-instance_method">
  <h3 class='signature'>
  #<strong>update</strong>(obj)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Updates the database with multiple values from the specified object. Takes
any object which implements the each_pair method, including Hash and DBM
objects.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L619'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


619
620
621
622
623
624</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 619</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_update(VALUE obj, VALUE other)
{
    rb_block_call(other, rb_intern(&quot;each_pair&quot;), 0, 0, update_i, obj);
    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="value?-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>has_value?</strong>(value)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>value?</strong>(value)  &#x21d2; <tt>Boolean</tt> </span>
  <span class='aliases'>Also known as: <span class='names'><span>has_value?</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns true if the database contains the specified string value, false
otherwise.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L894'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


894
895
896
897
898
899
900
901
902
903
904
905
906
907
908
909
910
911
912
913
914
915
916</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 894</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_has_value(VALUE obj, VALUE valstr)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;
    long len;

    ExportStringValue(valstr);
    len = RSTRING_LEN(valstr);
    if (TOO_LONG(len)) return Qfalse;
    val.dptr = RSTRING_PTR(valstr);
    val.dsize = (DSIZE_TYPE)len;

    GetDBM2(obj, dbmp, dbm);
    for (key = dbm_firstkey(dbm); key.dptr; key = dbm_nextkey(dbm)) {
	val = dbm_fetch(dbm, key);
	if ((DSIZE_TYPE)val.dsize == (DSIZE_TYPE)RSTRING_LEN(valstr) &amp;&amp;
	    memcmp(val.dptr, RSTRING_PTR(valstr), val.dsize) == 0)
	    return Qtrue;
    }
    return Qfalse;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="values-instance_method">
  <h3 class='signature'>
  #<strong>values</strong>  &#x21d2; <tt>Array</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns an array of all the string values in the database.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L839'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


839
840
841
842
843
844
845
846
847
848
849
850
851
852
853
854
855</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 839</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_values(VALUE obj)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;
    VALUE ary;

    GetDBM2(obj, dbmp, dbm);
    ary = rb_ary_new();
    for (key = dbm_firstkey(dbm); key.dptr; key = dbm_nextkey(dbm)) {
	val = dbm_fetch(dbm, key);
	rb_ary_push(ary, rb_tainted_str_new(val.dptr, val.dsize));
    }

    return ary;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="values_at-instance_method">
  <h3 class='signature'>
  #<strong>values_at</strong>(key, ...)  &#x21d2; <tt>Array</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns an array containing the values associated with the given keys.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/dbm/dbm.c#L401'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


401
402
403
404
405
406
407
408
409
410
411
412</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/dbm/dbm.c', line 401</span></pre>
<pre class='code cpp'>

static VALUE
fdbm_values_at(int argc, VALUE *argv, VALUE obj)
{
    VALUE new = rb_ary_new2(argc);
    int i;

    for (i=0; i&lt;argc; i++) {
        rb_ary_push(new, fdbm_fetch(obj, argv[i], Qnil));
    }

    return new;
}
</pre>
  </div>
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.5 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>