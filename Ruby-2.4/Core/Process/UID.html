<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: Process::UID &mdash; Core Ruby-2.4.0 d2016-07-07</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "Process::UID",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../../index.html'>Home</a> &raquo; 
          <a href='../../index.html'>Ruby-2.4.0</a> &raquo; 
          <a href='../index.html'>Core</a> &raquo; 
          <a href='../_index.html'>Index (U)</a> &raquo; 
        #  <a href="../Process.html" title="Process (module)">Process</a> &raquo; 
          <span class='title'>UID</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='module'>

<h1>Module: Process::UID</h1>

<div class="box_info">



  <dl>
    <dt>Defined in:</dt>
    <dd>process.c</dd>
  </dl>
</div>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>The <a href="" title="Process::UID (module)">UID</a> module contains a collection of module functions which
can be used to portably get, set, and switch the current process&#39;s
real, effective, and saved user IDs.</p>


  </div>
</div>
<div class="tags">
  
</div>




<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#change_privilege-class_method" title="change_privilege (class method)">.<strong>change_privilege</strong>(user)  &#x21d2; Fixnum </a>
      </span>
      
      <span class='mod_func note title'>mod_func</span>

      <span class='summary_desc'>
        <div class='inline'>
<p>Change the current process&#39;s real and effective user ID to that
specified by <em>user</em>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#eid-class_method" title="eid (class method)">.<strong>eid</strong>  &#x21d2; Fixnum </a>
      </span>
      
      <span class='mod_func note title'>mod_func</span>

      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the effective user ID for this process.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#from_name-class_method" title="from_name (class method)">.<strong>from_name</strong>(name)  &#x21d2; uid </a>
      </span>
      
      <span class='mod_func note title'>mod_func</span>

      <span class='summary_desc'>
        <div class='inline'>
<p>Get the user ID by the <em>name</em>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#grant_privilege-class_method" title="grant_privilege (class method)">.<strong>grant_privilege</strong>(user)  &#x21d2; Fixnum </a>
      </span>
      
      <span class='mod_func note title'>mod_func</span>

      <span class='summary_desc'>
        <div class='inline'>
<p>Set the effective user ID, and if possible, the saved user ID of the
process to the given <em>user</em>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#re_exchange-class_method" title="re_exchange (class method)">.<strong>re_exchange</strong>  &#x21d2; Fixnum </a>
      </span>
      
      <span class='mod_func note title'>mod_func</span>

      <span class='summary_desc'>
        <div class='inline'>
<p>Exchange real and effective user IDs and return the new effective user ID.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#re_exchangeable%3F-class_method" title="re_exchangeable? (class method)">.<strong>re_exchangeable?</strong>  &#x21d2; Boolean </a>
      </span>
      
      <span class='mod_func note title'>mod_func</span>

      <span class='summary_desc'>
        <div class='inline'>
<p>Returns <code>true</code> if the real and effective user IDs of a process
may be exchanged on the current platform.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#rid-class_method" title="rid (class method)">.<strong>rid</strong>  &#x21d2; Fixnum </a>
      </span>
      
      <span class='mod_func note title'>mod_func</span>

      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the (real) user ID of this process.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#sid_available%3F-class_method" title="sid_available? (class method)">.<strong>sid_available?</strong>  &#x21d2; Boolean </a>
      </span>
      
      <span class='mod_func note title'>mod_func</span>

      <span class='summary_desc'>
        <div class='inline'>
<p>Returns <code>true</code> if the current platform has saved user ID
functionality.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#switch-class_method" title="switch (class method)">.<strong>switch</strong>  &#x21d2; Fixnum </a>
      </span>
      
      <span class='mod_func note title'>mod_func</span>

      <span class='summary_desc'>
        <div class='inline'>
<p>Switch the effective and real user IDs of the current process.</p>
</div>
      </span>
    </li>
  </ul>

<h2 class='y_details'>Class Method Details</h2>
  <section class='method_details first' id="change_privilege-class_method">
  <h3 class='signature first'>
  .<strong>change_privilege</strong>(user)  &#x21d2; <tt>Fixnum</tt>  <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Change the current process&#39;s real and effective user ID to that
specified by <em>user</em>. Returns the new user ID. Not available on all
platforms.</p>

<pre class="code ruby"><code class="ruby"><span class='lbracket'>[</span><span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_uid'>uid</span><span class='comma'>,</span> <span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_euid'>euid</span><span class='rbracket'>]</span>          <span class='comment'>#=&gt; [0, 0]
</span><span class='const'>Process</span><span class='op'>::</span><span class='const'>UID</span><span class='period'>.</span><span class='id identifier rubyid_change_privilege'>change_privilege</span><span class='lparen'>(</span><span class='int'>31</span><span class='rparen'>)</span>    <span class='comment'>#=&gt; 31
</span><span class='lbracket'>[</span><span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_uid'>uid</span><span class='comma'>,</span> <span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_euid'>euid</span><span class='rbracket'>]</span>          <span class='comment'>#=&gt; [31, 31]
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


5375
5376
5377
5378
5379
5380
5381
5382
5383
5384
5385
5386
5387
5388
5389
5390
5391
5392
5393
5394
5395
5396
5397
5398
5399
5400
5401
5402
5403
5404
5405
5406
5407
5408
5409
5410
5411
5412
5413
5414
5415
5416
5417
5418
5419
5420
5421
5422
5423
5424
5425
5426
5427
5428
5429
5430
5431
5432
5433
5434
5435
5436
5437
5438
5439
5440
5441
5442
5443
5444
5445
5446
5447
5448
5449
5450
5451
5452
5453
5454
5455
5456
5457
5458
5459
5460
5461
5462
5463
5464
5465
5466
5467
5468
5469
5470
5471
5472
5473
5474
5475
5476
5477
5478
5479
5480
5481
5482
5483
5484
5485
5486
5487
5488
5489
5490
5491
5492
5493
5494
5495
5496
5497
5498
5499
5500
5501
5502
5503
5504
5505
5506
5507
5508
5509
5510
5511
5512
5513
5514
5515
5516
5517
5518
5519
5520
5521
5522
5523
5524
5525
5526
5527</pre>
  <div class='lines_code'>
      <pre class='code cpp'><span class='info file'># File 'process.c', line 5375</span>

static VALUE
p_uid_change_privilege(VALUE obj, VALUE id)
{
    rb_uid_t uid;

    check_uid_switch();

    uid = OBJ2UID(id);

    if (geteuid() == 0) { /* root-user */
#if defined(HAVE_SETRESUID)
	if (setresuid(uid, uid, uid) &lt; 0) rb_sys_fail(0);
	SAVED_USER_ID = uid;
#elif defined(HAVE_SETUID)
	if (setuid(uid) &lt; 0) rb_sys_fail(0);
	SAVED_USER_ID = uid;
#elif defined(HAVE_SETREUID) &amp;&amp; !defined(OBSOLETE_SETREUID)
	if (getuid() == uid) {
	    if (SAVED_USER_ID == uid) {
		if (setreuid(-1, uid) &lt; 0) rb_sys_fail(0);
	    }
	    else {
		if (uid == 0) { /* (r,e,s) == (root, root, x) */
		    if (setreuid(-1, SAVED_USER_ID) &lt; 0) rb_sys_fail(0);
		    if (setreuid(SAVED_USER_ID, 0) &lt; 0) rb_sys_fail(0);
		    SAVED_USER_ID = 0; /* (r,e,s) == (x, root, root) */
		    if (setreuid(uid, uid) &lt; 0) rb_sys_fail(0);
		    SAVED_USER_ID = uid;
		}
		else {
		    if (setreuid(0, -1) &lt; 0) rb_sys_fail(0);
		    SAVED_USER_ID = 0;
		    if (setreuid(uid, uid) &lt; 0) rb_sys_fail(0);
		    SAVED_USER_ID = uid;
		}
	    }
	}
	else {
	    if (setreuid(uid, uid) &lt; 0) rb_sys_fail(0);
	    SAVED_USER_ID = uid;
	}
#elif defined(HAVE_SETRUID) &amp;&amp; defined(HAVE_SETEUID)
	if (getuid() == uid) {
	    if (SAVED_USER_ID == uid) {
		if (seteuid(uid) &lt; 0) rb_sys_fail(0);
	    }
	    else {
		if (uid == 0) {
		    if (setruid(SAVED_USER_ID) &lt; 0) rb_sys_fail(0);
		    SAVED_USER_ID = 0;
		    if (setruid(0) &lt; 0) rb_sys_fail(0);
		}
		else {
		    if (setruid(0) &lt; 0) rb_sys_fail(0);
		    SAVED_USER_ID = 0;
		    if (seteuid(uid) &lt; 0) rb_sys_fail(0);
		    if (setruid(uid) &lt; 0) rb_sys_fail(0);
		    SAVED_USER_ID = uid;
		}
	    }
	}
	else {
	    if (seteuid(uid) &lt; 0) rb_sys_fail(0);
	    if (setruid(uid) &lt; 0) rb_sys_fail(0);
	    SAVED_USER_ID = uid;
	}
#else
	(void)uid;
	rb_notimplement();
#endif
    }
    else { /* unprivileged user */
#if defined(HAVE_SETRESUID)
	if (setresuid((getuid() == uid)? (rb_uid_t)-1: uid,
		      (geteuid() == uid)? (rb_uid_t)-1: uid,
		      (SAVED_USER_ID == uid)? (rb_uid_t)-1: uid) &lt; 0) rb_sys_fail(0);
	SAVED_USER_ID = uid;
#elif defined(HAVE_SETREUID) &amp;&amp; !defined(OBSOLETE_SETREUID)
	if (SAVED_USER_ID == uid) {
	    if (setreuid((getuid() == uid)? (rb_uid_t)-1: uid,
			 (geteuid() == uid)? (rb_uid_t)-1: uid) &lt; 0)
		rb_sys_fail(0);
	}
	else if (getuid() != uid) {
	    if (setreuid(uid, (geteuid() == uid)? (rb_uid_t)-1: uid) &lt; 0)
		rb_sys_fail(0);
	    SAVED_USER_ID = uid;
	}
	else if (/* getuid() == uid &amp;&amp; */ geteuid() != uid) {
	    if (setreuid(geteuid(), uid) &lt; 0) rb_sys_fail(0);
	    SAVED_USER_ID = uid;
	    if (setreuid(uid, -1) &lt; 0) rb_sys_fail(0);
	}
	else { /* getuid() == uid &amp;&amp; geteuid() == uid */
	    if (setreuid(-1, SAVED_USER_ID) &lt; 0) rb_sys_fail(0);
	    if (setreuid(SAVED_USER_ID, uid) &lt; 0) rb_sys_fail(0);
	    SAVED_USER_ID = uid;
	    if (setreuid(uid, -1) &lt; 0) rb_sys_fail(0);
	}
#elif defined(HAVE_SETRUID) &amp;&amp; defined(HAVE_SETEUID)
	if (SAVED_USER_ID == uid) {
	    if (geteuid() != uid &amp;&amp; seteuid(uid) &lt; 0) rb_sys_fail(0);
	    if (getuid() != uid &amp;&amp; setruid(uid) &lt; 0) rb_sys_fail(0);
	}
	else if (/* SAVED_USER_ID != uid &amp;&amp; */ geteuid() == uid) {
	    if (getuid() != uid) {
		if (setruid(uid) &lt; 0) rb_sys_fail(0);
		SAVED_USER_ID = uid;
	    }
	    else {
		if (setruid(SAVED_USER_ID) &lt; 0) rb_sys_fail(0);
		SAVED_USER_ID = uid;
		if (setruid(uid) &lt; 0) rb_sys_fail(0);
	    }
	}
	else if (/* geteuid() != uid &amp;&amp; */ getuid() == uid) {
	    if (seteuid(uid) &lt; 0) rb_sys_fail(0);
	    if (setruid(SAVED_USER_ID) &lt; 0) rb_sys_fail(0);
	    SAVED_USER_ID = uid;
	    if (setruid(uid) &lt; 0) rb_sys_fail(0);
	}
	else {
	    rb_syserr_fail(EPERM, 0);
	}
#elif defined HAVE_44BSD_SETUID
	if (getuid() == uid) {
	    /* (r,e,s)==(uid,?,?) ==&gt; (uid,uid,uid) */
	    if (setuid(uid) &lt; 0) rb_sys_fail(0);
	    SAVED_USER_ID = uid;
	}
	else {
	    rb_syserr_fail(EPERM, 0);
	}
#elif defined HAVE_SETEUID
	if (getuid() == uid &amp;&amp; SAVED_USER_ID == uid) {
	    if (seteuid(uid) &lt; 0) rb_sys_fail(0);
	}
	else {
	    rb_syserr_fail(EPERM, 0);
	}
#elif defined HAVE_SETUID
	if (getuid() == uid &amp;&amp; SAVED_USER_ID == uid) {
	    if (setuid(uid) &lt; 0) rb_sys_fail(0);
	}
	else {
	    rb_syserr_fail(EPERM, 0);
	}
#else
	rb_notimplement();
#endif
    }
    return id;
}</pre>
  </div>
</div>
</section>  <section class='method_details' id="eid-class_method">
  <h3 class='signature'>
  <span class='overload'><strong>Process.euid</strong>  &#x21d2; <tt>Fixnum</tt>  <span class="extras">(mod_func)</span></span>
    <span class='overload'>.<strong>eid</strong>  &#x21d2; <tt>Fixnum</tt> </span>
    <span class='overload'><strong>Process.Sys</strong>  &#x21d2; <tt>Fixnum</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the effective user ID for this process.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_euid'>euid</span>   <span class='comment'>#=&gt; 501
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


6246
6247
6248
6249
6250
6251</pre>
  <div class='lines_code'>
      <pre class='code cpp'><span class='info file'># File 'process.c', line 6246</span>

static VALUE
proc_geteuid(VALUE obj)
{
    rb_uid_t euid = geteuid();
    return UIDT2NUM(euid);
}</pre>
  </div>
</div>
</section>  <section class='method_details' id="from_name-class_method">
  <h3 class='signature'>
  .<strong>from_name</strong>(name)  &#x21d2; <tt><a href="../Process.html#uid-class_method" title="Process.uid (method)">uid</a></tt>  <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Get the user ID by the <em>name</em>. If the user is not found,
<a href="../ArgumentError.html" title="ArgumentError (class)">ArgumentError</a> will be raised.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Process</span><span class='op'>::</span><span class='const'>UID</span><span class='period'>.</span><span class='id identifier rubyid_from_name'>from_name</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>root</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'>#=&gt; 0
</span><span class='const'>Process</span><span class='op'>::</span><span class='const'>UID</span><span class='period'>.</span><span class='id identifier rubyid_from_name'>from_name</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>nosuchuser</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'>#=&gt; can&#39;t find user for nosuchuser (ArgumentError)
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


5062
5063
5064
5065
5066</pre>
  <div class='lines_code'>
      <pre class='code cpp'><span class='info file'># File 'process.c', line 5062</span>

static VALUE
p_uid_from_name(VALUE self, VALUE id)
{
    return UIDT2NUM(OBJ2UID(id));
}</pre>
  </div>
</div>
</section>  <section class='method_details' id="grant_privilege-class_method">
  <h3 class='signature'>
  <span class='overload'>.<strong>grant_privilege</strong>(user)  &#x21d2; <tt>Fixnum</tt>  <span class="extras">(mod_func)</span></span>
    <span class='overload'>.<strong>eid=</strong>(user)  &#x21d2; <tt>Fixnum</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Set the effective user ID, and if possible, the saved user ID of the
process to the given <em>user</em>. Returns the new effective user ID. Not
available on all platforms.</p>

<pre class="code ruby"><code class="ruby"><span class='lbracket'>[</span><span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_uid'>uid</span><span class='comma'>,</span> <span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_euid'>euid</span><span class='rbracket'>]</span>          <span class='comment'>#=&gt; [0, 0]
</span><span class='const'>Process</span><span class='op'>::</span><span class='const'>UID</span><span class='period'>.</span><span class='id identifier rubyid_grant_privilege'>grant_privilege</span><span class='lparen'>(</span><span class='int'>31</span><span class='rparen'>)</span>     <span class='comment'>#=&gt; 31
</span><span class='lbracket'>[</span><span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_uid'>uid</span><span class='comma'>,</span> <span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_euid'>euid</span><span class='rbracket'>]</span>          <span class='comment'>#=&gt; [0, 31]
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


6350
6351
6352
6353
6354
6355</pre>
  <div class='lines_code'>
      <pre class='code cpp'><span class='info file'># File 'process.c', line 6350</span>

static VALUE
p_uid_grant_privilege(VALUE obj, VALUE id)
{
    rb_seteuid_core(OBJ2UID(id));
    return id;
}</pre>
  </div>
</div>
</section>  <section class='method_details' id="re_exchange-class_method">
  <h3 class='signature'>
  .<strong>re_exchange</strong>  &#x21d2; <tt>Fixnum</tt>  <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Exchange real and effective user IDs and return the new effective user ID.
Not available on all platforms.</p>

<pre class="code ruby"><code class="ruby"><span class='lbracket'>[</span><span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_uid'>uid</span><span class='comma'>,</span> <span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_euid'>euid</span><span class='rbracket'>]</span>   <span class='comment'>#=&gt; [0, 31]
</span><span class='const'>Process</span><span class='op'>::</span><span class='const'>UID</span><span class='period'>.</span><span class='id identifier rubyid_re_exchange'>re_exchange</span>      <span class='comment'>#=&gt; 0
</span><span class='lbracket'>[</span><span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_uid'>uid</span><span class='comma'>,</span> <span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_euid'>euid</span><span class='rbracket'>]</span>   <span class='comment'>#=&gt; [31, 0]
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


6522
6523
6524
6525
6526
6527
6528
6529
6530
6531
6532
6533
6534
6535
6536
6537
6538
6539
6540
6541
6542
6543
6544
6545
6546
6547</pre>
  <div class='lines_code'>
      <pre class='code cpp'><span class='info file'># File 'process.c', line 6522</span>

static VALUE
p_uid_exchange(VALUE obj)
{
    rb_uid_t uid;
#if defined(HAVE_SETRESUID) || (defined(HAVE_SETREUID) &amp;&amp; !defined(OBSOLETE_SETREUID))
    rb_uid_t euid;
#endif

    check_uid_switch();

    uid = getuid();
#if defined(HAVE_SETRESUID) || (defined(HAVE_SETREUID) &amp;&amp; !defined(OBSOLETE_SETREUID))
    euid = geteuid();
#endif

#if defined(HAVE_SETRESUID)
    if (setresuid(euid, uid, uid) &lt; 0) rb_sys_fail(0);
    SAVED_USER_ID = uid;
#elif defined(HAVE_SETREUID) &amp;&amp; !defined(OBSOLETE_SETREUID)
    if (setreuid(euid,uid) &lt; 0) rb_sys_fail(0);
    SAVED_USER_ID = uid;
#else
    rb_notimplement();
#endif
    return UIDT2NUM(uid);
}</pre>
  </div>
</div>
</section>  <section class='method_details' id="re_exchangeable?-class_method">
  <h3 class='signature'>
  .<strong>re_exchangeable?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns <code>true</code> if the real and effective user IDs of a process
may be exchanged on the current platform.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


6497
6498
6499
6500
6501
6502
6503
6504
6505
6506
6507</pre>
  <div class='lines_code'>
      <pre class='code cpp'><span class='info file'># File 'process.c', line 6497</span>

static VALUE
p_uid_exchangeable(void)
{
#if defined(HAVE_SETRESUID)
    return Qtrue;
#elif defined(HAVE_SETREUID) &amp;&amp; !defined(OBSOLETE_SETREUID)
    return Qtrue;
#else
    return Qfalse;
#endif
}</pre>
  </div>
</div>
</section>  <section class='method_details' id="rid-class_method">
  <h3 class='signature'>
  <span class='overload'><strong>Process.uid</strong>  &#x21d2; <tt>Fixnum</tt>  <span class="extras">(mod_func)</span></span>
    <span class='overload'>.<strong>rid</strong>  &#x21d2; <tt>Fixnum</tt> </span>
    <span class='overload'><strong>Process.Sys</strong>  &#x21d2; <tt>Fixnum</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the (real) user ID of this process.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_uid'>uid</span>   <span class='comment'>#=&gt; 501
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


5287
5288
5289
5290
5291
5292</pre>
  <div class='lines_code'>
      <pre class='code cpp'><span class='info file'># File 'process.c', line 5287</span>

static VALUE
proc_getuid(VALUE obj)
{
    rb_uid_t uid = getuid();
    return UIDT2NUM(uid);
}</pre>
  </div>
</div>
</section>  <section class='method_details' id="sid_available?-class_method">
  <h3 class='signature'>
  .<strong>sid_available?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns <code>true</code> if the current platform has saved user ID
functionality.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


6622
6623
6624
6625
6626
6627
6628
6629
6630</pre>
  <div class='lines_code'>
      <pre class='code cpp'><span class='info file'># File 'process.c', line 6622</span>

static VALUE
p_uid_have_saved_id(void)
{
#if defined(HAVE_SETRESUID) || defined(HAVE_SETEUID) || defined(_POSIX_SAVED_IDS)
    return Qtrue;
#else
    return Qfalse;
#endif
}</pre>
  </div>
</div>
</section>  <section class='method_details' id="switch-class_method">
  <h3 class='signature'>
  <span class='overload'>.<strong>switch</strong>  &#x21d2; <tt>Fixnum</tt>  <span class="extras">(mod_func)</span></span>
    <span class='overload'>.<strong>switch</strong>  &#x21d2; <tt><a href="../Object.html" title="Object (class)">Object</a></tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Switch the effective and real user IDs of the current process. If a
<em>block</em> is given, the user IDs will be switched back after the block
is executed. Returns the new effective user ID if called without a block,
and the return value of the block if one is given.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


6656
6657
6658
6659
6660
6661
6662
6663
6664
6665
6666
6667
6668
6669
6670
6671
6672
6673
6674
6675
6676
6677
6678
6679
6680
6681
6682
6683
6684
6685
6686
6687
6688
6689
6690
6691</pre>
  <div class='lines_code'>
      <pre class='code cpp'><span class='info file'># File 'process.c', line 6656</span>

static VALUE
p_uid_switch(VALUE obj)
{
    rb_uid_t uid, euid;

    check_uid_switch();

    uid = getuid();
    euid = geteuid();

    if (uid != euid) {
	proc_seteuid(uid);
	if (rb_block_given_p()) {
	    under_uid_switch = 1;
	    return rb_ensure(rb_yield, Qnil, p_uid_sw_ensure, SAVED_USER_ID);
	}
	else {
	    return UIDT2NUM(euid);
	}
    }
    else if (euid != SAVED_USER_ID) {
	proc_seteuid(SAVED_USER_ID);
	if (rb_block_given_p()) {
	    under_uid_switch = 1;
	    return rb_ensure(rb_yield, Qnil, p_uid_sw_ensure, euid);
	}
	else {
	    return UIDT2NUM(uid);
	}
    }
    else {
	rb_syserr_fail(EPERM, 0);
    }

    UNREACHABLE;
}</pre>
  </div>
</div>
</section>
<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.8.7.6 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>