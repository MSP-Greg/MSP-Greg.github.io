<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Proc &mdash; Core Ruby-2.4.0 d2016-08-03</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../css/common.css' />

<script type='text/javascript'>
  var pathId = "Proc",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../index.html'>Home</a> &raquo; 
          <a href='../index.html'>Ruby-2.4.0</a> &raquo; 
          <a href='index.html'>Core</a> &raquo; 
          <a href='_index.html'>Index (P)</a> &raquo; 
          <span class='title'>Proc</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: Proc</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>
  <tr>
    <td class='box_1'>Inherits:</td>
    <td class='box_rel'>
      <span class='inheritName'><a href="Object.html" title="Object (class)">Object</a></span>
      <ul class='fullTree'>
        <li><a href="Object.html" title="Object (class)">Object</a></li>
        <li class='next'>Proc</li>
      </ul>
      <a href='#' class='inheritanceTree'>show all</a>
    </td>
  </tr>
  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_max'>
<a href='https://github.com/ruby/ruby/blob/trunk/proc.c#L3016'>proc.c</a></div>  </td>
  </tr>
</table>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p><a href="" title="Proc (class)">Proc</a> objects are blocks of code that have been bound to a set of local
variables. Once bound, the code may be called in different contexts and
still access those variables.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_gen_times'>gen_times</span><span class='lparen'>(</span><span class='id identifier rubyid_factor'>factor</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='const'>Proc</span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="#new-class_method" title="Proc.new (method)">new</a></span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_n'>n</span><span class='op'>|</span> <span class='id identifier rubyid_n'>n</span><span class='op'>*</span><span class='id identifier rubyid_factor'>factor</span> <span class='rbrace'>}</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_times3'>times3</span> <span class='op'>=</span> <span class='id identifier rubyid_gen_times'>gen_times</span><span class='lparen'>(</span><span class='int'>3</span><span class='rparen'>)</span>
<span class='id identifier rubyid_times5'>times5</span> <span class='op'>=</span> <span class='id identifier rubyid_gen_times'>gen_times</span><span class='lparen'>(</span><span class='int'>5</span><span class='rparen'>)</span>

<span class='id identifier rubyid_times3'>times3</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='int'>12</span><span class='rparen'>)</span>               <span class='comment'>#=&gt; 36
</span><span class='id identifier rubyid_times5'>times5</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='int'>5</span><span class='rparen'>)</span>                <span class='comment'>#=&gt; 25
</span><span class='id identifier rubyid_times3'>times3</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_times5'>times5</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='int'>4</span><span class='rparen'>)</span><span class='rparen'>)</span>   <span class='comment'>#=&gt; 60
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>




<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#new-class_method" title="new (class method)">.<strong>new</strong> {|...| ... } &#x21d2; Proc </a>
      </span>
      <span class='note title constructor'>constructor</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Creates a new <code>Proc</code> object, bound to the current context.</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#%3D%3D%3D-instance_method" title="#call (instance method)">#<strong>call</strong>(params, ...)  &#x21d2; Object </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#%5B%5D-instance_method" title="Proc#[] (method)">#[]</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#%5B%5D-instance_method" title="#[] (instance method)">#<strong>[]</strong>(params, ...)  &#x21d2; Object </a>
        (also: #===, #call, #yield)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Invokes the block, setting the block&#39;s parameters to the values in
<em>params</em> using something close to method calling semantics.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#arity-instance_method" title="#arity (instance method)">#<strong>arity</strong>  &#x21d2; Fixnum </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the number of mandatory arguments.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#binding-instance_method" title="#binding (instance method)">#<strong>binding</strong>  &#x21d2; Binding </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the binding associated with <em>prc</em>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#call-instance_method" title="#call (instance method)">#<strong>call</strong>(params, ...)  &#x21d2; Object </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#%5B%5D-instance_method" title="Proc#[] (method)">#[]</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#curry-instance_method" title="#curry (instance method)">#<strong>curry</strong>  &#x21d2; Proc </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns a curried proc.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#hash-instance_method" title="#hash (instance method)">#<strong>hash</strong>  &#x21d2; Integer </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns a hash value corresponding to proc body.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#to_s-instance_method" title="Proc#to_s (method)">#to_s</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#lambda%3F-instance_method" title="#lambda? (instance method)">#<strong>lambda?</strong>  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns <code>true</code> for a Proc object for which argument handling is
rigid.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#parameters-instance_method" title="#parameters (instance method)">#<strong>parameters</strong>  &#x21d2; Array </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the parameter information of this proc.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#source_location-instance_method" title="#source_location (instance method)">#<strong>source_location</strong>  &#x21d2; Array, Fixnum </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the Ruby source filename and line number containing this proc or
<code>nil</code> if this proc was not defined in Ruby (i.e. native)</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#to_proc-instance_method" title="#to_proc (instance method)">#<strong>to_proc</strong>  &#x21d2; Proc </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Part of the protocol for converting objects to <code>Proc</code> objects.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#to_s-instance_method" title="#to_s (instance method)">#<strong>to_s</strong>  </a>
        (also: #inspect)
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#yield-instance_method" title="#call (instance method)">#<strong>call</strong>(params, ...)  &#x21d2; Object </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#%5B%5D-instance_method" title="Proc#[] (method)">#[]</a>.</p>
</div>
      </span>
    </li>
  </ul>


<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>
  <section class='method_details first' id="new-class_method">
  <h3 class='signature first'>
  <span class='overload'>.<strong>new</strong> {|...| ... } &#x21d2; <tt><a href="" title="Proc (class)">Proc</a></tt> </span>
    <span class='overload'>.<strong>new</strong>  &#x21d2; <tt><a href="" title="Proc (class)">Proc</a></tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates a new <code>Proc</code> object, bound to the current context.
<a href="#new-class_method" title="Proc.new (method)">new</a> may be called without a block only within a method with an
attached block, in which case that block is converted to the
<code>Proc</code> object.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_proc_from'>proc_from</span>
  <span class='const'><a href="" title="Proc (class)">Proc</a></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='kw'>end</span>
<span class='id identifier rubyid_proc'>proc</span> <span class='op'>=</span> <span class='id identifier rubyid_proc_from'>proc_from</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_proc'>proc</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span>   <span class='comment'>#=&gt; &quot;hello&quot;
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/proc.c#L730'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


730
731
732
733
734
735
736
737</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'proc.c', line 730</span></pre>
<pre class='code cpp'>

static VALUE
rb_proc_s_new(int argc, VALUE *argv, VALUE klass)
{
    VALUE block = proc_new(klass, FALSE);

    rb_obj_call_init(block, argc, argv);
    return block;
}
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="===-instance_method">
  <h3 class='signature first'>
  <span class='overload'>#<strong>call</strong>(params, ...)  &#x21d2; <tt><a href="Object.html" title="Object (class)">Object</a></tt> </span>
    <span class='overload'>#<strong>[]</strong>(params, ...)  &#x21d2; <tt><a href="Object.html" title="Object (class)">Object</a></tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#%5B%5D-instance_method" title="Proc#[] (method)">#[]</a>.</p>


  </div>
</div>

</section>
  <section class='method_details' id="[]-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>call</strong>(params, ...)  &#x21d2; <tt><a href="Object.html" title="Object (class)">Object</a></tt> </span>
    <span class='overload'>#<strong>[]</strong>(params, ...)  &#x21d2; <tt><a href="Object.html" title="Object (class)">Object</a></tt> </span>
  <span class='aliases'>Also known as: <span class='names'><span>===</span>, <span>call</span>, <span>yield</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Invokes the block, setting the block&#39;s parameters to the values in
<em>params</em> using something close to method calling semantics.
Generates a warning if multiple values are passed to a proc that expects
just one (previously this silently converted the parameters to an array). 
Note that <code>prc.()</code> invokes <code>prc.call()</code> with the
parameters given.  It&#39;s a syntax sugar to hide “call”.</p>

<p>Returns the value of the last expression evaluated in the block. See also
<a href="#yield-instance_method" title="Proc#yield (method)">#yield</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_a_proc'>a_proc</span> <span class='op'>=</span> <span class='const'><a href="" title="Proc (class)">Proc</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="#new-class_method" title="Proc.new (method)">new</a></span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_scalar'>scalar</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_values'>values</span><span class='op'>|</span> <span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_value'>value</span><span class='op'>|</span> <span class='id identifier rubyid_value'>value</span><span class='op'>*</span><span class='id identifier rubyid_scalar'>scalar</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_a_proc'>a_proc</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='int'>9</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span><span class='rparen'>)</span>   <span class='comment'>#=&gt; [9, 18, 27]
</span><span class='id identifier rubyid_a_proc'>a_proc</span><span class='lbracket'>[</span><span class='int'>9</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span><span class='rbracket'>]</span>        <span class='comment'>#=&gt; [9, 18, 27]
</span><span class='id identifier rubyid_a_proc'>a_proc</span><span class='period'>.</span><span class='lparen'>(</span><span class='int'>9</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span><span class='rparen'>)</span>       <span class='comment'>#=&gt; [9, 18, 27]
</span></code></pre>

<p>For procs created using <code>lambda</code> or <code>-&gt;()</code> an
error is generated if the wrong number of parameters are passed to a Proc
with multiple parameters.  For procs created using <a href="#new-class_method" title="Proc.new (method)">new</a> or
<a href="Kernel.html#proc-class_method" title="Kernel.proc (method)">Kernel.proc</a>, extra parameters are silently discarded.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_a_proc'>a_proc</span> <span class='op'>=</span> <span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span><span class='rbrace'>}</span>
<span class='id identifier rubyid_a_proc'>a_proc</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span><span class='rparen'>)</span>
</code></pre>

<p><em>produces:</em></p>

<pre class="code ruby"><code class="ruby">prog.rb:4:in `block in &lt;main&gt;&#39;: wrong number of arguments (given 3, expected 2) (ArgumentError)
    from prog.rb:5:in `call&#39;
    from prog.rb:5:in `&lt;main&gt;&#39;</code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/proc.c#L820'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


820
821
822
823
824</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'proc.c', line 820</span></pre>
<pre class='code cpp'>

static VALUE
proc_call(int argc, VALUE *argv, VALUE procval)
{
    /* removed */
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="arity-instance_method">
  <h3 class='signature'>
  #<strong>arity</strong>  &#x21d2; <tt><a href="Object.html#Fixnum-constant" title="Object::Fixnum (constant)">Fixnum</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the number of mandatory arguments. If the block is declared to take
no arguments, returns 0. If the block is known to take exactly n arguments,
returns n. If the block has optional arguments, returns -n-1, where n is
the number of mandatory arguments, with the exception for blocks that are
not lambdas and have only a finite number of optional arguments; in this
latter case, returns n. Keywords arguments will considered as a single
additional argument, that argument being mandatory if any keyword argument
is mandatory. A <code>proc</code> with no argument declarations is the same
as a block declaring <code>||</code> as its arguments.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span>                  <span class='comment'>#=&gt;  0
</span><span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span> <span class='op'>||</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span>              <span class='comment'>#=&gt;  0
</span><span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span>             <span class='comment'>#=&gt;  1
</span><span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span>          <span class='comment'>#=&gt;  2
</span><span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='comma'>,</span> <span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span>       <span class='comment'>#=&gt;  3
</span><span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='op'>*</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span>            <span class='comment'>#=&gt; -1
</span><span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_b'>b</span><span class='op'>|</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span>         <span class='comment'>#=&gt; -2
</span><span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_b'>b</span><span class='comma'>,</span> <span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span>      <span class='comment'>#=&gt; -3
</span><span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='label'>x:</span><span class='comma'>,</span> <span class='label'>y:</span><span class='comma'>,</span> <span class='label'>z:</span><span class='int'>0</span><span class='op'>|</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span>   <span class='comment'>#=&gt;  1
</span><span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='op'>*</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='label'>x:</span><span class='comma'>,</span> <span class='label'>y:</span><span class='int'>0</span><span class='op'>|</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span>   <span class='comment'>#=&gt; -2
</span>
<span class='id identifier rubyid_proc'>proc</span>   <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>=</span><span class='int'>0</span><span class='op'>|</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span>         <span class='comment'>#=&gt;  0
</span><span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>=</span><span class='int'>0</span><span class='op'>|</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span>         <span class='comment'>#=&gt; -1
</span><span class='id identifier rubyid_proc'>proc</span>   <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>=</span><span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='op'>|</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span>      <span class='comment'>#=&gt;  1
</span><span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>=</span><span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='op'>|</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span>      <span class='comment'>#=&gt; -2
</span><span class='id identifier rubyid_proc'>proc</span>   <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>=</span><span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='op'>=</span><span class='int'>0</span><span class='op'>|</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span>    <span class='comment'>#=&gt;  0
</span><span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>=</span><span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='op'>=</span><span class='int'>0</span><span class='op'>|</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span>    <span class='comment'>#=&gt; -1
</span><span class='id identifier rubyid_proc'>proc</span>   <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='op'>=</span><span class='int'>0</span><span class='op'>|</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span>      <span class='comment'>#=&gt;  1
</span><span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='op'>=</span><span class='int'>0</span><span class='op'>|</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span>      <span class='comment'>#=&gt; -2
</span><span class='id identifier rubyid_proc'>proc</span>   <span class='lbrace'>{</span> <span class='op'>|</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_z'>z</span><span class='op'>=</span><span class='int'>0</span><span class='op'>|</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span> <span class='comment'>#=&gt;  1
</span><span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_z'>z</span><span class='op'>=</span><span class='int'>0</span><span class='op'>|</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span> <span class='comment'>#=&gt; -2
</span><span class='id identifier rubyid_proc'>proc</span>   <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='label'>x:</span><span class='int'>0</span><span class='comma'>,</span> <span class='label'>y:</span><span class='int'>0</span><span class='op'>|</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span> <span class='comment'>#=&gt;  1
</span><span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='label'>x:</span><span class='int'>0</span><span class='comma'>,</span> <span class='label'>y:</span><span class='int'>0</span><span class='op'>|</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_arity'>arity</span> <span class='comment'>#=&gt; -2
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/proc.c#L915'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


915
916
917
918
919
920</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'proc.c', line 915</span></pre>
<pre class='code cpp'>

static VALUE
proc_arity(VALUE self)
{
    int arity = rb_proc_arity(self);
    return INT2FIX(arity);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="binding-instance_method">
  <h3 class='signature'>
  #<strong>binding</strong>  &#x21d2; <tt><a href="Binding.html" title="Binding (class)">Binding</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the binding associated with <em>prc</em>. Note that <a href="Kernel.html#eval-class_method" title="Kernel.eval (method)">Kernel.eval</a>
accepts either a <code>Proc</code> or a <a href="Binding.html" title="Binding (class)">Binding</a> object as its second
parameter.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_fred'>fred</span><span class='lparen'>(</span><span class='id identifier rubyid_param'>param</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_fred'>fred</span><span class='lparen'>(</span><span class='int'>99</span><span class='rparen'>)</span>
<span class='id identifier rubyid_eval'>eval</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>param</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_binding'>binding</span><span class='rparen'>)</span>   <span class='comment'>#=&gt; 99
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/proc.c#L2741'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


2741
2742
2743
2744
2745
2746
2747
2748
2749
2750
2751
2752
2753
2754
2755
2756
2757
2758
2759
2760
2761
2762
2763
2764
2765
2766
2767
2768
2769
2770
2771
2772
2773
2774
2775
2776
2777
2778
2779
2780
2781
2782
2783
2784
2785
2786
2787
2788
2789
2790
2791
2792
2793
2794
2795
2796
2797
2798
2799
2800
2801
2802
2803
2804
2805
2806</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'proc.c', line 2741</span></pre>
<pre class='code cpp'>

static VALUE
proc_binding(VALUE self)
{
    VALUE bindval, binding_self = Qundef;
    rb_binding_t *bind;
    const rb_proc_t *proc;
    const rb_iseq_t *iseq = NULL;
    const struct rb_block *block;
    const rb_env_t *env = NULL;

    GetProcPtr(self, proc);
    block = &amp;proc-&gt;block;

  again:
    switch (vm_block_type(block)) {
      case block_type_iseq:
	iseq = block-&gt;as.captured.code.iseq;
	binding_self = block-&gt;as.captured.self;
	env = VM_ENV_ENVVAL_PTR(block-&gt;as.captured.ep);
	break;
      case block_type_proc:
	GetProcPtr(block-&gt;as.proc, proc);
	block = &amp;proc-&gt;block;
	goto again;
      case block_type_symbol:
	goto error;
      case block_type_ifunc:
	{
	    const struct vm_ifunc *ifunc = block-&gt;as.captured.code.ifunc;
	    if (IS_METHOD_PROC_IFUNC(ifunc)) {
		VALUE method = (VALUE)ifunc-&gt;data;
		binding_self = method_receiver(method);
		iseq = rb_method_iseq(method);
		env = VM_ENV_ENVVAL_PTR(block-&gt;as.captured.ep);
		env = env_clone(env, method_cref(method));
		/* set empty iseq */
		RB_OBJ_WRITE(env, &amp;env-&gt;iseq, rb_iseq_new(NULL, rb_str_new2(&quot;&lt;empty iseq&gt;&quot;), rb_str_new2(&quot;&lt;empty_iseq&gt;&quot;), Qnil, 0, ISEQ_TYPE_TOP));
		break;
	    }
	    else {
	      error:
		rb_raise(rb_eArgError, &quot;Can&#39;t create Binding from C level Proc&quot;);
		return Qnil;
	    }
	}
    }

    bindval = rb_binding_alloc(rb_cBinding);
    GetBindingPtr(bindval, bind);

    bind-&gt;block.as.captured.self = binding_self;
    bind-&gt;block.as.captured.code.iseq = env-&gt;iseq;
    bind-&gt;block.as.captured.ep = env-&gt;ep;

    if (iseq) {
	rb_iseq_check(iseq);
	bind-&gt;path = iseq-&gt;body-&gt;location.path;
	bind-&gt;first_lineno = FIX2INT(rb_iseq_first_lineno(iseq));
    }
    else {
	bind-&gt;path = Qnil;
	bind-&gt;first_lineno = 0;
    }

    return bindval;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="call-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>call</strong>(params, ...)  &#x21d2; <tt><a href="Object.html" title="Object (class)">Object</a></tt> </span>
    <span class='overload'>#<strong>[]</strong>(params, ...)  &#x21d2; <tt><a href="Object.html" title="Object (class)">Object</a></tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#%5B%5D-instance_method" title="Proc#[] (method)">#[]</a>.</p>


  </div>
</div>

</section>
  <section class='method_details' id="curry-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>curry</strong>  &#x21d2; <tt><a href="" title="Proc (class)">Proc</a></tt> </span>
    <span class='overload'>#<strong>curry</strong>(arity)  &#x21d2; <tt><a href="" title="Proc (class)">Proc</a></tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns a curried proc. If the optional <em>arity</em> argument is given,
it determines the number of arguments. A curried proc receives some
arguments. If a sufficient number of arguments are supplied, it passes the
supplied arguments to the original proc and returns the result. Otherwise,
returns another curried proc that takes the rest of arguments.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='comma'>,</span> <span class='id identifier rubyid_z'>z</span><span class='op'>|</span> <span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='op'>||</span><span class='int'>0</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='id identifier rubyid_y'>y</span><span class='op'>||</span><span class='int'>0</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='id identifier rubyid_z'>z</span><span class='op'>||</span><span class='int'>0</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_curry'>curry</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span>           <span class='comment'>#=&gt; 6
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_curry'>curry</span><span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>3</span><span class='comma'>,</span> <span class='int'>4</span><span class='rbracket'>]</span>        <span class='comment'>#=&gt; 6
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_curry'>curry</span><span class='lparen'>(</span><span class='int'>5</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>4</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>5</span><span class='rbracket'>]</span>  <span class='comment'>#=&gt; 6
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_curry'>curry</span><span class='lparen'>(</span><span class='int'>5</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>3</span><span class='comma'>,</span> <span class='int'>4</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>5</span><span class='rbracket'>]</span>  <span class='comment'>#=&gt; 6
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_curry'>curry</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>              <span class='comment'>#=&gt; 1
</span>
<span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='comma'>,</span> <span class='id identifier rubyid_z'>z</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_w'>w</span><span class='op'>|</span> <span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='op'>||</span><span class='int'>0</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='id identifier rubyid_y'>y</span><span class='op'>||</span><span class='int'>0</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='id identifier rubyid_z'>z</span><span class='op'>||</span><span class='int'>0</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='id identifier rubyid_w'>w</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='int'>0</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='symbol'>:+</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_curry'>curry</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span>           <span class='comment'>#=&gt; 6
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_curry'>curry</span><span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>3</span><span class='comma'>,</span> <span class='int'>4</span><span class='rbracket'>]</span>        <span class='comment'>#=&gt; 10
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_curry'>curry</span><span class='lparen'>(</span><span class='int'>5</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>4</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>5</span><span class='rbracket'>]</span>  <span class='comment'>#=&gt; 15
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_curry'>curry</span><span class='lparen'>(</span><span class='int'>5</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>3</span><span class='comma'>,</span> <span class='int'>4</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>5</span><span class='rbracket'>]</span>  <span class='comment'>#=&gt; 15
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_curry'>curry</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>              <span class='comment'>#=&gt; 1
</span>
<span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='comma'>,</span> <span class='id identifier rubyid_z'>z</span><span class='op'>|</span> <span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='op'>||</span><span class='int'>0</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='id identifier rubyid_y'>y</span><span class='op'>||</span><span class='int'>0</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='id identifier rubyid_z'>z</span><span class='op'>||</span><span class='int'>0</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_curry'>curry</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span>           <span class='comment'>#=&gt; 6
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_curry'>curry</span><span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>3</span><span class='comma'>,</span> <span class='int'>4</span><span class='rbracket'>]</span>        <span class='comment'>#=&gt; wrong number of arguments (given 4, expected 3)
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_curry'>curry</span><span class='lparen'>(</span><span class='int'>5</span><span class='rparen'>)</span>                 <span class='comment'>#=&gt; wrong number of arguments (given 5, expected 3)
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_curry'>curry</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>                 <span class='comment'>#=&gt; wrong number of arguments (given 1, expected 3)
</span>
<span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='comma'>,</span> <span class='id identifier rubyid_z'>z</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_w'>w</span><span class='op'>|</span> <span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='op'>||</span><span class='int'>0</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='id identifier rubyid_y'>y</span><span class='op'>||</span><span class='int'>0</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='id identifier rubyid_z'>z</span><span class='op'>||</span><span class='int'>0</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='id identifier rubyid_w'>w</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='int'>0</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='symbol'>:+</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_curry'>curry</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span>           <span class='comment'>#=&gt; 6
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_curry'>curry</span><span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>3</span><span class='comma'>,</span> <span class='int'>4</span><span class='rbracket'>]</span>        <span class='comment'>#=&gt; 10
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_curry'>curry</span><span class='lparen'>(</span><span class='int'>5</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>4</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>5</span><span class='rbracket'>]</span>  <span class='comment'>#=&gt; 15
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_curry'>curry</span><span class='lparen'>(</span><span class='int'>5</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>3</span><span class='comma'>,</span> <span class='int'>4</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>5</span><span class='rbracket'>]</span>  <span class='comment'>#=&gt; 15
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_curry'>curry</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>                 <span class='comment'>#=&gt; wrong number of arguments (given 1, expected 3)
</span>
<span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span> <span class='symbol'>:foo</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_curry'>curry</span><span class='lbracket'>[</span><span class='rbracket'>]</span>                  <span class='comment'>#=&gt; :foo
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/proc.c#L2892'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


2892
2893
2894
2895
2896
2897
2898
2899
2900
2901
2902
2903
2904
2905
2906
2907
2908
2909
2910</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'proc.c', line 2892</span></pre>
<pre class='code cpp'>

static VALUE
proc_curry(int argc, const VALUE *argv, VALUE self)
{
    int sarity, max_arity, min_arity = rb_proc_min_max_arity(self, &amp;max_arity);
    VALUE arity;

    rb_scan_args(argc, argv, &quot;01&quot;, &amp;arity);
    if (NIL_P(arity)) {
	arity = INT2FIX(min_arity);
    }
    else {
	sarity = FIX2INT(arity);
	if (rb_proc_lambda_p(self)) {
	    rb_check_arity(sarity, min_arity, max_arity);
	}
    }

    return make_curry_proc(self, rb_ary_new(), arity);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="hash-instance_method">
  <h3 class='signature'>
  #<strong>hash</strong>  &#x21d2; <tt><a href="Integer.html" title="Integer (class)">Integer</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns a hash value corresponding to proc body.</p>

<p>See also <a href="Object.html#hash-instance_method" title="Object#hash (method)">Object#hash</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/proc.c#L1193'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1193
1194
1195
1196
1197
1198
1199
1200
1201</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'proc.c', line 1193</span></pre>
<pre class='code cpp'>

static VALUE
proc_hash(VALUE self)
{
    st_index_t hash;
    hash = rb_hash_start(0);
    hash = rb_hash_proc(hash, self);
    hash = rb_hash_end(hash);
    return LONG2FIX(hash);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="inspect-instance_method">
  <h3 class='signature'>
  #<strong>inspect</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#to_s-instance_method" title="Proc#to_s (method)">#to_s</a>.</p>


  </div>
</div>

</section>
  <section class='method_details' id="lambda?-instance_method">
  <h3 class='signature'>
  #<strong>lambda?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns <code>true</code> for a Proc object for which argument handling is
rigid. Such procs are typically generated by <code>lambda</code>.</p>

<p>A Proc object generated by <code>proc</code> ignores extra arguments.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span><span class='rparen'>)</span>    <span class='comment'>#=&gt; [1,2]
</span></code></pre>

<p>It provides <code>nil</code> for missing arguments.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>        <span class='comment'>#=&gt; [1,nil]
</span></code></pre>

<p>It expands a single array argument.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rparen'>)</span>    <span class='comment'>#=&gt; [1,2]
</span></code></pre>

<p>A Proc object generated by <code>lambda</code> doesn&#39;t have such
tricks.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span><span class='rparen'>)</span>  <span class='comment'>#=&gt; ArgumentError
</span><span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>      <span class='comment'>#=&gt; ArgumentError
</span><span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rparen'>)</span>  <span class='comment'>#=&gt; ArgumentError
</span></code></pre>

<p><a href="#lambda%3F-instance_method" title="Proc#lambda? (method)">#lambda?</a> is a predicate for the tricks. It returns <code>true</code>
if no tricks apply.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_lambda?'>lambda?</span>            <span class='comment'>#=&gt; true
</span><span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_lambda?'>lambda?</span>              <span class='comment'>#=&gt; false
</span></code></pre>

<p><a href="#new-class_method" title="Proc.new (method)">new</a> is the same as <code>proc</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="" title="Proc (class)">Proc</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="#new-class_method" title="Proc.new (method)">new</a></span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_lambda?'>lambda?</span>          <span class='comment'>#=&gt; false
</span></code></pre>

<p><code>lambda</code>, <code>proc</code> and <a href="#new-class_method" title="Proc.new (method)">new</a> preserve the tricks
of a Proc object given by <code>&amp;</code> argument.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_lambda'>lambda</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_lambda?'>lambda?</span>   <span class='comment'>#=&gt; true
</span><span class='id identifier rubyid_proc'>proc</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_lambda?'>lambda?</span>     <span class='comment'>#=&gt; true
</span><span class='const'><a href="" title="Proc (class)">Proc</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="#new-class_method" title="Proc.new (method)">new</a></span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_lambda?'>lambda?</span> <span class='comment'>#=&gt; true
</span>
<span class='id identifier rubyid_lambda'>lambda</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_lambda?'>lambda?</span>     <span class='comment'>#=&gt; false
</span><span class='id identifier rubyid_proc'>proc</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_lambda?'>lambda?</span>       <span class='comment'>#=&gt; false
</span><span class='const'><a href="" title="Proc (class)">Proc</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="#new-class_method" title="Proc.new (method)">new</a></span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_lambda?'>lambda?</span>   <span class='comment'>#=&gt; false
</span></code></pre>

<p>A Proc object generated by <code>&amp;</code> argument has the tricks</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_n'>n</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_b'>b</span><span class='rparen'>)</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_lambda?'>lambda?</span> <span class='kw'>end</span>
<span class='id identifier rubyid_n'>n</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>                         <span class='comment'>#=&gt; false
</span></code></pre>

<p>The <code>&amp;</code> argument preserves the tricks if a Proc object is
given by <code>&amp;</code> argument.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_n'>n</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>                <span class='comment'>#=&gt; true
</span><span class='id identifier rubyid_n'>n</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>                  <span class='comment'>#=&gt; false
</span><span class='id identifier rubyid_n'>n</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='const'><a href="" title="Proc (class)">Proc</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="#new-class_method" title="Proc.new (method)">new</a></span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>              <span class='comment'>#=&gt; false
</span></code></pre>

<p>A Proc object converted from a method has no tricks.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_m'>m</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='kw'>end</span>
<span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:m</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_proc'>to_proc</span><span class='period'>.</span><span class='id identifier rubyid_lambda?'>lambda?</span>   <span class='comment'>#=&gt; true
</span>
<span class='id identifier rubyid_n'>n</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:m</span><span class='rparen'>)</span><span class='rparen'>)</span>               <span class='comment'>#=&gt; true
</span><span class='id identifier rubyid_n'>n</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:m</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_proc'>to_proc</span><span class='rparen'>)</span>       <span class='comment'>#=&gt; true
</span></code></pre>

<p><code>define_method</code> is treated the same as method definition. The
defined method has no tricks.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>C</span>
  <span class='id identifier rubyid_define_method'>define_method</span><span class='lparen'>(</span><span class='symbol'>:d</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='kw'>end</span>
<span class='const'>C</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='period'>.</span><span class='id identifier rubyid_d'>d</span><span class='lparen'>(</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='rparen'>)</span>       <span class='comment'>#=&gt; ArgumentError
</span><span class='const'>C</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='period'>.</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:d</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_proc'>to_proc</span><span class='period'>.</span><span class='id identifier rubyid_lambda?'>lambda?</span>   <span class='comment'>#=&gt; true
</span></code></pre>

<p><code>define_method</code> always defines a method without the tricks, even
if a non-lambda Proc object is given. This is the only exception for which
the tricks are not preserved.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>C</span>
  <span class='id identifier rubyid_define_method'>define_method</span><span class='lparen'>(</span><span class='symbol'>:e</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span>
<span class='const'>C</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='period'>.</span><span class='id identifier rubyid_e'>e</span><span class='lparen'>(</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='rparen'>)</span>       <span class='comment'>#=&gt; ArgumentError
</span><span class='const'>C</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='period'>.</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:e</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_proc'>to_proc</span><span class='period'>.</span><span class='id identifier rubyid_lambda?'>lambda?</span>   <span class='comment'>#=&gt; true
</span></code></pre>

<p>This exception insures that methods never have tricks and makes it easy to
have wrappers to define methods that behave as usual.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>C</span>
  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_def2'>def2</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_body'>body</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_define_method'>define_method</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_body'>body</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_def2'>def2</span><span class='lparen'>(</span><span class='symbol'>:f</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='kw'>end</span>
<span class='const'>C</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='period'>.</span><span class='id identifier rubyid_f'>f</span><span class='lparen'>(</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='rparen'>)</span>       <span class='comment'>#=&gt; ArgumentError
</span></code></pre>

<p>The wrapper <em>def2</em> defines a method which has no tricks.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/proc.c#L254'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


254
255
256
257
258
259
260
261</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'proc.c', line 254</span></pre>
<pre class='code cpp'>

VALUE
rb_proc_lambda_p(VALUE procval)
{
    rb_proc_t *proc;
    GetProcPtr(procval, proc);

    return proc-&gt;is_lambda ? Qtrue : Qfalse;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="parameters-instance_method">
  <h3 class='signature'>
  #<strong>parameters</strong>  &#x21d2; <tt><a href="Array.html" title="Array (class)">Array</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the parameter information of this proc.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_prc'>prc</span> <span class='op'>=</span> <span class='id identifier rubyid_lambda'>lambda</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='op'>=</span><span class='int'>42</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_other'>other</span><span class='op'>|</span><span class='rbrace'>}</span>
<span class='id identifier rubyid_prc'>prc</span><span class='period'>.</span><span class='id identifier rubyid_parameters'>parameters</span>  <span class='comment'>#=&gt; [[:req, :x], [:opt, :y], [:rest, :other]]
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/proc.c#L1132'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1132
1133
1134
1135
1136
1137
1138
1139
1140
1141</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'proc.c', line 1132</span></pre>
<pre class='code cpp'>

static VALUE
rb_proc_parameters(VALUE self)
{
    int is_proc;
    const rb_iseq_t *iseq = rb_proc_get_iseq(self, &amp;is_proc);
    if (!iseq) {
	return unnamed_parameters(rb_proc_arity(self));
    }
    return rb_iseq_parameters(iseq, is_proc);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="source_location-instance_method">
  <h3 class='signature'>
  #<strong>source_location</strong>  &#x21d2; <tt><a href="Array.html" title="Array (class)">Array</a></tt>, <tt><a href="Object.html#Fixnum-constant" title="Object::Fixnum (constant)">Fixnum</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the Ruby source filename and line number containing this proc or
<code>nil</code> if this proc was not defined in Ruby (i.e. native)</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/proc.c#L1097'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1097
1098
1099
1100
1101</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'proc.c', line 1097</span></pre>
<pre class='code cpp'>

VALUE
rb_proc_location(VALUE self)
{
    return iseq_location(rb_proc_get_iseq(self, 0));
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="to_proc-instance_method">
  <h3 class='signature'>
  #<strong>to_proc</strong>  &#x21d2; <tt><a href="" title="Proc (class)">Proc</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Part of the protocol for converting objects to <code>Proc</code> objects.
Instances of class <code>Proc</code> simply return themselves.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/proc.c#L1271'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1271
1272
1273
1274
1275</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'proc.c', line 1271</span></pre>
<pre class='code cpp'>

static VALUE
proc_to_proc(VALUE self)
{
    return self;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="to_s-instance_method">
  <h3 class='signature'>
  #<strong>to_s</strong>  
  <span class='aliases'>Also known as: <span class='names'><span>inspect</span></span>
  </span>
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/proc.c#L1254'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1254
1255
1256
1257
1258
1259
1260</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'proc.c', line 1254</span></pre>
<pre class='code cpp'>

static VALUE
proc_to_s(VALUE self)
{
    const rb_proc_t *proc;
    GetProcPtr(self, proc);
    return proc_to_s_(self, proc);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="yield-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>call</strong>(params, ...)  &#x21d2; <tt><a href="Object.html" title="Object (class)">Object</a></tt> </span>
    <span class='overload'>#<strong>[]</strong>(params, ...)  &#x21d2; <tt><a href="Object.html" title="Object (class)">Object</a></tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#%5B%5D-instance_method" title="Proc#[] (method)">#[]</a>.</p>


  </div>
</div>

</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.5 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>