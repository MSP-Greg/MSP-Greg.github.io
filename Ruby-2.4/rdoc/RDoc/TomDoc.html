<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: RDoc::TomDoc &mdash; rdoc Ruby-2.4.0 d2016-08-08</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "RDoc::TomDoc",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../../index.html'>Home</a> &raquo; 
          <a href='../../index.html'>Ruby-2.4.0</a> &raquo; 
          <a href='../index.html'>rdoc</a> &raquo; 
          <a href='../_index.html'>Index (T)</a> &raquo; 
          <a href="../RDoc.html" title="RDoc (module)">RDoc</a> &raquo; 
          <span class='title'>TomDoc</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: RDoc::TomDoc</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>
  <tr>
    <td class='box_1'>Inherits:</td>
    <td class='box_rel'>
      <span class='inheritName'><a href="Markup/Parser.html" title="RDoc::Markup::Parser (class)">Markup::Parser</a></span>
      <ul class='fullTree'>
        <li>Object</li>
        <li class='next'><a href="Markup/Parser.html" title="RDoc::Markup::Parser (class)">Markup::Parser</a></li>
        <li class='next'>RDoc::TomDoc</li>
      </ul>
      <a href='#' class='inheritanceTree'>show all</a>
    </td>
  </tr>
  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_max'>
<a href='https://github.com/ruby/ruby/blob/trunk/lib/rdoc/tom_doc.rb#L42'>lib/rdoc/tom_doc.rb</a></div>  </td>
  </tr>
</table>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>A parser for TomDoc based on TomDoc 1.0.0-rc1 (02adef9b5a)</p>

<p>The TomDoc specification can be found at:</p>

<p><a href="http://tomdoc.org">tomdoc.org</a></p>

<p>The latest version of the TomDoc specification can be found at:</p>

<p><a
href="https://github.com/mojombo/tomdoc/blob/master/tomdoc.md">github.com/mojombo/tomdoc/blob/master/tomdoc.md</a></p>

<p>To choose TomDoc as your only default format see
RDoc::Options@Saved+Options for instructions on setting up a
<code>.rdoc_options</code> file to store your project default.</p>

<p>There are a few differences between this parser and the specification.  A
best-effort was made to follow the specification as closely as possible but
some choices to deviate were made.</p>

<p>A future version of RDoc will warn when a MUST or MUST NOT is violated and
may warn when a SHOULD or SHOULD NOT is violated.  RDoc will always try to
emit documentation even if given invalid TomDoc.</p>

<p>Here are some implementation choices this parser currently makes:</p>

<p>This parser allows rdoc-style inline markup but you should not depended on
it.</p>

<p>This parser allows a space between the comment and the method body.</p>

<p>This parser does not require the default value to be described for an
optional argument.</p>

<p>This parser does not examine the order of sections.  An Examples section
may precede the Arguments section.</p>

<p>This class is documented in TomDoc format.  Since this is a subclass of the
RDoc markup parser there isn&#39;t much to see here, unfortunately.</p>


  </div>
</div>
<div class="tags">
  
</div>


  <h2>Constant Summary</h2>
  
  <h3 class="inherited">Constants inherited
     from <a href="Markup/Parser.html" title="RDoc::Markup::Parser (class)">Markup::Parser</a></h3>
  <p class="inherited"><a href="Markup/Parser.html#LIST_TOKENS-constant" title="RDoc::Markup::Parser::LIST_TOKENS (constant)">Markup::Parser::LIST_TOKENS</a></p>

  
  
  <h3 class="inherited">Constants included
     from <a href="Text.html" title="RDoc::Text (module)">Text</a></h3>
  <p class="inherited"><a href="Text.html#MARKUP_FORMAT-constant" title="RDoc::Text::MARKUP_FORMAT (constant)">RDoc::Text::MARKUP_FORMAT</a>, <a href="Text.html#TO_HTML_CHARACTERS-constant" title="RDoc::Text::TO_HTML_CHARACTERS (constant)">RDoc::Text::TO_HTML_CHARACTERS</a></p>

<h2>Instance Attribute Summary <small><a href='#' class='summary_toggle'>collapse</a></small></h2>

  <ul class="summary">
    <li>
      <span class="summary_signature">
        <a href="#tokens-instance_method" title="#tokens (instance method)">#<strong>tokens</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Internal: Token accessor</p>
</div>
      </span>
    </li>
  </ul>


  
  
  <h3 class="inherited">Attributes inherited from <a href="Markup/Parser.html" title="RDoc::Markup::Parser (class)">Markup::Parser</a></h3>
  <p class="inherited"><a href="Markup/Parser.html#debug-instance_method" title="RDoc::Markup::Parser#debug (method)">#debug</a></p>

<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#add_post_processor-class_method" title=".add_post_processor (class method)">.<strong>add_post_processor</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Internal: Adds a post-processor which sets the RDoc section based on the
comment&#39;s status.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>  &#x21d2; TomDoc </a>
      </span>
      <span class='note title constructor'>constructor</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Public: Creates a new TomDoc parser.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#parse-class_method" title=".parse (class method)">.<strong>parse</strong>(text)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Public: Parses TomDoc from text</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#signature-class_method" title=".signature (class method)">.<strong>signature</strong>(comment)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Internal: Extracts the Signature section&#39;s method signature</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#build_heading-instance_method" title="#build_heading (instance method)">#<strong>build_heading</strong>(level)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Internal: Builds a heading from the token stream</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#build_paragraph-instance_method" title="#build_paragraph (instance method)">#<strong>build_paragraph</strong>(margin)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Internal: Builds a paragraph from the token stream</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#build_verbatim-instance_method" title="#build_verbatim (instance method)">#<strong>build_verbatim</strong>(margin)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Internal: Builds a verbatim from the token stream.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#parse_text-instance_method" title="#parse_text (instance method)">#<strong>parse_text</strong>(parent, indent)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Detects a section change to “Returns” and adds a heading</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#tokenize-instance_method" title="#tokenize (instance method)">#<strong>tokenize</strong>(text)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Internal: Turns text into an Array of tokens</p>
</div>
      </span>
    </li>
  </ul>



  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <a href="Markup/Parser.html" title="RDoc::Markup::Parser (class)">Markup::Parser</a></h3>
  <p class="inherited"><a href="Markup/Parser.html#build_list-instance_method" title="RDoc::Markup::Parser#build_list (method)">#build_list</a>, <a href="Markup/Parser.html#char_pos-instance_method" title="RDoc::Markup::Parser#char_pos (method)">#char_pos</a>, <a href="Markup/Parser.html#get-instance_method" title="RDoc::Markup::Parser#get (method)">#get</a>, <a href="Markup/Parser.html#parse-instance_method" title="RDoc::Markup::Parser#parse (method)">#parse</a>, <a href="Markup/Parser.html#peek_token-instance_method" title="RDoc::Markup::Parser#peek_token (method)">#peek_token</a>, <a href="Markup/Parser.html#setup_scanner-instance_method" title="RDoc::Markup::Parser#setup_scanner (method)">#setup_scanner</a>, <a href="Markup/Parser.html#skip-instance_method" title="RDoc::Markup::Parser#skip (method)">#skip</a>, <a href="Markup/Parser.html#token_pos-instance_method" title="RDoc::Markup::Parser#token_pos (method)">#token_pos</a>, <a href="Markup/Parser.html#tokenize-class_method" title="RDoc::Markup::Parser.tokenize (method)">.tokenize</a>, <a href="Markup/Parser.html#unget-instance_method" title="RDoc::Markup::Parser#unget (method)">#unget</a></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <a href="Text.html" title="RDoc::Text (module)">Text</a></h3>
  <p class="inherited"><a href="Text.html#encode_fallback-class_method" title="RDoc::Text.encode_fallback (method)">.encode_fallback</a>, <a href="Text.html#expand_tabs-instance_method" title="RDoc::Text#expand_tabs (method)">#expand_tabs</a>, <a href="Text.html#flush_left-instance_method" title="RDoc::Text#flush_left (method)">#flush_left</a>, <a href="Text.html#markup-instance_method" title="RDoc::Text#markup (method)">#markup</a>, <a href="Text.html#normalize_comment-instance_method" title="RDoc::Text#normalize_comment (method)">#normalize_comment</a>, <a href="Text.html#parse-instance_method" title="RDoc::Text#parse (method)">#parse</a>, <a href="Text.html#snippet-instance_method" title="RDoc::Text#snippet (method)">#snippet</a>, <a href="Text.html#strip_hashes-instance_method" title="RDoc::Text#strip_hashes (method)">#strip_hashes</a>, <a href="Text.html#strip_newlines-instance_method" title="RDoc::Text#strip_newlines (method)">#strip_newlines</a>, <a href="Text.html#strip_stars-instance_method" title="RDoc::Text#strip_stars (method)">#strip_stars</a>, <a href="Text.html#to_html-instance_method" title="RDoc::Text#to_html (method)">#to_html</a>, <a href="Text.html#wrap-instance_method" title="RDoc::Text#wrap (method)">#wrap</a></p>
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature first'>
  .<strong>new</strong>  &#x21d2; <tt><a href="" title="RDoc::TomDoc (class)">TomDoc</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Public: Creates a new TomDoc parser.  See also <a href="Markup.html" title="RDoc::Markup (class)">Markup</a>::parse</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rdoc/tom_doc.rb#L130'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


130
131
132
133
134
135</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/tom_doc.rb', line 130</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>
  <span class='kw'>super</span>

  <span class='ivar'>@section</span>      <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@seen_returns</span> <span class='op'>=</span> <span class='kw'>false</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Attribute Details</h2>
  <section class='method_details first' id="tokens-instance_method">
  <h3 class='signature first'>
  #<strong>tokens</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Internal: Token accessor</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rdoc/tom_doc.rb#L46'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


46</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/tom_doc.rb', line 46</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_tokens'>tokens</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Class Method Details</h2>
  <section class='method_details first' id="add_post_processor-class_method">
  <h3 class='signature first'>
  .<strong>add_post_processor</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Internal: Adds a post-processor which sets the RDoc section based on the
comment&#39;s status.</p>

<p>Returns nothing.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rdoc/tom_doc.rb#L53'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


53
54
55
56
57
58
59
60
61
62
63
64
65</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/tom_doc.rb', line 53</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_add_post_processor'>add_post_processor</span> <span class='comment'># :nodoc:
</span>  <span class='const'><a href="RDoc.html" title="RDoc::RDoc (class)">RDoc</a></span><span class='op'>::</span><span class='const'>Markup</span><span class='op'>::</span><span class='const'>PreProcess</span><span class='period'>.</span><span class='id identifier rubyid_post_process'>post_process</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_comment'>comment</span><span class='comma'>,</span> <span class='id identifier rubyid_code_object'>code_object</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_code_object'>code_object</span> <span class='kw'>and</span>
                <span class='const'><a href="RDoc.html" title="RDoc::RDoc (class)">RDoc</a></span><span class='op'>::</span><span class='const'>Comment</span> <span class='op'>===</span> <span class='id identifier rubyid_comment'>comment</span> <span class='kw'>and</span> <span class='id identifier rubyid_comment'>comment</span><span class='period'>.</span><span class='id identifier rubyid_format'>format</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tomdoc</span><span class='tstring_end'>&#39;</span></span>

    <span class='id identifier rubyid_comment'>comment</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(\A\s*# )(Public|Internal|Deprecated):\s+</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_section'>section</span> <span class='op'>=</span> <span class='id identifier rubyid_code_object'>code_object</span><span class='period'>.</span><span class='id identifier rubyid_add_section'>add_section</span> <span class='backref'>$2</span>
      <span class='id identifier rubyid_code_object'>code_object</span><span class='period'>.</span><span class='id identifier rubyid_temporary_section'>temporary_section</span> <span class='op'>=</span> <span class='id identifier rubyid_section'>section</span>

      <span class='backref'>$1</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="parse-class_method">
  <h3 class='signature'>
  .<strong>parse</strong>(text)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Public: Parses TomDoc from text</p>

<p>text - A String containing TomDoc-format text.</p>

<p>Examples</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="RDoc.html" title="RDoc::RDoc (class)">RDoc</a></span><span class='op'>::</span><span class='const'>TomDoc</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span> <span class='heredoc_beg'>&lt;&lt;-TOMDOC</span>
<span class='tstring_content'>This method does some things

Returns nothing.
</span><span class='heredoc_end'>TOMDOC
</span><span class='comment'># =&gt; #&lt;RDoc::Markup::Document:0xXXX @parts=[...], @file=nil&gt;
</span></code></pre>

<p>Returns an <a href="Markup/Document.html" title="RDoc::Markup::Document (class)">Markup::Document</a> representing the TomDoc format.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rdoc/tom_doc.rb#L84'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


84
85
86
87
88
89
90
91</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/tom_doc.rb', line 84</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span> <span class='id identifier rubyid_text'>text</span>
  <span class='id identifier rubyid_parser'>parser</span> <span class='op'>=</span> <span class='id identifier rubyid_new'>new</span>

  <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_tokenize'>tokenize</span> <span class='id identifier rubyid_text'>text</span>
  <span class='id identifier rubyid_doc'>doc</span> <span class='op'>=</span> <span class='const'><a href="RDoc.html" title="RDoc::RDoc (class)">RDoc</a></span><span class='op'>::</span><span class='const'>Markup</span><span class='op'>::</span><span class='const'>Document</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span> <span class='id identifier rubyid_doc'>doc</span>
  <span class='id identifier rubyid_doc'>doc</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="signature-class_method">
  <h3 class='signature'>
  .<strong>signature</strong>(comment)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Internal: Extracts the Signature section&#39;s method signature</p>

<p>comment - An <a href="Comment.html" title="RDoc::Comment (class)">Comment</a> that will be parsed and have the signature</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_extracted'>extracted</span>
</code></pre>

<p>Returns a String containing the signature and nil if not</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rdoc/tom_doc.rb#L100'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/tom_doc.rb', line 100</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_signature'>signature</span> <span class='id identifier rubyid_comment'>comment</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_comment'>comment</span><span class='period'>.</span><span class='id identifier rubyid_tomdoc?'>tomdoc?</span>

  <span class='id identifier rubyid_document'>document</span> <span class='op'>=</span> <span class='id identifier rubyid_comment'>comment</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span>

  <span class='id identifier rubyid_signature'>signature</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_found_heading'>found_heading</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_found_signature'>found_signature</span> <span class='op'>=</span> <span class='kw'>false</span>

  <span class='id identifier rubyid_document'>document</span><span class='period'>.</span><span class='id identifier rubyid_parts'>parts</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_part'>part</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_found_signature'>found_signature</span>

    <span class='id identifier rubyid_found_heading'>found_heading</span> <span class='op'>||=</span>
      <span class='const'><a href="RDoc.html" title="RDoc::RDoc (class)">RDoc</a></span><span class='op'>::</span><span class='const'>Markup</span><span class='op'>::</span><span class='const'>Heading</span> <span class='op'>===</span> <span class='id identifier rubyid_part'>part</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_part'>part</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Signature</span><span class='tstring_end'>&#39;</span></span>

    <span class='kw'>next</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_found_heading'>found_heading</span>

    <span class='kw'>next</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='const'><a href="RDoc.html" title="RDoc::RDoc (class)">RDoc</a></span><span class='op'>::</span><span class='const'>Markup</span><span class='op'>::</span><span class='const'>BlankLine</span> <span class='op'>===</span> <span class='id identifier rubyid_part'>part</span>

    <span class='kw'>if</span> <span class='const'><a href="RDoc.html" title="RDoc::RDoc (class)">RDoc</a></span><span class='op'>::</span><span class='const'>Markup</span><span class='op'>::</span><span class='const'>Verbatim</span> <span class='op'>===</span> <span class='id identifier rubyid_part'>part</span> <span class='kw'>then</span>
      <span class='id identifier rubyid_signature'>signature</span> <span class='op'>=</span> <span class='id identifier rubyid_part'>part</span>
      <span class='id identifier rubyid_found_signature'>found_signature</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_signature'>signature</span> <span class='kw'>and</span> <span class='id identifier rubyid_signature'>signature</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="build_heading-instance_method">
  <h3 class='signature first'>
  #<strong>build_heading</strong>(level)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Internal: Builds a heading from the token stream</p>

<p>level - The level of heading to create</p>

<p>Returns an Markup::Heading</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rdoc/tom_doc.rb#L143'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


143
144
145
146
147
148
149</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/tom_doc.rb', line 143</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build_heading'>build_heading</span> <span class='id identifier rubyid_level'>level</span>
  <span class='id identifier rubyid_heading'>heading</span> <span class='op'>=</span> <span class='kw'>super</span>

  <span class='ivar'>@section</span> <span class='op'>=</span> <span class='id identifier rubyid_heading'>heading</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span>

  <span class='id identifier rubyid_heading'>heading</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="build_paragraph-instance_method">
  <h3 class='signature'>
  #<strong>build_paragraph</strong>(margin)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Internal: Builds a paragraph from the token stream</p>

<p>margin - Unused</p>

<p>Returns an <a href="Markup/Paragraph.html" title="RDoc::Markup::Paragraph (class)">Markup::Paragraph</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rdoc/tom_doc.rb#L173'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/tom_doc.rb', line 173</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build_paragraph'>build_paragraph</span> <span class='id identifier rubyid_margin'>margin</span>
  <span class='id identifier rubyid_p'>p</span> <span class='symbeg'>:</span><span class='id identifier rubyid_paragraph_start'>paragraph_start</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_margin'>margin</span> <span class='kw'>if</span> <span class='ivar'>@debug</span>

  <span class='id identifier rubyid_paragraph'>paragraph</span> <span class='op'>=</span> <span class='const'><a href="RDoc.html" title="RDoc::RDoc (class)">RDoc</a></span><span class='op'>::</span><span class='const'>Markup</span><span class='op'>::</span><span class='const'>Paragraph</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

  <span class='kw'>until</span> <span class='ivar'>@tokens</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='op'>=</span> <span class='id identifier rubyid_get'>get</span>

    <span class='kw'>case</span> <span class='id identifier rubyid_type'>type</span>
    <span class='kw'>when</span> <span class='symbeg'>:</span><span class='const'>TEXT</span> <span class='kw'>then</span>
      <span class='ivar'>@section</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Returns</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\AReturns</span><span class='regexp_end'>/</span></span>

      <span class='id identifier rubyid_paragraph'>paragraph</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_data'>data</span>
    <span class='kw'>when</span> <span class='symbeg'>:</span><span class='const'>NEWLINE</span> <span class='kw'>then</span>
      <span class='kw'>if</span> <span class='symbeg'>:</span><span class='const'>TEXT</span> <span class='op'>==</span> <span class='id identifier rubyid_peek_token'>peek_token</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='kw'>then</span>
        <span class='id identifier rubyid_paragraph'>paragraph</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>else</span>
        <span class='kw'>break</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_unget'>unget</span>
      <span class='kw'>break</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_p'>p</span> <span class='symbeg'>:</span><span class='id identifier rubyid_paragraph_end'>paragraph_end</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_margin'>margin</span> <span class='kw'>if</span> <span class='ivar'>@debug</span>

  <span class='id identifier rubyid_paragraph'>paragraph</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="build_verbatim-instance_method">
  <h3 class='signature'>
  #<strong>build_verbatim</strong>(margin)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Internal: Builds a verbatim from the token stream.  A verbatim in the
Examples section will be marked as in Ruby format.</p>

<p>margin - The indentation from the margin for lines that belong to this</p>

<pre class="code ruby"><code class="ruby">verbatim section.</code></pre>

<p>Returns an <a href="Markup/Verbatim.html" title="RDoc::Markup::Verbatim (class)">Markup::Verbatim</a></p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rdoc/tom_doc.rb#L159'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


159
160
161
162
163
164
165</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/tom_doc.rb', line 159</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build_verbatim'>build_verbatim</span> <span class='id identifier rubyid_margin'>margin</span>
  <span class='id identifier rubyid_verbatim'>verbatim</span> <span class='op'>=</span> <span class='kw'>super</span>

  <span class='id identifier rubyid_verbatim'>verbatim</span><span class='period'>.</span><span class='id identifier rubyid_format'>format</span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ruby'>ruby</span> <span class='kw'>if</span> <span class='ivar'>@section</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Examples</span><span class='tstring_end'>&#39;</span></span>

  <span class='id identifier rubyid_verbatim'>verbatim</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="parse_text-instance_method">
  <h3 class='signature'>
  #<strong>parse_text</strong>(parent, indent)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Detects a section change to “Returns” and adds a heading</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rdoc/tom_doc.rb#L206'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


206
207
208
209
210
211
212
213
214
215
216</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/tom_doc.rb', line 206</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_text'>parse_text</span> <span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_indent'>indent</span> <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_paragraph'>paragraph</span> <span class='op'>=</span> <span class='id identifier rubyid_build_paragraph'>build_paragraph</span> <span class='id identifier rubyid_indent'>indent</span>

  <span class='kw'>if</span> <span class='kw'>false</span> <span class='op'>==</span> <span class='ivar'>@seen_returns</span> <span class='kw'>and</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Returns</span><span class='tstring_end'>&#39;</span></span> <span class='op'>==</span> <span class='ivar'>@section</span> <span class='kw'>then</span>
    <span class='ivar'>@seen_returns</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_parent'>parent</span> <span class='op'>&lt;&lt;</span> <span class='const'><a href="RDoc.html" title="RDoc::RDoc (class)">RDoc</a></span><span class='op'>::</span><span class='const'>Markup</span><span class='op'>::</span><span class='const'>Heading</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='int'>3</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Returns</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_parent'>parent</span> <span class='op'>&lt;&lt;</span> <span class='const'><a href="RDoc.html" title="RDoc::RDoc (class)">RDoc</a></span><span class='op'>::</span><span class='const'>Markup</span><span class='op'>::</span><span class='const'>BlankLine</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_parent'>parent</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_paragraph'>paragraph</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="tokenize-instance_method">
  <h3 class='signature'>
  #<strong>tokenize</strong>(text)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Internal: Turns text into an Array of tokens</p>

<p>text - A String containing TomDoc-format text.</p>

<p>Returns self.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rdoc/tom_doc.rb#L224'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rdoc/tom_doc.rb', line 224</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_tokenize'>tokenize</span> <span class='id identifier rubyid_text'>text</span>
  <span class='id identifier rubyid_text'>text</span><span class='period'>.</span><span class='id identifier rubyid_sub!'>sub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A(Public|Internal|Deprecated):\s+</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='id identifier rubyid_setup_scanner'>setup_scanner</span> <span class='id identifier rubyid_text'>text</span>

  <span class='kw'>until</span> <span class='ivar'>@s</span><span class='period'>.</span><span class='id identifier rubyid_eos?'>eos?</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_pos'>pos</span> <span class='op'>=</span> <span class='ivar'>@s</span><span class='period'>.</span><span class='id identifier rubyid_pos'>pos</span>

    <span class='comment'># leading spaces will be reflected by the column of the next token
</span>    <span class='comment'># the only thing we loose are trailing spaces at the end of the file
</span>    <span class='kw'>next</span> <span class='kw'>if</span> <span class='ivar'>@s</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'> +</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>

    <span class='ivar'>@tokens</span> <span class='op'>&lt;&lt;</span> <span class='kw'>case</span>
               <span class='kw'>when</span> <span class='ivar'>@s</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\r?\n</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>then</span>
                 <span class='id identifier rubyid_token'>token</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='symbeg'>:</span><span class='const'>NEWLINE</span><span class='comma'>,</span> <span class='ivar'>@s</span><span class='period'>.</span><span class='id identifier rubyid_matched'>matched</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_token_pos'>token_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='rparen'>)</span><span class='rbracket'>]</span>
                 <span class='ivar'>@line_pos</span> <span class='op'>=</span> <span class='id identifier rubyid_char_pos'>char_pos</span> <span class='ivar'>@s</span><span class='period'>.</span><span class='id identifier rubyid_pos'>pos</span>
                 <span class='ivar'>@line</span> <span class='op'>+=</span> <span class='int'>1</span>
                 <span class='id identifier rubyid_token'>token</span>
               <span class='kw'>when</span> <span class='ivar'>@s</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(Examples|Signature)$</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>then</span>
                 <span class='ivar'>@tokens</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='symbeg'>:</span><span class='const'>HEADER</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_token_pos'>token_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='rparen'>)</span><span class='rbracket'>]</span>

                 <span class='lbracket'>[</span><span class='symbeg'>:</span><span class='const'>TEXT</span><span class='comma'>,</span> <span class='ivar'>@s</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_token_pos'>token_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='rparen'>)</span><span class='rbracket'>]</span>
               <span class='kw'>when</span> <span class='ivar'>@s</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>([:\w][\w\[\]]*)[ ]+- </span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>then</span>
                 <span class='lbracket'>[</span><span class='symbeg'>:</span><span class='const'>NOTE</span><span class='comma'>,</span> <span class='ivar'>@s</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_token_pos'>token_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='rparen'>)</span><span class='rbracket'>]</span>
               <span class='kw'>else</span>
                 <span class='ivar'>@s</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>.*</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
                 <span class='lbracket'>[</span><span class='symbeg'>:</span><span class='const'>TEXT</span><span class='comma'>,</span> <span class='ivar'>@s</span><span class='period'>.</span><span class='id identifier rubyid_matched'>matched</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\r$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_token_pos'>token_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='rparen'>)</span><span class='rbracket'>]</span>
               <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>self</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.5 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>