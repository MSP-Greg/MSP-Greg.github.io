<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Zlib::GzipWriter &mdash; zlib Ruby-2.4.0 d2016-08-04</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "Zlib::GzipWriter",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../../index.html'>Home</a> &raquo; 
          <a href='../../index.html'>Ruby-2.4.0</a> &raquo; 
          <a href='../index.html'>zlib</a> &raquo; 
          <a href='../_index.html'>Index (G)</a> &raquo; 
          <a href="../Zlib.html" title="Zlib (module)">Zlib</a> &raquo; 
          <span class='title'>GzipWriter</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: Zlib::GzipWriter</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>
  <tr>
    <td class='box_1'>Inherits:</td>
    <td class='box_rel'>
      <span class='inheritName'><a href="GzipFile.html" title="Zlib::GzipFile (class)">GzipFile</a></span>
      <ul class='fullTree'>
        <li>Object</li>
        <li class='next'><a href="GzipFile.html" title="Zlib::GzipFile (class)">GzipFile</a></li>
        <li class='next'>Zlib::GzipWriter</li>
      </ul>
      <a href='#' class='inheritanceTree'>show all</a>
    </td>
  </tr>
  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_max'>
<a href='https://github.com/ruby/ruby/blob/trunk/ext/zlib/zlib.c#L4470'>ext/zlib/zlib.c</a></div>  </td>
  </tr>
</table>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p><a href="" title="Zlib::GzipWriter (class)">GzipWriter</a> is a class for writing gzipped files.  GzipWriter should
be used with an instance of IO, or IO-like, object.</p>

<p>Following two example generate the same result.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../Zlib.html" title="Zlib (module)">Zlib</a></span><span class='op'>::</span><span class='const'>GzipWriter</span><span class='period'>.</span><span class='id identifier rubyid_open'><a href="#open-class_method" title="Zlib::GzipWriter.open (method)">open</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hoge.gz</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_gz'>gz</span><span class='op'>|</span>
  <span class='id identifier rubyid_gz'>gz</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jugemu jugemu gokou no surikire...</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>

<span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hoge.gz</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
  <span class='id identifier rubyid_gz'>gz</span> <span class='op'>=</span> <span class='const'><a href="../Zlib.html" title="Zlib (module)">Zlib</a></span><span class='op'>::</span><span class='const'>GzipWriter</span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="#new-class_method" title="Zlib::GzipWriter.new (method)">new</a></span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_gz'>gz</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>jugemu jugemu gokou no surikire...</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_gz'>gz</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
<span class='kw'>end</span>
</code></pre>

<p>To make like gzip(1) does, run following:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_orig'>orig</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hoge.txt</span><span class='tstring_end'>&#39;</span></span>
<span class='const'><a href="../Zlib.html" title="Zlib (module)">Zlib</a></span><span class='op'>::</span><span class='const'>GzipWriter</span><span class='period'>.</span><span class='id identifier rubyid_open'><a href="#open-class_method" title="Zlib::GzipWriter.open (method)">open</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hoge.gz</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_gz'>gz</span><span class='op'>|</span>
  <span class='id identifier rubyid_gz'>gz</span><span class='period'>.</span><span class='id identifier rubyid_mtime'>mtime</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_mtime'>mtime</span><span class='lparen'>(</span><span class='id identifier rubyid_orig'>orig</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_gz'>gz</span><span class='period'>.</span><span class='id identifier rubyid_orig_name'>orig_name</span> <span class='op'>=</span> <span class='id identifier rubyid_orig'>orig</span>
  <span class='id identifier rubyid_gz'>gz</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='const'>IO</span><span class='period'>.</span><span class='id identifier rubyid_binread'>binread</span><span class='lparen'>(</span><span class='id identifier rubyid_orig'>orig</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</code></pre>

<p>NOTE: Due to the limitation of Ruby&#39;s finalizer, you must explicitly
close GzipWriter objects by #close etc.  Otherwise,
GzipWriter will be not able to write the gzip footer and will generate a
broken gzip file.</p>


  </div>
</div>
<div class="tags">
  
</div>




<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#new-class_method" title="new (class method)">.<strong>new</strong>(io, level = nil, strategy = nil, options = {})  </a>
      </span>
      <span class='note title constructor'>constructor</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Creates a GzipWriter object associated with <code>io</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#open-class_method" title="open (class method)">.<strong>open</strong>(filename, level = nil, strategy = nil) {|gz| ... } </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Opens a file specified by <code>filename</code> for writing gzip compressed
data, and returns a GzipWriter object associated with that file.</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#%3C%3C-instance_method" title="#&lt;&lt; (instance method)">#<strong>&lt;&lt;</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#comment%3D-instance_method" title="#the (instance method)">#<strong>the</strong>(comment)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#flush-instance_method" title="#flush (instance method)">#<strong>flush</strong>(flush = nil)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Flushes all the internal buffers of the GzipWriter object.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#mtime%3D-instance_method" title="#the (instance method)">#<strong>the</strong>(modification)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Using a Fixnum or Integer.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#orig_name%3D-instance_method" title="#the (instance method)">#<strong>the</strong>(original)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#tell-instance_method" title="#number (instance method)">#<strong>number</strong>(of)  </a>
        (also: #tell)
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#print-instance_method" title="#as (instance method)">#<strong>as</strong>(IO)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#printf-instance_method" title="#as (instance method)">#<strong>as</strong>(IO)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#putc-instance_method" title="#putc (instance method)">#<strong>putc</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>——— Prototypes ——–</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#puts-instance_method" title="#as (instance method)">#<strong>as</strong>(IO)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#tell-instance_method" title="#tell (instance method)">#<strong>tell</strong>(of)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#pos-instance_method" title="Zlib::GzipWriter#pos (method)">#pos</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#write-instance_method" title="#write (instance method)">#<strong>write</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>——— Prototypes ——–</p>
</div>
      </span>
    </li>
  </ul>



  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <a href="GzipFile.html" title="Zlib::GzipFile (class)">GzipFile</a></h3>
  <p class="inherited"><a href="GzipFile.html#close-instance_method" title="Zlib::GzipFile#close (method)">#close</a>, <a href="GzipFile.html#closed%3F-instance_method" title="Zlib::GzipFile#closed? (method)">#closed?</a>, <a href="GzipFile.html#comment-instance_method" title="Zlib::GzipFile#comment (method)">#comment</a>, <a href="GzipFile.html#crc-instance_method" title="Zlib::GzipFile#crc (method)">#crc</a>, <a href="GzipFile.html#finish-instance_method" title="Zlib::GzipFile#finish (method)">#finish</a>, <a href="GzipFile.html#level-instance_method" title="Zlib::GzipFile#level (method)">#level</a>, <a href="GzipFile.html#mtime-instance_method" title="Zlib::GzipFile#mtime (method)">#mtime</a>, <a href="GzipFile.html#orig_name-instance_method" title="Zlib::GzipFile#orig_name (method)">#orig_name</a>, <a href="GzipFile.html#os_code-instance_method" title="Zlib::GzipFile#os_code (method)">#os_code</a>, <a href="GzipFile.html#sync-instance_method" title="Zlib::GzipFile#sync (method)">#sync</a>, <a href="GzipFile.html#sync%3D-instance_method" title="Zlib::GzipFile#sync= (method)">#sync=</a>, <a href="GzipFile.html#to_io-instance_method" title="Zlib::GzipFile#to_io (method)">#to_io</a>, <a href="GzipFile.html#wrap-class_method" title="Zlib::GzipFile.wrap (method)">.wrap</a></p>
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>
  <section class='method_details first' id="new-class_method">
  <h3 class='signature first'>
  .<strong>new</strong>(io, level = nil, strategy = nil, options = {})  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates a GzipWriter object associated with <code>io</code>.
<code>level</code> and <code>strategy</code> should be the same as the
arguments of <a href="Deflate.html" title="Zlib::Deflate (class)">Deflate</a>.new.  The GzipWriter object writes gzipped
data to <code>io</code>.  <code>io</code> must respond to the
<code>write</code> method that behaves the same as <code>IO#write</code>.</p>

<p>The <code>options</code> hash may be used to set the encoding of the data.
<code>:external_encoding</code>, <code>:internal_encoding</code> and
<code>:encoding</code> may be set as in <code>IO.new</code>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/zlib/zlib.c#L3520'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


3520
3521
3522
3523
3524
3525
3526
3527
3528
3529
3530
3531
3532
3533
3534
3535
3536
3537
3538
3539
3540
3541
3542
3543
3544
3545
3546
3547
3548
3549
3550
3551
3552</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/zlib/zlib.c', line 3520</span></pre>
<pre class='code cpp'>

static VALUE
rb_gzwriter_initialize(int argc, VALUE *argv, VALUE obj)
{
    struct gzfile *gz;
    VALUE io, level, strategy, opt = Qnil;
    int err;

    if (argc &gt; 1) {
	opt = rb_check_convert_type(argv[argc-1], T_HASH, &quot;Hash&quot;, &quot;to_hash&quot;);
	if (!NIL_P(opt)) argc--;
    }

    rb_scan_args(argc, argv, &quot;12&quot;, &amp;io, &amp;level, &amp;strategy);
    TypedData_Get_Struct(obj, struct gzfile, &amp;gzfile_data_type, gz);

    /* this is undocumented feature of zlib */
    gz-&gt;level = ARG_LEVEL(level);
    err = deflateInit2(&amp;gz-&gt;z.stream, gz-&gt;level, Z_DEFLATED,
		       -MAX_WBITS, DEF_MEM_LEVEL, ARG_STRATEGY(strategy));
    if (err != Z_OK) {
	raise_zlib_error(err, gz-&gt;z.stream.msg);
    }
    gz-&gt;io = io;
    ZSTREAM_READY(&amp;gz-&gt;z);
    rb_gzfile_ecopts(gz, opt);

    if (rb_respond_to(io, id_path)) {
	gz-&gt;path = rb_funcall(gz-&gt;io, id_path, 0);
	rb_define_singleton_method(obj, &quot;path&quot;, rb_gzfile_path, 0);
    }

    return obj;
}
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Class Method Details</h2>
  <section class='method_details first' id="open-class_method">
  <h3 class='signature first'>
  .<strong>open</strong>(filename, level = nil, strategy = nil) {|gz| ... } 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Opens a file specified by <code>filename</code> for writing gzip compressed
data, and returns a GzipWriter object associated with that file.  Further
details of this method are found in <a href="" title="Zlib::GzipWriter (class)">Zlib::GzipWriter</a>.new and
<a href="GzipFile.html" title="Zlib::GzipFile (class)">Zlib::GzipFile</a>.wrap.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/zlib/zlib.c#L3501'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


3501
3502
3503
3504
3505</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/zlib/zlib.c', line 3501</span></pre>
<pre class='code cpp'>

static VALUE
rb_gzwriter_s_open(int argc, VALUE *argv, VALUE klass)
{
    return gzfile_s_open(argc, argv, klass, &quot;wb&quot;);
}
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="<<-instance_method">
  <h3 class='signature first'>
  #<strong>&lt;&lt;</strong>  
</h3>
  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/zlib/zlib.c#L4506'>GitHub</a> ]</span>

</section>
  <section class='method_details' id="comment=-instance_method">
  <h3 class='signature'>
  #<strong>the</strong>(comment)  
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/zlib/zlib.c#L3281'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


3281
3282
3283
3284
3285
3286
3287
3288
3289
3290
3291
3292
3293
3294
3295
3296
3297
3298</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/zlib/zlib.c', line 3281</span></pre>
<pre class='code cpp'>

static VALUE
rb_gzfile_set_comment(VALUE obj, VALUE str)
{
    struct gzfile *gz = get_gzfile(obj);
    VALUE s;
    char *p;

    if (gz-&gt;z.flags &amp; GZFILE_FLAG_HEADER_FINISHED) {
	rb_raise(cGzError, &quot;header is already written&quot;);
    }
    s = rb_str_dup(rb_str_to_str(str));
    p = memchr(RSTRING_PTR(s), &#39;\0&#39;, RSTRING_LEN(s));
    if (p) {
	rb_str_resize(s, p - RSTRING_PTR(s));
    }
    gz-&gt;comment = s;
    return str;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="flush-instance_method">
  <h3 class='signature'>
  #<strong>flush</strong>(flush = nil)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Flushes all the internal buffers of the GzipWriter object.  The meaning of
<code>flush</code> is same as in <a href="Deflate.html#deflate-instance_method" title="Zlib::Deflate#deflate (method)">Deflate#deflate</a>. 
<code>Zlib::SYNC_FLUSH</code> is used if <code>flush</code> is omitted.  It
is no use giving flush <code>Zlib::NO_FLUSH</code>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/zlib/zlib.c#L3561'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


3561
3562
3563
3564
3565
3566
3567
3568
3569
3570
3571
3572
3573
3574
3575
3576
3577
3578
3579
3580</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/zlib/zlib.c', line 3561</span></pre>
<pre class='code cpp'>

static VALUE
rb_gzwriter_flush(int argc, VALUE *argv, VALUE obj)
{
    struct gzfile *gz = get_gzfile(obj);
    VALUE v_flush;
    int flush;

    rb_scan_args(argc, argv, &quot;01&quot;, &amp;v_flush);

    flush = FIXNUMARG(v_flush, Z_SYNC_FLUSH);
    if (flush != Z_NO_FLUSH) {  /* prevent Z_BUF_ERROR */
	zstream_run(&amp;gz-&gt;z, (Bytef*)&quot;&quot;, 0, flush);
    }

    gzfile_write_raw(gz);
    if (rb_respond_to(gz-&gt;io, id_flush)) {
	rb_funcall(gz-&gt;io, id_flush, 0);
    }
    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="mtime=-instance_method">
  <h3 class='signature'>
  #<strong>the</strong>(modification)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Using a Fixnum or Integer.</p>

<p>Setting the mtime in the gzip header does not effect the mtime of the file
generated. Different utilities that expand the gzipped files may use the
mtime header. For example the gunzip utility can use the <code>-N</code>
flag which will set the resultant file&#39;s mtime to the value in the
header. By default many tools will set the mtime of the expanded file to
the mtime of the gzipped file, not the mtime in the header.</p>

<p>If you do not set an mtime, the default value will be the time when
compression started. Setting a value of 0 indicates no time stamp is
available.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/zlib/zlib.c#L3236'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


3236
3237
3238
3239
3240
3241
3242
3243
3244
3245
3246
3247
3248
3249
3250</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/zlib/zlib.c', line 3236</span></pre>
<pre class='code cpp'>

static VALUE
rb_gzfile_set_mtime(VALUE obj, VALUE mtime)
{
    struct gzfile *gz = get_gzfile(obj);
    VALUE val;

    if (gz-&gt;z.flags &amp; GZFILE_FLAG_HEADER_FINISHED) {
	rb_raise(cGzError, &quot;header is already written&quot;);
    }

    val = rb_Integer(mtime);
    gz-&gt;mtime = NUM2UINT(val);

    return mtime;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="orig_name=-instance_method">
  <h3 class='signature'>
  #<strong>the</strong>(original)  
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/zlib/zlib.c#L3257'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


3257
3258
3259
3260
3261
3262
3263
3264
3265
3266
3267
3268
3269
3270
3271
3272
3273
3274</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/zlib/zlib.c', line 3257</span></pre>
<pre class='code cpp'>

static VALUE
rb_gzfile_set_orig_name(VALUE obj, VALUE str)
{
    struct gzfile *gz = get_gzfile(obj);
    VALUE s;
    char *p;

    if (gz-&gt;z.flags &amp; GZFILE_FLAG_HEADER_FINISHED) {
	rb_raise(cGzError, &quot;header is already written&quot;);
    }
    s = rb_str_dup(rb_str_to_str(str));
    p = memchr(RSTRING_PTR(s), &#39;\0&#39;, RSTRING_LEN(s));
    if (p) {
	rb_str_resize(s, p - RSTRING_PTR(s));
    }
    gz-&gt;orig_name = s;
    return str;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="pos-instance_method">
  <h3 class='signature'>
  #<strong>number</strong>(of)  
  <span class='aliases'>Also known as: <span class='names'><span>tell</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/zlib/zlib.c#L3405'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


3405
3406
3407
3408
3409</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/zlib/zlib.c', line 3405</span></pre>
<pre class='code cpp'>

static VALUE
rb_gzfile_total_in(VALUE obj)
{
    return rb_uint2inum(get_gzfile(obj)-&gt;z.stream.total_in);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="print-instance_method">
  <h3 class='signature'>
  #<strong>as</strong>(IO)  
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/zlib/zlib.c#L4508'>GitHub</a> ]</span>

</section>
  <section class='method_details' id="printf-instance_method">
  <h3 class='signature'>
  #<strong>as</strong>(IO)  
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/zlib/zlib.c#L4507'>GitHub</a> ]</span>

</section>
  <section class='method_details' id="putc-instance_method">
  <h3 class='signature'>
  #<strong>putc</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>——— Prototypes ——–</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/zlib/zlib.c#L200'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


200</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/zlib/zlib.c', line 200</span></pre>
<pre class='code cpp'>

static VALUE rb_gzwriter_putc(VALUE, VALUE);
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="puts-instance_method">
  <h3 class='signature'>
  #<strong>as</strong>(IO)  
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/zlib/zlib.c#L4509'>GitHub</a> ]</span>

</section>
  <section class='method_details' id="tell-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>number</strong>(of)  </span>
    <span class='overload'>#<strong>tell</strong>(of)  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#pos-instance_method" title="Zlib::GzipWriter#pos (method)">#pos</a>.</p>


  </div>
</div>

</section>
  <section class='method_details' id="write-instance_method">
  <h3 class='signature'>
  #<strong>write</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>——— Prototypes ——–</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/zlib/zlib.c#L199'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


199</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/zlib/zlib.c', line 199</span></pre>
<pre class='code cpp'>

static VALUE rb_gzwriter_write(VALUE, VALUE);
</pre>
  </div>
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.5 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>