<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: GDBM &mdash; gdbm Ruby-2.4.0 d2016-08-04</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../css/common.css' />

<script type='text/javascript'>
  var pathId = "GDBM",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../index.html'>Home</a> &raquo; 
          <a href='../index.html'>Ruby-2.4.0</a> &raquo; 
          <a href='index.html'>gdbm</a> &raquo; 
          <a href='_index.html'>Index (G)</a> &raquo; 
          <span class='title'>GDBM</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: GDBM</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>
  <tr>
    <td class='box_1'>Inherits:</td>
    <td class='box_rel'>
      <span class='inheritName'>Object</span>
      <ul class='fullTree'>
        <li>Object</li>
        <li class='next'>GDBM</li>
      </ul>
      <a href='#' class='inheritanceTree'>show all</a>
    </td>
  </tr>
  <tr>
    <td class='box_1'>Includes:</td>
    <td>
      <div class='box_max'>
        Enumerable
      </div>
    </td>
  </tr>
  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_max'>
<a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L1230'>ext/gdbm/gdbm.c</a></div>  </td>
  </tr>
</table>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<h4 id="label-Summary">Summary</h4>

<p>Ruby extension for GNU dbm (gdbm) – a simple database engine for storing
key-value pairs on disk.</p>

<h4 id="label-Description">Description</h4>

<p>GNU dbm is a library for simple databases. A database is a file that stores
key-value pairs. Gdbm allows the user to store, retrieve, and delete data
by key. It furthermore allows a non-sorted traversal of all key-value
pairs. A gdbm database thus provides the same functionality as a hash. As
with objects of the Hash class, elements can be accessed with
<code>[]</code>. Furthermore, GDBM mixes in the Enumerable module, thus
providing convenient methods such as <code>#find</code>, <code>#collect</code>, <code>#map</code>, etc.</p>

<p>A process is allowed to open several different databases at the same time.
A process can open a database as a “reader” or a “writer”. Whereas a reader
has only read-access to the database, a writer has read- and write-access.
A database can be accessed either by any number of readers or by exactly
one writer at the same time.</p>

<h4 id="label-Examples">Examples</h4>
<ol><li>
<p>Opening/creating a database, and filling it with some entries:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gdbm</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_gdbm'>gdbm</span> <span class='op'>=</span> <span class='const'>GDBM</span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="#new-class_method" title="GDBM.new (method)">new</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fruitstore.db</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_gdbm'>gdbm</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ananas</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>    <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>3</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_gdbm'>gdbm</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>banana</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>    <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>8</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_gdbm'>gdbm</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cranberry</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>4909</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_gdbm'>gdbm</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
</code></pre>
</li><li>
<p>Reading out a database:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gdbm</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_gdbm'>gdbm</span> <span class='op'>=</span> <span class='const'>GDBM</span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="#new-class_method" title="GDBM.new (method)">new</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fruitstore.db</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_gdbm'>gdbm</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
  <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_value'>value</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
<span class='id identifier rubyid_gdbm'>gdbm</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
</code></pre>

<p>produces</p>

<pre class="code ruby"><code class="ruby">banana: 8
ananas: 3
cranberry: 4909</code></pre>
</li></ol>

<h4 id="label-Links">Links</h4>
<ul><li>
<p><a href="http://www.gnu.org/software/gdbm">www.gnu.org/software/gdbm</a>/</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
</div>
<h2 id='t2_cnst'>Constant Summary<small><a href="#" class="summary_toggle">collapse</a></small></h2>

  <dl class="constants summary full">
    <dt id='FAST-constant'>
      FAST
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>flag for <code>#new</code> and <code>#open</code>. this flag is obsolete for gdbm &gt;= 1.8</p>


  </div>
</div>
<div class="tags">
  
</div>    </dd>
    <dt id='NEWDB-constant'>
      NEWDB
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>open database as a writer; overwrite any existing databases</p>


  </div>
</div>
<div class="tags">
  
</div>    </dd>
    <dt id='NOLOCK-constant'>
      NOLOCK
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>flag for <code>#new</code> and <code>#open</code></p>


  </div>
</div>
<div class="tags">
  
</div>    </dd>
    <dt id='READER-constant'>
      READER
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>open database as a reader</p>


  </div>
</div>
<div class="tags">
  
</div>    </dd>
    <dt id='SYNC-constant'>
      SYNC
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>flag for <code>#new</code> and <code>#open</code>. only for gdbm &gt;= 1.8</p>


  </div>
</div>
<div class="tags">
  
</div>    </dd>
    <dt id='VERSION-constant'>
      VERSION
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>version of the gdbm library</p>


  </div>
</div>
<div class="tags">
  
</div>    </dd>
    <dt id='WRCREAT-constant'>
      WRCREAT
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>open database as a writer; if the database does not exist, create a new one</p>


  </div>
</div>
<div class="tags">
  
</div>    </dd>
    <dt id='WRITER-constant'>
      WRITER
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>open database as a writer</p>


  </div>
</div>
<div class="tags">
  
</div>    </dd>
  </dl>





<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#new-class_method" title="new (class method)">.<strong>new</strong>(filename, mode = 0666, flags = nil)  </a>
      </span>
      <span class='note title constructor'>constructor</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Creates a new GDBM instance by opening a gdbm file named <em>filename</em>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#open-class_method" title="open (class method)">.<strong>open</strong>(filename, mode = 0666, flags = nil)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>If called without a block, this is synonymous to <a href="#new-class_method" title="GDBM.new (method)">GDBM.new</a>.</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#%5B%5D-instance_method" title="#[] (instance method)">#<strong>[]</strong>(key)  &#x21d2; value </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Retrieves the <em>value</em> corresponding to <em>key</em>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#%5B%5D%3D-instance_method" title="#[]= (instance method)">#<strong>[]=</strong>(key, value)  &#x21d2; value </a>
        (also: #store)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Associates the value <em>value</em> with the specified <em>key</em>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#cachesize%3D-instance_method" title="#cachesize= (instance method)">#<strong>cachesize=</strong>(size)  &#x21d2; size </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Sets the size of the internal bucket cache to <em>size</em>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#clear-instance_method" title="#clear (instance method)">#<strong>clear</strong>  &#x21d2; GDBM </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Removes all the key-value pairs within <em>gdbm</em>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#close-instance_method" title="#close (instance method)">#<strong>close</strong>  &#x21d2; nil </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Closes the associated database file.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#closed%3F-instance_method" title="#closed? (instance method)">#<strong>closed?</strong>  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns true if the associated database file has been closed.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#delete-instance_method" title="#delete (instance method)">#<strong>delete</strong>(key)  &#x21d2; value<sup>?</sup> </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Removes the key-value-pair with the specified <em>key</em> from this
database and returns the corresponding <em>value</em>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#delete_if-instance_method" title="#delete_if (instance method)">#<strong>delete_if</strong> {|key, value| ... } &#x21d2; GDBM </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#reject%21-instance_method" title="GDBM#reject! (method)">#reject!</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#each_pair-instance_method" title="#each_pair (instance method)">#<strong>each_pair</strong> {|key, value| ... } &#x21d2; GDBM </a>
        (also: #each_pair)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Executes <em>block</em> for each key in the database, passing the
<em>key</em> and the corresponding <em>value</em> as a parameter.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#each_key-instance_method" title="#each_key (instance method)">#<strong>each_key</strong> {|key| ... } &#x21d2; GDBM </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Executes <em>block</em> for each key in the database, passing the
<em>key</em> as a parameter.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#each_pair-instance_method" title="#each_pair (instance method)">#<strong>each_pair</strong> {|key, value| ... } &#x21d2; GDBM </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#each-instance_method" title="GDBM#each (method)">#each</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#each_value-instance_method" title="#each_value (instance method)">#<strong>each_value</strong> {|value| ... } &#x21d2; GDBM </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Executes <em>block</em> for each key in the database, passing the
corresponding <em>value</em> as a parameter.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#empty%3F-instance_method" title="#empty? (instance method)">#<strong>empty?</strong>  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns true if the database is empty.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#fastmode%3D-instance_method" title="#fastmode= (instance method)">#<strong>fastmode=</strong>(boolean)  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Turns the database&#39;s fast mode on or off.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#fetch-instance_method" title="#fetch (instance method)">#<strong>fetch</strong>(key[, default])  &#x21d2; value </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Retrieves the <em>value</em> corresponding to <em>key</em>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#has_key%3F-instance_method" title="#has_key? (instance method)">#<strong>has_key?</strong>(k)  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#key%3F-instance_method" title="GDBM#key? (method)">#key?</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#has_value%3F-instance_method" title="#has_value? (instance method)">#<strong>has_value?</strong>(v)  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#value%3F-instance_method" title="GDBM#value? (method)">#value?</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#include%3F-instance_method" title="#include? (instance method)">#<strong>include?</strong>(k)  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#key%3F-instance_method" title="GDBM#key? (method)">#key?</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#invert-instance_method" title="#invert (instance method)">#<strong>invert</strong>  &#x21d2; Hash </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns a hash created by using <em>gdbm</em>&#39;s values as keys, and the
keys as values.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#key-instance_method" title="#key (instance method)">#<strong>key</strong>(value)  &#x21d2; key </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the <em>key</em> for a given <em>value</em>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#key%3F-instance_method" title="#key? (instance method)">#<strong>key?</strong>(k)  &#x21d2; Boolean </a>
        (also: #has_key?, #include?, #member?)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns true if the given key <em>k</em> exists within the database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#keys-instance_method" title="#keys (instance method)">#<strong>keys</strong>  &#x21d2; Array </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns an array of all keys of this database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#length-instance_method" title="#length (instance method)">#<strong>length</strong>  &#x21d2; Fixnum </a>
        (also: #size)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the number of key-value pairs in this database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#member%3F-instance_method" title="#member? (instance method)">#<strong>member?</strong>(k)  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#key%3F-instance_method" title="GDBM#key? (method)">#key?</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#reject-instance_method" title="#reject (instance method)">#<strong>reject</strong> {|key, value| ... } &#x21d2; Hash </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns a hash copy of <em>gdbm</em> where all key-value pairs from
<em>gdbm</em> for which <em>block</em> evaluates to true are removed.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#reject%21-instance_method" title="#reject! (instance method)">#<strong>reject!</strong> {|key, value| ... } &#x21d2; GDBM </a>
        (also: #delete_if)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Deletes every key-value pair from <em>gdbm</em> for which <em>block</em>
evaluates to true.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#reorganize-instance_method" title="#reorganize (instance method)">#<strong>reorganize</strong>  &#x21d2; GDBM </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Reorganizes the database file.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#replace-instance_method" title="#replace (instance method)">#<strong>replace</strong>(other)  &#x21d2; GDBM </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Replaces the content of <em>gdbm</em> with the key-value pairs of
<em>other</em>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#select-instance_method" title="#select (instance method)">#<strong>select</strong> {|key, value| ... } &#x21d2; Array </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns a new array of all key-value pairs of the database for which
<em>block</em> evaluates to true.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#shift-instance_method" title="#shift (instance method)">#<strong>shift</strong>  &#x21d2; (key,  value)<sup>?</sup> </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Removes a key-value-pair from this database and returns it as a two-item
array [ <em>key</em>, <em>value</em> ].</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#size-instance_method" title="#size (instance method)">#<strong>size</strong>  &#x21d2; Fixnum </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#length-instance_method" title="GDBM#length (method)">#length</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#store-instance_method" title="#store (instance method)">#<strong>store</strong>(key, value)  &#x21d2; value </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#%5B%5D%3D-instance_method" title="GDBM#[]= (method)">#[]=</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#sync-instance_method" title="#sync (instance method)">#<strong>sync</strong>  &#x21d2; GDBM </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Unless the <em>gdbm</em> object has been opened with the
<strong>SYNC</strong> flag, it is not guaranteed that database modification
operations are immediately applied to the database file.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#syncmode%3D-instance_method" title="#syncmode= (instance method)">#<strong>syncmode=</strong>(boolean)  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Turns the database&#39;s synchronization mode on or off.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#to_a-instance_method" title="#to_a (instance method)">#<strong>to_a</strong>  &#x21d2; Array </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns an array of all key-value pairs contained in the database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#to_hash-instance_method" title="#to_hash (instance method)">#<strong>to_hash</strong>  &#x21d2; Hash </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns a hash of all key-value pairs contained in the database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#update-instance_method" title="#update (instance method)">#<strong>update</strong>(other)  &#x21d2; GDBM </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Adds the key-value pairs of <em>other</em> to <em>gdbm</em>, overwriting
entries with duplicate keys with those from <em>other</em>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#value%3F-instance_method" title="#value? (instance method)">#<strong>value?</strong>(v)  &#x21d2; Boolean </a>
        (also: #has_value?)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns true if the given value <em>v</em> exists within the database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#values-instance_method" title="#values (instance method)">#<strong>values</strong>  &#x21d2; Array </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns an array of all values of this database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#values_at-instance_method" title="#values_at (instance method)">#<strong>values_at</strong>(key, ...)  &#x21d2; Array </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns an array of the values associated with each specified <em>key</em>.</p>
</div>
      </span>
    </li>
  </ul>



  <h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>
  <section class='method_details first' id="new-class_method">
  <h3 class='signature first'>
  .<strong>new</strong>(filename, mode = 0666, flags = nil)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates a new GDBM instance by opening a gdbm file named <em>filename</em>.
If the file does not exist, a new file with file mode <em>mode</em> will be
created. <em>flags</em> may be one of the following:</p>
<ul><li>
<p><strong>READER</strong>  - open as a reader</p>
</li><li>
<p><strong>WRITER</strong>  - open as a writer</p>
</li><li>
<p><strong>WRCREAT</strong> - open as a writer; if the database does not
exist, create a new one</p>
</li><li>
<p><strong>NEWDB</strong>   - open as a writer; overwrite any existing
databases</p>
</li></ul>

<p>The values <strong>WRITER</strong>, <strong>WRCREAT</strong> and
<strong>NEWDB</strong> may be combined with the following values by bitwise
or:</p>
<ul><li>
<p><strong>SYNC</strong>    - cause all database operations to be synchronized
to the disk</p>
</li><li>
<p><strong>NOLOCK</strong>  - do not lock the database file</p>
</li></ul>

<p>If no <em>flags</em> are specified, the GDBM object will try to open the
database file as a writer and will create it if it does not already exist
(cf. flag <code>WRCREAT</code>). If this fails (for instance, if another
process has already opened the database as a reader), it will try to open
the database file as a reader (cf. flag <code>READER</code>).</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L210'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 210</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_initialize(int argc, VALUE *argv, VALUE obj)
{
    VALUE file, vmode, vflags;
    GDBM_FILE dbm;
    struct dbmdata *dbmp;
    int mode, flags = 0;

    if (rb_scan_args(argc, argv, &quot;12&quot;, &amp;file, &amp;vmode, &amp;vflags) == 1) {
        mode = 0666;            /* default value */
    }
    else if (NIL_P(vmode)) {
        mode = -1;              /* return nil if DB does not exist */
    }
    else {
        mode = NUM2INT(vmode);
    }

    if (!NIL_P(vflags))
        flags = NUM2INT(vflags);

    SafeStringValue(file);

#ifdef GDBM_CLOEXEC
    /* GDBM_CLOEXEC is available since gdbm 1.10. */
    flags |= GDBM_CLOEXEC;
#endif

    if (flags &amp; RUBY_GDBM_RW_BIT) {
        flags &amp;= ~RUBY_GDBM_RW_BIT;
        dbm = gdbm_open(RSTRING_PTR(file), MY_BLOCK_SIZE,
                        flags, mode, MY_FATAL_FUNC);
    }
    else {
        dbm = 0;
        if (mode &gt;= 0)
            dbm = gdbm_open(RSTRING_PTR(file), MY_BLOCK_SIZE,
                            GDBM_WRCREAT|flags, mode, MY_FATAL_FUNC);
        if (!dbm)
            dbm = gdbm_open(RSTRING_PTR(file), MY_BLOCK_SIZE,
                            GDBM_WRITER|flags, 0, MY_FATAL_FUNC);
        if (!dbm)
            dbm = gdbm_open(RSTRING_PTR(file), MY_BLOCK_SIZE,
                            GDBM_READER|flags, 0, MY_FATAL_FUNC);
    }

    if (dbm) {
        rb_fd_fix_cloexec(gdbm_fdesc(dbm));
    }

    if (!dbm) {
        if (mode == -1) return Qnil;

        if (gdbm_errno == GDBM_FILE_OPEN_ERROR ||
            gdbm_errno == GDBM_CANT_BE_READER ||
            gdbm_errno == GDBM_CANT_BE_WRITER)
            rb_sys_fail_str(file);
        else
            rb_raise(rb_eGDBMError, &quot;%s&quot;, gdbm_strerror(gdbm_errno));
    }

    dbmp = ALLOC(struct dbmdata);
    free_dbm(DATA_PTR(obj));
    DATA_PTR(obj) = dbmp;
    dbmp-&gt;di_dbm = dbm;
    dbmp-&gt;di_size = -1;

    return obj;
}
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Class Method Details</h2>
  <section class='method_details first' id="open-class_method">
  <h3 class='signature first'>
  <span class='overload'>.<strong>open</strong>(filename, mode = 0666, flags = nil)  </span>
    <span class='overload'>.<strong>open</strong>(filename, mode = 0666, flags = nil) {|gdbm| ... } </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>If called without a block, this is synonymous to <a href="#new-class_method" title="GDBM.new (method)">new</a>. If a block is
given, the new GDBM instance will be passed to the block as a parameter,
and the corresponding database file will be closed after the execution of
the block code has been finished.</p>

<p>Example for an open call with a block:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gdbm</span><span class='tstring_end'>&#39;</span></span>
<span class='const'><a href="" title="GDBM (class)">GDBM</a></span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fruitstore.db</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_gdbm'>gdbm</span><span class='op'>|</span>
  <span class='id identifier rubyid_gdbm'>gdbm</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
    <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_value'>value</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L299'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


299
300
301
302
303
304
305
306
307
308
309
310
311
312
313</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 299</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_s_open(int argc, VALUE *argv, VALUE klass)
{
    VALUE obj = fgdbm_s_alloc(klass);

    if (NIL_P(fgdbm_initialize(argc, argv, obj))) {
        return Qnil;
    }

    if (rb_block_given_p()) {
        return rb_ensure(rb_yield, obj, fgdbm_close, obj);
    }

    return obj;
}
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="[]-instance_method">
  <h3 class='signature first'>
  #<strong>[]</strong>(key)  &#x21d2; <tt>value</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Retrieves the <em>value</em> corresponding to <em>key</em>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L413'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


413
414
415
416
417</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 413</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_aref(VALUE obj, VALUE keystr)
{
    return rb_gdbm_fetch3(obj, keystr);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="[]=-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>[]=</strong>(key, value)  &#x21d2; <tt>value</tt> </span>
    <span class='overload'>#<strong>store</strong>(key, value)  &#x21d2; <tt>value</tt> </span>
  <span class='aliases'>Also known as: <span class='names'><span>store</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Associates the value <em>value</em> with the specified <em>key</em>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L720'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


720
721
722
723
724
725
726
727
728
729
730
731
732
733
734
735
736
737
738
739
740
741
742
743
744
745</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 720</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_store(VALUE obj, VALUE keystr, VALUE valstr)
{
    datum key, val;
    struct dbmdata *dbmp;
    GDBM_FILE dbm;

    rb_gdbm_modify(obj);
    StringValue(keystr);
    StringValue(valstr);

    key.dptr = RSTRING_PTR(keystr);
    key.dsize = RSTRING_LENINT(keystr);

    val.dptr = RSTRING_PTR(valstr);
    val.dsize = RSTRING_LENINT(valstr);

    GetDBM2(obj, dbmp, dbm);
    dbmp-&gt;di_size = -1;
    if (gdbm_store(dbm, key, val, GDBM_REPLACE)) {
        if (errno == EPERM) rb_sys_fail(0);
        rb_raise(rb_eGDBMError, &quot;%s&quot;, gdbm_strerror(gdbm_errno));
    }

    return valstr;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="cachesize=-instance_method">
  <h3 class='signature'>
  #<strong>cachesize=</strong>(size)  &#x21d2; <tt><a href="#size-instance_method" title="GDBM#size (method)">size</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Sets the size of the internal bucket cache to <em>size</em>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L1111'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1111
1112
1113
1114
1115
1116
1117
1118
1119
1120
1121
1122
1123
1124</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 1111</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_set_cachesize(VALUE obj, VALUE val)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    int optval;

    GetDBM2(obj, dbmp, dbm);
    optval = FIX2INT(val);
    if (gdbm_setopt(dbm, GDBM_CACHESIZE, &amp;optval, sizeof(optval)) == -1) {
        rb_raise(rb_eGDBMError, &quot;%s&quot;, gdbm_strerror(gdbm_errno));
    }
    return val;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="clear-instance_method">
  <h3 class='signature'>
  #<strong>clear</strong>  &#x21d2; <tt><a href="" title="GDBM (class)">GDBM</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Removes all the key-value pairs within <em>gdbm</em>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L651'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


651
652
653
654
655
656
657
658
659
660
661
662
663
664
665
666
667
668
669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684
685
686</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 651</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_clear(VALUE obj)
{
    datum key, nextkey;
    struct dbmdata *dbmp;
    GDBM_FILE dbm;

    rb_gdbm_modify(obj);
    GetDBM2(obj, dbmp, dbm);
    dbmp-&gt;di_size = -1;

#if 0
    while (key = gdbm_firstkey(dbm), key.dptr) {
        if (gdbm_delete(dbm, key)) {
            free(key.dptr);
            rb_raise(rb_eGDBMError, &quot;%s&quot;, gdbm_strerror(gdbm_errno));
        }
        free(key.dptr);
    }
#else
    while (key = gdbm_firstkey(dbm), key.dptr) {
        for (; key.dptr; key = nextkey) {
            nextkey = gdbm_nextkey(dbm, key);
            if (gdbm_delete(dbm, key)) {
                free(key.dptr);
                if (nextkey.dptr) free(nextkey.dptr);
                rb_raise(rb_eGDBMError, &quot;%s&quot;, gdbm_strerror(gdbm_errno));
            }
            free(key.dptr);
        }
    }
#endif
    dbmp-&gt;di_size = 0;

    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="close-instance_method">
  <h3 class='signature'>
  #<strong>close</strong>  &#x21d2; <tt>nil</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Closes the associated database file.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L149'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


149
150
151
152
153
154
155
156
157
158
159</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 149</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_close(VALUE obj)
{
    struct dbmdata *dbmp;

    GetDBM(obj, dbmp);
    gdbm_close(dbmp-&gt;di_dbm);
    dbmp-&gt;di_dbm = 0;

    return Qnil;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="closed?-instance_method">
  <h3 class='signature'>
  #<strong>closed?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns true if the associated database file has been closed.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L167'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


167
168
169
170
171
172
173
174
175
176
177
178
179</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 167</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_closed(VALUE obj)
{
    struct dbmdata *dbmp;

    TypedData_Get_Struct(obj, struct dbmdata, &amp;dbm_type, dbmp);
    if (dbmp == 0)
        return Qtrue;
    if (dbmp-&gt;di_dbm == 0)
        return Qtrue;

    return Qfalse;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="delete-instance_method">
  <h3 class='signature'>
  #<strong>delete</strong>(key)  &#x21d2; <tt>value</tt><sup>?</sup> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Removes the key-value-pair with the specified <em>key</em> from this
database and returns the corresponding <em>value</em>. Returns nil if the
database is empty.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L569'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


569
570
571
572
573
574
575
576
577</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 569</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_delete(VALUE obj, VALUE keystr)
{
    VALUE valstr;

    valstr = fgdbm_fetch(obj, keystr, Qnil);
    rb_gdbm_delete(obj, keystr);
    return valstr;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="delete_if-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>delete_if</strong> {|key, value| ... } &#x21d2; <tt><a href="" title="GDBM (class)">GDBM</a></tt> </span>
    <span class='overload'>#<strong>reject!</strong> {|key, value| ... } &#x21d2; <tt><a href="" title="GDBM (class)">GDBM</a></tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#reject%21-instance_method" title="GDBM#reject! (method)">#reject!</a>.</p>


  </div>
</div>

</section>
  <section class='method_details' id="each-instance_method">
  <h3 class='signature'>
  #<strong>each_pair</strong> {|key, value| ... } &#x21d2; <tt><a href="" title="GDBM (class)">GDBM</a></tt> 
  <span class='aliases'>Also known as: <span class='names'><span>each_pair</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Executes <em>block</em> for each key in the database, passing the
<em>key</em> and the corresponding <em>value</em> as a parameter.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L906'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


906
907
908
909
910
911
912
913
914
915
916
917
918
919
920
921
922
923
924</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 906</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_each_pair(VALUE obj)
{
    GDBM_FILE dbm;
    struct dbmdata *dbmp;
    VALUE keystr;

    RETURN_ENUMERATOR(obj, 0, 0);

    GetDBM2(obj, dbmp, dbm);
    for (keystr = rb_gdbm_firstkey(dbm); RTEST(keystr);
         keystr = rb_gdbm_nextkey(dbm, keystr)) {

        rb_yield(rb_assoc_new(keystr, rb_gdbm_fetch2(dbm, keystr)));
        GetDBM2(obj, dbmp, dbm);
    }

    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="each_key-instance_method">
  <h3 class='signature'>
  #<strong>each_key</strong> {|key| ... } &#x21d2; <tt><a href="" title="GDBM (class)">GDBM</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Executes <em>block</em> for each key in the database, passing the
<em>key</em> as a parameter.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L880'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


880
881
882
883
884
885
886
887
888
889
890
891
892
893
894
895
896
897</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 880</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_each_key(VALUE obj)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    VALUE keystr;

    RETURN_ENUMERATOR(obj, 0, 0);

    GetDBM2(obj, dbmp, dbm);
    for (keystr = rb_gdbm_firstkey(dbm); RTEST(keystr);
         keystr = rb_gdbm_nextkey(dbm, keystr)) {

        rb_yield(keystr);
        GetDBM2(obj, dbmp, dbm);
    }
    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="each_pair-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>each_pair</strong> {|key, value| ... } &#x21d2; <tt><a href="" title="GDBM (class)">GDBM</a></tt> </span>
    <span class='overload'>#<strong>each_pair</strong> {|key, value| ... } &#x21d2; <tt><a href="" title="GDBM (class)">GDBM</a></tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#each-instance_method" title="GDBM#each (method)">#each</a>.</p>


  </div>
</div>

</section>
  <section class='method_details' id="each_value-instance_method">
  <h3 class='signature'>
  #<strong>each_value</strong> {|value| ... } &#x21d2; <tt><a href="" title="GDBM (class)">GDBM</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Executes <em>block</em> for each key in the database, passing the
corresponding <em>value</em> as a parameter.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L854'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


854
855
856
857
858
859
860
861
862
863
864
865
866
867
868
869
870
871</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 854</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_each_value(VALUE obj)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    VALUE keystr;

    RETURN_ENUMERATOR(obj, 0, 0);

    GetDBM2(obj, dbmp, dbm);
    for (keystr = rb_gdbm_firstkey(dbm); RTEST(keystr);
         keystr = rb_gdbm_nextkey(dbm, keystr)) {

        rb_yield(rb_gdbm_fetch2(dbm, keystr));
        GetDBM2(obj, dbmp, dbm);
    }
    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="empty?-instance_method">
  <h3 class='signature'>
  #<strong>empty?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns true if the database is empty.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L824'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


824
825
826
827
828
829
830
831
832
833
834
835
836
837
838
839
840
841
842
843
844
845</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 824</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_empty_p(VALUE obj)
{
    datum key;
    struct dbmdata *dbmp;
    GDBM_FILE dbm;

    GetDBM(obj, dbmp);
    if (dbmp-&gt;di_size &lt; 0) {
        dbm = dbmp-&gt;di_dbm;

        key = gdbm_firstkey(dbm);
        if (key.dptr) {
            free(key.dptr);
            return Qfalse;
        }
        return Qtrue;
    }

    if (dbmp-&gt;di_size == 0) return Qtrue;
    return Qfalse;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="fastmode=-instance_method">
  <h3 class='signature'>
  #<strong>fastmode=</strong>(boolean)  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Turns the database&#39;s fast mode on or off. If fast mode is turned on,
gdbm does not wait for writes to be flushed to the disk before continuing.</p>

<p>This option is obsolete for gdbm &gt;= 1.8 since fast mode is turned on by
default. See also: <a href="#syncmode%3D-instance_method" title="GDBM#syncmode= (method)">#syncmode=</a></p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L1136'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1136
1137
1138
1139
1140
1141
1142
1143
1144
1145
1146
1147
1148
1149
1150
1151
1152</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 1136</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_set_fastmode(VALUE obj, VALUE val)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    int optval;

    GetDBM2(obj, dbmp, dbm);
    optval = 0;
    if (RTEST(val))
        optval = 1;

    if (gdbm_setopt(dbm, GDBM_FASTMODE, &amp;optval, sizeof(optval)) == -1) {
        rb_raise(rb_eGDBMError, &quot;%s&quot;, gdbm_strerror(gdbm_errno));
    }
    return val;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="fetch-instance_method">
  <h3 class='signature'>
  #<strong>fetch</strong>(key[, default])  &#x21d2; <tt>value</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Retrieves the <em>value</em> corresponding to <em>key</em>. If there is no
value associated with <em>key</em>, <em>default</em> will be returned
instead.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L426'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


426
427
428
429
430
431
432
433
434
435
436
437</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 426</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_fetch_m(int argc, VALUE *argv, VALUE obj)
{
    VALUE keystr, valstr, ifnone;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;keystr, &amp;ifnone);
    valstr = fgdbm_fetch(obj, keystr, ifnone);
    if (argc == 1 &amp;&amp; !rb_block_given_p() &amp;&amp; NIL_P(valstr))
        rb_raise(rb_eIndexError, &quot;key not found&quot;);

    return valstr;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="has_key?-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>include?</strong>(k)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>has_key?</strong>(k)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>member?</strong>(k)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>key?</strong>(k)  &#x21d2; <tt>Boolean</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#key%3F-instance_method" title="GDBM#key? (method)">#key?</a>.</p>


  </div>
</div>

</section>
  <section class='method_details' id="has_value?-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>has_value?</strong>(v)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>value?</strong>(v)  &#x21d2; <tt>Boolean</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#value%3F-instance_method" title="GDBM#value? (method)">#value?</a>.</p>


  </div>
</div>

</section>
  <section class='method_details' id="include?-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>include?</strong>(k)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>has_key?</strong>(k)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>member?</strong>(k)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>key?</strong>(k)  &#x21d2; <tt>Boolean</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#key%3F-instance_method" title="GDBM#key? (method)">#key?</a>.</p>


  </div>
</div>

</section>
  <section class='method_details' id="invert-instance_method">
  <h3 class='signature'>
  #<strong>invert</strong>  &#x21d2; <tt>Hash</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns a hash created by using <em>gdbm</em>&#39;s values as keys, and the
keys as values.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L695'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


695
696
697
698
699
700
701
702
703
704
705
706
707
708
709
710
711</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 695</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_invert(VALUE obj)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    VALUE keystr, valstr;
    VALUE hash = rb_hash_new();

    GetDBM2(obj, dbmp, dbm);
    for (keystr = rb_gdbm_firstkey(dbm); RTEST(keystr);
         keystr = rb_gdbm_nextkey(dbm, keystr)) {
        valstr = rb_gdbm_fetch2(dbm, keystr);

        rb_hash_aset(hash, valstr, keystr);
    }
    return hash;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="key-instance_method">
  <h3 class='signature'>
  #<strong>key</strong>(value)  &#x21d2; <tt><a href="#key-instance_method" title="GDBM#key (method)">key</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the <em>key</em> for a given <em>value</em>. If several keys may
map to the same value, the key that is found first will be returned.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L446'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 446</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_key(VALUE obj, VALUE valstr)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    VALUE keystr, valstr2;

    StringValue(valstr);
    GetDBM2(obj, dbmp, dbm);
    for (keystr = rb_gdbm_firstkey(dbm); RTEST(keystr);
         keystr = rb_gdbm_nextkey(dbm, keystr)) {

        valstr2 = rb_gdbm_fetch2(dbm, keystr);
        if (!NIL_P(valstr2) &amp;&amp;
            (int)RSTRING_LEN(valstr) == (int)RSTRING_LEN(valstr2) &amp;&amp;
            memcmp(RSTRING_PTR(valstr), RSTRING_PTR(valstr2),
                   (int)RSTRING_LEN(valstr)) == 0) {
            return keystr;
        }
    }
    return Qnil;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="key?-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>include?</strong>(k)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>has_key?</strong>(k)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>member?</strong>(k)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>key?</strong>(k)  &#x21d2; <tt>Boolean</tt> </span>
  <span class='aliases'>Also known as: <span class='names'><span>has_key?</span>, <span>include?</span>, <span>member?</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns true if the given key <em>k</em> exists within the database.
Returns false otherwise.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L986'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


986
987
988
989
990
991
992
993
994
995
996
997
998
999
1000
1001
1002
1003
1004</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 986</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_has_key(VALUE obj, VALUE keystr)
{
    datum key;
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    long len;

    StringValue(keystr);
    len = RSTRING_LENINT(keystr);
    if (TOO_LONG(len)) return Qfalse;
    key.dptr = RSTRING_PTR(keystr);
    key.dsize = (int)len;

    GetDBM2(obj, dbmp, dbm);
    if (gdbm_exists(dbm, key))
        return Qtrue;
    return Qfalse;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="keys-instance_method">
  <h3 class='signature'>
  #<strong>keys</strong>  &#x21d2; <tt>Array</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns an array of all keys of this database.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L932'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


932
933
934
935
936
937
938
939
940
941
942
943
944
945
946
947
948</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 932</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_keys(VALUE obj)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    VALUE keystr, ary;

    GetDBM2(obj, dbmp, dbm);
    ary = rb_ary_new();
    for (keystr = rb_gdbm_firstkey(dbm); RTEST(keystr);
         keystr = rb_gdbm_nextkey(dbm, keystr)) {

        rb_ary_push(ary, keystr);
    }

    return ary;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="length-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>length</strong>  &#x21d2; <tt>Fixnum</tt> </span>
    <span class='overload'>#<strong>size</strong>  &#x21d2; <tt>Fixnum</tt> </span>
  <span class='aliases'>Also known as: <span class='names'><span>size</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the number of key-value pairs in this database.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L797'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


797
798
799
800
801
802
803
804
805
806
807
808
809
810
811
812
813
814
815
816</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 797</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_length(VALUE obj)
{
    datum key, nextkey;
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    int i = 0;

    GetDBM2(obj, dbmp, dbm);
    if (dbmp-&gt;di_size &gt; 0) return INT2FIX(dbmp-&gt;di_size);

    for (key = gdbm_firstkey(dbm); key.dptr; key = nextkey) {
        nextkey = gdbm_nextkey(dbm, key);
        free(key.dptr);
        i++;
    }
    dbmp-&gt;di_size = i;

    return INT2FIX(i);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="member?-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>include?</strong>(k)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>has_key?</strong>(k)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>member?</strong>(k)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>key?</strong>(k)  &#x21d2; <tt>Boolean</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#key%3F-instance_method" title="GDBM#key? (method)">#key?</a>.</p>


  </div>
</div>

</section>
  <section class='method_details' id="reject-instance_method">
  <h3 class='signature'>
  #<strong>reject</strong> {|key, value| ... } &#x21d2; <tt>Hash</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns a hash copy of <em>gdbm</em> where all key-value pairs from
<em>gdbm</em> for which <em>block</em> evaluates to true are removed. See
also: <a href="#delete_if-instance_method" title="GDBM#delete_if (method)">#delete_if</a></p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L1221'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1221
1222
1223
1224
1225</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 1221</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_reject(VALUE obj)
{
    return rb_hash_delete_if(fgdbm_to_hash(obj));
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="reject!-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>delete_if</strong> {|key, value| ... } &#x21d2; <tt><a href="" title="GDBM (class)">GDBM</a></tt> </span>
    <span class='overload'>#<strong>reject!</strong> {|key, value| ... } &#x21d2; <tt><a href="" title="GDBM (class)">GDBM</a></tt> </span>
  <span class='aliases'>Also known as: <span class='names'><span>delete_if</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Deletes every key-value pair from <em>gdbm</em> for which <em>block</em>
evaluates to true.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L610'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 610</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_delete_if(VALUE obj)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    VALUE keystr, valstr;
    VALUE ret, ary = rb_ary_tmp_new(0);
    long i;
    int status = 0, n;

    rb_gdbm_modify(obj);
    GetDBM2(obj, dbmp, dbm);
    n = dbmp-&gt;di_size;
    dbmp-&gt;di_size = -1;

    for (keystr = rb_gdbm_firstkey(dbm); RTEST(keystr);
         keystr = rb_gdbm_nextkey(dbm, keystr)) {

	OBJ_FREEZE(keystr);
        valstr = rb_gdbm_fetch2(dbm, keystr);
        ret = rb_protect(rb_yield, rb_assoc_new(rb_str_dup(keystr), valstr), &amp;status);
        if (status != 0) break;
        if (RTEST(ret)) rb_ary_push(ary, keystr);
        GetDBM2(obj, dbmp, dbm);
    }

    for (i = 0; i &lt; RARRAY_LEN(ary); i++)
        rb_gdbm_delete(obj, RARRAY_AREF(ary, i));
    if (status) rb_jump_tag(status);
    if (n &gt; 0) dbmp-&gt;di_size = n - (int)RARRAY_LEN(ary);
    rb_ary_clear(ary);

    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="reorganize-instance_method">
  <h3 class='signature'>
  #<strong>reorganize</strong>  &#x21d2; <tt><a href="" title="GDBM (class)">GDBM</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Reorganizes the database file. This operation removes reserved space of
elements that have already been deleted. It is only useful after a lot of
deletions in the database.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L1070'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1070
1071
1072
1073
1074
1075
1076
1077
1078
1079
1080
1081</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 1070</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_reorganize(VALUE obj)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;

    rb_gdbm_modify(obj);
    GetDBM2(obj, dbmp, dbm);
    gdbm_reorganize(dbm);
    rb_fd_fix_cloexec(gdbm_fdesc(dbm));
    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="replace-instance_method">
  <h3 class='signature'>
  #<strong>replace</strong>(other)  &#x21d2; <tt><a href="" title="GDBM (class)">GDBM</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Replaces the content of <em>gdbm</em> with the key-value pairs of
<em>other</em>. <em>other</em> must have an each_pair method.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L782'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


782
783
784
785
786
787
788</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 782</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_replace(VALUE obj, VALUE other)
{
    fgdbm_clear(obj);
    rb_block_call(other, rb_intern(&quot;each_pair&quot;), 0, 0, update_i, obj);
    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="select-instance_method">
  <h3 class='signature'>
  #<strong>select</strong> {|key, value| ... } &#x21d2; <tt>Array</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns a new array of all key-value pairs of the database for which
<em>block</em> evaluates to true.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L484'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 484</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_select(VALUE obj)
{
    VALUE new = rb_ary_new();
    GDBM_FILE dbm;
    struct dbmdata *dbmp;
    VALUE keystr;

    GetDBM2(obj, dbmp, dbm);
    for (keystr = rb_gdbm_firstkey(dbm); RTEST(keystr);
         keystr = rb_gdbm_nextkey(dbm, keystr)) {
        VALUE assoc = rb_assoc_new(keystr, rb_gdbm_fetch2(dbm, keystr));
        VALUE v = rb_yield(assoc);

        if (RTEST(v)) {
            rb_ary_push(new, assoc);
        }
        GetDBM2(obj, dbmp, dbm);
    }

    return new;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="shift-instance_method">
  <h3 class='signature'>
  #<strong>shift</strong>  &#x21d2; <tt>(<a href="#key-instance_method" title="GDBM#key (method)">key</a>,  value)</tt><sup>?</sup> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Removes a key-value-pair from this database and returns it as a two-item
array [ <em>key</em>, <em>value</em> ]. Returns nil if the database is
empty.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L586'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 586</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_shift(VALUE obj)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    VALUE keystr, valstr;

    rb_gdbm_modify(obj);
    GetDBM2(obj, dbmp, dbm);
    keystr = rb_gdbm_firstkey(dbm);
    if (NIL_P(keystr)) return Qnil;
    valstr = rb_gdbm_fetch2(dbm, keystr);
    rb_gdbm_delete(obj, keystr);

    return rb_assoc_new(keystr, valstr);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="size-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>length</strong>  &#x21d2; <tt>Fixnum</tt> </span>
    <span class='overload'>#<strong>size</strong>  &#x21d2; <tt>Fixnum</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#length-instance_method" title="GDBM#length (method)">#length</a>.</p>


  </div>
</div>

</section>
  <section class='method_details' id="store-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>[]=</strong>(key, value)  &#x21d2; <tt>value</tt> </span>
    <span class='overload'>#<strong>store</strong>(key, value)  &#x21d2; <tt>value</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#%5B%5D%3D-instance_method" title="GDBM#[]= (method)">#[]=</a>.</p>


  </div>
</div>

</section>
  <section class='method_details' id="sync-instance_method">
  <h3 class='signature'>
  #<strong>sync</strong>  &#x21d2; <tt><a href="" title="GDBM (class)">GDBM</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Unless the <em>gdbm</em> object has been opened with the
<strong>SYNC</strong> flag, it is not guaranteed that database modification
operations are immediately applied to the database file. This method
ensures that all recent modifications to the database are written to the
file. Blocks until all writing operations to the disk have been finished.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L1093'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1093
1094
1095
1096
1097
1098
1099
1100
1101
1102
1103</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 1093</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_sync(VALUE obj)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;

    rb_gdbm_modify(obj);
    GetDBM2(obj, dbmp, dbm);
    gdbm_sync(dbm);
    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="syncmode=-instance_method">
  <h3 class='signature'>
  #<strong>syncmode=</strong>(boolean)  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Turns the database&#39;s synchronization mode on or off. If the
synchronization mode is turned on, the database&#39;s in-memory state will
be synchronized to disk after every database modification operation. If the
synchronization mode is turned off, GDBM does not wait for writes to be
flushed to the disk before continuing.</p>

<p>This option is only available for gdbm &gt;= 1.8 where syncmode is turned
off by default. See also: <a href="#fastmode%3D-instance_method" title="GDBM#fastmode= (method)">#fastmode=</a></p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L1167'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1167
1168
1169
1170
1171
1172
1173
1174
1175
1176
1177
1178
1179
1180
1181
1182
1183
1184
1185
1186
1187
1188</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 1167</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_set_syncmode(VALUE obj, VALUE val)
{
#if !defined(GDBM_SYNCMODE)
    fgdbm_set_fastmode(obj, RTEST(val) ? Qfalse : Qtrue);
    return val;
#else
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    int optval;

    GetDBM2(obj, dbmp, dbm);
    optval = 0;
    if (RTEST(val))
        optval = 1;

    if (gdbm_setopt(dbm, GDBM_FASTMODE, &amp;optval, sizeof(optval)) == -1) {
        rb_raise(rb_eGDBMError, &quot;%s&quot;, gdbm_strerror(gdbm_errno));
    }
    return val;
#endif
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="to_a-instance_method">
  <h3 class='signature'>
  #<strong>to_a</strong>  &#x21d2; <tt>Array</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns an array of all key-value pairs contained in the database.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L1044'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1044
1045
1046
1047
1048
1049
1050
1051
1052
1053
1054
1055
1056
1057
1058
1059
1060</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 1044</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_to_a(VALUE obj)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    VALUE keystr, ary;

    GetDBM2(obj, dbmp, dbm);
    ary = rb_ary_new();
    for (keystr = rb_gdbm_firstkey(dbm); RTEST(keystr);
         keystr = rb_gdbm_nextkey(dbm, keystr)) {

        rb_ary_push(ary, rb_assoc_new(keystr, rb_gdbm_fetch2(dbm, keystr)));
    }

    return ary;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="to_hash-instance_method">
  <h3 class='signature'>
  #<strong>to_hash</strong>  &#x21d2; <tt>Hash</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns a hash of all key-value pairs contained in the database.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L1196'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1196
1197
1198
1199
1200
1201
1202
1203
1204
1205
1206
1207
1208
1209
1210
1211
1212</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 1196</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_to_hash(VALUE obj)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    VALUE keystr, hash;

    GetDBM2(obj, dbmp, dbm);
    hash = rb_hash_new();
    for (keystr = rb_gdbm_firstkey(dbm); RTEST(keystr);
         keystr = rb_gdbm_nextkey(dbm, keystr)) {

        rb_hash_aset(hash, keystr, rb_gdbm_fetch2(dbm, keystr));
    }

    return hash;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="update-instance_method">
  <h3 class='signature'>
  #<strong>update</strong>(other)  &#x21d2; <tt><a href="" title="GDBM (class)">GDBM</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Adds the key-value pairs of <em>other</em> to <em>gdbm</em>, overwriting
entries with duplicate keys with those from <em>other</em>. <em>other</em>
must have an each_pair method.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L768'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


768
769
770
771
772
773</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 768</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_update(VALUE obj, VALUE other)
{
    rb_block_call(other, rb_intern(&quot;each_pair&quot;), 0, 0, update_i, obj);
    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="value?-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>has_value?</strong>(v)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>value?</strong>(v)  &#x21d2; <tt>Boolean</tt> </span>
  <span class='aliases'>Also known as: <span class='names'><span>has_value?</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns true if the given value <em>v</em> exists within the database.
Returns false otherwise.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L1014'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1014
1015
1016
1017
1018
1019
1020
1021
1022
1023
1024
1025
1026
1027
1028
1029
1030
1031
1032
1033
1034
1035
1036</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 1014</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_has_value(VALUE obj, VALUE valstr)
{
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    VALUE keystr, valstr2;

    StringValue(valstr);
    GetDBM2(obj, dbmp, dbm);
    for (keystr = rb_gdbm_firstkey(dbm); RTEST(keystr);
         keystr = rb_gdbm_nextkey(dbm, keystr)) {

        valstr2 = rb_gdbm_fetch2(dbm, keystr);

        if (!NIL_P(valstr2) &amp;&amp;
            (int)RSTRING_LEN(valstr) == (int)RSTRING_LEN(valstr2) &amp;&amp;
            memcmp(RSTRING_PTR(valstr), RSTRING_PTR(valstr2),
                   (int)RSTRING_LEN(valstr)) == 0) {
            return Qtrue;
        }
    }
    return Qfalse;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="values-instance_method">
  <h3 class='signature'>
  #<strong>values</strong>  &#x21d2; <tt>Array</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns an array of all values of this database.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L956'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


956
957
958
959
960
961
962
963
964
965
966
967
968
969
970
971
972
973
974</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 956</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_values(VALUE obj)
{
    datum key, nextkey;
    struct dbmdata *dbmp;
    GDBM_FILE dbm;
    VALUE valstr, ary;

    GetDBM2(obj, dbmp, dbm);
    ary = rb_ary_new();
    for (key = gdbm_firstkey(dbm); key.dptr; key = nextkey) {
        nextkey = gdbm_nextkey(dbm, key);
        valstr = rb_gdbm_fetch(dbm, key);
        free(key.dptr);
        rb_ary_push(ary, valstr);
    }

    return ary;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="values_at-instance_method">
  <h3 class='signature'>
  #<strong>values_at</strong>(key, ...)  &#x21d2; <tt>Array</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns an array of the values associated with each specified <em>key</em>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/gdbm/gdbm.c#L513'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


513
514
515
516
517
518
519
520
521
522
523
524</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/gdbm/gdbm.c', line 513</span></pre>
<pre class='code cpp'>

static VALUE
fgdbm_values_at(int argc, VALUE *argv, VALUE obj)
{
    VALUE new = rb_ary_new2(argc);
    int i;

    for (i=0; i&lt;argc; i++) {
        rb_ary_push(new, rb_gdbm_fetch3(obj, argv[i]));
    }

    return new;
}
</pre>
  </div>
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.5 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>