<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: Gem::Installer &mdash; rubygems Ruby-2.4.0 d2016-08-08</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "Gem::Installer",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../../index.html'>Home</a> &raquo; 
          <a href='../../index.html'>Ruby-2.4.0</a> &raquo; 
          <a href='../index.html'>rubygems</a> &raquo; 
          <a href='../_index.html'>Index (I)</a> &raquo; 
          <a href="../Gem.html" title="Gem (module)">Gem</a> &raquo; 
          <span class='title'>Installer</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: Gem::Installer</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>
  <tr>
    <td class='box_1'>Inherits:</td>
    <td class='box_rel'>
      <span class='inheritName'>Object</span>
      <ul class='fullTree'>
        <li>Object</li>
        <li class='next'>Gem::Installer</li>
      </ul>
      <a href='#' class='inheritanceTree'>show all</a>
    </td>
  </tr>
  <tr>
    <td class='box_1'>Child Classes:</td>
    <td>
      <div class='box_max'>
        <a href="Installer/FakePackage.html" title="Gem::Installer::FakePackage (class)">FakePackage</a>
      </div>
    </td>
  </tr>
  <tr>
    <td class='box_1'>Includes:</td>
    <td>
      <div class='box_max'>
        <a href="UserInteraction.html" title="Gem::UserInteraction (module)">UserInteraction</a>
      </div>
    </td>
  </tr>
  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_min'>
<a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L28'>lib/rubygems/installer.rb</a><span class='defines'>,<br /><a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer_test_case.rb#L5'>lib/rubygems/installer_test_case.rb</a></span>
</div>  </td>
  </tr>
</table>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>The installer installs the files contained in the <a href="#gem-instance_method" title="Gem::Installer#gem (method)">#gem</a> into the
home.</p>

<p><a href="" title="Gem::Installer (class)">Installer</a> does the work of putting files in all the right places on
the filesystem including unpacking the gem into its gem dir, installing the
gemspec in the specifications dir, storing the cached gem in the cache dir,
and installing either wrappers or symlinks for executables.</p>

<p>The installer invokes pre and post install hooks.  Hooks can be added
either through a rubygems_plugin.rb file in an installed gem or via a
rubygems/defaults/#<code>RUBY_ENGINE</code>.rb or
rubygems/defaults/operating_system.rb file.  See <a href="../Gem.html#pre_install-class_method" title="Gem.pre_install (method)">pre_install</a> and
<a href="../Gem.html#post_install-class_method" title="Gem.post_install (method)">post_install</a> for details.</p>


  </div>
</div>
<div class="tags">
  
</div>
<h2 id='t2_cnst'>Constant Summary<small><a href="#" class="summary_toggle">collapse</a></small></h2>

  <dl class="constants summary full">
    <dt id='ENV_PATHS-constant'>
      ENV_PATHS =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>Paths where env(1) might live.  Some systems are broken and have it in /bin</p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code ruby'><span class='qwords'><span class='qwords_beg'>%w[</span><span class='tstring_content'>/usr/bin/env</span><span class='words_sep'> </span><span class='tstring_content'>/bin/env</span><span class='words_sep'>]</span></span></pre>
    </dd>
    <dt id='ExtensionBuildError-constant'>
      ExtensionBuildError =
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>Deprecated in favor of <a href="Ext/BuildError.html" title="Gem::Ext::BuildError (class)">Ext::BuildError</a></p>


  </div>
</div>
<div class="tags">
  
</div>      <pre class='code ruby'><span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Ext.html" title="Gem::Ext (module)">Ext</a></span><span class='op'>::</span><span class='const'><a href="Ext/BuildError.html" title="Gem::Ext::BuildError (class)">BuildError</a></span></pre>
    </dd>
  </dl>



<h2>Class Attribute Summary <small><a href='#' class='summary_toggle'>collapse</a></small></h2>

  <ul class="summary">
    <li>
      <span class="summary_signature">
        <a href="#exec_format-class_method" title=".exec_format (class method)">.<strong>exec_format</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Defaults to use Ruby&#39;s program prefix and suffix.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#exec_format%3D-class_method" title=".exec_format= (class method)">.<strong>exec_format=</strong>(value)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Overrides the executable format.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#install_lock-class_method" title=".install_lock (class method)">.<strong>install_lock</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Certain aspects of the install process are not thread-safe.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#path_warning-class_method" title=".path_warning (class method)">.<strong>path_warning</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>True if we&#39;ve warned about PATH not including <a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">bindir</a></p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Attribute Summary <small><a href='#' class='summary_toggle'>collapse</a></small></h2>

  <ul class="summary">
    <li>
      <span class="summary_signature">
        <a href="#bin_dir-instance_method" title="#bin_dir (instance method)">#<strong>bin_dir</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>The directory a gem&#39;s executables will be installed into</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#bin_dir%3D-instance_method" title="#bin_dir= (instance method)">#<strong>bin_dir=</strong>(value)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Available through requiring rubygems/installer_test_case</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#build_args%3D-instance_method" title="#build_args= (instance method)">#<strong>build_args=</strong>(value)  </a>
      </span>
      <span class='note title writeonly'>writeonly</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Available through requiring rubygems/installer_test_case</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#env_shebang%3D-instance_method" title="#env_shebang= (instance method)">#<strong>env_shebang=</strong>(value)  </a>
      </span>
      <span class='note title writeonly'>writeonly</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Available through requiring rubygems/installer_test_case</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#force%3D-instance_method" title="#force= (instance method)">#<strong>force=</strong>(value)  </a>
      </span>
      <span class='note title writeonly'>writeonly</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Available through requiring rubygems/installer_test_case</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#format%3D-instance_method" title="#format= (instance method)">#<strong>format=</strong>(value)  </a>
      </span>
      <span class='note title writeonly'>writeonly</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Available through requiring rubygems/installer_test_case</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#format_executable%3D-instance_method" title="#format_executable= (instance method)">#<strong>format_executable=</strong>(value)  </a>
      </span>
      <span class='note title writeonly'>writeonly</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Available through requiring rubygems/installer_test_case</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#gem-instance_method" title="#gem (instance method)">#<strong>gem</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Filename of the gem being installed.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#gem_dir-instance_method" title="#gem_dir (instance method)">#<strong>gem_dir</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Lazy accessor for the spec&#39;s gem directory.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#gem_dir%3D-instance_method" title="#gem_dir= (instance method)">#<strong>gem_dir=</strong>(value)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Available through requiring rubygems/installer_test_case</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#gem_home-instance_method" title="#gem_home (instance method)">#<strong>gem_home</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>The gem repository the gem will be installed into</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#gem_home%3D-instance_method" title="#gem_home= (instance method)">#<strong>gem_home=</strong>(value)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Available through requiring rubygems/installer_test_case</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#ignore_dependencies%3D-instance_method" title="#ignore_dependencies= (instance method)">#<strong>ignore_dependencies=</strong>(value)  </a>
      </span>
      <span class='note title writeonly'>writeonly</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Available through requiring rubygems/installer_test_case</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#options-instance_method" title="#options (instance method)">#<strong>options</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>The options passed when the <a href="" title="Gem::Installer (class)">Installer</a> was instantiated.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#security_policy%3D-instance_method" title="#security_policy= (instance method)">#<strong>security_policy=</strong>(value)  </a>
      </span>
      <span class='note title writeonly'>writeonly</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Available through requiring rubygems/installer_test_case</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#wrappers%3D-instance_method" title="#wrappers= (instance method)">#<strong>wrappers=</strong>(value)  </a>
      </span>
      <span class='note title writeonly'>writeonly</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Available through requiring rubygems/installer_test_case</p>
</div>
      </span>
    </li>
  </ul>


<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#at-class_method" title=".at (class method)">.<strong>at</strong>(path, options = {})  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Construct an installer object for the gem file located at <code>path</code></p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#for_spec-class_method" title=".for_spec (class method)">.<strong>for_spec</strong>(spec, options = {})  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Construct an installer object for an ephemeral gem (one where we don&#39;t
actually have a <a href="#gem-instance_method" title="Gem::Installer#gem (method)">#gem</a> file, just a spec)</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(package, options = {})  &#x21d2; Installer </a>
      </span>
      <span class='note title constructor'>constructor</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Constructs an Installer instance that will install the gem located at
<code>gem</code>.</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#app_script_text-instance_method" title="#app_script_text (instance method)">#<strong>app_script_text</strong>(bin_file_name)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Return the text for an application file.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#build_extensions-instance_method" title="#build_extensions (instance method)">#<strong>build_extensions</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Builds extensions.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#check_executable_overwrite-instance_method" title="#check_executable_overwrite (instance method)">#<strong>check_executable_overwrite</strong>(filename)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Checks if <code>filename</code> exists in <code>@bin_dir</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#default_spec_file-instance_method" title="#default_spec_file (instance method)">#<strong>default_spec_file</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>The location of the default spec file for default gems.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#dir-instance_method" title="#dir (instance method)">#<strong>dir</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Return the target directory where the gem is to be installed.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#ensure_dependency-instance_method" title="#ensure_dependency (instance method)">#<strong>ensure_dependency</strong>(spec, dependency)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Ensure that the dependency is satisfied by the current installation of gem.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#ensure_loadable_spec-instance_method" title="#ensure_loadable_spec (instance method)">#<strong>ensure_loadable_spec</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Ensures the <a href="Specification.html" title="Gem::Specification (class)">Specification</a> written out for this gem is loadable upon
installation.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#extension_build_error-instance_method" title="#extension_build_error (instance method)">#<strong>extension_build_error</strong>(build_dir, output, backtrace = nil)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Logs the build <code>output</code> in <code>build_dir</code>, then raises
<a href="Ext/BuildError.html" title="Gem::Ext::BuildError (class)">Ext::BuildError</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#extract_bin-instance_method" title="#extract_bin (instance method)">#<strong>extract_bin</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Extracts only the bin/ files from the gem into the gem directory.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#extract_files-instance_method" title="#extract_files (instance method)">#<strong>extract_files</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Reads the file index and extracts each file into the gem directory.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#formatted_program_filename-instance_method" title="#formatted_program_filename (instance method)">#<strong>formatted_program_filename</strong>(filename)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Prefix and suffix the program filename the same as ruby.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#generate_bin_script-instance_method" title="#generate_bin_script (instance method)">#<strong>generate_bin_script</strong>(filename, bindir)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Creates the scripts to run the applications in the gem.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#generate_bin_symlink-instance_method" title="#generate_bin_symlink (instance method)">#<strong>generate_bin_symlink</strong>(filename, bindir)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Creates the symlinks to run the applications in the gem.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#generate_windows_script-instance_method" title="#generate_windows_script (instance method)">#<strong>generate_windows_script</strong>(filename, bindir)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Creates windows bat files for easy running of commands</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#install-instance_method" title="#install (instance method)">#<strong>install</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Installs the gem and returns a loaded <a href="Specification.html" title="Gem::Specification (class)">Specification</a> for the
installed gem.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#installation_satisfies_dependency%3F-instance_method" title="#installation_satisfies_dependency? (instance method)">#<strong>installation_satisfies_dependency?</strong>(dependency)  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>True if the gems in the system satisfy <code>dependency</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#installed_specs-instance_method" title="#installed_specs (instance method)">#<strong>installed_specs</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Return an Array of Specifications contained within the gem_home we&#39;ll
be installing into.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#pre_install_checks-instance_method" title="#pre_install_checks (instance method)">#<strong>pre_install_checks</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Performs various checks before installing the gem such as the install
repository is writable and its directories exist, required Ruby and
rubygems versions are met and that dependencies are installed.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#shebang-instance_method" title="#shebang (instance method)">#<strong>shebang</strong>(bin_file_name)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Generates a <code>#!</code> line for <code>bin_file_name</code>&#39;s wrapper copying
arguments if necessary.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#spec-instance_method" title="#spec (instance method)">#<strong>spec</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Lazy accessor for the installer&#39;s spec.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#spec_file-instance_method" title="#spec_file (instance method)">#<strong>spec_file</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>The location of the spec file that is installed.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#unpack-instance_method" title="#unpack (instance method)">#<strong>unpack</strong>(directory)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Unpacks the gem into the given directory.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#windows_stub_script-instance_method" title="#windows_stub_script (instance method)">#<strong>windows_stub_script</strong>(bindir, bin_file_name)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>return the stub script text used to launch the true Ruby script</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#write_build_info_file-instance_method" title="#write_build_info_file (instance method)">#<strong>write_build_info_file</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Writes the file containing the arguments for building this gem&#39;s
extensions.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#write_cache_file-instance_method" title="#write_cache_file (instance method)">#<strong>write_cache_file</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Writes the <a href="#gem-instance_method" title="Gem::Installer#gem (method)">#gem</a> file to the cache directory</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#write_default_spec-instance_method" title="#write_default_spec (instance method)">#<strong>write_default_spec</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Writes the full gemspec specification (in Ruby) to the gem home&#39;s
specifications/default directory.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#write_spec-instance_method" title="#write_spec (instance method)">#<strong>write_spec</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Writes the gemspec specification (in Ruby) to the gem home&#39;s
specifications directory.</p>
</div>
      </span>
    </li>
  </ul>



  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <a href="UserInteraction.html" title="Gem::UserInteraction (module)">UserInteraction</a></h3>
  <p class="inherited"><a href="UserInteraction.html#alert-instance_method" title="Gem::UserInteraction#alert (method)">#alert</a>, <a href="UserInteraction.html#alert_error-instance_method" title="Gem::UserInteraction#alert_error (method)">#alert_error</a>, <a href="UserInteraction.html#alert_warning-instance_method" title="Gem::UserInteraction#alert_warning (method)">#alert_warning</a>, <a href="UserInteraction.html#ask-instance_method" title="Gem::UserInteraction#ask (method)">#ask</a>, <a href="UserInteraction.html#ask_for_password-instance_method" title="Gem::UserInteraction#ask_for_password (method)">#ask_for_password</a>, <a href="UserInteraction.html#ask_yes_no-instance_method" title="Gem::UserInteraction#ask_yes_no (method)">#ask_yes_no</a>, <a href="UserInteraction.html#choose_from_list-instance_method" title="Gem::UserInteraction#choose_from_list (method)">#choose_from_list</a>, <a href="UserInteraction.html#say-instance_method" title="Gem::UserInteraction#say (method)">#say</a>, <a href="UserInteraction.html#terminate_interaction-instance_method" title="Gem::UserInteraction#terminate_interaction (method)">#terminate_interaction</a>, <a href="UserInteraction.html#verbose-instance_method" title="Gem::UserInteraction#verbose (method)">#verbose</a></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <a href="DefaultUserInteraction.html" title="Gem::DefaultUserInteraction (module)">DefaultUserInteraction</a></h3>
  <p class="inherited"><a href="DefaultUserInteraction.html#ui-class_method" title="Gem::DefaultUserInteraction.ui (method)">.ui</a>, <a href="DefaultUserInteraction.html#ui-instance_method" title="Gem::DefaultUserInteraction#ui (method)">#ui</a>, <a href="DefaultUserInteraction.html#ui%3D-instance_method" title="Gem::DefaultUserInteraction#ui= (method)">#ui=</a>, <a href="DefaultUserInteraction.html#ui%3D-class_method" title="Gem::DefaultUserInteraction.ui= (method)">.ui=</a>, <a href="DefaultUserInteraction.html#use_ui-class_method" title="Gem::DefaultUserInteraction.use_ui (method)">.use_ui</a>, <a href="DefaultUserInteraction.html#use_ui-instance_method" title="Gem::DefaultUserInteraction#use_ui (method)">#use_ui</a></p>
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature first'>
  .<strong>new</strong>(package, options = {})  &#x21d2; <tt><a href="" title="Gem::Installer (class)">Installer</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Constructs an Installer instance that will install the gem located at
<code>gem</code>.  <code>options</code> is a Hash with the following keys:</p>
<dl class="rdoc-list note-list"><dt>:bin_dir
<dd>
<p>Where to put a bin wrapper if needed.</p>
</dd><dt>:development
<dd>
<p>Whether or not development dependencies should be installed.</p>
</dd><dt>:env_shebang
<dd>
<p>Use /usr/bin/env in bin wrappers.</p>
</dd><dt>:force
<dd>
<p>Overrides all version checks and security policy checks, except for a
signed-gems-only policy.</p>
</dd><dt>:format_executable
<dd>
<p>Format the executable the same as the Ruby executable. If your Ruby is
ruby18, foo_exec will be installed as foo_exec18.</p>
</dd><dt>:ignore_dependencies
<dd>
<p>Don&#39;t raise if a dependency is missing.</p>
</dd><dt>:install_dir
<dd>
<p>The directory to install the gem into.</p>
</dd><dt>:security_policy
<dd>
<p>Use the specified security policy.  See <a href="Security.html" title="Gem::Security (module)">Security</a></p>
</dd><dt>:user_install
<dd>
<p>Indicate that the gem should be unpacked into the users personal gem
directory.</p>
</dd><dt>:only_install_dir
<dd>
<p>Only validate dependencies against what is in the install_dir</p>
</dd><dt>:wrappers
<dd>
<p>Install wrappers if true, symlinks if false.</p>
</dd><dt>:build_args
<dd>
<p>An Array of arguments to pass to the extension builder process. If not set,
then Gem::Command.build_args is used</p>
</dd></dl>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L161'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 161</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_package'>package</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fileutils</span><span class='tstring_end'>&#39;</span></span>

  <span class='ivar'>@options</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_package'>package</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>String</span>
    <span class='id identifier rubyid_security_policy'>security_policy</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_security_policy'>security_policy</span><span class='rbracket'>]</span>
    <span class='ivar'>@package</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Package.html" title="Gem::Package (class)">Package</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="Package.html#new-class_method" title="Gem::Package.new (method)">new</a></span> <span class='id identifier rubyid_package'>package</span><span class='comma'>,</span> <span class='id identifier rubyid_security_policy'>security_policy</span>
    <span class='kw'>if</span> <span class='gvar'>$VERBOSE</span>
      <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>constructing an Installer object with a string is deprecated. Please use Gem::Installer.at (called from: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_caller'>caller</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='ivar'>@package</span> <span class='op'>=</span> <span class='id identifier rubyid_package'>package</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_process_options'>process_options</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_user_install'>user_install</span><span class='rbracket'>]</span> <span class='kw'>and</span> <span class='kw'>not</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_unpack'>unpack</span><span class='rbracket'>]</span> <span class='kw'>then</span>
    <span class='ivar'>@gem_home</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='period'>.</span><span class='id identifier rubyid_user_dir'><a href="../Gem.html#user_dir-class_method" title="Gem.user_dir (method)">user_dir</a></span>
    <span class='ivar'>@bin_dir</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='period'>.</span><span class='id identifier rubyid_bindir'><a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">bindir</a></span> <span class='id identifier rubyid_gem_home'>gem_home</span> <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_bin_dir'>bin_dir</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_check_that_user_bin_dir_is_in_path'>check_that_user_bin_dir_is_in_path</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Class Attribute Details</h2>
  <section class='method_details first' id="exec_format-class_method">
  <h3 class='signature first'>
  .<strong>exec_format</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Defaults to use Ruby&#39;s program prefix and suffix.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L92'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


92
93
94</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 92</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_exec_format'>exec_format</span>
  <span class='ivar'>@exec_format</span> <span class='op'>||=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='period'>.</span><span class='id identifier rubyid_default_exec_format'><a href="../Gem.html#default_exec_format-class_method" title="Gem.default_exec_format (method)">default_exec_format</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="exec_format=-class_method">
  <h3 class='signature'>
  .<strong>exec_format=</strong>(value)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Overrides the executable format.</p>

<p>This is a sprintf format with a “%s” which will be replaced with the
executable name.  It is based off the ruby executable name&#39;s difference
from “ruby”.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L89'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


89</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 89</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_writer'>attr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_exec_format'>exec_format</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="install_lock-class_method">
  <h3 class='signature'>
  .<strong>install_lock</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Certain aspects of the install process are not thread-safe. This lock is
used to allow multiple threads to install Gems at the same time.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L80'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


80</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 80</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_install_lock'>install_lock</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="path_warning-class_method">
  <h3 class='signature'>
  .<strong>path_warning</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>True if we&#39;ve warned about PATH not including <a href="../Gem.html#bindir-class_method" title="Gem.bindir (method)">Gem.bindir</a></p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L74'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


74</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 74</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_path_warning'>path_warning</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Attribute Details</h2>
  <section class='method_details first' id="bin_dir-instance_method">
  <h3 class='signature first'>
  #<strong>bin_dir</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The directory a gem&#39;s executables will be installed into</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L51'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


51</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 51</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bin_dir'>bin_dir</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="bin_dir=-instance_method">
  <h3 class='signature'>
  #<strong>bin_dir=</strong>(value)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Available through requiring rubygems/installer_test_case</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer_test_case.rb#L10'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


10</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer_test_case.rb', line 10</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_writer'>attr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_bin_dir'>bin_dir</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="build_args=-instance_method">
  <h3 class='signature'>
  #<strong>build_args=</strong>(value)   <span class="extras">(<span class='only'>writeonly</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Available through requiring rubygems/installer_test_case</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer_test_case.rb#L15'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


15</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer_test_case.rb', line 15</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_writer'>attr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_build_args'>build_args</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="env_shebang=-instance_method">
  <h3 class='signature'>
  #<strong>env_shebang=</strong>(value)   <span class="extras">(<span class='only'>writeonly</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Available through requiring rubygems/installer_test_case</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer_test_case.rb#L40'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


40</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer_test_case.rb', line 40</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_writer'>attr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_env_shebang'>env_shebang</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="force=-instance_method">
  <h3 class='signature'>
  #<strong>force=</strong>(value)   <span class="extras">(<span class='only'>writeonly</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Available through requiring rubygems/installer_test_case</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer_test_case.rb#L25'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


25</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer_test_case.rb', line 25</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_writer'>attr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_force'>force</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="format=-instance_method">
  <h3 class='signature'>
  #<strong>format=</strong>(value)   <span class="extras">(<span class='only'>writeonly</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Available through requiring rubygems/installer_test_case</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer_test_case.rb#L30'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


30</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer_test_case.rb', line 30</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_writer'>attr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_format'>format</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="format_executable=-instance_method">
  <h3 class='signature'>
  #<strong>format_executable=</strong>(value)   <span class="extras">(<span class='only'>writeonly</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Available through requiring rubygems/installer_test_case</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer_test_case.rb#L50'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


50</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer_test_case.rb', line 50</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_writer'>attr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_format_executable'>format_executable</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="gem-instance_method">
  <h3 class='signature'>
  #<strong>gem</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Filename of the gem being installed.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L46'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


46</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 46</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_gem'>gem</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="gem_dir-instance_method">
  <h3 class='signature'>
  #<strong>gem_dir</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Lazy accessor for the spec&#39;s gem directory.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L254'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


254
255
256</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 254</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_gem_dir'>gem_dir</span>
  <span class='ivar'>@gem_dir</span> <span class='op'>||=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_gem_home'>gem_home</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>gems</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_full_name'>full_name</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="gem_dir=-instance_method">
  <h3 class='signature'>
  #<strong>gem_dir=</strong>(value)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Available through requiring rubygems/installer_test_case</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer_test_case.rb#L20'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


20</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer_test_case.rb', line 20</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_writer'>attr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_gem_dir'>gem_dir</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="gem_home-instance_method">
  <h3 class='signature'>
  #<strong>gem_home</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The gem repository the gem will be installed into</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L58'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


58</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 58</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_gem_home'>gem_home</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="gem_home=-instance_method">
  <h3 class='signature'>
  #<strong>gem_home=</strong>(value)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Available through requiring rubygems/installer_test_case</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer_test_case.rb#L35'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


35</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer_test_case.rb', line 35</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_writer'>attr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_gem_home'>gem_home</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="ignore_dependencies=-instance_method">
  <h3 class='signature'>
  #<strong>ignore_dependencies=</strong>(value)   <span class="extras">(<span class='only'>writeonly</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Available through requiring rubygems/installer_test_case</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer_test_case.rb#L45'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


45</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer_test_case.rb', line 45</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_writer'>attr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_ignore_dependencies'>ignore_dependencies</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="options-instance_method">
  <h3 class='signature'>
  #<strong>options</strong>   <span class="extras">(<span class='only'>readonly</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The options passed when the <a href="" title="Gem::Installer (class)">Gem::Installer</a> was instantiated.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L63'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


63</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 63</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_options'>options</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="security_policy=-instance_method">
  <h3 class='signature'>
  #<strong>security_policy=</strong>(value)   <span class="extras">(<span class='only'>writeonly</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Available through requiring rubygems/installer_test_case</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer_test_case.rb#L55'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


55</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer_test_case.rb', line 55</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_writer'>attr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_security_policy'>security_policy</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="wrappers=-instance_method">
  <h3 class='signature'>
  #<strong>wrappers=</strong>(value)   <span class="extras">(<span class='only'>writeonly</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Available through requiring rubygems/installer_test_case</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer_test_case.rb#L60'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


60</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer_test_case.rb', line 60</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_writer'>attr_writer</span> <span class='symbeg'>:</span><span class='id identifier rubyid_wrappers'>wrappers</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Class Method Details</h2>
  <section class='method_details first' id="at-class_method">
  <h3 class='signature first'>
  .<strong>at</strong>(path, options = {})  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Construct an installer object for the gem file located at <code>path</code></p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L101'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


101
102
103
104
105</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 101</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_at'>at</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_security_policy'>security_policy</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_security_policy'>security_policy</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_package'>package</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Package.html" title="Gem::Package (class)">Package</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="Package.html#new-class_method" title="Gem::Package.new (method)">new</a></span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_security_policy'>security_policy</span>
  <span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_package'>package</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="for_spec-class_method">
  <h3 class='signature'>
  .<strong>for_spec</strong>(spec, options = {})  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Construct an installer object for an ephemeral gem (one where we don&#39;t
actually have a <a href="#gem-instance_method" title="Gem::Installer#gem (method)">#gem</a> file, just a spec)</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L133'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


133
134
135
136</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 133</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_for_spec'>for_spec</span> <span class='id identifier rubyid_spec'>spec</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='comment'># FIXME: we should have a real Package class for this
</span>  <span class='id identifier rubyid_new'>new</span> <span class='const'><a href="Installer/FakePackage.html" title="Gem::Installer::FakePackage (class)">FakePackage</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="Installer/FakePackage.html#new-class_method" title="Gem::Installer::FakePackage.new (method)">new</a></span><span class='lparen'>(</span><span class='id identifier rubyid_spec'>spec</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="app_script_text-instance_method">
  <h3 class='signature first'>
  #<strong>app_script_text</strong>(bin_file_name)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Return the text for an application file.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L698'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


698
699
700
701
702
703
704
705
706
707
708
709
710
711
712
713
714
715
716
717
718
719
720
721
722
723</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 698</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_app_script_text'>app_script_text</span><span class='lparen'>(</span><span class='id identifier rubyid_bin_file_name'>bin_file_name</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='heredoc_beg'>&lt;&lt;-TEXT</span>
<span class='embexpr_beg'>#{</span><span class='id identifier rubyid_shebang'>shebang</span> <span class='id identifier rubyid_bin_file_name'>bin_file_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>
#
# This file was generated by RubyGems.
#
# The application &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; is installed as part of a gem, and
# this file is here to facilitate running it.
#

require &#39;rubygems&#39;

version = &quot;</span><span class='embexpr_beg'>#{</span><span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Requirement.html" title="Gem::Requirement (class)">Requirement</a></span><span class='period'>.</span><span class='id identifier rubyid_default'><a href="Requirement.html#default-class_method" title="Gem::Requirement.default (method)">default</a></span><span class='embexpr_end'>}</span><span class='tstring_content'>.a&quot;

if ARGV.first
str = ARGV.first
str = str.dup.force_encoding(&quot;BINARY&quot;) if str.respond_to? :force_encoding
if str =~ /\\A_(.*)_\\z/ and Gem::Version.correct?($1) then
  version = $1
  ARGV.shift
end
end

load Gem.activate_bin_path(&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;, &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_bin_file_name'>bin_file_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;, version)
</span><span class='heredoc_end'>TEXT
</span><span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="build_extensions-instance_method">
  <h3 class='signature'>
  #<strong>build_extensions</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Builds extensions.  Valid types of extensions are extconf.rb files,
configure scripts and rakefiles or mkrf_conf files.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L744'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


744
745
746
747
748</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 744</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_build_extensions'>build_extensions</span>
  <span class='id identifier rubyid_builder'>builder</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Ext.html" title="Gem::Ext (module)">Ext</a></span><span class='op'>::</span><span class='const'><a href="Ext/Builder.html" title="Gem::Ext::Builder (class)">Builder</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="Ext/Builder.html#new-class_method" title="Gem::Ext::Builder.new (method)">new</a></span> <span class='id identifier rubyid_spec'>spec</span><span class='comma'>,</span> <span class='ivar'>@build_args</span>

  <span class='id identifier rubyid_builder'>builder</span><span class='period'>.</span><span class='id identifier rubyid_build_extensions'>build_extensions</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="check_executable_overwrite-instance_method">
  <h3 class='signature'>
  #<strong>check_executable_overwrite</strong>(filename)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Checks if <code>filename</code> exists in <code>@bin_dir</code>.</p>

<p>If <code>@force</code> is set <code>filename</code> is overwritten.</p>

<p>If <code>filename</code> exists and is a RubyGems wrapper for different gem
the user is consulted.</p>

<p>If <code>filename</code> exists and <code>@bin_dir</code> is
<a href="../Gem.html#default_bindir-class_method" title="Gem.default_bindir (method)">Gem.default_bindir</a> (/usr/local) the user is consulted.</p>

<p>Otherwise <code>filename</code> is overwritten.</p>


  </div>
</div>
<div class="tags">
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<tt><a href="InstallError.html" title="Gem::InstallError (class)">Gem::InstallError</a></tt>)</span>
  </li>
</ul>

</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L197'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 197</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_check_executable_overwrite'>check_executable_overwrite</span> <span class='id identifier rubyid_filename'>filename</span> <span class='comment'># :nodoc:
</span>  <span class='kw'>return</span> <span class='kw'>if</span> <span class='ivar'>@force</span>

  <span class='id identifier rubyid_generated_bin'>generated_bin</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span> <span class='ivar'>@bin_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_formatted_program_filename'>formatted_program_filename</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='rparen'>)</span>

  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span> <span class='id identifier rubyid_generated_bin'>generated_bin</span>

  <span class='id identifier rubyid_ruby_executable'>ruby_executable</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_existing'>existing</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='id identifier rubyid_open'>open</span> <span class='id identifier rubyid_generated_bin'>generated_bin</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rb</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_gets'>gets</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^#!</span><span class='regexp_end'>/</span></span> <span class='comment'># shebang
</span>    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_gets'>gets</span> <span class='comment'># blankline
</span>
    <span class='comment'># TODO detect a specially formatted comment instead of trying
</span>    <span class='comment'># to run a regexp against Ruby code.
</span>    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_gets'>gets</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>This file was generated by RubyGems</span><span class='regexp_end'>/</span></span>

    <span class='id identifier rubyid_ruby_executable'>ruby_executable</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_existing'>existing</span> <span class='op'>=</span> <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='period'>.</span><span class='id identifier rubyid_slice'>slice</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>
        ^(
          gem \s |
          load \s Gem\.bin_path\( |
          load \s Gem\.activate_bin_path\(
        )
        ([&#39;&quot;])(.*?)(\2),
      </span><span class='regexp_end'>}x</span></span><span class='comma'>,</span> <span class='int'>3</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='id identifier rubyid_existing'>existing</span>

  <span class='comment'># somebody has written to RubyGems&#39; directory, overwrite, too bad
</span>  <span class='kw'>return</span> <span class='kw'>if</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='period'>.</span><span class='id identifier rubyid_default_bindir'><a href="../Gem.html#default_bindir-class_method" title="Gem.default_bindir (method)">default_bindir</a></span> <span class='op'>!=</span> <span class='ivar'>@bin_dir</span> <span class='kw'>and</span> <span class='kw'>not</span> <span class='id identifier rubyid_ruby_executable'>ruby_executable</span>

  <span class='id identifier rubyid_question'>question</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;s executable \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filename'>filename</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot; conflicts with </span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_ruby_executable'>ruby_executable</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_question'>question</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_existing'>existing</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>an unknown executable</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

    <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_ask_yes_no'>ask_yes_no</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_question'>question</span><span class='embexpr_end'>}</span><span class='tstring_content'>\nOverwrite the executable?</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>false</span>

    <span class='id identifier rubyid_conflict'>conflict</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>installed executable from </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_existing'>existing</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_question'>question</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_generated_bin'>generated_bin</span>

    <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_ask_yes_no'>ask_yes_no</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_question'>question</span><span class='embexpr_end'>}</span><span class='tstring_content'>\nOverwrite the executable?</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>false</span>

    <span class='id identifier rubyid_conflict'>conflict</span> <span class='op'>=</span> <span class='id identifier rubyid_generated_bin'>generated_bin</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="InstallError.html" title="Gem::InstallError (class)">InstallError</a></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filename'>filename</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot; from </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> conflicts with </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_conflict'>conflict</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="default_spec_file-instance_method">
  <h3 class='signature'>
  #<strong>default_spec_file</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The location of the default spec file for default gems.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L414'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


414
415
416</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 414</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_default_spec_file'>default_spec_file</span>
  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span><span class='period'>.</span><span class='id identifier rubyid_default_specifications_dir'><a href="BasicSpecification.html#default_specifications_dir-class_method" title="Gem::BasicSpecification.default_specifications_dir (method)">default_specifications_dir</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_full_name'>full_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.gemspec</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="dir-instance_method">
  <h3 class='signature'>
  #<strong>dir</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Return the target directory where the gem is to be installed. This
directory is not guaranteed to be populated.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L796'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


796
797
798</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 796</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_dir'>dir</span>
  <span class='id identifier rubyid_gem_dir'>gem_dir</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="ensure_dependency-instance_method">
  <h3 class='signature'>
  #<strong>ensure_dependency</strong>(spec, dependency)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Ensure that the dependency is satisfied by the current installation of gem.
If it is not an exception is raised.</p>
<dl class="rdoc-list note-list"><dt>spec       
<dd>
<p><a href="Specification.html" title="Gem::Specification (class)">Specification</a></p>
</dd><dt>dependency 
<dd>
<p><a href="Dependency.html" title="Gem::Dependency (class)">Dependency</a></p>
</dd></dl>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L377'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


377
378
379
380
381
382</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 377</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ensure_dependency'>ensure_dependency</span><span class='lparen'>(</span><span class='id identifier rubyid_spec'>spec</span><span class='comma'>,</span> <span class='id identifier rubyid_dependency'>dependency</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_installation_satisfies_dependency?'>installation_satisfies_dependency?</span> <span class='id identifier rubyid_dependency'>dependency</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="InstallError.html" title="Gem::InstallError (class)">InstallError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> requires </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_dependency'>dependency</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="ensure_loadable_spec-instance_method">
  <h3 class='signature'>
  #<strong>ensure_loadable_spec</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Ensures the <a href="Specification.html" title="Gem::Specification (class)">Specification</a> written out for this gem is loadable upon
installation.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L591'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


591
592
593
594
595
596
597
598
599
600
601</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 591</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_ensure_loadable_spec'>ensure_loadable_spec</span>
  <span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_to_ruby_for_cache'>to_ruby_for_cache</span>
  <span class='id identifier rubyid_ruby'>ruby</span><span class='period'>.</span><span class='id identifier rubyid_untaint'>untaint</span>

  <span class='kw'>begin</span>
    <span class='id identifier rubyid_eval'>eval</span> <span class='id identifier rubyid_ruby'>ruby</span>
  <span class='kw'>rescue</span> <span class='const'>StandardError</span><span class='comma'>,</span> <span class='const'>SyntaxError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="InstallError.html" title="Gem::InstallError (class)">InstallError</a></span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The specification for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_full_name'>full_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> is corrupt (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="extension_build_error-instance_method">
  <h3 class='signature'>
  #<strong>extension_build_error</strong>(build_dir, output, backtrace = nil)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Logs the build <code>output</code> in <code>build_dir</code>, then raises
<a href="Ext/BuildError.html" title="Gem::Ext::BuildError (class)">Ext::BuildError</a>.</p>

<p>TODO:  Delete this for RubyGems 3.  It remains for API compatibility</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L755'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


755
756
757
758
759</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 755</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_extension_build_error'>extension_build_error</span><span class='lparen'>(</span><span class='id identifier rubyid_build_dir'>build_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_output'>output</span><span class='comma'>,</span> <span class='id identifier rubyid_backtrace'>backtrace</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_builder'>builder</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Ext.html" title="Gem::Ext (module)">Ext</a></span><span class='op'>::</span><span class='const'><a href="Ext/Builder.html" title="Gem::Ext::Builder (class)">Builder</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="Ext/Builder.html#new-class_method" title="Gem::Ext::Builder.new (method)">new</a></span> <span class='id identifier rubyid_spec'>spec</span><span class='comma'>,</span> <span class='ivar'>@build_args</span>

  <span class='id identifier rubyid_builder'>builder</span><span class='period'>.</span><span class='id identifier rubyid_build_error'>build_error</span> <span class='id identifier rubyid_build_dir'>build_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_output'>output</span><span class='comma'>,</span> <span class='id identifier rubyid_backtrace'>backtrace</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="extract_bin-instance_method">
  <h3 class='signature'>
  #<strong>extract_bin</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Extracts only the bin/ files from the gem into the gem directory. This is
used by default gems to allow a gem-aware stub to function without the full
gem installed.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L775'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


775
776
777</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 775</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_extract_bin'>extract_bin</span>
  <span class='ivar'>@package</span><span class='period'>.</span><span class='id identifier rubyid_extract_files'>extract_files</span> <span class='id identifier rubyid_gem_dir'>gem_dir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bin/*</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="extract_files-instance_method">
  <h3 class='signature'>
  #<strong>extract_files</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Reads the file index and extracts each file into the gem directory.</p>

<p>Ensures that files can&#39;t be installed outside the gem directory.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L766'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


766
767
768</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 766</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_extract_files'>extract_files</span>
  <span class='ivar'>@package</span><span class='period'>.</span><span class='id identifier rubyid_extract_files'>extract_files</span> <span class='id identifier rubyid_gem_dir'>gem_dir</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="formatted_program_filename-instance_method">
  <h3 class='signature'>
  #<strong>formatted_program_filename</strong>(filename)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Prefix and suffix the program filename the same as ruby.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L782'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


782
783
784
785
786
787
788</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 782</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_formatted_program_filename'>formatted_program_filename</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='ivar'>@format_executable</span> <span class='kw'>then</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_exec_format'>exec_format</span> <span class='op'>%</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_filename'>filename</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="generate_bin_script-instance_method">
  <h3 class='signature'>
  #<strong>generate_bin_script</strong>(filename, bindir)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates the scripts to run the applications in the gem. – The Windows
script is generated in addition to the regular one due to a bug or
misfeature in the Windows shell&#39;s pipe.  See <a
href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/193379">blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/193379</a></p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L494'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


494
495
496
497
498
499
500
501
502
503
504
505
506</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 494</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_bin_script'>generate_bin_script</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='id identifier rubyid_bindir'>bindir</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_bin_script_path'>bin_script_path</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_bindir'>bindir</span><span class='comma'>,</span> <span class='id identifier rubyid_formatted_program_filename'>formatted_program_filename</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='rparen'>)</span>

  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_rm_f'>rm_f</span> <span class='id identifier rubyid_bin_script_path'>bin_script_path</span> <span class='comment'># prior install may have been --no-wrappers
</span>
  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='id identifier rubyid_bin_script_path'>bin_script_path</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>wb</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0755</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
    <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_print'>print</span> <span class='id identifier rubyid_app_script_text'>app_script_text</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_verbose'>verbose</span> <span class='id identifier rubyid_bin_script_path'>bin_script_path</span>

  <span class='id identifier rubyid_generate_windows_script'>generate_windows_script</span> <span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='id identifier rubyid_bindir'>bindir</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="generate_bin_symlink-instance_method">
  <h3 class='signature'>
  #<strong>generate_bin_symlink</strong>(filename, bindir)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates the symlinks to run the applications in the gem.  Moves the symlink
if the gem being installed has a newer version.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L512'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 512</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_bin_symlink'>generate_bin_symlink</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='id identifier rubyid_bindir'>bindir</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_src'>src</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_gem_dir'>gem_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_bindir'>bindir</span><span class='comma'>,</span> <span class='id identifier rubyid_filename'>filename</span>
  <span class='id identifier rubyid_dst'>dst</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_bindir'>bindir</span><span class='comma'>,</span> <span class='id identifier rubyid_formatted_program_filename'>formatted_program_filename</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span> <span class='id identifier rubyid_dst'>dst</span> <span class='kw'>then</span>
    <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_symlink?'>symlink?</span> <span class='id identifier rubyid_dst'>dst</span> <span class='kw'>then</span>
      <span class='id identifier rubyid_link'>link</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_readlink'>readlink</span><span class='lparen'>(</span><span class='id identifier rubyid_dst'>dst</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span> <span class='const'>File</span><span class='op'>::</span><span class='const'>SEPARATOR</span>
      <span class='id identifier rubyid_cur_version'>cur_version</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Version.html" title="Gem::Version (class)">Version</a></span><span class='period'>.</span><span class='id identifier rubyid_create'><a href="Version.html#create-class_method" title="Gem::Version.create (method)">create</a></span><span class='lparen'>(</span><span class='id identifier rubyid_link'>link</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>3</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^.*-</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_version'>version</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_cur_version'>cur_version</span>
    <span class='kw'>end</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_unlink'>unlink</span> <span class='id identifier rubyid_dst'>dst</span>
  <span class='kw'>end</span>

  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_symlink'>symlink</span> <span class='id identifier rubyid_src'>src</span><span class='comma'>,</span> <span class='id identifier rubyid_dst'>dst</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_verbose'>verbose</span> <span class='op'>=&gt;</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='period'>.</span><span class='id identifier rubyid_configuration'><a href="../Gem.html#configuration-class_method" title="Gem.configuration (method)">configuration</a></span><span class='period'>.</span><span class='id identifier rubyid_really_verbose'>really_verbose</span>
<span class='kw'>rescue</span> <span class='const'>NotImplementedError</span><span class='comma'>,</span> <span class='const'>SystemCallError</span>
  <span class='id identifier rubyid_alert_warning'>alert_warning</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unable to use symlinks, installing wrapper</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_generate_bin_script'>generate_bin_script</span> <span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='id identifier rubyid_bindir'>bindir</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="generate_windows_script-instance_method">
  <h3 class='signature'>
  #<strong>generate_windows_script</strong>(filename, bindir)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates windows bat files for easy running of commands</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L445'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


445
446
447
448
449
450
451
452
453
454
455</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 445</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_windows_script'>generate_windows_script</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='id identifier rubyid_bindir'>bindir</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='period'>.</span><span class='id identifier rubyid_win_platform?'><a href="../Gem.html#win_platform%3F-class_method" title="Gem.win_platform? (method)">win_platform?</a></span> <span class='kw'>then</span>
    <span class='id identifier rubyid_script_name'>script_name</span> <span class='op'>=</span> <span class='id identifier rubyid_filename'>filename</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.bat</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_script_path'>script_path</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_bindir'>bindir</span><span class='comma'>,</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='id identifier rubyid_script_name'>script_name</span><span class='rparen'>)</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='id identifier rubyid_script_path'>script_path</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
      <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_windows_stub_script'>windows_stub_script</span><span class='lparen'>(</span><span class='id identifier rubyid_bindir'>bindir</span><span class='comma'>,</span> <span class='id identifier rubyid_filename'>filename</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_verbose'>verbose</span> <span class='id identifier rubyid_script_path'>script_path</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="install-instance_method">
  <h3 class='signature'>
  #<strong>install</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Installs the gem and returns a loaded <a href="Specification.html" title="Gem::Specification (class)">Specification</a> for the
installed gem.</p>

<p>The gem will be installed with the following structure:</p>

<pre class="code ruby"><code class="ruby">@gem_home/
  cache/&lt;gem-version&gt;.gem #=&gt; a cached copy of the installed gem
  gems/&lt;gem-version&gt;/... #=&gt; extracted files
  specifications/&lt;gem-version&gt;.gemspec #=&gt; the Gem::Specification</code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L278'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 278</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_install'>install</span>
  <span class='id identifier rubyid_pre_install_checks'>pre_install_checks</span>

  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_rm_f'>rm_f</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_gem_home'>gem_home</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>specifications</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_spec_name'>spec_name</span>

  <span class='id identifier rubyid_run_pre_install_hooks'>run_pre_install_hooks</span>

  <span class='comment'># Completely remove any previous gem files
</span>  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_rm_rf'>rm_rf</span> <span class='id identifier rubyid_gem_dir'>gem_dir</span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_rm_rf'>rm_rf</span> <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_extension_dir'>extension_dir</span>

  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_mkdir_p'>mkdir_p</span> <span class='id identifier rubyid_gem_dir'>gem_dir</span>

  <span class='kw'>if</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_install_as_default'>install_as_default</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_loaded_from'>loaded_from</span> <span class='op'>=</span> <span class='id identifier rubyid_default_spec_file'>default_spec_file</span>
    <span class='id identifier rubyid_extract_bin'>extract_bin</span>
    <span class='id identifier rubyid_write_default_spec'>write_default_spec</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_loaded_from'>loaded_from</span> <span class='op'>=</span> <span class='id identifier rubyid_spec_file'>spec_file</span>
    <span class='id identifier rubyid_extract_files'>extract_files</span>

    <span class='id identifier rubyid_build_extensions'>build_extensions</span>
    <span class='id identifier rubyid_write_build_info_file'>write_build_info_file</span>
    <span class='id identifier rubyid_run_post_build_hooks'>run_post_build_hooks</span>

    <span class='id identifier rubyid_generate_bin'>generate_bin</span>
    <span class='id identifier rubyid_write_spec'>write_spec</span>
    <span class='id identifier rubyid_write_cache_file'>write_cache_file</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_say'>say</span> <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_post_install_message'>post_install_message</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_post_install_message'>post_install_message</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_post_install_message'>post_install_message</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="" title="Gem::Installer (class)">Installer</a></span><span class='period'>.</span><span class='id identifier rubyid_install_lock'><a href="#install_lock-class_method" title="Gem::Installer.install_lock (method)">install_lock</a></span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='lbrace'>{</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span><span class='period'>.</span><span class='id identifier rubyid_reset'><a href="Specification.html#reset-class_method" title="Gem::Specification.reset (method)">reset</a></span> <span class='rbrace'>}</span>

  <span class='id identifier rubyid_run_post_install_hooks'>run_post_install_hooks</span>

  <span class='id identifier rubyid_spec'>spec</span>

<span class='comment'># TODO This rescue is in the wrong place. What is raising this exception?
</span><span class='comment'># move this rescue to around the code that actually might raise it.
</span><span class='kw'>rescue</span> <span class='const'>Zlib</span><span class='op'>::</span><span class='const'>GzipFile</span><span class='op'>::</span><span class='const'>Error</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="InstallError.html" title="Gem::InstallError (class)">InstallError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>gzip error installing </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_gem'>gem</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="installation_satisfies_dependency?-instance_method">
  <h3 class='signature'>
  #<strong>installation_satisfies_dependency?</strong>(dependency)  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>True if the gems in the system satisfy <code>dependency</code>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L387'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


387
388
389
390
391
392</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 387</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_installation_satisfies_dependency?'>installation_satisfies_dependency?</span><span class='lparen'>(</span><span class='id identifier rubyid_dependency'>dependency</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_development'>development</span><span class='rbracket'>]</span> <span class='kw'>and</span> <span class='id identifier rubyid_dependency'>dependency</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_development'>development</span>
  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_installed_specs'>installed_specs</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span> <span class='id identifier rubyid_dependency'>dependency</span><span class='period'>.</span><span class='id identifier rubyid_matches_spec?'>matches_spec?</span> <span class='id identifier rubyid_s'>s</span> <span class='rbrace'>}</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='ivar'>@only_install_dir</span>
  <span class='kw'>not</span> <span class='id identifier rubyid_dependency'>dependency</span><span class='period'>.</span><span class='id identifier rubyid_matching_specs'>matching_specs</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="installed_specs-instance_method">
  <h3 class='signature'>
  #<strong>installed_specs</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Return an Array of Specifications contained within the gem_home we&#39;ll
be installing into.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L357'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


357
358
359
360
361
362
363
364
365
366
367
368</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 357</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_installed_specs'>installed_specs</span>
  <span class='ivar'>@specs</span> <span class='op'>||=</span> <span class='kw'>begin</span>
    <span class='id identifier rubyid_specs'>specs</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

    <span class='const'>Dir</span><span class='lbracket'>[</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_gem_home'>gem_home</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>specifications</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*.gemspec</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_path'>path</span><span class='op'>|</span>
      <span class='id identifier rubyid_spec'>spec</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Specification.html" title="Gem::Specification (class)">Specification</a></span><span class='period'>.</span><span class='id identifier rubyid_load'><a href="Specification.html#load-class_method" title="Gem::Specification.load (method)">load</a></span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_untaint'>untaint</span>
      <span class='id identifier rubyid_specs'>specs</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_spec'>spec</span> <span class='kw'>if</span> <span class='id identifier rubyid_spec'>spec</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_specs'>specs</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="pre_install_checks-instance_method">
  <h3 class='signature'>
  #<strong>pre_install_checks</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Performs various checks before installing the gem such as the install
repository is writable and its directories exist, required Ruby and
rubygems versions are met and that dependencies are installed.</p>

<p>Version and dependency checks are skipped if this install is forced.</p>

<p>The dependent check will be skipped this install is ignoring dependencies.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L809'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


809
810
811
812
813
814
815
816
817
818
819
820
821
822
823
824
825
826
827</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 809</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_pre_install_checks'>pre_install_checks</span>
  <span class='id identifier rubyid_verify_gem_home'>verify_gem_home</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_unpack'>unpack</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_ensure_loadable_spec'>ensure_loadable_spec</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_install_as_default'>install_as_default</span><span class='rbracket'>]</span>
    <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='period'>.</span><span class='id identifier rubyid_ensure_default_gem_subdirectories'><a href="../Gem.html#ensure_default_gem_subdirectories-class_method" title="Gem.ensure_default_gem_subdirectories (method)">ensure_default_gem_subdirectories</a></span> <span class='id identifier rubyid_gem_home'>gem_home</span>
  <span class='kw'>else</span>
    <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='period'>.</span><span class='id identifier rubyid_ensure_gem_subdirectories'><a href="../Gem.html#ensure_gem_subdirectories-class_method" title="Gem.ensure_gem_subdirectories (method)">ensure_gem_subdirectories</a></span> <span class='id identifier rubyid_gem_home'>gem_home</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='ivar'>@force</span>

  <span class='id identifier rubyid_ensure_required_ruby_version_met'>ensure_required_ruby_version_met</span>
  <span class='id identifier rubyid_ensure_required_rubygems_version_met'>ensure_required_rubygems_version_met</span>
  <span class='id identifier rubyid_ensure_dependencies_met'>ensure_dependencies_met</span> <span class='kw'>unless</span> <span class='ivar'>@ignore_dependencies</span>

  <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="shebang-instance_method">
  <h3 class='signature'>
  #<strong>shebang</strong>(bin_file_name)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Generates a <code>#!</code> line for <code>bin_file_name</code>&#39;s wrapper copying
arguments if necessary.</p>

<p>If the :custom_shebang config is set, then it is used as a template for how
to create the shebang used for to run a gem&#39;s executables.</p>

<p>The template supports 4 expansions:</p>

<pre class="code ruby"><code class="ruby">$env    the path to the unix env utility
$ruby   the path to the currently running ruby interpreter
$exec   the path to the gem&#39;s executable
$name   the name of the gem the executable is for</code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L546'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 546</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_shebang'>shebang</span><span class='lparen'>(</span><span class='id identifier rubyid_bin_file_name'>bin_file_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ruby_name'>ruby_name</span> <span class='op'>=</span> <span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>CONFIG</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ruby_install_name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='ivar'>@env_shebang</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_gem_dir'>gem_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_bindir'>bindir</span><span class='comma'>,</span> <span class='id identifier rubyid_bin_file_name'>bin_file_name</span>
  <span class='id identifier rubyid_first_line'>first_line</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rb</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_gets'>gets</span><span class='rbrace'>}</span>

  <span class='kw'>if</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A#!</span><span class='regexp_end'>/</span></span> <span class='op'>=~</span> <span class='id identifier rubyid_first_line'>first_line</span> <span class='kw'>then</span>
    <span class='comment'># Preserve extra words on shebang line, like &quot;-w&quot;.  Thanks RPA.
</span>    <span class='id identifier rubyid_shebang'>shebang</span> <span class='op'>=</span> <span class='id identifier rubyid_first_line'>first_line</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A\#!.*?ruby\S*((\s\S)+)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#!</span><span class='embexpr_beg'>#{</span><span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='period'>.</span><span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='backref'>$1</span>
    <span class='id identifier rubyid_shebang'>shebang</span><span class='period'>.</span><span class='id identifier rubyid_strip!'>strip!</span> <span class='comment'># Avoid nasty ^M issues.
</span>  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_which'>which</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='period'>.</span><span class='id identifier rubyid_configuration'><a href="../Gem.html#configuration-class_method" title="Gem.configuration (method)">configuration</a></span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_custom_shebang'>custom_shebang</span><span class='rbracket'>]</span>
    <span class='comment'># replace bin_file_name with &quot;ruby&quot; to avoid endless loops
</span>    <span class='id identifier rubyid_which'>which</span> <span class='op'>=</span> <span class='id identifier rubyid_which'>which</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_bin_file_name'>bin_file_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>CONFIG</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ruby_install_name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

    <span class='id identifier rubyid_which'>which</span> <span class='op'>=</span> <span class='id identifier rubyid_which'>which</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\$(\w+)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='kw'>case</span> <span class='backref'>$1</span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>env</span><span class='tstring_end'>&quot;</span></span>
        <span class='ivar'>@env_path</span> <span class='op'>||=</span> <span class='const'><a href="#ENV_PATHS-constant" title="Gem::Installer::ENV_PATHS (constant)">ENV_PATHS</a></span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_env_path'>env_path</span><span class='op'>|</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_executable?'>executable?</span> <span class='id identifier rubyid_env_path'>env_path</span> <span class='rbrace'>}</span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ruby</span><span class='tstring_end'>&quot;</span></span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='period'>.</span><span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opts'>opts</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>exec</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_bin_file_name'>bin_file_name</span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#!</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_which'>which</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>elsif</span> <span class='kw'>not</span> <span class='id identifier rubyid_ruby_name'>ruby_name</span> <span class='kw'>then</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#!</span><span class='embexpr_beg'>#{</span><span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='period'>.</span><span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opts'>opts</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_opts'>opts</span> <span class='kw'>then</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#!/bin/sh\n&#39;exec&#39; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ruby_name'>ruby_name</span><span class='period'>.</span><span class='id identifier rubyid_dump'>dump</span><span class='embexpr_end'>}</span><span class='tstring_content'> &#39;-x&#39; \&quot;$0\&quot; \&quot;$@\&quot;\n</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_shebang'>shebang</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='comment'># Create a plain shebang line.
</span>    <span class='ivar'>@env_path</span> <span class='op'>||=</span> <span class='const'><a href="#ENV_PATHS-constant" title="Gem::Installer::ENV_PATHS (constant)">ENV_PATHS</a></span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_env_path'>env_path</span><span class='op'>|</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_executable?'>executable?</span> <span class='id identifier rubyid_env_path'>env_path</span> <span class='rbrace'>}</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#!</span><span class='embexpr_beg'>#{</span><span class='ivar'>@env_path</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ruby_name'>ruby_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="spec-instance_method">
  <h3 class='signature'>
  #<strong>spec</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Lazy accessor for the installer&#39;s spec.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L261'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


261
262
263
264
265</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 261</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_spec'>spec</span>
  <span class='ivar'>@package</span><span class='period'>.</span><span class='id identifier rubyid_spec'>spec</span>
<span class='kw'>rescue</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="Package.html" title="Gem::Package (class)">Package</a></span><span class='op'>::</span><span class='const'><a href="Package/Error.html" title="Gem::Package::Error (class)">Error</a></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='op'>::</span><span class='const'><a href="InstallError.html" title="Gem::InstallError (class)">InstallError</a></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid gem: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="spec_file-instance_method">
  <h3 class='signature'>
  #<strong>spec_file</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The location of the spec file that is installed.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L406'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


406
407
408</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 406</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_spec_file'>spec_file</span>
  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_gem_home'>gem_home</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>specifications</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_full_name'>full_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.gemspec</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="unpack-instance_method">
  <h3 class='signature'>
  #<strong>unpack</strong>(directory)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Unpacks the gem into the given directory.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L397'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


397
398
399
400</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 397</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_unpack'>unpack</span><span class='lparen'>(</span><span class='id identifier rubyid_directory'>directory</span><span class='rparen'>)</span>
  <span class='ivar'>@gem_dir</span> <span class='op'>=</span> <span class='id identifier rubyid_directory'>directory</span>
  <span class='id identifier rubyid_extract_files'>extract_files</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="windows_stub_script-instance_method">
  <h3 class='signature'>
  #<strong>windows_stub_script</strong>(bindir, bin_file_name)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>return the stub script text used to launch the true Ruby script</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L728'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


728
729
730
731
732
733
734
735
736
737
738</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 728</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_windows_stub_script'>windows_stub_script</span><span class='lparen'>(</span><span class='id identifier rubyid_bindir'>bindir</span><span class='comma'>,</span> <span class='id identifier rubyid_bin_file_name'>bin_file_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ruby'>ruby</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='period'>.</span><span class='id identifier rubyid_ruby'><a href="../Gem.html#ruby-class_method" title="Gem.ruby (method)">ruby</a></span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\&quot;|\&quot;$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_tr'>tr</span><span class='lparen'>(</span><span class='const'>File</span><span class='op'>::</span><span class='const'>SEPARATOR</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='heredoc_beg'>&lt;&lt;-TEXT</span>
<span class='tstring_content'>@ECHO OFF
IF NOT &quot;%~f0&quot; == &quot;~f0&quot; GOTO :WinNT
@&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ruby'>ruby</span><span class='embexpr_end'>}</span><span class='tstring_content'>&quot; &quot;</span><span class='embexpr_beg'>#{</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_bindir'>bindir</span><span class='comma'>,</span> <span class='id identifier rubyid_bin_file_name'>bin_file_name</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&quot; %1 %2 %3 %4 %5 %6 %7 %8 %9
GOTO :EOF
:WinNT
@&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ruby'>ruby</span><span class='embexpr_end'>}</span><span class='tstring_content'>&quot; &quot;%~dpn0&quot; %*
</span><span class='heredoc_end'>TEXT
</span><span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="write_build_info_file-instance_method">
  <h3 class='signature'>
  #<strong>write_build_info_file</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Writes the file containing the arguments for building this gem&#39;s
extensions.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L833'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


833
834
835
836
837
838
839
840
841
842
843
844
845
846
847</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 833</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_write_build_info_file'>write_build_info_file</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='ivar'>@build_args</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

  <span class='id identifier rubyid_build_info_dir'>build_info_dir</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_gem_home'>gem_home</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>build_info</span><span class='tstring_end'>&#39;</span></span>

  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_mkdir_p'>mkdir_p</span> <span class='id identifier rubyid_build_info_dir'>build_info_dir</span>

  <span class='id identifier rubyid_build_info_file'>build_info_file</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_build_info_dir'>build_info_dir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_full_name'>full_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.info</span><span class='tstring_end'>&quot;</span></span>

  <span class='id identifier rubyid_open'>open</span> <span class='id identifier rubyid_build_info_file'>build_info_file</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
    <span class='ivar'>@build_args</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_arg'>arg</span><span class='op'>|</span>
      <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_arg'>arg</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="write_cache_file-instance_method">
  <h3 class='signature'>
  #<strong>write_cache_file</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Writes the <a href="#gem-instance_method" title="Gem::Installer#gem (method)">#gem</a> file to the cache directory</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L852'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


852
853
854
855</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 852</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_write_cache_file'>write_cache_file</span>
  <span class='id identifier rubyid_cache_file'>cache_file</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_gem_home'>gem_home</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cache</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_file_name'>file_name</span>
  <span class='ivar'>@package</span><span class='period'>.</span><span class='id identifier rubyid_copy_to'>copy_to</span> <span class='id identifier rubyid_cache_file'>cache_file</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="write_default_spec-instance_method">
  <h3 class='signature'>
  #<strong>write_default_spec</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Writes the full gemspec specification (in Ruby) to the gem home&#39;s
specifications/default directory.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L436'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


436
437
438
439
440</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 436</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_write_default_spec'>write_default_spec</span>
  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_default_spec_file'>default_spec_file</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>w</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
    <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_to_ruby'>to_ruby</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="write_spec-instance_method">
  <h3 class='signature'>
  #<strong>write_spec</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Writes the gemspec specification (in Ruby) to the gem home&#39;s
specifications directory.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/lib/rubygems/installer.rb#L422'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


422
423
424
425
426
427
428
429
430</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/rubygems/installer.rb', line 422</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_write_spec'>write_spec</span>
  <span class='id identifier rubyid_open'>open</span> <span class='id identifier rubyid_spec_file'>spec_file</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
    <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_installed_by_version'>installed_by_version</span> <span class='op'>=</span> <span class='const'><a href="../Gem.html" title="Gem (module)">Gem</a></span><span class='period'>.</span><span class='id identifier rubyid_rubygems_version'><a href="../Gem.html#rubygems_version-class_method" title="Gem.rubygems_version (method)">rubygems_version</a></span>

    <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_to_ruby_for_cache'>to_ruby_for_cache</span>

    <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_fsync'>fsync</span> <span class='kw'>rescue</span> <span class='kw'>nil</span> <span class='comment'># for filesystems without fsync(2)
</span>  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.5 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>