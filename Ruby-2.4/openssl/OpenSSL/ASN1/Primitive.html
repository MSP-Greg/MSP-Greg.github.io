<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: OpenSSL::ASN1::Primitive &mdash; openssl Ruby-2.4.0 d2016-07-07</title>

<link rel='stylesheet'  type='text/css' href='../../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "OpenSSL::ASN1::Primitive",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../../../index.html'>Home</a> &raquo; 
          <a href='../../../index.html'>Ruby-2.4.0</a> &raquo; 
          <a href='../../index.html'>openssl</a> &raquo; 
          <a href='../../_index.html'>Index (P)</a> &raquo; 
        #  <a href="../../OpenSSL.html" title="OpenSSL (module)">OpenSSL</a> &raquo; 
        #  <a href="../ASN1.html" title="OpenSSL::ASN1 (module)">ASN1</a> &raquo; 
          <span class='title'>Primitive</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: OpenSSL::ASN1::Primitive</h1>

<div class="box_info">
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class='inheritName'><a href="ASN1Data.html" title="OpenSSL::ASN1::ASN1Data (class)">ASN1Data</a></span>
        <ul class='fullTree'>
          <li>Object</li>
            <li class='next'><a href="ASN1Data.html" title="OpenSSL::ASN1::ASN1Data (class)">ASN1Data</a></li>
            <li class='next'>OpenSSL::ASN1::Primitive</li>
        </ul>
        <a href='#' class='inheritanceTree'>show all</a>
    </dd>
  </dl>



  <dl>
    <dt>Defined in:</dt>
    <dd>openssl/ossl_asn1.c</dd>
  </dl>
</div>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>The parent class for all primitive encodings. Attributes are the same as
for ASN1Data, with the addition of <code>tagging</code>. Primitive values
can never be infinite length encodings, thus it is not possible to set the
<code>infinite_length</code> attribute for Primitive and its sub-classes.</p>

<h4 id="label-Primitive+sub-classes+and+their+mapping+to+Ruby+classes">Primitive sub-classes and their mapping to Ruby classes</h4>
<ul><li>
<p>EndOfContent    &lt;=&gt; <code>value</code> is always
<code>nil</code></p>
</li><li>
<p>Boolean         &lt;=&gt; <code>value</code> is a
<code>Boolean</code></p>
</li><li>
<p>Integer         &lt;=&gt; <code>value</code> is a
<code>Number</code></p>
</li><li>
<p>BitString       &lt;=&gt; <code>value</code> is a <code>String</code></p>
</li><li>
<p>OctetString     &lt;=&gt; <code>value</code> is a <code>String</code></p>
</li><li>
<p>Null            &lt;=&gt; <code>value</code> is always
<code>nil</code></p>
</li><li>
<p>Object          &lt;=&gt; <code>value</code> is a <code>String</code></p>
</li><li>
<p>Enumerated      &lt;=&gt; <code>value</code> is a
<code>Number</code></p>
</li><li>
<p>UTF8String      &lt;=&gt; <code>value</code> is a <code>String</code></p>
</li><li>
<p>NumericString   &lt;=&gt; <code>value</code> is a <code>String</code></p>
</li><li>
<p>PrintableString &lt;=&gt; <code>value</code> is a <code>String</code></p>
</li><li>
<p>T61String       &lt;=&gt; <code>value</code> is a <code>String</code></p>
</li><li>
<p>VideotexString  &lt;=&gt; <code>value</code> is a <code>String</code></p>
</li><li>
<p>IA5String       &lt;=&gt; <code>value</code> is a <code>String</code></p>
</li><li>
<p>UTCTime         &lt;=&gt; <code>value</code> is a <code>Time</code></p>
</li><li>
<p>GeneralizedTime &lt;=&gt; <code>value</code> is a <code>Time</code></p>
</li><li>
<p>GraphicString   &lt;=&gt; <code>value</code> is a <code>String</code></p>
</li><li>
<p>ISO64String     &lt;=&gt; <code>value</code> is a <code>String</code></p>
</li><li>
<p>GeneralString   &lt;=&gt; <code>value</code> is a <code>String</code></p>
</li><li>
<p>UniversalString &lt;=&gt; <code>value</code> is a <code>String</code></p>
</li><li>
<p>BMPString       &lt;=&gt; <code>value</code> is a <code>String</code></p>
</li></ul>

<h4 id="label-7BOpenSSL-3A-3AASN1-3A-3ABitString-7D">BitString</h4>

<h5 id="label-Additional+attributes">Additional attributes</h5>

<p><code>unused_bits</code>: if the underlying BIT STRING&#39;s length is a
multiple of 8 then <code>unused_bits</code> is 0. Otherwise
<code>unused_bits</code> indicates the number of bits that are to be
ignored in the final octet of the <code>BitString</code>&#39;s
<code>value</code>.</p>

<h4 id="label-7BOpenSSL-3A-3AASN1-3A-3AObjectId-7D"><a href="ObjectId.html" title="OpenSSL::ASN1::ObjectId (class)">ObjectId</a></h4>

<p>NOTE: While <a href="ObjectId.html" title="OpenSSL::ASN1::ObjectId (class)">ObjectId</a>.new will allocate a new ObjectId, it
is not typically allocated this way, but rather that are received from
parsed ASN1 encodings.</p>

<p>While <a href="ObjectId.html" title="OpenSSL::ASN1::ObjectId (class)">ObjectId</a>.new will allocate a new ObjectId, it is not
typically allocated this way, but rather that are received from parsed ASN1
encodings.</p>

<h5 id="label-Additional+attributes">Additional attributes</h5>
<ul><li>
<p><code>sn</code>: the short name as defined in &lt;openssl/objects.h&gt;.</p>
</li><li>
<p><code>ln</code>: the long name as defined in &lt;openssl/objects.h&gt;.</p>
</li><li>
<p><code>oid</code>: the object identifier as a <code>String</code>, e.g. “1.2.3.4.5”</p>
</li><li>
<p><code>short_name</code>: alias for <code>sn</code>.</p>
</li><li>
<p><code>long_name</code>: alias for <code>ln</code>.</p>
</li></ul>

<h4 id="label-Examples">Examples</h4>

<p>With the Exception of EndOfContent, each Primitive class
constructor takes at least one parameter, the <code>value</code>.</p>

<h5 id="label-Creating+EndOfContent">Creating EndOfContent</h5>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_eoc'>eoc</span> <span class='op'>=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>EndOfContent</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
</code></pre>

<h5 id="label-Creating+any+other+Primitive">Creating any other Primitive</h5>

<pre class="code ruby"><code class="ruby">prim = &lt;class&gt;.new(value) # &lt;class&gt; being one of the sub-classes except EndOfContent
prim_zero_tagged_implicit = &lt;class&gt;.new(value, 0, :IMPLICIT)
prim_zero_tagged_explicit = &lt;class&gt;.new(value, 0, :EXPLICIT)</code></pre>


  </div>
</div>
<div class="tags">
  
</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><a href="ObjectId.html" title="OpenSSL::ASN1::ObjectId (class)">ObjectId</a></p>
</div>





<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#new-class_method" title="new (class method)">.<strong>new</strong>(value[, tag, tagging, tag_class ])  &#x21d2; Primitive </a>
      </span>
      <span class='note title constructor'>constructor</span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p><code>value</code>: is mandatory.</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#to_der-instance_method" title="#asn1.to_der (instance method)">#<strong>asn1.to_der</strong>  &#x21d2; DER-encoded String </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>See <a href="ASN1Data.html#to_der-instance_method" title="OpenSSL::ASN1::ASN1Data#to_der (method)">ASN1Data#to_der</a> for details.</p>
</div>
      </span>
    </li>
  </ul>


  
  
  
  
  
  <h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>
  <section class='method_details first' id="new-class_method">
  <h3 class='signature first'>
  .<strong>new</strong>(value[, tag, tagging, tag_class ])  &#x21d2; <tt><a href="" title="OpenSSL::ASN1::Primitive (class)">Primitive</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p><code>value</code>: is mandatory.</p>

<p><code>tag</code>: optional, may be specified for tagged values. If no
<code>tag</code> is specified, the UNIVERSAL tag corresponding to the
Primitive sub-class is used by default.</p>

<p><code>tagging</code>: may be used as an encoding hint to encode a value
either explicitly or implicitly, see ASN1 for possible values.</p>

<p><code>tag_class</code>: if <code>tag</code> and <code>tagging</code> are
<code>nil</code> then this is set to <code>:UNIVERSAL</code> by default. If
either <code>tag</code> or <code>tagging</code> are set then
<code>:CONTEXT_SPECIFIC</code> is used as the default. For possible values
please cf. ASN1.</p>

<h3 id="label-Example">Example</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_int'>int</span> <span class='op'>=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>Integer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='int'>42</span><span class='rparen'>)</span>
<span class='id identifier rubyid_zero_tagged_int'>zero_tagged_int</span> <span class='op'>=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>Integer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='int'>42</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='symbol'>:IMPLICIT</span><span class='rparen'>)</span>
<span class='id identifier rubyid_private_explicit_zero_tagged_int'>private_explicit_zero_tagged_int</span> <span class='op'>=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>ASN1</span><span class='op'>::</span><span class='const'>Integer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='int'>42</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='symbol'>:EXPLICIT</span><span class='comma'>,</span> <span class='symbol'>:PRIVATE</span><span class='rparen'>)</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


1151
1152
1153
1154
1155
1156
1157
1158
1159
1160
1161
1162
1163
1164
1165
1166
1167
1168
1169
1170
1171
1172
1173
1174
1175
1176
1177
1178
1179
1180
1181
1182
1183
1184
1185</pre>
  <div class='lines_code'>
      <pre class='code cpp'><span class='info file'># File 'openssl/ossl_asn1.c', line 1151</span>

static VALUE
ossl_asn1_initialize(int argc, VALUE *argv, VALUE self)
{
    VALUE value, tag, tagging, tag_class;

    rb_scan_args(argc, argv, &quot;13&quot;, &amp;value, &amp;tag, &amp;tagging, &amp;tag_class);
    if(argc &gt; 1){
	if(NIL_P(tag))
	    ossl_raise(eASN1Error, &quot;must specify tag number&quot;);
	if(!NIL_P(tagging) &amp;&amp; !SYMBOL_P(tagging))
	    ossl_raise(eASN1Error, &quot;invalid tagging method&quot;);
	if(NIL_P(tag_class)) {
	    if (NIL_P(tagging))
		tag_class = ID2SYM(sUNIVERSAL);
	    else
		tag_class = ID2SYM(sCONTEXT_SPECIFIC);
	}
	if(!SYMBOL_P(tag_class))
	    ossl_raise(eASN1Error, &quot;invalid tag class&quot;);
	if(!NIL_P(tagging) &amp;&amp; SYM2ID(tagging) == sIMPLICIT &amp;&amp; NUM2INT(tag) &gt; 31)
	    ossl_raise(eASN1Error, &quot;tag number for Universal too large&quot;);
    }
    else{
	tag = INT2NUM(ossl_asn1_default_tag(self));
	tagging = Qnil;
	tag_class = ID2SYM(sUNIVERSAL);
    }
    ossl_asn1_set_tag(self, tag);
    ossl_asn1_set_value(self, value);
    ossl_asn1_set_tagging(self, tagging);
    ossl_asn1_set_tag_class(self, tag_class);
    ossl_asn1_set_infinite_length(self, Qfalse);

    return self;
}</pre>
  </div>
</div>
</section><h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="to_der-instance_method">
  <h3 class='signature first'>
  #<strong>asn1.to_der</strong>  &#x21d2; <tt>DER-encoded String</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>See <a href="ASN1Data.html#to_der-instance_method" title="OpenSSL::ASN1::ASN1Data#to_der (method)">ASN1Data#to_der</a> for details. *</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


1208
1209
1210
1211
1212
1213
1214
1215
1216
1217
1218
1219
1220
1221
1222
1223
1224
1225
1226
1227
1228
1229
1230
1231
1232
1233
1234
1235
1236
1237
1238
1239
1240
1241
1242
1243</pre>
  <div class='lines_code'>
      <pre class='code cpp'><span class='info file'># File 'openssl/ossl_asn1.c', line 1208</span>

static VALUE
ossl_asn1prim_to_der(VALUE self)
{
    ASN1_TYPE *asn1;
    int tn, tc, explicit;
    long len, reallen;
    unsigned char *buf, *p;
    VALUE str;

    tn = NUM2INT(ossl_asn1_get_tag(self));
    tc = ossl_asn1_tag_class(self);
    explicit = ossl_asn1_is_explicit(self);
    asn1 = ossl_asn1_get_asn1type(self);

    len = ASN1_object_size(1, i2d_ASN1_TYPE(asn1, NULL), tn);
    if(!(buf = OPENSSL_malloc(len))){
	ASN1_TYPE_free(asn1);
	ossl_raise(eASN1Error, &quot;cannot alloc buffer&quot;);
    }
    p = buf;
    if (tc == V_ASN1_UNIVERSAL) {
        i2d_ASN1_TYPE(asn1, &amp;p);
    } else if (explicit) {
        ASN1_put_object(&amp;p, 1, i2d_ASN1_TYPE(asn1, NULL), tn, tc);
        i2d_ASN1_TYPE(asn1, &amp;p);
    } else {
        i2d_ASN1_TYPE(asn1, &amp;p);
        *buf = tc | tn | (*buf &amp; V_ASN1_CONSTRUCTED);
    }
    ASN1_TYPE_free(asn1);
    reallen = p - buf;
    assert(reallen &lt;= len);
    str = ossl_buf2str((char *)buf, rb_long2int(reallen)); /* buf will be free in ossl_buf2str */

    return str;
}</pre>
  </div>
</div>
</section>
<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.8.7.6 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>