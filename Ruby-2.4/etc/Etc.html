<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: Etc &mdash; etc Ruby-2.4.0 d2016-07-16</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../css/common.css' />

<script type='text/javascript'>
  var pathId = "Etc",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../index.html'>Home</a> &raquo; 
          <a href='../index.html'>Ruby-2.4.0</a> &raquo; 
          <a href='index.html'>etc</a> &raquo; 
          <a href='_index.html'>Index (E)</a> &raquo; 
          <span class='title'>Etc</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='module'>

<h1>Module: Etc</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>





  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_min'>
etc/etc.c</div>  </td>
  </tr>
</table>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>The Etc module provides access to information typically stored in files in
the /etc directory on Unix systems.</p>

<p>The information accessible consists of the information found in the
/etc/passwd and /etc/group files, plus information about the system&#39;s
temporary directory (/tmp) and configuration directory (/etc).</p>

<p>The Etc module provides a more reliable way to access information about the
logged in user than environment variables such as <code>$USER</code>.</p>

<h4 id="label-Example-3A">Example:</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>etc</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_login'>login</span> <span class='op'>=</span> <span class='const'>Etc</span><span class='period'>.</span><span class='id identifier rubyid_getlogin'>getlogin</span>
<span class='id identifier rubyid_info'>info</span> <span class='op'>=</span> <span class='const'>Etc</span><span class='period'>.</span><span class='id identifier rubyid_getpwnam'>getpwnam</span><span class='lparen'>(</span><span class='id identifier rubyid_login'>login</span><span class='rparen'>)</span>
<span class='id identifier rubyid_username'>username</span> <span class='op'>=</span> <span class='id identifier rubyid_info'>info</span><span class='period'>.</span><span class='id identifier rubyid_gecos'>gecos</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>,</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_username'>username</span><span class='embexpr_end'>}</span><span class='tstring_content'>, I see your login name is </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_login'>login</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
</code></pre>

<p>Note that the methods provided by this module are not always secure. It
should be used for informational purposes, and not for security.</p>

<p>All operations defined in this module are class methods, so that you can
include the Etc module into your class.</p>


  </div>
</div>
<div class="tags">
  
</div>
<h2 id='t2_cnst'>Constant Summary<small><a href="#" class="summary_toggle">collapse</a></small></h2>

  <dl class="constants summary full">
    <dt id='Group-constant'>
      Group
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>Group is a Struct that is only available when compiled with
<code>HAVE_GETGRENT</code>.</p>

<p>The struct contains the following members:</p>
<dl class="rdoc-list note-list"><dt>name
<dd>
<p>contains the name of the group as a String.</p>
</dd><dt>passwd
<dd>
<p>contains the encrypted password as a String. An &#39;x&#39; is returned if
password access to the group is not available; an empty string is returned
if no password is needed to obtain membership of the group.</p>

<p>Must be compiled with <code>HAVE_STRUCT_GROUP_GR_PASSWD</code>.</p>
</dd><dt>gid
<dd>
<p>contains the group&#39;s numeric ID as an integer.</p>
</dd><dt>mem
<dd>
<p>is an Array of Strings containing the short login names of the members of
the group.</p>
</dd></dl>


  </div>
</div>
<div class="tags">
  
</div>    </dd>
    <dt id='Passwd-constant'>
      Passwd
    </dt>
    <dd>
      <div class="docstring">
  <div class="discussion">
    
<p>Passwd is a Struct that contains the following members:</p>
<dl class="rdoc-list note-list"><dt>name
<dd>
<p>contains the short login name of the user as a String.</p>
</dd><dt>passwd
<dd>
<p>contains the encrypted password of the user as a String. an &#39;x&#39; is
returned if shadow passwords are in use. An &#39;*&#39; is returned</p>
</dd></dl>

<pre class="code ruby"><code class="ruby">if the user cannot log in using a password.</code></pre>
<dl class="rdoc-list note-list"><dt>uid
<dd>
<p>contains the integer user ID (uid) of the user.</p>
</dd><dt>gid
<dd>
<p>contains the integer group ID (gid) of the user&#39;s primary group.</p>
</dd><dt>dir
<dd>
<p>contains the path to the home directory of the user as a String.</p>
</dd><dt>shell
<dd>
<p>contains the path to the login shell of the user as a String.</p>
</dd></dl>

<h4 id="label-The+following+members+below+are+optional-2C+and+must+be+compiled+with+special+flags-3A">The following members below are optional, and must be compiled with special flags:</h4>
<dl class="rdoc-list note-list"><dt>gecos
<dd>
<p>contains a longer String description of the user, such as</p>

<pre class="code ruby"><code class="ruby">a full name. Some Unix systems provide structured information in the</code></pre>

<p>gecos field, but this is system-dependent. must be compiled with
<code>HAVE_STRUCT_PASSWD_PW_GECOS</code></p>
</dd><dt>change
<dd>
<p>password change time(integer) must be compiled with
<code>HAVE_STRUCT_PASSWD_PW_CHANGE</code></p>
</dd><dt>quota
<dd>
<p>quota value(integer) must be compiled with
<code>HAVE_STRUCT_PASSWD_PW_QUOTA</code></p>
</dd><dt>age
<dd>
<p>password age(integer) must be compiled with
<code>HAVE_STRUCT_PASSWD_PW_AGE</code></p>
</dd><dt>class
<dd>
<p>user access class(string) must be compiled with
<code>HAVE_STRUCT_PASSWD_PW_CLASS</code></p>
</dd><dt>comment
<dd>
<p>comment(string) must be compiled with
<code>HAVE_STRUCT_PASSWD_PW_COMMENT</code></p>
</dd><dt>expire
<dd>
<p>account expiration time(integer) must be compiled with
<code>HAVE_STRUCT_PASSWD_PW_EXPIRE</code></p>
</dd></dl>


  </div>
</div>
<div class="tags">
  
</div>    </dd>
  </dl>





<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#confstr-class_method" title=".confstr (class method)">.<strong>confstr</strong>(a)  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns system configuration variable using confstr().</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#endgrent-class_method" title=".endgrent (class method)">.<strong>endgrent</strong>  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Ends the process of scanning through the /etc/group file begun by
<a href="#getgrent-class_method" title="Etc.getgrent (method)">Etc.getgrent</a>, and closes the file.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#endpwent-class_method" title=".endpwent (class method)">.<strong>endpwent</strong>  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Ends the process of scanning through the /etc/passwd file begun with
<a href="#getpwent-class_method" title="Etc.getpwent (method)">Etc.getpwent</a>, and closes the file.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#getgrent-class_method" title=".getgrent (class method)">.<strong>getgrent</strong>  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns an entry from the /etc/group file.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#getgrgid-class_method" title="getgrgid (class method)">.<strong>getgrgid</strong>(group_id)  &#x21d2; Group </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns information about the group with specified integer
<code>group_id</code>, as found in /etc/group.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#getgrnam-class_method" title="getgrnam (class method)">.<strong>getgrnam</strong>(name)  &#x21d2; Group </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns information about the group with specified <code>name</code>, as
found in /etc/group.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#getlogin-class_method" title="getlogin (class method)">.<strong>getlogin</strong>  &#x21d2; String </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the short user name of the currently logged in user.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#getpwent-class_method" title=".getpwent (class method)">.<strong>getpwent</strong>  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns an entry from the /etc/passwd file.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#getpwnam-class_method" title="getpwnam (class method)">.<strong>getpwnam</strong>(name)  &#x21d2; Passwd </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the /etc/passwd information for the user with specified login
<code>name</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#getpwuid-class_method" title="getpwuid (class method)">.<strong>getpwuid</strong>(uid)  &#x21d2; Passwd </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the /etc/passwd information for the user with the given integer
<code>uid</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#group-class_method" title=".group (class method)">.<strong>group</strong>  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Provides a convenient Ruby iterator which executes a block for each entry
in the /etc/group file.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#nprocessors-class_method" title=".nprocessors (class method)">.<strong>nprocessors</strong>  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the number of online processors.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#passwd-class_method" title="passwd (class method)">.<strong>passwd</strong> {|struct| ... } &#x21d2; Passwd </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Provides a convenient Ruby iterator which executes a block for each entry
in the /etc/passwd file.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#setgrent-class_method" title=".setgrent (class method)">.<strong>setgrent</strong>  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Resets the process of reading the /etc/group file, so that the next call to
<a href="#getgrent-class_method" title="Etc.getgrent (method)">Etc.getgrent</a> will return the first entry again.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#setpwent-class_method" title=".setpwent (class method)">.<strong>setpwent</strong>  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Resets the process of reading the /etc/passwd file, so that the next call
to <a href="#getpwent-class_method" title="Etc.getpwent (method)">Etc.getpwent</a> will return the first entry again.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#sysconf-class_method" title=".sysconf (class method)">.<strong>sysconf</strong>(a)  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns system configuration variable using sysconf().</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#sysconfdir-class_method" title=".sysconfdir (class method)">.<strong>sysconfdir</strong>  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns system configuration directory.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#systmpdir-class_method" title=".systmpdir (class method)">.<strong>systmpdir</strong>  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns system temporary directory; typically “/tmp”.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#uname-class_method" title=".uname (class method)">.<strong>uname</strong>  </a>
      </span>
      <span class='mod_func note title'>mod_func</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the system information obtained by uname system call.</p>
</div>
      </span>
    </li>
  </ul>


<h2 class='y_details'>Class Method Details</h2>
  <section class='method_details first' id="confstr-class_method">
  <h3 class='signature first'>
  .<strong>confstr</strong>(a)   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns system configuration variable using confstr().</p>

<p><em>name</em> should be a constant under <a href="" title="Etc (module)">Etc</a> which begins with
<code>CS_</code>.</p>

<p>The return value is a string or nil. nil means no configuration-defined
value.  (confstr() returns 0 but errno is not set.)</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Etc</span><span class='period'>.</span><span class='id identifier rubyid_confstr'>confstr</span><span class='lparen'>(</span><span class='const'>Etc</span><span class='op'>::</span><span class='const'>CS_PATH</span><span class='rparen'>)</span> <span class='comment'>#=&gt; &quot;/bin:/usr/bin&quot;
</span>
<span class='comment'># GNU/Linux
</span><span class='const'>Etc</span><span class='period'>.</span><span class='id identifier rubyid_confstr'>confstr</span><span class='lparen'>(</span><span class='const'>Etc</span><span class='op'>::</span><span class='const'>CS_GNU_LIBC_VERSION</span><span class='rparen'>)</span> <span class='comment'>#=&gt; &quot;glibc 2.18&quot;
</span><span class='const'>Etc</span><span class='period'>.</span><span class='id identifier rubyid_confstr'>confstr</span><span class='lparen'>(</span><span class='const'>Etc</span><span class='op'>::</span><span class='const'>CS_GNU_LIBPTHREAD_VERSION</span><span class='rparen'>)</span> <span class='comment'>#=&gt; &quot;NPTL 2.18&quot;
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


853
854
855
856
857
858
859
860
861
862
863
864
865
866
867
868
869
870
871
872
873
874
875
876
877
878
879</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'etc/etc.c', line 853</span>

static VALUE
etc_confstr(VALUE obj, VALUE arg)
{
    int name;
    char localbuf[128], *buf = localbuf;
    size_t bufsize = sizeof(localbuf), ret;
    VALUE tmp;

    name = NUM2INT(arg);

    errno = 0;
    ret = confstr(name, buf, bufsize);
    if (bufsize &lt; ret) {
        bufsize = ret;
        buf = ALLOCV_N(char, tmp, bufsize);
        errno = 0;
        ret = confstr(name, buf, bufsize);
    }
    if (bufsize &lt; ret)
        rb_bug(&quot;required buffer size for confstr() changed dynamically.&quot;);
    if (ret == 0) {
        if (errno == 0) /* no configuration-defined value */
            return Qnil;
        rb_sys_fail(&quot;confstr&quot;);
    }
    return rb_str_new_cstr(buf);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="endgrent-class_method">
  <h3 class='signature'>
  .<strong>endgrent</strong>   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Ends the process of scanning through the /etc/group file begun by
<a href="#getgrent-class_method" title="Etc.getgrent (method)">getgrent</a>, and closes the file.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


584
585
586
587
588
589
590
591</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'etc/etc.c', line 584</span>

static VALUE
etc_endgrent(VALUE obj)
{
#ifdef HAVE_GETGRENT
    endgrent();
#endif
    return Qnil;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="endpwent-class_method">
  <h3 class='signature'>
  .<strong>endpwent</strong>   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Ends the process of scanning through the /etc/passwd file begun with
<a href="#getpwent-class_method" title="Etc.getpwent (method)">getpwent</a>, and closes the file.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


346
347
348
349
350
351
352
353</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'etc/etc.c', line 346</span>

static VALUE
etc_endpwent(VALUE obj)
{
#ifdef HAVE_GETPWENT
    endpwent();
#endif
    return Qnil;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="getgrent-class_method">
  <h3 class='signature'>
  .<strong>getgrent</strong>   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns an entry from the /etc/group file.</p>

<p>The first time it is called it opens the file and returns the first entry;
each successive call returns the next entry, or <code>nil</code> if the end
of the file has been reached.</p>

<p>To close the file when processing is complete, call <a href="#endgrent-class_method" title="Etc.endgrent (method)">endgrent</a>.</p>

<p>Each entry is returned as a Group struct</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


603
604
605
606
607
608
609
610
611
612
613
614</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'etc/etc.c', line 603</span>

static VALUE
etc_getgrent(VALUE obj)
{
#ifdef HAVE_GETGRENT
    struct group *gr;

    if ((gr = getgrent()) != 0) {
	return setup_group(gr);
    }
#endif
    return Qnil;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="getgrgid-class_method">
  <h3 class='signature'>
  .<strong>getgrgid</strong>(group_id)  &#x21d2; <tt><a href="#Group-constant" title="Etc::Group (constant)">Group</a></tt>  <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns information about the group with specified integer
<code>group_id</code>, as found in /etc/group.</p>

<p>The information is returned as a Group struct.</p>

<p>See the unix manpage for <code>getgrgid(3)</code> for more detail.</p>

<h4 id="label-Example-3A">Example:</h4>

<pre class="code ruby"><code class="ruby"><span class='const'>Etc</span><span class='period'>.</span><span class='id identifier rubyid_getgrgid'>getgrgid</span><span class='lparen'>(</span><span class='int'>100</span><span class='rparen'>)</span>
<span class='comment'>#=&gt; #&lt;struct Etc::Group name=&quot;users&quot;, passwd=&quot;x&quot;, gid=100, mem=[&quot;meta&quot;, &quot;root&quot;]&gt;
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'etc/etc.c', line 418</span>

static VALUE
etc_getgrgid(int argc, VALUE *argv, VALUE obj)
{
#ifdef HAVE_GETGRENT
    VALUE id;
    gid_t gid;
    struct group *grp;

    if (rb_scan_args(argc, argv, &quot;01&quot;, &amp;id) == 1) {
	gid = NUM2GIDT(id);
    }
    else {
	gid = getgid();
    }
    grp = getgrgid(gid);
    if (grp == 0) rb_raise(rb_eArgError, &quot;can&#39;t find group for %d&quot;, (int)gid);
    return setup_group(grp);
#else
    return Qnil;
#endif
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="getgrnam-class_method">
  <h3 class='signature'>
  .<strong>getgrnam</strong>(name)  &#x21d2; <tt><a href="#Group-constant" title="Etc::Group (constant)">Group</a></tt>  <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns information about the group with specified <code>name</code>, as
found in /etc/group.</p>

<p>The information is returned as a Group struct.</p>

<p>See the unix manpage for <code>getgrnam(3)</code> for more detail.</p>

<h4 id="label-Example-3A">Example:</h4>

<pre class="code ruby"><code class="ruby"><span class='const'>Etc</span><span class='period'>.</span><span class='id identifier rubyid_getgrnam'>getgrnam</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>users</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='comment'>#=&gt; #&lt;struct Etc::Group name=&quot;users&quot;, passwd=&quot;x&quot;, gid=100, mem=[&quot;meta&quot;, &quot;root&quot;]&gt;
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


456
457
458
459
460
461
462
463
464
465
466
467
468
469</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'etc/etc.c', line 456</span>

static VALUE
etc_getgrnam(VALUE obj, VALUE nam)
{
#ifdef HAVE_GETGRENT
    struct group *grp;

    SafeStringValue(nam);
    grp = getgrnam(RSTRING_PTR(nam));
    if (grp == 0) rb_raise(rb_eArgError, &quot;can&#39;t find group for %&quot;PRIsVALUE, nam);
    return setup_group(grp);
#else
    return Qnil;
#endif
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="getlogin-class_method">
  <h3 class='signature'>
  .<strong>getlogin</strong>  &#x21d2; <tt>String</tt>  <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the short user name of the currently logged in user. Unfortunately,
it is often rather easy to fool <a href="#getlogin-class_method" title="Etc.getlogin (method)">getlogin</a>.</p>

<p>Avoid <a href="#getlogin-class_method" title="Etc.getlogin (method)">getlogin</a> for security-related purposes.</p>

<p>If <a href="#getlogin-class_method" title="Etc.getlogin (method)">getlogin</a> fails, try <a href="#getpwuid-class_method" title="Etc.getpwuid (method)">getpwuid</a>.</p>

<p>See the unix manpage for <code>getpwuid(3)</code> for more detail.</p>

<p>e.g.</p>

<pre class="code ruby"><code class="ruby">Etc.getlogin -&gt; &#39;guest&#39;</code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'etc/etc.c', line 72</span>

static VALUE
etc_getlogin(VALUE obj)
{
    char *login;

#ifdef HAVE_GETLOGIN
    login = getlogin();
    if (!login) login = getenv(&quot;USER&quot;);
#else
    login = getenv(&quot;USER&quot;);
#endif

    if (login) {
#ifdef _WIN32
	rb_encoding *extenc = rb_utf8_encoding();
#else
	rb_encoding *extenc = rb_locale_encoding();
#endif
	return rb_external_str_new_with_enc(login, strlen(login), extenc);
    }

    return Qnil;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="getpwent-class_method">
  <h3 class='signature'>
  .<strong>getpwent</strong>   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns an entry from the /etc/passwd file.</p>

<p>The first time it is called it opens the file and returns the first entry;
each successive call returns the next entry, or <code>nil</code> if the end
of the file has been reached.</p>

<p>To close the file when processing is complete, call <a href="#endpwent-class_method" title="Etc.endpwent (method)">endpwent</a>.</p>

<p>Each entry is returned as a Passwd struct.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


366
367
368
369
370
371
372
373
374
375
376
377</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'etc/etc.c', line 366</span>

static VALUE
etc_getpwent(VALUE obj)
{
#ifdef HAVE_GETPWENT
    struct passwd *pw;

    if ((pw = getpwent()) != 0) {
	return setup_passwd(pw);
    }
#endif
    return Qnil;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="getpwnam-class_method">
  <h3 class='signature'>
  .<strong>getpwnam</strong>(name)  &#x21d2; <tt><a href="#Passwd-constant" title="Etc::Passwd (constant)">Passwd</a></tt>  <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the /etc/passwd information for the user with specified login
<code>name</code>.</p>

<p>The information is returned as a Passwd struct.</p>

<p>See the unix manpage for <code>getpwnam(3)</code> for more detail.</p>

<h4 id="label-Example-3A">Example:</h4>

<pre class="code ruby"><code class="ruby"><span class='const'>Etc</span><span class='period'>.</span><span class='id identifier rubyid_getpwnam'>getpwnam</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>root</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='comment'>#=&gt; #&lt;struct Etc::Passwd name=&quot;root&quot;, passwd=&quot;x&quot;, uid=0, gid=0, gecos=&quot;root&quot;,dir=&quot;/root&quot;, shell=&quot;/bin/bash&quot;&gt;
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


213
214
215
216
217
218
219
220
221
222
223
224
225
226</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'etc/etc.c', line 213</span>

static VALUE
etc_getpwnam(VALUE obj, VALUE nam)
{
#ifdef HAVE_GETPWENT
    struct passwd *pwd;

    SafeStringValue(nam);
    pwd = getpwnam(RSTRING_PTR(nam));
    if (pwd == 0) rb_raise(rb_eArgError, &quot;can&#39;t find user for %&quot;PRIsVALUE, nam);
    return setup_passwd(pwd);
#else
    return Qnil;
#endif
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="getpwuid-class_method">
  <h3 class='signature'>
  .<strong>getpwuid</strong>(uid)  &#x21d2; <tt><a href="#Passwd-constant" title="Etc::Passwd (constant)">Passwd</a></tt>  <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the /etc/passwd information for the user with the given integer
<code>uid</code>.</p>

<p>The information is returned as a Passwd struct.</p>

<p>If <code>uid</code> is omitted, the value from <code>Passwd[:uid]</code> is
returned instead.</p>

<p>See the unix manpage for <code>getpwuid(3)</code> for more detail.</p>

<h4 id="label-Example-3A">Example:</h4>

<pre class="code ruby"><code class="ruby"><span class='const'>Etc</span><span class='period'>.</span><span class='id identifier rubyid_getpwuid'>getpwuid</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>
<span class='comment'>#=&gt; #&lt;struct Etc::Passwd name=&quot;root&quot;, passwd=&quot;x&quot;, uid=0, gid=0, gecos=&quot;root&quot;,dir=&quot;/root&quot;, shell=&quot;/bin/bash&quot;&gt;
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'etc/etc.c', line 176</span>

static VALUE
etc_getpwuid(int argc, VALUE *argv, VALUE obj)
{
#if defined(HAVE_GETPWENT)
    VALUE id;
    rb_uid_t uid;
    struct passwd *pwd;

    if (rb_scan_args(argc, argv, &quot;01&quot;, &amp;id) == 1) {
	uid = NUM2UIDT(id);
    }
    else {
	uid = getuid();
    }
    pwd = getpwuid(uid);
    if (pwd == 0) rb_raise(rb_eArgError, &quot;can&#39;t find user for %d&quot;, (int)uid);
    return setup_passwd(pwd);
#else
    return Qnil;
#endif
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="group-class_method">
  <h3 class='signature'>
  .<strong>group</strong>   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Provides a convenient Ruby iterator which executes a block for each entry
in the /etc/group file.</p>

<p>The code block is passed an Group struct.</p>

<p>See <a href="#getgrent-class_method" title="Etc.getgrent (method)">getgrent</a> above for details.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>etc</span><span class='tstring_end'>&#39;</span></span>

<span class='const'>Etc</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_g'>g</span><span class='op'>|</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_g'>g</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>: </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_g'>g</span><span class='period'>.</span><span class='id identifier rubyid_mem'>mem</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='rbrace'>}</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


521
522
523
524
525
526
527
528
529
530
531
532
533
534
535</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'etc/etc.c', line 521</span>

static VALUE
etc_group(VALUE obj)
{
#ifdef HAVE_GETGRENT
    struct group *grp;

    if (rb_block_given_p()) {
	each_group();
    }
    else if ((grp = getgrent()) != 0) {
	return setup_group(grp);
    }
#endif
    return Qnil;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="nprocessors-class_method">
  <h3 class='signature'>
  .<strong>nprocessors</strong>   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the number of online processors.</p>

<p>The result is intended as the number of processes to use all available
processors.</p>

<p>This method is implemented using:</p>
<ul><li>
<p>sched_getaffinity(): Linux</p>
</li><li>
<p>sysconf(_SC_NPROCESSORS_ONLN): GNU/Linux, NetBSD, FreeBSD, OpenBSD,
DragonFly BSD, OpenIndiana, Mac OS X, AIX</p>
</li></ul>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>etc</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_p'>p</span> <span class='const'>Etc</span><span class='period'>.</span><span class='id identifier rubyid_nprocessors'>nprocessors</span> <span class='comment'>#=&gt; 4
</span></code></pre>

<p>The result might be smaller number than physical cpus especially when ruby
process is bound to specific cpus. This is intended for getting better
parallel processing.</p>

<p>Example: (Linux)</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_linux'>linux</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


1003
1004
1005
1006
1007
1008
1009
1010
1011
1012
1013
1014
1015
1016
1017
1018
1019
1020
1021
1022
1023
1024
1025
1026
1027
1028
1029
1030
1031</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'etc/etc.c', line 1003</span>

static VALUE
etc_nprocessors(VALUE obj)
{
    long ret;

#if !defined(_WIN32)

#if defined(HAVE_SCHED_GETAFFINITY) &amp;&amp; defined(CPU_ALLOC)
    int ncpus;

    ncpus = etc_nprocessors_affin();
    if (ncpus != -1) {
       return INT2NUM(ncpus);
    }
    /* fallback to _SC_NPROCESSORS_ONLN */
#endif

    errno = 0;
    ret = sysconf(_SC_NPROCESSORS_ONLN);
    if (ret == -1) {
        rb_sys_fail(&quot;sysconf(_SC_NPROCESSORS_ONLN)&quot;);
    }
#else
    SYSTEM_INFO si;
    GetSystemInfo(&amp;si);
    ret = (long)si.dwNumberOfProcessors;
#endif
    return LONG2NUM(ret);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="passwd-class_method">
  <h3 class='signature'>
  <span class='overload'>.<strong>passwd</strong> {|struct| ... } &#x21d2; <tt><a href="#Passwd-constant" title="Etc::Passwd (constant)">Passwd</a></tt>  <span class="extras">(mod_func)</span></span>
    <span class='overload'>.<strong>passwd</strong>  &#x21d2; <tt><a href="#Passwd-constant" title="Etc::Passwd (constant)">Passwd</a></tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Provides a convenient Ruby iterator which executes a block for each entry
in the /etc/passwd file.</p>

<p>The code block is passed an Passwd struct.</p>

<p>See <a href="#getpwent-class_method" title="Etc.getpwent (method)">getpwent</a> above for details.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>etc</span><span class='tstring_end'>&#39;</span></span>

<span class='const'>Etc</span><span class='period'>.</span><span class='id identifier rubyid_passwd'>passwd</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_u'>u</span><span class='op'>|</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_u'>u</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> = </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_u'>u</span><span class='period'>.</span><span class='id identifier rubyid_gecos'>gecos</span>
<span class='rbrace'>}</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


281
282
283
284
285
286
287
288
289
290
291
292
293
294
295</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'etc/etc.c', line 281</span>

static VALUE
etc_passwd(VALUE obj)
{
#ifdef HAVE_GETPWENT
    struct passwd *pw;

    if (rb_block_given_p()) {
	each_passwd();
    }
    else if ((pw = getpwent()) != 0) {
	return setup_passwd(pw);
    }
#endif
    return Qnil;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="setgrent-class_method">
  <h3 class='signature'>
  .<strong>setgrent</strong>   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Resets the process of reading the /etc/group file, so that the next call to
<a href="#getgrent-class_method" title="Etc.getgrent (method)">getgrent</a> will return the first entry again.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


572
573
574
575
576
577
578
579</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'etc/etc.c', line 572</span>

static VALUE
etc_setgrent(VALUE obj)
{
#ifdef HAVE_GETGRENT
    setgrent();
#endif
    return Qnil;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="setpwent-class_method">
  <h3 class='signature'>
  .<strong>setpwent</strong>   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Resets the process of reading the /etc/passwd file, so that the next call
to <a href="#getpwent-class_method" title="Etc.getpwent (method)">getpwent</a> will return the first entry again.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


334
335
336
337
338
339
340
341</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'etc/etc.c', line 334</span>

static VALUE
etc_setpwent(VALUE obj)
{
#ifdef HAVE_GETPWENT
    setpwent();
#endif
    return Qnil;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="sysconf-class_method">
  <h3 class='signature'>
  .<strong>sysconf</strong>(a)   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns system configuration variable using sysconf().</p>

<p><em>name</em> should be a constant under <a href="" title="Etc (module)">Etc</a> which begins with
<code>SC_</code>.</p>

<p>The return value is an integer or nil. nil means indefinite limit. 
(sysconf() returns -1 but errno is not set.)</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Etc</span><span class='period'>.</span><span class='id identifier rubyid_sysconf'>sysconf</span><span class='lparen'>(</span><span class='const'>Etc</span><span class='op'>::</span><span class='const'>SC_ARG_MAX</span><span class='rparen'>)</span> <span class='comment'>#=&gt; 2097152
</span><span class='const'>Etc</span><span class='period'>.</span><span class='id identifier rubyid_sysconf'>sysconf</span><span class='lparen'>(</span><span class='const'>Etc</span><span class='op'>::</span><span class='const'>SC_LOGIN_NAME_MAX</span><span class='rparen'>)</span> <span class='comment'>#=&gt; 256
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


816
817
818
819
820
821
822
823
824
825
826
827
828
829
830
831
832</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'etc/etc.c', line 816</span>

static VALUE
etc_sysconf(VALUE obj, VALUE arg)
{
    int name;
    long ret;

    name = NUM2INT(arg);

    errno = 0;
    ret = sysconf(name);
    if (ret == -1) {
        if (errno == 0) /* no limit */
            return Qnil;
        rb_sys_fail(&quot;sysconf&quot;);
    }
    return LONG2NUM(ret);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="sysconfdir-class_method">
  <h3 class='signature'>
  .<strong>sysconfdir</strong>   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns system configuration directory.</p>

<p>This is typically “/etc”, but is modified by the prefix used when Ruby was
compiled. For example, if Ruby is built and installed in /usr/local,
returns “/usr/local/etc”.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


631
632
633
634
635
636
637
638
639</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'etc/etc.c', line 631</span>

static VALUE
etc_sysconfdir(VALUE obj)
{
#ifdef _WIN32
    return rb_w32_special_folder(CSIDL_COMMON_APPDATA);
#else
    return rb_filesystem_str_new_cstr(SYSCONFDIR);
#endif
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="systmpdir-class_method">
  <h3 class='signature'>
  .<strong>systmpdir</strong>   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns system temporary directory; typically “/tmp”.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


644
645
646
647
648
649
650
651
652
653
654
655
656
657
658
659
660
661
662
663
664
665
666
667
668
669
670
671
672
673
674
675
676
677
678
679</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'etc/etc.c', line 644</span>

static VALUE
etc_systmpdir(void)
{
    VALUE tmpdir;
#ifdef _WIN32
    WCHAR path[_MAX_PATH];
    UINT len = rb_w32_system_tmpdir(path, numberof(path));
    if (!len) return Qnil;
    tmpdir = rb_w32_conv_from_wchar(path, rb_filesystem_encoding());
#else
    const char default_tmp[] = &quot;/tmp&quot;;
    const char *tmpstr = default_tmp;
    size_t tmplen = strlen(default_tmp);
# if defined _CS_DARWIN_USER_TEMP_DIR
    #ifndef MAXPATHLEN
    #define MAXPATHLEN 1024
    #endif
    char path[MAXPATHLEN];
    size_t len;
    len = confstr(_CS_DARWIN_USER_TEMP_DIR, path, sizeof(path));
    if (len &gt; 0) {
	tmpstr = path;
	tmplen = len - 1;
	if (len &gt; sizeof(path)) tmpstr = 0;
    }
# endif
    tmpdir = rb_filesystem_str_new(tmpstr, tmplen);
# if defined _CS_DARWIN_USER_TEMP_DIR
    if (!tmpstr) {
	confstr(_CS_DARWIN_USER_TEMP_DIR, RSTRING_PTR(tmpdir), len);
    }
# endif
#endif
    FL_UNSET(tmpdir, FL_TAINT);
    return tmpdir;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="uname-class_method">
  <h3 class='signature'>
  .<strong>uname</strong>   <span class="extras">(mod_func)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the system information obtained by uname system call.</p>

<p>The return value is a hash which has 5 keys at least:</p>

<pre class="code ruby"><code class="ruby">:sysname, :nodename, :release, :version, :machine</code></pre>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>etc</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pp</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_pp'>pp</span> <span class='const'>Etc</span><span class='period'>.</span><span class='id identifier rubyid_uname'>uname</span>
<span class='comment'>#=&gt; {:sysname=&gt;&quot;Linux&quot;,
</span><span class='comment'>#    :nodename=&gt;&quot;boron&quot;,
</span><span class='comment'>#    :release=&gt;&quot;2.6.18-6-xen-686&quot;,
</span><span class='comment'>#    :version=&gt;&quot;#1 SMP Thu Nov 5 19:54:42 UTC 2009&quot;,
</span><span class='comment'>#    :machine=&gt;&quot;i686&quot;}
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


701
702
703
704
705
706
707
708
709
710
711
712
713
714
715
716
717
718
719
720
721
722
723
724
725
726
727
728
729
730
731
732
733
734
735
736
737
738
739
740
741
742
743
744
745
746
747
748
749
750
751
752
753
754
755
756
757
758
759
760
761
762
763
764
765
766
767
768
769
770
771
772
773
774
775
776
777
778
779
780
781
782
783
784
785
786
787
788
789
790
791
792
793
794
795
796
797
798</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'etc/etc.c', line 701</span>

static VALUE
etc_uname(VALUE obj)
{
#ifdef _WIN32
    OSVERSIONINFOW v;
    SYSTEM_INFO s;
    const char *sysname, *mach;
    VALUE result, release, version;
    VALUE vbuf, nodename = Qnil;
    DWORD len = 0;
    WCHAR *buf;

    v.dwOSVersionInfoSize = sizeof(v);
    if (!GetVersionExW(&amp;v))
        rb_sys_fail(&quot;GetVersionEx&quot;);

    result = rb_hash_new();
    switch (v.dwPlatformId) {
      case VER_PLATFORM_WIN32s:
	sysname = &quot;Win32s&quot;;
	break;
      case VER_PLATFORM_WIN32_NT:
	sysname = &quot;Windows_NT&quot;;
	break;
      case VER_PLATFORM_WIN32_WINDOWS:
      default:
	sysname = &quot;Windows&quot;;
	break;
    }
    rb_hash_aset(result, ID2SYM(rb_intern(&quot;sysname&quot;)), rb_str_new_cstr(sysname));
    release = rb_sprintf(&quot;%lu.%lu.%lu&quot;, v.dwMajorVersion, v.dwMinorVersion, v.dwBuildNumber);
    rb_hash_aset(result, ID2SYM(rb_intern(&quot;release&quot;)), release);
    version = rb_sprintf(&quot;%s Version %&quot;PRIsVALUE&quot;: %&quot;PRIsVALUE, sysname, release,
			 rb_w32_conv_from_wchar(v.szCSDVersion, rb_utf8_encoding()));
    rb_hash_aset(result, ID2SYM(rb_intern(&quot;version&quot;)), version);

# if defined _MSC_VER &amp;&amp; _MSC_VER &lt; 1300
#   define GET_COMPUTER_NAME(ptr, plen) GetComputerNameW(ptr, plen)
# else
#   define GET_COMPUTER_NAME(ptr, plen) GetComputerNameExW(ComputerNameDnsFullyQualified, ptr, plen)
# endif
    GET_COMPUTER_NAME(NULL, &amp;len);
    buf = ALLOCV_N(WCHAR, vbuf, len);
    if (GET_COMPUTER_NAME(buf, &amp;len)) {
	nodename = rb_w32_conv_from_wchar(buf, rb_utf8_encoding());
    }
    ALLOCV_END(vbuf);
    if (NIL_P(nodename)) nodename = rb_str_new(0, 0);
    rb_hash_aset(result, ID2SYM(rb_intern(&quot;nodename&quot;)), nodename);

# ifndef PROCESSOR_ARCHITECTURE_AMD64
#   define PROCESSOR_ARCHITECTURE_AMD64 9
# endif
# ifndef PROCESSOR_ARCHITECTURE_IA64
#   define PROCESSOR_ARCHITECTURE_IA64 6
# endif
# ifndef PROCESSOR_ARCHITECTURE_INTEL
#   define PROCESSOR_ARCHITECTURE_INTEL 0
# endif
    GetSystemInfo(&amp;s);
    switch (s.wProcessorArchitecture) {
      case PROCESSOR_ARCHITECTURE_AMD64:
	mach = &quot;x64&quot;;
	break;
      case PROCESSOR_ARCHITECTURE_ARM:
	mach = &quot;ARM&quot;;
	break;
      case PROCESSOR_ARCHITECTURE_IA64:
	mach = &quot;IA64&quot;;
	break;
      case PROCESSOR_ARCHITECTURE_INTEL:
	mach = &quot;x86&quot;;
	break;
      default:
	mach = &quot;unknown&quot;;
	break;
    }

    rb_hash_aset(result, ID2SYM(rb_intern(&quot;machine&quot;)), rb_str_new_cstr(mach));
#else
    struct utsname u;
    int ret;
    VALUE result;

    ret = uname(&amp;u);
    if (ret == -1)
        rb_sys_fail(&quot;uname&quot;);

    result = rb_hash_new();
    rb_hash_aset(result, ID2SYM(rb_intern(&quot;sysname&quot;)), rb_str_new_cstr(u.sysname));
    rb_hash_aset(result, ID2SYM(rb_intern(&quot;nodename&quot;)), rb_str_new_cstr(u.nodename));
    rb_hash_aset(result, ID2SYM(rb_intern(&quot;release&quot;)), rb_str_new_cstr(u.release));
    rb_hash_aset(result, ID2SYM(rb_intern(&quot;version&quot;)), rb_str_new_cstr(u.version));
    rb_hash_aset(result, ID2SYM(rb_intern(&quot;machine&quot;)), rb_str_new_cstr(u.machine));
#endif

    return result;
}
</pre>
  </div>
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.0 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>