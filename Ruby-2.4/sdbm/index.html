<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: SDBM &mdash; sdbm Ruby-2.4.0 d2016-08-08</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../css/common.css' />

<script type='text/javascript'>
  var pathId = "SDBM",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../index.html'>Home</a> &raquo; 
          <a href='../index.html'>Ruby-2.4.0</a> &raquo; 
          <a href='index.html'>sdbm</a> &raquo; 
          <a href='_index.html'>Index (S)</a> &raquo; 
          <span class='title'>SDBM</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: SDBM</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>
  <tr>
    <td class='box_1'>Inherits:</td>
    <td class='box_rel'>
      <span class='inheritName'>Object</span>
      <ul class='fullTree'>
        <li>Object</li>
        <li class='next'>SDBM</li>
      </ul>
      <a href='#' class='inheritanceTree'>show all</a>
    </td>
  </tr>
  <tr>
    <td class='box_1'>Includes:</td>
    <td>
      <div class='box_max'>
        Enumerable
      </div>
    </td>
  </tr>
  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_max'>
<a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L1018'>ext/sdbm/init.c</a></div>  </td>
  </tr>
</table>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>SDBM provides a simple file-based key-value store, which can only store
String keys and values.</p>

<p>Note that Ruby comes with the source code for SDBM, while the DBM and GDBM
standard libraries rely on external libraries and headers.</p>

<h5 id="label-Examples">Examples</h5>

<p>Insert values:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sdbm</span><span class='tstring_end'>&#39;</span></span>

<span class='const'>SDBM</span><span class='period'>.</span><span class='id identifier rubyid_open'><a href="#open-class_method" title="SDBM.open (method)">open</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>my_database</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db'>db</span><span class='op'>|</span>
  <span class='id identifier rubyid_db'>db</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>apple</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fruit</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_db'>db</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pear</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fruit</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_db'>db</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>carrot</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vegetable</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_db'>db</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tomato</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vegetable</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
</code></pre>

<p>Bulk update:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sdbm</span><span class='tstring_end'>&#39;</span></span>

<span class='const'>SDBM</span><span class='period'>.</span><span class='id identifier rubyid_open'><a href="#open-class_method" title="SDBM.open (method)">open</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>my_database</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db'>db</span><span class='op'>|</span>
  <span class='id identifier rubyid_db'>db</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>peach</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fruit</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tomato</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fruit</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span>
</code></pre>

<p>Retrieve values:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sdbm</span><span class='tstring_end'>&#39;</span></span>

<span class='const'>SDBM</span><span class='period'>.</span><span class='id identifier rubyid_open'><a href="#open-class_method" title="SDBM.open (method)">open</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>my_database</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db'>db</span><span class='op'>|</span>
  <span class='id identifier rubyid_db'>db</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Key: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'>, Value: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_value'>value</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>Outputs:</p>

<pre class="code ruby"><code class="ruby">Key: apple, Value: fruit
Key: pear, Value: fruit
Key: carrot, Value: vegetable
Key: peach, Value: fruit
Key: tomato, Value: fruit</code></pre>


  </div>
</div>
<div class="tags">
  
</div>




<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#new-class_method" title="new (class method)">.<strong>new</strong>(filename, mode = 0666)  </a>
      </span>
      <span class='note title constructor'>constructor</span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Creates a new database handle by opening the given <code>filename</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#open-class_method" title="open (class method)">.<strong>open</strong>(filename, mode = 0666)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>If called without a block, this is the same as <a href="#new-class_method" title="SDBM.new (method)">SDBM.new</a>.</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#%5B%5D-instance_method" title="#[] (instance method)">#<strong>[]</strong>(key)  &#x21d2; value<sup>?</sup> </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the <code>value</code> in the database associated with the given
<code>key</code> string.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#%5B%5D%3D-instance_method" title="#[]= (instance method)">#<strong>[]=</strong>(key, value)  &#x21d2; value </a>
        (also: #store)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Stores a new <code>value</code> in the database with the given
<code>key</code> as an index.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#clear-instance_method" title="#clear (instance method)">#<strong>clear</strong>  &#x21d2; self </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Deletes all data from the database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#close-instance_method" title="#close (instance method)">#<strong>close</strong>  &#x21d2; nil </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Closes the database file.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#closed%3F-instance_method" title="#closed? (instance method)">#<strong>closed?</strong>  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns <code>true</code> if the database is closed.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#delete-instance_method" title="#delete (instance method)">#<strong>delete</strong>(key)  &#x21d2; value<sup>?</sup> </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Deletes the key-value pair corresponding to the given <code>key</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#delete_if-instance_method" title="#delete_if (instance method)">#<strong>delete_if</strong> {|key, value| ... } &#x21d2; self </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#reject%21-instance_method" title="SDBM#reject! (method)">#reject!</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#each-instance_method" title="#each (instance method)">#<strong>each</strong>  </a>
        (also: #each_pair)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Iterates over each key-value pair in the database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#each_key-instance_method" title="#each_key (instance method)">#<strong>each_key</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Iterates over each <code>key</code> in the database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#each_pair-instance_method" title="#each_pair (instance method)">#<strong>each_pair</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#each-instance_method" title="SDBM#each (method)">#each</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#each_value-instance_method" title="#each_value (instance method)">#<strong>each_value</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Iterates over each <code>value</code> in the database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#empty%3F-instance_method" title="#empty? (instance method)">#<strong>empty?</strong>  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns <code>true</code> if the database is empty.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#fetch-instance_method" title="#fetch (instance method)">#<strong>fetch</strong>(key)  &#x21d2; value<sup>?</sup> </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the <code>value</code> in the database associated with the given
<code>key</code> string.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#has_key%3F-instance_method" title="#has_key? (instance method)">#<strong>has_key?</strong>(key)  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#key%3F-instance_method" title="SDBM#key? (method)">#key?</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#has_value%3F-instance_method" title="#has_value? (instance method)">#<strong>has_value?</strong>(key)  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#value%3F-instance_method" title="SDBM#value? (method)">#value?</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#include%3F-instance_method" title="#include? (instance method)">#<strong>include?</strong>(key)  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#key%3F-instance_method" title="SDBM#key? (method)">#key?</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#invert-instance_method" title="#invert (instance method)">#<strong>invert</strong>  &#x21d2; Hash </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns a Hash in which the key-value pairs have been inverted.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#key-instance_method" title="#key (instance method)">#<strong>key</strong>(value)  &#x21d2; key </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the <code>key</code> associated with the given <code>value</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#key%3F-instance_method" title="#key? (instance method)">#<strong>key?</strong>(key)  &#x21d2; Boolean </a>
        (also: #has_key?, #include?, #member?)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns <code>true</code> if the database contains the given
<code>key</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#keys-instance_method" title="#keys (instance method)">#<strong>keys</strong>  &#x21d2; Array </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns a new Array containing the keys in the database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#length-instance_method" title="#length (instance method)">#<strong>length</strong>  &#x21d2; Integer </a>
        (also: #size)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the number of keys in the database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#member%3F-instance_method" title="#member? (instance method)">#<strong>member?</strong>(key)  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#key%3F-instance_method" title="SDBM#key? (method)">#key?</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#reject-instance_method" title="#reject (instance method)">#<strong>reject</strong> {|key, value| ... } &#x21d2; Hash </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Creates a new Hash using the key-value pairs from the database, then calls
<code>Hash#reject</code> with the given block, which returns a Hash with only the
key-value pairs for which the block returns <code>false</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#reject%21-instance_method" title="#reject! (instance method)">#<strong>reject!</strong> {|key, value| ... } &#x21d2; self </a>
        (also: #delete_if)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Iterates over the key-value pairs in the database, deleting those for which
the block returns <code>true</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#replace-instance_method" title="#replace (instance method)">#<strong>replace</strong>(pairs)  &#x21d2; self </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Empties the database, then inserts the given key-value pairs.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#select-instance_method" title="#select (instance method)">#<strong>select</strong> {|key, value| ... } &#x21d2; Array </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns a new Array of key-value pairs for which the block returns
<code>true</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#shift-instance_method" title="#shift (instance method)">#<strong>shift</strong>  &#x21d2; Array<sup>?</sup> </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Removes a key-value pair from the database and returns them as an Array.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#size-instance_method" title="#size (instance method)">#<strong>size</strong>  &#x21d2; Integer </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#length-instance_method" title="SDBM#length (method)">#length</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#store-instance_method" title="#store (instance method)">#<strong>store</strong>(key, value)  &#x21d2; value </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#%5B%5D%3D-instance_method" title="SDBM#[]= (method)">#[]=</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#to_a-instance_method" title="#to_a (instance method)">#<strong>to_a</strong>  &#x21d2; Array </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns a new Array containing each key-value pair in the database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#to_hash-instance_method" title="#to_hash (instance method)">#<strong>to_hash</strong>  &#x21d2; Hash </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns a new Hash containing each key-value pair in the database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#update-instance_method" title="#update (instance method)">#<strong>update</strong>(pairs)  &#x21d2; self </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Insert or update key-value pairs.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#value%3F-instance_method" title="#value? (instance method)">#<strong>value?</strong>(key)  &#x21d2; Boolean </a>
        (also: #has_value?)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns <code>true</code> if the database contains the given
<code>value</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#values-instance_method" title="#values (instance method)">#<strong>values</strong>  &#x21d2; Array </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns a new Array containing the values in the database.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#values_at-instance_method" title="#values_at (instance method)">#<strong>values_at</strong>(key, ...)  &#x21d2; Array </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns an Array of values corresponding to the given keys.</p>
</div>
      </span>
    </li>
  </ul>



  <h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature first'>
  .<strong>new</strong>(filename, mode = 0666)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates a new database handle by opening the given <code>filename</code>.
SDBM actually uses two physical files, with extensions &#39;.dir&#39; and
&#39;.pag&#39;. These extensions will automatically be appended to the
<code>filename</code>.</p>

<p>If the file does not exist, a new file will be created using the given
<code>mode</code>, unless <code>mode</code> is explicitly set to nil. In
the latter case, no database will be created.</p>

<p>If the file exists, it will be opened in read/write mode. If this fails, it
will be opened in read-only mode.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L179'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 179</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_initialize(int argc, VALUE *argv, VALUE obj)
{
    VALUE file, vmode;
    DBM *dbm;
    struct dbmdata *dbmp;
    int mode;

    if (rb_scan_args(argc, argv, &quot;11&quot;, &amp;file, &amp;vmode) == 1) {
	mode = 0666;		/* default value */
    }
    else if (NIL_P(vmode)) {
	mode = -1;		/* return nil if DB not exist */
    }
    else {
	mode = NUM2INT(vmode);
    }
    FilePathValue(file);

    dbm = 0;
    if (mode &gt;= 0)
	dbm = sdbm_open(RSTRING_PTR(file), O_RDWR|O_CREAT, mode);
    if (!dbm)
	dbm = sdbm_open(RSTRING_PTR(file), O_RDWR, 0);
    if (!dbm)
	dbm = sdbm_open(RSTRING_PTR(file), O_RDONLY, 0);

    if (!dbm) {
	if (mode == -1) return Qnil;
	rb_sys_fail_str(file);
    }

    dbmp = ALLOC(struct dbmdata);
    DATA_PTR(obj) = dbmp;
    dbmp-&gt;di_dbm = dbm;
    dbmp-&gt;di_size = -1;

    return obj;
}
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Class Method Details</h2>
  <section class='method_details first' id="open-class_method">
  <h3 class='signature first'>
  <span class='overload'>.<strong>open</strong>(filename, mode = 0666)  </span>
    <span class='overload'>.<strong>open</strong>(filename, mode = 0666) {|sdbm| ... } </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>If called without a block, this is the same as <a href="#new-class_method" title="SDBM.new (method)">new</a>.</p>

<p>If a block is given, the new database will be passed to the block and will
be safely closed after the block has executed.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sdbm</span><span class='tstring_end'>&#39;</span></span>

<span class='const'><a href="" title="SDBM (class)">SDBM</a></span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>my_database</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db'>db</span><span class='op'>|</span>
  <span class='id identifier rubyid_db'>db</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>world</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L237'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


237
238
239
240
241
242
243
244
245
246
247
248
249
250
251</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 237</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_s_open(int argc, VALUE *argv, VALUE klass)
{
    VALUE obj = fsdbm_alloc(klass);

    if (NIL_P(fsdbm_initialize(argc, argv, obj))) {
	return Qnil;
    }

    if (rb_block_given_p()) {
        return rb_ensure(rb_yield, obj, fsdbm_close, obj);
    }

    return obj;
}
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="[]-instance_method">
  <h3 class='signature first'>
  #<strong>[]</strong>(key)  &#x21d2; <tt>value</tt><sup>?</sup> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the <code>value</code> in the database associated with the given
<code>key</code> string.</p>

<p>If no value is found, returns <code>nil</code>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L282'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


282
283
284
285
286</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 282</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_aref(VALUE obj, VALUE keystr)
{
    return fsdbm_fetch(obj, keystr, Qnil);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="[]=-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>[]=</strong>(key, value)  &#x21d2; <tt>value</tt> </span>
    <span class='overload'>#<strong>store</strong>(key, value)  &#x21d2; <tt>value</tt> </span>
  <span class='aliases'>Also known as: <span class='names'><span>store</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Stores a new <code>value</code> in the database with the given
<code>key</code> as an index.</p>

<p>If the <code>key</code> already exists, this will update the
<code>value</code> associated with the <code>key</code>.</p>

<p>Returns the given <code>value</code>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L619'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 619</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_store(VALUE obj, VALUE keystr, VALUE valstr)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;

    if (valstr == Qnil) {
	fsdbm_delete(obj, keystr);
	return Qnil;
    }

    fdbm_modify(obj);
    ExportStringValue(keystr);
    ExportStringValue(valstr);

    key.dptr = RSTRING_PTR(keystr);
    key.dsize = RSTRING_LENINT(keystr);

    val.dptr = RSTRING_PTR(valstr);
    val.dsize = RSTRING_LENINT(valstr);

    GetDBM2(obj, dbmp, dbm);
    dbmp-&gt;di_size = -1;
    if (sdbm_store(dbm, key, val, DBM_REPLACE)) {
#ifdef HAVE_DBM_CLAERERR
	sdbm_clearerr(dbm);
#endif
	if (errno == EPERM) rb_sys_fail(0);
	rb_raise(rb_eDBMError, &quot;sdbm_store failed&quot;);
    }

    return valstr;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="clear-instance_method">
  <h3 class='signature'>
  #<strong>clear</strong>  &#x21d2; <tt>self</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Deletes all data from the database.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L552'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 552</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_clear(VALUE obj)
{
    datum key;
    struct dbmdata *dbmp;
    DBM *dbm;

    fdbm_modify(obj);
    GetDBM2(obj, dbmp, dbm);
    dbmp-&gt;di_size = -1;
    while (key = sdbm_firstkey(dbm), key.dptr) {
	if (sdbm_delete(dbm, key)) {
	    rb_raise(rb_eDBMError, &quot;sdbm_delete failed&quot;);
	}
    }
    dbmp-&gt;di_size = 0;

    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="close-instance_method">
  <h3 class='signature'>
  #<strong>close</strong>  &#x21d2; <tt>nil</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Closes the database file.</p>

<p>Raises SDBMError if the database is already closed.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L127'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


127
128
129
130
131
132
133
134
135
136
137</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 127</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_close(VALUE obj)
{
    struct dbmdata *dbmp;

    GetDBM(obj, dbmp);
    sdbm_close(dbmp-&gt;di_dbm);
    dbmp-&gt;di_dbm = 0;

    return Qnil;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="closed?-instance_method">
  <h3 class='signature'>
  #<strong>closed?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns <code>true</code> if the database is closed.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L145'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


145
146
147
148
149
150
151
152
153
154
155
156
157</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 145</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_closed(VALUE obj)
{
    struct dbmdata *dbmp;

    TypedData_Get_Struct(obj, struct dbmdata, &amp;sdbm_type, dbmp);
    if (dbmp == 0)
	return Qtrue;
    if (dbmp-&gt;di_dbm == 0)
	return Qtrue;

    return Qfalse;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="delete-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>delete</strong>(key)  &#x21d2; <tt>value</tt><sup>?</sup> </span>
    <span class='overload'>#<strong>delete</strong>(key) {|key, value| ... } </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Deletes the key-value pair corresponding to the given <code>key</code>. If
the <code>key</code> exists, the deleted value will be returned, otherwise
<code>nil</code>.</p>

<p>If a block is provided, the deleted <code>key</code> and <code>value</code>
will be passed to the block as arguments. If the <code>key</code> does not
exist in the database, the value will be <code>nil</code>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L433'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 433</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_delete(VALUE obj, VALUE keystr)
{
    datum key, value;
    struct dbmdata *dbmp;
    DBM *dbm;
    VALUE valstr;

    fdbm_modify(obj);
    ExportStringValue(keystr);
    key.dptr = RSTRING_PTR(keystr);
    key.dsize = RSTRING_LENINT(keystr);

    GetDBM2(obj, dbmp, dbm);
    dbmp-&gt;di_size = -1;

    value = sdbm_fetch(dbm, key);
    if (value.dptr == 0) {
	if (rb_block_given_p()) return rb_yield(keystr);
	return Qnil;
    }

    /* need to save value before sdbm_delete() */
    valstr = rb_external_str_new(value.dptr, value.dsize);

    if (sdbm_delete(dbm, key)) {
	dbmp-&gt;di_size = -1;
	rb_raise(rb_eDBMError, &quot;dbm_delete failed&quot;);
    }
    else if (dbmp-&gt;di_size &gt;= 0) {
	dbmp-&gt;di_size--;
    }
    return valstr;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="delete_if-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>delete_if</strong> {|key, value| ... } &#x21d2; <tt>self</tt> </span>
    <span class='overload'>#<strong>reject!</strong> {|key, value| ... } &#x21d2; <tt>self</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#reject%21-instance_method" title="SDBM#reject! (method)">#reject!</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L506'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 506</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_delete_if(VALUE obj)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;
    VALUE keystr, valstr;
    VALUE ret, ary = rb_ary_new();
    long i;
    int status = 0, n;

    fdbm_modify(obj);
    GetDBM2(obj, dbmp, dbm);
    n = dbmp-&gt;di_size;
    dbmp-&gt;di_size = -1;
    for (key = sdbm_firstkey(dbm); key.dptr; key = sdbm_nextkey(dbm)) {
	val = sdbm_fetch(dbm, key);
	keystr = rb_external_str_new(key.dptr, key.dsize);
	valstr = rb_external_str_new(val.dptr, val.dsize);
        ret = rb_protect(rb_yield, rb_assoc_new(rb_str_dup(keystr), valstr), &amp;status);
        if (status != 0) break;
	if (RTEST(ret)) rb_ary_push(ary, keystr);
	GetDBM2(obj, dbmp, dbm);
    }

    for (i = 0; i &lt; RARRAY_LEN(ary); i++) {
	keystr = RARRAY_AREF(ary, i);
	ExportStringValue(keystr);
	key.dptr = RSTRING_PTR(keystr);
	key.dsize = RSTRING_LENINT(keystr);
	if (sdbm_delete(dbm, key)) {
	    rb_raise(rb_eDBMError, &quot;sdbm_delete failed&quot;);
	}
    }
    if (status) rb_jump_tag(status);
    if (n &gt; 0) dbmp-&gt;di_size = n - RARRAY_LENINT(ary);

    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="each-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>each</strong>  </span>
    <span class='overload'>#<strong>each</strong> {|key, value| ... } </span>
    <span class='overload'>#<strong>each_pair</strong>  </span>
    <span class='overload'>#<strong>each_pair</strong> {|key, value| ... } </span>
  <span class='aliases'>Also known as: <span class='names'><span>each_pair</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Iterates over each key-value pair in the database.</p>

<p>If no block is given, returns an Enumerator.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L818'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


818
819
820
821
822
823
824
825
826
827
828
829
830
831
832
833
834
835
836
837
838</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 818</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_each_pair(VALUE obj)
{
    datum key, val;
    DBM *dbm;
    struct dbmdata *dbmp;
    VALUE keystr, valstr;

    RETURN_ENUMERATOR(obj, 0, 0);

    GetDBM2(obj, dbmp, dbm);
    for (key = sdbm_firstkey(dbm); key.dptr; key = sdbm_nextkey(dbm)) {
	val = sdbm_fetch(dbm, key);
	keystr = rb_external_str_new(key.dptr, key.dsize);
	valstr = rb_external_str_new(val.dptr, val.dsize);
	rb_yield(rb_assoc_new(keystr, valstr));
	GetDBM2(obj, dbmp, dbm);
    }

    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="each_key-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>each_key</strong>  </span>
    <span class='overload'>#<strong>each_key</strong> {|key| ... } </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Iterates over each <code>key</code> in the database.</p>

<p>If no block is given, returns an Enumerator.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L790'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


790
791
792
793
794
795
796
797
798
799
800
801
802
803
804
805</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 790</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_each_key(VALUE obj)
{
    datum key;
    struct dbmdata *dbmp;
    DBM *dbm;

    RETURN_ENUMERATOR(obj, 0, 0);

    GetDBM2(obj, dbmp, dbm);
    for (key = sdbm_firstkey(dbm); key.dptr; key = sdbm_nextkey(dbm)) {
	rb_yield(rb_external_str_new(key.dptr, key.dsize));
	GetDBM2(obj, dbmp, dbm);
    }
    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="each_pair-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>each</strong>  </span>
    <span class='overload'>#<strong>each</strong> {|key, value| ... } </span>
    <span class='overload'>#<strong>each_pair</strong>  </span>
    <span class='overload'>#<strong>each_pair</strong> {|key, value| ... } </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#each-instance_method" title="SDBM#each (method)">#each</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="each_value-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>each_value</strong>  </span>
    <span class='overload'>#<strong>each_value</strong> {|value| ... } </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Iterates over each <code>value</code> in the database.</p>

<p>If no block is given, returns an Enumerator.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L763'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


763
764
765
766
767
768
769
770
771
772
773
774
775
776
777
778
779</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 763</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_each_value(VALUE obj)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;

    RETURN_ENUMERATOR(obj, 0, 0);

    GetDBM2(obj, dbmp, dbm);
    for (key = sdbm_firstkey(dbm); key.dptr; key = sdbm_nextkey(dbm)) {
	val = sdbm_fetch(dbm, key);
	rb_yield(rb_external_str_new(val.dptr, val.dsize));
	GetDBM2(obj, dbmp, dbm);
    }
    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="empty?-instance_method">
  <h3 class='signature'>
  #<strong>empty?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns <code>true</code> if the database is empty.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L732'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


732
733
734
735
736
737
738
739
740
741
742
743
744
745
746
747
748
749
750
751
752</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 732</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_empty_p(VALUE obj)
{
    datum key;
    struct dbmdata *dbmp;
    DBM *dbm;

    GetDBM(obj, dbmp);
    if (dbmp-&gt;di_size &lt; 0) {
	dbm = dbmp-&gt;di_dbm;

	for (key = sdbm_firstkey(dbm); key.dptr; key = sdbm_nextkey(dbm)) {
	    return Qfalse;
	}
    }
    else {
	if (dbmp-&gt;di_size)
	    return Qfalse;
    }
    return Qtrue;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="fetch-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>fetch</strong>(key)  &#x21d2; <tt>value</tt><sup>?</sup> </span>
    <span class='overload'>#<strong>fetch</strong>(key) {|key| ... } </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the <code>value</code> in the database associated with the given
<code>key</code> string.</p>

<p>If a block is provided, the block will be called when there is no
<code>value</code> associated with the given <code>key</code>. The
<code>key</code> will be passed in as an argument to the block.</p>

<p>If no block is provided and no value is associated with the given
<code>key</code>, then an IndexError will be raised.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L302'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


302
303
304
305
306
307
308
309
310
311
312
313</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 302</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_fetch_m(int argc, VALUE *argv, VALUE obj)
{
    VALUE keystr, valstr, ifnone;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;keystr, &amp;ifnone);
    valstr = fsdbm_fetch(obj, keystr, ifnone);
    if (argc == 1 &amp;&amp; !rb_block_given_p() &amp;&amp; NIL_P(valstr))
	rb_raise(rb_eIndexError, &quot;key not found&quot;);

    return valstr;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="has_key?-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>include?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>key?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>member?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>has_key?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#key%3F-instance_method" title="SDBM#key? (method)">#key?</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L896'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


896
897
898
899
900
901
902
903
904
905
906
907
908
909
910
911</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 896</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_has_key(VALUE obj, VALUE keystr)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;

    ExportStringValue(keystr);
    key.dptr = RSTRING_PTR(keystr);
    key.dsize = RSTRING_LENINT(keystr);

    GetDBM2(obj, dbmp, dbm);
    val = sdbm_fetch(dbm, key);
    if (val.dptr) return Qtrue;
    return Qfalse;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="has_value?-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>value?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>has_value?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#value%3F-instance_method" title="SDBM#value? (method)">#value?</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L920'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


920
921
922
923
924
925
926
927
928
929
930
931
932
933
934
935
936
937
938
939</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 920</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_has_value(VALUE obj, VALUE valstr)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;

    ExportStringValue(valstr);
    val.dptr = RSTRING_PTR(valstr);
    val.dsize = RSTRING_LENINT(valstr);

    GetDBM2(obj, dbmp, dbm);
    for (key = sdbm_firstkey(dbm); key.dptr; key = sdbm_nextkey(dbm)) {
	val = sdbm_fetch(dbm, key);
	if (val.dsize == RSTRING_LENINT(valstr) &amp;&amp;
	    memcmp(val.dptr, RSTRING_PTR(valstr), val.dsize) == 0)
	    return Qtrue;
    }
    return Qfalse;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="include?-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>include?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>key?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>member?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>has_key?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#key%3F-instance_method" title="SDBM#key? (method)">#key?</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="invert-instance_method">
  <h3 class='signature'>
  #<strong>invert</strong>  &#x21d2; <tt>Hash</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns a Hash in which the key-value pairs have been inverted.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sdbm</span><span class='tstring_end'>&#39;</span></span>

<span class='const'><a href="" title="SDBM (class)">SDBM</a></span><span class='period'>.</span><span class='id identifier rubyid_open'><a href="#open-class_method" title="SDBM.open (method)">open</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>my_database</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db'>db</span><span class='op'>|</span>
  <span class='id identifier rubyid_db'>db</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>apple</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fruit</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>spinach</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vegetable</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='id identifier rubyid_db'>db</span><span class='period'>.</span><span class='id identifier rubyid_invert'>invert</span>  <span class='comment'>#=&gt; {&quot;fruit&quot; =&gt; &quot;apple&quot;, &quot;vegetable&quot; =&gt; &quot;spinach&quot;}
</span><span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L588'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 588</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_invert(VALUE obj)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;
    VALUE keystr, valstr;
    VALUE hash = rb_hash_new();

    GetDBM2(obj, dbmp, dbm);
    for (key = sdbm_firstkey(dbm); key.dptr; key = sdbm_nextkey(dbm)) {
	val = sdbm_fetch(dbm, key);
	keystr = rb_external_str_new(key.dptr, key.dsize);
	valstr = rb_external_str_new(val.dptr, val.dsize);
	rb_hash_aset(hash, valstr, keystr);
    }
    return hash;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="key-instance_method">
  <h3 class='signature'>
  #<strong>key</strong>(value)  &#x21d2; <tt><a href="#key-instance_method" title="SDBM#key (method)">key</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the <code>key</code> associated with the given <code>value</code>.
If more than one <code>key</code> corresponds to the given
<code>value</code>, then the first key to be found will be returned. If no
keys are found, <code>nil</code> will be returned.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L323'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 323</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_key(VALUE obj, VALUE valstr)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;

    ExportStringValue(valstr);
    val.dptr = RSTRING_PTR(valstr);
    val.dsize = RSTRING_LENINT(valstr);

    GetDBM2(obj, dbmp, dbm);
    for (key = sdbm_firstkey(dbm); key.dptr; key = sdbm_nextkey(dbm)) {
	val = sdbm_fetch(dbm, key);
	if (val.dsize == RSTRING_LEN(valstr) &amp;&amp;
	    memcmp(val.dptr, RSTRING_PTR(valstr), val.dsize) == 0)
	    return rb_external_str_new(key.dptr, key.dsize);
    }
    return Qnil;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="key?-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>include?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>key?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>member?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>has_key?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
  <span class='aliases'>Also known as: <span class='names'><span>has_key?</span>, <span>include?</span>, <span>member?</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns <code>true</code> if the database contains the given
<code>key</code>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L896'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


896
897
898
899
900
901
902
903
904
905
906
907
908
909
910
911</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 896</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_has_key(VALUE obj, VALUE keystr)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;

    ExportStringValue(keystr);
    key.dptr = RSTRING_PTR(keystr);
    key.dsize = RSTRING_LENINT(keystr);

    GetDBM2(obj, dbmp, dbm);
    val = sdbm_fetch(dbm, key);
    if (val.dptr) return Qtrue;
    return Qfalse;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="keys-instance_method">
  <h3 class='signature'>
  #<strong>keys</strong>  &#x21d2; <tt>Array</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns a new Array containing the keys in the database.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L846'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


846
847
848
849
850
851
852
853
854
855
856
857
858
859
860
861</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 846</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_keys(VALUE obj)
{
    datum key;
    struct dbmdata *dbmp;
    DBM *dbm;
    VALUE ary;

    GetDBM2(obj, dbmp, dbm);
    ary = rb_ary_new();
    for (key = sdbm_firstkey(dbm); key.dptr; key = sdbm_nextkey(dbm)) {
	rb_ary_push(ary, rb_external_str_new(key.dptr, key.dsize));
    }

    return ary;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="length-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>length</strong>  &#x21d2; <tt>Integer</tt> </span>
    <span class='overload'>#<strong>size</strong>  &#x21d2; <tt>Integer</tt> </span>
  <span class='aliases'>Also known as: <span class='names'><span>size</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the number of keys in the database.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L707'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


707
708
709
710
711
712
713
714
715
716
717
718
719
720
721
722
723
724</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 707</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_length(VALUE obj)
{
    datum key;
    struct dbmdata *dbmp;
    DBM *dbm;
    int i = 0;

    GetDBM2(obj, dbmp, dbm);
    if (dbmp-&gt;di_size &gt; 0) return INT2FIX(dbmp-&gt;di_size);

    for (key = sdbm_firstkey(dbm); key.dptr; key = sdbm_nextkey(dbm)) {
	i++;
    }
    dbmp-&gt;di_size = i;

    return INT2FIX(i);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="member?-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>include?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>key?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>member?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>has_key?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#key%3F-instance_method" title="SDBM#key? (method)">#key?</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="reject-instance_method">
  <h3 class='signature'>
  #<strong>reject</strong> {|key, value| ... } &#x21d2; <tt>Hash</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates a new Hash using the key-value pairs from the database, then calls
<code>Hash#reject</code> with the given block, which returns a Hash with only the
key-value pairs for which the block returns <code>false</code>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L1009'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1009
1010
1011
1012
1013</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 1009</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_reject(VALUE obj)
{
    return rb_hash_delete_if(fsdbm_to_hash(obj));
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="reject!-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>delete_if</strong> {|key, value| ... } &#x21d2; <tt>self</tt> </span>
    <span class='overload'>#<strong>reject!</strong> {|key, value| ... } &#x21d2; <tt>self</tt> </span>
  <span class='aliases'>Also known as: <span class='names'><span>delete_if</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Iterates over the key-value pairs in the database, deleting those for which
the block returns <code>true</code>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L506'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 506</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_delete_if(VALUE obj)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;
    VALUE keystr, valstr;
    VALUE ret, ary = rb_ary_new();
    long i;
    int status = 0, n;

    fdbm_modify(obj);
    GetDBM2(obj, dbmp, dbm);
    n = dbmp-&gt;di_size;
    dbmp-&gt;di_size = -1;
    for (key = sdbm_firstkey(dbm); key.dptr; key = sdbm_nextkey(dbm)) {
	val = sdbm_fetch(dbm, key);
	keystr = rb_external_str_new(key.dptr, key.dsize);
	valstr = rb_external_str_new(val.dptr, val.dsize);
        ret = rb_protect(rb_yield, rb_assoc_new(rb_str_dup(keystr), valstr), &amp;status);
        if (status != 0) break;
	if (RTEST(ret)) rb_ary_push(ary, keystr);
	GetDBM2(obj, dbmp, dbm);
    }

    for (i = 0; i &lt; RARRAY_LEN(ary); i++) {
	keystr = RARRAY_AREF(ary, i);
	ExportStringValue(keystr);
	key.dptr = RSTRING_PTR(keystr);
	key.dsize = RSTRING_LENINT(keystr);
	if (sdbm_delete(dbm, key)) {
	    rb_raise(rb_eDBMError, &quot;sdbm_delete failed&quot;);
	}
    }
    if (status) rb_jump_tag(status);
    if (n &gt; 0) dbmp-&gt;di_size = n - RARRAY_LENINT(ary);

    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="replace-instance_method">
  <h3 class='signature'>
  #<strong>replace</strong>(pairs)  &#x21d2; <tt>self</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Empties the database, then inserts the given key-value pairs.</p>

<p>This method will work with any object which implements an each_pair method,
such as a Hash.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L692'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


692
693
694
695
696
697
698</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 692</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_replace(VALUE obj, VALUE other)
{
    fsdbm_clear(obj);
    rb_block_call(other, rb_intern(&quot;each_pair&quot;), 0, 0, update_i, obj);
    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="select-instance_method">
  <h3 class='signature'>
  #<strong>select</strong> {|key, value| ... } &#x21d2; <tt>Array</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns a new Array of key-value pairs for which the block returns
<code>true</code>.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sdbm</span><span class='tstring_end'>&#39;</span></span>

<span class='const'><a href="" title="SDBM (class)">SDBM</a></span><span class='period'>.</span><span class='id identifier rubyid_open'><a href="#open-class_method" title="SDBM.open (method)">open</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>my_database</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db'>db</span><span class='op'>|</span>
  <span class='id identifier rubyid_db'>db</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>apple</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fruit</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_db'>db</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pear</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fruit</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_db'>db</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>spinach</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vegetable</span><span class='tstring_end'>&#39;</span></span>

  <span class='id identifier rubyid_veggies'>veggies</span> <span class='op'>=</span> <span class='id identifier rubyid_db'>db</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
    <span class='id identifier rubyid_value'>value</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vegetable</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span> <span class='comment'>#=&gt; [[&quot;apple&quot;, &quot;fruit&quot;], [&quot;pear&quot;, &quot;fruit&quot;]]
</span><span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L373'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 373</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_select(VALUE obj)
{
    VALUE new = rb_ary_new();
    datum key, val;
    DBM *dbm;
    struct dbmdata *dbmp;

    GetDBM2(obj, dbmp, dbm);
    for (key = sdbm_firstkey(dbm); key.dptr; key = sdbm_nextkey(dbm)) {
	VALUE assoc, v;
	val = sdbm_fetch(dbm, key);
	assoc = rb_assoc_new(rb_external_str_new(key.dptr, key.dsize),
			     rb_external_str_new(val.dptr, val.dsize));
	v = rb_yield(assoc);
	if (RTEST(v)) {
	    rb_ary_push(new, assoc);
	}
	GetDBM2(obj, dbmp, dbm);
    }

    return new;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="shift-instance_method">
  <h3 class='signature'>
  #<strong>shift</strong>  &#x21d2; <tt>Array</tt><sup>?</sup> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Removes a key-value pair from the database and returns them as an Array. If
the database is empty, returns <code>nil</code>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L475'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 475</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_shift(VALUE obj)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;
    VALUE keystr, valstr;

    fdbm_modify(obj);
    GetDBM2(obj, dbmp, dbm);
    key = sdbm_firstkey(dbm);
    if (!key.dptr) return Qnil;
    val = sdbm_fetch(dbm, key);
    keystr = rb_external_str_new(key.dptr, key.dsize);
    valstr = rb_external_str_new(val.dptr, val.dsize);
    sdbm_delete(dbm, key);
    if (dbmp-&gt;di_size &gt;= 0) {
	dbmp-&gt;di_size--;
    }

    return rb_assoc_new(keystr, valstr);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="size-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>length</strong>  &#x21d2; <tt>Integer</tt> </span>
    <span class='overload'>#<strong>size</strong>  &#x21d2; <tt>Integer</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#length-instance_method" title="SDBM#length (method)">#length</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="store-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>[]=</strong>(key, value)  &#x21d2; <tt>value</tt> </span>
    <span class='overload'>#<strong>store</strong>(key, value)  &#x21d2; <tt>value</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#%5B%5D%3D-instance_method" title="SDBM#[]= (method)">#[]=</a>.</p>


  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="to_a-instance_method">
  <h3 class='signature'>
  #<strong>to_a</strong>  &#x21d2; <tt>Array</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns a new Array containing each key-value pair in the database.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sdbm</span><span class='tstring_end'>&#39;</span></span>

<span class='const'><a href="" title="SDBM (class)">SDBM</a></span><span class='period'>.</span><span class='id identifier rubyid_open'><a href="#open-class_method" title="SDBM.open (method)">open</a></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>my_database</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_db'>db</span><span class='op'>|</span>
  <span class='id identifier rubyid_db'>db</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>apple</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fruit</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>spinach</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vegetable</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='id identifier rubyid_db'>db</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>  <span class='comment'>#=&gt; [[&quot;apple&quot;, &quot;fruit&quot;], [&quot;spinach&quot;, &quot;vegetable&quot;]]
</span><span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L957'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


957
958
959
960
961
962
963
964
965
966
967
968
969
970
971
972
973
974</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 957</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_to_a(VALUE obj)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;
    VALUE ary;

    GetDBM2(obj, dbmp, dbm);
    ary = rb_ary_new();
    for (key = sdbm_firstkey(dbm); key.dptr; key = sdbm_nextkey(dbm)) {
	val = sdbm_fetch(dbm, key);
	rb_ary_push(ary, rb_assoc_new(rb_external_str_new(key.dptr, key.dsize),
				      rb_external_str_new(val.dptr, val.dsize)));
    }

    return ary;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="to_hash-instance_method">
  <h3 class='signature'>
  #<strong>to_hash</strong>  &#x21d2; <tt>Hash</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns a new Hash containing each key-value pair in the database.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L982'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


982
983
984
985
986
987
988
989
990
991
992
993
994
995
996
997
998
999</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 982</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_to_hash(VALUE obj)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;
    VALUE hash;

    GetDBM2(obj, dbmp, dbm);
    hash = rb_hash_new();
    for (key = sdbm_firstkey(dbm); key.dptr; key = sdbm_nextkey(dbm)) {
	val = sdbm_fetch(dbm, key);
	rb_hash_aset(hash, rb_external_str_new(key.dptr, key.dsize),
		           rb_external_str_new(val.dptr, val.dsize));
    }

    return hash;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="update-instance_method">
  <h3 class='signature'>
  #<strong>update</strong>(pairs)  &#x21d2; <tt>self</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Insert or update key-value pairs.</p>

<p>This method will work with any object which implements an each_pair method,
such as a Hash.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L676'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


676
677
678
679
680
681</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 676</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_update(VALUE obj, VALUE other)
{
    rb_block_call(other, rb_intern(&quot;each_pair&quot;), 0, 0, update_i, obj);
    return obj;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="value?-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>value?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>has_value?</strong>(key)  &#x21d2; <tt>Boolean</tt> </span>
  <span class='aliases'>Also known as: <span class='names'><span>has_value?</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns <code>true</code> if the database contains the given
<code>value</code>.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L920'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


920
921
922
923
924
925
926
927
928
929
930
931
932
933
934
935
936
937
938
939</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 920</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_has_value(VALUE obj, VALUE valstr)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;

    ExportStringValue(valstr);
    val.dptr = RSTRING_PTR(valstr);
    val.dsize = RSTRING_LENINT(valstr);

    GetDBM2(obj, dbmp, dbm);
    for (key = sdbm_firstkey(dbm); key.dptr; key = sdbm_nextkey(dbm)) {
	val = sdbm_fetch(dbm, key);
	if (val.dsize == RSTRING_LENINT(valstr) &amp;&amp;
	    memcmp(val.dptr, RSTRING_PTR(valstr), val.dsize) == 0)
	    return Qtrue;
    }
    return Qfalse;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="values-instance_method">
  <h3 class='signature'>
  #<strong>values</strong>  &#x21d2; <tt>Array</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns a new Array containing the values in the database.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L869'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


869
870
871
872
873
874
875
876
877
878
879
880
881
882
883
884
885</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 869</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_values(VALUE obj)
{
    datum key, val;
    struct dbmdata *dbmp;
    DBM *dbm;
    VALUE ary;

    GetDBM2(obj, dbmp, dbm);
    ary = rb_ary_new();
    for (key = sdbm_firstkey(dbm); key.dptr; key = sdbm_nextkey(dbm)) {
	val = sdbm_fetch(dbm, key);
	rb_ary_push(ary, rb_external_str_new(val.dptr, val.dsize));
    }

    return ary;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="values_at-instance_method">
  <h3 class='signature'>
  #<strong>values_at</strong>(key, ...)  &#x21d2; <tt>Array</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns an Array of values corresponding to the given keys.</p>


  </div>
</div>
<div class="tags">
  
</div>  <span class='link_repo'>[ <a href='https://github.com/ruby/ruby/blob/trunk/ext/sdbm/init.c#L402'>GitHub</a> ]</span>
<div class='source_code h'>
  <pre class='lines_num'>


402
403
404
405
406
407
408
409
410
411
412
413</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/sdbm/init.c', line 402</span></pre>
<pre class='code cpp'>

static VALUE
fsdbm_values_at(int argc, VALUE *argv, VALUE obj)
{
    VALUE new = rb_ary_new2(argc);
    int i;

    for (i=0; i&lt;argc; i++) {
        rb_ary_push(new, fsdbm_fetch(obj, argv[i], Qnil));
    }

    return new;
}
</pre>
  </div>
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.5 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>