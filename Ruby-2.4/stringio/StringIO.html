<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: StringIO &mdash; stringio Ruby-2.4.0 d2016-07-21</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../css/common.css' />

<script type='text/javascript'>
  var pathId = "StringIO",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../index.html'>Home</a> &raquo; 
          <a href='../index.html'>Ruby-2.4.0</a> &raquo; 
          <a href='index.html'>stringio</a> &raquo; 
          <a href='_index.html'>Index (S)</a> &raquo; 
          <span class='title'>StringIO</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: StringIO</h1>

<table class='y_box'>
<colgroup>
  <col class='box_1' />
  <col class='box_2' />
</colgroup>
  <tr>
    <td class='box_1'>Inherits:</td>
    <td class='box_rel'>
      <span class='inheritName'>Data</span>
      <ul class='fullTree'>
        <li>Object</li>
        <li class='next'>Data</li>
        <li class='next'>StringIO</li>
      </ul>
      <a href='#' class='inheritanceTree'>show all</a>
    </td>
  </tr>


  <tr>
    <td class='box_1'>Includes:</td>
    <td>Enumerable, <a href="IO/generic_readable.html" title="IO::generic_readable (module)">IO::generic_readable</a>, <a href="IO/generic_writable.html" title="IO::generic_writable (module)">IO::generic_writable</a>
    </td>
  </tr>



  <tr>
  <td class='box_1'>Defined in:</td>
  <td class='box_rel'><div class='box_min'>
stringio/stringio.c</div>  </td>
  </tr>
</table>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Pseudo I/O on String object.</p>

<p>Commonly used to simulate <code>$stdio</code> or <code>$stderr</code></p>

<h5 id="label-Examples">Examples</h5>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>stringio</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_io'>io</span> <span class='op'>=</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello World</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span> <span class='comment'>#=&gt; &quot;Hello World\n&quot;
</span></code></pre>


  </div>
</div>
<div class="tags">
  
</div>




<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#open-class_method" title="open (class method)">.<strong>open</strong>(string = &quot;&quot;[, mode]) {|strio| ... } </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Equivalent to <a href="#new-class_method" title="StringIO.new (method)">StringIO.new</a> except that when it is called with a block, it
yields with the new instance and closes it, and returns the result which
returned from the block.</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#binmode-instance_method" title="#binmode (instance method)">#<strong>binmode</strong>  &#x21d2; true </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#bytes-instance_method" title="#bytes (instance method)">#<strong>bytes</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>This is a deprecated alias for <a href="#each_byte-instance_method" title="StringIO#each_byte (method)">#each_byte</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#chars-instance_method" title="#chars (instance method)">#<strong>chars</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>This is a deprecated alias for <code>each_char</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#close-instance_method" title="#close (instance method)">#<strong>close</strong>  &#x21d2; nil </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Closes strio.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#close_read-instance_method" title="#close_read (instance method)">#<strong>close_read</strong>  &#x21d2; nil </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Closes the read end of a StringIO.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#close_write-instance_method" title="#close_write (instance method)">#<strong>close_write</strong>  &#x21d2; nil </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Closes the write end of a StringIO.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#closed%3F-instance_method" title="#closed? (instance method)">#<strong>closed?</strong>  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns <code>true</code> if <strong>strio</strong> is completely closed,
<code>false</code> otherwise.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#closed_read%3F-instance_method" title="#closed_read? (instance method)">#<strong>closed_read?</strong>  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns <code>true</code> if <strong>strio</strong> is not readable,
<code>false</code> otherwise.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#closed_write%3F-instance_method" title="#closed_write? (instance method)">#<strong>closed_write?</strong>  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns <code>true</code> if <strong>strio</strong> is not writable,
<code>false</code> otherwise.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#codepoints-instance_method" title="#codepoints (instance method)">#<strong>codepoints</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>This is a deprecated alias for <code>each_codepoint</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#each-instance_method" title="#each (instance method)">#<strong>each</strong>(sep = $/) {|line| ... } &#x21d2; strio </a>
        (also: #each_line)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>See <code>IO#each</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#each_byte-instance_method" title="#each_byte (instance method)">#<strong>each_byte</strong> {|byte| ... } &#x21d2; strio </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>See <code>IO#each_byte</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#each_char-instance_method" title="#each_char (instance method)">#<strong>each_char</strong> {|char| ... } &#x21d2; strio </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>See <code>IO#each_char</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#each_codepoint-instance_method" title="#each_codepoint (instance method)">#<strong>each_codepoint</strong> {|c| ... } &#x21d2; strio </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>See <code>IO#each_codepoint</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#each_line-instance_method" title="#each_line (instance method)">#<strong>each_line</strong>(sep = $/) {|line| ... } &#x21d2; strio </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#each-instance_method" title="StringIO#each (method)">#each</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#eof-instance_method" title="#eof (instance method)">#<strong>eof</strong>  &#x21d2; Boolean </a>
        (also: #eof?)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns true if <strong>strio</strong> is at end of file.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#eof%3F-instance_method" title="#eof? (instance method)">#<strong>eof?</strong>  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#eof-instance_method" title="StringIO#eof (method)">#eof</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#external_encoding-instance_method" title="#external_encoding (instance method)">#<strong>external_encoding</strong>  &#x21d2; Encoding </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the Encoding object that represents the encoding of the file.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#fcntl-instance_method" title="#fcntl (instance method)">#<strong>fcntl</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#fileno-instance_method" title="#fileno (instance method)">#<strong>fileno</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#flush-instance_method" title="#flush (instance method)">#<strong>flush</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#fsync-instance_method" title="#fsync (instance method)">#<strong>fsync</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#getbyte-instance_method" title="#getbyte (instance method)">#<strong>getbyte</strong>  &#x21d2; Fixnum<sup>?</sup> </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>See <code>IO#getbyte</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#getc-instance_method" title="#getc (instance method)">#<strong>getc</strong>  &#x21d2; String<sup>?</sup> </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>See <code>IO#getc</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#gets-instance_method" title="#gets (instance method)">#<strong>gets</strong>(sep = $/)  &#x21d2; String<sup>?</sup> </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>See <code>IO#gets</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#initialize-instance_method" title="#new (instance method)">#<strong>new</strong>(string = &quot;&quot;[, mode])  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Creates new StringIO instance from with <em>string</em> and <em>mode</em>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#internal_encoding-instance_method" title="#internal_encoding (instance method)">#<strong>internal_encoding</strong>  &#x21d2; Encoding </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the Encoding of the internal string if conversion is specified.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#isatty-instance_method" title="#isatty (instance method)">#<strong>isatty</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#length-instance_method" title="#length (instance method)">#<strong>length</strong>  &#x21d2; Integer </a>
        (also: #size)
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the size of the buffer string.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#lineno-instance_method" title="#lineno (instance method)">#<strong>lineno</strong>  &#x21d2; Integer </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the current line number in <strong>strio</strong>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#lineno%3D-instance_method" title="#lineno= (instance method)">#<strong>lineno=</strong>(integer)  &#x21d2; Integer </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Manually sets the current line number to the given value.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#lines-instance_method" title="#lines (instance method)">#<strong>lines</strong>(*args)  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>This is a deprecated alias for <code>each_line</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#pid-instance_method" title="#pid (instance method)">#<strong>pid</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#pos-instance_method" title="#pos (instance method)">#<strong>pos</strong>  &#x21d2; Integer </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns the current offset (in bytes) of <strong>strio</strong>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#pos%3D-instance_method" title="#pos= (instance method)">#<strong>pos=</strong>(integer)  &#x21d2; Integer </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Seeks to the given position (in bytes) in <strong>strio</strong>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#putc-instance_method" title="#putc (instance method)">#<strong>putc</strong>(obj)  &#x21d2; Object </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>See <code>IO#putc</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#read-instance_method" title="#read (instance method)">#<strong>read</strong>([length [, outbuf]])  &#x21d2; String, ... </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>See <code>IO#read</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#readlines-instance_method" title="#readlines (instance method)">#<strong>readlines</strong>(sep = $/)  &#x21d2; Array </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>See <code>IO#readlines</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#reopen-instance_method" title="#reopen (instance method)">#<strong>reopen</strong>(other_StrIO)  &#x21d2; strio </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Reinitializes <strong>strio</strong> with the given <em>other_StrIO</em> or
<em>string</em> and <em>mode</em> (see <a href="#new-class_method" title="StringIO.new (method)">StringIO.new</a>).</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#rewind-instance_method" title="#rewind (instance method)">#<strong>rewind</strong>  &#x21d2; 0 </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Positions <strong>strio</strong> to the beginning of input, resetting
<code>lineno</code> to zero.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#seek-instance_method" title="#seek (instance method)">#<strong>seek</strong>(amount, whence = SEEK_SET)  &#x21d2; 0 </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Seeks to a given offset <em>amount</em> in the stream according to the
value of <em>whence</em> (see <code>IO#seek</code>).</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#set_encoding-instance_method" title="#set_encoding (instance method)">#<strong>set_encoding</strong>(ext_enc, [int_enc[, opt]])  &#x21d2; strio </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Specify the encoding of the StringIO as <em>ext_enc</em>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#size-instance_method" title="#size (instance method)">#<strong>size</strong>  &#x21d2; Integer </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Alias for <a href="#length-instance_method" title="StringIO#length (method)">#length</a>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#string-instance_method" title="#string (instance method)">#<strong>string</strong>  &#x21d2; String </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns underlying String object, the subject of IO.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#string%3D-instance_method" title="#string= (instance method)">#<strong>string=</strong>(string)  &#x21d2; String </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Changes underlying String object, the subject of IO.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#sync-instance_method" title="#sync (instance method)">#<strong>sync</strong>  &#x21d2; true </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Returns <code>true</code> always.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#sync%3D-instance_method" title="#sync= (instance method)">#<strong>sync=</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#tell-instance_method" title="#tell (instance method)">#<strong>tell</strong>  </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#truncate-instance_method" title="#truncate (instance method)">#<strong>truncate</strong>(integer)  &#x21d2; 0 </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Truncates the buffer string to at most <em>integer</em> bytes.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#tty%3F-instance_method" title="#tty? (instance method)">#<strong>tty?</strong>  &#x21d2; Boolean </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#ungetbyte-instance_method" title="#ungetbyte (instance method)">#<strong>ungetbyte</strong>(fixnum)  &#x21d2; nil </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>See <code>IO#ungetbyte</code></p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#ungetc-instance_method" title="#ungetc (instance method)">#<strong>ungetc</strong>(string)  &#x21d2; nil </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Pushes back one character (passed as a parameter) onto
<strong>strio</strong> such that a subsequent buffered read will return it.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#write-instance_method" title="#write (instance method)">#<strong>write</strong>(string)  &#x21d2; Integer </a>
      </span>
      <span class='summary_desc'>
        <div class='inline'>
<p>Appends the given string to the underlying buffer string of
<strong>strio</strong>.</p>
</div>
      </span>
    </li>
  </ul>



  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <a href="IO/generic_readable.html" title="IO::generic_readable (module)">IO::generic_readable</a></h3>
  <p class="inherited"><a href="IO/generic_readable.html#read_nonblock-instance_method" title="IO::generic_readable#read_nonblock (method)">#read_nonblock</a>, <a href="IO/generic_readable.html#readbyte-instance_method" title="IO::generic_readable#readbyte (method)">#readbyte</a>, <a href="IO/generic_readable.html#readchar-instance_method" title="IO::generic_readable#readchar (method)">#readchar</a>, <a href="IO/generic_readable.html#readline-instance_method" title="IO::generic_readable#readline (method)">#readline</a>, <a href="IO/generic_readable.html#sysread-instance_method" title="IO::generic_readable#sysread (method)">#sysread</a></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <a href="IO/generic_writable.html" title="IO::generic_writable (module)">IO::generic_writable</a></h3>
  <p class="inherited"><a href="IO/generic_writable.html#%3C%3C-instance_method" title="IO::generic_writable#&lt;&lt; (method)">#<<</a>, <a href="IO/generic_writable.html#print-instance_method" title="IO::generic_writable#print (method)">#print</a>, <a href="IO/generic_writable.html#printf-instance_method" title="IO::generic_writable#printf (method)">#printf</a>, <a href="IO/generic_writable.html#puts-instance_method" title="IO::generic_writable#puts (method)">#puts</a>, <a href="IO/generic_writable.html#syswrite-instance_method" title="IO::generic_writable#syswrite (method)">#syswrite</a>, <a href="IO/generic_writable.html#write_nonblock-instance_method" title="IO::generic_writable#write_nonblock (method)">#write_nonblock</a></p>

  <h2 class='y_details'>Class Method Details</h2>
  <section class='method_details first' id="open-class_method">
  <h3 class='signature first'>
  .<strong>open</strong>(string = &quot;&quot;[, mode]) {|strio| ... } 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Equivalent to <a href="#new-class_method" title="StringIO.new (method)">new</a> except that when it is called with a block, it
yields with the new instance and closes it, and returns the result which
returned from the block.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


244
245
246
247
248
249
250</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 244</span>

static VALUE
strio_s_open(int argc, VALUE *argv, VALUE klass)
{
    VALUE obj = rb_class_new_instance(argc, argv, klass);
    if (!rb_block_given_p()) return obj;
    return rb_ensure(rb_yield, obj, strio_finalize, obj);
}
</pre>
  </div>
</div>
</section>
<h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="binmode-instance_method">
  <h3 class='signature first'>
  #<strong>binmode</strong>  &#x21d2; <tt>true</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


517
518
519
520
521
522
523
524
525
526
527
528</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 517</span>

static VALUE
strio_binmode(VALUE self)
{
    struct StringIO *ptr = StringIO(self);
    rb_encoding *enc = rb_ascii8bit_encoding();

    ptr-&gt;enc = enc;
    if (WRITABLE(self)) {
	rb_enc_associate(ptr-&gt;string, enc);
    }
    return self;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="bytes-instance_method">
  <h3 class='signature'>
  #<strong>bytes</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>This is a deprecated alias for <a href="#each_byte-instance_method" title="StringIO#each_byte (method)">#each_byte</a>.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


680
681
682
683
684
685
686
687</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 680</span>

static VALUE
strio_bytes(VALUE self)
{
    rb_warn(&quot;StringIO#bytes is deprecated; use #each_byte instead&quot;);
    if (!rb_block_given_p())
	return rb_enumeratorize(self, ID2SYM(rb_intern(&quot;each_byte&quot;)), 0, 0);
    return strio_each_byte(self);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="chars-instance_method">
  <h3 class='signature'>
  #<strong>chars</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>This is a deprecated alias for <code>each_char</code>.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


899
900
901
902
903
904
905
906</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 899</span>

static VALUE
strio_chars(VALUE self)
{
    rb_warn(&quot;StringIO#chars is deprecated; use #each_char instead&quot;);
    if (!rb_block_given_p())
	return rb_enumeratorize(self, ID2SYM(rb_intern(&quot;each_char&quot;)), 0, 0);
    return strio_each_char(self);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="close-instance_method">
  <h3 class='signature'>
  #<strong>close</strong>  &#x21d2; <tt>nil</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Closes strio.  The <strong>strio</strong> is unavailable for any further
data operations; an <code>IOError</code> is raised if such an attempt is made.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


365
366
367
368
369
370
371</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 365</span>

static VALUE
strio_close(VALUE self)
{
    StringIO(self);
    RBASIC(self)-&gt;flags &amp;= ~STRIO_READWRITE;
    return Qnil;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="close_read-instance_method">
  <h3 class='signature'>
  #<strong>close_read</strong>  &#x21d2; <tt>nil</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Closes the read end of a StringIO.  Will raise an <code>IOError</code> if the
<strong>strio</strong> is not readable.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


380
381
382
383
384
385
386
387
388
389</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 380</span>

static VALUE
strio_close_read(VALUE self)
{
    struct StringIO *ptr = StringIO(self);
    if (!(ptr-&gt;flags &amp; FMODE_READABLE)) {
	rb_raise(rb_eIOError, &quot;closing non-duplex IO for reading&quot;);
    }
    RBASIC(self)-&gt;flags &amp;= ~STRIO_READABLE;
    return Qnil;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="close_write-instance_method">
  <h3 class='signature'>
  #<strong>close_write</strong>  &#x21d2; <tt>nil</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Closes the write end of a StringIO.  Will raise an  <code>IOError</code> if the
<strong>strio</strong> is not writeable.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


398
399
400
401
402
403
404
405
406
407</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 398</span>

static VALUE
strio_close_write(VALUE self)
{
    struct StringIO *ptr = StringIO(self);
    if (!(ptr-&gt;flags &amp; FMODE_WRITABLE)) {
	rb_raise(rb_eIOError, &quot;closing non-duplex IO for writing&quot;);
    }
    RBASIC(self)-&gt;flags &amp;= ~STRIO_WRITABLE;
    return Qnil;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="closed?-instance_method">
  <h3 class='signature'>
  #<strong>closed?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns <code>true</code> if <strong>strio</strong> is completely closed,
<code>false</code> otherwise.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


415
416
417
418
419
420
421</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 415</span>

static VALUE
strio_closed(VALUE self)
{
    StringIO(self);
    if (!CLOSED(self)) return Qfalse;
    return Qtrue;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="closed_read?-instance_method">
  <h3 class='signature'>
  #<strong>closed_read?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns <code>true</code> if <strong>strio</strong> is not readable,
<code>false</code> otherwise.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


429
430
431
432
433
434
435</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 429</span>

static VALUE
strio_closed_read(VALUE self)
{
    StringIO(self);
    if (READABLE(self)) return Qfalse;
    return Qtrue;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="closed_write?-instance_method">
  <h3 class='signature'>
  #<strong>closed_write?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns <code>true</code> if <strong>strio</strong> is not writable,
<code>false</code> otherwise.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


443
444
445
446
447
448
449</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 443</span>

static VALUE
strio_closed_write(VALUE self)
{
    StringIO(self);
    if (WRITABLE(self)) return Qfalse;
    return Qtrue;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="codepoints-instance_method">
  <h3 class='signature'>
  #<strong>codepoints</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>This is a deprecated alias for <code>each_codepoint</code>.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


943
944
945
946
947
948
949
950</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 943</span>

static VALUE
strio_codepoints(VALUE self)
{
    rb_warn(&quot;StringIO#codepoints is deprecated; use #each_codepoint instead&quot;);
    if (!rb_block_given_p())
	return rb_enumeratorize(self, ID2SYM(rb_intern(&quot;each_codepoint&quot;)), 0, 0);
    return strio_each_codepoint(self);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="each-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>each</strong>(sep = $/) {|line| ... } &#x21d2; <tt>strio</tt> </span>
    <span class='overload'>#<strong>each</strong>(limit) {|line| ... } &#x21d2; <tt>strio</tt> </span>
    <span class='overload'>#<strong>each</strong>(sep, limit) {|line| ... } &#x21d2; <tt>strio</tt> </span>
    <span class='overload'>#<strong>each</strong>(...)  &#x21d2; <tt>Enumerator</tt> </span>
    <span class='overload'>#<strong>each_line</strong>(sep = $/) {|line| ... } &#x21d2; <tt>strio</tt> </span>
    <span class='overload'>#<strong>each_line</strong>(limit) {|line| ... } &#x21d2; <tt>strio</tt> </span>
    <span class='overload'>#<strong>each_line</strong>(sep, limit) {|line| ... } &#x21d2; <tt>strio</tt> </span>
    <span class='overload'>#<strong>each_line</strong>(...)  &#x21d2; <tt>Enumerator</tt> </span>
  <span class='aliases'>Also known as: <span class='names'><span>each_line</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>See <code>IO#each</code>.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


1145
1146
1147
1148
1149
1150
1151
1152
1153
1154
1155
1156
1157
1158
1159
1160
1161
1162</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 1145</span>

static VALUE
strio_each(int argc, VALUE *argv, VALUE self)
{
    VALUE line;
    struct getline_arg arg;

    StringIO(self);
    RETURN_ENUMERATOR(self, argc, argv);

    if (prepare_getline_args(&amp;arg, argc, argv)-&gt;limit == 0) {
	rb_raise(rb_eArgError, &quot;invalid limit: 0 for each_line&quot;);
    }

    while (!NIL_P(line = strio_getline(&amp;arg, readable(self)))) {
	rb_yield(line);
    }
    return self;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="each_byte-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>each_byte</strong> {|byte| ... } &#x21d2; <tt>strio</tt> </span>
    <span class='overload'>#<strong>each_byte</strong>  &#x21d2; <tt>Enumerator</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>See <code>IO#each_byte</code>.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


663
664
665
666
667
668
669
670
671
672
673
674
675</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 663</span>

static VALUE
strio_each_byte(VALUE self)
{
    struct StringIO *ptr = readable(self);

    RETURN_ENUMERATOR(self, 0, 0);

    while (ptr-&gt;pos &lt; RSTRING_LEN(ptr-&gt;string)) {
	char c = RSTRING_PTR(ptr-&gt;string)[ptr-&gt;pos++];
	rb_yield(CHR2FIX(c));
    }
    return self;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="each_char-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>each_char</strong> {|char| ... } &#x21d2; <tt>strio</tt> </span>
    <span class='overload'>#<strong>each_char</strong>  &#x21d2; <tt>Enumerator</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>See <code>IO#each_char</code>.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


883
884
885
886
887
888
889
890
891
892
893
894</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 883</span>

static VALUE
strio_each_char(VALUE self)
{
    VALUE c;

    RETURN_ENUMERATOR(self, 0, 0);

    while (!NIL_P(c = strio_getc(self))) {
	rb_yield(c);
    }
    return self;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="each_codepoint-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>each_codepoint</strong> {|c| ... } &#x21d2; <tt>strio</tt> </span>
    <span class='overload'>#<strong>each_codepoint</strong>  &#x21d2; <tt>Enumerator</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>See <code>IO#each_codepoint</code>.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


915
916
917
918
919
920
921
922
923
924
925
926
927
928
929
930
931
932
933
934
935
936
937
938</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 915</span>

static VALUE
strio_each_codepoint(VALUE self)
{
    struct StringIO *ptr;
    rb_encoding *enc;
    unsigned int c;
    int n;

    RETURN_ENUMERATOR(self, 0, 0);

    ptr = readable(self);
    enc = get_enc(ptr);
    for (;;) {
	if (ptr-&gt;pos &gt;= RSTRING_LEN(ptr-&gt;string)) {
	    return self;
	}

	c = rb_enc_codepoint_len(RSTRING_PTR(ptr-&gt;string)+ptr-&gt;pos,
				 RSTRING_END(ptr-&gt;string), &amp;n, enc);
	rb_yield(UINT2NUM(c));
	ptr-&gt;pos += n;
    }
    return self;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="each_line-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>each</strong>(sep = $/) {|line| ... } &#x21d2; <tt>strio</tt> </span>
    <span class='overload'>#<strong>each</strong>(limit) {|line| ... } &#x21d2; <tt>strio</tt> </span>
    <span class='overload'>#<strong>each</strong>(sep, limit) {|line| ... } &#x21d2; <tt>strio</tt> </span>
    <span class='overload'>#<strong>each</strong>(...)  &#x21d2; <tt>Enumerator</tt> </span>
    <span class='overload'>#<strong>each_line</strong>(sep = $/) {|line| ... } &#x21d2; <tt>strio</tt> </span>
    <span class='overload'>#<strong>each_line</strong>(limit) {|line| ... } &#x21d2; <tt>strio</tt> </span>
    <span class='overload'>#<strong>each_line</strong>(sep, limit) {|line| ... } &#x21d2; <tt>strio</tt> </span>
    <span class='overload'>#<strong>each_line</strong>(...)  &#x21d2; <tt>Enumerator</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#each-instance_method" title="StringIO#each (method)">#each</a>.</p>


  </div>
</div>

</section>
  <section class='method_details' id="eof-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>eof</strong>  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>eof?</strong>  &#x21d2; <tt>Boolean</tt> </span>
  <span class='aliases'>Also known as: <span class='names'><span>eof?</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns true if <strong>strio</strong> is at end of file. The stringio must
be opened for reading or an <code>IOError</code> will be raised.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


459
460
461
462
463
464
465</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 459</span>

static VALUE
strio_eof(VALUE self)
{
    struct StringIO *ptr = readable(self);
    if (ptr-&gt;pos &lt; RSTRING_LEN(ptr-&gt;string)) return Qfalse;
    return Qtrue;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="eof?-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>eof</strong>  &#x21d2; <tt>Boolean</tt> </span>
    <span class='overload'>#<strong>eof?</strong>  &#x21d2; <tt>Boolean</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#eof-instance_method" title="StringIO#eof (method)">#eof</a>.</p>


  </div>
</div>

</section>
  <section class='method_details' id="external_encoding-instance_method">
  <h3 class='signature'>
  #<strong>external_encoding</strong>  &#x21d2; <tt>Encoding</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the Encoding object that represents the encoding of the file. If
strio is write mode and no encoding is specified, returns <code>nil</code>.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


1494
1495
1496
1497
1498
1499</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 1494</span>

static VALUE
strio_external_encoding(VALUE self)
{
    struct StringIO *ptr = StringIO(self);
    return rb_enc_from_encoding(get_enc(ptr));
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="fcntl-instance_method">
  <h3 class='signature'>
  #<strong>fcntl</strong>  
</h3>

</section>
  <section class='method_details' id="fileno-instance_method">
  <h3 class='signature'>
  #<strong>fileno</strong>  
</h3>

</section>
  <section class='method_details' id="flush-instance_method">
  <h3 class='signature'>
  #<strong>flush</strong>  
</h3>

</section>
  <section class='method_details' id="fsync-instance_method">
  <h3 class='signature'>
  #<strong>fsync</strong>  
</h3>

</section>
  <section class='method_details' id="getbyte-instance_method">
  <h3 class='signature'>
  #<strong>getbyte</strong>  &#x21d2; <tt>Fixnum</tt><sup>?</sup> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>See <code>IO#getbyte</code>.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


720
721
722
723
724
725
726
727
728
729
730</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 720</span>

static VALUE
strio_getbyte(VALUE self)
{
    struct StringIO *ptr = readable(self);
    int c;
    if (ptr-&gt;pos &gt;= RSTRING_LEN(ptr-&gt;string)) {
	return Qnil;
    }
    c = RSTRING_PTR(ptr-&gt;string)[ptr-&gt;pos++];
    return CHR2FIX(c);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="getc-instance_method">
  <h3 class='signature'>
  #<strong>getc</strong>  &#x21d2; <tt>String</tt><sup>?</sup> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>See <code>IO#getc</code>.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


695
696
697
698
699
700
701
702
703
704
705
706
707
708
709
710
711
712</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 695</span>

static VALUE
strio_getc(VALUE self)
{
    struct StringIO *ptr = readable(self);
    rb_encoding *enc = get_enc(ptr);
    VALUE str = ptr-&gt;string;
    long pos = ptr-&gt;pos;
    int len;
    char *p;

    if (pos &gt;= RSTRING_LEN(str)) {
	return Qnil;
    }
    p = RSTRING_PTR(str)+pos;
    len = rb_enc_mbclen(p, RSTRING_END(str), enc);
    ptr-&gt;pos += len;
    return enc_subseq(str, pos, len, enc);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="gets-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>gets</strong>(sep = $/)  &#x21d2; <tt>String</tt><sup>?</sup> </span>
    <span class='overload'>#<strong>gets</strong>(limit)  &#x21d2; <tt>String</tt><sup>?</sup> </span>
    <span class='overload'>#<strong>gets</strong>(sep, limit)  &#x21d2; <tt>String</tt><sup>?</sup> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>See <code>IO#gets</code>.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


1100
1101
1102
1103
1104
1105
1106
1107
1108
1109
1110
1111
1112
1113</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 1100</span>

static VALUE
strio_gets(int argc, VALUE *argv, VALUE self)
{
    struct getline_arg arg;
    VALUE str;

    if (prepare_getline_args(&amp;arg, argc, argv)-&gt;limit == 0) {
	return rb_str_new(0, 0);
    }

    str = strio_getline(&amp;arg, readable(self));
    rb_lastline_set(str);
    return str;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="initialize-instance_method">
  <h3 class='signature'>
  #<strong>new</strong>(string = &quot;&quot;[, mode])  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates new StringIO instance from with <em>string</em> and <em>mode</em>.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


173
174
175
176
177
178
179
180
181
182
183</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 173</span>

static VALUE
strio_initialize(int argc, VALUE *argv, VALUE self)
{
    struct StringIO *ptr = check_strio(self);

    if (!ptr) {
	DATA_PTR(self) = ptr = strio_alloc();
    }
    rb_call_super(0, 0);
    return strio_init(argc, argv, ptr, self);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="internal_encoding-instance_method">
  <h3 class='signature'>
  #<strong>internal_encoding</strong>  &#x21d2; <tt>Encoding</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the Encoding of the internal string if conversion is specified. 
Otherwise returns nil.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


1509
1510
1511
1512
1513</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 1509</span>

static VALUE
strio_internal_encoding(VALUE self)
{
     return Qnil;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="isatty-instance_method">
  <h3 class='signature'>
  #<strong>isatty</strong>  
</h3>

</section>
  <section class='method_details' id="length-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>length</strong>  &#x21d2; <tt>Integer</tt> </span>
    <span class='overload'>#<strong>size</strong>  &#x21d2; <tt>Integer</tt> </span>
  <span class='aliases'>Also known as: <span class='names'><span>size</span></span>
  </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the size of the buffer string.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


1453
1454
1455
1456
1457
1458
1459
1460
1461</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 1453</span>

static VALUE
strio_size(VALUE self)
{
    VALUE string = StringIO(self)-&gt;string;
    if (NIL_P(string)) {
	rb_raise(rb_eIOError, &quot;not opened&quot;);
    }
    return ULONG2NUM(RSTRING_LEN(string));
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="lineno-instance_method">
  <h3 class='signature'>
  #<strong>lineno</strong>  &#x21d2; <tt>Integer</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the current line number in <strong>strio</strong>. The stringio
must be opened for reading. <code>lineno</code> counts the number of times 
<code>gets</code> is called, rather than the number of newlines 
encountered. The two values will differ if <code>gets</code> is  called
with a separator other than newline.  See also the  <code>$.</code>
variable.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


497
498
499
500
501</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 497</span>

static VALUE
strio_get_lineno(VALUE self)
{
    return LONG2NUM(StringIO(self)-&gt;lineno);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="lineno=-instance_method">
  <h3 class='signature'>
  #<strong>lineno=</strong>(integer)  &#x21d2; <tt>Integer</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Manually sets the current line number to the given value. <code>$.</code>
is updated only on the next read.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


510
511
512
513
514
515</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 510</span>

static VALUE
strio_set_lineno(VALUE self, VALUE lineno)
{
    StringIO(self)-&gt;lineno = NUM2LONG(lineno);
    return lineno;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="lines-instance_method">
  <h3 class='signature'>
  #<strong>lines</strong>(*args)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>This is a deprecated alias for <code>each_line</code>.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


1167
1168
1169
1170
1171
1172
1173
1174</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 1167</span>

static VALUE
strio_lines(int argc, VALUE *argv, VALUE self)
{
    rb_warn(&quot;StringIO#lines is deprecated; use #each_line instead&quot;);
    if (!rb_block_given_p())
	return rb_enumeratorize(self, ID2SYM(rb_intern(&quot;each_line&quot;)), argc, argv);
    return strio_each(argc, argv, self);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="pid-instance_method">
  <h3 class='signature'>
  #<strong>pid</strong>  
</h3>

</section>
  <section class='method_details' id="pos-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>pos</strong>  &#x21d2; <tt>Integer</tt> </span>
    <span class='overload'>#<strong>tell</strong>  &#x21d2; <tt>Integer</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns the current offset (in bytes) of <strong>strio</strong>.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


561
562
563
564
565</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 561</span>

static VALUE
strio_get_pos(VALUE self)
{
    return LONG2NUM(StringIO(self)-&gt;pos);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="pos=-instance_method">
  <h3 class='signature'>
  #<strong>pos=</strong>(integer)  &#x21d2; <tt>Integer</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Seeks to the given position (in bytes) in <strong>strio</strong>.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


573
574
575
576
577
578
579
580
581
582
583</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 573</span>

static VALUE
strio_set_pos(VALUE self, VALUE pos)
{
    struct StringIO *ptr = StringIO(self);
    long p = NUM2LONG(pos);
    if (p &lt; 0) {
	error_inval(0);
    }
    ptr-&gt;pos = p;
    return pos;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="putc-instance_method">
  <h3 class='signature'>
  #<strong>putc</strong>(obj)  &#x21d2; <tt>Object</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>See <code>IO#putc</code>.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


1285
1286
1287
1288
1289
1290
1291
1292
1293
1294
1295
1296
1297
1298
1299
1300
1301</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 1285</span>

static VALUE
strio_putc(VALUE self, VALUE ch)
{
    struct StringIO *ptr = writable(self);
    VALUE str;

    check_modifiable(ptr);
    if (RB_TYPE_P(ch, T_STRING)) {
	str = rb_str_substr(ch, 0, 1);
    }
    else {
	char c = NUM2CHR(ch);
	str = rb_str_new(&amp;c, 1);
    }
    strio_write(self, str);
    return ch;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="read-instance_method">
  <h3 class='signature'>
  #<strong>read</strong>([length [, outbuf]])  &#x21d2; <tt>String</tt>, ... 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>See <code>IO#read</code>.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


1317
1318
1319
1320
1321
1322
1323
1324
1325
1326
1327
1328
1329
1330
1331
1332
1333
1334
1335
1336
1337
1338
1339
1340
1341
1342
1343
1344
1345
1346
1347
1348
1349
1350
1351
1352
1353
1354
1355
1356
1357
1358
1359
1360
1361
1362
1363
1364
1365
1366
1367
1368
1369
1370
1371
1372
1373
1374
1375
1376
1377
1378
1379</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 1317</span>

static VALUE
strio_read(int argc, VALUE *argv, VALUE self)
{
    struct StringIO *ptr = readable(self);
    VALUE str = Qnil;
    long len;
    int binary = 0;

    rb_check_arity(argc, 0, 2);
    switch (argc) {
      case 2:
	str = argv[1];
	if (!NIL_P(str)) {
	    StringValue(str);
	    rb_str_modify(str);
	}
      case 1:
	if (!NIL_P(argv[0])) {
	    len = NUM2LONG(argv[0]);
	    if (len &lt; 0) {
		rb_raise(rb_eArgError, &quot;negative length %ld given&quot;, len);
	    }
	    if (len &gt; 0 &amp;&amp; ptr-&gt;pos &gt;= RSTRING_LEN(ptr-&gt;string)) {
		if (!NIL_P(str)) rb_str_resize(str, 0);
		return Qnil;
	    }
	    binary = 1;
	    break;
	}
	/* fall through */
      case 0:
	len = RSTRING_LEN(ptr-&gt;string);
	if (len &lt;= ptr-&gt;pos) {
	    if (NIL_P(str)) {
		str = rb_str_new(0, 0);
	    }
	    else {
		rb_str_resize(str, 0);
	    }
	    return str;
	}
	else {
	    len -= ptr-&gt;pos;
	}
	break;
    }
    if (NIL_P(str)) {
	str = strio_substr(ptr, ptr-&gt;pos, len);
	if (binary) rb_enc_associate(str, rb_ascii8bit_encoding());
    }
    else {
	long rest = RSTRING_LEN(ptr-&gt;string) - ptr-&gt;pos;
	if (len &gt; rest) len = rest;
	rb_str_resize(str, len);
	MEMCPY(RSTRING_PTR(str), RSTRING_PTR(ptr-&gt;string) + ptr-&gt;pos, char, len);
	if (binary)
	    rb_enc_associate(str, rb_ascii8bit_encoding());
	else
	    rb_enc_copy(str, ptr-&gt;string);
    }
    ptr-&gt;pos += RSTRING_LEN(str);
    return str;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="readlines-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>readlines</strong>(sep = $/)  &#x21d2; <tt>Array</tt> </span>
    <span class='overload'>#<strong>readlines</strong>(limit)  &#x21d2; <tt>Array</tt> </span>
    <span class='overload'>#<strong>readlines</strong>(sep, limit)  &#x21d2; <tt>Array</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>See <code>IO#readlines</code>.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


1184
1185
1186
1187
1188
1189
1190
1191
1192
1193
1194
1195
1196
1197
1198
1199
1200</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 1184</span>

static VALUE
strio_readlines(int argc, VALUE *argv, VALUE self)
{
    VALUE ary, line;
    struct getline_arg arg;

    StringIO(self);
    ary = rb_ary_new();
    if (prepare_getline_args(&amp;arg, argc, argv)-&gt;limit == 0) {
	rb_raise(rb_eArgError, &quot;invalid limit: 0 for readlines&quot;);
    }

    while (!NIL_P(line = strio_getline(&amp;arg, readable(self)))) {
	rb_ary_push(ary, line);
    }
    return ary;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="reopen-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>reopen</strong>(other_StrIO)  &#x21d2; <tt>strio</tt> </span>
    <span class='overload'>#<strong>reopen</strong>(string, mode)  &#x21d2; <tt>strio</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Reinitializes <strong>strio</strong> with the given <em>other_StrIO</em> or
<em>string</em> and <em>mode</em> (see <a href="#new-class_method" title="StringIO.new (method)">new</a>).</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


544
545
546
547
548
549
550
551
552</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 544</span>

static VALUE
strio_reopen(int argc, VALUE *argv, VALUE self)
{
    rb_io_taint_check(self);
    if (argc == 1 &amp;&amp; !RB_TYPE_P(*argv, T_STRING)) {
	return strio_copy(self, *argv);
    }
    return strio_init(argc, argv, StringIO(self), self);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="rewind-instance_method">
  <h3 class='signature'>
  #<strong>rewind</strong>  &#x21d2; <tt>0</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Positions <strong>strio</strong> to the beginning of input, resetting
<code>lineno</code> to zero.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


592
593
594
595
596
597
598
599</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 592</span>

static VALUE
strio_rewind(VALUE self)
{
    struct StringIO *ptr = StringIO(self);
    ptr-&gt;pos = 0;
    ptr-&gt;lineno = 0;
    return INT2FIX(0);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="seek-instance_method">
  <h3 class='signature'>
  #<strong>seek</strong>(amount, whence = SEEK_SET)  &#x21d2; <tt>0</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Seeks to a given offset <em>amount</em> in the stream according to the
value of <em>whence</em> (see <code>IO#seek</code>).</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 608</span>

static VALUE
strio_seek(int argc, VALUE *argv, VALUE self)
{
    VALUE whence;
    struct StringIO *ptr = StringIO(self);
    long offset;

    rb_scan_args(argc, argv, &quot;11&quot;, NULL, &amp;whence);
    offset = NUM2LONG(argv[0]);
    if (CLOSED(self)) {
	rb_raise(rb_eIOError, &quot;closed stream&quot;);
    }
    switch (NIL_P(whence) ? 0 : NUM2LONG(whence)) {
      case 0:
	break;
      case 1:
	offset += ptr-&gt;pos;
	break;
      case 2:
	offset += RSTRING_LEN(ptr-&gt;string);
	break;
      default:
	error_inval(&quot;invalid whence&quot;);
    }
    if (offset &lt; 0) {
	error_inval(0);
    }
    ptr-&gt;pos = offset;
    return INT2FIX(0);
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="set_encoding-instance_method">
  <h3 class='signature'>
  #<strong>set_encoding</strong>(ext_enc, [int_enc[, opt]])  &#x21d2; <tt>strio</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Specify the encoding of the StringIO as <em>ext_enc</em>. Use the default
external encoding if <em>ext_enc</em> is nil. 2nd argument <em>int_enc</em>
and optional hash <em>opt</em> argument are ignored; they are for API
compatibility to IO.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


1525
1526
1527
1528
1529
1530
1531
1532
1533
1534
1535
1536
1537
1538
1539
1540
1541
1542
1543
1544
1545
1546</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 1525</span>

static VALUE
strio_set_encoding(int argc, VALUE *argv, VALUE self)
{
    rb_encoding* enc;
    struct StringIO *ptr = StringIO(self);
    VALUE ext_enc, int_enc, opt;

    argc = rb_scan_args(argc, argv, &quot;11:&quot;, &amp;ext_enc, &amp;int_enc, &amp;opt);

    if (NIL_P(ext_enc)) {
	enc = rb_default_external_encoding();
    }
    else {
	enc = rb_to_encoding(ext_enc);
    }
    ptr-&gt;enc = enc;
    if (WRITABLE(self)) {
	rb_enc_associate(ptr-&gt;string, enc);
    }

    return self;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="size-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>length</strong>  &#x21d2; <tt>Integer</tt> </span>
    <span class='overload'>#<strong>size</strong>  &#x21d2; <tt>Integer</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Alias for <a href="#length-instance_method" title="StringIO#length (method)">#length</a>.</p>


  </div>
</div>

</section>
  <section class='method_details' id="string-instance_method">
  <h3 class='signature'>
  #<strong>string</strong>  &#x21d2; <tt>String</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns underlying String object, the subject of IO.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


332
333
334
335
336</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 332</span>

static VALUE
strio_get_string(VALUE self)
{
    return StringIO(self)-&gt;string;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="string=-instance_method">
  <h3 class='signature'>
  #<strong>string=</strong>(string)  &#x21d2; <tt>String</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Changes underlying String object, the subject of IO.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


344
345
346
347
348
349
350
351
352
353
354
355
356</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 344</span>

static VALUE
strio_set_string(VALUE self, VALUE string)
{
    struct StringIO *ptr = StringIO(self);

    rb_io_taint_check(self);
    ptr-&gt;flags &amp;= ~FMODE_READWRITE;
    StringValue(string);
    ptr-&gt;flags = OBJ_FROZEN(string) ? FMODE_READABLE : FMODE_READWRITE;
    ptr-&gt;pos = 0;
    ptr-&gt;lineno = 0;
    return ptr-&gt;string = string;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="sync-instance_method">
  <h3 class='signature'>
  #<strong>sync</strong>  &#x21d2; <tt>true</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Returns <code>true</code> always.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


645
646
647
648
649
650</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 645</span>

static VALUE
strio_get_sync(VALUE self)
{
    StringIO(self);
    return Qtrue;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="sync=-instance_method">
  <h3 class='signature'>
  #<strong>sync=</strong>  
</h3>

</section>
  <section class='method_details' id="tell-instance_method">
  <h3 class='signature'>
  #<strong>tell</strong>  
</h3>

</section>
  <section class='method_details' id="truncate-instance_method">
  <h3 class='signature'>
  #<strong>truncate</strong>(integer)  &#x21d2; <tt>0</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Truncates the buffer string to at most <em>integer</em> bytes. The
<strong>strio</strong> must be opened for writing.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


1470
1471
1472
1473
1474
1475
1476
1477
1478
1479
1480
1481
1482
1483
1484</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 1470</span>

static VALUE
strio_truncate(VALUE self, VALUE len)
{
    VALUE string = writable(self)-&gt;string;
    long l = NUM2LONG(len);
    long plen = RSTRING_LEN(string);
    if (l &lt; 0) {
	error_inval(&quot;negative length&quot;);
    }
    rb_str_resize(string, l);
    if (plen &lt; l) {
	MEMZERO(RSTRING_PTR(string) + plen, char, l - plen);
    }
    return len;
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="tty?-instance_method">
  <h3 class='signature'>
  #<strong>tty?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
</div>
</section>
  <section class='method_details' id="ungetbyte-instance_method">
  <h3 class='signature'>
  #<strong>ungetbyte</strong>(fixnum)  &#x21d2; <tt>nil</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>See <code>IO#ungetbyte</code></p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


793
794
795
796
797
798
799
800
801
802
803
804
805
806
807
808
809
810
811
812
813
814
815</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 793</span>

static VALUE
strio_ungetbyte(VALUE self, VALUE c)
{
    struct StringIO *ptr = readable(self);
    char buf[1], *cp = buf;
    long cl = 1;

    check_modifiable(ptr);
    if (NIL_P(c)) return Qnil;
    if (FIXNUM_P(c)) {
	buf[0] = (char)FIX2INT(c);
	return strio_unget_bytes(ptr, buf, 1);
    }
    else {
	SafeStringValue(c);
	cp = RSTRING_PTR(c);
	cl = RSTRING_LEN(c);
	if (cl == 0) return Qnil;
	strio_unget_bytes(ptr, cp, cl);
	RB_GC_GUARD(c);
	return Qnil;
    }
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="ungetc-instance_method">
  <h3 class='signature'>
  #<strong>ungetc</strong>(string)  &#x21d2; <tt>nil</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Pushes back one character (passed as a parameter) onto
<strong>strio</strong> such that a subsequent buffered read will return it.
There is no limitation for multiple pushbacks including pushing back behind
the beginning of the buffer string.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


758
759
760
761
762
763
764
765
766
767
768
769
770
771
772
773
774
775
776
777
778
779
780
781
782
783
784
785</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 758</span>

static VALUE
strio_ungetc(VALUE self, VALUE c)
{
    struct StringIO *ptr = readable(self);
    rb_encoding *enc, *enc2;

    check_modifiable(ptr);
    if (NIL_P(c)) return Qnil;
    if (FIXNUM_P(c)) {
	int cc = FIX2INT(c);
	char buf[16];

	enc = rb_enc_get(ptr-&gt;string);
	rb_enc_mbcput(cc, buf, enc);
	return strio_unget_bytes(ptr, buf, rb_enc_codelen(cc, enc));
    }
    else {
	SafeStringValue(c);
	enc = rb_enc_get(ptr-&gt;string);
	enc2 = rb_enc_get(c);
	if (enc != enc2 &amp;&amp; enc != rb_ascii8bit_encoding()) {
	    c = rb_str_conv_enc(c, enc2, enc);
	}
	strio_unget_bytes(ptr, RSTRING_PTR(c), RSTRING_LEN(c));
	RB_GC_GUARD(c);
	return Qnil;
    }
}
</pre>
  </div>
</div>
</section>
  <section class='method_details' id="write-instance_method">
  <h3 class='signature'>
  <span class='overload'>#<strong>write</strong>(string)  &#x21d2; <tt>Integer</tt> </span>
    <span class='overload'>#<strong>syswrite</strong>(string)  &#x21d2; <tt>Integer</tt> </span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Appends the given string to the underlying buffer string of
<strong>strio</strong>. The stream must be opened for writing.  If the
argument is not a string, it will be converted to a string using
<code>to_s</code>. Returns the number of bytes written.  See <code>IO#write</code>.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


1212
1213
1214
1215
1216
1217
1218
1219
1220
1221
1222
1223
1224
1225
1226
1227
1228
1229
1230
1231
1232
1233
1234
1235
1236
1237
1238
1239
1240
1241
1242
1243
1244
1245
1246
1247
1248
1249
1250
1251
1252</pre>
  <div class='lines_code'>
<pre class='code cpp'
<span class='info file'># File 'stringio/stringio.c', line 1212</span>

static VALUE
strio_write(VALUE self, VALUE str)
{
    struct StringIO *ptr = writable(self);
    long len, olen;
    rb_encoding *enc, *enc2;
    rb_encoding *const ascii8bit = rb_ascii8bit_encoding();

    if (!RB_TYPE_P(str, T_STRING))
	str = rb_obj_as_string(str);
    enc = get_enc(ptr);
    enc2 = rb_enc_get(str);
    if (enc != enc2 &amp;&amp; enc != ascii8bit) {
	str = rb_str_conv_enc(str, enc2, enc);
    }
    len = RSTRING_LEN(str);
    if (len == 0) return INT2FIX(0);
    check_modifiable(ptr);
    olen = RSTRING_LEN(ptr-&gt;string);
    if (ptr-&gt;flags &amp; FMODE_APPEND) {
	ptr-&gt;pos = olen;
    }
    if (ptr-&gt;pos == olen) {
	if (enc == ascii8bit || enc2 == ascii8bit) {
	    rb_enc_str_buf_cat(ptr-&gt;string, RSTRING_PTR(str), len, enc);
	    OBJ_INFECT(ptr-&gt;string, str);
	}
	else {
	    rb_str_buf_append(ptr-&gt;string, str);
	}
    }
    else {
	strio_extend(ptr, ptr-&gt;pos, len);
	memmove(RSTRING_PTR(ptr-&gt;string)+ptr-&gt;pos, RSTRING_PTR(str), len);
	OBJ_INFECT(ptr-&gt;string, str);
    }
    OBJ_INFECT(ptr-&gt;string, self);
    RB_GC_GUARD(str);
    ptr-&gt;pos += len;
    return LONG2NUM(len);
}
</pre>
  </div>
</div>
</section>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.4 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>