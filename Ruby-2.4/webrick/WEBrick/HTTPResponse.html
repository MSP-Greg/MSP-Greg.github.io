<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: WEBrick::HTTPResponse &mdash; webrick Ruby-2.4.0 d2016-07-07</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "WEBrick::HTTPResponse",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
  <svg id='y_wait' class='' viewBox='0 0 90 90'></svg>
  <div id='tbl_cont'>
    <div id='y_list' class='d h'>
      <button id='list_sizer' class='y_sizer' title='LIST Resizer'></button>
      <header id='list_header'>
        <div id='list_title'>&#160;</div>
        <div id='list_menu'><span>&#160;</span></div>
        <input  id='list_search_text' type='search' placeholder='Search' size='12' value='' autocomplete='off' class='search_input'/>
        <svg id='list_search_icon' viewBox='0 0 30 30'>
          <path class='s_main' d='M21.189,17.213C22.022,15.726,22.5,14.014,22.5,12.188C22.5,6.493,17.884,1.875,12.188,1.875S1.875,6.493,1.875,12.188C1.875,17.882,6.491,22.5,12.188,22.5c1.826,0,3.536-0.48,5.025-1.311l6.113,6.113C23.873,27.851,24.593,28.125,25.313,28.125s1.44-0.274,1.989-0.823c1.099-1.099,1.099-2.878,0-3.977L21.189,17.213z M12.188,19.329c-3.943,0-7.14-3.197-7.14-7.142c0.0-3.943,3.197-7.14,7.14-7.14c3.941,0,7.14,3.195,7.14,7.14C19.328,16.133,16.129,19.329,12.188,19.329z'/>
          <path class='s_clear' d='M 4.414, 1.586 A 1,1 0 1,0 1.586, 4.414 L 21.586,24.414 A 1,1 0 1,0 24.414,21.586 z' />
          <path class='s_clear' d='M 1.586,21.586 A 1,1 0 1,0 4.414,24.414 L 24.414, 4.414 A 1,1 0 1,0 21.586, 1.586 z' />
        </svg>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All'></button>
      </header>
      <nav id= 'list_nav' class='y_nav l_nav'>
        <ul id='list_items'></ul>
      </nav>
    </div>
    <div id='y_toc' class='f h'>
      <button id='toc_sizer' class='y_sizer' title='TOC Resizer'></button>
      <header id='toc_header'>
        <div>Table of Contents</div>
        <button class='y_minus' title='Collapse All'></button>
        <button class='y_plus' title='Expand All' ></button>
      </header>
      <nav id= 'toc_nav' class='y_nav t_nav'>
      <ol id='toc_items'></ol>
      </nav>
    </div>
    <div id='y_main' tabindex='-1'>
      <header id='y_header'>
        <div id='y_menu'>
          <a href='../../../index.html'>Home</a> &raquo; 
          <a href='../../index.html'>Ruby-2.4.0</a> &raquo; 
          <a href='../index.html'>webrick</a> &raquo; 
          <a href='../_index.html'>Index (H)</a> &raquo; 
        #  <a href="../WEBrick.html" title="WEBrick (module)">WEBrick</a> &raquo; 
          <span class='title'>HTTPResponse</span>
        </div>

        <div id='y_measure_em' class='y_measure'></div>
        <div id='y_measure_vh' class='y_measure'></div>
        <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
        <a id='list_href' href="../class_list.html"></a>
        <div id='hdr_button'>
          <button id='src' class='c' title='Source Show / Hide'>S<svg class='c' viewBox='0 0 36 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
              <rect x='20' y='0'  width='4'  height='28' rx='1.0' ry='1.0'/>
            </svg><svg class='o' viewBox='0 0 34 28'>
              <rect x='8'  y='12' width='28' height='4'  rx='1.0' ry='1.0'/>
            </svg></button>
          <button id='list_loc' class='d' title='LIST Location'>L<svg class='f' viewBox='0 0 36 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='toc_loc' class='f' title='TOC Location'>T<svg class='f' viewBox='0 0 34 28'>
            <path d='M36 0 L36 28 8 14'/></svg><svg class='d' viewBox='0 0 36 28'><path d='M 8 0 L36 14 8 28'/></svg></button>
          <button id='list_vis' title='LIST Show / Hide'>LIST</button>
          <button id='toc_vis' title='TOC Show / Hide'>TOC</button>
        </div>
        <div id='y_debug'></div>
      </header>
<div id='content' class='class'>

<h1>Class: WEBrick::HTTPResponse</h1>

<div class="box_info">
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class='inheritName'>Object</span>
        <ul class='fullTree'>
          <li>Object</li>
            <li class='next'>WEBrick::HTTPResponse</li>
        </ul>
        <a href='#' class='inheritanceTree'>show all</a>
    </dd>
  </dl>



  <dl>
    <dt>Defined in:</dt>
    <dd>webrick/httpresponse.rb</dd>
  </dl>
</div>
<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>An HTTP response.  This is filled in by the service or do_* methods of a
WEBrick HTTP Servlet.</p>


  </div>
</div>
<div class="tags">
  
</div>


<h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>

  <ul class="summary">
    <li>
      <span class="summary_signature">
        <a href="#body-instance_method" title="#body (instance method)">#<strong>body</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Body may be a String or IO-like object that responds to <code>#read</code> and
<code>#readpartial</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#config-instance_method" title="#config (instance method)">#<strong>config</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Configuration for this response</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#cookies-instance_method" title="#cookies (instance method)">#<strong>cookies</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Response cookies</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#filename-instance_method" title="#filename (instance method)">#<strong>filename</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Filename of the static file in this response.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#header-instance_method" title="#header (instance method)">#<strong>header</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Response header</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#http_version-instance_method" title="#http_version (instance method)">#<strong>http_version</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>HTTP Response version</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#keep_alive-instance_method" title="#keep_alive (instance method)">#<strong>keep_alive</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Is this a keep-alive response?</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#reason_phrase-instance_method" title="#reason_phrase (instance method)">#<strong>reason_phrase</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Response reason phrase (“OK”)</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#request_http_version-instance_method" title="#request_http_version (instance method)">#<strong>request_http_version</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Request HTTP version for this response</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#request_method-instance_method" title="#request_method (instance method)">#<strong>request_method</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Request method for this response</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#request_uri-instance_method" title="#request_uri (instance method)">#<strong>request_uri</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Request URI for this response</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#sent_size-instance_method" title="#sent_size (instance method)">#<strong>sent_size</strong>  </a>
      </span>
      <span class='note title readonly'>readonly</span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Bytes sent in this response</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#status-instance_method" title="#status (instance method)">#<strong>status</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Response status code (200)</p>
</div>
      </span>
    </li>
  </ul>


<h2>Class Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(config)  &#x21d2; HTTPResponse </a>
      </span>
      <span class='note title constructor'>constructor</span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Creates a new HTTP response object.</p>
</div>
      </span>
    </li>
  </ul>
<h2>Instance Method Summary
  <small><a href='#' class='summary_toggle'>collapse</a></small>
</h2>

  <ul class='summary'>
    <li>
      <span class="summary_signature">
        <a href="#%5B%5D-instance_method" title="#[] (instance method)">#<strong>[]</strong>(field)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Retrieves the response header <code>field</code></p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#%5B%5D%3D-instance_method" title="#[]= (instance method)">#<strong>[]=</strong>(field, value)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Sets the response header <code>field</code> to <code>value</code></p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#_send_file-instance_method" title="#_send_file (instance method)">#<strong>_send_file</strong>(output, input, offset, size)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#_write_data-instance_method" title="#_write_data (instance method)">#<strong>_write_data</strong>(socket, data)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#chunked%3D-instance_method" title="#chunked= (instance method)">#<strong>chunked=</strong>(val)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Enables chunked transfer encoding.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#chunked%3F-instance_method" title="#chunked? (instance method)">#<strong>chunked?</strong>  &#x21d2; Boolean </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Will this response body be returned using chunked transfer-encoding?</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#content_length-instance_method" title="#content_length (instance method)">#<strong>content_length</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>The content-length header</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#content_length%3D-instance_method" title="#content_length= (instance method)">#<strong>content_length=</strong>(len)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Sets the content-length header to <code>len</code></p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#content_type-instance_method" title="#content_type (instance method)">#<strong>content_type</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>The content-type header</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#content_type%3D-instance_method" title="#content_type= (instance method)">#<strong>content_type=</strong>(type)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Sets the content-type header to <code>type</code></p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#each-instance_method" title="#each (instance method)">#<strong>each</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Iterates over each header in the response</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#error_body-instance_method" title="#error_body (instance method)">#<strong>error_body</strong>(backtrace, ex, host, port)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>:stopdoc:</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#keep_alive%3F-instance_method" title="#keep_alive? (instance method)">#<strong>keep_alive?</strong>  &#x21d2; Boolean </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Will this response&#39;s connection be kept alive?</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#send_body-instance_method" title="#send_body (instance method)">#<strong>send_body</strong>(socket)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Sends the body on <code>socket</code></p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#send_body_io-instance_method" title="#send_body_io (instance method)">#<strong>send_body_io</strong>(socket)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#send_body_string-instance_method" title="#send_body_string (instance method)">#<strong>send_body_string</strong>(socket)  </a>
      </span>
      <span class='note title private'>private</span>
      

      <span class='summary_desc'>
        <div class='inline'></div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#send_header-instance_method" title="#send_header (instance method)">#<strong>send_header</strong>(socket)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Sends the headers on <code>socket</code></p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#send_response-instance_method" title="#send_response (instance method)">#<strong>send_response</strong>(socket)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Sends the response on <code>socket</code></p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#set_error-instance_method" title="#set_error (instance method)">#<strong>set_error</strong>(ex, backtrace = false)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Creates an error page for exception <code>ex</code> with an optional
<code>backtrace</code></p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#set_redirect-instance_method" title="#set_redirect (instance method)">#<strong>set_redirect</strong>(status, url)  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Redirects to <code>url</code> with a <a href="HTTPStatus/Redirect.html" title="WEBrick::HTTPStatus::Redirect (class)">WEBrick::HTTPStatus::Redirect</a>
<code>status</code>.</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#setup_header-instance_method" title="#setup_header (instance method)">#<strong>setup_header</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>Sets up the headers for sending</p>
</div>
      </span>
    </li>
    <li>
      <span class="summary_signature">
        <a href="#status_line-instance_method" title="#status_line (instance method)">#<strong>status_line</strong>  </a>
      </span>
      

      <span class='summary_desc'>
        <div class='inline'>
<p>The response&#39;s HTTP status line</p>
</div>
      </span>
    </li>
  </ul>

<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>
  <section class='method_details first' id="new-class_method">
  <h3 class='signature first'>
  .<strong>new</strong>(config)  &#x21d2; <tt><a href="" title="WEBrick::HTTPResponse (class)">HTTPResponse</a></tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates a new HTTP response object.  <a href="Config.html#HTTP-constant" title="WEBrick::Config::HTTP (constant)">Config::HTTP</a> is the default
configuration.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 96</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_config'>config</span><span class='rparen'>)</span>
  <span class='ivar'>@config</span> <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span>
  <span class='ivar'>@buffer_size</span> <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:OutputBufferSize</span><span class='rbracket'>]</span>
  <span class='ivar'>@logger</span> <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span><span class='lbracket'>[</span><span class='symbol'>:Logger</span><span class='rbracket'>]</span>
  <span class='ivar'>@header</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@status</span> <span class='op'>=</span> <span class='const'>HTTPStatus</span><span class='op'>::</span><span class='const'>RC_OK</span>
  <span class='ivar'>@reason_phrase</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@http_version</span> <span class='op'>=</span> <span class='const'>HTTPVersion</span><span class='op'>::</span><span class='id identifier rubyid_convert'>convert</span><span class='lparen'>(</span><span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:HTTPVersion</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='ivar'>@body</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='ivar'>@keep_alive</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='ivar'>@cookies</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@request_method</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@request_uri</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@request_http_version</span> <span class='op'>=</span> <span class='ivar'>@http_version</span>  <span class='comment'># temporary
</span>  <span class='ivar'>@chunked</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@filename</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@sent_size</span> <span class='op'>=</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section><h2 class='y_details'>Instance Attribute Details</h2>
  <section class='method_details first' id="body-instance_method">
  <h3 class='signature first'>
  #<strong>body</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Body may be a String or IO-like object that responds to <code>#read</code> and
<code>#readpartial</code>.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


54</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 54</span>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbol'>:body</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="config-instance_method">
  <h3 class='signature'>
  #<strong>config</strong>   <span class="extras">(readonly)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Configuration for this response</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


85</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 85</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:config</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="cookies-instance_method">
  <h3 class='signature'>
  #<strong>cookies</strong>   <span class="extras">(readonly)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Response cookies</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


43</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 43</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:cookies</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="filename-instance_method">
  <h3 class='signature'>
  #<strong>filename</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Filename of the static file in this response.  Only used by the FileHandler
servlet.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


75</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 75</span>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbol'>:filename</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="header-instance_method">
  <h3 class='signature'>
  #<strong>header</strong>   <span class="extras">(readonly)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Response header</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


38</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 38</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:header</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="http_version-instance_method">
  <h3 class='signature'>
  #<strong>http_version</strong>   <span class="extras">(readonly)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>HTTP Response version</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


28</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 28</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:http_version</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="keep_alive-instance_method">
  <h3 class='signature'>
  #<strong>keep_alive</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Is this a keep-alive response?</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


80</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 80</span>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbol'>:keep_alive</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="reason_phrase-instance_method">
  <h3 class='signature'>
  #<strong>reason_phrase</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Response reason phrase (“OK”)</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


48</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 48</span>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbol'>:reason_phrase</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="request_http_version-instance_method">
  <h3 class='signature'>
  #<strong>request_http_version</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Request HTTP version for this response</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


69</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 69</span>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbol'>:request_http_version</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="request_method-instance_method">
  <h3 class='signature'>
  #<strong>request_method</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Request method for this response</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


59</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 59</span>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbol'>:request_method</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="request_uri-instance_method">
  <h3 class='signature'>
  #<strong>request_uri</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Request URI for this response</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


64</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 64</span>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbol'>:request_uri</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="sent_size-instance_method">
  <h3 class='signature'>
  #<strong>sent_size</strong>   <span class="extras">(readonly)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Bytes sent in this response</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


90</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 90</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:sent_size</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="status-instance_method">
  <h3 class='signature'>
  #<strong>status</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Response status code (200)</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


33</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 33</span>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:status</span></pre>
  </div>
</div>
</section><h2 class='y_details'>Instance Method Details</h2>
  <section class='method_details first' id="[]-instance_method">
  <h3 class='signature first'>
  #<strong>[]</strong>(field)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Retrieves the response header <code>field</code></p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


133
134
135</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 133</span>

<span class='kw'>def</span> <span class='op'>[]</span><span class='lparen'>(</span><span class='id identifier rubyid_field'>field</span><span class='rparen'>)</span>
  <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='id identifier rubyid_field'>field</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="[]=-instance_method">
  <h3 class='signature'>
  #<strong>[]=</strong>(field, value)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Sets the response header <code>field</code> to <code>value</code></p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


140
141
142</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 140</span>

<span class='kw'>def</span> <span class='op'>[]=</span><span class='lparen'>(</span><span class='id identifier rubyid_field'>field</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
  <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='id identifier rubyid_field'>field</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="_send_file-instance_method">
  <h3 class='signature'>
  #<strong>_send_file</strong>(output, input, offset, size)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 443</span>

<span class='kw'>def</span> <span class='id identifier rubyid__send_file'>_send_file</span><span class='lparen'>(</span><span class='id identifier rubyid_output'>output</span><span class='comma'>,</span> <span class='id identifier rubyid_input'>input</span><span class='comma'>,</span> <span class='id identifier rubyid_offset'>offset</span><span class='comma'>,</span> <span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span>
  <span class='kw'>while</span> <span class='id identifier rubyid_offset'>offset</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='id identifier rubyid_sz'>sz</span> <span class='op'>=</span> <span class='ivar'>@buffer_size</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_size'>size</span> <span class='op'>?</span> <span class='ivar'>@buffer_size</span> <span class='op'>:</span> <span class='id identifier rubyid_size'>size</span>
    <span class='id identifier rubyid_buf'>buf</span> <span class='op'>=</span> <span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_sz'>sz</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_offset'>offset</span> <span class='op'>-=</span> <span class='id identifier rubyid_buf'>buf</span><span class='period'>.</span><span class='id identifier rubyid_bytesize'>bytesize</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>0</span>
    <span class='kw'>while</span> <span class='id identifier rubyid_buf'>buf</span> <span class='op'>=</span> <span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='ivar'>@buffer_size</span><span class='rparen'>)</span>
      <span class='id identifier rubyid__write_data'>_write_data</span><span class='lparen'>(</span><span class='id identifier rubyid_output'>output</span><span class='comma'>,</span> <span class='id identifier rubyid_buf'>buf</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='kw'>while</span> <span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
      <span class='id identifier rubyid_sz'>sz</span> <span class='op'>=</span> <span class='ivar'>@buffer_size</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_size'>size</span> <span class='op'>?</span> <span class='ivar'>@buffer_size</span> <span class='op'>:</span> <span class='id identifier rubyid_size'>size</span>
      <span class='id identifier rubyid_buf'>buf</span> <span class='op'>=</span> <span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_sz'>sz</span><span class='rparen'>)</span>
      <span class='id identifier rubyid__write_data'>_write_data</span><span class='lparen'>(</span><span class='id identifier rubyid_output'>output</span><span class='comma'>,</span> <span class='id identifier rubyid_buf'>buf</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_size'>size</span> <span class='op'>-=</span> <span class='id identifier rubyid_buf'>buf</span><span class='period'>.</span><span class='id identifier rubyid_bytesize'>bytesize</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="_write_data-instance_method">
  <h3 class='signature'>
  #<strong>_write_data</strong>(socket, data)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


464
465
466</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 464</span>

<span class='kw'>def</span> <span class='id identifier rubyid__write_data'>_write_data</span><span class='lparen'>(</span><span class='id identifier rubyid_socket'>socket</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_socket'>socket</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_data'>data</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="chunked=-instance_method">
  <h3 class='signature'>
  #<strong>chunked=</strong>(val)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Enables chunked transfer encoding.</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


191
192
193</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 191</span>

<span class='kw'>def</span> <span class='id identifier rubyid_chunked='>chunked=</span><span class='lparen'>(</span><span class='id identifier rubyid_val'>val</span><span class='rparen'>)</span>
  <span class='ivar'>@chunked</span> <span class='op'>=</span> <span class='id identifier rubyid_val'>val</span> <span class='op'>?</span> <span class='kw'>true</span> <span class='op'>:</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="chunked?-instance_method">
  <h3 class='signature'>
  #<strong>chunked?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Will this response body be returned using chunked transfer-encoding?</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


184
185
186</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 184</span>

<span class='kw'>def</span> <span class='id identifier rubyid_chunked?'>chunked?</span>
  <span class='ivar'>@chunked</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="content_length-instance_method">
  <h3 class='signature'>
  #<strong>content_length</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The content-length header</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


147
148
149
150
151</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 147</span>

<span class='kw'>def</span> <span class='id identifier rubyid_content_length'>content_length</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_len'>len</span> <span class='op'>=</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>content-length</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>return</span> <span class='const'>Integer</span><span class='lparen'>(</span><span class='id identifier rubyid_len'>len</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="content_length=-instance_method">
  <h3 class='signature'>
  #<strong>content_length=</strong>(len)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Sets the content-length header to <code>len</code></p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


156
157
158</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 156</span>

<span class='kw'>def</span> <span class='id identifier rubyid_content_length='>content_length=</span><span class='lparen'>(</span><span class='id identifier rubyid_len'>len</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>content-length</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_len'>len</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="content_type-instance_method">
  <h3 class='signature'>
  #<strong>content_type</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The content-type header</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


163
164
165</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 163</span>

<span class='kw'>def</span> <span class='id identifier rubyid_content_type'>content_type</span>
  <span class='kw'>self</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>content-type</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="content_type=-instance_method">
  <h3 class='signature'>
  #<strong>content_type=</strong>(type)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Sets the content-type header to <code>type</code></p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


170
171
172</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 170</span>

<span class='kw'>def</span> <span class='id identifier rubyid_content_type='>content_type=</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>content-type</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_type'>type</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="each-instance_method">
  <h3 class='signature'>
  #<strong>each</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Iterates over each header in the response</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


177
178
179</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 177</span>

<span class='kw'>def</span> <span class='id identifier rubyid_each'>each</span>
  <span class='ivar'>@header</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_field'>field</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>  <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_field'>field</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="error_body-instance_method">
  <h3 class='signature'>
  #<strong>error_body</strong>(backtrace, ex, host, port)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>:stopdoc:</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 362</span>

<span class='kw'>def</span> <span class='id identifier rubyid_error_body'>error_body</span><span class='lparen'>(</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='comma'>,</span> <span class='id identifier rubyid_ex'>ex</span><span class='comma'>,</span> <span class='id identifier rubyid_host'>host</span><span class='comma'>,</span> <span class='id identifier rubyid_port'>port</span><span class='rparen'>)</span>
  <span class='ivar'>@body</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='ivar'>@body</span> <span class='op'>&lt;&lt;</span> <span class='heredoc_beg'>&lt;&lt;-_end_of_html_</span>
<span class='tstring_content'>&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0//EN&quot;&gt;
&lt;HTML&gt;
  &lt;HEAD&gt;&lt;TITLE&gt;</span><span class='embexpr_beg'>#{</span><span class='const'>HTMLUtils</span><span class='op'>::</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='ivar'>@reason_phrase</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/TITLE&gt;&lt;/HEAD&gt;
  &lt;BODY&gt;
&lt;H1&gt;</span><span class='embexpr_beg'>#{</span><span class='const'>HTMLUtils</span><span class='op'>::</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='ivar'>@reason_phrase</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/H1&gt;
</span><span class='embexpr_beg'>#{</span><span class='const'>HTMLUtils</span><span class='op'>::</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_ex'>ex</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>
&lt;HR&gt;
</span><span class='heredoc_end'>  _end_of_html_
</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_backtrace'>backtrace</span> <span class='op'>&amp;&amp;</span> <span class='gvar'>$DEBUG</span>
    <span class='ivar'>@body</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>backtrace of `</span><span class='embexpr_beg'>#{</span><span class='const'>HTMLUtils</span><span class='op'>::</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_ex'>ex</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; </span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@body</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>HTMLUtils</span><span class='op'>::</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_ex'>ex</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@body</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;PRE&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_ex'>ex</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span> <span class='ivar'>@body</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\t</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_line'>line</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
    <span class='ivar'>@body</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/PRE&gt;&lt;HR&gt;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='ivar'>@body</span> <span class='op'>&lt;&lt;</span> <span class='heredoc_beg'>&lt;&lt;-_end_of_html_</span>
<span class='tstring_content'>&lt;ADDRESS&gt;
 </span><span class='embexpr_beg'>#{</span><span class='const'>HTMLUtils</span><span class='op'>::</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='const'>ServerSoftware</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> at
 </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_host'>host</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port'>port</span><span class='embexpr_end'>}</span><span class='tstring_content'>
&lt;/ADDRESS&gt;
  &lt;/BODY&gt;
&lt;/HTML&gt;
</span><span class='heredoc_end'>  _end_of_html_
</span><span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="keep_alive?-instance_method">
  <h3 class='signature'>
  #<strong>keep_alive?</strong>  &#x21d2; <tt>Boolean</tt> 
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Will this response&#39;s connection be kept alive?</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


198
199
200</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 198</span>

<span class='kw'>def</span> <span class='id identifier rubyid_keep_alive?'>keep_alive?</span>
  <span class='ivar'>@keep_alive</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="send_body-instance_method">
  <h3 class='signature'>
  #<strong>send_body</strong>(socket)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Sends the body on <code>socket</code></p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


303
304
305
306
307
308
309</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 303</span>

<span class='kw'>def</span> <span class='id identifier rubyid_send_body'>send_body</span><span class='lparen'>(</span><span class='id identifier rubyid_socket'>socket</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='kw'>if</span> <span class='ivar'>@body</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbol'>:readpartial</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_send_body_io'>send_body_io</span><span class='lparen'>(</span><span class='id identifier rubyid_socket'>socket</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_send_body_string'>send_body_string</span><span class='lparen'>(</span><span class='id identifier rubyid_socket'>socket</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="send_body_io-instance_method">
  <h3 class='signature'>
  #<strong>send_body_io</strong>(socket)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 392</span>

<span class='kw'>def</span> <span class='id identifier rubyid_send_body_io'>send_body_io</span><span class='lparen'>(</span><span class='id identifier rubyid_socket'>socket</span><span class='rparen'>)</span>
  <span class='kw'>begin</span>
    <span class='kw'>if</span> <span class='ivar'>@request_method</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HEAD</span><span class='tstring_end'>&quot;</span></span>
      <span class='comment'># do nothing
</span>    <span class='kw'>elsif</span> <span class='id identifier rubyid_chunked?'>chunked?</span>
      <span class='kw'>begin</span>
        <span class='id identifier rubyid_buf'>buf</span>  <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>while</span> <span class='kw'>true</span>
          <span class='ivar'>@body</span><span class='period'>.</span><span class='id identifier rubyid_readpartial'>readpartial</span><span class='lparen'>(</span> <span class='ivar'>@buffer_size</span><span class='comma'>,</span> <span class='id identifier rubyid_buf'>buf</span> <span class='rparen'>)</span> <span class='comment'># there is no need to clear buf?
</span>          <span class='id identifier rubyid_data'>data</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%x</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_buf'>buf</span><span class='period'>.</span><span class='id identifier rubyid_bytesize'>bytesize</span><span class='rparen'>)</span> <span class='op'>&lt;&lt;</span> <span class='const'>CRLF</span>
          <span class='id identifier rubyid_data'>data</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_buf'>buf</span> <span class='op'>&lt;&lt;</span> <span class='const'>CRLF</span>
          <span class='id identifier rubyid__write_data'>_write_data</span><span class='lparen'>(</span><span class='id identifier rubyid_socket'>socket</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
          <span class='ivar'>@sent_size</span> <span class='op'>+=</span> <span class='id identifier rubyid_buf'>buf</span><span class='period'>.</span><span class='id identifier rubyid_bytesize'>bytesize</span>
        <span class='kw'>end</span>
      <span class='kw'>rescue</span> <span class='const'>EOFError</span> <span class='comment'># do nothing
</span>      <span class='kw'>end</span>
      <span class='id identifier rubyid__write_data'>_write_data</span><span class='lparen'>(</span><span class='id identifier rubyid_socket'>socket</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0</span><span class='embexpr_beg'>#{</span><span class='const'>CRLF</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='const'>CRLF</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_size'>size</span> <span class='op'>=</span> <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>content-length</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
      <span class='id identifier rubyid__send_file'>_send_file</span><span class='lparen'>(</span><span class='id identifier rubyid_socket'>socket</span><span class='comma'>,</span> <span class='ivar'>@body</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span>
      <span class='ivar'>@sent_size</span> <span class='op'>=</span> <span class='id identifier rubyid_size'>size</span>
    <span class='kw'>end</span>
  <span class='kw'>ensure</span>
    <span class='ivar'>@body</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="send_body_string-instance_method">
  <h3 class='signature'>
  #<strong>send_body_string</strong>(socket)   <span class="extras">(<span class='prvt'>private</span>)</span>
</h3>
<div class='source_code h'>
  <pre class='lines_num'>


421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 421</span>

<span class='kw'>def</span> <span class='id identifier rubyid_send_body_string'>send_body_string</span><span class='lparen'>(</span><span class='id identifier rubyid_socket'>socket</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='ivar'>@request_method</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HEAD</span><span class='tstring_end'>&quot;</span></span>
    <span class='comment'># do nothing
</span>  <span class='kw'>elsif</span> <span class='id identifier rubyid_chunked?'>chunked?</span>
    <span class='id identifier rubyid_body'>body</span> <span class='op'>?</span> <span class='ivar'>@body</span><span class='period'>.</span><span class='id identifier rubyid_bytesize'>bytesize</span> <span class='op'>:</span> <span class='int'>0</span>
    <span class='kw'>while</span> <span class='id identifier rubyid_buf'>buf</span> <span class='op'>=</span> <span class='ivar'>@body</span><span class='lbracket'>[</span><span class='ivar'>@sent_size</span><span class='comma'>,</span> <span class='ivar'>@buffer_size</span><span class='rbracket'>]</span>
      <span class='kw'>break</span> <span class='kw'>if</span> <span class='id identifier rubyid_buf'>buf</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_data'>data</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%x</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_buf'>buf</span><span class='period'>.</span><span class='id identifier rubyid_bytesize'>bytesize</span><span class='rparen'>)</span> <span class='op'>&lt;&lt;</span> <span class='const'>CRLF</span>
      <span class='id identifier rubyid_data'>data</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_buf'>buf</span> <span class='op'>&lt;&lt;</span> <span class='const'>CRLF</span>
      <span class='id identifier rubyid__write_data'>_write_data</span><span class='lparen'>(</span><span class='id identifier rubyid_socket'>socket</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
      <span class='ivar'>@sent_size</span> <span class='op'>+=</span> <span class='id identifier rubyid_buf'>buf</span><span class='period'>.</span><span class='id identifier rubyid_bytesize'>bytesize</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid__write_data'>_write_data</span><span class='lparen'>(</span><span class='id identifier rubyid_socket'>socket</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0</span><span class='embexpr_beg'>#{</span><span class='const'>CRLF</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='const'>CRLF</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='kw'>if</span> <span class='ivar'>@body</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@body</span><span class='period'>.</span><span class='id identifier rubyid_bytesize'>bytesize</span> <span class='op'>&gt;</span> <span class='int'>0</span>
      <span class='id identifier rubyid__write_data'>_write_data</span><span class='lparen'>(</span><span class='id identifier rubyid_socket'>socket</span><span class='comma'>,</span> <span class='ivar'>@body</span><span class='rparen'>)</span>
      <span class='ivar'>@sent_size</span> <span class='op'>=</span> <span class='ivar'>@body</span><span class='period'>.</span><span class='id identifier rubyid_bytesize'>bytesize</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="send_header-instance_method">
  <h3 class='signature'>
  #<strong>send_header</strong>(socket)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Sends the headers on <code>socket</code></p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


285
286
287
288
289
290
291
292
293
294
295
296
297
298</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 285</span>

<span class='kw'>def</span> <span class='id identifier rubyid_send_header'>send_header</span><span class='lparen'>(</span><span class='id identifier rubyid_socket'>socket</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='kw'>if</span> <span class='ivar'>@http_version</span><span class='period'>.</span><span class='id identifier rubyid_major'>major</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_status_line'>status_line</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='ivar'>@header</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
      <span class='id identifier rubyid_tmp'>tmp</span> <span class='op'>=</span> <span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\bwww|^te$|\b\w</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span><span class='lbrace'>{</span> <span class='backref'>$&amp;</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span> <span class='rbrace'>}</span>
      <span class='id identifier rubyid_data'>data</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tmp'>tmp</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_value'>value</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span> <span class='const'>CRLF</span>
    <span class='rbrace'>}</span>
    <span class='ivar'>@cookies</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_cookie'>cookie</span><span class='op'>|</span>
      <span class='id identifier rubyid_data'>data</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Set-Cookie: </span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_cookie'>cookie</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>&lt;&lt;</span> <span class='const'>CRLF</span>
    <span class='rbrace'>}</span>
    <span class='id identifier rubyid_data'>data</span> <span class='op'>&lt;&lt;</span> <span class='const'>CRLF</span>
    <span class='id identifier rubyid__write_data'>_write_data</span><span class='lparen'>(</span><span class='id identifier rubyid_socket'>socket</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="send_response-instance_method">
  <h3 class='signature'>
  #<strong>send_response</strong>(socket)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Sends the response on <code>socket</code></p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


205
206
207
208
209
210
211
212
213
214
215
216
217</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 205</span>

<span class='kw'>def</span> <span class='id identifier rubyid_send_response'>send_response</span><span class='lparen'>(</span><span class='id identifier rubyid_socket'>socket</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='kw'>begin</span>
    <span class='id identifier rubyid_setup_header'>setup_header</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_send_header'>send_header</span><span class='lparen'>(</span><span class='id identifier rubyid_socket'>socket</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_send_body'>send_body</span><span class='lparen'>(</span><span class='id identifier rubyid_socket'>socket</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>EPIPE</span><span class='comma'>,</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ECONNRESET</span><span class='comma'>,</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ENOTCONN</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ex'>ex</span>
    <span class='ivar'>@logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='id identifier rubyid_ex'>ex</span><span class='rparen'>)</span>
    <span class='ivar'>@keep_alive</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ex'>ex</span>
    <span class='ivar'>@logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span><span class='lparen'>(</span><span class='id identifier rubyid_ex'>ex</span><span class='rparen'>)</span>
    <span class='ivar'>@keep_alive</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="set_error-instance_method">
  <h3 class='signature'>
  #<strong>set_error</strong>(ex, backtrace = false)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Creates an error page for exception <code>ex</code> with an optional
<code>backtrace</code></p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 333</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_error'>set_error</span><span class='lparen'>(</span><span class='id identifier rubyid_ex'>ex</span><span class='comma'>,</span> <span class='id identifier rubyid_backtrace'>backtrace</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_ex'>ex</span>
  <span class='kw'>when</span> <span class='const'>HTTPStatus</span><span class='op'>::</span><span class='const'>Status</span>
    <span class='ivar'>@keep_alive</span> <span class='op'>=</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='const'>HTTPStatus</span><span class='op'>::</span><span class='id identifier rubyid_error?'>error?</span><span class='lparen'>(</span><span class='id identifier rubyid_ex'>ex</span><span class='period'>.</span><span class='id identifier rubyid_code'>code</span><span class='rparen'>)</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='id identifier rubyid_ex'>ex</span><span class='period'>.</span><span class='id identifier rubyid_code'>code</span>
  <span class='kw'>else</span>
    <span class='ivar'>@keep_alive</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='const'>HTTPStatus</span><span class='op'>::</span><span class='const'>RC_INTERNAL_SERVER_ERROR</span>
  <span class='kw'>end</span>
  <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>content-type</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text/html; charset=ISO-8859-1</span><span class='tstring_end'>&quot;</span></span>

  <span class='kw'>if</span> <span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:create_error_page</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_create_error_page'>create_error_page</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>return</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='ivar'>@request_uri</span>
    <span class='id identifier rubyid_host'>host</span><span class='comma'>,</span> <span class='id identifier rubyid_port'>port</span> <span class='op'>=</span> <span class='ivar'>@request_uri</span><span class='period'>.</span><span class='id identifier rubyid_host'>host</span><span class='comma'>,</span> <span class='ivar'>@request_uri</span><span class='period'>.</span><span class='id identifier rubyid_port'>port</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_host'>host</span><span class='comma'>,</span> <span class='id identifier rubyid_port'>port</span> <span class='op'>=</span> <span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:ServerName</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:Port</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_error_body'>error_body</span><span class='lparen'>(</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='comma'>,</span> <span class='id identifier rubyid_ex'>ex</span><span class='comma'>,</span> <span class='id identifier rubyid_host'>host</span><span class='comma'>,</span> <span class='id identifier rubyid_port'>port</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="set_redirect-instance_method">
  <h3 class='signature'>
  #<strong>set_redirect</strong>(status, url)  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Redirects to <code>url</code> with a <a href="HTTPStatus/Redirect.html" title="WEBrick::HTTPStatus::Redirect (class)">WEBrick::HTTPStatus::Redirect</a>
<code>status</code>.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_set_redirect'>set_redirect</span> <span class='const'>WEBrick</span><span class='op'>::</span><span class='const'>HTTPStatus</span><span class='op'>::</span><span class='const'>TemporaryRedirect</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


324
325
326
327
328</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 324</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_redirect'>set_redirect</span><span class='lparen'>(</span><span class='id identifier rubyid_status'>status</span><span class='comma'>,</span> <span class='id identifier rubyid_url'>url</span><span class='rparen'>)</span>
  <span class='ivar'>@body</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;HTML&gt;&lt;A HREF=\&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_url'>url</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_url'>url</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/A&gt;.&lt;/HTML&gt;\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>location</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_url'>url</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid_status'>status</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="setup_header-instance_method">
  <h3 class='signature'>
  #<strong>setup_header</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>Sets up the headers for sending</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 222</span>

<span class='kw'>def</span> <span class='id identifier rubyid_setup_header'>setup_header</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='ivar'>@reason_phrase</span>    <span class='op'>||=</span> <span class='const'>HTTPStatus</span><span class='op'>::</span><span class='id identifier rubyid_reason_phrase'>reason_phrase</span><span class='lparen'>(</span><span class='ivar'>@status</span><span class='rparen'>)</span>
  <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>server</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:ServerSoftware</span><span class='rbracket'>]</span>
  <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>date</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>   <span class='op'>||=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_httpdate'>httpdate</span>

  <span class='comment'># HTTP/0.9 features
</span>  <span class='kw'>if</span> <span class='ivar'>@request_http_version</span> <span class='op'>&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.0</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@http_version</span> <span class='op'>=</span> <span class='const'>HTTPVersion</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0.9</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='ivar'>@keep_alive</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>end</span>

  <span class='comment'># HTTP/1.0 features
</span>  <span class='kw'>if</span> <span class='ivar'>@request_http_version</span> <span class='op'>&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.1</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>if</span> <span class='id identifier rubyid_chunked?'>chunked?</span>
      <span class='ivar'>@chunked</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='id identifier rubyid_ver'>ver</span> <span class='op'>=</span> <span class='ivar'>@request_http_version</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
      <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>chunked is set for an HTTP/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ver'>ver</span><span class='embexpr_end'>}</span><span class='tstring_content'> request. (ignored)</span><span class='tstring_end'>&quot;</span></span>
      <span class='ivar'>@logger</span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span><span class='lparen'>(</span><span class='id identifier rubyid_msg'>msg</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># Determine the message length (RFC2616 -- 4.4 Message Length)
</span>  <span class='kw'>if</span> <span class='ivar'>@status</span> <span class='op'>==</span> <span class='int'>304</span> <span class='op'>||</span> <span class='ivar'>@status</span> <span class='op'>==</span> <span class='int'>204</span> <span class='op'>||</span> <span class='const'>HTTPStatus</span><span class='op'>::</span><span class='id identifier rubyid_info?'>info?</span><span class='lparen'>(</span><span class='ivar'>@status</span><span class='rparen'>)</span>
    <span class='ivar'>@header</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>content-length</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='ivar'>@body</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_chunked?'>chunked?</span>
    <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>transfer-encoding</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>chunked</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@header</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>content-length</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>^multipart/byteranges</span><span class='regexp_end'>}</span></span> <span class='op'>=~</span> <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>content-type</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='ivar'>@header</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>content-length</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>content-length</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>unless</span> <span class='ivar'>@body</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>IO</span><span class='rparen'>)</span>
      <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>content-length</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@body</span> <span class='op'>?</span> <span class='ivar'>@body</span><span class='period'>.</span><span class='id identifier rubyid_bytesize'>bytesize</span> <span class='op'>:</span> <span class='int'>0</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># Keep-Alive connection.
</span>  <span class='kw'>if</span> <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>connection</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>close</span><span class='tstring_end'>&quot;</span></span>
     <span class='ivar'>@keep_alive</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_keep_alive?'>keep_alive?</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_chunked?'>chunked?</span> <span class='op'>||</span> <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>content-length</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='ivar'>@status</span> <span class='op'>==</span> <span class='int'>304</span> <span class='op'>||</span> <span class='ivar'>@status</span> <span class='op'>==</span> <span class='int'>204</span> <span class='op'>||</span> <span class='const'>HTTPStatus</span><span class='period'>.</span><span class='id identifier rubyid_info?'>info?</span><span class='lparen'>(</span><span class='ivar'>@status</span><span class='rparen'>)</span>
      <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>connection</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Keep-Alive</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true</span><span class='tstring_end'>&quot;</span></span>
      <span class='ivar'>@logger</span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span><span class='lparen'>(</span><span class='id identifier rubyid_msg'>msg</span><span class='rparen'>)</span>
      <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>connection</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>close</span><span class='tstring_end'>&quot;</span></span>
      <span class='ivar'>@keep_alive</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>connection</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>close</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># Location is a single absoluteURI.
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_location'>location</span> <span class='op'>=</span> <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>location</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='ivar'>@request_uri</span>
      <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>location</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@request_uri</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_location'>location</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>  <section class='method_details' id="status_line-instance_method">
  <h3 class='signature'>
  #<strong>status_line</strong>  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>The response&#39;s HTTP status line</p>


  </div>
</div>
<div class="tags">
  
</div><div class='source_code h'>
  <pre class='lines_num'>


118
119
120</pre>
  <div class='lines_code'>
      <pre class='code'><span class='info file'># File 'webrick/httpresponse.rb', line 118</span>

<span class='kw'>def</span> <span class='id identifier rubyid_status_line'>status_line</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HTTP/</span><span class='embvar'>#</span><span class='ivar'>@http_version</span><span class='tstring_content'> </span><span class='embvar'>#</span><span class='ivar'>@status</span><span class='tstring_content'> </span><span class='embvar'>#</span><span class='ivar'>@reason_phrase</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='const'>CRLF</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
  </div>
</div>
</section>
<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.8.7.6 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.6.0 (ruby-2.3.2p135)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</div> <!-- tbl_cont -->
</body>
</html>