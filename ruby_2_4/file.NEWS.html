<!DOCTYPE html>
<html>
<head>

<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>File: NEWS &mdash; Ruby-2.4.10</title>

<link rel='stylesheet'  type='text/css' href='../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_color.css' />

<script type='text/javascript'>
  var pathId = "NEWS",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
      <a href='../index.html'>Home</a> &raquo; 
      <a href='index.html'>Ruby-2.4.10</a> &raquo; 
      <a href='_index.html'>Index</a> &raquo; 
      <span class='title'><a id='t2_doc_top' href='#'>File: NEWS&nbsp;&#x25B2;</a></span>
          </div>

    <a id='list_href' href="file_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='file'>

<h1 id="label-NEWS+for+Ruby+2.4.0">NEWS for Ruby 2.4.0</h1>

<p>This document is a list of user visible feature changes made between releases except for bug fixes.</p>

<p>Note that each entry is kept so brief that no reason behind or reference information is supplied with.  For a full list of changes with all sufficient information, see the ChangeLog file or Redmine (e.g. <code>https://bugs.ruby-lang.org/issues/$FEATURE_OR_BUG_NUMBER</code>)</p>

<h2 id="label-Changes+since+the+2.3.0+release">Changes since the 2.3.0 release</h2>

<h3 id="label-Language+changes">Language changes</h3>
<ul><li>
<p>Multiple assignment in conditional expression is now allowed.</p>
<dl class="rdoc-list label-list"><dt>Feature #10617
<dd></dd></dl>
</li><li>
<p>Refinements is enabled at method by Symbol#to_proc.  [Feature #9451]</p>
</li><li>
<p>Refinements is enabled with Kernel#send and BasicObject#__send__.</p>
<dl class="rdoc-list label-list"><dt>Feature #11476
<dd></dd></dl>
</li><li>
<p>Rescue modifier now applicable to method arguments.</p>
<dl class="rdoc-list label-list"><dt>Feature #12686
<dd></dd></dl>
</li><li>
<p>Toplevel return is now allowed.  [Feature #4840]</p>
</li></ul>

<h3 id="label-Core+classes+updates+-28outstanding+ones+only-29">Core classes updates (outstanding ones only)</h3>
<ul><li>
<p>Array</p>
<ul><li>
<p>Array#concat [Feature #12333] Now takes multiple arguments.</p>
</li><li>
<p>Array#max and Array#min.  [Feature #12172] This may cause a tiny incompatibility: if you redefine Enumerable#max and call max to an Array, your redefinition will be now ignored.  You should also redefine Array#max.</p>
</li><li>
<p>Array#pack [Feature #12754] Now takes optional argument `buffer:&#39; to reuse already allocated buffer.</p>
</li><li>
<p>Array#sum  [Feature #12217] This is different from Enumerable#sum in that Array#sum doesn&#39;t depend on the definition of each method.</p>
</li></ul>
</li><li>
<p>Comparable</p>
<ul><li>
<p>Comparable#clamp.  [Feature #10594]</p>
</li></ul>
</li><li>
<p>Dir</p>
<ul><li>
<p>Dir.empty?.  [Feature #10121]</p>
</li></ul>
</li><li>
<p>Enumerable</p>
<ul><li>
<p>Enumerable#chunk called without a block now return an Enumerator</p>
<dl class="rdoc-list label-list"><dt>Feature #2172
<dd></dd></dl>
</li><li>
<p>Enumerable#sum  [Feature #12217]</p>
</li><li>
<p>Enumerable#uniq  [Feature #11090]</p>
</li></ul>
</li><li>
<p>Enumerator::Lazy</p>
<ul><li>
<p>Enumerator::Lazy#chunk_while  [GH-1186]</p>
</li><li>
<p>Enumerator::Lazy#uniq  [Feature #11090]</p>
</li></ul>
</li><li>
<p>File</p>
<ul><li>
<p>File.empty?.  [Feature #9969]</p>
</li></ul>
</li><li>
<p>Float</p>
<ul><li>
<p>Float#ceil, Float#floor, and Float#truncate now take an optional digits, as well as Float#round.  [Feature #12245]</p>
</li><li>
<p>Float#round now takes an optional keyword argument, half option, and the default behavior is round-up.  [Bug #12548] [Bug #12958] half option can be one of :even, :up, and :down.  [Feature #12953]</p>
</li></ul>
</li><li>
<p>Hash</p>
<ul><li>
<p>Hash#compact and Hash#compact!  [Feature #11818]</p>
</li><li>
<p>Hash#transform_values and Hash#transform_values!  [Feature #12512]</p>
</li></ul>
</li><li>
<p>Integer</p>
<ul><li>
<p>Fixnum and Bignum are unified into Integer  [Feature #12005]</p>
</li><li>
<p>Integer#ceil, Integer#floor, and Integer#truncate now take an optional digits, as well as Integer#round.  [Feature #12245]</p>
</li><li>
<p>Integer#digits for extracting columns of place-value notation [Feature #12447]</p>
</li><li>
<p>Integer#round now takes an optional keyword argument, half option, and the default behavior is round-up now.  [Bug #12548] [Bug #12958] half option can be one of :even, :up, and :down.  [Feature #12953]</p>
</li></ul>
</li><li>
<p>IO</p>
<ul><li>
<p>IO#gets, IO#readline, IO#each_line, IO#readlines, IO.foreach now takes an optional keyword argument, chomp flag.  [Feature #12553]</p>
</li></ul>
</li><li>
<p>Kernel</p>
<ul><li>
<p>Kernel#clone now takes an optional keyword argument, freeze flag.</p>
<dl class="rdoc-list label-list"><dt>Feature #12300
<dd></dd></dl>
</li></ul>
</li><li>
<p>MatchData</p>
<ul><li>
<p>MatchData#named_captures [Feature #11999]</p>
</li><li>
<p>MatchData#values_at supports named captures [Feature #9179]</p>
</li></ul>
</li><li>
<p>Module</p>
<ul><li>
<p>Module#refine accepts a module as the argument now. [Feature #12534]</p>
</li><li>
<p>Module.used_modules [Feature #7418]</p>
</li></ul>
</li><li>
<p>Numeric</p>
<ul><li>
<p>Numeric#finite?, Numeric#infinite? [Feature #12039]</p>
</li></ul>
</li><li>
<p>Process</p>
<ul><li>
<p>Support CLOCK_MONOTONIC_RAW_APPROX, CLOCK_UPTIME_RAW, and CLOCK_UPTIME_RAW_APPROX which are introduced by macOS 10.12.</p>
</li></ul>
</li><li>
<p>Rational</p>
<ul><li>
<p>Rational#round now takes an optional keyword argument, half option, and the default behavior is round-up now.  [Bug #12548] [Bug #12958] half option can be one of :even, :up, and :down.  [Feature #12953]</p>
</li></ul>
</li><li>
<p>Regexp</p>
<ul><li>
<p>meta character X matches Unicode 9.0 characters with some workarounds for UTR #51 Unicode Emoji, Version 4.0 emoji zwj sequences.</p>
</li><li>
<p>Regexp#match? [Feature #8110] This returns bool and doesn&#39;t save backref.</p>
</li><li>
<p>Update Onigmo 6.1.1.</p>
<ul><li>
<p>Support absent operator <a href="https://github.com/k-takata/Onigmo/issues/82">github.com/k-takata/Onigmo/issues/82</a></p>
</li></ul>
</li></ul>
</li><li>
<p>Regexp/String: Updated Unicode version from 8.0.0 to 9.0.0 [Feature #12513]</p>
</li><li>
<p>RubyVM::Env</p>
<ul><li>
<p>RubyVM::Env was removed.</p>
</li></ul>
</li><li>
<p>String</p>
<ul><li>
<p>String#casecmp? [Feature #12786]</p>
</li><li>
<p>String#concat, String#prepend [Feature #12333] Now takes multiple arguments.</p>
</li><li>
<p>String#each_line, String#lines now takes an optional keyword argument, chomp flag.  [Feature #12553]</p>
</li><li>
<p>String#match? [Feature #12898]</p>
</li><li>
<p>String#unpack1 [Feature #12752]</p>
</li><li>
<p>String#upcase, String#downcase, String#capitalize, String#swapcase and their bang variants work for all of Unicode, and are no longer limited to ASCII. Supported encodings are UTF-8, UTF-16BE/LE, UTF-32BE/LE, and ISO-8859-1~16. Variations are available with options. See the documentation of String#downcase for details. [Feature #10085]</p>
</li><li>
<p>String.new(capacity: size) [Feature #12024]</p>
</li></ul>
</li><li>
<p>StringIO</p>
<ul><li>
<p>StringIO#gets, StringIO#readline, StringIO#each_line, StringIO#readlines now takes an optional keyword argument, chomp flag.  [Feature #12553]</p>
</li></ul>
</li><li>
<p>Symbol</p>
<ul><li>
<p>Symbol#casecmp? [Feature #12786]</p>
</li><li>
<p>Symbol#match now returns MatchData.  [Bug #11991]</p>
</li><li>
<p>Symbol#match? [Feature #12898]</p>
</li><li>
<p>Symbol#upcase, Symbol#downcase, Symbol#capitalize, and Symbol#swapcase now work for all of Unicode. See the documentation of String#downcase for details. [Feature #10085]</p>
</li></ul>
</li><li>
<p>Thread</p>
<ul><li>
<p>Thread#report_on_exception and Thread.report_on_exception</p>
<dl class="rdoc-list label-list"><dt>Feature #6647
<dd></dd></dl>
</li></ul>
</li><li>
<p>TracePoint</p>
<ul><li>
<p>TracePoint#callee_id [Feature #12747]</p>
</li></ul>
</li><li>
<p>Warning</p>
<ul><li>
<p>New module named Warning is introduced.  By default it has only one singleton method, named warn.  This makes it possible for 3rd-party libraries to control the way warnings are handled.</p>
<dl class="rdoc-list label-list"><dt>Feature #12299
<dd></dd></dl>
</li></ul>
</li></ul>

<h3 id="label-Stdlib+updates+-28outstanding+ones+only-29">Stdlib updates (outstanding ones only)</h3>
<ul><li>
<p>CGI</p>
<ul><li>
<p>Don&#39;t allow , as a separator [Bug #12791]</p>
</li></ul>
</li><li>
<p>CSV</p>
<ul><li>
<p>Add a liberal_parsing option. [Feature #11839]</p>
</li></ul>
</li><li>
<p>IPAddr</p>
<ul><li>
<p>IPAddr#== and IPAddr#&lt;=&gt; no longer raise an exception if coercion fails.</p>
<dl class="rdoc-list label-list"><dt>Bug #12799
<dd></dd></dl>
</li></ul>
</li><li>
<p>IRB</p>
<ul><li>
<p>Binding#irb: Start a REPL session like <code>binding.pry</code> at r56624.</p>
</li></ul>
</li><li>
<p>Logger</p>
<ul><li>
<p>Allow specifying logger parameters in constructor such as level, progname, datetime_format, formatter. [Feature #12224]</p>
</li><li>
<p>Add shift_period_suffix option. [Feature #10772]</p>
</li></ul>
</li><li>
<p>Net::HTTP</p>
<ul><li>
<p>New method: Net::HTTP.post [Feature #12375]</p>
</li></ul>
</li><li>
<p>Net::FTP</p>
<ul><li>
<p>Support TLS (RFC 4217).</p>
</li><li>
<p>Support hash style options for Net::FTP.new.</p>
</li><li>
<p>Add a new optional argument pathname to Net::FTP#status. Contributed by soleboxy. [GH-1478] [Feature #12965]</p>
</li></ul>
</li><li>
<p>OpenSSL</p>
<ul><li>
<p>Includes Ruby/OpenSSL 2.0. OpenSSL has been extracted as a Gem and is maintained at a separate repository now: <a href="https://github.com/ruby/openssl">github.com/ruby/openssl</a>. It still remains as a &#39;default gem&#39;.  [Feature #9612] Refer to ext/openssl/History.md for the full release note.</p>
</li></ul>
</li><li>
<p>optparse</p>
<ul><li>
<p>Add an into option. [Feature #11191]</p>
</li></ul>
</li><li>
<p>pathname</p>
<ul><li>
<p>New method: Pathname#empty? [Feature #12596]</p>
</li></ul>
</li><li>
<p>Readline</p>
<ul><li>
<p>Readline.quoting_detection_proc and Readline.quoting_detection_proc=</p>
<dl class="rdoc-list label-list"><dt>Feature #12659
<dd></dd></dl>
</li></ul>
</li><li>
<p>REXML</p>
<ul><li>
<p>REXML::Element#[]: If String or Symbol is specified, attribute value is returned. Otherwise, Nth child is returned. This is backward compatible change.</p>
</li></ul>
</li><li>
<p>set</p>
<ul><li>
<p>New methods: Set#compare_by_identity and Set#compare_by_identity?.</p>
<dl class="rdoc-list label-list"><dt>Feature #12210
<dd></dd></dl>
</li></ul>
</li><li>
<p>WEBrick</p>
<ul><li>
<p>Don&#39;t allow , as a separator [Bug #12791]</p>
</li></ul>
</li></ul>

<h3 id="label-Compatibility+issues+-28excluding+feature+bug+fixes-29">Compatibility issues (excluding feature bug fixes)</h3>
<ul><li>
<p>Array#sum and Enumerable#sum are implemented.  [Feature #12217] Ruby itself has no compatibility problem because Ruby didn&#39;t have sum method for arrays before Ruby 2.4. However many third party gems, activesupport, facets, simple_stats, etc, defines sum method.  These implementations are mostly compatible but there are subtle differences. Ruby&#39;s sum method should be mostly compatible but it is impossible to be perfectly compatible with all of them.</p>
</li><li>
<p>Fixnum and Bignum are unified into Integer  [Feature #12005] Fixnum class and Bignum class is removed. Integer class is changed from abstract class to concrete class. For example, 0 is an instance of Integer: 0.class returns Integer. The constants Fixnum and Bignum is bound to Integer. So obj.kind_of?(Fixnum) works as obj.kind_of?(Integer). At C-level, Fixnum object and Bignum object should be distinguished by FIXNUM_P(obj) and RB_TYPE_P(obj, T_BIGNUM). RUBY_INTEGER_UNIFICATION can be used to detect this feature at C-level. 0.class == Integer can be used to detect this feature at Ruby-level. The C-level constants, rb_cFixnum and rb_cBignum, are removed. They can cause compilation failure.</p>
</li><li>
<p>String/Symbol#upcase/downcase/swapcase/capitalize(!) now work for all of Unicode, not only for ASCII. [Feature #10085] No change is needed if the data is in ASCII anyway or if the limitation to ASCII was only tolerated while waiting for a more extensive implementation. A change (using the :ascii option) is needed in cases where Unicode data is processed, but the operation has to be limited to ASCII only. A good example of this are internationalized domain names.</p>
</li><li>
<p>TRUE / FALSE / NIL These constants are now obsoleted. [Feature #12574] Use true / false / nil resp. instead.</p>
</li></ul>

<h3 id="label-Stdlib+compatibility+issues+-28excluding+feature+bug+fixes-29">Stdlib compatibility issues (excluding feature bug fixes)</h3>
<ul><li>
<p>DateTime</p>
<ul><li>
<p>DateTime#to_time now preserves timezone.  [Bug #12189]</p>
</li></ul>
</li><li>
<p>PSych</p>
<ul><li>
<p>Update Psych 2.2.2</p>
</li></ul>
</li><li>
<p>RDoc</p>
<ul><li>
<p>Update RDoc 5.0.0</p>
</li></ul>
</li><li>
<p>RubyGems</p>
<ul><li>
<p>Update RubyGems 2.6.8</p>
</li></ul>
</li><li>
<p>shellwords</p>
<ul><li>
<p>Shellwords.shellwords (shellsplit) treats the backslash as escape character only when followed by one of the following characters: $ ` “ \ &lt;newline&gt;</p>
<dl class="rdoc-list label-list"><dt>Bug #10055
<dd></dd></dl>
</li></ul>
</li><li>
<p>Time</p>
<ul><li>
<p>Time#to_time now preserves timezone.  [Bug #12271]</p>
</li></ul>
</li><li>
<p>thread</p>
<ul><li>
<p>the extension library is removed.  Till 2.0 it was a pure ruby script “thread.rb”, which has precedence over “thread.so”, and has been provided in $LOADED_FEATURES since 2.1.</p>
</li></ul>
</li><li>
<p>Tk</p>
<ul><li>
<p>Tk is removed from stdlib.  [Feature #8539] <a href="https://github.com/ruby/tk">github.com/ruby/tk</a> is the new upstream.</p>
</li></ul>
</li><li>
<p>XMLRPC</p>
<ul><li>
<p>XMLRPC is removed from stdlib, and bundled as gem. [Feature #<a href="ruby-core:74239">12160]</a> <a href="https://github.com/ruby/xmlrpc">github.com/ruby/xmlrpc</a> is the new upstream.</p>
</li></ul>
</li><li>
<p>Zlib</p>
<ul><li>
<p>Zlib.gzip and Zlib.gunzip [Feature #13020]</p>
</li></ul>
</li></ul>

<h3 id="label-C+API+updates">C API updates</h3>
<ul><li>
<p>ruby_show_version() will no longer exits the process, if RUBY_SHOW_COPYRIGHT_TO_DIE is set to 0.  This will be the default in the future.</p>
</li><li>
<p>rb_gc_adjust_memory_usage() [Feature #12690]</p>
</li></ul>

<h3 id="label-Supported+platform+changes">Supported platform changes</h3>
<ul><li>
<p>FreeBSD &lt; 4 is no longer supported</p>
</li></ul>

<h3 id="label-Implementation+improvements">Implementation improvements</h3>
<ul><li>
<p>In some condition, `[x, y].max` and `[x, y].min` are optimized so that a temporal array is not created.  The concrete condition is an implementation detail: currently, the array literal must have no splat, must have at least one expression but literal, the length must be &lt;= 0x100, and Array#max and min must not be redefined.  It will work in most casual and real-life use case where it is written with intent to `Math.max(x, y)`.</p>
</li><li>
<p>Thread deadlock detection now shows their backtrace and dependency. [Feature #8214]</p>
</li><li>
<p>st_table (st.c) internal data structure is improved. [Feature #12142]</p>
</li><li>
<p>Rational is extensively optimized. [Feature #12484]</p>
</li></ul>

<h3 id="label-Miscellaneous+changes">Miscellaneous changes</h3>
<ul><li>
<p>ChangeLog is removed from the repository. It is generated from commit messages in Subversion by `make dist`. Also note that now people should follow Git style commit message. The template is written at <a href="https://git-scm.com/book/ch5-2.html" target="_parent" title="Short (50 chars or less) summary of changes">Short (50 chars or less) summary of changes</a>.</p>
<dl class="rdoc-list label-list"><dt>Feature #12283
<dd></dd></dl>
</li></ul>

<div id='footer'></div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>